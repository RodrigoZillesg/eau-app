var fC=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var uH=fC((Dr,Lr)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function s(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=s(l);fetch(l.href,o)}})();var qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function od(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function mC(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function r(){var l=!1;try{l=this instanceof r}catch{}return l?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var l=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,l.get?l:{enumerable:!0,get:function(){return t[r]}})}),s}var Jp={exports:{}},Au={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yw;function pC(){if(yw)return Au;yw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,l,o){var u=null;if(o!==void 0&&(u=""+o),l.key!==void 0&&(u=""+l.key),"key"in l){o={};for(var h in l)h!=="key"&&(o[h]=l[h])}else o=l;return l=o.ref,{$$typeof:t,type:r,key:u,ref:l!==void 0?l:null,props:o}}return Au.Fragment=e,Au.jsx=s,Au.jsxs=s,Au}var bw;function gC(){return bw||(bw=1,Jp.exports=pC()),Jp.exports}var i=gC(),eg={exports:{}},Cu={},tg={exports:{}},sg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xw;function yC(){return xw||(xw=1,function(t){function e($,Y){var W=$.length;$.push(Y);e:for(;0<W;){var oe=W-1>>>1,I=$[oe];if(0<l(I,Y))$[oe]=Y,$[W]=I,W=oe;else break e}}function s($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Y=$[0],W=$.pop();if(W!==Y){$[0]=W;e:for(var oe=0,I=$.length,Q=I>>>1;oe<Q;){var ie=2*(oe+1)-1,X=$[ie],fe=ie+1,ve=$[fe];if(0>l(X,W))fe<I&&0>l(ve,X)?($[oe]=ve,$[fe]=W,oe=fe):($[oe]=X,$[ie]=W,oe=ie);else if(fe<I&&0>l(ve,W))$[oe]=ve,$[fe]=W,oe=fe;else break e}}return Y}function l($,Y){var W=$.sortIndex-Y.sortIndex;return W!==0?W:$.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],p=[],g=1,b=null,v=3,w=!1,x=!1,j=!1,N=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function Z($){for(var Y=s(p);Y!==null;){if(Y.callback===null)r(p);else if(Y.startTime<=$)r(p),Y.sortIndex=Y.expirationTime,e(f,Y);else break;Y=s(p)}}function R($){if(j=!1,Z($),!x)if(s(f)!==null)x=!0,U||(U=!0,q());else{var Y=s(p);Y!==null&&te(R,Y.startTime-$)}}var U=!1,B=-1,A=5,C=-1;function z(){return N?!0:!(t.unstable_now()-C<A)}function L(){if(N=!1,U){var $=t.unstable_now();C=$;var Y=!0;try{e:{x=!1,j&&(j=!1,S(B),B=-1),w=!0;var W=v;try{t:{for(Z($),b=s(f);b!==null&&!(b.expirationTime>$&&z());){var oe=b.callback;if(typeof oe=="function"){b.callback=null,v=b.priorityLevel;var I=oe(b.expirationTime<=$);if($=t.unstable_now(),typeof I=="function"){b.callback=I,Z($),Y=!0;break t}b===s(f)&&r(f),Z($)}else r(f);b=s(f)}if(b!==null)Y=!0;else{var Q=s(p);Q!==null&&te(R,Q.startTime-$),Y=!1}}break e}finally{b=null,v=W,w=!1}Y=void 0}}finally{Y?q():U=!1}}}var q;if(typeof k=="function")q=function(){k(L)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,V=P.port2;P.port1.onmessage=L,q=function(){V.postMessage(null)}}else q=function(){T(L,0)};function te($,Y){B=T(function(){$(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function($){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var W=v;v=Y;try{return $()}finally{v=W}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function($,Y){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var W=v;v=$;try{return Y()}finally{v=W}},t.unstable_scheduleCallback=function($,Y,W){var oe=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?oe+W:oe):W=oe,$){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=W+I,$={id:g++,callback:Y,priorityLevel:$,startTime:W,expirationTime:I,sortIndex:-1},W>oe?($.sortIndex=W,e(p,$),s(f)===null&&$===s(p)&&(j?(S(B),B=-1):j=!0,te(R,W-oe))):($.sortIndex=I,e(f,$),x||w||(x=!0,U||(U=!0,q()))),$},t.unstable_shouldYield=z,t.unstable_wrapCallback=function($){var Y=v;return function(){var W=v;v=Y;try{return $.apply(this,arguments)}finally{v=W}}}}(sg)),sg}var vw;function bC(){return vw||(vw=1,tg.exports=yC()),tg.exports}var rg={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww;function xC(){if(ww)return nt;ww=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.iterator;function v(I){return I===null||typeof I!="object"?null:(I=b&&I[b]||I["@@iterator"],typeof I=="function"?I:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,j={};function N(I,Q,ie){this.props=I,this.context=Q,this.refs=j,this.updater=ie||w}N.prototype.isReactComponent={},N.prototype.setState=function(I,Q){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,Q,"setState")},N.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function T(){}T.prototype=N.prototype;function S(I,Q,ie){this.props=I,this.context=Q,this.refs=j,this.updater=ie||w}var k=S.prototype=new T;k.constructor=S,x(k,N.prototype),k.isPureReactComponent=!0;var Z=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function B(I,Q,ie,X,fe,ve){return ie=ve.ref,{$$typeof:t,type:I,key:Q,ref:ie!==void 0?ie:null,props:ve}}function A(I,Q){return B(I.type,Q,void 0,void 0,void 0,I.props)}function C(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function z(I){var Q={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ie){return Q[ie]})}var L=/\/+/g;function q(I,Q){return typeof I=="object"&&I!==null&&I.key!=null?z(""+I.key):Q.toString(36)}function P(){}function V(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(P,P):(I.status="pending",I.then(function(Q){I.status==="pending"&&(I.status="fulfilled",I.value=Q)},function(Q){I.status==="pending"&&(I.status="rejected",I.reason=Q)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function te(I,Q,ie,X,fe){var ve=typeof I;(ve==="undefined"||ve==="boolean")&&(I=null);var Ee=!1;if(I===null)Ee=!0;else switch(ve){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(I.$$typeof){case t:case e:Ee=!0;break;case g:return Ee=I._init,te(Ee(I._payload),Q,ie,X,fe)}}if(Ee)return fe=fe(I),Ee=X===""?"."+q(I,0):X,Z(fe)?(ie="",Ee!=null&&(ie=Ee.replace(L,"$&/")+"/"),te(fe,Q,ie,"",function(Te){return Te})):fe!=null&&(C(fe)&&(fe=A(fe,ie+(fe.key==null||I&&I.key===fe.key?"":(""+fe.key).replace(L,"$&/")+"/")+Ee)),Q.push(fe)),1;Ee=0;var Re=X===""?".":X+":";if(Z(I))for(var je=0;je<I.length;je++)X=I[je],ve=Re+q(X,je),Ee+=te(X,Q,ie,ve,fe);else if(je=v(I),typeof je=="function")for(I=je.call(I),je=0;!(X=I.next()).done;)X=X.value,ve=Re+q(X,je++),Ee+=te(X,Q,ie,ve,fe);else if(ve==="object"){if(typeof I.then=="function")return te(V(I),Q,ie,X,fe);throw Q=String(I),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function $(I,Q,ie){if(I==null)return I;var X=[],fe=0;return te(I,X,"","",function(ve){return Q.call(ie,ve,fe++)}),X}function Y(I){if(I._status===-1){var Q=I._result;Q=Q(),Q.then(function(ie){(I._status===0||I._status===-1)&&(I._status=1,I._result=ie)},function(ie){(I._status===0||I._status===-1)&&(I._status=2,I._result=ie)}),I._status===-1&&(I._status=0,I._result=Q)}if(I._status===1)return I._result.default;throw I._result}var W=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function oe(){}return nt.Children={map:$,forEach:function(I,Q,ie){$(I,function(){Q.apply(this,arguments)},ie)},count:function(I){var Q=0;return $(I,function(){Q++}),Q},toArray:function(I){return $(I,function(Q){return Q})||[]},only:function(I){if(!C(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},nt.Component=N,nt.Fragment=s,nt.Profiler=l,nt.PureComponent=S,nt.StrictMode=r,nt.Suspense=f,nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,nt.__COMPILER_RUNTIME={__proto__:null,c:function(I){return R.H.useMemoCache(I)}},nt.cache=function(I){return function(){return I.apply(null,arguments)}},nt.cloneElement=function(I,Q,ie){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var X=x({},I.props),fe=I.key,ve=void 0;if(Q!=null)for(Ee in Q.ref!==void 0&&(ve=void 0),Q.key!==void 0&&(fe=""+Q.key),Q)!U.call(Q,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&Q.ref===void 0||(X[Ee]=Q[Ee]);var Ee=arguments.length-2;if(Ee===1)X.children=ie;else if(1<Ee){for(var Re=Array(Ee),je=0;je<Ee;je++)Re[je]=arguments[je+2];X.children=Re}return B(I.type,fe,void 0,void 0,ve,X)},nt.createContext=function(I){return I={$$typeof:u,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:o,_context:I},I},nt.createElement=function(I,Q,ie){var X,fe={},ve=null;if(Q!=null)for(X in Q.key!==void 0&&(ve=""+Q.key),Q)U.call(Q,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(fe[X]=Q[X]);var Ee=arguments.length-2;if(Ee===1)fe.children=ie;else if(1<Ee){for(var Re=Array(Ee),je=0;je<Ee;je++)Re[je]=arguments[je+2];fe.children=Re}if(I&&I.defaultProps)for(X in Ee=I.defaultProps,Ee)fe[X]===void 0&&(fe[X]=Ee[X]);return B(I,ve,void 0,void 0,null,fe)},nt.createRef=function(){return{current:null}},nt.forwardRef=function(I){return{$$typeof:h,render:I}},nt.isValidElement=C,nt.lazy=function(I){return{$$typeof:g,_payload:{_status:-1,_result:I},_init:Y}},nt.memo=function(I,Q){return{$$typeof:p,type:I,compare:Q===void 0?null:Q}},nt.startTransition=function(I){var Q=R.T,ie={};R.T=ie;try{var X=I(),fe=R.S;fe!==null&&fe(ie,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(oe,W)}catch(ve){W(ve)}finally{R.T=Q}},nt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},nt.use=function(I){return R.H.use(I)},nt.useActionState=function(I,Q,ie){return R.H.useActionState(I,Q,ie)},nt.useCallback=function(I,Q){return R.H.useCallback(I,Q)},nt.useContext=function(I){return R.H.useContext(I)},nt.useDebugValue=function(){},nt.useDeferredValue=function(I,Q){return R.H.useDeferredValue(I,Q)},nt.useEffect=function(I,Q,ie){var X=R.H;if(typeof ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(I,Q)},nt.useId=function(){return R.H.useId()},nt.useImperativeHandle=function(I,Q,ie){return R.H.useImperativeHandle(I,Q,ie)},nt.useInsertionEffect=function(I,Q){return R.H.useInsertionEffect(I,Q)},nt.useLayoutEffect=function(I,Q){return R.H.useLayoutEffect(I,Q)},nt.useMemo=function(I,Q){return R.H.useMemo(I,Q)},nt.useOptimistic=function(I,Q){return R.H.useOptimistic(I,Q)},nt.useReducer=function(I,Q,ie){return R.H.useReducer(I,Q,ie)},nt.useRef=function(I){return R.H.useRef(I)},nt.useState=function(I){return R.H.useState(I)},nt.useSyncExternalStore=function(I,Q,ie){return R.H.useSyncExternalStore(I,Q,ie)},nt.useTransition=function(){return R.H.useTransition()},nt.version="19.1.1",nt}var _w;function L0(){return _w||(_w=1,rg.exports=xC()),rg.exports}var ng={exports:{}},Qs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jw;function vC(){if(jw)return Qs;jw=1;var t=L0();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(f,p,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:f,containerInfo:p,implementation:g}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Qs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qs.createPortal=function(f,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(f,p,null,g)},Qs.flushSync=function(f){var p=u.T,g=r.p;try{if(u.T=null,r.p=2,f)return f()}finally{u.T=p,r.p=g,r.d.f()}},Qs.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(f,p))},Qs.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Qs.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var g=p.as,b=h(g,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?r.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:w}):g==="script"&&r.d.X(f,{crossOrigin:b,integrity:v,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Qs.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=h(p.as,p.crossOrigin);r.d.M(f,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(f)},Qs.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,b=h(g,p.crossOrigin);r.d.L(f,g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Qs.preloadModule=function(f,p){if(typeof f=="string")if(p){var g=h(p.as,p.crossOrigin);r.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(f)},Qs.requestFormReset=function(f){r.d.r(f)},Qs.unstable_batchedUpdates=function(f,p){return f(p)},Qs.useFormState=function(f,p,g){return u.H.useFormState(f,p,g)},Qs.useFormStatus=function(){return u.H.useHostTransitionStatus()},Qs.version="19.1.1",Qs}var Nw;function wC(){if(Nw)return ng.exports;Nw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ng.exports=vC(),ng.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function _C(){if(Sw)return Cu;Sw=1;var t=bC(),e=L0(),s=wC();function r(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var a=n,c=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(c=a.return),n=a.return;while(n)}return a.tag===3?c:null}function u(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function h(n){if(o(n)!==n)throw Error(r(188))}function f(n){var a=n.alternate;if(!a){if(a=o(n),a===null)throw Error(r(188));return a!==n?null:n}for(var c=n,d=a;;){var m=c.return;if(m===null)break;var y=m.alternate;if(y===null){if(d=m.return,d!==null){c=d;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===c)return h(m),n;if(y===d)return h(m),a;y=y.sibling}throw Error(r(188))}if(c.return!==d.return)c=m,d=y;else{for(var E=!1,M=m.child;M;){if(M===c){E=!0,c=m,d=y;break}if(M===d){E=!0,d=m,c=y;break}M=M.sibling}if(!E){for(M=y.child;M;){if(M===c){E=!0,c=y,d=m;break}if(M===d){E=!0,d=y,c=m;break}M=M.sibling}if(!E)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?n:a}function p(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=p(n),a!==null)return a;n=n.sibling}return null}var g=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),k=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function q(n){return n===null||typeof n!="object"?null:(n=L&&n[L]||n["@@iterator"],typeof n=="function"?n:null)}var P=Symbol.for("react.client.reference");function V(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===P?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case N:return"Profiler";case j:return"StrictMode";case R:return"Suspense";case U:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case w:return"Portal";case k:return(n.displayName||"Context")+".Provider";case S:return(n._context.displayName||"Context")+".Consumer";case Z:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case B:return a=n.displayName||null,a!==null?a:V(n.type)||"Memo";case A:a=n._payload,n=n._init;try{return V(n(a))}catch{}}return null}var te=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},oe=[],I=-1;function Q(n){return{current:n}}function ie(n){0>I||(n.current=oe[I],oe[I]=null,I--)}function X(n,a){I++,oe[I]=n.current,n.current=a}var fe=Q(null),ve=Q(null),Ee=Q(null),Re=Q(null);function je(n,a){switch(X(Ee,a),X(ve,n),X(fe,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?Vv(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=Vv(a),n=Gv(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ie(fe),X(fe,n)}function Te(){ie(fe),ie(ve),ie(Ee)}function Me(n){n.memoizedState!==null&&X(Re,n);var a=fe.current,c=Gv(a,n.type);a!==c&&(X(ve,n),X(fe,c))}function Oe(n){ve.current===n&&(ie(fe),ie(ve)),Re.current===n&&(ie(Re),_u._currentValue=W)}var De=Object.prototype.hasOwnProperty,Ge=t.unstable_scheduleCallback,Ye=t.unstable_cancelCallback,Xe=t.unstable_shouldYield,st=t.unstable_requestPaint,gt=t.unstable_now,ot=t.unstable_getCurrentPriorityLevel,yt=t.unstable_ImmediatePriority,F=t.unstable_UserBlockingPriority,se=t.unstable_NormalPriority,ue=t.unstable_LowPriority,Ce=t.unstable_IdlePriority,Ne=t.log,Se=t.unstable_setDisableYieldValue,ke=null,Le=null;function Ke(n){if(typeof Ne=="function"&&Se(n),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(ke,n)}catch{}}var ft=Math.clz32?Math.clz32:bs,Wt=Math.log,Qt=Math.LN2;function bs(n){return n>>>=0,n===0?32:31-(Wt(n)/Qt|0)|0}var As=256,$s=4194304;function Gs(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ur(n,a,c){var d=n.pendingLanes;if(d===0)return 0;var m=0,y=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var M=d&134217727;return M!==0?(d=M&~y,d!==0?m=Gs(d):(E&=M,E!==0?m=Gs(E):c||(c=M&~n,c!==0&&(m=Gs(c))))):(M=d&~y,M!==0?m=Gs(M):E!==0?m=Gs(E):c||(c=d&~n,c!==0&&(m=Gs(c)))),m===0?0:a!==0&&a!==m&&(a&y)===0&&(y=m&-m,c=a&-a,y>=c||y===32&&(c&4194048)!==0)?a:m}function ur(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function zr(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dr(){var n=As;return As<<=1,(As&4194048)===0&&(As=256),n}function oi(){var n=$s;return $s<<=1,($s&62914560)===0&&($s=4194304),n}function ci(n){for(var a=[],c=0;31>c;c++)a.push(n);return a}function _r(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Wa(n,a,c,d,m,y){var E=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var M=n.entanglements,H=n.expirationTimes,ne=n.hiddenUpdates;for(c=E&~c;0<c;){var me=31-ft(c),we=1<<me;M[me]=0,H[me]=-1;var ae=ne[me];if(ae!==null)for(ne[me]=null,me=0;me<ae.length;me++){var le=ae[me];le!==null&&(le.lane&=-536870913)}c&=~we}d!==0&&Ln(n,d,0),y!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=y&~(E&~a))}function Ln(n,a,c){n.pendingLanes|=a,n.suspendedLanes&=~a;var d=31-ft(a);n.entangledLanes|=a,n.entanglements[d]=n.entanglements[d]|1073741824|c&4194090}function Wi(n,a){var c=n.entangledLanes|=a;for(n=n.entanglements;c;){var d=31-ft(c),m=1<<d;m&a|n[d]&a&&(n[d]|=a),c&=~m}}function ui(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function di(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function an(){var n=Y.p;return n!==0?n:(n=window.event,n===void 0?32:dw(n.type))}function Jl(n,a){var c=Y.p;try{return Y.p=n,a()}finally{Y.p=c}}var Cs=Math.random().toString(36).slice(2),fs="__reactFiber$"+Cs,ks="__reactProps$"+Cs,qn="__reactContainer$"+Cs,Qi="__reactEvents$"+Cs,Qa="__reactListeners$"+Cs,xs="__reactHandles$"+Cs,eo="__reactResources$"+Cs,hi="__reactMarker$"+Cs;function Xa(n){delete n[fs],delete n[ks],delete n[Qi],delete n[Qa],delete n[xs]}function Pn(n){var a=n[fs];if(a)return a;for(var c=n.parentNode;c;){if(a=c[qn]||c[fs]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(n=Wv(n);n!==null;){if(c=n[fs])return c;n=Wv(n)}return a}n=c,c=n.parentNode}return null}function In(n){if(n=n[fs]||n[qn]){var a=n.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return n}return null}function Xt(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(r(33))}function $n(n){var a=n[eo];return a||(a=n[eo]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Jt(n){n[hi]=!0}var to=new Set,so={};function ln(n,a){ns(n,a),ns(n+"Capture",a)}function ns(n,a){for(so[n]=a,n=0;n<a.length;n++)to.add(a[n])}var Mc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ro={},no={};function Dc(n){return De.call(no,n)?!0:De.call(ro,n)?!1:Mc.test(n)?no[n]=!0:(ro[n]=!0,!1)}function Xi(n,a,c){if(Dc(a))if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+c)}}function on(n,a,c){if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+c)}}function hr(n,a,c,d){if(d===null)n.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(a,c,""+d)}}var Un,jr;function Br(n){if(Un===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Un=a&&a[1]||"",jr=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Un+n+jr}var Ja=!1;function el(n,a){if(!n||Ja)return"";Ja=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(le){var ae=le}Reflect.construct(n,[],we)}else{try{we.call()}catch(le){ae=le}n.call(we.prototype)}}else{try{throw Error()}catch(le){ae=le}(we=n())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(le){if(le&&ae&&typeof le.stack=="string")return[le.stack,ae.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),E=y[0],M=y[1];if(E&&M){var H=E.split(`
`),ne=M.split(`
`);for(m=d=0;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;for(;m<ne.length&&!ne[m].includes("DetermineComponentFrameRoot");)m++;if(d===H.length||m===ne.length)for(d=H.length-1,m=ne.length-1;1<=d&&0<=m&&H[d]!==ne[m];)m--;for(;1<=d&&0<=m;d--,m--)if(H[d]!==ne[m]){if(d!==1||m!==1)do if(d--,m--,0>m||H[d]!==ne[m]){var me=`
`+H[d].replace(" at new "," at ");return n.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",n.displayName)),me}while(1<=d&&0<=m);break}}}finally{Ja=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?Br(c):""}function Lc(n){switch(n.tag){case 26:case 27:case 5:return Br(n.type);case 16:return Br("Lazy");case 13:return Br("Suspense");case 19:return Br("SuspenseList");case 0:case 15:return el(n.type,!1);case 11:return el(n.type.render,!1);case 1:return el(n.type,!0);case 31:return Br("Activity");default:return""}}function io(n){try{var a="";do a+=Lc(n),n=n.return;while(n);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Zs(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function fi(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function tl(n){var a=fi(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,a),d=""+n[a];if(!n.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,y=c.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return m.call(this)},set:function(E){d=""+E,y.call(this,E)}}),Object.defineProperty(n,a,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function Fr(n){n._valueTracker||(n._valueTracker=tl(n))}function sl(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var c=a.getValue(),d="";return n&&(d=fi(n)?n.checked?"true":"false":n.value),n=d,n!==c?(a.setValue(n),!0):!1}function mi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var qc=/[\n"\\]/g;function Ys(n){return n.replace(qc,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function rl(n,a,c,d,m,y,E,M){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),a!=null?E==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+Zs(a)):n.value!==""+Zs(a)&&(n.value=""+Zs(a)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),a!=null?pi(n,E,Zs(a)):c!=null?pi(n,E,Zs(c)):d!=null&&n.removeAttribute("value"),m==null&&y!=null&&(n.defaultChecked=!!y),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?n.name=""+Zs(M):n.removeAttribute("name")}function ao(n,a,c,d,m,y,E,M){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null))return;c=c!=null?""+Zs(c):"",a=a!=null?""+Zs(a):c,M||a===n.value||(n.value=a),n.defaultValue=a}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=M?n.checked:!!d,n.defaultChecked=!!d,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function pi(n,a,c){a==="number"&&mi(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function zn(n,a,c,d){if(n=n.options,a){a={};for(var m=0;m<c.length;m++)a["$"+c[m]]=!0;for(c=0;c<n.length;c++)m=a.hasOwnProperty("$"+n[c].value),n[c].selected!==m&&(n[c].selected=m),m&&d&&(n[c].defaultSelected=!0)}else{for(c=""+Zs(c),a=null,m=0;m<n.length;m++){if(n[m].value===c){n[m].selected=!0,d&&(n[m].defaultSelected=!0);return}a!==null||n[m].disabled||(a=n[m])}a!==null&&(a.selected=!0)}}function lo(n,a,c){if(a!=null&&(a=""+Zs(a),a!==n.value&&(n.value=a),c==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=c!=null?""+Zs(c):""}function Bn(n,a,c,d){if(a==null){if(d!=null){if(c!=null)throw Error(r(92));if(te(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),a=c}c=Zs(a),n.defaultValue=c,d=n.textContent,d===c&&d!==""&&d!==null&&(n.value=d)}function Ts(n,a){if(a){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=a;return}}n.textContent=a}var cn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hr(n,a,c){var d=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":d?n.setProperty(a,c):typeof c!="number"||c===0||cn.has(a)?a==="float"?n.cssFloat=c:n[a]=(""+c).trim():n[a]=c+"px"}function oo(n,a,c){if(a!=null&&typeof a!="object")throw Error(r(62));if(n=n.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var m in a)d=a[m],a.hasOwnProperty(m)&&c[m]!==d&&Hr(n,m,d)}else for(var y in a)a.hasOwnProperty(y)&&Hr(n,y,a[y])}function fr(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ic=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ji(n){return Ic.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var nl=null;function ea(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var es=null,un=null;function il(n){var a=In(n);if(a&&(n=a.stateNode)){var c=n[ks]||null;e:switch(n=a.stateNode,a.type){case"input":if(rl(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ys(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var d=c[a];if(d!==n&&d.form===n.form){var m=d[ks]||null;if(!m)throw Error(r(90));rl(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<c.length;a++)d=c[a],d.form===n.form&&sl(d)}break e;case"textarea":lo(n,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&zn(n,!!c.multiple,a,!1)}}}var Fn=!1;function ta(n,a,c){if(Fn)return n(a,c);Fn=!0;try{var d=n(a);return d}finally{if(Fn=!1,(es!==null||un!==null)&&(hh(),es&&(a=es,n=un,un=es=null,il(a),n)))for(a=0;a<n.length;a++)il(n[a])}}function Vr(n,a){var c=n.stateNode;if(c===null)return null;var d=c[ks]||null;if(d===null)return null;c=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(r(231,a,typeof c));return c}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sa=!1;if(Nr)try{var dn={};Object.defineProperty(dn,"passive",{get:function(){sa=!0}}),window.addEventListener("test",dn,dn),window.removeEventListener("test",dn,dn)}catch{sa=!1}var Sr=null,mr=null,gi=null;function ra(){if(gi)return gi;var n,a=mr,c=a.length,d,m="value"in Sr?Sr.value:Sr.textContent,y=m.length;for(n=0;n<c&&a[n]===m[n];n++);var E=c-n;for(d=1;d<=E&&a[c-d]===m[y-d];d++);return gi=m.slice(n,1<d?1-d:void 0)}function na(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function ia(){return!0}function _(){return!1}function D(n){function a(c,d,m,y,E){this._reactName=c,this._targetInst=m,this.type=d,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var M in n)n.hasOwnProperty(M)&&(c=n[M],this[M]=c?c(y):y[M]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ia:_,this.isPropagationStopped=_,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ia)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ia)},persist:function(){},isPersistent:ia}),a}var G={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},he=D(G),et=g({},G,{view:0,detail:0}),He=D(et),mt,ct,Rt,pt=g({},et,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lm,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Rt&&(Rt&&n.type==="mousemove"?(mt=n.screenX-Rt.screenX,ct=n.screenY-Rt.screenY):ct=mt=0,Rt=n),mt)},movementY:function(n){return"movementY"in n?n.movementY:ct}}),vs=D(pt),Ks=g({},pt,{dataTransfer:0}),is=D(Ks),Os=g({},et,{relatedTarget:0}),as=D(Os),Hn=g({},G,{animationName:0,elapsedTime:0,pseudoElement:0}),hn=D(Hn),yi=g({},G,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Rd=D(yi),co=g({},G,{data:0}),al=D(co),_E={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SE(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=NE[n])?!!a[n]:!1}function lm(){return SE}var EE=g({},et,{key:function(n){if(n.key){var a=_E[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=na(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?jE[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lm,charCode:function(n){return n.type==="keypress"?na(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?na(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),AE=D(EE),CE=g({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jy=D(CE),kE=g({},et,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lm}),TE=D(kE),OE=g({},G,{propertyName:0,elapsedTime:0,pseudoElement:0}),RE=D(OE),ME=g({},pt,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),DE=D(ME),LE=g({},G,{newState:0,oldState:0}),qE=D(LE),PE=[9,13,27,32],om=Nr&&"CompositionEvent"in window,$c=null;Nr&&"documentMode"in document&&($c=document.documentMode);var IE=Nr&&"TextEvent"in window&&!$c,eb=Nr&&(!om||$c&&8<$c&&11>=$c),tb=" ",sb=!1;function rb(n,a){switch(n){case"keyup":return PE.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nb(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var uo=!1;function $E(n,a){switch(n){case"compositionend":return nb(a);case"keypress":return a.which!==32?null:(sb=!0,tb);case"textInput":return n=a.data,n===tb&&sb?null:n;default:return null}}function UE(n,a){if(uo)return n==="compositionend"||!om&&rb(n,a)?(n=ra(),gi=mr=Sr=null,uo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return eb&&a.locale!=="ko"?null:a.data;default:return null}}var zE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ib(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!zE[n.type]:a==="textarea"}function ab(n,a,c,d){es?un?un.push(d):un=[d]:es=d,a=bh(a,"onChange"),0<a.length&&(c=new he("onChange","change",null,c,d),n.push({event:c,listeners:a}))}var Uc=null,zc=null;function BE(n){Uv(n,0)}function Md(n){var a=Xt(n);if(sl(a))return n}function lb(n,a){if(n==="change")return a}var ob=!1;if(Nr){var cm;if(Nr){var um="oninput"in document;if(!um){var cb=document.createElement("div");cb.setAttribute("oninput","return;"),um=typeof cb.oninput=="function"}cm=um}else cm=!1;ob=cm&&(!document.documentMode||9<document.documentMode)}function ub(){Uc&&(Uc.detachEvent("onpropertychange",db),zc=Uc=null)}function db(n){if(n.propertyName==="value"&&Md(zc)){var a=[];ab(a,zc,n,ea(n)),ta(BE,a)}}function FE(n,a,c){n==="focusin"?(ub(),Uc=a,zc=c,Uc.attachEvent("onpropertychange",db)):n==="focusout"&&ub()}function HE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Md(zc)}function VE(n,a){if(n==="click")return Md(a)}function GE(n,a){if(n==="input"||n==="change")return Md(a)}function ZE(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var Er=typeof Object.is=="function"?Object.is:ZE;function Bc(n,a){if(Er(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var c=Object.keys(n),d=Object.keys(a);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var m=c[d];if(!De.call(a,m)||!Er(n[m],a[m]))return!1}return!0}function hb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function fb(n,a){var c=hb(n);n=0;for(var d;c;){if(c.nodeType===3){if(d=n+c.textContent.length,n<=a&&d>=a)return{node:c,offset:a-n};n=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=hb(c)}}function mb(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?mb(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function pb(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=mi(n.document);a instanceof n.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)n=a.contentWindow;else break;a=mi(n.document)}return a}function dm(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var YE=Nr&&"documentMode"in document&&11>=document.documentMode,ho=null,hm=null,Fc=null,fm=!1;function gb(n,a,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;fm||ho==null||ho!==mi(d)||(d=ho,"selectionStart"in d&&dm(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Fc&&Bc(Fc,d)||(Fc=d,d=bh(hm,"onSelect"),0<d.length&&(a=new he("onSelect","select",null,a,c),n.push({event:a,listeners:d}),a.target=ho)))}function ll(n,a){var c={};return c[n.toLowerCase()]=a.toLowerCase(),c["Webkit"+n]="webkit"+a,c["Moz"+n]="moz"+a,c}var fo={animationend:ll("Animation","AnimationEnd"),animationiteration:ll("Animation","AnimationIteration"),animationstart:ll("Animation","AnimationStart"),transitionrun:ll("Transition","TransitionRun"),transitionstart:ll("Transition","TransitionStart"),transitioncancel:ll("Transition","TransitionCancel"),transitionend:ll("Transition","TransitionEnd")},mm={},yb={};Nr&&(yb=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function ol(n){if(mm[n])return mm[n];if(!fo[n])return n;var a=fo[n],c;for(c in a)if(a.hasOwnProperty(c)&&c in yb)return mm[n]=a[c];return n}var bb=ol("animationend"),xb=ol("animationiteration"),vb=ol("animationstart"),KE=ol("transitionrun"),WE=ol("transitionstart"),QE=ol("transitioncancel"),wb=ol("transitionend"),_b=new Map,pm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pm.push("scrollEnd");function fn(n,a){_b.set(n,a),ln(a,[n])}var jb=new WeakMap;function Gr(n,a){if(typeof n=="object"&&n!==null){var c=jb.get(n);return c!==void 0?c:(a={value:n,source:a,stack:io(a)},jb.set(n,a),a)}return{value:n,source:a,stack:io(a)}}var Zr=[],mo=0,gm=0;function Dd(){for(var n=mo,a=gm=mo=0;a<n;){var c=Zr[a];Zr[a++]=null;var d=Zr[a];Zr[a++]=null;var m=Zr[a];Zr[a++]=null;var y=Zr[a];if(Zr[a++]=null,d!==null&&m!==null){var E=d.pending;E===null?m.next=m:(m.next=E.next,E.next=m),d.pending=m}y!==0&&Nb(c,m,y)}}function Ld(n,a,c,d){Zr[mo++]=n,Zr[mo++]=a,Zr[mo++]=c,Zr[mo++]=d,gm|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function ym(n,a,c,d){return Ld(n,a,c,d),qd(n)}function po(n,a){return Ld(n,null,null,a),qd(n)}function Nb(n,a,c){n.lanes|=c;var d=n.alternate;d!==null&&(d.lanes|=c);for(var m=!1,y=n.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(m=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,m&&a!==null&&(m=31-ft(c),n=y.hiddenUpdates,d=n[m],d===null?n[m]=[a]:d.push(a),a.lane=c|536870912),y):null}function qd(n){if(50<mu)throw mu=0,jp=null,Error(r(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var go={};function XE(n,a,c,d){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(n,a,c,d){return new XE(n,a,c,d)}function bm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function bi(n,a){var c=n.alternate;return c===null?(c=Ar(n.tag,a,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=a,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,a=n.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function Sb(n,a){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,a=c.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function Pd(n,a,c,d,m,y){var E=0;if(d=n,typeof n=="function")bm(n)&&(E=1);else if(typeof n=="string")E=eC(n,c,fe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=Ar(31,c,a,m),n.elementType=C,n.lanes=y,n;case x:return cl(c.children,m,y,a);case j:E=8,m|=24;break;case N:return n=Ar(12,c,a,m|2),n.elementType=N,n.lanes=y,n;case R:return n=Ar(13,c,a,m),n.elementType=R,n.lanes=y,n;case U:return n=Ar(19,c,a,m),n.elementType=U,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case T:case k:E=10;break e;case S:E=9;break e;case Z:E=11;break e;case B:E=14;break e;case A:E=16,d=null;break e}E=29,c=Error(r(130,n===null?"null":typeof n,"")),d=null}return a=Ar(E,c,a,m),a.elementType=n,a.type=d,a.lanes=y,a}function cl(n,a,c,d){return n=Ar(7,n,d,a),n.lanes=c,n}function xm(n,a,c){return n=Ar(6,n,null,a),n.lanes=c,n}function vm(n,a,c){return a=Ar(4,n.children!==null?n.children:[],n.key,a),a.lanes=c,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var yo=[],bo=0,Id=null,$d=0,Yr=[],Kr=0,ul=null,xi=1,vi="";function dl(n,a){yo[bo++]=$d,yo[bo++]=Id,Id=n,$d=a}function Eb(n,a,c){Yr[Kr++]=xi,Yr[Kr++]=vi,Yr[Kr++]=ul,ul=n;var d=xi;n=vi;var m=32-ft(d)-1;d&=~(1<<m),c+=1;var y=32-ft(a)+m;if(30<y){var E=m-m%5;y=(d&(1<<E)-1).toString(32),d>>=E,m-=E,xi=1<<32-ft(a)+m|c<<m|d,vi=y+n}else xi=1<<y|c<<m|d,vi=n}function wm(n){n.return!==null&&(dl(n,1),Eb(n,1,0))}function _m(n){for(;n===Id;)Id=yo[--bo],yo[bo]=null,$d=yo[--bo],yo[bo]=null;for(;n===ul;)ul=Yr[--Kr],Yr[Kr]=null,vi=Yr[--Kr],Yr[Kr]=null,xi=Yr[--Kr],Yr[Kr]=null}var sr=null,ts=null,_t=!1,hl=null,Vn=!1,jm=Error(r(519));function fl(n){var a=Error(r(418,""));throw Gc(Gr(a,n)),jm}function Ab(n){var a=n.stateNode,c=n.type,d=n.memoizedProps;switch(a[fs]=n,a[ks]=d,c){case"dialog":dt("cancel",a),dt("close",a);break;case"iframe":case"object":case"embed":dt("load",a);break;case"video":case"audio":for(c=0;c<gu.length;c++)dt(gu[c],a);break;case"source":dt("error",a);break;case"img":case"image":case"link":dt("error",a),dt("load",a);break;case"details":dt("toggle",a);break;case"input":dt("invalid",a),ao(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Fr(a);break;case"select":dt("invalid",a);break;case"textarea":dt("invalid",a),Bn(a,d.value,d.defaultValue,d.children),Fr(a)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||d.suppressHydrationWarning===!0||Hv(a.textContent,c)?(d.popover!=null&&(dt("beforetoggle",a),dt("toggle",a)),d.onScroll!=null&&dt("scroll",a),d.onScrollEnd!=null&&dt("scrollend",a),d.onClick!=null&&(a.onclick=xh),a=!0):a=!1,a||fl(n)}function Cb(n){for(sr=n.return;sr;)switch(sr.tag){case 5:case 13:Vn=!1;return;case 27:case 3:Vn=!0;return;default:sr=sr.return}}function Hc(n){if(n!==sr)return!1;if(!_t)return Cb(n),_t=!0,!1;var a=n.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||$p(n.type,n.memoizedProps)),c=!c),c&&ts&&fl(n),Cb(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,a=0;n;){if(n.nodeType===8)if(c=n.data,c==="/$"){if(a===0){ts=pn(n.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++;n=n.nextSibling}ts=null}}else a===27?(a=ts,wa(n.type)?(n=Fp,Fp=null,ts=n):ts=a):ts=sr?pn(n.stateNode.nextSibling):null;return!0}function Vc(){ts=sr=null,_t=!1}function kb(){var n=hl;return n!==null&&(yr===null?yr=n:yr.push.apply(yr,n),hl=null),n}function Gc(n){hl===null?hl=[n]:hl.push(n)}var Nm=Q(null),ml=null,wi=null;function aa(n,a,c){X(Nm,a._currentValue),a._currentValue=c}function _i(n){n._currentValue=Nm.current,ie(Nm)}function Sm(n,a,c){for(;n!==null;){var d=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),n===c)break;n=n.return}}function Em(n,a,c,d){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var y=m.dependencies;if(y!==null){var E=m.child;y=y.firstContext;e:for(;y!==null;){var M=y;y=m;for(var H=0;H<a.length;H++)if(M.context===a[H]){y.lanes|=c,M=y.alternate,M!==null&&(M.lanes|=c),Sm(y.return,c,n),d||(E=null);break e}y=M.next}}else if(m.tag===18){if(E=m.return,E===null)throw Error(r(341));E.lanes|=c,y=E.alternate,y!==null&&(y.lanes|=c),Sm(E,c,n),E=null}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===n){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}}function Zc(n,a,c,d){n=null;for(var m=a,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var E=m.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var M=m.type;Er(m.pendingProps.value,E.value)||(n!==null?n.push(M):n=[M])}}else if(m===Re.current){if(E=m.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(_u):n=[_u])}m=m.return}n!==null&&Em(a,n,c,d),a.flags|=262144}function Ud(n){for(n=n.firstContext;n!==null;){if(!Er(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function pl(n){ml=n,wi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ws(n){return Tb(ml,n)}function zd(n,a){return ml===null&&pl(n),Tb(n,a)}function Tb(n,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},wi===null){if(n===null)throw Error(r(308));wi=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else wi=wi.next=a;return c}var JE=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(c,d){n.push(d)}};this.abort=function(){a.aborted=!0,n.forEach(function(c){return c()})}},eA=t.unstable_scheduleCallback,tA=t.unstable_NormalPriority,ws={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Am(){return{controller:new JE,data:new Map,refCount:0}}function Yc(n){n.refCount--,n.refCount===0&&eA(tA,function(){n.controller.abort()})}var Kc=null,Cm=0,xo=0,vo=null;function sA(n,a){if(Kc===null){var c=Kc=[];Cm=0,xo=Tp(),vo={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Cm++,a.then(Ob,Ob),a}function Ob(){if(--Cm===0&&Kc!==null){vo!==null&&(vo.status="fulfilled");var n=Kc;Kc=null,xo=0,vo=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function rA(n,a){var c=[],d={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return n.then(function(){d.status="fulfilled",d.value=a;for(var m=0;m<c.length;m++)(0,c[m])(a)},function(m){for(d.status="rejected",d.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),d}var Rb=$.S;$.S=function(n,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&sA(n,a),Rb!==null&&Rb(n,a)};var gl=Q(null);function km(){var n=gl.current;return n!==null?n:Mt.pooledCache}function Bd(n,a){a===null?X(gl,gl.current):X(gl,a.pool)}function Mb(){var n=km();return n===null?null:{parent:ws._currentValue,pool:n}}var Wc=Error(r(460)),Db=Error(r(474)),Fd=Error(r(542)),Tm={then:function(){}};function Lb(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Hd(){}function qb(n,a,c){switch(c=n[c],c===void 0?n.push(a):c!==a&&(a.then(Hd,Hd),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,Ib(n),n;default:if(typeof a.status=="string")a.then(Hd,Hd);else{if(n=Mt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=a,n.status="pending",n.then(function(d){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=d}},function(d){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,Ib(n),n}throw Qc=a,Wc}}var Qc=null;function Pb(){if(Qc===null)throw Error(r(459));var n=Qc;return Qc=null,n}function Ib(n){if(n===Wc||n===Fd)throw Error(r(483))}var la=!1;function Om(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rm(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function oa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ca(n,a,c){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Nt&2)!==0){var m=d.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),d.pending=a,a=qd(n),Nb(n,null,c),a}return Ld(n,d,a,c),qd(n)}function Xc(n,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var d=a.lanes;d&=n.pendingLanes,c|=d,a.lanes=c,Wi(n,c)}}function Mm(n,a){var c=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var m=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?m=y=E:y=y.next=E,c=c.next}while(c!==null);y===null?m=y=a:y=y.next=a}else m=y=a;c={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=a:n.next=a,c.lastBaseUpdate=a}var Dm=!1;function Jc(){if(Dm){var n=vo;if(n!==null)throw n}}function eu(n,a,c,d){Dm=!1;var m=n.updateQueue;la=!1;var y=m.firstBaseUpdate,E=m.lastBaseUpdate,M=m.shared.pending;if(M!==null){m.shared.pending=null;var H=M,ne=H.next;H.next=null,E===null?y=ne:E.next=ne,E=H;var me=n.alternate;me!==null&&(me=me.updateQueue,M=me.lastBaseUpdate,M!==E&&(M===null?me.firstBaseUpdate=ne:M.next=ne,me.lastBaseUpdate=H))}if(y!==null){var we=m.baseState;E=0,me=ne=H=null,M=y;do{var ae=M.lane&-536870913,le=ae!==M.lane;if(le?(bt&ae)===ae:(d&ae)===ae){ae!==0&&ae===xo&&(Dm=!0),me!==null&&(me=me.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var tt=n,Qe=M;ae=a;var kt=c;switch(Qe.tag){case 1:if(tt=Qe.payload,typeof tt=="function"){we=tt.call(kt,we,ae);break e}we=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=Qe.payload,ae=typeof tt=="function"?tt.call(kt,we,ae):tt,ae==null)break e;we=g({},we,ae);break e;case 2:la=!0}}ae=M.callback,ae!==null&&(n.flags|=64,le&&(n.flags|=8192),le=m.callbacks,le===null?m.callbacks=[ae]:le.push(ae))}else le={lane:ae,tag:M.tag,payload:M.payload,callback:M.callback,next:null},me===null?(ne=me=le,H=we):me=me.next=le,E|=ae;if(M=M.next,M===null){if(M=m.shared.pending,M===null)break;le=M,M=le.next,le.next=null,m.lastBaseUpdate=le,m.shared.pending=null}}while(!0);me===null&&(H=we),m.baseState=H,m.firstBaseUpdate=ne,m.lastBaseUpdate=me,y===null&&(m.shared.lanes=0),ya|=E,n.lanes=E,n.memoizedState=we}}function $b(n,a){if(typeof n!="function")throw Error(r(191,n));n.call(a)}function Ub(n,a){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)$b(c[n],a)}var wo=Q(null),Vd=Q(0);function zb(n,a){n=ki,X(Vd,n),X(wo,a),ki=n|a.baseLanes}function Lm(){X(Vd,ki),X(wo,wo.current)}function qm(){ki=Vd.current,ie(wo),ie(Vd)}var ua=0,it=null,At=null,ms=null,Gd=!1,_o=!1,yl=!1,Zd=0,tu=0,jo=null,nA=0;function ls(){throw Error(r(321))}function Pm(n,a){if(a===null)return!1;for(var c=0;c<a.length&&c<n.length;c++)if(!Er(n[c],a[c]))return!1;return!0}function Im(n,a,c,d,m,y){return ua=y,it=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,$.H=n===null||n.memoizedState===null?Nx:Sx,yl=!1,y=c(d,m),yl=!1,_o&&(y=Fb(a,c,d,m)),Bb(n),y}function Bb(n){$.H=Jd;var a=At!==null&&At.next!==null;if(ua=0,ms=At=it=null,Gd=!1,tu=0,jo=null,a)throw Error(r(300));n===null||Rs||(n=n.dependencies,n!==null&&Ud(n)&&(Rs=!0))}function Fb(n,a,c,d){it=n;var m=0;do{if(_o&&(jo=null),tu=0,_o=!1,25<=m)throw Error(r(301));if(m+=1,ms=At=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}$.H=dA,y=a(c,d)}while(_o);return y}function iA(){var n=$.H,a=n.useState()[0];return a=typeof a.then=="function"?su(a):a,n=n.useState()[0],(At!==null?At.memoizedState:null)!==n&&(it.flags|=1024),a}function $m(){var n=Zd!==0;return Zd=0,n}function Um(n,a,c){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~c}function zm(n){if(Gd){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Gd=!1}ua=0,ms=At=it=null,_o=!1,tu=Zd=0,jo=null}function pr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ms===null?it.memoizedState=ms=n:ms=ms.next=n,ms}function ps(){if(At===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=At.next;var a=ms===null?it.memoizedState:ms.next;if(a!==null)ms=a,At=n;else{if(n===null)throw it.alternate===null?Error(r(467)):Error(r(310));At=n,n={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},ms===null?it.memoizedState=ms=n:ms=ms.next=n}return ms}function Bm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function su(n){var a=tu;return tu+=1,jo===null&&(jo=[]),n=qb(jo,n,a),a=it,(ms===null?a.memoizedState:ms.next)===null&&(a=a.alternate,$.H=a===null||a.memoizedState===null?Nx:Sx),n}function Yd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return su(n);if(n.$$typeof===k)return Ws(n)}throw Error(r(438,String(n)))}function Fm(n){var a=null,c=it.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var d=it.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Bm(),it.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(n),d=0;d<n;d++)c[d]=z;return a.index++,c}function ji(n,a){return typeof a=="function"?a(n):a}function Kd(n){var a=ps();return Hm(a,At,n)}function Hm(n,a,c){var d=n.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var m=n.baseQueue,y=d.pending;if(y!==null){if(m!==null){var E=m.next;m.next=y.next,y.next=E}a.baseQueue=m=y,d.pending=null}if(y=n.baseState,m===null)n.memoizedState=y;else{a=m.next;var M=E=null,H=null,ne=a,me=!1;do{var we=ne.lane&-536870913;if(we!==ne.lane?(bt&we)===we:(ua&we)===we){var ae=ne.revertLane;if(ae===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),we===xo&&(me=!0);else if((ua&ae)===ae){ne=ne.next,ae===xo&&(me=!0);continue}else we={lane:0,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},H===null?(M=H=we,E=y):H=H.next=we,it.lanes|=ae,ya|=ae;we=ne.action,yl&&c(y,we),y=ne.hasEagerState?ne.eagerState:c(y,we)}else ae={lane:we,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},H===null?(M=H=ae,E=y):H=H.next=ae,it.lanes|=we,ya|=we;ne=ne.next}while(ne!==null&&ne!==a);if(H===null?E=y:H.next=M,!Er(y,n.memoizedState)&&(Rs=!0,me&&(c=vo,c!==null)))throw c;n.memoizedState=y,n.baseState=E,n.baseQueue=H,d.lastRenderedState=y}return m===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function Vm(n){var a=ps(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=n;var d=c.dispatch,m=c.pending,y=a.memoizedState;if(m!==null){c.pending=null;var E=m=m.next;do y=n(y,E.action),E=E.next;while(E!==m);Er(y,a.memoizedState)||(Rs=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,d]}function Hb(n,a,c){var d=it,m=ps(),y=_t;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=a();var E=!Er((At||m).memoizedState,c);E&&(m.memoizedState=c,Rs=!0),m=m.queue;var M=Zb.bind(null,d,m,n);if(ru(2048,8,M,[n]),m.getSnapshot!==a||E||ms!==null&&ms.memoizedState.tag&1){if(d.flags|=2048,No(9,Wd(),Gb.bind(null,d,m,c,a),null),Mt===null)throw Error(r(349));y||(ua&124)!==0||Vb(d,a,c)}return c}function Vb(n,a,c){n.flags|=16384,n={getSnapshot:a,value:c},a=it.updateQueue,a===null?(a=Bm(),it.updateQueue=a,a.stores=[n]):(c=a.stores,c===null?a.stores=[n]:c.push(n))}function Gb(n,a,c,d){a.value=c,a.getSnapshot=d,Yb(a)&&Kb(n)}function Zb(n,a,c){return c(function(){Yb(a)&&Kb(n)})}function Yb(n){var a=n.getSnapshot;n=n.value;try{var c=a();return!Er(n,c)}catch{return!0}}function Kb(n){var a=po(n,2);a!==null&&Rr(a,n,2)}function Gm(n){var a=pr();if(typeof n=="function"){var c=n;if(n=c(),yl){Ke(!0);try{c()}finally{Ke(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:n},a}function Wb(n,a,c,d){return n.baseState=c,Hm(n,At,typeof d=="function"?d:ji)}function aA(n,a,c,d,m){if(Xd(n))throw Error(r(485));if(n=a.action,n!==null){var y={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};$.T!==null?c(!0):y.isTransition=!1,d(y),c=a.pending,c===null?(y.next=a.pending=y,Qb(a,y)):(y.next=c.next,a.pending=c.next=y)}}function Qb(n,a){var c=a.action,d=a.payload,m=n.state;if(a.isTransition){var y=$.T,E={};$.T=E;try{var M=c(m,d),H=$.S;H!==null&&H(E,M),Xb(n,a,M)}catch(ne){Zm(n,a,ne)}finally{$.T=y}}else try{y=c(m,d),Xb(n,a,y)}catch(ne){Zm(n,a,ne)}}function Xb(n,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Jb(n,a,d)},function(d){return Zm(n,a,d)}):Jb(n,a,c)}function Jb(n,a,c){a.status="fulfilled",a.value=c,ex(a),n.state=c,a=n.pending,a!==null&&(c=a.next,c===a?n.pending=null:(c=c.next,a.next=c,Qb(n,c)))}function Zm(n,a,c){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=c,ex(a),a=a.next;while(a!==d)}n.action=null}function ex(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function tx(n,a){return a}function sx(n,a){if(_t){var c=Mt.formState;if(c!==null){e:{var d=it;if(_t){if(ts){t:{for(var m=ts,y=Vn;m.nodeType!==8;){if(!y){m=null;break t}if(m=pn(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){ts=pn(m.nextSibling),d=m.data==="F!";break e}}fl(d)}d=!1}d&&(a=c[0])}}return c=pr(),c.memoizedState=c.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tx,lastRenderedState:a},c.queue=d,c=wx.bind(null,it,d),d.dispatch=c,d=Gm(!1),y=Xm.bind(null,it,!1,d.queue),d=pr(),m={state:a,dispatch:null,action:n,pending:null},d.queue=m,c=aA.bind(null,it,m,y,c),m.dispatch=c,d.memoizedState=n,[a,c,!1]}function rx(n){var a=ps();return nx(a,At,n)}function nx(n,a,c){if(a=Hm(n,a,tx)[0],n=Kd(ji)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=su(a)}catch(E){throw E===Wc?Fd:E}else d=a;a=ps();var m=a.queue,y=m.dispatch;return c!==a.memoizedState&&(it.flags|=2048,No(9,Wd(),lA.bind(null,m,c),null)),[d,y,n]}function lA(n,a){n.action=a}function ix(n){var a=ps(),c=At;if(c!==null)return nx(a,c,n);ps(),a=a.memoizedState,c=ps();var d=c.queue.dispatch;return c.memoizedState=n,[a,d,!1]}function No(n,a,c,d){return n={tag:n,create:c,deps:d,inst:a,next:null},a=it.updateQueue,a===null&&(a=Bm(),it.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=n.next=n:(d=c.next,c.next=n,n.next=d,a.lastEffect=n),n}function Wd(){return{destroy:void 0,resource:void 0}}function ax(){return ps().memoizedState}function Qd(n,a,c,d){var m=pr();d=d===void 0?null:d,it.flags|=n,m.memoizedState=No(1|a,Wd(),c,d)}function ru(n,a,c,d){var m=ps();d=d===void 0?null:d;var y=m.memoizedState.inst;At!==null&&d!==null&&Pm(d,At.memoizedState.deps)?m.memoizedState=No(a,y,c,d):(it.flags|=n,m.memoizedState=No(1|a,y,c,d))}function lx(n,a){Qd(8390656,8,n,a)}function ox(n,a){ru(2048,8,n,a)}function cx(n,a){return ru(4,2,n,a)}function ux(n,a){return ru(4,4,n,a)}function dx(n,a){if(typeof a=="function"){n=n();var c=a(n);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function hx(n,a,c){c=c!=null?c.concat([n]):null,ru(4,4,dx.bind(null,a,n),c)}function Ym(){}function fx(n,a){var c=ps();a=a===void 0?null:a;var d=c.memoizedState;return a!==null&&Pm(a,d[1])?d[0]:(c.memoizedState=[n,a],n)}function mx(n,a){var c=ps();a=a===void 0?null:a;var d=c.memoizedState;if(a!==null&&Pm(a,d[1]))return d[0];if(d=n(),yl){Ke(!0);try{n()}finally{Ke(!1)}}return c.memoizedState=[d,a],d}function Km(n,a,c){return c===void 0||(ua&1073741824)!==0?n.memoizedState=a:(n.memoizedState=c,n=yv(),it.lanes|=n,ya|=n,c)}function px(n,a,c,d){return Er(c,a)?c:wo.current!==null?(n=Km(n,c,d),Er(n,a)||(Rs=!0),n):(ua&42)===0?(Rs=!0,n.memoizedState=c):(n=yv(),it.lanes|=n,ya|=n,a)}function gx(n,a,c,d,m){var y=Y.p;Y.p=y!==0&&8>y?y:8;var E=$.T,M={};$.T=M,Xm(n,!1,a,c);try{var H=m(),ne=$.S;if(ne!==null&&ne(M,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var me=rA(H,d);nu(n,a,me,Or(n))}else nu(n,a,d,Or(n))}catch(we){nu(n,a,{then:function(){},status:"rejected",reason:we},Or())}finally{Y.p=y,$.T=E}}function oA(){}function Wm(n,a,c,d){if(n.tag!==5)throw Error(r(476));var m=yx(n).queue;gx(n,m,a,W,c===null?oA:function(){return bx(n),c(d)})}function yx(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:W},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:c},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function bx(n){var a=yx(n).next.queue;nu(n,a,{},Or())}function Qm(){return Ws(_u)}function xx(){return ps().memoizedState}function vx(){return ps().memoizedState}function cA(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var c=Or();n=oa(c);var d=ca(a,n,c);d!==null&&(Rr(d,a,c),Xc(d,a,c)),a={cache:Am()},n.payload=a;return}a=a.return}}function uA(n,a,c){var d=Or();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Xd(n)?_x(a,c):(c=ym(n,a,c,d),c!==null&&(Rr(c,n,d),jx(c,a,d)))}function wx(n,a,c){var d=Or();nu(n,a,c,d)}function nu(n,a,c,d){var m={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Xd(n))_x(a,m);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var E=a.lastRenderedState,M=y(E,c);if(m.hasEagerState=!0,m.eagerState=M,Er(M,E))return Ld(n,a,m,0),Mt===null&&Dd(),!1}catch{}finally{}if(c=ym(n,a,m,d),c!==null)return Rr(c,n,d),jx(c,a,d),!0}return!1}function Xm(n,a,c,d){if(d={lane:2,revertLane:Tp(),action:d,hasEagerState:!1,eagerState:null,next:null},Xd(n)){if(a)throw Error(r(479))}else a=ym(n,c,d,2),a!==null&&Rr(a,n,2)}function Xd(n){var a=n.alternate;return n===it||a!==null&&a===it}function _x(n,a){_o=Gd=!0;var c=n.pending;c===null?a.next=a:(a.next=c.next,c.next=a),n.pending=a}function jx(n,a,c){if((c&4194048)!==0){var d=a.lanes;d&=n.pendingLanes,c|=d,a.lanes=c,Wi(n,c)}}var Jd={readContext:Ws,use:Yd,useCallback:ls,useContext:ls,useEffect:ls,useImperativeHandle:ls,useLayoutEffect:ls,useInsertionEffect:ls,useMemo:ls,useReducer:ls,useRef:ls,useState:ls,useDebugValue:ls,useDeferredValue:ls,useTransition:ls,useSyncExternalStore:ls,useId:ls,useHostTransitionStatus:ls,useFormState:ls,useActionState:ls,useOptimistic:ls,useMemoCache:ls,useCacheRefresh:ls},Nx={readContext:Ws,use:Yd,useCallback:function(n,a){return pr().memoizedState=[n,a===void 0?null:a],n},useContext:Ws,useEffect:lx,useImperativeHandle:function(n,a,c){c=c!=null?c.concat([n]):null,Qd(4194308,4,dx.bind(null,a,n),c)},useLayoutEffect:function(n,a){return Qd(4194308,4,n,a)},useInsertionEffect:function(n,a){Qd(4,2,n,a)},useMemo:function(n,a){var c=pr();a=a===void 0?null:a;var d=n();if(yl){Ke(!0);try{n()}finally{Ke(!1)}}return c.memoizedState=[d,a],d},useReducer:function(n,a,c){var d=pr();if(c!==void 0){var m=c(a);if(yl){Ke(!0);try{c(a)}finally{Ke(!1)}}}else m=a;return d.memoizedState=d.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},d.queue=n,n=n.dispatch=uA.bind(null,it,n),[d.memoizedState,n]},useRef:function(n){var a=pr();return n={current:n},a.memoizedState=n},useState:function(n){n=Gm(n);var a=n.queue,c=wx.bind(null,it,a);return a.dispatch=c,[n.memoizedState,c]},useDebugValue:Ym,useDeferredValue:function(n,a){var c=pr();return Km(c,n,a)},useTransition:function(){var n=Gm(!1);return n=gx.bind(null,it,n.queue,!0,!1),pr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,c){var d=it,m=pr();if(_t){if(c===void 0)throw Error(r(407));c=c()}else{if(c=a(),Mt===null)throw Error(r(349));(bt&124)!==0||Vb(d,a,c)}m.memoizedState=c;var y={value:c,getSnapshot:a};return m.queue=y,lx(Zb.bind(null,d,y,n),[n]),d.flags|=2048,No(9,Wd(),Gb.bind(null,d,y,c,a),null),c},useId:function(){var n=pr(),a=Mt.identifierPrefix;if(_t){var c=vi,d=xi;c=(d&~(1<<32-ft(d)-1)).toString(32)+c,a=""+a+"R"+c,c=Zd++,0<c&&(a+="H"+c.toString(32)),a+=""}else c=nA++,a=""+a+"r"+c.toString(32)+"";return n.memoizedState=a},useHostTransitionStatus:Qm,useFormState:sx,useActionState:sx,useOptimistic:function(n){var a=pr();a.memoizedState=a.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Xm.bind(null,it,!0,c),c.dispatch=a,[n,a]},useMemoCache:Fm,useCacheRefresh:function(){return pr().memoizedState=cA.bind(null,it)}},Sx={readContext:Ws,use:Yd,useCallback:fx,useContext:Ws,useEffect:ox,useImperativeHandle:hx,useInsertionEffect:cx,useLayoutEffect:ux,useMemo:mx,useReducer:Kd,useRef:ax,useState:function(){return Kd(ji)},useDebugValue:Ym,useDeferredValue:function(n,a){var c=ps();return px(c,At.memoizedState,n,a)},useTransition:function(){var n=Kd(ji)[0],a=ps().memoizedState;return[typeof n=="boolean"?n:su(n),a]},useSyncExternalStore:Hb,useId:xx,useHostTransitionStatus:Qm,useFormState:rx,useActionState:rx,useOptimistic:function(n,a){var c=ps();return Wb(c,At,n,a)},useMemoCache:Fm,useCacheRefresh:vx},dA={readContext:Ws,use:Yd,useCallback:fx,useContext:Ws,useEffect:ox,useImperativeHandle:hx,useInsertionEffect:cx,useLayoutEffect:ux,useMemo:mx,useReducer:Vm,useRef:ax,useState:function(){return Vm(ji)},useDebugValue:Ym,useDeferredValue:function(n,a){var c=ps();return At===null?Km(c,n,a):px(c,At.memoizedState,n,a)},useTransition:function(){var n=Vm(ji)[0],a=ps().memoizedState;return[typeof n=="boolean"?n:su(n),a]},useSyncExternalStore:Hb,useId:xx,useHostTransitionStatus:Qm,useFormState:ix,useActionState:ix,useOptimistic:function(n,a){var c=ps();return At!==null?Wb(c,At,n,a):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:Fm,useCacheRefresh:vx},So=null,iu=0;function eh(n){var a=iu;return iu+=1,So===null&&(So=[]),qb(So,n,a)}function au(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function th(n,a){throw a.$$typeof===b?Error(r(525)):(n=Object.prototype.toString.call(a),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function Ex(n){var a=n._init;return a(n._payload)}function Ax(n){function a(ee,K){if(n){var re=ee.deletions;re===null?(ee.deletions=[K],ee.flags|=16):re.push(K)}}function c(ee,K){if(!n)return null;for(;K!==null;)a(ee,K),K=K.sibling;return null}function d(ee){for(var K=new Map;ee!==null;)ee.key!==null?K.set(ee.key,ee):K.set(ee.index,ee),ee=ee.sibling;return K}function m(ee,K){return ee=bi(ee,K),ee.index=0,ee.sibling=null,ee}function y(ee,K,re){return ee.index=re,n?(re=ee.alternate,re!==null?(re=re.index,re<K?(ee.flags|=67108866,K):re):(ee.flags|=67108866,K)):(ee.flags|=1048576,K)}function E(ee){return n&&ee.alternate===null&&(ee.flags|=67108866),ee}function M(ee,K,re,be){return K===null||K.tag!==6?(K=xm(re,ee.mode,be),K.return=ee,K):(K=m(K,re),K.return=ee,K)}function H(ee,K,re,be){var qe=re.type;return qe===x?me(ee,K,re.props.children,be,re.key):K!==null&&(K.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===A&&Ex(qe)===K.type)?(K=m(K,re.props),au(K,re),K.return=ee,K):(K=Pd(re.type,re.key,re.props,null,ee.mode,be),au(K,re),K.return=ee,K)}function ne(ee,K,re,be){return K===null||K.tag!==4||K.stateNode.containerInfo!==re.containerInfo||K.stateNode.implementation!==re.implementation?(K=vm(re,ee.mode,be),K.return=ee,K):(K=m(K,re.children||[]),K.return=ee,K)}function me(ee,K,re,be,qe){return K===null||K.tag!==7?(K=cl(re,ee.mode,be,qe),K.return=ee,K):(K=m(K,re),K.return=ee,K)}function we(ee,K,re){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=xm(""+K,ee.mode,re),K.return=ee,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case v:return re=Pd(K.type,K.key,K.props,null,ee.mode,re),au(re,K),re.return=ee,re;case w:return K=vm(K,ee.mode,re),K.return=ee,K;case A:var be=K._init;return K=be(K._payload),we(ee,K,re)}if(te(K)||q(K))return K=cl(K,ee.mode,re,null),K.return=ee,K;if(typeof K.then=="function")return we(ee,eh(K),re);if(K.$$typeof===k)return we(ee,zd(ee,K),re);th(ee,K)}return null}function ae(ee,K,re,be){var qe=K!==null?K.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return qe!==null?null:M(ee,K,""+re,be);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case v:return re.key===qe?H(ee,K,re,be):null;case w:return re.key===qe?ne(ee,K,re,be):null;case A:return qe=re._init,re=qe(re._payload),ae(ee,K,re,be)}if(te(re)||q(re))return qe!==null?null:me(ee,K,re,be,null);if(typeof re.then=="function")return ae(ee,K,eh(re),be);if(re.$$typeof===k)return ae(ee,K,zd(ee,re),be);th(ee,re)}return null}function le(ee,K,re,be,qe){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return ee=ee.get(re)||null,M(K,ee,""+be,qe);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case v:return ee=ee.get(be.key===null?re:be.key)||null,H(K,ee,be,qe);case w:return ee=ee.get(be.key===null?re:be.key)||null,ne(K,ee,be,qe);case A:var lt=be._init;return be=lt(be._payload),le(ee,K,re,be,qe)}if(te(be)||q(be))return ee=ee.get(re)||null,me(K,ee,be,qe,null);if(typeof be.then=="function")return le(ee,K,re,eh(be),qe);if(be.$$typeof===k)return le(ee,K,re,zd(K,be),qe);th(K,be)}return null}function tt(ee,K,re,be){for(var qe=null,lt=null,Ve=K,Je=K=0,Ds=null;Ve!==null&&Je<re.length;Je++){Ve.index>Je?(Ds=Ve,Ve=null):Ds=Ve.sibling;var vt=ae(ee,Ve,re[Je],be);if(vt===null){Ve===null&&(Ve=Ds);break}n&&Ve&&vt.alternate===null&&a(ee,Ve),K=y(vt,K,Je),lt===null?qe=vt:lt.sibling=vt,lt=vt,Ve=Ds}if(Je===re.length)return c(ee,Ve),_t&&dl(ee,Je),qe;if(Ve===null){for(;Je<re.length;Je++)Ve=we(ee,re[Je],be),Ve!==null&&(K=y(Ve,K,Je),lt===null?qe=Ve:lt.sibling=Ve,lt=Ve);return _t&&dl(ee,Je),qe}for(Ve=d(Ve);Je<re.length;Je++)Ds=le(Ve,ee,Je,re[Je],be),Ds!==null&&(n&&Ds.alternate!==null&&Ve.delete(Ds.key===null?Je:Ds.key),K=y(Ds,K,Je),lt===null?qe=Ds:lt.sibling=Ds,lt=Ds);return n&&Ve.forEach(function(Ea){return a(ee,Ea)}),_t&&dl(ee,Je),qe}function Qe(ee,K,re,be){if(re==null)throw Error(r(151));for(var qe=null,lt=null,Ve=K,Je=K=0,Ds=null,vt=re.next();Ve!==null&&!vt.done;Je++,vt=re.next()){Ve.index>Je?(Ds=Ve,Ve=null):Ds=Ve.sibling;var Ea=ae(ee,Ve,vt.value,be);if(Ea===null){Ve===null&&(Ve=Ds);break}n&&Ve&&Ea.alternate===null&&a(ee,Ve),K=y(Ea,K,Je),lt===null?qe=Ea:lt.sibling=Ea,lt=Ea,Ve=Ds}if(vt.done)return c(ee,Ve),_t&&dl(ee,Je),qe;if(Ve===null){for(;!vt.done;Je++,vt=re.next())vt=we(ee,vt.value,be),vt!==null&&(K=y(vt,K,Je),lt===null?qe=vt:lt.sibling=vt,lt=vt);return _t&&dl(ee,Je),qe}for(Ve=d(Ve);!vt.done;Je++,vt=re.next())vt=le(Ve,ee,Je,vt.value,be),vt!==null&&(n&&vt.alternate!==null&&Ve.delete(vt.key===null?Je:vt.key),K=y(vt,K,Je),lt===null?qe=vt:lt.sibling=vt,lt=vt);return n&&Ve.forEach(function(hC){return a(ee,hC)}),_t&&dl(ee,Je),qe}function kt(ee,K,re,be){if(typeof re=="object"&&re!==null&&re.type===x&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case v:e:{for(var qe=re.key;K!==null;){if(K.key===qe){if(qe=re.type,qe===x){if(K.tag===7){c(ee,K.sibling),be=m(K,re.props.children),be.return=ee,ee=be;break e}}else if(K.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===A&&Ex(qe)===K.type){c(ee,K.sibling),be=m(K,re.props),au(be,re),be.return=ee,ee=be;break e}c(ee,K);break}else a(ee,K);K=K.sibling}re.type===x?(be=cl(re.props.children,ee.mode,be,re.key),be.return=ee,ee=be):(be=Pd(re.type,re.key,re.props,null,ee.mode,be),au(be,re),be.return=ee,ee=be)}return E(ee);case w:e:{for(qe=re.key;K!==null;){if(K.key===qe)if(K.tag===4&&K.stateNode.containerInfo===re.containerInfo&&K.stateNode.implementation===re.implementation){c(ee,K.sibling),be=m(K,re.children||[]),be.return=ee,ee=be;break e}else{c(ee,K);break}else a(ee,K);K=K.sibling}be=vm(re,ee.mode,be),be.return=ee,ee=be}return E(ee);case A:return qe=re._init,re=qe(re._payload),kt(ee,K,re,be)}if(te(re))return tt(ee,K,re,be);if(q(re)){if(qe=q(re),typeof qe!="function")throw Error(r(150));return re=qe.call(re),Qe(ee,K,re,be)}if(typeof re.then=="function")return kt(ee,K,eh(re),be);if(re.$$typeof===k)return kt(ee,K,zd(ee,re),be);th(ee,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,K!==null&&K.tag===6?(c(ee,K.sibling),be=m(K,re),be.return=ee,ee=be):(c(ee,K),be=xm(re,ee.mode,be),be.return=ee,ee=be),E(ee)):c(ee,K)}return function(ee,K,re,be){try{iu=0;var qe=kt(ee,K,re,be);return So=null,qe}catch(Ve){if(Ve===Wc||Ve===Fd)throw Ve;var lt=Ar(29,Ve,null,ee.mode);return lt.lanes=be,lt.return=ee,lt}finally{}}}var Eo=Ax(!0),Cx=Ax(!1),Wr=Q(null),Gn=null;function da(n){var a=n.alternate;X(_s,_s.current&1),X(Wr,n),Gn===null&&(a===null||wo.current!==null||a.memoizedState!==null)&&(Gn=n)}function kx(n){if(n.tag===22){if(X(_s,_s.current),X(Wr,n),Gn===null){var a=n.alternate;a!==null&&a.memoizedState!==null&&(Gn=n)}}else ha()}function ha(){X(_s,_s.current),X(Wr,Wr.current)}function Ni(n){ie(Wr),Gn===n&&(Gn=null),ie(_s)}var _s=Q(0);function sh(n){for(var a=n;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Bp(c)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Jm(n,a,c,d){a=n.memoizedState,c=c(d,a),c=c==null?a:g({},a,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var ep={enqueueSetState:function(n,a,c){n=n._reactInternals;var d=Or(),m=oa(d);m.payload=a,c!=null&&(m.callback=c),a=ca(n,m,d),a!==null&&(Rr(a,n,d),Xc(a,n,d))},enqueueReplaceState:function(n,a,c){n=n._reactInternals;var d=Or(),m=oa(d);m.tag=1,m.payload=a,c!=null&&(m.callback=c),a=ca(n,m,d),a!==null&&(Rr(a,n,d),Xc(a,n,d))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var c=Or(),d=oa(c);d.tag=2,a!=null&&(d.callback=a),a=ca(n,d,c),a!==null&&(Rr(a,n,c),Xc(a,n,c))}};function Tx(n,a,c,d,m,y,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,y,E):a.prototype&&a.prototype.isPureReactComponent?!Bc(c,d)||!Bc(m,y):!0}function Ox(n,a,c,d){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,d),a.state!==n&&ep.enqueueReplaceState(a,a.state,null)}function bl(n,a){var c=a;if("ref"in a){c={};for(var d in a)d!=="ref"&&(c[d]=a[d])}if(n=n.defaultProps){c===a&&(c=g({},c));for(var m in n)c[m]===void 0&&(c[m]=n[m])}return c}var rh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Rx(n){rh(n)}function Mx(n){console.error(n)}function Dx(n){rh(n)}function nh(n,a){try{var c=n.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function Lx(n,a,c){try{var d=n.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function tp(n,a,c){return c=oa(c),c.tag=3,c.payload={element:null},c.callback=function(){nh(n,a)},c}function qx(n){return n=oa(n),n.tag=3,n}function Px(n,a,c,d){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var y=d.value;n.payload=function(){return m(y)},n.callback=function(){Lx(a,c,d)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Lx(a,c,d),typeof m!="function"&&(ba===null?ba=new Set([this]):ba.add(this));var M=d.stack;this.componentDidCatch(d.value,{componentStack:M!==null?M:""})})}function hA(n,a,c,d,m){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=c.alternate,a!==null&&Zc(a,c,m,!0),c=Wr.current,c!==null){switch(c.tag){case 13:return Gn===null?Sp():c.alternate===null&&ss===0&&(ss=3),c.flags&=-257,c.flags|=65536,c.lanes=m,d===Tm?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([d]):a.add(d),Ap(n,d,m)),!1;case 22:return c.flags|=65536,d===Tm?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([d]):c.add(d)),Ap(n,d,m)),!1}throw Error(r(435,c.tag))}return Ap(n,d,m),Sp(),!1}if(_t)return a=Wr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,d!==jm&&(n=Error(r(422),{cause:d}),Gc(Gr(n,c)))):(d!==jm&&(a=Error(r(423),{cause:d}),Gc(Gr(a,c))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,d=Gr(d,c),m=tp(n.stateNode,d,m),Mm(n,m),ss!==4&&(ss=2)),!1;var y=Error(r(520),{cause:d});if(y=Gr(y,c),fu===null?fu=[y]:fu.push(y),ss!==4&&(ss=2),a===null)return!0;d=Gr(d,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,n=m&-m,c.lanes|=n,n=tp(c.stateNode,d,n),Mm(c,n),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ba===null||!ba.has(y))))return c.flags|=65536,m&=-m,c.lanes|=m,m=qx(m),Px(m,n,c,d),Mm(c,m),!1}c=c.return}while(c!==null);return!1}var Ix=Error(r(461)),Rs=!1;function Us(n,a,c,d){a.child=n===null?Cx(a,null,c,d):Eo(a,n.child,c,d)}function $x(n,a,c,d,m){c=c.render;var y=a.ref;if("ref"in d){var E={};for(var M in d)M!=="ref"&&(E[M]=d[M])}else E=d;return pl(a),d=Im(n,a,c,E,y,m),M=$m(),n!==null&&!Rs?(Um(n,a,m),Si(n,a,m)):(_t&&M&&wm(a),a.flags|=1,Us(n,a,d,m),a.child)}function Ux(n,a,c,d,m){if(n===null){var y=c.type;return typeof y=="function"&&!bm(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,zx(n,a,y,d,m)):(n=Pd(c.type,null,d,a,a.mode,m),n.ref=a.ref,n.return=a,a.child=n)}if(y=n.child,!cp(n,m)){var E=y.memoizedProps;if(c=c.compare,c=c!==null?c:Bc,c(E,d)&&n.ref===a.ref)return Si(n,a,m)}return a.flags|=1,n=bi(y,d),n.ref=a.ref,n.return=a,a.child=n}function zx(n,a,c,d,m){if(n!==null){var y=n.memoizedProps;if(Bc(y,d)&&n.ref===a.ref)if(Rs=!1,a.pendingProps=d=y,cp(n,m))(n.flags&131072)!==0&&(Rs=!0);else return a.lanes=n.lanes,Si(n,a,m)}return sp(n,a,c,d,m)}function Bx(n,a,c){var d=a.pendingProps,m=d.children,y=n!==null?n.memoizedState:null;if(d.mode==="hidden"){if((a.flags&128)!==0){if(d=y!==null?y.baseLanes|c:c,n!==null){for(m=a.child=n.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;a.childLanes=y&~d}else a.childLanes=0,a.child=null;return Fx(n,a,d,c)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&Bd(a,y!==null?y.cachePool:null),y!==null?zb(a,y):Lm(),kx(a);else return a.lanes=a.childLanes=536870912,Fx(n,a,y!==null?y.baseLanes|c:c,c)}else y!==null?(Bd(a,y.cachePool),zb(a,y),ha(),a.memoizedState=null):(n!==null&&Bd(a,null),Lm(),ha());return Us(n,a,m,c),a.child}function Fx(n,a,c,d){var m=km();return m=m===null?null:{parent:ws._currentValue,pool:m},a.memoizedState={baseLanes:c,cachePool:m},n!==null&&Bd(a,null),Lm(),kx(a),n!==null&&Zc(n,a,d,!0),null}function ih(n,a){var c=a.ref;if(c===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(n===null||n.ref!==c)&&(a.flags|=4194816)}}function sp(n,a,c,d,m){return pl(a),c=Im(n,a,c,d,void 0,m),d=$m(),n!==null&&!Rs?(Um(n,a,m),Si(n,a,m)):(_t&&d&&wm(a),a.flags|=1,Us(n,a,c,m),a.child)}function Hx(n,a,c,d,m,y){return pl(a),a.updateQueue=null,c=Fb(a,d,c,m),Bb(n),d=$m(),n!==null&&!Rs?(Um(n,a,y),Si(n,a,y)):(_t&&d&&wm(a),a.flags|=1,Us(n,a,c,y),a.child)}function Vx(n,a,c,d,m){if(pl(a),a.stateNode===null){var y=go,E=c.contextType;typeof E=="object"&&E!==null&&(y=Ws(E)),y=new c(d,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=ep,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=d,y.state=a.memoizedState,y.refs={},Om(a),E=c.contextType,y.context=typeof E=="object"&&E!==null?Ws(E):go,y.state=a.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(Jm(a,c,E,d),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&ep.enqueueReplaceState(y,y.state,null),eu(a,d,y,m),Jc(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(n===null){y=a.stateNode;var M=a.memoizedProps,H=bl(c,M);y.props=H;var ne=y.context,me=c.contextType;E=go,typeof me=="object"&&me!==null&&(E=Ws(me));var we=c.getDerivedStateFromProps;me=typeof we=="function"||typeof y.getSnapshotBeforeUpdate=="function",M=a.pendingProps!==M,me||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(M||ne!==E)&&Ox(a,y,d,E),la=!1;var ae=a.memoizedState;y.state=ae,eu(a,d,y,m),Jc(),ne=a.memoizedState,M||ae!==ne||la?(typeof we=="function"&&(Jm(a,c,we,d),ne=a.memoizedState),(H=la||Tx(a,c,H,d,ae,ne,E))?(me||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=ne),y.props=d,y.state=ne,y.context=E,d=H):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{y=a.stateNode,Rm(n,a),E=a.memoizedProps,me=bl(c,E),y.props=me,we=a.pendingProps,ae=y.context,ne=c.contextType,H=go,typeof ne=="object"&&ne!==null&&(H=Ws(ne)),M=c.getDerivedStateFromProps,(ne=typeof M=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==we||ae!==H)&&Ox(a,y,d,H),la=!1,ae=a.memoizedState,y.state=ae,eu(a,d,y,m),Jc();var le=a.memoizedState;E!==we||ae!==le||la||n!==null&&n.dependencies!==null&&Ud(n.dependencies)?(typeof M=="function"&&(Jm(a,c,M,d),le=a.memoizedState),(me=la||Tx(a,c,me,d,ae,le,H)||n!==null&&n.dependencies!==null&&Ud(n.dependencies))?(ne||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,le,H),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,le,H)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===n.memoizedProps&&ae===n.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&ae===n.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=le),y.props=d,y.state=le,y.context=H,d=me):(typeof y.componentDidUpdate!="function"||E===n.memoizedProps&&ae===n.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&ae===n.memoizedState||(a.flags|=1024),d=!1)}return y=d,ih(n,a),d=(a.flags&128)!==0,y||d?(y=a.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,n!==null&&d?(a.child=Eo(a,n.child,null,m),a.child=Eo(a,null,c,m)):Us(n,a,c,m),a.memoizedState=y.state,n=a.child):n=Si(n,a,m),n}function Gx(n,a,c,d){return Vc(),a.flags|=256,Us(n,a,c,d),a.child}var rp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function np(n){return{baseLanes:n,cachePool:Mb()}}function ip(n,a,c){return n=n!==null?n.childLanes&~c:0,a&&(n|=Qr),n}function Zx(n,a,c){var d=a.pendingProps,m=!1,y=(a.flags&128)!==0,E;if((E=y)||(E=n!==null&&n.memoizedState===null?!1:(_s.current&2)!==0),E&&(m=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,n===null){if(_t){if(m?da(a):ha(),_t){var M=ts,H;if(H=M){e:{for(H=M,M=Vn;H.nodeType!==8;){if(!M){M=null;break e}if(H=pn(H.nextSibling),H===null){M=null;break e}}M=H}M!==null?(a.memoizedState={dehydrated:M,treeContext:ul!==null?{id:xi,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},H=Ar(18,null,null,0),H.stateNode=M,H.return=a,a.child=H,sr=a,ts=null,H=!0):H=!1}H||fl(a)}if(M=a.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return Bp(M)?a.lanes=32:a.lanes=536870912,null;Ni(a)}return M=d.children,d=d.fallback,m?(ha(),m=a.mode,M=ah({mode:"hidden",children:M},m),d=cl(d,m,c,null),M.return=a,d.return=a,M.sibling=d,a.child=M,m=a.child,m.memoizedState=np(c),m.childLanes=ip(n,E,c),a.memoizedState=rp,d):(da(a),ap(a,M))}if(H=n.memoizedState,H!==null&&(M=H.dehydrated,M!==null)){if(y)a.flags&256?(da(a),a.flags&=-257,a=lp(n,a,c)):a.memoizedState!==null?(ha(),a.child=n.child,a.flags|=128,a=null):(ha(),m=d.fallback,M=a.mode,d=ah({mode:"visible",children:d.children},M),m=cl(m,M,c,null),m.flags|=2,d.return=a,m.return=a,d.sibling=m,a.child=d,Eo(a,n.child,null,c),d=a.child,d.memoizedState=np(c),d.childLanes=ip(n,E,c),a.memoizedState=rp,a=m);else if(da(a),Bp(M)){if(E=M.nextSibling&&M.nextSibling.dataset,E)var ne=E.dgst;E=ne,d=Error(r(419)),d.stack="",d.digest=E,Gc({value:d,source:null,stack:null}),a=lp(n,a,c)}else if(Rs||Zc(n,a,c,!1),E=(c&n.childLanes)!==0,Rs||E){if(E=Mt,E!==null&&(d=c&-c,d=(d&42)!==0?1:ui(d),d=(d&(E.suspendedLanes|c))!==0?0:d,d!==0&&d!==H.retryLane))throw H.retryLane=d,po(n,d),Rr(E,n,d),Ix;M.data==="$?"||Sp(),a=lp(n,a,c)}else M.data==="$?"?(a.flags|=192,a.child=n.child,a=null):(n=H.treeContext,ts=pn(M.nextSibling),sr=a,_t=!0,hl=null,Vn=!1,n!==null&&(Yr[Kr++]=xi,Yr[Kr++]=vi,Yr[Kr++]=ul,xi=n.id,vi=n.overflow,ul=a),a=ap(a,d.children),a.flags|=4096);return a}return m?(ha(),m=d.fallback,M=a.mode,H=n.child,ne=H.sibling,d=bi(H,{mode:"hidden",children:d.children}),d.subtreeFlags=H.subtreeFlags&65011712,ne!==null?m=bi(ne,m):(m=cl(m,M,c,null),m.flags|=2),m.return=a,d.return=a,d.sibling=m,a.child=d,d=m,m=a.child,M=n.child.memoizedState,M===null?M=np(c):(H=M.cachePool,H!==null?(ne=ws._currentValue,H=H.parent!==ne?{parent:ne,pool:ne}:H):H=Mb(),M={baseLanes:M.baseLanes|c,cachePool:H}),m.memoizedState=M,m.childLanes=ip(n,E,c),a.memoizedState=rp,d):(da(a),c=n.child,n=c.sibling,c=bi(c,{mode:"visible",children:d.children}),c.return=a,c.sibling=null,n!==null&&(E=a.deletions,E===null?(a.deletions=[n],a.flags|=16):E.push(n)),a.child=c,a.memoizedState=null,c)}function ap(n,a){return a=ah({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function ah(n,a){return n=Ar(22,n,null,a),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function lp(n,a,c){return Eo(a,n.child,null,c),n=ap(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function Yx(n,a,c){n.lanes|=a;var d=n.alternate;d!==null&&(d.lanes|=a),Sm(n.return,a,c)}function op(n,a,c,d,m){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:m}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=c,y.tailMode=m)}function Kx(n,a,c){var d=a.pendingProps,m=d.revealOrder,y=d.tail;if(Us(n,a,d.children,c),d=_s.current,(d&2)!==0)d=d&1|2,a.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Yx(n,c,a);else if(n.tag===19)Yx(n,c,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}switch(X(_s,d),m){case"forwards":for(c=a.child,m=null;c!==null;)n=c.alternate,n!==null&&sh(n)===null&&(m=c),c=c.sibling;c=m,c===null?(m=a.child,a.child=null):(m=c.sibling,c.sibling=null),op(a,!1,m,c,y);break;case"backwards":for(c=null,m=a.child,a.child=null;m!==null;){if(n=m.alternate,n!==null&&sh(n)===null){a.child=m;break}n=m.sibling,m.sibling=c,c=m,m=n}op(a,!0,c,null,y);break;case"together":op(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Si(n,a,c){if(n!==null&&(a.dependencies=n.dependencies),ya|=a.lanes,(c&a.childLanes)===0)if(n!==null){if(Zc(n,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(r(153));if(a.child!==null){for(n=a.child,c=bi(n,n.pendingProps),a.child=c,c.return=a;n.sibling!==null;)n=n.sibling,c=c.sibling=bi(n,n.pendingProps),c.return=a;c.sibling=null}return a.child}function cp(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&Ud(n)))}function fA(n,a,c){switch(a.tag){case 3:je(a,a.stateNode.containerInfo),aa(a,ws,n.memoizedState.cache),Vc();break;case 27:case 5:Me(a);break;case 4:je(a,a.stateNode.containerInfo);break;case 10:aa(a,a.type,a.memoizedProps.value);break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(da(a),a.flags|=128,null):(c&a.child.childLanes)!==0?Zx(n,a,c):(da(a),n=Si(n,a,c),n!==null?n.sibling:null);da(a);break;case 19:var m=(n.flags&128)!==0;if(d=(c&a.childLanes)!==0,d||(Zc(n,a,c,!1),d=(c&a.childLanes)!==0),m){if(d)return Kx(n,a,c);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),X(_s,_s.current),d)break;return null;case 22:case 23:return a.lanes=0,Bx(n,a,c);case 24:aa(a,ws,n.memoizedState.cache)}return Si(n,a,c)}function Wx(n,a,c){if(n!==null)if(n.memoizedProps!==a.pendingProps)Rs=!0;else{if(!cp(n,c)&&(a.flags&128)===0)return Rs=!1,fA(n,a,c);Rs=(n.flags&131072)!==0}else Rs=!1,_t&&(a.flags&1048576)!==0&&Eb(a,$d,a.index);switch(a.lanes=0,a.tag){case 16:e:{n=a.pendingProps;var d=a.elementType,m=d._init;if(d=m(d._payload),a.type=d,typeof d=="function")bm(d)?(n=bl(d,n),a.tag=1,a=Vx(null,a,d,n,c)):(a.tag=0,a=sp(null,a,d,n,c));else{if(d!=null){if(m=d.$$typeof,m===Z){a.tag=11,a=$x(null,a,d,n,c);break e}else if(m===B){a.tag=14,a=Ux(null,a,d,n,c);break e}}throw a=V(d)||d,Error(r(306,a,""))}}return a;case 0:return sp(n,a,a.type,a.pendingProps,c);case 1:return d=a.type,m=bl(d,a.pendingProps),Vx(n,a,d,m,c);case 3:e:{if(je(a,a.stateNode.containerInfo),n===null)throw Error(r(387));d=a.pendingProps;var y=a.memoizedState;m=y.element,Rm(n,a),eu(a,d,null,c);var E=a.memoizedState;if(d=E.cache,aa(a,ws,d),d!==y.cache&&Em(a,[ws],c,!0),Jc(),d=E.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=Gx(n,a,d,c);break e}else if(d!==m){m=Gr(Error(r(424)),a),Gc(m),a=Gx(n,a,d,c);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ts=pn(n.firstChild),sr=a,_t=!0,hl=null,Vn=!0,c=Cx(a,null,d,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Vc(),d===m){a=Si(n,a,c);break e}Us(n,a,d,c)}a=a.child}return a;case 26:return ih(n,a),n===null?(c=ew(a.type,null,a.pendingProps,null))?a.memoizedState=c:_t||(c=a.type,n=a.pendingProps,d=vh(Ee.current).createElement(c),d[fs]=a,d[ks]=n,Bs(d,c,n),Jt(d),a.stateNode=d):a.memoizedState=ew(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return Me(a),n===null&&_t&&(d=a.stateNode=Qv(a.type,a.pendingProps,Ee.current),sr=a,Vn=!0,m=ts,wa(a.type)?(Fp=m,ts=pn(d.firstChild)):ts=m),Us(n,a,a.pendingProps.children,c),ih(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&_t&&((m=d=ts)&&(d=zA(d,a.type,a.pendingProps,Vn),d!==null?(a.stateNode=d,sr=a,ts=pn(d.firstChild),Vn=!1,m=!0):m=!1),m||fl(a)),Me(a),m=a.type,y=a.pendingProps,E=n!==null?n.memoizedProps:null,d=y.children,$p(m,y)?d=null:E!==null&&$p(m,E)&&(a.flags|=32),a.memoizedState!==null&&(m=Im(n,a,iA,null,null,c),_u._currentValue=m),ih(n,a),Us(n,a,d,c),a.child;case 6:return n===null&&_t&&((n=c=ts)&&(c=BA(c,a.pendingProps,Vn),c!==null?(a.stateNode=c,sr=a,ts=null,n=!0):n=!1),n||fl(a)),null;case 13:return Zx(n,a,c);case 4:return je(a,a.stateNode.containerInfo),d=a.pendingProps,n===null?a.child=Eo(a,null,d,c):Us(n,a,d,c),a.child;case 11:return $x(n,a,a.type,a.pendingProps,c);case 7:return Us(n,a,a.pendingProps,c),a.child;case 8:return Us(n,a,a.pendingProps.children,c),a.child;case 12:return Us(n,a,a.pendingProps.children,c),a.child;case 10:return d=a.pendingProps,aa(a,a.type,d.value),Us(n,a,d.children,c),a.child;case 9:return m=a.type._context,d=a.pendingProps.children,pl(a),m=Ws(m),d=d(m),a.flags|=1,Us(n,a,d,c),a.child;case 14:return Ux(n,a,a.type,a.pendingProps,c);case 15:return zx(n,a,a.type,a.pendingProps,c);case 19:return Kx(n,a,c);case 31:return d=a.pendingProps,c=a.mode,d={mode:d.mode,children:d.children},n===null?(c=ah(d,c),c.ref=a.ref,a.child=c,c.return=a,a=c):(c=bi(n.child,d),c.ref=a.ref,a.child=c,c.return=a,a=c),a;case 22:return Bx(n,a,c);case 24:return pl(a),d=Ws(ws),n===null?(m=km(),m===null&&(m=Mt,y=Am(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=c),m=y),a.memoizedState={parent:d,cache:m},Om(a),aa(a,ws,m)):((n.lanes&c)!==0&&(Rm(n,a),eu(a,null,null,c),Jc()),m=n.memoizedState,y=a.memoizedState,m.parent!==d?(m={parent:d,cache:d},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),aa(a,ws,d)):(d=y.cache,aa(a,ws,d),d!==m.cache&&Em(a,[ws],c,!0))),Us(n,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Ei(n){n.flags|=4}function Qx(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!iw(a)){if(a=Wr.current,a!==null&&((bt&4194048)===bt?Gn!==null:(bt&62914560)!==bt&&(bt&536870912)===0||a!==Gn))throw Qc=Tm,Db;n.flags|=8192}}function lh(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?oi():536870912,n.lanes|=a,To|=a)}function lu(n,a){if(!_t)switch(n.tailMode){case"hidden":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Gt(n){var a=n.alternate!==null&&n.alternate.child===n.child,c=0,d=0;if(a)for(var m=n.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=d,n.childLanes=c,a}function mA(n,a,c){var d=a.pendingProps;switch(_m(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(a),null;case 1:return Gt(a),null;case 3:return c=a.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),_i(ws),Te(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Hc(a)?Ei(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,kb())),Gt(a),null;case 26:return c=a.memoizedState,n===null?(Ei(a),c!==null?(Gt(a),Qx(a,c)):(Gt(a),a.flags&=-16777217)):c?c!==n.memoizedState?(Ei(a),Gt(a),Qx(a,c)):(Gt(a),a.flags&=-16777217):(n.memoizedProps!==d&&Ei(a),Gt(a),a.flags&=-16777217),null;case 27:Oe(a),c=Ee.current;var m=a.type;if(n!==null&&a.stateNode!=null)n.memoizedProps!==d&&Ei(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return Gt(a),null}n=fe.current,Hc(a)?Ab(a):(n=Qv(m,d,c),a.stateNode=n,Ei(a))}return Gt(a),null;case 5:if(Oe(a),c=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==d&&Ei(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return Gt(a),null}if(n=fe.current,Hc(a))Ab(a);else{switch(m=vh(Ee.current),n){case 1:n=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:n=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":n=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":n=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":n=m.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof d.is=="string"?m.createElement("select",{is:d.is}):m.createElement("select"),d.multiple?n.multiple=!0:d.size&&(n.size=d.size);break;default:n=typeof d.is=="string"?m.createElement(c,{is:d.is}):m.createElement(c)}}n[fs]=a,n[ks]=d;e:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)n.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break e;for(;m.sibling===null;){if(m.return===null||m.return===a)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=n;e:switch(Bs(n,c,d),c){case"button":case"input":case"select":case"textarea":n=!!d.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ei(a)}}return Gt(a),a.flags&=-16777217,null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==d&&Ei(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(r(166));if(n=Ee.current,Hc(a)){if(n=a.stateNode,c=a.memoizedProps,d=null,m=sr,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}n[fs]=a,n=!!(n.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Hv(n.nodeValue,c)),n||fl(a)}else n=vh(n).createTextNode(d),n[fs]=a,a.stateNode=n}return Gt(a),null;case 13:if(d=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=Hc(a),d!==null&&d.dehydrated!==null){if(n===null){if(!m)throw Error(r(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[fs]=a}else Vc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Gt(a),m=!1}else m=kb(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(Ni(a),a):(Ni(a),null)}if(Ni(a),(a.flags&128)!==0)return a.lanes=c,a;if(c=d!==null,n=n!==null&&n.memoizedState!==null,c){d=a.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool);var y=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==m&&(d.flags|=2048)}return c!==n&&c&&(a.child.flags|=8192),lh(a,a.updateQueue),Gt(a),null;case 4:return Te(),n===null&&Dp(a.stateNode.containerInfo),Gt(a),null;case 10:return _i(a.type),Gt(a),null;case 19:if(ie(_s),m=a.memoizedState,m===null)return Gt(a),null;if(d=(a.flags&128)!==0,y=m.rendering,y===null)if(d)lu(m,!1);else{if(ss!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(y=sh(n),y!==null){for(a.flags|=128,lu(m,!1),n=y.updateQueue,a.updateQueue=n,lh(a,n),a.subtreeFlags=0,n=c,c=a.child;c!==null;)Sb(c,n),c=c.sibling;return X(_s,_s.current&1|2),a.child}n=n.sibling}m.tail!==null&&gt()>uh&&(a.flags|=128,d=!0,lu(m,!1),a.lanes=4194304)}else{if(!d)if(n=sh(y),n!==null){if(a.flags|=128,d=!0,n=n.updateQueue,a.updateQueue=n,lh(a,n),lu(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!_t)return Gt(a),null}else 2*gt()-m.renderingStartTime>uh&&c!==536870912&&(a.flags|=128,d=!0,lu(m,!1),a.lanes=4194304);m.isBackwards?(y.sibling=a.child,a.child=y):(n=m.last,n!==null?n.sibling=y:a.child=y,m.last=y)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=gt(),a.sibling=null,n=_s.current,X(_s,d?n&1|2:n&1),a):(Gt(a),null);case 22:case 23:return Ni(a),qm(),d=a.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(c&536870912)!==0&&(a.flags&128)===0&&(Gt(a),a.subtreeFlags&6&&(a.flags|=8192)):Gt(a),c=a.updateQueue,c!==null&&lh(a,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==c&&(a.flags|=2048),n!==null&&ie(gl),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),_i(ws),Gt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function pA(n,a){switch(_m(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return _i(ws),Te(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return Oe(a),null;case 13:if(Ni(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Vc()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return ie(_s),null;case 4:return Te(),null;case 10:return _i(a.type),null;case 22:case 23:return Ni(a),qm(),n!==null&&ie(gl),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return _i(ws),null;case 25:return null;default:return null}}function Xx(n,a){switch(_m(a),a.tag){case 3:_i(ws),Te();break;case 26:case 27:case 5:Oe(a);break;case 4:Te();break;case 13:Ni(a);break;case 19:ie(_s);break;case 10:_i(a.type);break;case 22:case 23:Ni(a),qm(),n!==null&&ie(gl);break;case 24:_i(ws)}}function ou(n,a){try{var c=a.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var m=d.next;c=m;do{if((c.tag&n)===n){d=void 0;var y=c.create,E=c.inst;d=y(),E.destroy=d}c=c.next}while(c!==m)}}catch(M){Tt(a,a.return,M)}}function fa(n,a,c){try{var d=a.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var y=m.next;d=y;do{if((d.tag&n)===n){var E=d.inst,M=E.destroy;if(M!==void 0){E.destroy=void 0,m=a;var H=c,ne=M;try{ne()}catch(me){Tt(m,H,me)}}}d=d.next}while(d!==y)}}catch(me){Tt(a,a.return,me)}}function Jx(n){var a=n.updateQueue;if(a!==null){var c=n.stateNode;try{Ub(a,c)}catch(d){Tt(n,n.return,d)}}}function ev(n,a,c){c.props=bl(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(d){Tt(n,a,d)}}function cu(n,a){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof c=="function"?n.refCleanup=c(d):c.current=d}}catch(m){Tt(n,a,m)}}function Zn(n,a){var c=n.ref,d=n.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(m){Tt(n,a,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){Tt(n,a,m)}else c.current=null}function tv(n){var a=n.type,c=n.memoizedProps,d=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(m){Tt(n,n.return,m)}}function up(n,a,c){try{var d=n.stateNode;qA(d,n.type,c,a),d[ks]=a}catch(m){Tt(n,n.return,m)}}function sv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&wa(n.type)||n.tag===4}function dp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||sv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&wa(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function hp(n,a,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(n),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=xh));else if(d!==4&&(d===27&&wa(n.type)&&(c=n.stateNode,a=null),n=n.child,n!==null))for(hp(n,a,c),n=n.sibling;n!==null;)hp(n,a,c),n=n.sibling}function oh(n,a,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,a?c.insertBefore(n,a):c.appendChild(n);else if(d!==4&&(d===27&&wa(n.type)&&(c=n.stateNode),n=n.child,n!==null))for(oh(n,a,c),n=n.sibling;n!==null;)oh(n,a,c),n=n.sibling}function rv(n){var a=n.stateNode,c=n.memoizedProps;try{for(var d=n.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);Bs(a,d,c),a[fs]=n,a[ks]=c}catch(y){Tt(n,n.return,y)}}var Ai=!1,os=!1,fp=!1,nv=typeof WeakSet=="function"?WeakSet:Set,Ms=null;function gA(n,a){if(n=n.containerInfo,Pp=Eh,n=pb(n),dm(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var m=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var E=0,M=-1,H=-1,ne=0,me=0,we=n,ae=null;t:for(;;){for(var le;we!==c||m!==0&&we.nodeType!==3||(M=E+m),we!==y||d!==0&&we.nodeType!==3||(H=E+d),we.nodeType===3&&(E+=we.nodeValue.length),(le=we.firstChild)!==null;)ae=we,we=le;for(;;){if(we===n)break t;if(ae===c&&++ne===m&&(M=E),ae===y&&++me===d&&(H=E),(le=we.nextSibling)!==null)break;we=ae,ae=we.parentNode}we=le}c=M===-1||H===-1?null:{start:M,end:H}}else c=null}c=c||{start:0,end:0}}else c=null;for(Ip={focusedElem:n,selectionRange:c},Eh=!1,Ms=a;Ms!==null;)if(a=Ms,n=a.child,(a.subtreeFlags&1024)!==0&&n!==null)n.return=a,Ms=n;else for(;Ms!==null;){switch(a=Ms,y=a.alternate,n=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,c=a,m=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var tt=bl(c.type,m,c.elementType===c.type);n=d.getSnapshotBeforeUpdate(tt,y),d.__reactInternalSnapshotBeforeUpdate=n}catch(Qe){Tt(c,c.return,Qe)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,c=n.nodeType,c===9)zp(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":zp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=a.sibling,n!==null){n.return=a.return,Ms=n;break}Ms=a.return}}function iv(n,a,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:ma(n,c),d&4&&ou(5,c);break;case 1:if(ma(n,c),d&4)if(n=c.stateNode,a===null)try{n.componentDidMount()}catch(E){Tt(c,c.return,E)}else{var m=bl(c.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(m,a,n.__reactInternalSnapshotBeforeUpdate)}catch(E){Tt(c,c.return,E)}}d&64&&Jx(c),d&512&&cu(c,c.return);break;case 3:if(ma(n,c),d&64&&(n=c.updateQueue,n!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{Ub(n,a)}catch(E){Tt(c,c.return,E)}}break;case 27:a===null&&d&4&&rv(c);case 26:case 5:ma(n,c),a===null&&d&4&&tv(c),d&512&&cu(c,c.return);break;case 12:ma(n,c);break;case 13:ma(n,c),d&4&&ov(n,c),d&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=SA.bind(null,c),FA(n,c))));break;case 22:if(d=c.memoizedState!==null||Ai,!d){a=a!==null&&a.memoizedState!==null||os,m=Ai;var y=os;Ai=d,(os=a)&&!y?pa(n,c,(c.subtreeFlags&8772)!==0):ma(n,c),Ai=m,os=y}break;case 30:break;default:ma(n,c)}}function av(n){var a=n.alternate;a!==null&&(n.alternate=null,av(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&Xa(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ft=null,gr=!1;function Ci(n,a,c){for(c=c.child;c!==null;)lv(n,a,c),c=c.sibling}function lv(n,a,c){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(ke,c)}catch{}switch(c.tag){case 26:os||Zn(c,a),Ci(n,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:os||Zn(c,a);var d=Ft,m=gr;wa(c.type)&&(Ft=c.stateNode,gr=!1),Ci(n,a,c),bu(c.stateNode),Ft=d,gr=m;break;case 5:os||Zn(c,a);case 6:if(d=Ft,m=gr,Ft=null,Ci(n,a,c),Ft=d,gr=m,Ft!==null)if(gr)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(c.stateNode)}catch(y){Tt(c,a,y)}else try{Ft.removeChild(c.stateNode)}catch(y){Tt(c,a,y)}break;case 18:Ft!==null&&(gr?(n=Ft,Kv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),Eu(n)):Kv(Ft,c.stateNode));break;case 4:d=Ft,m=gr,Ft=c.stateNode.containerInfo,gr=!0,Ci(n,a,c),Ft=d,gr=m;break;case 0:case 11:case 14:case 15:os||fa(2,c,a),os||fa(4,c,a),Ci(n,a,c);break;case 1:os||(Zn(c,a),d=c.stateNode,typeof d.componentWillUnmount=="function"&&ev(c,a,d)),Ci(n,a,c);break;case 21:Ci(n,a,c);break;case 22:os=(d=os)||c.memoizedState!==null,Ci(n,a,c),os=d;break;default:Ci(n,a,c)}}function ov(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Eu(n)}catch(c){Tt(a,a.return,c)}}function yA(n){switch(n.tag){case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new nv),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new nv),a;default:throw Error(r(435,n.tag))}}function mp(n,a){var c=yA(n);a.forEach(function(d){var m=EA.bind(null,n,d);c.has(d)||(c.add(d),d.then(m,m))})}function Cr(n,a){var c=a.deletions;if(c!==null)for(var d=0;d<c.length;d++){var m=c[d],y=n,E=a,M=E;e:for(;M!==null;){switch(M.tag){case 27:if(wa(M.type)){Ft=M.stateNode,gr=!1;break e}break;case 5:Ft=M.stateNode,gr=!1;break e;case 3:case 4:Ft=M.stateNode.containerInfo,gr=!0;break e}M=M.return}if(Ft===null)throw Error(r(160));lv(y,E,m),Ft=null,gr=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)cv(a,n),a=a.sibling}var mn=null;function cv(n,a){var c=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Cr(a,n),kr(n),d&4&&(fa(3,n,n.return),ou(3,n),fa(5,n,n.return));break;case 1:Cr(a,n),kr(n),d&512&&(os||c===null||Zn(c,c.return)),d&64&&Ai&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var m=mn;if(Cr(a,n),kr(n),d&512&&(os||c===null||Zn(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=n.memoizedState,c===null)if(d===null)if(n.stateNode===null){e:{d=n.type,c=n.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":y=m.getElementsByTagName("title")[0],(!y||y[hi]||y[fs]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(d),m.head.insertBefore(y,m.querySelector("head > title"))),Bs(y,d,c),y[fs]=n,Jt(y),d=y;break e;case"link":var E=rw("link","href",m).get(d+(c.href||""));if(E){for(var M=0;M<E.length;M++)if(y=E[M],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(M,1);break t}}y=m.createElement(d),Bs(y,d,c),m.head.appendChild(y);break;case"meta":if(E=rw("meta","content",m).get(d+(c.content||""))){for(M=0;M<E.length;M++)if(y=E[M],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(M,1);break t}}y=m.createElement(d),Bs(y,d,c),m.head.appendChild(y);break;default:throw Error(r(468,d))}y[fs]=n,Jt(y),d=y}n.stateNode=d}else nw(m,n.type,n.stateNode);else n.stateNode=sw(m,d,n.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?nw(m,n.type,n.stateNode):sw(m,d,n.memoizedProps)):d===null&&n.stateNode!==null&&up(n,n.memoizedProps,c.memoizedProps)}break;case 27:Cr(a,n),kr(n),d&512&&(os||c===null||Zn(c,c.return)),c!==null&&d&4&&up(n,n.memoizedProps,c.memoizedProps);break;case 5:if(Cr(a,n),kr(n),d&512&&(os||c===null||Zn(c,c.return)),n.flags&32){m=n.stateNode;try{Ts(m,"")}catch(le){Tt(n,n.return,le)}}d&4&&n.stateNode!=null&&(m=n.memoizedProps,up(n,m,c!==null?c.memoizedProps:m)),d&1024&&(fp=!0);break;case 6:if(Cr(a,n),kr(n),d&4){if(n.stateNode===null)throw Error(r(162));d=n.memoizedProps,c=n.stateNode;try{c.nodeValue=d}catch(le){Tt(n,n.return,le)}}break;case 3:if(jh=null,m=mn,mn=wh(a.containerInfo),Cr(a,n),mn=m,kr(n),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Eu(a.containerInfo)}catch(le){Tt(n,n.return,le)}fp&&(fp=!1,uv(n));break;case 4:d=mn,mn=wh(n.stateNode.containerInfo),Cr(a,n),kr(n),mn=d;break;case 12:Cr(a,n),kr(n);break;case 13:Cr(a,n),kr(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(vp=gt()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,mp(n,d)));break;case 22:m=n.memoizedState!==null;var H=c!==null&&c.memoizedState!==null,ne=Ai,me=os;if(Ai=ne||m,os=me||H,Cr(a,n),os=me,Ai=ne,kr(n),d&8192)e:for(a=n.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(c===null||H||Ai||os||xl(n)),c=null,a=n;;){if(a.tag===5||a.tag===26){if(c===null){H=c=a;try{if(y=H.stateNode,m)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{M=H.stateNode;var we=H.memoizedProps.style,ae=we!=null&&we.hasOwnProperty("display")?we.display:null;M.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(le){Tt(H,H.return,le)}}}else if(a.tag===6){if(c===null){H=a;try{H.stateNode.nodeValue=m?"":H.memoizedProps}catch(le){Tt(H,H.return,le)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=n.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,mp(n,c))));break;case 19:Cr(a,n),kr(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,mp(n,d)));break;case 30:break;case 21:break;default:Cr(a,n),kr(n)}}function kr(n){var a=n.flags;if(a&2){try{for(var c,d=n.return;d!==null;){if(sv(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var m=c.stateNode,y=dp(n);oh(n,y,m);break;case 5:var E=c.stateNode;c.flags&32&&(Ts(E,""),c.flags&=-33);var M=dp(n);oh(n,M,E);break;case 3:case 4:var H=c.stateNode.containerInfo,ne=dp(n);hp(n,ne,H);break;default:throw Error(r(161))}}catch(me){Tt(n,n.return,me)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function uv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;uv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function ma(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)iv(n,a.alternate,a),a=a.sibling}function xl(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:fa(4,a,a.return),xl(a);break;case 1:Zn(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&ev(a,a.return,c),xl(a);break;case 27:bu(a.stateNode);case 26:case 5:Zn(a,a.return),xl(a);break;case 22:a.memoizedState===null&&xl(a);break;case 30:xl(a);break;default:xl(a)}n=n.sibling}}function pa(n,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,m=n,y=a,E=y.flags;switch(y.tag){case 0:case 11:case 15:pa(m,y,c),ou(4,y);break;case 1:if(pa(m,y,c),d=y,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ne){Tt(d,d.return,ne)}if(d=y,m=d.updateQueue,m!==null){var M=d.stateNode;try{var H=m.shared.hiddenCallbacks;if(H!==null)for(m.shared.hiddenCallbacks=null,m=0;m<H.length;m++)$b(H[m],M)}catch(ne){Tt(d,d.return,ne)}}c&&E&64&&Jx(y),cu(y,y.return);break;case 27:rv(y);case 26:case 5:pa(m,y,c),c&&d===null&&E&4&&tv(y),cu(y,y.return);break;case 12:pa(m,y,c);break;case 13:pa(m,y,c),c&&E&4&&ov(m,y);break;case 22:y.memoizedState===null&&pa(m,y,c),cu(y,y.return);break;case 30:break;default:pa(m,y,c)}a=a.sibling}}function pp(n,a){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&Yc(c))}function gp(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Yc(n))}function Yn(n,a,c,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)dv(n,a,c,d),a=a.sibling}function dv(n,a,c,d){var m=a.flags;switch(a.tag){case 0:case 11:case 15:Yn(n,a,c,d),m&2048&&ou(9,a);break;case 1:Yn(n,a,c,d);break;case 3:Yn(n,a,c,d),m&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Yc(n)));break;case 12:if(m&2048){Yn(n,a,c,d),n=a.stateNode;try{var y=a.memoizedProps,E=y.id,M=y.onPostCommit;typeof M=="function"&&M(E,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(H){Tt(a,a.return,H)}}else Yn(n,a,c,d);break;case 13:Yn(n,a,c,d);break;case 23:break;case 22:y=a.stateNode,E=a.alternate,a.memoizedState!==null?y._visibility&2?Yn(n,a,c,d):uu(n,a):y._visibility&2?Yn(n,a,c,d):(y._visibility|=2,Ao(n,a,c,d,(a.subtreeFlags&10256)!==0)),m&2048&&pp(E,a);break;case 24:Yn(n,a,c,d),m&2048&&gp(a.alternate,a);break;default:Yn(n,a,c,d)}}function Ao(n,a,c,d,m){for(m=m&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var y=n,E=a,M=c,H=d,ne=E.flags;switch(E.tag){case 0:case 11:case 15:Ao(y,E,M,H,m),ou(8,E);break;case 23:break;case 22:var me=E.stateNode;E.memoizedState!==null?me._visibility&2?Ao(y,E,M,H,m):uu(y,E):(me._visibility|=2,Ao(y,E,M,H,m)),m&&ne&2048&&pp(E.alternate,E);break;case 24:Ao(y,E,M,H,m),m&&ne&2048&&gp(E.alternate,E);break;default:Ao(y,E,M,H,m)}a=a.sibling}}function uu(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=n,d=a,m=d.flags;switch(d.tag){case 22:uu(c,d),m&2048&&pp(d.alternate,d);break;case 24:uu(c,d),m&2048&&gp(d.alternate,d);break;default:uu(c,d)}a=a.sibling}}var du=8192;function Co(n){if(n.subtreeFlags&du)for(n=n.child;n!==null;)hv(n),n=n.sibling}function hv(n){switch(n.tag){case 26:Co(n),n.flags&du&&n.memoizedState!==null&&sC(mn,n.memoizedState,n.memoizedProps);break;case 5:Co(n);break;case 3:case 4:var a=mn;mn=wh(n.stateNode.containerInfo),Co(n),mn=a;break;case 22:n.memoizedState===null&&(a=n.alternate,a!==null&&a.memoizedState!==null?(a=du,du=16777216,Co(n),du=a):Co(n));break;default:Co(n)}}function fv(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function hu(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];Ms=d,pv(d,n)}fv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)mv(n),n=n.sibling}function mv(n){switch(n.tag){case 0:case 11:case 15:hu(n),n.flags&2048&&fa(9,n,n.return);break;case 3:hu(n);break;case 12:hu(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,ch(n)):hu(n);break;default:hu(n)}}function ch(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];Ms=d,pv(d,n)}fv(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:fa(8,a,a.return),ch(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,ch(a));break;default:ch(a)}n=n.sibling}}function pv(n,a){for(;Ms!==null;){var c=Ms;switch(c.tag){case 0:case 11:case 15:fa(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Yc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Ms=d;else e:for(c=n;Ms!==null;){d=Ms;var m=d.sibling,y=d.return;if(av(d),d===c){Ms=null;break e}if(m!==null){m.return=y,Ms=m;break e}Ms=y}}}var bA={getCacheForType:function(n){var a=Ws(ws),c=a.data.get(n);return c===void 0&&(c=n(),a.data.set(n,c)),c}},xA=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Mt=null,ut=null,bt=0,St=0,Tr=null,ga=!1,ko=!1,yp=!1,ki=0,ss=0,ya=0,vl=0,bp=0,Qr=0,To=0,fu=null,yr=null,xp=!1,vp=0,uh=1/0,dh=null,ba=null,zs=0,xa=null,Oo=null,Ro=0,wp=0,_p=null,gv=null,mu=0,jp=null;function Or(){if((Nt&2)!==0&&bt!==0)return bt&-bt;if($.T!==null){var n=xo;return n!==0?n:Tp()}return an()}function yv(){Qr===0&&(Qr=(bt&536870912)===0||_t?dr():536870912);var n=Wr.current;return n!==null&&(n.flags|=32),Qr}function Rr(n,a,c){(n===Mt&&(St===2||St===9)||n.cancelPendingCommit!==null)&&(Mo(n,0),va(n,bt,Qr,!1)),_r(n,c),((Nt&2)===0||n!==Mt)&&(n===Mt&&((Nt&2)===0&&(vl|=c),ss===4&&va(n,bt,Qr,!1)),Kn(n))}function bv(n,a,c){if((Nt&6)!==0)throw Error(r(327));var d=!c&&(a&124)===0&&(a&n.expiredLanes)===0||ur(n,a),m=d?_A(n,a):Ep(n,a,!0),y=d;do{if(m===0){ko&&!d&&va(n,a,0,!1);break}else{if(c=n.current.alternate,y&&!vA(c)){m=Ep(n,a,!1),y=!1;continue}if(m===2){if(y=a,n.errorRecoveryDisabledLanes&y)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;e:{var M=n;m=fu;var H=M.current.memoizedState.isDehydrated;if(H&&(Mo(M,E).flags|=256),E=Ep(M,E,!1),E!==2){if(yp&&!H){M.errorRecoveryDisabledLanes|=y,vl|=y,m=4;break e}y=yr,yr=m,y!==null&&(yr===null?yr=y:yr.push.apply(yr,y))}m=E}if(y=!1,m!==2)continue}}if(m===1){Mo(n,0),va(n,a,0,!0);break}e:{switch(d=n,y=m,y){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:va(d,a,Qr,!ga);break e;case 2:yr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(m=vp+300-gt(),10<m)){if(va(d,a,Qr,!ga),Ur(d,0,!0)!==0)break e;d.timeoutHandle=Zv(xv.bind(null,d,c,yr,dh,xp,a,Qr,vl,To,ga,y,2,-0,0),m);break e}xv(d,c,yr,dh,xp,a,Qr,vl,To,ga,y,0,-0,0)}}break}while(!0);Kn(n)}function xv(n,a,c,d,m,y,E,M,H,ne,me,we,ae,le){if(n.timeoutHandle=-1,we=a.subtreeFlags,(we&8192||(we&16785408)===16785408)&&(wu={stylesheets:null,count:0,unsuspend:tC},hv(a),we=rC(),we!==null)){n.cancelPendingCommit=we(Ev.bind(null,n,a,y,c,d,m,E,M,H,me,1,ae,le)),va(n,y,E,!ne);return}Ev(n,a,y,c,d,m,E,M,H)}function vA(n){for(var a=n;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var m=c[d],y=m.getSnapshot;m=m.value;try{if(!Er(y(),m))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function va(n,a,c,d){a&=~bp,a&=~vl,n.suspendedLanes|=a,n.pingedLanes&=~a,d&&(n.warmLanes|=a),d=n.expirationTimes;for(var m=a;0<m;){var y=31-ft(m),E=1<<y;d[y]=-1,m&=~E}c!==0&&Ln(n,c,a)}function hh(){return(Nt&6)===0?(pu(0),!1):!0}function Np(){if(ut!==null){if(St===0)var n=ut.return;else n=ut,wi=ml=null,zm(n),So=null,iu=0,n=ut;for(;n!==null;)Xx(n.alternate,n),n=n.return;ut=null}}function Mo(n,a){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,IA(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),Np(),Mt=n,ut=c=bi(n.current,null),bt=a,St=0,Tr=null,ga=!1,ko=ur(n,a),yp=!1,To=Qr=bp=vl=ya=ss=0,yr=fu=null,xp=!1,(a&8)!==0&&(a|=a&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=a;0<d;){var m=31-ft(d),y=1<<m;a|=n[m],d&=~y}return ki=a,Dd(),c}function vv(n,a){it=null,$.H=Jd,a===Wc||a===Fd?(a=Pb(),St=3):a===Db?(a=Pb(),St=4):St=a===Ix?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Tr=a,ut===null&&(ss=1,nh(n,Gr(a,n.current)))}function wv(){var n=$.H;return $.H=Jd,n===null?Jd:n}function _v(){var n=$.A;return $.A=bA,n}function Sp(){ss=4,ga||(bt&4194048)!==bt&&Wr.current!==null||(ko=!0),(ya&134217727)===0&&(vl&134217727)===0||Mt===null||va(Mt,bt,Qr,!1)}function Ep(n,a,c){var d=Nt;Nt|=2;var m=wv(),y=_v();(Mt!==n||bt!==a)&&(dh=null,Mo(n,a)),a=!1;var E=ss;e:do try{if(St!==0&&ut!==null){var M=ut,H=Tr;switch(St){case 8:Np(),E=6;break e;case 3:case 2:case 9:case 6:Wr.current===null&&(a=!0);var ne=St;if(St=0,Tr=null,Do(n,M,H,ne),c&&ko){E=0;break e}break;default:ne=St,St=0,Tr=null,Do(n,M,H,ne)}}wA(),E=ss;break}catch(me){vv(n,me)}while(!0);return a&&n.shellSuspendCounter++,wi=ml=null,Nt=d,$.H=m,$.A=y,ut===null&&(Mt=null,bt=0,Dd()),E}function wA(){for(;ut!==null;)jv(ut)}function _A(n,a){var c=Nt;Nt|=2;var d=wv(),m=_v();Mt!==n||bt!==a?(dh=null,uh=gt()+500,Mo(n,a)):ko=ur(n,a);e:do try{if(St!==0&&ut!==null){a=ut;var y=Tr;t:switch(St){case 1:St=0,Tr=null,Do(n,a,y,1);break;case 2:case 9:if(Lb(y)){St=0,Tr=null,Nv(a);break}a=function(){St!==2&&St!==9||Mt!==n||(St=7),Kn(n)},y.then(a,a);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:Lb(y)?(St=0,Tr=null,Nv(a)):(St=0,Tr=null,Do(n,a,y,7));break;case 5:var E=null;switch(ut.tag){case 26:E=ut.memoizedState;case 5:case 27:var M=ut;if(!E||iw(E)){St=0,Tr=null;var H=M.sibling;if(H!==null)ut=H;else{var ne=M.return;ne!==null?(ut=ne,fh(ne)):ut=null}break t}}St=0,Tr=null,Do(n,a,y,5);break;case 6:St=0,Tr=null,Do(n,a,y,6);break;case 8:Np(),ss=6;break e;default:throw Error(r(462))}}jA();break}catch(me){vv(n,me)}while(!0);return wi=ml=null,$.H=d,$.A=m,Nt=c,ut!==null?0:(Mt=null,bt=0,Dd(),ss)}function jA(){for(;ut!==null&&!Xe();)jv(ut)}function jv(n){var a=Wx(n.alternate,n,ki);n.memoizedProps=n.pendingProps,a===null?fh(n):ut=a}function Nv(n){var a=n,c=a.alternate;switch(a.tag){case 15:case 0:a=Hx(c,a,a.pendingProps,a.type,void 0,bt);break;case 11:a=Hx(c,a,a.pendingProps,a.type.render,a.ref,bt);break;case 5:zm(a);default:Xx(c,a),a=ut=Sb(a,ki),a=Wx(c,a,ki)}n.memoizedProps=n.pendingProps,a===null?fh(n):ut=a}function Do(n,a,c,d){wi=ml=null,zm(a),So=null,iu=0;var m=a.return;try{if(hA(n,m,a,c,bt)){ss=1,nh(n,Gr(c,n.current)),ut=null;return}}catch(y){if(m!==null)throw ut=m,y;ss=1,nh(n,Gr(c,n.current)),ut=null;return}a.flags&32768?(_t||d===1?n=!0:ko||(bt&536870912)!==0?n=!1:(ga=n=!0,(d===2||d===9||d===3||d===6)&&(d=Wr.current,d!==null&&d.tag===13&&(d.flags|=16384))),Sv(a,n)):fh(a)}function fh(n){var a=n;do{if((a.flags&32768)!==0){Sv(a,ga);return}n=a.return;var c=mA(a.alternate,a,ki);if(c!==null){ut=c;return}if(a=a.sibling,a!==null){ut=a;return}ut=a=n}while(a!==null);ss===0&&(ss=5)}function Sv(n,a){do{var c=pA(n.alternate,n);if(c!==null){c.flags&=32767,ut=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(n=n.sibling,n!==null)){ut=n;return}ut=n=c}while(n!==null);ss=6,ut=null}function Ev(n,a,c,d,m,y,E,M,H){n.cancelPendingCommit=null;do mh();while(zs!==0);if((Nt&6)!==0)throw Error(r(327));if(a!==null){if(a===n.current)throw Error(r(177));if(y=a.lanes|a.childLanes,y|=gm,Wa(n,c,y,E,M,H),n===Mt&&(ut=Mt=null,bt=0),Oo=a,xa=n,Ro=c,wp=y,_p=m,gv=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,AA(se,function(){return Ov(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=$.T,$.T=null,m=Y.p,Y.p=2,E=Nt,Nt|=4;try{gA(n,a,c)}finally{Nt=E,Y.p=m,$.T=d}}zs=1,Av(),Cv(),kv()}}function Av(){if(zs===1){zs=0;var n=xa,a=Oo,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=$.T,$.T=null;var d=Y.p;Y.p=2;var m=Nt;Nt|=4;try{cv(a,n);var y=Ip,E=pb(n.containerInfo),M=y.focusedElem,H=y.selectionRange;if(E!==M&&M&&M.ownerDocument&&mb(M.ownerDocument.documentElement,M)){if(H!==null&&dm(M)){var ne=H.start,me=H.end;if(me===void 0&&(me=ne),"selectionStart"in M)M.selectionStart=ne,M.selectionEnd=Math.min(me,M.value.length);else{var we=M.ownerDocument||document,ae=we&&we.defaultView||window;if(ae.getSelection){var le=ae.getSelection(),tt=M.textContent.length,Qe=Math.min(H.start,tt),kt=H.end===void 0?Qe:Math.min(H.end,tt);!le.extend&&Qe>kt&&(E=kt,kt=Qe,Qe=E);var ee=fb(M,Qe),K=fb(M,kt);if(ee&&K&&(le.rangeCount!==1||le.anchorNode!==ee.node||le.anchorOffset!==ee.offset||le.focusNode!==K.node||le.focusOffset!==K.offset)){var re=we.createRange();re.setStart(ee.node,ee.offset),le.removeAllRanges(),Qe>kt?(le.addRange(re),le.extend(K.node,K.offset)):(re.setEnd(K.node,K.offset),le.addRange(re))}}}}for(we=[],le=M;le=le.parentNode;)le.nodeType===1&&we.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<we.length;M++){var be=we[M];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}Eh=!!Pp,Ip=Pp=null}finally{Nt=m,Y.p=d,$.T=c}}n.current=a,zs=2}}function Cv(){if(zs===2){zs=0;var n=xa,a=Oo,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=$.T,$.T=null;var d=Y.p;Y.p=2;var m=Nt;Nt|=4;try{iv(n,a.alternate,a)}finally{Nt=m,Y.p=d,$.T=c}}zs=3}}function kv(){if(zs===4||zs===3){zs=0,st();var n=xa,a=Oo,c=Ro,d=gv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?zs=5:(zs=0,Oo=xa=null,Tv(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(ba=null),di(c),a=a.stateNode,Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(ke,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=$.T,m=Y.p,Y.p=2,$.T=null;try{for(var y=n.onRecoverableError,E=0;E<d.length;E++){var M=d[E];y(M.value,{componentStack:M.stack})}}finally{$.T=a,Y.p=m}}(Ro&3)!==0&&mh(),Kn(n),m=n.pendingLanes,(c&4194090)!==0&&(m&42)!==0?n===jp?mu++:(mu=0,jp=n):mu=0,pu(0)}}function Tv(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,Yc(a)))}function mh(n){return Av(),Cv(),kv(),Ov()}function Ov(){if(zs!==5)return!1;var n=xa,a=wp;wp=0;var c=di(Ro),d=$.T,m=Y.p;try{Y.p=32>c?32:c,$.T=null,c=_p,_p=null;var y=xa,E=Ro;if(zs=0,Oo=xa=null,Ro=0,(Nt&6)!==0)throw Error(r(331));var M=Nt;if(Nt|=4,mv(y.current),dv(y,y.current,E,c),Nt=M,pu(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(ke,y)}catch{}return!0}finally{Y.p=m,$.T=d,Tv(n,a)}}function Rv(n,a,c){a=Gr(c,a),a=tp(n.stateNode,a,2),n=ca(n,a,2),n!==null&&(_r(n,2),Kn(n))}function Tt(n,a,c){if(n.tag===3)Rv(n,n,c);else for(;a!==null;){if(a.tag===3){Rv(a,n,c);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ba===null||!ba.has(d))){n=Gr(c,n),c=qx(2),d=ca(a,c,2),d!==null&&(Px(c,d,a,n),_r(d,2),Kn(d));break}}a=a.return}}function Ap(n,a,c){var d=n.pingCache;if(d===null){d=n.pingCache=new xA;var m=new Set;d.set(a,m)}else m=d.get(a),m===void 0&&(m=new Set,d.set(a,m));m.has(c)||(yp=!0,m.add(c),n=NA.bind(null,n,a,c),a.then(n,n))}function NA(n,a,c){var d=n.pingCache;d!==null&&d.delete(a),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,Mt===n&&(bt&c)===c&&(ss===4||ss===3&&(bt&62914560)===bt&&300>gt()-vp?(Nt&2)===0&&Mo(n,0):bp|=c,To===bt&&(To=0)),Kn(n)}function Mv(n,a){a===0&&(a=oi()),n=po(n,a),n!==null&&(_r(n,a),Kn(n))}function SA(n){var a=n.memoizedState,c=0;a!==null&&(c=a.retryLane),Mv(n,c)}function EA(n,a){var c=0;switch(n.tag){case 13:var d=n.stateNode,m=n.memoizedState;m!==null&&(c=m.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(a),Mv(n,c)}function AA(n,a){return Ge(n,a)}var ph=null,Lo=null,Cp=!1,gh=!1,kp=!1,wl=0;function Kn(n){n!==Lo&&n.next===null&&(Lo===null?ph=Lo=n:Lo=Lo.next=n),gh=!0,Cp||(Cp=!0,kA())}function pu(n,a){if(!kp&&gh){kp=!0;do for(var c=!1,d=ph;d!==null;){if(n!==0){var m=d.pendingLanes;if(m===0)var y=0;else{var E=d.suspendedLanes,M=d.pingedLanes;y=(1<<31-ft(42|n)+1)-1,y&=m&~(E&~M),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,Pv(d,y))}else y=bt,y=Ur(d,d===Mt?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||ur(d,y)||(c=!0,Pv(d,y));d=d.next}while(c);kp=!1}}function CA(){Dv()}function Dv(){gh=Cp=!1;var n=0;wl!==0&&(PA()&&(n=wl),wl=0);for(var a=gt(),c=null,d=ph;d!==null;){var m=d.next,y=Lv(d,a);y===0?(d.next=null,c===null?ph=m:c.next=m,m===null&&(Lo=c)):(c=d,(n!==0||(y&3)!==0)&&(gh=!0)),d=m}pu(n)}function Lv(n,a){for(var c=n.suspendedLanes,d=n.pingedLanes,m=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var E=31-ft(y),M=1<<E,H=m[E];H===-1?((M&c)===0||(M&d)!==0)&&(m[E]=zr(M,a)):H<=a&&(n.expiredLanes|=M),y&=~M}if(a=Mt,c=bt,c=Ur(n,n===a?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,c===0||n===a&&(St===2||St===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&Ye(d),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||ur(n,c)){if(a=c&-c,a===n.callbackPriority)return a;switch(d!==null&&Ye(d),di(c)){case 2:case 8:c=F;break;case 32:c=se;break;case 268435456:c=Ce;break;default:c=se}return d=qv.bind(null,n),c=Ge(c,d),n.callbackPriority=a,n.callbackNode=c,a}return d!==null&&d!==null&&Ye(d),n.callbackPriority=2,n.callbackNode=null,2}function qv(n,a){if(zs!==0&&zs!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(mh()&&n.callbackNode!==c)return null;var d=bt;return d=Ur(n,n===Mt?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(bv(n,d,a),Lv(n,gt()),n.callbackNode!=null&&n.callbackNode===c?qv.bind(null,n):null)}function Pv(n,a){if(mh())return null;bv(n,a,!0)}function kA(){$A(function(){(Nt&6)!==0?Ge(yt,CA):Dv()})}function Tp(){return wl===0&&(wl=dr()),wl}function Iv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ji(""+n)}function $v(n,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,n.id&&c.setAttribute("form",n.id),a.parentNode.insertBefore(c,a),n=new FormData(n),c.parentNode.removeChild(c),n}function TA(n,a,c,d,m){if(a==="submit"&&c&&c.stateNode===m){var y=Iv((m[ks]||null).action),E=d.submitter;E&&(a=(a=E[ks]||null)?Iv(a.formAction):E.getAttribute("formAction"),a!==null&&(y=a,E=null));var M=new he("action","action",null,d,m);n.push({event:M,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(wl!==0){var H=E?$v(m,E):new FormData(m);Wm(c,{pending:!0,data:H,method:m.method,action:y},null,H)}}else typeof y=="function"&&(M.preventDefault(),H=E?$v(m,E):new FormData(m),Wm(c,{pending:!0,data:H,method:m.method,action:y},y,H))},currentTarget:m}]})}}for(var Op=0;Op<pm.length;Op++){var Rp=pm[Op],OA=Rp.toLowerCase(),RA=Rp[0].toUpperCase()+Rp.slice(1);fn(OA,"on"+RA)}fn(bb,"onAnimationEnd"),fn(xb,"onAnimationIteration"),fn(vb,"onAnimationStart"),fn("dblclick","onDoubleClick"),fn("focusin","onFocus"),fn("focusout","onBlur"),fn(KE,"onTransitionRun"),fn(WE,"onTransitionStart"),fn(QE,"onTransitionCancel"),fn(wb,"onTransitionEnd"),ns("onMouseEnter",["mouseout","mouseover"]),ns("onMouseLeave",["mouseout","mouseover"]),ns("onPointerEnter",["pointerout","pointerover"]),ns("onPointerLeave",["pointerout","pointerover"]),ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ln("onBeforeInput",["compositionend","keypress","textInput","paste"]),ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gu));function Uv(n,a){a=(a&4)!==0;for(var c=0;c<n.length;c++){var d=n[c],m=d.event;d=d.listeners;e:{var y=void 0;if(a)for(var E=d.length-1;0<=E;E--){var M=d[E],H=M.instance,ne=M.currentTarget;if(M=M.listener,H!==y&&m.isPropagationStopped())break e;y=M,m.currentTarget=ne;try{y(m)}catch(me){rh(me)}m.currentTarget=null,y=H}else for(E=0;E<d.length;E++){if(M=d[E],H=M.instance,ne=M.currentTarget,M=M.listener,H!==y&&m.isPropagationStopped())break e;y=M,m.currentTarget=ne;try{y(m)}catch(me){rh(me)}m.currentTarget=null,y=H}}}}function dt(n,a){var c=a[Qi];c===void 0&&(c=a[Qi]=new Set);var d=n+"__bubble";c.has(d)||(zv(a,n,2,!1),c.add(d))}function Mp(n,a,c){var d=0;a&&(d|=4),zv(c,n,d,a)}var yh="_reactListening"+Math.random().toString(36).slice(2);function Dp(n){if(!n[yh]){n[yh]=!0,to.forEach(function(c){c!=="selectionchange"&&(MA.has(c)||Mp(c,!1,n),Mp(c,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[yh]||(a[yh]=!0,Mp("selectionchange",!1,a))}}function zv(n,a,c,d){switch(dw(a)){case 2:var m=aC;break;case 8:m=lC;break;default:m=Yp}c=m.bind(null,a,c,n),m=void 0,!sa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),d?m!==void 0?n.addEventListener(a,c,{capture:!0,passive:m}):n.addEventListener(a,c,!0):m!==void 0?n.addEventListener(a,c,{passive:m}):n.addEventListener(a,c,!1)}function Lp(n,a,c,d,m){var y=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var M=d.stateNode.containerInfo;if(M===m)break;if(E===4)for(E=d.return;E!==null;){var H=E.tag;if((H===3||H===4)&&E.stateNode.containerInfo===m)return;E=E.return}for(;M!==null;){if(E=Pn(M),E===null)return;if(H=E.tag,H===5||H===6||H===26||H===27){d=y=E;continue e}M=M.parentNode}}d=d.return}ta(function(){var ne=y,me=ea(c),we=[];e:{var ae=_b.get(n);if(ae!==void 0){var le=he,tt=n;switch(n){case"keypress":if(na(c)===0)break e;case"keydown":case"keyup":le=AE;break;case"focusin":tt="focus",le=as;break;case"focusout":tt="blur",le=as;break;case"beforeblur":case"afterblur":le=as;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=vs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=is;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=TE;break;case bb:case xb:case vb:le=hn;break;case wb:le=RE;break;case"scroll":case"scrollend":le=He;break;case"wheel":le=DE;break;case"copy":case"cut":case"paste":le=Rd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Jy;break;case"toggle":case"beforetoggle":le=qE}var Qe=(a&4)!==0,kt=!Qe&&(n==="scroll"||n==="scrollend"),ee=Qe?ae!==null?ae+"Capture":null:ae;Qe=[];for(var K=ne,re;K!==null;){var be=K;if(re=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||re===null||ee===null||(be=Vr(K,ee),be!=null&&Qe.push(yu(K,be,re))),kt)break;K=K.return}0<Qe.length&&(ae=new le(ae,tt,null,c,me),we.push({event:ae,listeners:Qe}))}}if((a&7)===0){e:{if(ae=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",ae&&c!==nl&&(tt=c.relatedTarget||c.fromElement)&&(Pn(tt)||tt[qn]))break e;if((le||ae)&&(ae=me.window===me?me:(ae=me.ownerDocument)?ae.defaultView||ae.parentWindow:window,le?(tt=c.relatedTarget||c.toElement,le=ne,tt=tt?Pn(tt):null,tt!==null&&(kt=o(tt),Qe=tt.tag,tt!==kt||Qe!==5&&Qe!==27&&Qe!==6)&&(tt=null)):(le=null,tt=ne),le!==tt)){if(Qe=vs,be="onMouseLeave",ee="onMouseEnter",K="mouse",(n==="pointerout"||n==="pointerover")&&(Qe=Jy,be="onPointerLeave",ee="onPointerEnter",K="pointer"),kt=le==null?ae:Xt(le),re=tt==null?ae:Xt(tt),ae=new Qe(be,K+"leave",le,c,me),ae.target=kt,ae.relatedTarget=re,be=null,Pn(me)===ne&&(Qe=new Qe(ee,K+"enter",tt,c,me),Qe.target=re,Qe.relatedTarget=kt,be=Qe),kt=be,le&&tt)t:{for(Qe=le,ee=tt,K=0,re=Qe;re;re=qo(re))K++;for(re=0,be=ee;be;be=qo(be))re++;for(;0<K-re;)Qe=qo(Qe),K--;for(;0<re-K;)ee=qo(ee),re--;for(;K--;){if(Qe===ee||ee!==null&&Qe===ee.alternate)break t;Qe=qo(Qe),ee=qo(ee)}Qe=null}else Qe=null;le!==null&&Bv(we,ae,le,Qe,!1),tt!==null&&kt!==null&&Bv(we,kt,tt,Qe,!0)}}e:{if(ae=ne?Xt(ne):window,le=ae.nodeName&&ae.nodeName.toLowerCase(),le==="select"||le==="input"&&ae.type==="file")var qe=lb;else if(ib(ae))if(ob)qe=GE;else{qe=HE;var lt=FE}else le=ae.nodeName,!le||le.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?ne&&fr(ne.elementType)&&(qe=lb):qe=VE;if(qe&&(qe=qe(n,ne))){ab(we,qe,c,me);break e}lt&&lt(n,ae,ne),n==="focusout"&&ne&&ae.type==="number"&&ne.memoizedProps.value!=null&&pi(ae,"number",ae.value)}switch(lt=ne?Xt(ne):window,n){case"focusin":(ib(lt)||lt.contentEditable==="true")&&(ho=lt,hm=ne,Fc=null);break;case"focusout":Fc=hm=ho=null;break;case"mousedown":fm=!0;break;case"contextmenu":case"mouseup":case"dragend":fm=!1,gb(we,c,me);break;case"selectionchange":if(YE)break;case"keydown":case"keyup":gb(we,c,me)}var Ve;if(om)e:{switch(n){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else uo?rb(n,c)&&(Je="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(Je="onCompositionStart");Je&&(eb&&c.locale!=="ko"&&(uo||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&uo&&(Ve=ra()):(Sr=me,mr="value"in Sr?Sr.value:Sr.textContent,uo=!0)),lt=bh(ne,Je),0<lt.length&&(Je=new al(Je,n,null,c,me),we.push({event:Je,listeners:lt}),Ve?Je.data=Ve:(Ve=nb(c),Ve!==null&&(Je.data=Ve)))),(Ve=IE?$E(n,c):UE(n,c))&&(Je=bh(ne,"onBeforeInput"),0<Je.length&&(lt=new al("onBeforeInput","beforeinput",null,c,me),we.push({event:lt,listeners:Je}),lt.data=Ve)),TA(we,n,ne,c,me)}Uv(we,a)})}function yu(n,a,c){return{instance:n,listener:a,currentTarget:c}}function bh(n,a){for(var c=a+"Capture",d=[];n!==null;){var m=n,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Vr(n,c),m!=null&&d.unshift(yu(n,m,y)),m=Vr(n,a),m!=null&&d.push(yu(n,m,y))),n.tag===3)return d;n=n.return}return[]}function qo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Bv(n,a,c,d,m){for(var y=a._reactName,E=[];c!==null&&c!==d;){var M=c,H=M.alternate,ne=M.stateNode;if(M=M.tag,H!==null&&H===d)break;M!==5&&M!==26&&M!==27||ne===null||(H=ne,m?(ne=Vr(c,y),ne!=null&&E.unshift(yu(c,ne,H))):m||(ne=Vr(c,y),ne!=null&&E.push(yu(c,ne,H)))),c=c.return}E.length!==0&&n.push({event:a,listeners:E})}var DA=/\r\n?/g,LA=/\u0000|\uFFFD/g;function Fv(n){return(typeof n=="string"?n:""+n).replace(DA,`
`).replace(LA,"")}function Hv(n,a){return a=Fv(a),Fv(n)===a}function xh(){}function Ct(n,a,c,d,m,y){switch(c){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Ts(n,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Ts(n,""+d);break;case"className":on(n,"class",d);break;case"tabIndex":on(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":on(n,c,d);break;case"style":oo(n,d,y);break;case"data":if(a!=="object"){on(n,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||c!=="href")){n.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=Ji(""+d),n.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&Ct(n,a,"name",m.name,m,null),Ct(n,a,"formEncType",m.formEncType,m,null),Ct(n,a,"formMethod",m.formMethod,m,null),Ct(n,a,"formTarget",m.formTarget,m,null)):(Ct(n,a,"encType",m.encType,m,null),Ct(n,a,"method",m.method,m,null),Ct(n,a,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=Ji(""+d),n.setAttribute(c,d);break;case"onClick":d!=null&&(n.onclick=xh);break;case"onScroll":d!=null&&dt("scroll",n);break;case"onScrollEnd":d!=null&&dt("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(m.children!=null)throw Error(r(60));n.innerHTML=c}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}c=Ji(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""+d):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":d===!0?n.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,d):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(c,d):n.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(c):n.setAttribute(c,d);break;case"popover":dt("beforetoggle",n),dt("toggle",n),Xi(n,"popover",d);break;case"xlinkActuate":hr(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":hr(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":hr(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":hr(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":hr(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":hr(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":hr(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":hr(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":hr(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Xi(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Pc.get(c)||c,Xi(n,c,d))}}function qp(n,a,c,d,m,y){switch(c){case"style":oo(n,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(m.children!=null)throw Error(r(60));n.innerHTML=c}}break;case"children":typeof d=="string"?Ts(n,d):(typeof d=="number"||typeof d=="bigint")&&Ts(n,""+d);break;case"onScroll":d!=null&&dt("scroll",n);break;case"onScrollEnd":d!=null&&dt("scrollend",n);break;case"onClick":d!=null&&(n.onclick=xh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!so.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),a=c.slice(2,m?c.length-7:void 0),y=n[ks]||null,y=y!=null?y[c]:null,typeof y=="function"&&n.removeEventListener(a,y,m),typeof d=="function")){typeof y!="function"&&y!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(a,d,m);break e}c in n?n[c]=d:d===!0?n.setAttribute(c,""):Xi(n,c,d)}}}function Bs(n,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dt("error",n),dt("load",n);var d=!1,m=!1,y;for(y in c)if(c.hasOwnProperty(y)){var E=c[y];if(E!=null)switch(y){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ct(n,a,y,E,c,null)}}m&&Ct(n,a,"srcSet",c.srcSet,c,null),d&&Ct(n,a,"src",c.src,c,null);return;case"input":dt("invalid",n);var M=y=E=m=null,H=null,ne=null;for(d in c)if(c.hasOwnProperty(d)){var me=c[d];if(me!=null)switch(d){case"name":m=me;break;case"type":E=me;break;case"checked":H=me;break;case"defaultChecked":ne=me;break;case"value":y=me;break;case"defaultValue":M=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(137,a));break;default:Ct(n,a,d,me,c,null)}}ao(n,y,M,H,ne,E,m,!1),Fr(n);return;case"select":dt("invalid",n),d=E=y=null;for(m in c)if(c.hasOwnProperty(m)&&(M=c[m],M!=null))switch(m){case"value":y=M;break;case"defaultValue":E=M;break;case"multiple":d=M;default:Ct(n,a,m,M,c,null)}a=y,c=E,n.multiple=!!d,a!=null?zn(n,!!d,a,!1):c!=null&&zn(n,!!d,c,!0);return;case"textarea":dt("invalid",n),y=m=d=null;for(E in c)if(c.hasOwnProperty(E)&&(M=c[E],M!=null))switch(E){case"value":d=M;break;case"defaultValue":m=M;break;case"children":y=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:Ct(n,a,E,M,c,null)}Bn(n,d,m,y),Fr(n);return;case"option":for(H in c)if(c.hasOwnProperty(H)&&(d=c[H],d!=null))switch(H){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ct(n,a,H,d,c,null)}return;case"dialog":dt("beforetoggle",n),dt("toggle",n),dt("cancel",n),dt("close",n);break;case"iframe":case"object":dt("load",n);break;case"video":case"audio":for(d=0;d<gu.length;d++)dt(gu[d],n);break;case"image":dt("error",n),dt("load",n);break;case"details":dt("toggle",n);break;case"embed":case"source":case"link":dt("error",n),dt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in c)if(c.hasOwnProperty(ne)&&(d=c[ne],d!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ct(n,a,ne,d,c,null)}return;default:if(fr(a)){for(me in c)c.hasOwnProperty(me)&&(d=c[me],d!==void 0&&qp(n,a,me,d,c,void 0));return}}for(M in c)c.hasOwnProperty(M)&&(d=c[M],d!=null&&Ct(n,a,M,d,c,null))}function qA(n,a,c,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,E=null,M=null,H=null,ne=null,me=null;for(le in c){var we=c[le];if(c.hasOwnProperty(le)&&we!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":H=we;default:d.hasOwnProperty(le)||Ct(n,a,le,null,d,we)}}for(var ae in d){var le=d[ae];if(we=c[ae],d.hasOwnProperty(ae)&&(le!=null||we!=null))switch(ae){case"type":y=le;break;case"name":m=le;break;case"checked":ne=le;break;case"defaultChecked":me=le;break;case"value":E=le;break;case"defaultValue":M=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,a));break;default:le!==we&&Ct(n,a,ae,le,d,we)}}rl(n,E,M,H,ne,me,y,m);return;case"select":le=E=M=ae=null;for(y in c)if(H=c[y],c.hasOwnProperty(y)&&H!=null)switch(y){case"value":break;case"multiple":le=H;default:d.hasOwnProperty(y)||Ct(n,a,y,null,d,H)}for(m in d)if(y=d[m],H=c[m],d.hasOwnProperty(m)&&(y!=null||H!=null))switch(m){case"value":ae=y;break;case"defaultValue":M=y;break;case"multiple":E=y;default:y!==H&&Ct(n,a,m,y,d,H)}a=M,c=E,d=le,ae!=null?zn(n,!!c,ae,!1):!!d!=!!c&&(a!=null?zn(n,!!c,a,!0):zn(n,!!c,c?[]:"",!1));return;case"textarea":le=ae=null;for(M in c)if(m=c[M],c.hasOwnProperty(M)&&m!=null&&!d.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Ct(n,a,M,null,d,m)}for(E in d)if(m=d[E],y=c[E],d.hasOwnProperty(E)&&(m!=null||y!=null))switch(E){case"value":ae=m;break;case"defaultValue":le=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==y&&Ct(n,a,E,m,d,y)}lo(n,ae,le);return;case"option":for(var tt in c)if(ae=c[tt],c.hasOwnProperty(tt)&&ae!=null&&!d.hasOwnProperty(tt))switch(tt){case"selected":n.selected=!1;break;default:Ct(n,a,tt,null,d,ae)}for(H in d)if(ae=d[H],le=c[H],d.hasOwnProperty(H)&&ae!==le&&(ae!=null||le!=null))switch(H){case"selected":n.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Ct(n,a,H,ae,d,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qe in c)ae=c[Qe],c.hasOwnProperty(Qe)&&ae!=null&&!d.hasOwnProperty(Qe)&&Ct(n,a,Qe,null,d,ae);for(ne in d)if(ae=d[ne],le=c[ne],d.hasOwnProperty(ne)&&ae!==le&&(ae!=null||le!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,a));break;default:Ct(n,a,ne,ae,d,le)}return;default:if(fr(a)){for(var kt in c)ae=c[kt],c.hasOwnProperty(kt)&&ae!==void 0&&!d.hasOwnProperty(kt)&&qp(n,a,kt,void 0,d,ae);for(me in d)ae=d[me],le=c[me],!d.hasOwnProperty(me)||ae===le||ae===void 0&&le===void 0||qp(n,a,me,ae,d,le);return}}for(var ee in c)ae=c[ee],c.hasOwnProperty(ee)&&ae!=null&&!d.hasOwnProperty(ee)&&Ct(n,a,ee,null,d,ae);for(we in d)ae=d[we],le=c[we],!d.hasOwnProperty(we)||ae===le||ae==null&&le==null||Ct(n,a,we,ae,d,le)}var Pp=null,Ip=null;function vh(n){return n.nodeType===9?n:n.ownerDocument}function Vv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gv(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function $p(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Up=null;function PA(){var n=window.event;return n&&n.type==="popstate"?n===Up?!1:(Up=n,!0):(Up=null,!1)}var Zv=typeof setTimeout=="function"?setTimeout:void 0,IA=typeof clearTimeout=="function"?clearTimeout:void 0,Yv=typeof Promise=="function"?Promise:void 0,$A=typeof queueMicrotask=="function"?queueMicrotask:typeof Yv<"u"?function(n){return Yv.resolve(null).then(n).catch(UA)}:Zv;function UA(n){setTimeout(function(){throw n})}function wa(n){return n==="head"}function Kv(n,a){var c=a,d=0,m=0;do{var y=c.nextSibling;if(n.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(0<d&&8>d){c=d;var E=n.ownerDocument;if(c&1&&bu(E.documentElement),c&2&&bu(E.body),c&4)for(c=E.head,bu(c),E=c.firstChild;E;){var M=E.nextSibling,H=E.nodeName;E[hi]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&E.rel.toLowerCase()==="stylesheet"||c.removeChild(E),E=M}}if(m===0){n.removeChild(y),Eu(a);return}m--}else c==="$"||c==="$?"||c==="$!"?m++:d=c.charCodeAt(0)-48;else d=0;c=y}while(c);Eu(a)}function zp(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":zp(c),Xa(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function zA(n,a,c,d){for(;n.nodeType===1;){var m=c;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[hi])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=pn(n.nextSibling),n===null)break}return null}function BA(n,a,c){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=pn(n.nextSibling),n===null))return null;return n}function Bp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function FA(n,a){var c=n.ownerDocument;if(n.data!=="$?"||c.readyState==="complete")a();else{var d=function(){a(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function pn(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return n}var Fp=null;function Wv(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return n;a--}else c==="/$"&&a++}n=n.previousSibling}return null}function Qv(n,a,c){switch(a=vh(c),n){case"html":if(n=a.documentElement,!n)throw Error(r(452));return n;case"head":if(n=a.head,!n)throw Error(r(453));return n;case"body":if(n=a.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function bu(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);Xa(n)}var Xr=new Map,Xv=new Set;function wh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ti=Y.d;Y.d={f:HA,r:VA,D:GA,C:ZA,L:YA,m:KA,X:QA,S:WA,M:XA};function HA(){var n=Ti.f(),a=hh();return n||a}function VA(n){var a=In(n);a!==null&&a.tag===5&&a.type==="form"?bx(a):Ti.r(n)}var Po=typeof document>"u"?null:document;function Jv(n,a,c){var d=Po;if(d&&typeof a=="string"&&a){var m=Ys(a);m='link[rel="'+n+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),Xv.has(m)||(Xv.add(m),n={rel:n,crossOrigin:c,href:a},d.querySelector(m)===null&&(a=d.createElement("link"),Bs(a,"link",n),Jt(a),d.head.appendChild(a)))}}function GA(n){Ti.D(n),Jv("dns-prefetch",n,null)}function ZA(n,a){Ti.C(n,a),Jv("preconnect",n,a)}function YA(n,a,c){Ti.L(n,a,c);var d=Po;if(d&&n&&a){var m='link[rel="preload"][as="'+Ys(a)+'"]';a==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+Ys(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+Ys(c.imageSizes)+'"]')):m+='[href="'+Ys(n)+'"]';var y=m;switch(a){case"style":y=Io(n);break;case"script":y=$o(n)}Xr.has(y)||(n=g({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:n,as:a},c),Xr.set(y,n),d.querySelector(m)!==null||a==="style"&&d.querySelector(xu(y))||a==="script"&&d.querySelector(vu(y))||(a=d.createElement("link"),Bs(a,"link",n),Jt(a),d.head.appendChild(a)))}}function KA(n,a){Ti.m(n,a);var c=Po;if(c&&n){var d=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Ys(d)+'"][href="'+Ys(n)+'"]',y=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=$o(n)}if(!Xr.has(y)&&(n=g({rel:"modulepreload",href:n},a),Xr.set(y,n),c.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(vu(y)))return}d=c.createElement("link"),Bs(d,"link",n),Jt(d),c.head.appendChild(d)}}}function WA(n,a,c){Ti.S(n,a,c);var d=Po;if(d&&n){var m=$n(d).hoistableStyles,y=Io(n);a=a||"default";var E=m.get(y);if(!E){var M={loading:0,preload:null};if(E=d.querySelector(xu(y)))M.loading=5;else{n=g({rel:"stylesheet",href:n,"data-precedence":a},c),(c=Xr.get(y))&&Hp(n,c);var H=E=d.createElement("link");Jt(H),Bs(H,"link",n),H._p=new Promise(function(ne,me){H.onload=ne,H.onerror=me}),H.addEventListener("load",function(){M.loading|=1}),H.addEventListener("error",function(){M.loading|=2}),M.loading|=4,_h(E,a,d)}E={type:"stylesheet",instance:E,count:1,state:M},m.set(y,E)}}}function QA(n,a){Ti.X(n,a);var c=Po;if(c&&n){var d=$n(c).hoistableScripts,m=$o(n),y=d.get(m);y||(y=c.querySelector(vu(m)),y||(n=g({src:n,async:!0},a),(a=Xr.get(m))&&Vp(n,a),y=c.createElement("script"),Jt(y),Bs(y,"link",n),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(m,y))}}function XA(n,a){Ti.M(n,a);var c=Po;if(c&&n){var d=$n(c).hoistableScripts,m=$o(n),y=d.get(m);y||(y=c.querySelector(vu(m)),y||(n=g({src:n,async:!0,type:"module"},a),(a=Xr.get(m))&&Vp(n,a),y=c.createElement("script"),Jt(y),Bs(y,"link",n),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(m,y))}}function ew(n,a,c,d){var m=(m=Ee.current)?wh(m):null;if(!m)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Io(c.href),c=$n(m).hoistableStyles,d=c.get(a),d||(d={type:"style",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=Io(c.href);var y=$n(m).hoistableStyles,E=y.get(n);if(E||(m=m.ownerDocument||m,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,E),(y=m.querySelector(xu(n)))&&!y._p&&(E.instance=y,E.state.loading=5),Xr.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Xr.set(n,c),y||JA(m,n,c,E.state))),a&&d===null)throw Error(r(528,""));return E}if(a&&d!==null)throw Error(r(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=$o(c),c=$n(m).hoistableScripts,d=c.get(a),d||(d={type:"script",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Io(n){return'href="'+Ys(n)+'"'}function xu(n){return'link[rel="stylesheet"]['+n+"]"}function tw(n){return g({},n,{"data-precedence":n.precedence,precedence:null})}function JA(n,a,c,d){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=n.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Bs(a,"link",c),Jt(a),n.head.appendChild(a))}function $o(n){return'[src="'+Ys(n)+'"]'}function vu(n){return"script[async]"+n}function sw(n,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var d=n.querySelector('style[data-href~="'+Ys(c.href)+'"]');if(d)return a.instance=d,Jt(d),d;var m=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),Jt(d),Bs(d,"style",m),_h(d,c.precedence,n),a.instance=d;case"stylesheet":m=Io(c.href);var y=n.querySelector(xu(m));if(y)return a.state.loading|=4,a.instance=y,Jt(y),y;d=tw(c),(m=Xr.get(m))&&Hp(d,m),y=(n.ownerDocument||n).createElement("link"),Jt(y);var E=y;return E._p=new Promise(function(M,H){E.onload=M,E.onerror=H}),Bs(y,"link",d),a.state.loading|=4,_h(y,c.precedence,n),a.instance=y;case"script":return y=$o(c.src),(m=n.querySelector(vu(y)))?(a.instance=m,Jt(m),m):(d=c,(m=Xr.get(y))&&(d=g({},c),Vp(d,m)),n=n.ownerDocument||n,m=n.createElement("script"),Jt(m),Bs(m,"link",d),n.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,_h(d,c.precedence,n));return a.instance}function _h(n,a,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,y=m,E=0;E<d.length;E++){var M=d[E];if(M.dataset.precedence===a)y=M;else if(y!==m)break}y?y.parentNode.insertBefore(n,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(n,a.firstChild))}function Hp(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function Vp(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var jh=null;function rw(n,a,c){if(jh===null){var d=new Map,m=jh=new Map;m.set(c,d)}else m=jh,d=m.get(c),d||(d=new Map,m.set(c,d));if(d.has(n))return d;for(d.set(n,null),c=c.getElementsByTagName(n),m=0;m<c.length;m++){var y=c[m];if(!(y[hi]||y[fs]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(a)||"";E=n+E;var M=d.get(E);M?M.push(y):d.set(E,[y])}}return d}function nw(n,a,c){n=n.ownerDocument||n,n.head.insertBefore(c,a==="title"?n.querySelector("head > title"):null)}function eC(n,a,c){if(c===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function iw(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var wu=null;function tC(){}function sC(n,a,c){if(wu===null)throw Error(r(475));var d=wu;if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=Io(c.href),y=n.querySelector(xu(m));if(y){n=y._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(d.count++,d=Nh.bind(d),n.then(d,d)),a.state.loading|=4,a.instance=y,Jt(y);return}y=n.ownerDocument||n,c=tw(c),(m=Xr.get(m))&&Hp(c,m),y=y.createElement("link"),Jt(y);var E=y;E._p=new Promise(function(M,H){E.onload=M,E.onerror=H}),Bs(y,"link",c),a.instance=y}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(d.count++,a=Nh.bind(d),n.addEventListener("load",a),n.addEventListener("error",a))}}function rC(){if(wu===null)throw Error(r(475));var n=wu;return n.stylesheets&&n.count===0&&Gp(n,n.stylesheets),0<n.count?function(a){var c=setTimeout(function(){if(n.stylesheets&&Gp(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(c)}}:null}function Nh(){if(this.count--,this.count===0){if(this.stylesheets)Gp(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Sh=null;function Gp(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Sh=new Map,a.forEach(nC,n),Sh=null,Nh.call(n))}function nC(n,a){if(!(a.state.loading&4)){var c=Sh.get(n);if(c)var d=c.get(null);else{c=new Map,Sh.set(n,c);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var E=m[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),d=E)}d&&c.set(null,d)}m=a.instance,E=m.getAttribute("data-precedence"),y=c.get(E)||d,y===d&&c.set(null,m),c.set(E,m),this.count++,d=Nh.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),y?y.parentNode.insertBefore(m,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),a.state.loading|=4}}var _u={$$typeof:k,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function iC(n,a,c,d,m,y,E,M){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.hiddenUpdates=ci(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function aw(n,a,c,d,m,y,E,M,H,ne,me,we){return n=new iC(n,a,c,E,M,H,ne,we),a=1,y===!0&&(a|=24),y=Ar(3,null,null,a),n.current=y,y.stateNode=n,a=Am(),a.refCount++,n.pooledCache=a,a.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:a},Om(y),n}function lw(n){return n?(n=go,n):go}function ow(n,a,c,d,m,y){m=lw(m),d.context===null?d.context=m:d.pendingContext=m,d=oa(a),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=ca(n,d,a),c!==null&&(Rr(c,n,a),Xc(c,n,a))}function cw(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<a?c:a}}function Zp(n,a){cw(n,a),(n=n.alternate)&&cw(n,a)}function uw(n){if(n.tag===13){var a=po(n,67108864);a!==null&&Rr(a,n,67108864),Zp(n,67108864)}}var Eh=!0;function aC(n,a,c,d){var m=$.T;$.T=null;var y=Y.p;try{Y.p=2,Yp(n,a,c,d)}finally{Y.p=y,$.T=m}}function lC(n,a,c,d){var m=$.T;$.T=null;var y=Y.p;try{Y.p=8,Yp(n,a,c,d)}finally{Y.p=y,$.T=m}}function Yp(n,a,c,d){if(Eh){var m=Kp(d);if(m===null)Lp(n,a,d,Ah,c),hw(n,d);else if(cC(m,n,a,c,d))d.stopPropagation();else if(hw(n,d),a&4&&-1<oC.indexOf(n)){for(;m!==null;){var y=In(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=Gs(y.pendingLanes);if(E!==0){var M=y;for(M.pendingLanes|=2,M.entangledLanes|=2;E;){var H=1<<31-ft(E);M.entanglements[1]|=H,E&=~H}Kn(y),(Nt&6)===0&&(uh=gt()+500,pu(0))}}break;case 13:M=po(y,2),M!==null&&Rr(M,y,2),hh(),Zp(y,2)}if(y=Kp(d),y===null&&Lp(n,a,d,Ah,c),y===m)break;m=y}m!==null&&d.stopPropagation()}else Lp(n,a,d,null,c)}}function Kp(n){return n=ea(n),Wp(n)}var Ah=null;function Wp(n){if(Ah=null,n=Pn(n),n!==null){var a=o(n);if(a===null)n=null;else{var c=a.tag;if(c===13){if(n=u(a),n!==null)return n;n=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Ah=n,null}function dw(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ot()){case yt:return 2;case F:return 8;case se:case ue:return 32;case Ce:return 268435456;default:return 32}default:return 32}}var Qp=!1,_a=null,ja=null,Na=null,ju=new Map,Nu=new Map,Sa=[],oC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hw(n,a){switch(n){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":ja=null;break;case"mouseover":case"mouseout":Na=null;break;case"pointerover":case"pointerout":ju.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nu.delete(a.pointerId)}}function Su(n,a,c,d,m,y){return n===null||n.nativeEvent!==y?(n={blockedOn:a,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[m]},a!==null&&(a=In(a),a!==null&&uw(a)),n):(n.eventSystemFlags|=d,a=n.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),n)}function cC(n,a,c,d,m){switch(a){case"focusin":return _a=Su(_a,n,a,c,d,m),!0;case"dragenter":return ja=Su(ja,n,a,c,d,m),!0;case"mouseover":return Na=Su(Na,n,a,c,d,m),!0;case"pointerover":var y=m.pointerId;return ju.set(y,Su(ju.get(y)||null,n,a,c,d,m)),!0;case"gotpointercapture":return y=m.pointerId,Nu.set(y,Su(Nu.get(y)||null,n,a,c,d,m)),!0}return!1}function fw(n){var a=Pn(n.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=u(c),a!==null){n.blockedOn=a,Jl(n.priority,function(){if(c.tag===13){var d=Or();d=ui(d);var m=po(c,d);m!==null&&Rr(m,c,d),Zp(c,d)}});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ch(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var c=Kp(n.nativeEvent);if(c===null){c=n.nativeEvent;var d=new c.constructor(c.type,c);nl=d,c.target.dispatchEvent(d),nl=null}else return a=In(c),a!==null&&uw(a),n.blockedOn=c,!1;a.shift()}return!0}function mw(n,a,c){Ch(n)&&c.delete(a)}function uC(){Qp=!1,_a!==null&&Ch(_a)&&(_a=null),ja!==null&&Ch(ja)&&(ja=null),Na!==null&&Ch(Na)&&(Na=null),ju.forEach(mw),Nu.forEach(mw)}function kh(n,a){n.blockedOn===a&&(n.blockedOn=null,Qp||(Qp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,uC)))}var Th=null;function pw(n){Th!==n&&(Th=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Th===n&&(Th=null);for(var a=0;a<n.length;a+=3){var c=n[a],d=n[a+1],m=n[a+2];if(typeof d!="function"){if(Wp(d||c)===null)continue;break}var y=In(c);y!==null&&(n.splice(a,3),a-=3,Wm(y,{pending:!0,data:m,method:c.method,action:d},d,m))}}))}function Eu(n){function a(H){return kh(H,n)}_a!==null&&kh(_a,n),ja!==null&&kh(ja,n),Na!==null&&kh(Na,n),ju.forEach(a),Nu.forEach(a);for(var c=0;c<Sa.length;c++){var d=Sa[c];d.blockedOn===n&&(d.blockedOn=null)}for(;0<Sa.length&&(c=Sa[0],c.blockedOn===null);)fw(c),c.blockedOn===null&&Sa.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var m=c[d],y=c[d+1],E=m[ks]||null;if(typeof y=="function")E||pw(c);else if(E){var M=null;if(y&&y.hasAttribute("formAction")){if(m=y,E=y[ks]||null)M=E.formAction;else if(Wp(m)!==null)continue}else M=E.action;typeof M=="function"?c[d+1]=M:(c.splice(d,3),d-=3),pw(c)}}}function Xp(n){this._internalRoot=n}Oh.prototype.render=Xp.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(r(409));var c=a.current,d=Or();ow(c,d,n,a,null,null)},Oh.prototype.unmount=Xp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;ow(n.current,2,null,n,null,null),hh(),a[qn]=null}};function Oh(n){this._internalRoot=n}Oh.prototype.unstable_scheduleHydration=function(n){if(n){var a=an();n={blockedOn:null,target:n,priority:a};for(var c=0;c<Sa.length&&a!==0&&a<Sa[c].priority;c++);Sa.splice(c,0,n),c===0&&fw(n)}};var gw=e.version;if(gw!=="19.1.1")throw Error(r(527,gw,"19.1.1"));Y.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=f(a),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var dC={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{ke=Rh.inject(dC),Le=Rh}catch{}}return Cu.createRoot=function(n,a){if(!l(n))throw Error(r(299));var c=!1,d="",m=Rx,y=Mx,E=Dx,M=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks)),a=aw(n,1,!1,null,null,c,d,m,y,E,M,null),n[qn]=a.current,Dp(n),new Xp(a)},Cu.hydrateRoot=function(n,a,c){if(!l(n))throw Error(r(299));var d=!1,m="",y=Rx,E=Mx,M=Dx,H=null,ne=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(M=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(H=c.unstable_transitionCallbacks),c.formState!==void 0&&(ne=c.formState)),a=aw(n,1,!0,a,c??null,d,m,y,E,M,H,ne),a.context=lw(null),c=a.current,d=Or(),d=ui(d),m=oa(d),m.callback=null,ca(c,m,d),c=d,a.current.lanes=c,_r(a,c),Kn(a),n[qn]=a.current,Dp(n),new Oh(a)},Cu.version="19.1.1",Cu}var Ew;function jC(){if(Ew)return eg.exports;Ew=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),eg.exports=_C(),eg.exports}var NC=jC(),O=L0();const Fs=od(O);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Aw="popstate";function SC(t={}){function e(r,l){let{pathname:o,search:u,hash:h}=r.location;return Bg("",{pathname:o,search:u,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function s(r,l){return typeof l=="string"?l:Wu(l)}return AC(e,s,null,t)}function Ht(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function EC(){return Math.random().toString(36).substring(2,10)}function Cw(t,e){return{usr:t.state,key:t.key,idx:e}}function Bg(t,e,s=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?bc(e):e,state:s,key:e&&e.key||r||EC()}}function Wu({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function bc(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function AC(t,e,s,r={}){let{window:l=document.defaultView,v5Compat:o=!1}=r,u=l.history,h="POP",f=null,p=g();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function g(){return(u.state||{idx:null}).idx}function b(){h="POP";let N=g(),T=N==null?null:N-p;p=N,f&&f({action:h,location:j.location,delta:T})}function v(N,T){h="PUSH";let S=Bg(j.location,N,T);p=g()+1;let k=Cw(S,p),Z=j.createHref(S);try{u.pushState(k,"",Z)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;l.location.assign(Z)}o&&f&&f({action:h,location:j.location,delta:1})}function w(N,T){h="REPLACE";let S=Bg(j.location,N,T);p=g();let k=Cw(S,p),Z=j.createHref(S);u.replaceState(k,"",Z),o&&f&&f({action:h,location:j.location,delta:0})}function x(N){return CC(N)}let j={get action(){return h},get location(){return t(l,u)},listen(N){if(f)throw new Error("A history only accepts one active listener");return l.addEventListener(Aw,b),f=N,()=>{l.removeEventListener(Aw,b),f=null}},createHref(N){return e(l,N)},createURL:x,encodeLocation(N){let T=x(N);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:v,replace:w,go(N){return u.go(N)}};return j}function CC(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Ht(s,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Wu(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=s+r),new URL(r,s)}function Tj(t,e,s="/"){return kC(t,e,s,!1)}function kC(t,e,s,r){let l=typeof e=="string"?bc(e):e,o=zi(l.pathname||"/",s);if(o==null)return null;let u=Oj(t);TC(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let p=zC(o);h=$C(u[f],p,r)}return h}function Oj(t,e=[],s=[],r=""){let l=(o,u,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};f.relativePath.startsWith("/")&&(Ht(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let p=$i([r,f.relativePath]),g=s.concat(f);o.children&&o.children.length>0&&(Ht(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Oj(o.children,e,g,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:PC(p,o.index),routesMeta:g})};return t.forEach((o,u)=>{if(o.path===""||!o.path?.includes("?"))l(o,u);else for(let h of Rj(o.path))l(o,u,h)}),e}function Rj(t){let e=t.split("/");if(e.length===0)return[];let[s,...r]=e,l=s.endsWith("?"),o=s.replace(/\?$/,"");if(r.length===0)return l?[o,""]:[o];let u=Rj(r.join("/")),h=[];return h.push(...u.map(f=>f===""?o:[o,f].join("/"))),l&&h.push(...u),h.map(f=>t.startsWith("/")&&f===""?"/":f)}function TC(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:IC(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}var OC=/^:[\w-]+$/,RC=3,MC=2,DC=1,LC=10,qC=-2,kw=t=>t==="*";function PC(t,e){let s=t.split("/"),r=s.length;return s.some(kw)&&(r+=qC),e&&(r+=MC),s.filter(l=>!kw(l)).reduce((l,o)=>l+(OC.test(o)?RC:o===""?DC:LC),r)}function IC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,l)=>r===e[l])?t[t.length-1]-e[e.length-1]:0}function $C(t,e,s=!1){let{routesMeta:r}=t,l={},o="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],p=h===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",b=ff({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},g),v=f.route;if(!b&&p&&s&&!r[r.length-1].route.index&&(b=ff({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!b)return null;Object.assign(l,b.params),u.push({params:l,pathname:$i([o,b.pathname]),pathnameBase:VC($i([o,b.pathnameBase])),route:v}),b.pathnameBase!=="/"&&(o=$i([o,b.pathnameBase]))}return u}function ff(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=UC(t.path,t.caseSensitive,t.end),l=e.match(s);if(!l)return null;let o=l[0],u=o.replace(/(.)\/+$/,"$1"),h=l.slice(1);return{params:r.reduce((p,{paramName:g,isOptional:b},v)=>{if(g==="*"){let x=h[v]||"";u=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const w=h[v];return b&&!w?p[g]=void 0:p[g]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:t}}function UC(t,e=!1,s=!0){Cn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),r]}function zC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function zi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function BC(t,e="/"){let{pathname:s,search:r="",hash:l=""}=typeof t=="string"?bc(t):t;return{pathname:s?s.startsWith("/")?s:FC(s,e):e,search:GC(r),hash:ZC(l)}}function FC(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?s.length>1&&s.pop():l!=="."&&s.push(l)}),s.length>1?s.join("/"):"/"}function ig(t,e,s,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function HC(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function q0(t){let e=HC(t);return e.map((s,r)=>r===e.length-1?s.pathname:s.pathnameBase)}function P0(t,e,s,r=!1){let l;typeof t=="string"?l=bc(t):(l={...t},Ht(!l.pathname||!l.pathname.includes("?"),ig("?","pathname","search",l)),Ht(!l.pathname||!l.pathname.includes("#"),ig("#","pathname","hash",l)),Ht(!l.search||!l.search.includes("#"),ig("#","search","hash",l)));let o=t===""||l.pathname==="",u=o?"/":l.pathname,h;if(u==null)h=s;else{let b=e.length-1;if(!r&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),b-=1;l.pathname=v.join("/")}h=b>=0?e[b]:"/"}let f=BC(l,h),p=u&&u!=="/"&&u.endsWith("/"),g=(o||u===".")&&s.endsWith("/");return!f.pathname.endsWith("/")&&(p||g)&&(f.pathname+="/"),f}var $i=t=>t.join("/").replace(/\/\/+/g,"/"),VC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ZC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function YC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Mj=["POST","PUT","PATCH","DELETE"];new Set(Mj);var KC=["GET",...Mj];new Set(KC);var xc=O.createContext(null);xc.displayName="DataRouter";var If=O.createContext(null);If.displayName="DataRouterState";O.createContext(!1);var Dj=O.createContext({isTransitioning:!1});Dj.displayName="ViewTransition";var WC=O.createContext(new Map);WC.displayName="Fetchers";var QC=O.createContext(null);QC.displayName="Await";var Tn=O.createContext(null);Tn.displayName="Navigation";var cd=O.createContext(null);cd.displayName="Location";var On=O.createContext({outlet:null,matches:[],isDataRoute:!1});On.displayName="Route";var I0=O.createContext(null);I0.displayName="RouteError";function XC(t,{relative:e}={}){Ht(vc(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=O.useContext(Tn),{hash:l,pathname:o,search:u}=ud(t,{relative:e}),h=o;return s!=="/"&&(h=o==="/"?s:$i([s,o])),r.createHref({pathname:h,search:u,hash:l})}function vc(){return O.useContext(cd)!=null}function Ga(){return Ht(vc(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(cd).location}var Lj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qj(t){O.useContext(Tn).static||O.useLayoutEffect(t)}function or(){let{isDataRoute:t}=O.useContext(On);return t?hk():JC()}function JC(){Ht(vc(),"useNavigate() may be used only in the context of a <Router> component.");let t=O.useContext(xc),{basename:e,navigator:s}=O.useContext(Tn),{matches:r}=O.useContext(On),{pathname:l}=Ga(),o=JSON.stringify(q0(r)),u=O.useRef(!1);return qj(()=>{u.current=!0}),O.useCallback((f,p={})=>{if(Cn(u.current,Lj),!u.current)return;if(typeof f=="number"){s.go(f);return}let g=P0(f,JSON.parse(o),l,p.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:$i([e,g.pathname])),(p.replace?s.replace:s.push)(g,p.state,p)},[e,s,o,l,t])}O.createContext(null);function ek(){let{matches:t}=O.useContext(On),e=t[t.length-1];return e?e.params:{}}function ud(t,{relative:e}={}){let{matches:s}=O.useContext(On),{pathname:r}=Ga(),l=JSON.stringify(q0(s));return O.useMemo(()=>P0(t,JSON.parse(l),r,e==="path"),[t,l,r,e])}function tk(t,e){return Pj(t,e)}function Pj(t,e,s,r){Ht(vc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=O.useContext(Tn),{matches:o}=O.useContext(On),u=o[o.length-1],h=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",g=u&&u.route;{let T=g&&g.path||"";Ij(f,!g||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let b=Ga(),v;if(e){let T=typeof e=="string"?bc(e):e;Ht(p==="/"||T.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${T.pathname}" was given in the \`location\` prop.`),v=T}else v=b;let w=v.pathname||"/",x=w;if(p!=="/"){let T=p.replace(/^\//,"").split("/");x="/"+w.replace(/^\//,"").split("/").slice(T.length).join("/")}let j=Tj(t,{pathname:x});Cn(g||j!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Cn(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=ak(j&&j.map(T=>Object.assign({},T,{params:Object.assign({},h,T.params),pathname:$i([p,l.encodeLocation?l.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?p:$i([p,l.encodeLocation?l.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,s,r);return e&&N?O.createElement(cd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},N):N}function sk(){let t=dk(),e=YC(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:o},"ErrorBoundary")," or"," ",O.createElement("code",{style:o},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),s?O.createElement("pre",{style:l},s):null,u)}var rk=O.createElement(sk,null),nk=class extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?O.createElement(On.Provider,{value:this.props.routeContext},O.createElement(I0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ik({routeContext:t,match:e,children:s}){let r=O.useContext(xc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(On.Provider,{value:t},s)}function ak(t,e=[],s=null,r=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let l=t,o=s?.errors;if(o!=null){let f=l.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);Ht(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),l=l.slice(0,Math.min(l.length,f+1))}let u=!1,h=-1;if(s)for(let f=0;f<l.length;f++){let p=l[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:g,errors:b}=s,v=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!b||b[p.route.id]===void 0);if(p.route.lazy||v){u=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((f,p,g)=>{let b,v=!1,w=null,x=null;s&&(b=o&&p.route.id?o[p.route.id]:void 0,w=p.route.errorElement||rk,u&&(h<0&&g===0?(Ij("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,x=null):h===g&&(v=!0,x=p.route.hydrateFallbackElement||null)));let j=e.concat(l.slice(0,g+1)),N=()=>{let T;return b?T=w:v?T=x:p.route.Component?T=O.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=f,O.createElement(ik,{match:p,routeContext:{outlet:f,matches:j,isDataRoute:s!=null},children:T})};return s&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?O.createElement(nk,{location:s.location,revalidation:s.revalidation,component:w,error:b,children:N(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):N()},null)}function $0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lk(t){let e=O.useContext(xc);return Ht(e,$0(t)),e}function ok(t){let e=O.useContext(If);return Ht(e,$0(t)),e}function ck(t){let e=O.useContext(On);return Ht(e,$0(t)),e}function U0(t){let e=ck(t),s=e.matches[e.matches.length-1];return Ht(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function uk(){return U0("useRouteId")}function dk(){let t=O.useContext(I0),e=ok("useRouteError"),s=U0("useRouteError");return t!==void 0?t:e.errors?.[s]}function hk(){let{router:t}=lk("useNavigate"),e=U0("useNavigate"),s=O.useRef(!1);return qj(()=>{s.current=!0}),O.useCallback(async(l,o={})=>{Cn(s.current,Lj),s.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:e,...o}))},[t,e])}var Tw={};function Ij(t,e,s){!e&&!Tw[t]&&(Tw[t]=!0,Cn(!1,s))}O.memo(fk);function fk({routes:t,future:e,state:s}){return Pj(t,void 0,s,e)}function Qu({to:t,replace:e,state:s,relative:r}){Ht(vc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=O.useContext(Tn);Cn(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=O.useContext(On),{pathname:u}=Ga(),h=or(),f=P0(t,q0(o),u,r==="path"),p=JSON.stringify(f);return O.useEffect(()=>{h(JSON.parse(p),{replace:e,state:s,relative:r})},[h,p,r,e,s]),null}function xt(t){Ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mk({basename:t="/",children:e=null,location:s,navigationType:r="POP",navigator:l,static:o=!1}){Ht(!vc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),h=O.useMemo(()=>({basename:u,navigator:l,static:o,future:{}}),[u,l,o]);typeof s=="string"&&(s=bc(s));let{pathname:f="/",search:p="",hash:g="",state:b=null,key:v="default"}=s,w=O.useMemo(()=>{let x=zi(f,u);return x==null?null:{location:{pathname:x,search:p,hash:g,state:b,key:v},navigationType:r}},[u,f,p,g,b,v,r]);return Cn(w!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:O.createElement(Tn.Provider,{value:h},O.createElement(cd.Provider,{children:e,value:w}))}function pk({children:t,location:e}){return tk(Fg(t),e)}function Fg(t,e=[]){let s=[];return O.Children.forEach(t,(r,l)=>{if(!O.isValidElement(r))return;let o=[...e,l];if(r.type===O.Fragment){s.push.apply(s,Fg(r.props.children,o));return}Ht(r.type===xt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ht(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Fg(r.props.children,o)),s.push(u)}),s}var nf="get",af="application/x-www-form-urlencoded";function $f(t){return t!=null&&typeof t.tagName=="string"}function gk(t){return $f(t)&&t.tagName.toLowerCase()==="button"}function yk(t){return $f(t)&&t.tagName.toLowerCase()==="form"}function bk(t){return $f(t)&&t.tagName.toLowerCase()==="input"}function xk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function vk(t,e){return t.button===0&&(!e||e==="_self")&&!xk(t)}var Mh=null;function wk(){if(Mh===null)try{new FormData(document.createElement("form"),0),Mh=!1}catch{Mh=!0}return Mh}var _k=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ag(t){return t!=null&&!_k.has(t)?(Cn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${af}"`),null):t}function jk(t,e){let s,r,l,o,u;if(yk(t)){let h=t.getAttribute("action");r=h?zi(h,e):null,s=t.getAttribute("method")||nf,l=ag(t.getAttribute("enctype"))||af,o=new FormData(t)}else if(gk(t)||bk(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||h.getAttribute("action");if(r=f?zi(f,e):null,s=t.getAttribute("formmethod")||h.getAttribute("method")||nf,l=ag(t.getAttribute("formenctype"))||ag(h.getAttribute("enctype"))||af,o=new FormData(h,t),!wk()){let{name:p,type:g,value:b}=t;if(g==="image"){let v=p?`${p}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else p&&o.append(p,b)}}else{if($f(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=nf,r=null,l=af,u=t}return o&&l==="text/plain"&&(u=o,o=void 0),{action:r,method:s.toLowerCase(),encType:l,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function z0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Nk(t,e,s){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${s}`:e&&zi(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function Sk(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ek(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Ak(t,e,s){let r=await Promise.all(t.map(async l=>{let o=e.routes[l.route.id];if(o){let u=await Sk(o,s);return u.links?u.links():[]}return[]}));return Ok(r.flat(1).filter(Ek).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Ow(t,e,s,r,l,o){let u=(f,p)=>s[p]?f.route.id!==s[p].route.id:!0,h=(f,p)=>s[p].pathname!==f.pathname||s[p].route.path?.endsWith("*")&&s[p].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,p)=>u(f,p)||h(f,p)):o==="data"?e.filter((f,p)=>{let g=r.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(u(f,p)||h(f,p))return!0;if(f.route.shouldRevalidate){let b=f.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Ck(t,e,{includeHydrateFallback:s}={}){return kk(t.map(r=>{let l=e.routes[r.route.id];if(!l)return[];let o=[l.module];return l.clientActionModule&&(o=o.concat(l.clientActionModule)),l.clientLoaderModule&&(o=o.concat(l.clientLoaderModule)),s&&l.hydrateFallbackModule&&(o=o.concat(l.hydrateFallbackModule)),l.imports&&(o=o.concat(l.imports)),o}).flat(1))}function kk(t){return[...new Set(t)]}function Tk(t){let e={},s=Object.keys(t).sort();for(let r of s)e[r]=t[r];return e}function Ok(t,e){let s=new Set;return new Set(e),t.reduce((r,l)=>{let o=JSON.stringify(Tk(l));return s.has(o)||(s.add(o),r.push({key:o,link:l})),r},[])}function $j(){let t=O.useContext(xc);return z0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Rk(){let t=O.useContext(If);return z0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var B0=O.createContext(void 0);B0.displayName="FrameworkContext";function Uj(){let t=O.useContext(B0);return z0(t,"You must render this element inside a <HydratedRouter> element"),t}function Mk(t,e){let s=O.useContext(B0),[r,l]=O.useState(!1),[o,u]=O.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:p,onMouseLeave:g,onTouchStart:b}=e,v=O.useRef(null);O.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let j=T=>{T.forEach(S=>{u(S.isIntersecting)})},N=new IntersectionObserver(j,{threshold:.5});return v.current&&N.observe(v.current),()=>{N.disconnect()}}},[t]),O.useEffect(()=>{if(r){let j=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(j)}}},[r]);let w=()=>{l(!0)},x=()=>{l(!1),u(!1)};return s?t!=="intent"?[o,v,{}]:[o,v,{onFocus:ku(h,w),onBlur:ku(f,x),onMouseEnter:ku(p,w),onMouseLeave:ku(g,x),onTouchStart:ku(b,w)}]:[!1,v,{}]}function ku(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function Dk({page:t,...e}){let{router:s}=$j(),r=O.useMemo(()=>Tj(s.routes,t,s.basename),[s.routes,t,s.basename]);return r?O.createElement(qk,{page:t,matches:r,...e}):null}function Lk(t){let{manifest:e,routeModules:s}=Uj(),[r,l]=O.useState([]);return O.useEffect(()=>{let o=!1;return Ak(t,e,s).then(u=>{o||l(u)}),()=>{o=!0}},[t,e,s]),r}function qk({page:t,matches:e,...s}){let r=Ga(),{manifest:l,routeModules:o}=Uj(),{basename:u}=$j(),{loaderData:h,matches:f}=Rk(),p=O.useMemo(()=>Ow(t,e,f,l,r,"data"),[t,e,f,l,r]),g=O.useMemo(()=>Ow(t,e,f,l,r,"assets"),[t,e,f,l,r]),b=O.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,j=!1;if(e.forEach(T=>{let S=l.routes[T.route.id];!S||!S.hasLoader||(!p.some(k=>k.route.id===T.route.id)&&T.route.id in h&&o[T.route.id]?.shouldRevalidate||S.hasClientLoader?j=!0:x.add(T.route.id))}),x.size===0)return[];let N=Nk(t,u,"data");return j&&x.size>0&&N.searchParams.set("_routes",e.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[N.pathname+N.search]},[u,h,r,l,p,e,t,o]),v=O.useMemo(()=>Ck(g,l),[g,l]),w=Lk(g);return O.createElement(O.Fragment,null,b.map(x=>O.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...s})),v.map(x=>O.createElement("link",{key:x,rel:"modulepreload",href:x,...s})),w.map(({key:x,link:j})=>O.createElement("link",{key:x,...j})))}function Pk(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var zj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zj&&(window.__reactRouterVersion="7.7.1")}catch{}function Ik({basename:t,children:e,window:s}){let r=O.useRef();r.current==null&&(r.current=SC({window:s,v5Compat:!0}));let l=r.current,[o,u]=O.useState({action:l.action,location:l.location}),h=O.useCallback(f=>{O.startTransition(()=>u(f))},[u]);return O.useLayoutEffect(()=>l.listen(h),[l,h]),O.createElement(mk,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:l})}var Bj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fj=O.forwardRef(function({onClick:e,discover:s="render",prefetch:r="none",relative:l,reloadDocument:o,replace:u,state:h,target:f,to:p,preventScrollReset:g,viewTransition:b,...v},w){let{basename:x}=O.useContext(Tn),j=typeof p=="string"&&Bj.test(p),N,T=!1;if(typeof p=="string"&&j&&(N=p,zj))try{let C=new URL(window.location.href),z=p.startsWith("//")?new URL(C.protocol+p):new URL(p),L=zi(z.pathname,x);z.origin===C.origin&&L!=null?p=L+z.search+z.hash:T=!0}catch{Cn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=XC(p,{relative:l}),[k,Z,R]=Mk(r,v),U=Bk(p,{replace:u,state:h,target:f,preventScrollReset:g,relative:l,viewTransition:b});function B(C){e&&e(C),C.defaultPrevented||U(C)}let A=O.createElement("a",{...v,...R,href:N||S,onClick:T||o?e:B,ref:Pk(w,Z),target:f,"data-discover":!j&&s==="render"?"true":void 0});return k&&!j?O.createElement(O.Fragment,null,A,O.createElement(Dk,{page:S})):A});Fj.displayName="Link";var $k=O.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:r="",end:l=!1,style:o,to:u,viewTransition:h,children:f,...p},g){let b=ud(u,{relative:p.relative}),v=Ga(),w=O.useContext(If),{navigator:x,basename:j}=O.useContext(Tn),N=w!=null&&Zk(b)&&h===!0,T=x.encodeLocation?x.encodeLocation(b).pathname:b.pathname,S=v.pathname,k=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(S=S.toLowerCase(),k=k?k.toLowerCase():null,T=T.toLowerCase()),k&&j&&(k=zi(k,j)||k);const Z=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let R=S===T||!l&&S.startsWith(T)&&S.charAt(Z)==="/",U=k!=null&&(k===T||!l&&k.startsWith(T)&&k.charAt(T.length)==="/"),B={isActive:R,isPending:U,isTransitioning:N},A=R?e:void 0,C;typeof r=="function"?C=r(B):C=[r,R?"active":null,U?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let z=typeof o=="function"?o(B):o;return O.createElement(Fj,{...p,"aria-current":A,className:C,ref:g,style:z,to:u,viewTransition:h},typeof f=="function"?f(B):f)});$k.displayName="NavLink";var Uk=O.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:r,replace:l,state:o,method:u=nf,action:h,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:b,...v},w)=>{let x=Vk(),j=Gk(h,{relative:p}),N=u.toLowerCase()==="get"?"get":"post",T=typeof h=="string"&&Bj.test(h),S=k=>{if(f&&f(k),k.defaultPrevented)return;k.preventDefault();let Z=k.nativeEvent.submitter,R=Z?.getAttribute("formmethod")||u;x(Z||k.currentTarget,{fetcherKey:e,method:R,navigate:s,replace:l,state:o,relative:p,preventScrollReset:g,viewTransition:b})};return O.createElement("form",{ref:w,method:N,action:j,onSubmit:r?f:S,...v,"data-discover":!T&&t==="render"?"true":void 0})});Uk.displayName="Form";function zk(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Hj(t){let e=O.useContext(xc);return Ht(e,zk(t)),e}function Bk(t,{target:e,replace:s,state:r,preventScrollReset:l,relative:o,viewTransition:u}={}){let h=or(),f=Ga(),p=ud(t,{relative:o});return O.useCallback(g=>{if(vk(g,e)){g.preventDefault();let b=s!==void 0?s:Wu(f)===Wu(p);h(t,{replace:b,state:r,preventScrollReset:l,relative:o,viewTransition:u})}},[f,h,p,s,r,e,t,l,o,u])}var Fk=0,Hk=()=>`__${String(++Fk)}__`;function Vk(){let{router:t}=Hj("useSubmit"),{basename:e}=O.useContext(Tn),s=uk();return O.useCallback(async(r,l={})=>{let{action:o,method:u,encType:h,formData:f,body:p}=jk(r,e);if(l.navigate===!1){let g=l.fetcherKey||Hk();await t.fetch(g,s,l.action||o,{preventScrollReset:l.preventScrollReset,formData:f,body:p,formMethod:l.method||u,formEncType:l.encType||h,flushSync:l.flushSync})}else await t.navigate(l.action||o,{preventScrollReset:l.preventScrollReset,formData:f,body:p,formMethod:l.method||u,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:s,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,e,s])}function Gk(t,{relative:e}={}){let{basename:s}=O.useContext(Tn),r=O.useContext(On);Ht(r,"useFormAction must be used inside a RouteContext");let[l]=r.matches.slice(-1),o={...ud(t||".",{relative:e})},u=Ga();if(t==null){o.search=u.search;let h=new URLSearchParams(o.search),f=h.getAll("index");if(f.some(g=>g==="")){h.delete("index"),f.filter(b=>b).forEach(b=>h.append("index",b));let g=h.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&l.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(o.pathname=o.pathname==="/"?s:$i([s,o.pathname])),Wu(o)}function Zk(t,{relative:e}={}){let s=O.useContext(Dj);Ht(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Hj("useViewTransitionState"),l=ud(t,{relative:e});if(!s.isTransitioning)return!1;let o=zi(s.currentLocation.pathname,r)||s.currentLocation.pathname,u=zi(s.nextLocation.pathname,r)||s.nextLocation.pathname;return ff(l.pathname,u)!=null||ff(l.pathname,o)!=null}const F0=({children:t})=>i.jsxs("div",{className:"min-h-screen bg-white flex",children:[i.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsx("div",{className:"text-center mb-8",children:i.jsx("img",{src:"/logo-500.png",alt:"English Australia",className:"mx-auto h-16 w-auto mb-4"})}),t]})}),i.jsxs("div",{className:"hidden lg:flex w-1/2 bg-[#1E3A8A] relative flex-col",children:[i.jsx("div",{className:"flex-1"}),i.jsx("div",{className:"h-2 bg-gradient-to-r from-red-500 via-yellow-500 via-green-500 via-blue-500 to-purple-500"})]})]}),Yk="modulepreload",Kk=function(t){return"/"+t},Rw={},wc=function(e,s,r){let l=Promise.resolve();if(s&&s.length>0){let p=function(g){return Promise.all(g.map(b=>Promise.resolve(b).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var u=p;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=h?.nonce||h?.getAttribute("nonce");l=p(s.map(g=>{if(g=Kk(g),g in Rw)return;Rw[g]=!0;const b=g.endsWith(".css"),v=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const w=document.createElement("link");if(w.rel=b?"stylesheet":Yk,b||(w.as="script"),w.crossOrigin="",w.href=g,f&&w.setAttribute("nonce",f),document.head.appendChild(w),b)return new Promise((x,j)=>{w.addEventListener("load",x),w.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return l.then(h=>{for(const f of h||[])f.status==="rejected"&&o(f.reason);return e().catch(o)})};var dd=t=>t.type==="checkbox",Tl=t=>t instanceof Date,rr=t=>t==null;const Vj=t=>typeof t=="object";var us=t=>!rr(t)&&!Array.isArray(t)&&Vj(t)&&!Tl(t),Wk=t=>us(t)&&t.target?dd(t.target)?t.target.checked:t.target.value:t,Qk=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Xk=(t,e)=>t.has(Qk(e)),Jk=t=>{const e=t.constructor&&t.constructor.prototype;return us(e)&&e.hasOwnProperty("isPrototypeOf")},H0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function qs(t){let e;const s=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(H0&&(t instanceof Blob||r))&&(s||us(t)))if(e=s?[]:Object.create(Object.getPrototypeOf(t)),!s&&!Jk(t))e=t;else for(const l in t)t.hasOwnProperty(l)&&(e[l]=qs(t[l]));else return t;return e}var Uf=t=>/^\w*$/.test(t),ys=t=>t===void 0,V0=t=>Array.isArray(t)?t.filter(Boolean):[],G0=t=>V0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),$e=(t,e,s)=>{if(!e||!us(t))return s;const r=(Uf(e)?[e]:G0(e)).reduce((l,o)=>rr(l)?l:l[o],t);return ys(r)||r===t?ys(t[e])?s:t[e]:r},Wn=t=>typeof t=="boolean",Ot=(t,e,s)=>{let r=-1;const l=Uf(e)?[e]:G0(e),o=l.length,u=o-1;for(;++r<o;){const h=l[r];let f=s;if(r!==u){const p=t[h];f=us(p)||Array.isArray(p)?p:isNaN(+l[r+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;t[h]=f,t=t[h]}};const Mw={BLUR:"blur",FOCUS_OUT:"focusout"},wn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Oi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},eT=Fs.createContext(null);eT.displayName="HookFormContext";var tT=(t,e,s,r=!0)=>{const l={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(l,o,{get:()=>{const u=o;return e._proxyFormState[u]!==wn.all&&(e._proxyFormState[u]=!r||wn.all),t[u]}});return l};const sT=typeof window<"u"?Fs.useLayoutEffect:Fs.useEffect;var ei=t=>typeof t=="string",rT=(t,e,s,r,l)=>ei(t)?(r&&e.watch.add(t),$e(s,t,l)):Array.isArray(t)?t.map(o=>(r&&e.watch.add(o),$e(s,o))):(r&&(e.watchAll=!0),s),Hg=t=>rr(t)||!Vj(t);function Da(t,e,s=new WeakSet){if(Hg(t)||Hg(e))return t===e;if(Tl(t)&&Tl(e))return t.getTime()===e.getTime();const r=Object.keys(t),l=Object.keys(e);if(r.length!==l.length)return!1;if(s.has(t)||s.has(e))return!0;s.add(t),s.add(e);for(const o of r){const u=t[o];if(!l.includes(o))return!1;if(o!=="ref"){const h=e[o];if(Tl(u)&&Tl(h)||us(u)&&us(h)||Array.isArray(u)&&Array.isArray(h)?!Da(u,h,s):u!==h)return!1}}return!0}var Z0=(t,e,s,r,l)=>e?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[r]:l||!0}}:{},Fu=t=>Array.isArray(t)?t:[t],Dw=()=>{let t=[];return{get observers(){return t},next:l=>{for(const o of t)o.next&&o.next(l)},subscribe:l=>(t.push(l),{unsubscribe:()=>{t=t.filter(o=>o!==l)}}),unsubscribe:()=>{t=[]}}},xr=t=>us(t)&&!Object.keys(t).length,Y0=t=>t.type==="file",_n=t=>typeof t=="function",mf=t=>{if(!H0)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Gj=t=>t.type==="select-multiple",K0=t=>t.type==="radio",nT=t=>K0(t)||dd(t),lg=t=>mf(t)&&t.isConnected;function iT(t,e){const s=e.slice(0,-1).length;let r=0;for(;r<s;)t=ys(t)?r++:t[e[r++]];return t}function aT(t){for(const e in t)if(t.hasOwnProperty(e)&&!ys(t[e]))return!1;return!0}function gs(t,e){const s=Array.isArray(e)?e:Uf(e)?[e]:G0(e),r=s.length===1?t:iT(t,s),l=s.length-1,o=s[l];return r&&delete r[o],l!==0&&(us(r)&&xr(r)||Array.isArray(r)&&aT(r))&&gs(t,s.slice(0,-1)),t}var Zj=t=>{for(const e in t)if(_n(t[e]))return!0;return!1};function pf(t,e={}){const s=Array.isArray(t);if(us(t)||s)for(const r in t)Array.isArray(t[r])||us(t[r])&&!Zj(t[r])?(e[r]=Array.isArray(t[r])?[]:{},pf(t[r],e[r])):rr(t[r])||(e[r]=!0);return e}function Yj(t,e,s){const r=Array.isArray(t);if(us(t)||r)for(const l in t)Array.isArray(t[l])||us(t[l])&&!Zj(t[l])?ys(e)||Hg(s[l])?s[l]=Array.isArray(t[l])?pf(t[l],[]):{...pf(t[l])}:Yj(t[l],rr(e)?{}:e[l],s[l]):s[l]=!Da(t[l],e[l]);return s}var Tu=(t,e)=>Yj(t,e,pf(e));const Lw={value:!1,isValid:!1},qw={value:!0,isValid:!0};var Kj=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ys(t[0].attributes.value)?ys(t[0].value)||t[0].value===""?qw:{value:t[0].value,isValid:!0}:qw:Lw}return Lw},Wj=(t,{valueAsNumber:e,valueAsDate:s,setValueAs:r})=>ys(t)?t:e?t===""?NaN:t&&+t:s&&ei(t)?new Date(t):r?r(t):t;const Pw={isValid:!1,value:null};var Qj=t=>Array.isArray(t)?t.reduce((e,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:e,Pw):Pw;function Iw(t){const e=t.ref;return Y0(e)?e.files:K0(e)?Qj(t.refs).value:Gj(e)?[...e.selectedOptions].map(({value:s})=>s):dd(e)?Kj(t.refs).value:Wj(ys(e.value)?t.ref.value:e.value,t)}var lT=(t,e,s,r)=>{const l={};for(const o of t){const u=$e(e,o);u&&Ot(l,o,u._f)}return{criteriaMode:s,names:[...t],fields:l,shouldUseNativeValidation:r}},gf=t=>t instanceof RegExp,Ou=t=>ys(t)?t:gf(t)?t.source:us(t)?gf(t.value)?t.value.source:t.value:t,$w=t=>({isOnSubmit:!t||t===wn.onSubmit,isOnBlur:t===wn.onBlur,isOnChange:t===wn.onChange,isOnAll:t===wn.all,isOnTouch:t===wn.onTouched});const Uw="AsyncFunction";var oT=t=>!!t&&!!t.validate&&!!(_n(t.validate)&&t.validate.constructor.name===Uw||us(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Uw)),cT=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),zw=(t,e,s)=>!s&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Hu=(t,e,s,r)=>{for(const l of s||Object.keys(t)){const o=$e(t,l);if(o){const{_f:u,...h}=o;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],l)&&!r)return!0;if(u.ref&&e(u.ref,u.name)&&!r)return!0;if(Hu(h,e))break}else if(us(h)&&Hu(h,e))break}}};function Bw(t,e,s){const r=$e(t,s);if(r||Uf(s))return{error:r,name:s};const l=s.split(".");for(;l.length;){const o=l.join("."),u=$e(e,o),h=$e(t,o);if(u&&!Array.isArray(u)&&s!==o)return{name:s};if(h&&h.type)return{name:o,error:h};if(h&&h.root&&h.root.type)return{name:`${o}.root`,error:h.root};l.pop()}return{name:s}}var uT=(t,e,s,r)=>{s(t);const{name:l,...o}=t;return xr(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(u=>e[u]===(!r||wn.all))},dT=(t,e,s)=>!t||!e||t===e||Fu(t).some(r=>r&&(s?r===e:r.startsWith(e)||e.startsWith(r))),hT=(t,e,s,r,l)=>l.isOnAll?!1:!s&&l.isOnTouch?!(e||t):(s?r.isOnBlur:l.isOnBlur)?!t:(s?r.isOnChange:l.isOnChange)?t:!0,fT=(t,e)=>!V0($e(t,e)).length&&gs(t,e),mT=(t,e,s)=>{const r=Fu($e(t,s));return Ot(r,"root",e[s]),Ot(t,s,r),t},lf=t=>ei(t);function Fw(t,e,s="validate"){if(lf(t)||Array.isArray(t)&&t.every(lf)||Wn(t)&&!t)return{type:s,message:lf(t)?t:"",ref:e}}var Uo=t=>us(t)&&!gf(t)?t:{value:t,message:""},Hw=async(t,e,s,r,l,o)=>{const{ref:u,refs:h,required:f,maxLength:p,minLength:g,min:b,max:v,pattern:w,validate:x,name:j,valueAsNumber:N,mount:T}=t._f,S=$e(s,j);if(!T||e.has(j))return{};const k=h?h[0]:u,Z=q=>{l&&k.reportValidity&&(k.setCustomValidity(Wn(q)?"":q||""),k.reportValidity())},R={},U=K0(u),B=dd(u),A=U||B,C=(N||Y0(u))&&ys(u.value)&&ys(S)||mf(u)&&u.value===""||S===""||Array.isArray(S)&&!S.length,z=Z0.bind(null,j,r,R),L=(q,P,V,te=Oi.maxLength,$=Oi.minLength)=>{const Y=q?P:V;R[j]={type:q?te:$,message:Y,ref:u,...z(q?te:$,Y)}};if(o?!Array.isArray(S)||!S.length:f&&(!A&&(C||rr(S))||Wn(S)&&!S||B&&!Kj(h).isValid||U&&!Qj(h).isValid)){const{value:q,message:P}=lf(f)?{value:!!f,message:f}:Uo(f);if(q&&(R[j]={type:Oi.required,message:P,ref:k,...z(Oi.required,P)},!r))return Z(P),R}if(!C&&(!rr(b)||!rr(v))){let q,P;const V=Uo(v),te=Uo(b);if(!rr(S)&&!isNaN(S)){const $=u.valueAsNumber||S&&+S;rr(V.value)||(q=$>V.value),rr(te.value)||(P=$<te.value)}else{const $=u.valueAsDate||new Date(S),Y=I=>new Date(new Date().toDateString()+" "+I),W=u.type=="time",oe=u.type=="week";ei(V.value)&&S&&(q=W?Y(S)>Y(V.value):oe?S>V.value:$>new Date(V.value)),ei(te.value)&&S&&(P=W?Y(S)<Y(te.value):oe?S<te.value:$<new Date(te.value))}if((q||P)&&(L(!!q,V.message,te.message,Oi.max,Oi.min),!r))return Z(R[j].message),R}if((p||g)&&!C&&(ei(S)||o&&Array.isArray(S))){const q=Uo(p),P=Uo(g),V=!rr(q.value)&&S.length>+q.value,te=!rr(P.value)&&S.length<+P.value;if((V||te)&&(L(V,q.message,P.message),!r))return Z(R[j].message),R}if(w&&!C&&ei(S)){const{value:q,message:P}=Uo(w);if(gf(q)&&!S.match(q)&&(R[j]={type:Oi.pattern,message:P,ref:u,...z(Oi.pattern,P)},!r))return Z(P),R}if(x){if(_n(x)){const q=await x(S,s),P=Fw(q,k);if(P&&(R[j]={...P,...z(Oi.validate,P.message)},!r))return Z(P.message),R}else if(us(x)){let q={};for(const P in x){if(!xr(q)&&!r)break;const V=Fw(await x[P](S,s),k,P);V&&(q={...V,...z(P,V.message)},Z(V.message),r&&(R[j]=q))}if(!xr(q)&&(R[j]={ref:k,...q},!r))return R}}return Z(!0),R};const pT={mode:wn.onSubmit,reValidateMode:wn.onChange,shouldFocusError:!0};function gT(t={}){let e={...pT,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:_n(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},l=us(e.defaultValues)||us(e.values)?qs(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:qs(l),u={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,p=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...g};const v={array:Dw(),state:Dw()},w=e.criteriaMode===wn.all,x=F=>se=>{clearTimeout(p),p=setTimeout(F,se)},j=async F=>{if(!e.disabled&&(g.isValid||b.isValid||F)){const se=e.resolver?xr((await B()).errors):await C(r,!0);se!==s.isValid&&v.state.next({isValid:se})}},N=(F,se)=>{!e.disabled&&(g.isValidating||g.validatingFields||b.isValidating||b.validatingFields)&&((F||Array.from(h.mount)).forEach(ue=>{ue&&(se?Ot(s.validatingFields,ue,se):gs(s.validatingFields,ue))}),v.state.next({validatingFields:s.validatingFields,isValidating:!xr(s.validatingFields)}))},T=(F,se=[],ue,Ce,Ne=!0,Se=!0)=>{if(Ce&&ue&&!e.disabled){if(u.action=!0,Se&&Array.isArray($e(r,F))){const ke=ue($e(r,F),Ce.argA,Ce.argB);Ne&&Ot(r,F,ke)}if(Se&&Array.isArray($e(s.errors,F))){const ke=ue($e(s.errors,F),Ce.argA,Ce.argB);Ne&&Ot(s.errors,F,ke),fT(s.errors,F)}if((g.touchedFields||b.touchedFields)&&Se&&Array.isArray($e(s.touchedFields,F))){const ke=ue($e(s.touchedFields,F),Ce.argA,Ce.argB);Ne&&Ot(s.touchedFields,F,ke)}(g.dirtyFields||b.dirtyFields)&&(s.dirtyFields=Tu(l,o)),v.state.next({name:F,isDirty:L(F,se),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Ot(o,F,se)},S=(F,se)=>{Ot(s.errors,F,se),v.state.next({errors:s.errors})},k=F=>{s.errors=F,v.state.next({errors:s.errors,isValid:!1})},Z=(F,se,ue,Ce)=>{const Ne=$e(r,F);if(Ne){const Se=$e(o,F,ys(ue)?$e(l,F):ue);ys(Se)||Ce&&Ce.defaultChecked||se?Ot(o,F,se?Se:Iw(Ne._f)):V(F,Se),u.mount&&j()}},R=(F,se,ue,Ce,Ne)=>{let Se=!1,ke=!1;const Le={name:F};if(!e.disabled){if(!ue||Ce){(g.isDirty||b.isDirty)&&(ke=s.isDirty,s.isDirty=Le.isDirty=L(),Se=ke!==Le.isDirty);const Ke=Da($e(l,F),se);ke=!!$e(s.dirtyFields,F),Ke?gs(s.dirtyFields,F):Ot(s.dirtyFields,F,!0),Le.dirtyFields=s.dirtyFields,Se=Se||(g.dirtyFields||b.dirtyFields)&&ke!==!Ke}if(ue){const Ke=$e(s.touchedFields,F);Ke||(Ot(s.touchedFields,F,ue),Le.touchedFields=s.touchedFields,Se=Se||(g.touchedFields||b.touchedFields)&&Ke!==ue)}Se&&Ne&&v.state.next(Le)}return Se?Le:{}},U=(F,se,ue,Ce)=>{const Ne=$e(s.errors,F),Se=(g.isValid||b.isValid)&&Wn(se)&&s.isValid!==se;if(e.delayError&&ue?(f=x(()=>S(F,ue)),f(e.delayError)):(clearTimeout(p),f=null,ue?Ot(s.errors,F,ue):gs(s.errors,F)),(ue?!Da(Ne,ue):Ne)||!xr(Ce)||Se){const ke={...Ce,...Se&&Wn(se)?{isValid:se}:{},errors:s.errors,name:F};s={...s,...ke},v.state.next(ke)}},B=async F=>{N(F,!0);const se=await e.resolver(o,e.context,lT(F||h.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return N(F),se},A=async F=>{const{errors:se}=await B(F);if(F)for(const ue of F){const Ce=$e(se,ue);Ce?Ot(s.errors,ue,Ce):gs(s.errors,ue)}else s.errors=se;return se},C=async(F,se,ue={valid:!0})=>{for(const Ce in F){const Ne=F[Ce];if(Ne){const{_f:Se,...ke}=Ne;if(Se){const Le=h.array.has(Se.name),Ke=Ne._f&&oT(Ne._f);Ke&&g.validatingFields&&N([Ce],!0);const ft=await Hw(Ne,h.disabled,o,w,e.shouldUseNativeValidation&&!se,Le);if(Ke&&g.validatingFields&&N([Ce]),ft[Se.name]&&(ue.valid=!1,se))break;!se&&($e(ft,Se.name)?Le?mT(s.errors,ft,Se.name):Ot(s.errors,Se.name,ft[Se.name]):gs(s.errors,Se.name))}!xr(ke)&&await C(ke,se,ue)}}return ue.valid},z=()=>{for(const F of h.unMount){const se=$e(r,F);se&&(se._f.refs?se._f.refs.every(ue=>!lg(ue)):!lg(se._f.ref))&&Re(F)}h.unMount=new Set},L=(F,se)=>!e.disabled&&(F&&se&&Ot(o,F,se),!Da(I(),l)),q=(F,se,ue)=>rT(F,h,{...u.mount?o:ys(se)?l:ei(F)?{[F]:se}:se},ue,se),P=F=>V0($e(u.mount?o:l,F,e.shouldUnregister?$e(l,F,[]):[])),V=(F,se,ue={})=>{const Ce=$e(r,F);let Ne=se;if(Ce){const Se=Ce._f;Se&&(!Se.disabled&&Ot(o,F,Wj(se,Se)),Ne=mf(Se.ref)&&rr(se)?"":se,Gj(Se.ref)?[...Se.ref.options].forEach(ke=>ke.selected=Ne.includes(ke.value)):Se.refs?dd(Se.ref)?Se.refs.forEach(ke=>{(!ke.defaultChecked||!ke.disabled)&&(Array.isArray(Ne)?ke.checked=!!Ne.find(Le=>Le===ke.value):ke.checked=Ne===ke.value||!!Ne)}):Se.refs.forEach(ke=>ke.checked=ke.value===Ne):Y0(Se.ref)?Se.ref.value="":(Se.ref.value=Ne,Se.ref.type||v.state.next({name:F,values:qs(o)})))}(ue.shouldDirty||ue.shouldTouch)&&R(F,Ne,ue.shouldTouch,ue.shouldDirty,!0),ue.shouldValidate&&oe(F)},te=(F,se,ue)=>{for(const Ce in se){if(!se.hasOwnProperty(Ce))return;const Ne=se[Ce],Se=F+"."+Ce,ke=$e(r,Se);(h.array.has(F)||us(Ne)||ke&&!ke._f)&&!Tl(Ne)?te(Se,Ne,ue):V(Se,Ne,ue)}},$=(F,se,ue={})=>{const Ce=$e(r,F),Ne=h.array.has(F),Se=qs(se);Ot(o,F,Se),Ne?(v.array.next({name:F,values:qs(o)}),(g.isDirty||g.dirtyFields||b.isDirty||b.dirtyFields)&&ue.shouldDirty&&v.state.next({name:F,dirtyFields:Tu(l,o),isDirty:L(F,Se)})):Ce&&!Ce._f&&!rr(Se)?te(F,Se,ue):V(F,Se,ue),zw(F,h)&&v.state.next({...s,name:F}),v.state.next({name:u.mount?F:void 0,values:qs(o)})},Y=async F=>{u.mount=!0;const se=F.target;let ue=se.name,Ce=!0;const Ne=$e(r,ue),Se=Ke=>{Ce=Number.isNaN(Ke)||Tl(Ke)&&isNaN(Ke.getTime())||Da(Ke,$e(o,ue,Ke))},ke=$w(e.mode),Le=$w(e.reValidateMode);if(Ne){let Ke,ft;const Wt=se.type?Iw(Ne._f):Wk(F),Qt=F.type===Mw.BLUR||F.type===Mw.FOCUS_OUT,bs=!cT(Ne._f)&&!e.resolver&&!$e(s.errors,ue)&&!Ne._f.deps||hT(Qt,$e(s.touchedFields,ue),s.isSubmitted,Le,ke),As=zw(ue,h,Qt);Ot(o,ue,Wt),Qt?(!se||!se.readOnly)&&(Ne._f.onBlur&&Ne._f.onBlur(F),f&&f(0)):Ne._f.onChange&&Ne._f.onChange(F);const $s=R(ue,Wt,Qt),Gs=!xr($s)||As;if(!Qt&&v.state.next({name:ue,type:F.type,values:qs(o)}),bs)return(g.isValid||b.isValid)&&(e.mode==="onBlur"?Qt&&j():Qt||j()),Gs&&v.state.next({name:ue,...As?{}:$s});if(!Qt&&As&&v.state.next({...s}),e.resolver){const{errors:Ur}=await B([ue]);if(Se(Wt),Ce){const ur=Bw(s.errors,r,ue),zr=Bw(Ur,r,ur.name||ue);Ke=zr.error,ue=zr.name,ft=xr(Ur)}}else N([ue],!0),Ke=(await Hw(Ne,h.disabled,o,w,e.shouldUseNativeValidation))[ue],N([ue]),Se(Wt),Ce&&(Ke?ft=!1:(g.isValid||b.isValid)&&(ft=await C(r,!0)));Ce&&(Ne._f.deps&&oe(Ne._f.deps),U(ue,ft,Ke,$s))}},W=(F,se)=>{if($e(s.errors,se)&&F.focus)return F.focus(),1},oe=async(F,se={})=>{let ue,Ce;const Ne=Fu(F);if(e.resolver){const Se=await A(ys(F)?F:Ne);ue=xr(Se),Ce=F?!Ne.some(ke=>$e(Se,ke)):ue}else F?(Ce=(await Promise.all(Ne.map(async Se=>{const ke=$e(r,Se);return await C(ke&&ke._f?{[Se]:ke}:ke)}))).every(Boolean),!(!Ce&&!s.isValid)&&j()):Ce=ue=await C(r);return v.state.next({...!ei(F)||(g.isValid||b.isValid)&&ue!==s.isValid?{}:{name:F},...e.resolver||!F?{isValid:ue}:{},errors:s.errors}),se.shouldFocus&&!Ce&&Hu(r,W,F?Ne:h.mount),Ce},I=F=>{const se={...u.mount?o:l};return ys(F)?se:ei(F)?$e(se,F):F.map(ue=>$e(se,ue))},Q=(F,se)=>({invalid:!!$e((se||s).errors,F),isDirty:!!$e((se||s).dirtyFields,F),error:$e((se||s).errors,F),isValidating:!!$e(s.validatingFields,F),isTouched:!!$e((se||s).touchedFields,F)}),ie=F=>{F&&Fu(F).forEach(se=>gs(s.errors,se)),v.state.next({errors:F?s.errors:{}})},X=(F,se,ue)=>{const Ce=($e(r,F,{_f:{}})._f||{}).ref,Ne=$e(s.errors,F)||{},{ref:Se,message:ke,type:Le,...Ke}=Ne;Ot(s.errors,F,{...Ke,...se,ref:Ce}),v.state.next({name:F,errors:s.errors,isValid:!1}),ue&&ue.shouldFocus&&Ce&&Ce.focus&&Ce.focus()},fe=(F,se)=>_n(F)?v.state.subscribe({next:ue=>"values"in ue&&F(q(void 0,se),ue)}):q(F,se,!0),ve=F=>v.state.subscribe({next:se=>{dT(F.name,se.name,F.exact)&&uT(se,F.formState||g,gt,F.reRenderRoot)&&F.callback({values:{...o},...s,...se,defaultValues:l})}}).unsubscribe,Ee=F=>(u.mount=!0,b={...b,...F.formState},ve({...F,formState:b})),Re=(F,se={})=>{for(const ue of F?Fu(F):h.mount)h.mount.delete(ue),h.array.delete(ue),se.keepValue||(gs(r,ue),gs(o,ue)),!se.keepError&&gs(s.errors,ue),!se.keepDirty&&gs(s.dirtyFields,ue),!se.keepTouched&&gs(s.touchedFields,ue),!se.keepIsValidating&&gs(s.validatingFields,ue),!e.shouldUnregister&&!se.keepDefaultValue&&gs(l,ue);v.state.next({values:qs(o)}),v.state.next({...s,...se.keepDirty?{isDirty:L()}:{}}),!se.keepIsValid&&j()},je=({disabled:F,name:se})=>{(Wn(F)&&u.mount||F||h.disabled.has(se))&&(F?h.disabled.add(se):h.disabled.delete(se))},Te=(F,se={})=>{let ue=$e(r,F);const Ce=Wn(se.disabled)||Wn(e.disabled);return Ot(r,F,{...ue||{},_f:{...ue&&ue._f?ue._f:{ref:{name:F}},name:F,mount:!0,...se}}),h.mount.add(F),ue?je({disabled:Wn(se.disabled)?se.disabled:e.disabled,name:F}):Z(F,!0,se.value),{...Ce?{disabled:se.disabled||e.disabled}:{},...e.progressive?{required:!!se.required,min:Ou(se.min),max:Ou(se.max),minLength:Ou(se.minLength),maxLength:Ou(se.maxLength),pattern:Ou(se.pattern)}:{},name:F,onChange:Y,onBlur:Y,ref:Ne=>{if(Ne){Te(F,se),ue=$e(r,F);const Se=ys(Ne.value)&&Ne.querySelectorAll&&Ne.querySelectorAll("input,select,textarea")[0]||Ne,ke=nT(Se),Le=ue._f.refs||[];if(ke?Le.find(Ke=>Ke===Se):Se===ue._f.ref)return;Ot(r,F,{_f:{...ue._f,...ke?{refs:[...Le.filter(lg),Se,...Array.isArray($e(l,F))?[{}]:[]],ref:{type:Se.type,name:F}}:{ref:Se}}}),Z(F,!1,void 0,Se)}else ue=$e(r,F,{}),ue._f&&(ue._f.mount=!1),(e.shouldUnregister||se.shouldUnregister)&&!(Xk(h.array,F)&&u.action)&&h.unMount.add(F)}}},Me=()=>e.shouldFocusError&&Hu(r,W,h.mount),Oe=F=>{Wn(F)&&(v.state.next({disabled:F}),Hu(r,(se,ue)=>{const Ce=$e(r,ue);Ce&&(se.disabled=Ce._f.disabled||F,Array.isArray(Ce._f.refs)&&Ce._f.refs.forEach(Ne=>{Ne.disabled=Ce._f.disabled||F}))},0,!1))},De=(F,se)=>async ue=>{let Ce;ue&&(ue.preventDefault&&ue.preventDefault(),ue.persist&&ue.persist());let Ne=qs(o);if(v.state.next({isSubmitting:!0}),e.resolver){const{errors:Se,values:ke}=await B();s.errors=Se,Ne=qs(ke)}else await C(r);if(h.disabled.size)for(const Se of h.disabled)gs(Ne,Se);if(gs(s.errors,"root"),xr(s.errors)){v.state.next({errors:{}});try{await F(Ne,ue)}catch(Se){Ce=Se}}else se&&await se({...s.errors},ue),Me(),setTimeout(Me);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xr(s.errors)&&!Ce,submitCount:s.submitCount+1,errors:s.errors}),Ce)throw Ce},Ge=(F,se={})=>{$e(r,F)&&(ys(se.defaultValue)?$(F,qs($e(l,F))):($(F,se.defaultValue),Ot(l,F,qs(se.defaultValue))),se.keepTouched||gs(s.touchedFields,F),se.keepDirty||(gs(s.dirtyFields,F),s.isDirty=se.defaultValue?L(F,qs($e(l,F))):L()),se.keepError||(gs(s.errors,F),g.isValid&&j()),v.state.next({...s}))},Ye=(F,se={})=>{const ue=F?qs(F):l,Ce=qs(ue),Ne=xr(F),Se=Ne?l:Ce;if(se.keepDefaultValues||(l=ue),!se.keepValues){if(se.keepDirtyValues){const ke=new Set([...h.mount,...Object.keys(Tu(l,o))]);for(const Le of Array.from(ke))$e(s.dirtyFields,Le)?Ot(Se,Le,$e(o,Le)):$(Le,$e(Se,Le))}else{if(H0&&ys(F))for(const ke of h.mount){const Le=$e(r,ke);if(Le&&Le._f){const Ke=Array.isArray(Le._f.refs)?Le._f.refs[0]:Le._f.ref;if(mf(Ke)){const ft=Ke.closest("form");if(ft){ft.reset();break}}}}if(se.keepFieldsRef)for(const ke of h.mount)$(ke,$e(Se,ke));else r={}}o=e.shouldUnregister?se.keepDefaultValues?qs(l):{}:qs(Se),v.array.next({values:{...Se}}),v.state.next({values:{...Se}})}h={mount:se.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!g.isValid||!!se.keepIsValid||!!se.keepDirtyValues,u.watch=!!e.shouldUnregister,v.state.next({submitCount:se.keepSubmitCount?s.submitCount:0,isDirty:Ne?!1:se.keepDirty?s.isDirty:!!(se.keepDefaultValues&&!Da(F,l)),isSubmitted:se.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:Ne?{}:se.keepDirtyValues?se.keepDefaultValues&&o?Tu(l,o):s.dirtyFields:se.keepDefaultValues&&F?Tu(l,F):se.keepDirty?s.dirtyFields:{},touchedFields:se.keepTouched?s.touchedFields:{},errors:se.keepErrors?s.errors:{},isSubmitSuccessful:se.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:l})},Xe=(F,se)=>Ye(_n(F)?F(o):F,se),st=(F,se={})=>{const ue=$e(r,F),Ce=ue&&ue._f;if(Ce){const Ne=Ce.refs?Ce.refs[0]:Ce.ref;Ne.focus&&(Ne.focus(),se.shouldSelect&&_n(Ne.select)&&Ne.select())}},gt=F=>{s={...s,...F}},yt={control:{register:Te,unregister:Re,getFieldState:Q,handleSubmit:De,setError:X,_subscribe:ve,_runSchema:B,_focusError:Me,_getWatch:q,_getDirty:L,_setValid:j,_setFieldArray:T,_setDisabledField:je,_setErrors:k,_getFieldArray:P,_reset:Ye,_resetDefaultValues:()=>_n(e.defaultValues)&&e.defaultValues().then(F=>{Xe(F,e.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:z,_disableForm:Oe,_subjects:v,_proxyFormState:g,get _fields(){return r},get _formValues(){return o},get _state(){return u},set _state(F){u=F},get _defaultValues(){return l},get _names(){return h},set _names(F){h=F},get _formState(){return s},get _options(){return e},set _options(F){e={...e,...F}}},subscribe:Ee,trigger:oe,register:Te,handleSubmit:De,watch:fe,setValue:$,getValues:I,reset:Xe,resetField:Ge,clearErrors:ie,unregister:Re,setError:X,setFocus:st,getFieldState:Q};return{...yt,formControl:yt}}function hd(t={}){const e=Fs.useRef(void 0),s=Fs.useRef(void 0),[r,l]=Fs.useState({isDirty:!1,isValidating:!1,isLoading:_n(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:_n(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!_n(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:u,...h}=gT(t);e.current={...h,formState:r}}const o=e.current.control;return o._options=t,sT(()=>{const u=o._subscribe({formState:o._proxyFormState,callback:()=>l({...o._formState}),reRenderRoot:!0});return l(h=>({...h,isReady:!0})),o._formState.isReady=!0,u},[o]),Fs.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),Fs.useEffect(()=>{t.mode&&(o._options.mode=t.mode),t.reValidateMode&&(o._options.reValidateMode=t.reValidateMode)},[o,t.mode,t.reValidateMode]),Fs.useEffect(()=>{t.errors&&(o._setErrors(t.errors),o._focusError())},[o,t.errors]),Fs.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,t.shouldUnregister]),Fs.useEffect(()=>{if(o._proxyFormState.isDirty){const u=o._getDirty();u!==r.isDirty&&o._subjects.state.next({isDirty:u})}},[o,r.isDirty]),Fs.useEffect(()=>{t.values&&!Da(t.values,s.current)?(o._reset(t.values,{keepFieldsRef:!0,...o._options.resetOptions}),s.current=t.values,l(u=>({...u}))):o._resetDefaultValues()},[o,t.values]),Fs.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=tT(r,o),e.current}const Vw=(t,e,s)=>{if(t&&"reportValidity"in t){const r=$e(s,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},Vg=(t,e)=>{for(const s in e.fields){const r=e.fields[s];r&&r.ref&&"reportValidity"in r.ref?Vw(r.ref,s,t):r&&r.refs&&r.refs.forEach(l=>Vw(l,s,t))}},Gw=(t,e)=>{e.shouldUseNativeValidation&&Vg(t,e);const s={};for(const r in t){const l=$e(e.fields,r),o=Object.assign(t[r]||{},{ref:l&&l.ref});if(yT(e.names||Object.keys(t),r)){const u=Object.assign({},$e(s,r));Ot(u,"root",o),Ot(s,r,u)}else Ot(s,r,o)}return s},yT=(t,e)=>{const s=Zw(e);return t.some(r=>Zw(r).match(`^${s}\\.\\d+`))};function Zw(t){return t.replace(/\]|\[/g,"")}function _e(t,e,s){function r(h,f){var p;Object.defineProperty(h,"_zod",{value:h._zod??{},enumerable:!1}),(p=h._zod).traits??(p.traits=new Set),h._zod.traits.add(t),e(h,f);for(const g in u.prototype)g in h||Object.defineProperty(h,g,{value:u.prototype[g].bind(h)});h._zod.constr=u,h._zod.def=f}const l=s?.Parent??Object;class o extends l{}Object.defineProperty(o,"name",{value:t});function u(h){var f;const p=s?.Parent?new o:this;r(p,h),(f=p._zod).deferred??(f.deferred=[]);for(const g of p._zod.deferred)g();return p}return Object.defineProperty(u,"init",{value:r}),Object.defineProperty(u,Symbol.hasInstance,{value:h=>s?.Parent&&h instanceof s.Parent?!0:h?._zod?.traits?.has(t)}),Object.defineProperty(u,"name",{value:t}),u}class Xu extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Xj={};function Rl(t){return Xj}function bT(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,l])=>e.indexOf(+r)===-1).map(([r,l])=>l)}function Gg(t,e){return typeof e=="bigint"?e.toString():e}function Jj(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function W0(t){return t==null}function Q0(t){const e=t.startsWith("^")?1:0,s=t.endsWith("$")?t.length-1:t.length;return t.slice(e,s)}function xT(t,e){const s=(t.toString().split(".")[1]||"").length,r=e.toString();let l=(r.split(".")[1]||"").length;if(l===0&&/\d?e-\d?/.test(r)){const f=r.match(/\d?e-(\d?)/);f?.[1]&&(l=Number.parseInt(f[1]))}const o=s>l?s:l,u=Number.parseInt(t.toFixed(o).replace(".","")),h=Number.parseInt(e.toFixed(o).replace(".",""));return u%h/10**o}const Yw=Symbol("evaluating");function Pt(t,e,s){let r;Object.defineProperty(t,e,{get(){if(r!==Yw)return r===void 0&&(r=Yw,r=s()),r},set(l){Object.defineProperty(t,e,{value:l})},configurable:!0})}function zl(t,e,s){Object.defineProperty(t,e,{value:s,writable:!0,enumerable:!0,configurable:!0})}function _c(...t){const e={};for(const s of t){const r=Object.getOwnPropertyDescriptors(s);Object.assign(e,r)}return Object.defineProperties({},e)}function Kw(t){return JSON.stringify(t)}const e2="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Zg(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const vT=Jj(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Yg(t){if(Zg(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(Zg(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}const wT=new Set(["string","number","symbol"]);function zf(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Bl(t,e,s){const r=new t._zod.constr(e??t._zod.def);return(!e||s?.parent)&&(r._zod.parent=t),r}function Ze(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function _T(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const jT={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function NT(t,e){const s=t._zod.def,r=_c(t._zod.def,{get shape(){const l={};for(const o in e){if(!(o in s.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(l[o]=s.shape[o])}return zl(this,"shape",l),l},checks:[]});return Bl(t,r)}function ST(t,e){const s=t._zod.def,r=_c(t._zod.def,{get shape(){const l={...t._zod.def.shape};for(const o in e){if(!(o in s.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete l[o]}return zl(this,"shape",l),l},checks:[]});return Bl(t,r)}function ET(t,e){if(!Yg(e))throw new Error("Invalid input to extend: expected a plain object");const s=_c(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return zl(this,"shape",r),r},checks:[]});return Bl(t,s)}function AT(t,e){const s=_c(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return zl(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return Bl(t,s)}function CT(t,e,s){const r=_c(e._zod.def,{get shape(){const l=e._zod.def.shape,o={...l};if(s)for(const u in s){if(!(u in l))throw new Error(`Unrecognized key: "${u}"`);s[u]&&(o[u]=t?new t({type:"optional",innerType:l[u]}):l[u])}else for(const u in l)o[u]=t?new t({type:"optional",innerType:l[u]}):l[u];return zl(this,"shape",o),o},checks:[]});return Bl(e,r)}function kT(t,e,s){const r=_c(e._zod.def,{get shape(){const l=e._zod.def.shape,o={...l};if(s)for(const u in s){if(!(u in o))throw new Error(`Unrecognized key: "${u}"`);s[u]&&(o[u]=new t({type:"nonoptional",innerType:l[u]}))}else for(const u in l)o[u]=new t({type:"nonoptional",innerType:l[u]});return zl(this,"shape",o),o},checks:[]});return Bl(e,r)}function Vu(t,e=0){for(let s=e;s<t.issues.length;s++)if(t.issues[s]?.continue!==!0)return!0;return!1}function t2(t,e){return e.map(s=>{var r;return(r=s).path??(r.path=[]),s.path.unshift(t),s})}function Dh(t){return typeof t=="string"?t:t?.message}function Ml(t,e,s){const r={...t,path:t.path??[]};if(!t.message){const l=Dh(t.inst?._zod.def?.error?.(t))??Dh(e?.error?.(t))??Dh(s.customError?.(t))??Dh(s.localeError?.(t))??"Invalid input";r.message=l}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function X0(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Ju(...t){const[e,s,r]=t;return typeof e=="string"?{message:e,code:"custom",input:s,inst:r}:{...e}}const s2=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Gg,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},J0=_e("$ZodError",s2),Bf=_e("$ZodError",s2,{Parent:Error});function TT(t,e=s=>s.message){const s={},r=[];for(const l of t.issues)l.path.length>0?(s[l.path[0]]=s[l.path[0]]||[],s[l.path[0]].push(e(l))):r.push(e(l));return{formErrors:r,fieldErrors:s}}function OT(t,e){const s=e||function(o){return o.message},r={_errors:[]},l=o=>{for(const u of o.issues)if(u.code==="invalid_union"&&u.errors.length)u.errors.map(h=>l({issues:h}));else if(u.code==="invalid_key")l({issues:u.issues});else if(u.code==="invalid_element")l({issues:u.issues});else if(u.path.length===0)r._errors.push(s(u));else{let h=r,f=0;for(;f<u.path.length;){const p=u.path[f];f===u.path.length-1?(h[p]=h[p]||{_errors:[]},h[p]._errors.push(s(u))):h[p]=h[p]||{_errors:[]},h=h[p],f++}}};return l(t),r}const r2=t=>(e,s,r,l)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},u=e._zod.run({value:s,issues:[]},o);if(u instanceof Promise)throw new Xu;if(u.issues.length){const h=new(l?.Err??t)(u.issues.map(f=>Ml(f,o,Rl())));throw e2(h,l?.callee),h}return u.value},RT=r2(Bf),n2=t=>async(e,s,r,l)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let u=e._zod.run({value:s,issues:[]},o);if(u instanceof Promise&&(u=await u),u.issues.length){const h=new(l?.Err??t)(u.issues.map(f=>Ml(f,o,Rl())));throw e2(h,l?.callee),h}return u.value},MT=n2(Bf),i2=t=>(e,s,r)=>{const l=r?{...r,async:!1}:{async:!1},o=e._zod.run({value:s,issues:[]},l);if(o instanceof Promise)throw new Xu;return o.issues.length?{success:!1,error:new(t??J0)(o.issues.map(u=>Ml(u,l,Rl())))}:{success:!0,data:o.value}},DT=i2(Bf),a2=t=>async(e,s,r)=>{const l=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:s,issues:[]},l);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(u=>Ml(u,l,Rl())))}:{success:!0,data:o.value}},LT=a2(Bf),qT=/^[cC][^\s-]{8,}$/,PT=/^[0-9a-z]+$/,IT=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,$T=/^[0-9a-vA-V]{20}$/,UT=/^[A-Za-z0-9]{27}$/,zT=/^[a-zA-Z0-9_-]{21}$/,BT=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,FT=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Ww=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,HT=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,VT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function GT(){return new RegExp(VT,"u")}const ZT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,YT=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,KT=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,WT=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,QT=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,l2=/^[A-Za-z0-9_-]*$/,XT=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,JT=/^\+(?:[0-9]){6,14}[0-9]$/,o2="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",e4=new RegExp(`^${o2}$`);function c2(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function t4(t){return new RegExp(`^${c2(t)}$`)}function s4(t){const e=c2({precision:t.precision}),s=["Z"];t.local&&s.push(""),t.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${s.join("|")})`;return new RegExp(`^${o2}T(?:${r})$`)}const r4=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},n4=/^\d+$/,i4=/^-?\d+(?:\.\d+)?/i,a4=/^[^A-Z]*$/,l4=/^[^a-z]*$/,wr=_e("$ZodCheck",(t,e)=>{var s;t._zod??(t._zod={}),t._zod.def=e,(s=t._zod).onattach??(s.onattach=[])}),u2={number:"number",bigint:"bigint",object:"date"},d2=_e("$ZodCheckLessThan",(t,e)=>{wr.init(t,e);const s=u2[typeof e.value];t._zod.onattach.push(r=>{const l=r._zod.bag,o=(e.inclusive?l.maximum:l.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?l.maximum=e.value:l.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:s,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),h2=_e("$ZodCheckGreaterThan",(t,e)=>{wr.init(t,e);const s=u2[typeof e.value];t._zod.onattach.push(r=>{const l=r._zod.bag,o=(e.inclusive?l.minimum:l.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?l.minimum=e.value:l.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:s,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),o4=_e("$ZodCheckMultipleOf",(t,e)=>{wr.init(t,e),t._zod.onattach.push(s=>{var r;(r=s._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=s=>{if(typeof s.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof s.value=="bigint"?s.value%e.value===BigInt(0):xT(s.value,e.value)===0)||s.issues.push({origin:typeof s.value,code:"not_multiple_of",divisor:e.value,input:s.value,inst:t,continue:!e.abort})}}),c4=_e("$ZodCheckNumberFormat",(t,e)=>{wr.init(t,e),e.format=e.format||"float64";const s=e.format?.includes("int"),r=s?"int":"number",[l,o]=jT[e.format];t._zod.onattach.push(u=>{const h=u._zod.bag;h.format=e.format,h.minimum=l,h.maximum=o,s&&(h.pattern=n4)}),t._zod.check=u=>{const h=u.value;if(s){if(!Number.isInteger(h)){u.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:h,inst:t});return}if(!Number.isSafeInteger(h)){h>0?u.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):u.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}h<l&&u.issues.push({origin:"number",input:h,code:"too_small",minimum:l,inclusive:!0,inst:t,continue:!e.abort}),h>o&&u.issues.push({origin:"number",input:h,code:"too_big",maximum:o,inst:t})}}),u4=_e("$ZodCheckMaxLength",(t,e)=>{var s;wr.init(t,e),(s=t._zod.def).when??(s.when=r=>{const l=r.value;return!W0(l)&&l.length!==void 0}),t._zod.onattach.push(r=>{const l=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<l&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const l=r.value;if(l.length<=e.maximum)return;const u=X0(l);r.issues.push({origin:u,code:"too_big",maximum:e.maximum,inclusive:!0,input:l,inst:t,continue:!e.abort})}}),d4=_e("$ZodCheckMinLength",(t,e)=>{var s;wr.init(t,e),(s=t._zod.def).when??(s.when=r=>{const l=r.value;return!W0(l)&&l.length!==void 0}),t._zod.onattach.push(r=>{const l=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>l&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const l=r.value;if(l.length>=e.minimum)return;const u=X0(l);r.issues.push({origin:u,code:"too_small",minimum:e.minimum,inclusive:!0,input:l,inst:t,continue:!e.abort})}}),h4=_e("$ZodCheckLengthEquals",(t,e)=>{var s;wr.init(t,e),(s=t._zod.def).when??(s.when=r=>{const l=r.value;return!W0(l)&&l.length!==void 0}),t._zod.onattach.push(r=>{const l=r._zod.bag;l.minimum=e.length,l.maximum=e.length,l.length=e.length}),t._zod.check=r=>{const l=r.value,o=l.length;if(o===e.length)return;const u=X0(l),h=o>e.length;r.issues.push({origin:u,...h?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),Ff=_e("$ZodCheckStringFormat",(t,e)=>{var s,r;wr.init(t,e),t._zod.onattach.push(l=>{const o=l._zod.bag;o.format=e.format,e.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(e.pattern))}),e.pattern?(s=t._zod).check??(s.check=l=>{e.pattern.lastIndex=0,!e.pattern.test(l.value)&&l.issues.push({origin:"string",code:"invalid_format",format:e.format,input:l.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),f4=_e("$ZodCheckRegex",(t,e)=>{Ff.init(t,e),t._zod.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),m4=_e("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=a4),Ff.init(t,e)}),p4=_e("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=l4),Ff.init(t,e)}),g4=_e("$ZodCheckIncludes",(t,e)=>{wr.init(t,e);const s=zf(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${s}`:s);e.pattern=r,t._zod.onattach.push(l=>{const o=l._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=l=>{l.value.includes(e.includes,e.position)||l.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:l.value,inst:t,continue:!e.abort})}}),y4=_e("$ZodCheckStartsWith",(t,e)=>{wr.init(t,e);const s=new RegExp(`^${zf(e.prefix)}.*`);e.pattern??(e.pattern=s),t._zod.onattach.push(r=>{const l=r._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(s)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),b4=_e("$ZodCheckEndsWith",(t,e)=>{wr.init(t,e);const s=new RegExp(`.*${zf(e.suffix)}$`);e.pattern??(e.pattern=s),t._zod.onattach.push(r=>{const l=r._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(s)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),x4=_e("$ZodCheckOverwrite",(t,e)=>{wr.init(t,e),t._zod.check=s=>{s.value=e.tx(s.value)}});class v4{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(u=>u),l=Math.min(...r.map(u=>u.length-u.trimStart().length)),o=r.map(u=>u.slice(l)).map(u=>" ".repeat(this.indent*2)+u);for(const u of o)this.content.push(u)}compile(){const e=Function,s=this?.args,l=[...(this?.content??[""]).map(o=>`  ${o}`)];return new e(...s,l.join(`
`))}}const w4={major:4,minor:0,patch:14},ds=_e("$ZodType",(t,e)=>{var s;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=w4;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const l of r)for(const o of l._zod.onattach)o(t);if(r.length===0)(s=t._zod).deferred??(s.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const l=(o,u,h)=>{let f=Vu(o),p;for(const g of u){if(g._zod.def.when){if(!g._zod.def.when(o))continue}else if(f)continue;const b=o.issues.length,v=g._zod.check(o);if(v instanceof Promise&&h?.async===!1)throw new Xu;if(p||v instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await v,o.issues.length!==b&&(f||(f=Vu(o,b)))});else{if(o.issues.length===b)continue;f||(f=Vu(o,b))}}return p?p.then(()=>o):o};t._zod.run=(o,u)=>{const h=t._zod.parse(o,u);if(h instanceof Promise){if(u.async===!1)throw new Xu;return h.then(f=>l(f,r,u))}return l(h,r,u)}}t["~standard"]={validate:l=>{try{const o=DT(t,l);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return LT(t,l).then(u=>u.success?{value:u.data}:{issues:u.error?.issues})}},vendor:"zod",version:1}}),ey=_e("$ZodString",(t,e)=>{ds.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??r4(t._zod.bag),t._zod.parse=(s,r)=>{if(e.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:t}),s}}),Vt=_e("$ZodStringFormat",(t,e)=>{Ff.init(t,e),ey.init(t,e)}),_4=_e("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=FT),Vt.init(t,e)}),j4=_e("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Ww(r))}else e.pattern??(e.pattern=Ww());Vt.init(t,e)}),N4=_e("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=HT),Vt.init(t,e)}),S4=_e("$ZodURL",(t,e)=>{Vt.init(t,e),t._zod.check=s=>{try{const r=s.value.trim(),l=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(l.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:XT.source,input:s.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(l.protocol.endsWith(":")?l.protocol.slice(0,-1):l.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:s.value,inst:t,continue:!e.abort})),e.normalize?s.value=l.href:s.value=r;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:t,continue:!e.abort})}}}),E4=_e("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=GT()),Vt.init(t,e)}),A4=_e("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=zT),Vt.init(t,e)}),C4=_e("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=qT),Vt.init(t,e)}),k4=_e("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=PT),Vt.init(t,e)}),T4=_e("$ZodULID",(t,e)=>{e.pattern??(e.pattern=IT),Vt.init(t,e)}),O4=_e("$ZodXID",(t,e)=>{e.pattern??(e.pattern=$T),Vt.init(t,e)}),R4=_e("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=UT),Vt.init(t,e)}),M4=_e("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=s4(e)),Vt.init(t,e)}),D4=_e("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=e4),Vt.init(t,e)}),L4=_e("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=t4(e)),Vt.init(t,e)}),q4=_e("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=BT),Vt.init(t,e)}),P4=_e("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=ZT),Vt.init(t,e),t._zod.onattach.push(s=>{const r=s._zod.bag;r.format="ipv4"})}),I4=_e("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=YT),Vt.init(t,e),t._zod.onattach.push(s=>{const r=s._zod.bag;r.format="ipv6"}),t._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:t,continue:!e.abort})}}}),$4=_e("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=KT),Vt.init(t,e)}),U4=_e("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=WT),Vt.init(t,e),t._zod.check=s=>{const[r,l]=s.value.split("/");try{if(!l)throw new Error;const o=Number(l);if(`${o}`!==l)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${r}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:t,continue:!e.abort})}}});function f2(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const z4=_e("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=QT),Vt.init(t,e),t._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64"}),t._zod.check=s=>{f2(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:t,continue:!e.abort})}});function B4(t){if(!l2.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),s=e.padEnd(Math.ceil(e.length/4)*4,"=");return f2(s)}const F4=_e("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=l2),Vt.init(t,e),t._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64url"}),t._zod.check=s=>{B4(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:t,continue:!e.abort})}}),H4=_e("$ZodE164",(t,e)=>{e.pattern??(e.pattern=JT),Vt.init(t,e)});function V4(t,e=null){try{const s=t.split(".");if(s.length!==3)return!1;const[r]=s;if(!r)return!1;const l=JSON.parse(atob(r));return!("typ"in l&&l?.typ!=="JWT"||!l.alg||e&&(!("alg"in l)||l.alg!==e))}catch{return!1}}const G4=_e("$ZodJWT",(t,e)=>{Vt.init(t,e),t._zod.check=s=>{V4(s.value,e.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:t,continue:!e.abort})}}),m2=_e("$ZodNumber",(t,e)=>{ds.init(t,e),t._zod.pattern=t._zod.bag.pattern??i4,t._zod.parse=(s,r)=>{if(e.coerce)try{s.value=Number(s.value)}catch{}const l=s.value;if(typeof l=="number"&&!Number.isNaN(l)&&Number.isFinite(l))return s;const o=typeof l=="number"?Number.isNaN(l)?"NaN":Number.isFinite(l)?void 0:"Infinity":void 0;return s.issues.push({expected:"number",code:"invalid_type",input:l,inst:t,...o?{received:o}:{}}),s}}),Z4=_e("$ZodNumber",(t,e)=>{c4.init(t,e),m2.init(t,e)}),Y4=_e("$ZodUnknown",(t,e)=>{ds.init(t,e),t._zod.parse=s=>s}),K4=_e("$ZodNever",(t,e)=>{ds.init(t,e),t._zod.parse=(s,r)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:t}),s)});function Qw(t,e,s){t.issues.length&&e.issues.push(...t2(s,t.issues)),e.value[s]=t.value}const W4=_e("$ZodArray",(t,e)=>{ds.init(t,e),t._zod.parse=(s,r)=>{const l=s.value;if(!Array.isArray(l))return s.issues.push({expected:"array",code:"invalid_type",input:l,inst:t}),s;s.value=Array(l.length);const o=[];for(let u=0;u<l.length;u++){const h=l[u],f=e.element._zod.run({value:h,issues:[]},r);f instanceof Promise?o.push(f.then(p=>Qw(p,s,u))):Qw(f,s,u)}return o.length?Promise.all(o).then(()=>s):s}});function Lh(t,e,s,r){t.issues.length&&e.issues.push(...t2(s,t.issues)),t.value===void 0?s in r&&(e.value[s]=void 0):e.value[s]=t.value}const Q4=_e("$ZodObject",(t,e)=>{ds.init(t,e);const s=Jj(()=>{const b=Object.keys(e.shape);for(const w of b)if(!(e.shape[w]instanceof ds))throw new Error(`Invalid element at key "${w}": expected a Zod schema`);const v=_T(e.shape);return{shape:e.shape,keys:b,keySet:new Set(b),numKeys:b.length,optionalKeys:new Set(v)}});Pt(t._zod,"propValues",()=>{const b=e.shape,v={};for(const w in b){const x=b[w]._zod;if(x.values){v[w]??(v[w]=new Set);for(const j of x.values)v[w].add(j)}}return v});const r=b=>{const v=new v4(["shape","payload","ctx"]),w=s.value,x=S=>{const k=Kw(S);return`shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`};v.write("const input = payload.value;");const j=Object.create(null);let N=0;for(const S of w.keys)j[S]=`key_${N++}`;v.write("const newResult = {}");for(const S of w.keys){const k=j[S],Z=Kw(S);v.write(`const ${k} = ${x(S)};`),v.write(`
        if (${k}.issues.length) {
          payload.issues = payload.issues.concat(${k}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Z}, ...iss.path] : [${Z}]
          })));
        }
        
        if (${k}.value === undefined) {
          if (${Z} in input) {
            newResult[${Z}] = undefined;
          }
        } else {
          newResult[${Z}] = ${k}.value;
        }
      `)}v.write("payload.value = newResult;"),v.write("return payload;");const T=v.compile();return(S,k)=>T(b,S,k)};let l;const o=Zg,u=!Xj.jitless,f=u&&vT.value,p=e.catchall;let g;t._zod.parse=(b,v)=>{g??(g=s.value);const w=b.value;if(!o(w))return b.issues.push({expected:"object",code:"invalid_type",input:w,inst:t}),b;const x=[];if(u&&f&&v?.async===!1&&v.jitless!==!0)l||(l=r(e.shape)),b=l(b,v);else{b.value={};const k=g.shape;for(const Z of g.keys){const U=k[Z]._zod.run({value:w[Z],issues:[]},v);U instanceof Promise?x.push(U.then(B=>Lh(B,b,Z,w))):Lh(U,b,Z,w)}}if(!p)return x.length?Promise.all(x).then(()=>b):b;const j=[],N=g.keySet,T=p._zod,S=T.def.type;for(const k of Object.keys(w)){if(N.has(k))continue;if(S==="never"){j.push(k);continue}const Z=T.run({value:w[k],issues:[]},v);Z instanceof Promise?x.push(Z.then(R=>Lh(R,b,k,w))):Lh(Z,b,k,w)}return j.length&&b.issues.push({code:"unrecognized_keys",keys:j,input:w,inst:t}),x.length?Promise.all(x).then(()=>b):b}});function Xw(t,e,s,r){for(const o of t)if(o.issues.length===0)return e.value=o.value,e;const l=t.filter(o=>!Vu(o));return l.length===1?(e.value=l[0].value,l[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:s,errors:t.map(o=>o.issues.map(u=>Ml(u,r,Rl())))}),e)}const X4=_e("$ZodUnion",(t,e)=>{ds.init(t,e),Pt(t._zod,"optin",()=>e.options.some(l=>l._zod.optin==="optional")?"optional":void 0),Pt(t._zod,"optout",()=>e.options.some(l=>l._zod.optout==="optional")?"optional":void 0),Pt(t._zod,"values",()=>{if(e.options.every(l=>l._zod.values))return new Set(e.options.flatMap(l=>Array.from(l._zod.values)))}),Pt(t._zod,"pattern",()=>{if(e.options.every(l=>l._zod.pattern)){const l=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${l.map(o=>Q0(o.source)).join("|")})$`)}});const s=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(l,o)=>{if(s)return r(l,o);let u=!1;const h=[];for(const f of e.options){const p=f._zod.run({value:l.value,issues:[]},o);if(p instanceof Promise)h.push(p),u=!0;else{if(p.issues.length===0)return p;h.push(p)}}return u?Promise.all(h).then(f=>Xw(f,l,t,o)):Xw(h,l,t,o)}}),J4=_e("$ZodIntersection",(t,e)=>{ds.init(t,e),t._zod.parse=(s,r)=>{const l=s.value,o=e.left._zod.run({value:l,issues:[]},r),u=e.right._zod.run({value:l,issues:[]},r);return o instanceof Promise||u instanceof Promise?Promise.all([o,u]).then(([f,p])=>Jw(s,f,p)):Jw(s,o,u)}});function Kg(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Yg(t)&&Yg(e)){const s=Object.keys(e),r=Object.keys(t).filter(o=>s.indexOf(o)!==-1),l={...t,...e};for(const o of r){const u=Kg(t[o],e[o]);if(!u.valid)return{valid:!1,mergeErrorPath:[o,...u.mergeErrorPath]};l[o]=u.data}return{valid:!0,data:l}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let r=0;r<t.length;r++){const l=t[r],o=e[r],u=Kg(l,o);if(!u.valid)return{valid:!1,mergeErrorPath:[r,...u.mergeErrorPath]};s.push(u.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function Jw(t,e,s){if(e.issues.length&&t.issues.push(...e.issues),s.issues.length&&t.issues.push(...s.issues),Vu(t))return t;const r=Kg(e.value,s.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const e5=_e("$ZodEnum",(t,e)=>{ds.init(t,e);const s=bT(e.entries),r=new Set(s);t._zod.values=r,t._zod.pattern=new RegExp(`^(${s.filter(l=>wT.has(typeof l)).map(l=>typeof l=="string"?zf(l):l.toString()).join("|")})$`),t._zod.parse=(l,o)=>{const u=l.value;return r.has(u)||l.issues.push({code:"invalid_value",values:s,input:u,inst:t}),l}}),t5=_e("$ZodTransform",(t,e)=>{ds.init(t,e),t._zod.parse=(s,r)=>{const l=e.transform(s.value,s);if(r.async)return(l instanceof Promise?l:Promise.resolve(l)).then(u=>(s.value=u,s));if(l instanceof Promise)throw new Xu;return s.value=l,s}});function e1(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const s5=_e("$ZodOptional",(t,e)=>{ds.init(t,e),t._zod.optin="optional",t._zod.optout="optional",Pt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Pt(t._zod,"pattern",()=>{const s=e.innerType._zod.pattern;return s?new RegExp(`^(${Q0(s.source)})?$`):void 0}),t._zod.parse=(s,r)=>{if(e.innerType._zod.optin==="optional"){const l=e.innerType._zod.run(s,r);return l instanceof Promise?l.then(o=>e1(o,s.value)):e1(l,s.value)}return s.value===void 0?s:e.innerType._zod.run(s,r)}}),r5=_e("$ZodNullable",(t,e)=>{ds.init(t,e),Pt(t._zod,"optin",()=>e.innerType._zod.optin),Pt(t._zod,"optout",()=>e.innerType._zod.optout),Pt(t._zod,"pattern",()=>{const s=e.innerType._zod.pattern;return s?new RegExp(`^(${Q0(s.source)}|null)$`):void 0}),Pt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(s,r)=>s.value===null?s:e.innerType._zod.run(s,r)}),n5=_e("$ZodDefault",(t,e)=>{ds.init(t,e),t._zod.optin="optional",Pt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(s,r)=>{if(s.value===void 0)return s.value=e.defaultValue,s;const l=e.innerType._zod.run(s,r);return l instanceof Promise?l.then(o=>t1(o,e)):t1(l,e)}});function t1(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const i5=_e("$ZodPrefault",(t,e)=>{ds.init(t,e),t._zod.optin="optional",Pt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(s,r)=>(s.value===void 0&&(s.value=e.defaultValue),e.innerType._zod.run(s,r))}),a5=_e("$ZodNonOptional",(t,e)=>{ds.init(t,e),Pt(t._zod,"values",()=>{const s=e.innerType._zod.values;return s?new Set([...s].filter(r=>r!==void 0)):void 0}),t._zod.parse=(s,r)=>{const l=e.innerType._zod.run(s,r);return l instanceof Promise?l.then(o=>s1(o,t)):s1(l,t)}});function s1(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const l5=_e("$ZodCatch",(t,e)=>{ds.init(t,e),Pt(t._zod,"optin",()=>e.innerType._zod.optin),Pt(t._zod,"optout",()=>e.innerType._zod.optout),Pt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(s,r)=>{const l=e.innerType._zod.run(s,r);return l instanceof Promise?l.then(o=>(s.value=o.value,o.issues.length&&(s.value=e.catchValue({...s,error:{issues:o.issues.map(u=>Ml(u,r,Rl()))},input:s.value}),s.issues=[]),s)):(s.value=l.value,l.issues.length&&(s.value=e.catchValue({...s,error:{issues:l.issues.map(o=>Ml(o,r,Rl()))},input:s.value}),s.issues=[]),s)}}),o5=_e("$ZodPipe",(t,e)=>{ds.init(t,e),Pt(t._zod,"values",()=>e.in._zod.values),Pt(t._zod,"optin",()=>e.in._zod.optin),Pt(t._zod,"optout",()=>e.out._zod.optout),Pt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(s,r)=>{const l=e.in._zod.run(s,r);return l instanceof Promise?l.then(o=>r1(o,e,r)):r1(l,e,r)}});function r1(t,e,s){return t.issues.length?t:e.out._zod.run({value:t.value,issues:t.issues},s)}const c5=_e("$ZodReadonly",(t,e)=>{ds.init(t,e),Pt(t._zod,"propValues",()=>e.innerType._zod.propValues),Pt(t._zod,"values",()=>e.innerType._zod.values),Pt(t._zod,"optin",()=>e.innerType._zod.optin),Pt(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(s,r)=>{const l=e.innerType._zod.run(s,r);return l instanceof Promise?l.then(n1):n1(l)}});function n1(t){return t.value=Object.freeze(t.value),t}const u5=_e("$ZodCustom",(t,e)=>{wr.init(t,e),ds.init(t,e),t._zod.parse=(s,r)=>s,t._zod.check=s=>{const r=s.value,l=e.fn(r);if(l instanceof Promise)return l.then(o=>i1(o,s,r,t));i1(l,s,r,t)}});function i1(t,e,s,r){if(!t){const l={code:"custom",input:s,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(l.params=r._zod.def.params),e.issues.push(Ju(l))}}class d5{constructor(){this._map=new Map,this._idmap=new Map}add(e,...s){const r=s[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const s=this._map.get(e);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(e),this}get(e){const s=e._zod.parent;if(s){const r={...this.get(s)??{}};delete r.id;const l={...r,...this._map.get(e)};return Object.keys(l).length?l:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function h5(){return new d5}const qh=h5();function f5(t,e){return new t({type:"string",...Ze(e)})}function m5(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Ze(e)})}function a1(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Ze(e)})}function p5(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Ze(e)})}function g5(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ze(e)})}function y5(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ze(e)})}function b5(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ze(e)})}function x5(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Ze(e)})}function v5(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Ze(e)})}function w5(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ze(e)})}function _5(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Ze(e)})}function j5(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ze(e)})}function N5(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Ze(e)})}function S5(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Ze(e)})}function E5(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ze(e)})}function A5(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ze(e)})}function C5(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ze(e)})}function k5(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ze(e)})}function T5(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ze(e)})}function O5(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Ze(e)})}function R5(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Ze(e)})}function M5(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Ze(e)})}function D5(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Ze(e)})}function L5(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ze(e)})}function q5(t,e){return new t({type:"string",format:"date",check:"string_format",...Ze(e)})}function P5(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Ze(e)})}function I5(t,e){return new t({type:"string",format:"duration",check:"string_format",...Ze(e)})}function $5(t,e){return new t({type:"number",checks:[],...Ze(e)})}function U5(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...Ze(e)})}function z5(t){return new t({type:"unknown"})}function B5(t,e){return new t({type:"never",...Ze(e)})}function l1(t,e){return new d2({check:"less_than",...Ze(e),value:t,inclusive:!1})}function og(t,e){return new d2({check:"less_than",...Ze(e),value:t,inclusive:!0})}function o1(t,e){return new h2({check:"greater_than",...Ze(e),value:t,inclusive:!1})}function cg(t,e){return new h2({check:"greater_than",...Ze(e),value:t,inclusive:!0})}function c1(t,e){return new o4({check:"multiple_of",...Ze(e),value:t})}function p2(t,e){return new u4({check:"max_length",...Ze(e),maximum:t})}function yf(t,e){return new d4({check:"min_length",...Ze(e),minimum:t})}function g2(t,e){return new h4({check:"length_equals",...Ze(e),length:t})}function F5(t,e){return new f4({check:"string_format",format:"regex",...Ze(e),pattern:t})}function H5(t){return new m4({check:"string_format",format:"lowercase",...Ze(t)})}function V5(t){return new p4({check:"string_format",format:"uppercase",...Ze(t)})}function G5(t,e){return new g4({check:"string_format",format:"includes",...Ze(e),includes:t})}function Z5(t,e){return new y4({check:"string_format",format:"starts_with",...Ze(e),prefix:t})}function Y5(t,e){return new b4({check:"string_format",format:"ends_with",...Ze(e),suffix:t})}function fd(t){return new x4({check:"overwrite",tx:t})}function K5(t){return fd(e=>e.normalize(t))}function W5(){return fd(t=>t.trim())}function Q5(){return fd(t=>t.toLowerCase())}function X5(){return fd(t=>t.toUpperCase())}function J5(t,e,s){return new t({type:"array",element:e,...Ze(s)})}function e6(t,e,s){return new t({type:"custom",check:"custom",fn:e,...Ze(s)})}function t6(t){const e=s6(s=>(s.addIssue=r=>{if(typeof r=="string")s.issues.push(Ju(r,s.value,e._zod.def));else{const l=r;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=s.value),l.inst??(l.inst=e),l.continue??(l.continue=!e._zod.def.abort),s.issues.push(Ju(l))}},t(s.value,s)));return e}function s6(t,e){const s=new wr({check:"custom",...Ze(e)});return s._zod.check=t,s}function u1(t,e){try{var s=t()}catch(r){return e(r)}return s&&s.then?s.then(void 0,e):s}function r6(t,e){for(var s={};t.length;){var r=t[0],l=r.code,o=r.message,u=r.path.join(".");if(!s[u])if("unionErrors"in r){var h=r.unionErrors[0].errors[0];s[u]={message:h.message,type:h.code}}else s[u]={message:o,type:l};if("unionErrors"in r&&r.unionErrors.forEach(function(g){return g.errors.forEach(function(b){return t.push(b)})}),e){var f=s[u].types,p=f&&f[r.code];s[u]=Z0(u,e,s,l,p?[].concat(p,r.message):r.message)}t.shift()}return s}function n6(t,e){for(var s={};t.length;){var r=t[0],l=r.code,o=r.message,u=r.path.join(".");if(!s[u])if(r.code==="invalid_union"&&r.errors.length>0){var h=r.errors[0][0];s[u]={message:h.message,type:h.code}}else s[u]={message:o,type:l};if(r.code==="invalid_union"&&r.errors.forEach(function(g){return g.forEach(function(b){return t.push(b)})}),e){var f=s[u].types,p=f&&f[r.code];s[u]=Z0(u,e,s,l,p?[].concat(p,r.message):r.message)}t.shift()}return s}function md(t,e,s){if(s===void 0&&(s={}),function(r){return"_def"in r&&typeof r._def=="object"&&"typeName"in r._def}(t))return function(r,l,o){try{return Promise.resolve(u1(function(){return Promise.resolve(t[s.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return o.shouldUseNativeValidation&&Vg({},o),{errors:{},values:s.raw?Object.assign({},r):u}})},function(u){if(function(h){return Array.isArray(h?.issues)}(u))return{values:{},errors:Gw(r6(u.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw u}))}catch(u){return Promise.reject(u)}};if(function(r){return"_zod"in r&&typeof r._zod=="object"}(t))return function(r,l,o){try{return Promise.resolve(u1(function(){return Promise.resolve((s.mode==="sync"?RT:MT)(t,r,e)).then(function(u){return o.shouldUseNativeValidation&&Vg({},o),{errors:{},values:s.raw?Object.assign({},r):u}})},function(u){if(function(h){return h instanceof J0}(u))return{values:{},errors:Gw(n6(u.issues,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw u}))}catch(u){return Promise.reject(u)}};throw new Error("Invalid input: not a Zod schema")}const i6=_e("ZodISODateTime",(t,e)=>{M4.init(t,e),Kt.init(t,e)});function a6(t){return L5(i6,t)}const l6=_e("ZodISODate",(t,e)=>{D4.init(t,e),Kt.init(t,e)});function o6(t){return q5(l6,t)}const c6=_e("ZodISOTime",(t,e)=>{L4.init(t,e),Kt.init(t,e)});function u6(t){return P5(c6,t)}const d6=_e("ZodISODuration",(t,e)=>{q4.init(t,e),Kt.init(t,e)});function h6(t){return I5(d6,t)}const f6=(t,e)=>{J0.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:s=>OT(t,s)},flatten:{value:s=>TT(t,s)},addIssue:{value:s=>{t.issues.push(s),t.message=JSON.stringify(t.issues,Gg,2)}},addIssues:{value:s=>{t.issues.push(...s),t.message=JSON.stringify(t.issues,Gg,2)}},isEmpty:{get(){return t.issues.length===0}}})},Hf=_e("ZodError",f6,{Parent:Error}),m6=r2(Hf),p6=n2(Hf),g6=i2(Hf),y6=a2(Hf),Es=_e("ZodType",(t,e)=>(ds.init(t,e),t.def=e,Object.defineProperty(t,"_def",{value:e}),t.check=(...s)=>t.clone({...e,checks:[...e.checks??[],...s.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),t.clone=(s,r)=>Bl(t,s,r),t.brand=()=>t,t.register=(s,r)=>(s.add(t,r),t),t.parse=(s,r)=>m6(t,s,r,{callee:t.parse}),t.safeParse=(s,r)=>g6(t,s,r),t.parseAsync=async(s,r)=>p6(t,s,r,{callee:t.parseAsync}),t.safeParseAsync=async(s,r)=>y6(t,s,r),t.spa=t.safeParseAsync,t.refine=(s,r)=>t.check(o3(s,r)),t.superRefine=s=>t.check(c3(s)),t.overwrite=s=>t.check(fd(s)),t.optional=()=>m1(t),t.nullable=()=>p1(t),t.nullish=()=>m1(p1(t)),t.nonoptional=s=>t3(t,s),t.array=()=>z6(t),t.or=s=>H6([t,s]),t.and=s=>G6(t,s),t.transform=s=>g1(t,K6(s)),t.default=s=>X6(t,s),t.prefault=s=>e3(t,s),t.catch=s=>r3(t,s),t.pipe=s=>g1(t,s),t.readonly=()=>a3(t),t.describe=s=>{const r=t.clone();return qh.add(r,{description:s}),r},Object.defineProperty(t,"description",{get(){return qh.get(t)?.description},configurable:!0}),t.meta=(...s)=>{if(s.length===0)return qh.get(t);const r=t.clone();return qh.add(r,s[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),y2=_e("_ZodString",(t,e)=>{ey.init(t,e),Es.init(t,e);const s=t._zod.bag;t.format=s.format??null,t.minLength=s.minimum??null,t.maxLength=s.maximum??null,t.regex=(...r)=>t.check(F5(...r)),t.includes=(...r)=>t.check(G5(...r)),t.startsWith=(...r)=>t.check(Z5(...r)),t.endsWith=(...r)=>t.check(Y5(...r)),t.min=(...r)=>t.check(yf(...r)),t.max=(...r)=>t.check(p2(...r)),t.length=(...r)=>t.check(g2(...r)),t.nonempty=(...r)=>t.check(yf(1,...r)),t.lowercase=r=>t.check(H5(r)),t.uppercase=r=>t.check(V5(r)),t.trim=()=>t.check(W5()),t.normalize=(...r)=>t.check(K5(...r)),t.toLowerCase=()=>t.check(Q5()),t.toUpperCase=()=>t.check(X5())}),b6=_e("ZodString",(t,e)=>{ey.init(t,e),y2.init(t,e),t.email=s=>t.check(m5(x6,s)),t.url=s=>t.check(x5(v6,s)),t.jwt=s=>t.check(D5(L6,s)),t.emoji=s=>t.check(v5(w6,s)),t.guid=s=>t.check(a1(d1,s)),t.uuid=s=>t.check(p5(Ph,s)),t.uuidv4=s=>t.check(g5(Ph,s)),t.uuidv6=s=>t.check(y5(Ph,s)),t.uuidv7=s=>t.check(b5(Ph,s)),t.nanoid=s=>t.check(w5(_6,s)),t.guid=s=>t.check(a1(d1,s)),t.cuid=s=>t.check(_5(j6,s)),t.cuid2=s=>t.check(j5(N6,s)),t.ulid=s=>t.check(N5(S6,s)),t.base64=s=>t.check(O5(R6,s)),t.base64url=s=>t.check(R5(M6,s)),t.xid=s=>t.check(S5(E6,s)),t.ksuid=s=>t.check(E5(A6,s)),t.ipv4=s=>t.check(A5(C6,s)),t.ipv6=s=>t.check(C5(k6,s)),t.cidrv4=s=>t.check(k5(T6,s)),t.cidrv6=s=>t.check(T5(O6,s)),t.e164=s=>t.check(M5(D6,s)),t.datetime=s=>t.check(a6(s)),t.date=s=>t.check(o6(s)),t.time=s=>t.check(u6(s)),t.duration=s=>t.check(h6(s))});function Zt(t){return f5(b6,t)}const Kt=_e("ZodStringFormat",(t,e)=>{Vt.init(t,e),y2.init(t,e)}),x6=_e("ZodEmail",(t,e)=>{N4.init(t,e),Kt.init(t,e)}),d1=_e("ZodGUID",(t,e)=>{_4.init(t,e),Kt.init(t,e)}),Ph=_e("ZodUUID",(t,e)=>{j4.init(t,e),Kt.init(t,e)}),v6=_e("ZodURL",(t,e)=>{S4.init(t,e),Kt.init(t,e)}),w6=_e("ZodEmoji",(t,e)=>{E4.init(t,e),Kt.init(t,e)}),_6=_e("ZodNanoID",(t,e)=>{A4.init(t,e),Kt.init(t,e)}),j6=_e("ZodCUID",(t,e)=>{C4.init(t,e),Kt.init(t,e)}),N6=_e("ZodCUID2",(t,e)=>{k4.init(t,e),Kt.init(t,e)}),S6=_e("ZodULID",(t,e)=>{T4.init(t,e),Kt.init(t,e)}),E6=_e("ZodXID",(t,e)=>{O4.init(t,e),Kt.init(t,e)}),A6=_e("ZodKSUID",(t,e)=>{R4.init(t,e),Kt.init(t,e)}),C6=_e("ZodIPv4",(t,e)=>{P4.init(t,e),Kt.init(t,e)}),k6=_e("ZodIPv6",(t,e)=>{I4.init(t,e),Kt.init(t,e)}),T6=_e("ZodCIDRv4",(t,e)=>{$4.init(t,e),Kt.init(t,e)}),O6=_e("ZodCIDRv6",(t,e)=>{U4.init(t,e),Kt.init(t,e)}),R6=_e("ZodBase64",(t,e)=>{z4.init(t,e),Kt.init(t,e)}),M6=_e("ZodBase64URL",(t,e)=>{F4.init(t,e),Kt.init(t,e)}),D6=_e("ZodE164",(t,e)=>{H4.init(t,e),Kt.init(t,e)}),L6=_e("ZodJWT",(t,e)=>{G4.init(t,e),Kt.init(t,e)}),b2=_e("ZodNumber",(t,e)=>{m2.init(t,e),Es.init(t,e),t.gt=(r,l)=>t.check(o1(r,l)),t.gte=(r,l)=>t.check(cg(r,l)),t.min=(r,l)=>t.check(cg(r,l)),t.lt=(r,l)=>t.check(l1(r,l)),t.lte=(r,l)=>t.check(og(r,l)),t.max=(r,l)=>t.check(og(r,l)),t.int=r=>t.check(h1(r)),t.safe=r=>t.check(h1(r)),t.positive=r=>t.check(o1(0,r)),t.nonnegative=r=>t.check(cg(0,r)),t.negative=r=>t.check(l1(0,r)),t.nonpositive=r=>t.check(og(0,r)),t.multipleOf=(r,l)=>t.check(c1(r,l)),t.step=(r,l)=>t.check(c1(r,l)),t.finite=()=>t;const s=t._zod.bag;t.minValue=Math.max(s.minimum??Number.NEGATIVE_INFINITY,s.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(s.maximum??Number.POSITIVE_INFINITY,s.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(s.format??"").includes("int")||Number.isSafeInteger(s.multipleOf??.5),t.isFinite=!0,t.format=s.format??null});function of(t){return $5(b2,t)}const q6=_e("ZodNumberFormat",(t,e)=>{Z4.init(t,e),b2.init(t,e)});function h1(t){return U5(q6,t)}const P6=_e("ZodUnknown",(t,e)=>{Y4.init(t,e),Es.init(t,e)});function f1(){return z5(P6)}const I6=_e("ZodNever",(t,e)=>{K4.init(t,e),Es.init(t,e)});function $6(t){return B5(I6,t)}const U6=_e("ZodArray",(t,e)=>{W4.init(t,e),Es.init(t,e),t.element=e.element,t.min=(s,r)=>t.check(yf(s,r)),t.nonempty=s=>t.check(yf(1,s)),t.max=(s,r)=>t.check(p2(s,r)),t.length=(s,r)=>t.check(g2(s,r)),t.unwrap=()=>t.element});function z6(t,e){return J5(U6,t,e)}const B6=_e("ZodObject",(t,e)=>{Q4.init(t,e),Es.init(t,e),Pt(t,"shape",()=>e.shape),t.keyof=()=>Z6(Object.keys(t._zod.def.shape)),t.catchall=s=>t.clone({...t._zod.def,catchall:s}),t.passthrough=()=>t.clone({...t._zod.def,catchall:f1()}),t.loose=()=>t.clone({...t._zod.def,catchall:f1()}),t.strict=()=>t.clone({...t._zod.def,catchall:$6()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=s=>ET(t,s),t.merge=s=>AT(t,s),t.pick=s=>NT(t,s),t.omit=s=>ST(t,s),t.partial=(...s)=>CT(x2,t,s[0]),t.required=(...s)=>kT(v2,t,s[0])});function pd(t,e){const s={type:"object",get shape(){return zl(this,"shape",{...t}),this.shape},...Ze(e)};return new B6(s)}const F6=_e("ZodUnion",(t,e)=>{X4.init(t,e),Es.init(t,e),t.options=e.options});function H6(t,e){return new F6({type:"union",options:t,...Ze(e)})}const V6=_e("ZodIntersection",(t,e)=>{J4.init(t,e),Es.init(t,e)});function G6(t,e){return new V6({type:"intersection",left:t,right:e})}const Wg=_e("ZodEnum",(t,e)=>{e5.init(t,e),Es.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const s=new Set(Object.keys(e.entries));t.extract=(r,l)=>{const o={};for(const u of r)if(s.has(u))o[u]=e.entries[u];else throw new Error(`Key ${u} not found in enum`);return new Wg({...e,checks:[],...Ze(l),entries:o})},t.exclude=(r,l)=>{const o={...e.entries};for(const u of r)if(s.has(u))delete o[u];else throw new Error(`Key ${u} not found in enum`);return new Wg({...e,checks:[],...Ze(l),entries:o})}});function Z6(t,e){const s=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Wg({type:"enum",entries:s,...Ze(e)})}const Y6=_e("ZodTransform",(t,e)=>{t5.init(t,e),Es.init(t,e),t._zod.parse=(s,r)=>{s.addIssue=o=>{if(typeof o=="string")s.issues.push(Ju(o,s.value,e));else{const u=o;u.fatal&&(u.continue=!1),u.code??(u.code="custom"),u.input??(u.input=s.value),u.inst??(u.inst=t),s.issues.push(Ju(u))}};const l=e.transform(s.value,s);return l instanceof Promise?l.then(o=>(s.value=o,s)):(s.value=l,s)}});function K6(t){return new Y6({type:"transform",transform:t})}const x2=_e("ZodOptional",(t,e)=>{s5.init(t,e),Es.init(t,e),t.unwrap=()=>t._zod.def.innerType});function m1(t){return new x2({type:"optional",innerType:t})}const W6=_e("ZodNullable",(t,e)=>{r5.init(t,e),Es.init(t,e),t.unwrap=()=>t._zod.def.innerType});function p1(t){return new W6({type:"nullable",innerType:t})}const Q6=_e("ZodDefault",(t,e)=>{n5.init(t,e),Es.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function X6(t,e){return new Q6({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const J6=_e("ZodPrefault",(t,e)=>{i5.init(t,e),Es.init(t,e),t.unwrap=()=>t._zod.def.innerType});function e3(t,e){return new J6({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const v2=_e("ZodNonOptional",(t,e)=>{a5.init(t,e),Es.init(t,e),t.unwrap=()=>t._zod.def.innerType});function t3(t,e){return new v2({type:"nonoptional",innerType:t,...Ze(e)})}const s3=_e("ZodCatch",(t,e)=>{l5.init(t,e),Es.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function r3(t,e){return new s3({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const n3=_e("ZodPipe",(t,e)=>{o5.init(t,e),Es.init(t,e),t.in=e.in,t.out=e.out});function g1(t,e){return new n3({type:"pipe",in:t,out:e})}const i3=_e("ZodReadonly",(t,e)=>{c5.init(t,e),Es.init(t,e),t.unwrap=()=>t._zod.def.innerType});function a3(t){return new i3({type:"readonly",innerType:t})}const l3=_e("ZodCustom",(t,e)=>{u5.init(t,e),Es.init(t,e)});function o3(t,e={}){return e6(l3,t,e)}function c3(t){return t6(t)}const u3=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>wc(async()=>{const{default:r}=await Promise.resolve().then(()=>jc);return{default:r}},[]).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class ty extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class d3 extends ty{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class y1 extends ty{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class b1 extends ty{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Qg||(Qg={}));var h3=function(t,e,s,r){function l(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{p(r.next(g))}catch(b){u(b)}}function f(g){try{p(r.throw(g))}catch(b){u(b)}}function p(g){g.done?o(g.value):l(g.value).then(h,f)}p((r=r.apply(t,e||[])).next())})};class f3{constructor(e,{headers:s={},customFetch:r,region:l=Qg.Any}={}){this.url=e,this.headers=s,this.region=l,this.fetch=u3(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return h3(this,void 0,void 0,function*(){try{const{headers:l,method:o,body:u}=s;let h={},{region:f}=s;f||(f=this.region);const p=new URL(`${this.url}/${e}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(h["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(h["Content-Type"]="application/json",g=JSON.stringify(u)));const b=yield this.fetch(p.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:g}).catch(j=>{throw new d3(j)}),v=b.headers.get("x-relay-error");if(v&&v==="true")throw new y1(b);if(!b.ok)throw new b1(b);let w=((r=b.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return w==="application/json"?x=yield b.json():w==="application/octet-stream"?x=yield b.blob():w==="text/event-stream"?x=b:w==="multipart/form-data"?x=yield b.formData():x=yield b.text(),{data:x,error:null,response:b}}catch(l){return{data:null,error:l,response:l instanceof b1||l instanceof y1?l.context:void 0}}})}}var Ls={},zo={},Bo={},Fo={},Ho={},Vo={},m3=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},hc=m3();const p3=hc.fetch,w2=hc.fetch.bind(hc),_2=hc.Headers,g3=hc.Request,y3=hc.Response,jc=Object.freeze(Object.defineProperty({__proto__:null,Headers:_2,Request:g3,Response:y3,default:w2,fetch:p3},Symbol.toStringTag,{value:"Module"})),b3=mC(jc);var Ih={},x1;function j2(){if(x1)return Ih;x1=1,Object.defineProperty(Ih,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Ih.default=t,Ih}var v1;function N2(){if(v1)return Vo;v1=1;var t=Vo&&Vo.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Vo,"__esModule",{value:!0});const e=t(b3),s=t(j2());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,u){return this.headers=Object.assign({},this.headers),this.headers[o]=u,this}then(o,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const h=this.fetch;let f=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var g,b,v;let w=null,x=null,j=null,N=p.status,T=p.statusText;if(p.ok){if(this.method!=="HEAD"){const R=await p.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?x=R:x=JSON.parse(R))}const k=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),Z=(b=p.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");k&&Z&&Z.length>1&&(j=parseInt(Z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(w={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,j=null,N=406,T="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const k=await p.text();try{w=JSON.parse(k),Array.isArray(w)&&p.status===404&&(x=[],w=null,N=200,T="OK")}catch{p.status===404&&k===""?(N=204,T="No Content"):w={message:k}}if(w&&this.isMaybeSingle&&(!((v=w?.details)===null||v===void 0)&&v.includes("0 rows"))&&(w=null,N=200,T="OK"),w&&this.shouldThrowOnError)throw new s.default(w)}return{error:w,data:x,count:j,status:N,statusText:T}});return this.shouldThrowOnError||(f=f.catch(p=>{var g,b,v;return{error:{message:`${(g=p?.name)!==null&&g!==void 0?g:"FetchError"}: ${p?.message}`,details:`${(b=p?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(v=p?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),f.then(o,u)}returns(){return this}overrideTypes(){return this}}return Vo.default=r,Vo}var w1;function S2(){if(w1)return Ho;w1=1;var t=Ho&&Ho.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ho,"__esModule",{value:!0});const e=t(N2());class s extends e.default{select(l){let o=!1;const u=(l??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join("");return this.url.searchParams.set("select",u),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(l,{ascending:o=!0,nullsFirst:u,foreignTable:h,referencedTable:f=h}={}){const p=f?`${f}.order`:"order",g=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${g?`${g},`:""}${l}.${o?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:o,referencedTable:u=o}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${l}`),this}range(l,o,{foreignTable:u,referencedTable:h=u}={}){const f=typeof h>"u"?"offset":`${h}.offset`,p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(f,`${l}`),this.url.searchParams.set(p,`${o-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:l=!1,verbose:o=!1,settings:u=!1,buffers:h=!1,wal:f=!1,format:p="text"}={}){var g;const b=[l?"analyze":null,o?"verbose":null,u?"settings":null,h?"buffers":null,f?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${p}; for="${v}"; options=${b};`,p==="json"?this:this}rollback(){var l;return((l=this.headers.Prefer)!==null&&l!==void 0?l:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ho.default=s,Ho}var _1;function sy(){if(_1)return Fo;_1=1;var t=Fo&&Fo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fo,"__esModule",{value:!0});const e=t(S2());class s extends e.default{eq(l,o){return this.url.searchParams.append(l,`eq.${o}`),this}neq(l,o){return this.url.searchParams.append(l,`neq.${o}`),this}gt(l,o){return this.url.searchParams.append(l,`gt.${o}`),this}gte(l,o){return this.url.searchParams.append(l,`gte.${o}`),this}lt(l,o){return this.url.searchParams.append(l,`lt.${o}`),this}lte(l,o){return this.url.searchParams.append(l,`lte.${o}`),this}like(l,o){return this.url.searchParams.append(l,`like.${o}`),this}likeAllOf(l,o){return this.url.searchParams.append(l,`like(all).{${o.join(",")}}`),this}likeAnyOf(l,o){return this.url.searchParams.append(l,`like(any).{${o.join(",")}}`),this}ilike(l,o){return this.url.searchParams.append(l,`ilike.${o}`),this}ilikeAllOf(l,o){return this.url.searchParams.append(l,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(l,o){return this.url.searchParams.append(l,`ilike(any).{${o.join(",")}}`),this}is(l,o){return this.url.searchParams.append(l,`is.${o}`),this}in(l,o){const u=Array.from(new Set(o)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(l,`in.(${u})`),this}contains(l,o){return typeof o=="string"?this.url.searchParams.append(l,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(l,`cs.{${o.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(o)}`),this}containedBy(l,o){return typeof o=="string"?this.url.searchParams.append(l,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(l,`cd.{${o.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(o)}`),this}rangeGt(l,o){return this.url.searchParams.append(l,`sr.${o}`),this}rangeGte(l,o){return this.url.searchParams.append(l,`nxl.${o}`),this}rangeLt(l,o){return this.url.searchParams.append(l,`sl.${o}`),this}rangeLte(l,o){return this.url.searchParams.append(l,`nxr.${o}`),this}rangeAdjacent(l,o){return this.url.searchParams.append(l,`adj.${o}`),this}overlaps(l,o){return typeof o=="string"?this.url.searchParams.append(l,`ov.${o}`):this.url.searchParams.append(l,`ov.{${o.join(",")}}`),this}textSearch(l,o,{config:u,type:h}={}){let f="";h==="plain"?f="pl":h==="phrase"?f="ph":h==="websearch"&&(f="w");const p=u===void 0?"":`(${u})`;return this.url.searchParams.append(l,`${f}fts${p}.${o}`),this}match(l){return Object.entries(l).forEach(([o,u])=>{this.url.searchParams.append(o,`eq.${u}`)}),this}not(l,o,u){return this.url.searchParams.append(l,`not.${o}.${u}`),this}or(l,{foreignTable:o,referencedTable:u=o}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${l})`),this}filter(l,o,u){return this.url.searchParams.append(l,`${o}.${u}`),this}}return Fo.default=s,Fo}var j1;function E2(){if(j1)return Bo;j1=1;var t=Bo&&Bo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bo,"__esModule",{value:!0});const e=t(sy());class s{constructor(l,{headers:o={},schema:u,fetch:h}){this.url=l,this.headers=o,this.schema=u,this.fetch=h}select(l,{head:o=!1,count:u}={}){const h=o?"HEAD":"GET";let f=!1;const p=(l??"*").split("").map(g=>/\s/.test(g)&&!f?"":(g==='"'&&(f=!f),g)).join("");return this.url.searchParams.set("select",p),u&&(this.headers.Prefer=`count=${u}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(l,{count:o,defaultToNull:u=!0}={}){const h="POST",f=[];if(this.headers.Prefer&&f.push(this.headers.Prefer),o&&f.push(`count=${o}`),u||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(l)){const p=l.reduce((g,b)=>g.concat(Object.keys(b)),[]);if(p.length>0){const g=[...new Set(p)].map(b=>`"${b}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}upsert(l,{onConflict:o,ignoreDuplicates:u=!1,count:h,defaultToNull:f=!0}={}){const p="POST",g=[`resolution=${u?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&g.push(this.headers.Prefer),h&&g.push(`count=${h}`),f||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(l)){const b=l.reduce((v,w)=>v.concat(Object.keys(w)),[]);if(b.length>0){const v=[...new Set(b)].map(w=>`"${w}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}update(l,{count:o}={}){const u="PATCH",h=[];return this.headers.Prefer&&h.push(this.headers.Prefer),o&&h.push(`count=${o}`),this.headers.Prefer=h.join(","),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}delete({count:l}={}){const o="DELETE",u=[];return l&&u.push(`count=${l}`),this.headers.Prefer&&u.unshift(this.headers.Prefer),this.headers.Prefer=u.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Bo.default=s,Bo}var Ru={},Mu={},N1;function x3(){return N1||(N1=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.version=void 0,Mu.version="0.0.0-automated"),Mu}var S1;function v3(){if(S1)return Ru;S1=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.DEFAULT_HEADERS=void 0;const t=x3();return Ru.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Ru}var E1;function w3(){if(E1)return zo;E1=1;var t=zo&&zo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(zo,"__esModule",{value:!0});const e=t(E2()),s=t(sy()),r=v3();class l{constructor(u,{headers:h={},schema:f,fetch:p}={}){this.url=u,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),h),this.schemaName=f,this.fetch=p}from(u){const h=new URL(`${this.url}/${u}`);return new e.default(h,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new l(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:f=!1,get:p=!1,count:g}={}){let b;const v=new URL(`${this.url}/rpc/${u}`);let w;f||p?(b=f?"HEAD":"GET",Object.entries(h).filter(([j,N])=>N!==void 0).map(([j,N])=>[j,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([j,N])=>{v.searchParams.append(j,N)})):(b="POST",w=h);const x=Object.assign({},this.headers);return g&&(x.Prefer=`count=${g}`),new s.default({method:b,url:v,headers:x,schema:this.schemaName,body:w,fetch:this.fetch,allowEmpty:!1})}}return zo.default=l,zo}var A1;function _3(){if(A1)return Ls;A1=1;var t=Ls&&Ls.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.PostgrestError=Ls.PostgrestBuilder=Ls.PostgrestTransformBuilder=Ls.PostgrestFilterBuilder=Ls.PostgrestQueryBuilder=Ls.PostgrestClient=void 0;const e=t(w3());Ls.PostgrestClient=e.default;const s=t(E2());Ls.PostgrestQueryBuilder=s.default;const r=t(sy());Ls.PostgrestFilterBuilder=r.default;const l=t(S2());Ls.PostgrestTransformBuilder=l.default;const o=t(N2());Ls.PostgrestBuilder=o.default;const u=t(j2());return Ls.PostgrestError=u.default,Ls.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:o.default,PostgrestError:u.default},Ls}var j3=_3();const N3=od(j3),{PostgrestClient:S3,PostgrestQueryBuilder:hH,PostgrestFilterBuilder:fH,PostgrestTransformBuilder:mH,PostgrestBuilder:pH,PostgrestError:gH}=N3;function E3(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const A3=E3(),C3="2.11.15",k3=`realtime-js/${C3}`,T3="1.0.0",A2=1e4,O3=1e3;var Gu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Gu||(Gu={}));var Xs;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Xs||(Xs={}));var bn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(bn||(bn={}));var Xg;(function(t){t.websocket="websocket"})(Xg||(Xg={}));var kl;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(kl||(kl={}));class R3{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const l=s.getUint8(1),o=s.getUint8(2);let u=this.HEADER_LENGTH+2;const h=r.decode(e.slice(u,u+l));u=u+l;const f=r.decode(e.slice(u,u+o));u=u+o;const p=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{ref:null,topic:h,event:f,payload:p}}}let C2=class{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Lt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Lt||(Lt={}));const C1=(t,e,s={})=>{var r;const l=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,u)=>(o[u]=M3(u,t,e,l),o),{})},M3=(t,e,s,r)=>{const l=e.find(h=>h.name===t),o=l?.type,u=s[t];return o&&!r.includes(o)?k2(o,u):Jg(u)},k2=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return P3(e,s)}switch(t){case Lt.bool:return D3(e);case Lt.float4:case Lt.float8:case Lt.int2:case Lt.int4:case Lt.int8:case Lt.numeric:case Lt.oid:return L3(e);case Lt.json:case Lt.jsonb:return q3(e);case Lt.timestamp:return I3(e);case Lt.abstime:case Lt.date:case Lt.daterange:case Lt.int4range:case Lt.int8range:case Lt.money:case Lt.reltime:case Lt.text:case Lt.time:case Lt.timestamptz:case Lt.timetz:case Lt.tsrange:case Lt.tstzrange:return Jg(e);default:return Jg(e)}},Jg=t=>t,D3=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},L3=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},q3=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},P3=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let o;const u=t.slice(1,s);try{o=JSON.parse("["+u+"]")}catch{o=u?u.split(","):[]}return o.map(h=>k2(e,h))}return t},I3=t=>typeof t=="string"?t.replace(" ","T"):t,T2=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ug{constructor(e,s,r={},l=A2){this.channel=e,this.event=s,this.payload=r,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var k1;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(k1||(k1={}));class Zu{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},l=>{const{onJoin:o,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zu.syncState(this.state,l,o,u),this.pendingDiffs.forEach(f=>{this.state=Zu.syncDiff(this.state,f,o,u)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},l=>{const{onJoin:o,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Zu.syncDiff(this.state,l,o,u),h())}),this.onJoin((l,o,u)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:o,newPresences:u})}),this.onLeave((l,o,u)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:o,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,l){const o=this.cloneDeep(e),u=this.transformState(s),h={},f={};return this.map(o,(p,g)=>{u[p]||(f[p]=g)}),this.map(u,(p,g)=>{const b=o[p];if(b){const v=g.map(N=>N.presence_ref),w=b.map(N=>N.presence_ref),x=g.filter(N=>w.indexOf(N.presence_ref)<0),j=b.filter(N=>v.indexOf(N.presence_ref)<0);x.length>0&&(h[p]=x),j.length>0&&(f[p]=j)}else h[p]=g}),this.syncDiff(o,{joins:h,leaves:f},r,l)}static syncDiff(e,s,r,l){const{joins:o,leaves:u}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),l||(l=()=>{}),this.map(o,(h,f)=>{var p;const g=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(f),g.length>0){const b=e[h].map(w=>w.presence_ref),v=g.filter(w=>b.indexOf(w.presence_ref)<0);e[h].unshift(...v)}r(h,g,f)}),this.map(u,(h,f)=>{let p=e[h];if(!p)return;const g=f.map(b=>b.presence_ref);p=p.filter(b=>g.indexOf(b.presence_ref)<0),e[h]=p,l(h,p,f),p.length===0&&delete e[h]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const l=e[r];return"metas"in l?s[r]=l.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[r]=l,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var T1;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(T1||(T1={}));var O1;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(O1||(O1={}));var qi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(qi||(qi={}));class ry{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=Xs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new ug(this,bn.join,this.params,this.timeout),this.rejoinTimer=new C2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xs.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Xs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bn.reply,{},(l,o)=>{this._trigger(this._replyEventName(o),l)}),this.presence=new Zu(this),this.broadcastEndpointURL=T2(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var r,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Xs.closed){const{config:{broadcast:o,presence:u,private:h}}=this.params;this._onError(g=>e?.(qi.CHANNEL_ERROR,g)),this._onClose(()=>e?.(qi.CLOSED));const f={},p={broadcast:o,presence:u,postgres_changes:(l=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&l!==void 0?l:[],private:h};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:g})=>{var b;if(this.socket.setAuth(),g===void 0){e?.(qi.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,w=(b=v?.length)!==null&&b!==void 0?b:0,x=[];for(let j=0;j<w;j++){const N=v[j],{filter:{event:T,schema:S,table:k,filter:Z}}=N,R=g&&g[j];if(R&&R.event===T&&R.schema===S&&R.table===k&&R.filter===Z)x.push(Object.assign(Object.assign({},N),{id:R.id}));else{this.unsubscribe(),this.state=Xs.errored,e?.(qi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(qi.SUBSCRIBED);return}}).receive("error",g=>{this.state=Xs.errored,e?.(qi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e?.(qi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,l;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:u}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((l=p.body)===null||l===void 0?void 0:l.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var u,h,f;const p=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Xs.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(l=>{r=new ug(this,bn.leave,{},e),r.receive("ok",()=>{s(),l("ok")}).receive("timeout",()=>{s(),l("timed out")}).receive("error",()=>{l("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,r){const l=new AbortController,o=setTimeout(()=>l.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:l.signal}));return clearTimeout(o),u}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new ug(this,e,s,r);return this._canPush()?l.send():(l.startTimeout(),this.pushBuffer.push(l)),l}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var l,o;const u=e.toLocaleLowerCase(),{close:h,error:f,leave:p,join:g}=bn;if(r&&[h,f,p,g].indexOf(u)>=0&&r!==this._joinRef())return;let v=this._onMessage(u,s,r);if(s&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(w=>{var x,j,N;return((x=w.filter)===null||x===void 0?void 0:x.event)==="*"||((N=(j=w.filter)===null||j===void 0?void 0:j.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===u}).map(w=>w.callback(v,r)):(o=this.bindings[u])===null||o===void 0||o.filter(w=>{var x,j,N,T,S,k;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const Z=w.id,R=(x=w.filter)===null||x===void 0?void 0:x.event;return Z&&((j=s.ids)===null||j===void 0?void 0:j.includes(Z))&&(R==="*"||R?.toLocaleLowerCase()===((N=s.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const Z=(S=(T=w?.filter)===null||T===void 0?void 0:T.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return Z==="*"||Z===((k=s?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof v=="object"&&"ids"in v){const x=v.data,{schema:j,table:N,commit_timestamp:T,type:S,errors:k}=x;v=Object.assign(Object.assign({},{schema:j,table:N,commit_timestamp:T,eventType:S,new:{},old:{},errors:k}),this._getPayloadRecords(x))}w.callback(v,r)})}_isClosed(){return this.state===Xs.closed}_isJoined(){return this.state===Xs.joined}_isJoining(){return this.state===Xs.joining}_isLeaving(){return this.state===Xs.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const l=e.toLocaleLowerCase(),o={type:l,filter:s,callback:r};return this.bindings[l]?this.bindings[l].push(o):this.bindings[l]=[o],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(l=>{var o;return!(((o=l.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&ry.isEqual(l.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(bn.close,{},e)}_onError(e){this._on(bn.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xs.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=C1(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=C1(e.columns,e.old_record)),s}}const R1=()=>{},$3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class U3{constructor(e,s){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=A2,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=R1,this.ref=0,this.logger=R1,this.conn=null,this.sendBuffer=[],this.serializer=new R3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let u;return o?u=o:typeof fetch>"u"?u=(...h)=>wc(async()=>{const{default:f}=await Promise.resolve().then(()=>jc);return{default:f}},void 0).then(({default:f})=>f(...h)):u=fetch,(...h)=>u(...h)},this.endPoint=`${e}/${Xg.websocket}`,this.httpEndpoint=T2(e),s?.transport?this.transport=s.transport:this.transport=null,s?.params&&(this.params=s.params),s?.timeout&&(this.timeout=s.timeout),s?.logger&&(this.logger=s.logger),(s?.logLevel||s?.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const l=(r=s?.params)===null||r===void 0?void 0:r.apikey;if(l&&(this.accessTokenValue=l,this.apiKey=l),this.reconnectAfterMs=s?.reconnectAfterMs?s.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=s?.encode?s.encode:(o,u)=>u(JSON.stringify(o)),this.decode=s?.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new C2(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s?.fetch),s?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=s?.worker||!1,this.workerUrl=s?.workerUrl}this.accessToken=s?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=A3),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:T3}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Gu.connecting:return kl.Connecting;case Gu.open:return kl.Open;case Gu.closing:return kl.Closing;default:return kl.Closed}}isConnected(){return this.connectionState()===kl.Open}channel(e,s={config:{}}){const r=`realtime:${e}`,l=this.getChannels().find(o=>o.topic===r);if(l)return l;{const o=new ry(`realtime:${e}`,s,this);return this.channels.push(o),o}}push(e){const{topic:s,event:r,payload:l,ref:o}=e,u=()=>{this.encode(e,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${s} ${r} (${o})`,l),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{const l={access_token:s,version:k3};s&&r.updateJoinPayload(l),r.joinedOnce&&r._isJoined()&&r._push(bn.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(O3,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:l,payload:o,ref:u}=s;r==="phoenix"&&l==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),u&&u===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${l} ${u&&"("+u+")"||""}`,o),Array.from(this.channels).filter(h=>h._isMember(r)).forEach(h=>h._trigger(l,o,u)),this.stateChangeCallbacks.message.forEach(h=>h(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(bn.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",l=new URLSearchParams(s);return`${e}${r}${l}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([$3],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}}class ny extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ps(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class z3 extends ny{constructor(e,s,r){super(e),this.name="StorageApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class e0 extends ny{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var B3=function(t,e,s,r){function l(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{p(r.next(g))}catch(b){u(b)}}function f(g){try{p(r.throw(g))}catch(b){u(b)}}function p(g){g.done?o(g.value):l(g.value).then(h,f)}p((r=r.apply(t,e||[])).next())})};const O2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>wc(async()=>{const{default:r}=await Promise.resolve().then(()=>jc);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},F3=()=>B3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wc(()=>Promise.resolve().then(()=>jc),void 0)).Response:Response}),t0=t=>{if(Array.isArray(t))return t.map(s=>t0(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const l=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[l]=t0(r)}),e},H3=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Fl=function(t,e,s,r){function l(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{p(r.next(g))}catch(b){u(b)}}function f(g){try{p(r.throw(g))}catch(b){u(b)}}function p(g){g.done?o(g.value):l(g.value).then(h,f)}p((r=r.apply(t,e||[])).next())})};const dg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),V3=(t,e,s)=>Fl(void 0,void 0,void 0,function*(){const r=yield F3();t instanceof r&&!s?.noResolveJson?t.json().then(l=>{const o=t.status||500,u=l?.statusCode||o+"";e(new z3(dg(l),o,u))}).catch(l=>{e(new e0(dg(l),l))}):e(new e0(dg(t),t))}),G3=(t,e,s,r)=>{const l={method:t,headers:e?.headers||{}};return t==="GET"||!r?l:(H3(r)?(l.headers=Object.assign({"Content-Type":"application/json"},e?.headers),l.body=JSON.stringify(r)):l.body=r,Object.assign(Object.assign({},l),s))};function gd(t,e,s,r,l,o){return Fl(this,void 0,void 0,function*(){return new Promise((u,h)=>{t(s,G3(e,r,l,o)).then(f=>{if(!f.ok)throw f;return r?.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>V3(f,h,r))})})}function bf(t,e,s,r){return Fl(this,void 0,void 0,function*(){return gd(t,"GET",e,s,r)})}function Pi(t,e,s,r,l){return Fl(this,void 0,void 0,function*(){return gd(t,"POST",e,r,l,s)})}function s0(t,e,s,r,l){return Fl(this,void 0,void 0,function*(){return gd(t,"PUT",e,r,l,s)})}function Z3(t,e,s,r){return Fl(this,void 0,void 0,function*(){return gd(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function R2(t,e,s,r,l){return Fl(this,void 0,void 0,function*(){return gd(t,"DELETE",e,r,l,s)})}var br=function(t,e,s,r){function l(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{p(r.next(g))}catch(b){u(b)}}function f(g){try{p(r.throw(g))}catch(b){u(b)}}function p(g){g.done?o(g.value):l(g.value).then(h,f)}p((r=r.apply(t,e||[])).next())})};const Y3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},M1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class K3{constructor(e,s={},r,l){this.url=e,this.headers=s,this.bucketId=r,this.fetch=O2(l)}uploadOrUpdate(e,s,r,l){return br(this,void 0,void 0,function*(){try{let o;const u=Object.assign(Object.assign({},M1),l);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",u.cacheControl),f&&o.append("metadata",this.encodeMetadata(f))):(o=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,f&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),l?.headers&&(h=Object.assign(Object.assign({},h),l.headers));const p=this._removeEmptyFolders(s),g=this._getFinalPath(p),b=yield(e=="PUT"?s0:Pi)(this.fetch,`${this.url}/object/${g}`,o,Object.assign({headers:h},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:b.Id,fullPath:b.Key},error:null}}catch(o){if(Ps(o))return{data:null,error:o};throw o}})}upload(e,s,r){return br(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,l){return br(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),u=this._getFinalPath(o),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",s);try{let f;const p=Object.assign({upsert:M1.upsert},l),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",p.cacheControl)):(f=r,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const b=yield s0(this.fetch,h.toString(),f,{headers:g});return{data:{path:o,fullPath:b.Key},error:null}}catch(f){if(Ps(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,s){return br(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const l=Object.assign({},this.headers);s?.upsert&&(l["x-upsert"]="true");const o=yield Pi(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:l}),u=new URL(this.url+o.url),h=u.searchParams.get("token");if(!h)throw new ny("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:h},error:null}}catch(r){if(Ps(r))return{data:null,error:r};throw r}})}update(e,s,r){return br(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return br(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(Ps(l))return{data:null,error:l};throw l}})}copy(e,s,r){return br(this,void 0,void 0,function*(){try{return{data:{path:(yield Pi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(Ps(l))return{data:null,error:l};throw l}})}createSignedUrl(e,s,r){return br(this,void 0,void 0,function*(){try{let l=this._getFinalPath(e),o=yield Pi(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:s},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${u}`)},{data:o,error:null}}catch(l){if(Ps(l))return{data:null,error:l};throw l}})}createSignedUrls(e,s,r){return br(this,void 0,void 0,function*(){try{const l=yield Pi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:l.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${o}`):null})),error:null}}catch(l){if(Ps(l))return{data:null,error:l};throw l}})}download(e,s){return br(this,void 0,void 0,function*(){const l=typeof s?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(s?.transform||{}),u=o?`?${o}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield bf(this.fetch,`${this.url}/${l}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(Ps(h))return{data:null,error:h};throw h}})}info(e){return br(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield bf(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:t0(r),error:null}}catch(r){if(Ps(r))return{data:null,error:r};throw r}})}exists(e){return br(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield Z3(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ps(r)&&r instanceof e0){const l=r.originalError;if([400,404].includes(l?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),l=[],o=s?.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&l.push(o);const h=typeof s?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(s?.transform||{});f!==""&&l.push(f);let p=l.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${p}`)}}}remove(e){return br(this,void 0,void 0,function*(){try{return{data:yield R2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ps(s))return{data:null,error:s};throw s}})}list(e,s,r){return br(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},Y3),s),{prefix:e||""});return{data:yield Pi(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},r),error:null}}catch(l){if(Ps(l))return{data:null,error:l};throw l}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const W3="2.10.4",Q3={"X-Client-Info":`storage-js/${W3}`};var Go=function(t,e,s,r){function l(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{p(r.next(g))}catch(b){u(b)}}function f(g){try{p(r.throw(g))}catch(b){u(b)}}function p(g){g.done?o(g.value):l(g.value).then(h,f)}p((r=r.apply(t,e||[])).next())})};class X3{constructor(e,s={},r,l){const o=new URL(e);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},Q3),s),this.fetch=O2(r)}listBuckets(){return Go(this,void 0,void 0,function*(){try{return{data:yield bf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ps(e))return{data:null,error:e};throw e}})}getBucket(e){return Go(this,void 0,void 0,function*(){try{return{data:yield bf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ps(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Go(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ps(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Go(this,void 0,void 0,function*(){try{return{data:yield s0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ps(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Go(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ps(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Go(this,void 0,void 0,function*(){try{return{data:yield R2(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ps(s))return{data:null,error:s};throw s}})}}class J3 extends X3{constructor(e,s={},r,l){super(e,s,r,l)}from(e){return new K3(this.url,this.headers,e,this.fetch)}}const eO="2.53.0";let $u="";typeof Deno<"u"?$u="deno":typeof document<"u"?$u="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$u="react-native":$u="node";const tO={"X-Client-Info":`supabase-js-${$u}/${eO}`},sO={headers:tO},rO={schema:"public"},nO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iO={};var aO=function(t,e,s,r){function l(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{p(r.next(g))}catch(b){u(b)}}function f(g){try{p(r.throw(g))}catch(b){u(b)}}function p(g){g.done?o(g.value):l(g.value).then(h,f)}p((r=r.apply(t,e||[])).next())})};const lO=t=>{let e;return t?e=t:typeof fetch>"u"?e=w2:e=fetch,(...s)=>e(...s)},oO=()=>typeof Headers>"u"?_2:Headers,cO=(t,e,s)=>{const r=lO(s),l=oO();return(o,u)=>aO(void 0,void 0,void 0,function*(){var h;const f=(h=yield e())!==null&&h!==void 0?h:t;let p=new l(u?.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),r(o,Object.assign(Object.assign({},u),{headers:p}))})};var uO=function(t,e,s,r){function l(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{p(r.next(g))}catch(b){u(b)}}function f(g){try{p(r.throw(g))}catch(b){u(b)}}function p(g){g.done?o(g.value):l(g.value).then(h,f)}p((r=r.apply(t,e||[])).next())})};function dO(t){return t.endsWith("/")?t:t+"/"}function hO(t,e){var s,r;const{db:l,auth:o,realtime:u,global:h}=t,{db:f,auth:p,realtime:g,global:b}=e,v={db:Object.assign(Object.assign({},f),l),auth:Object.assign(Object.assign({},p),o),realtime:Object.assign(Object.assign({},g),u),storage:{},global:Object.assign(Object.assign(Object.assign({},b),h),{headers:Object.assign(Object.assign({},(s=b?.headers)!==null&&s!==void 0?s:{}),(r=h?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>uO(this,void 0,void 0,function*(){return""})};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}const M2="2.71.1",ec=30*1e3,r0=3,hg=r0*ec,fO="http://localhost:9999",mO="supabase.auth.token",pO={"X-Client-Info":`gotrue-js/${M2}`},n0="X-Supabase-Api-Version",D2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,yO=600*1e3;class iy extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function rt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class bO extends iy{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function xO(t){return rt(t)&&t.name==="AuthApiError"}class L2 extends iy{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Za extends iy{constructor(e,s,r,l){super(e,r,l),this.name=s,this.status=r}}class Ra extends Za{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function vO(t){return rt(t)&&t.name==="AuthSessionMissingError"}class $h extends Za{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Uh extends Za{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class zh extends Za{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function wO(t){return rt(t)&&t.name==="AuthImplicitGrantRedirectError"}class D1 extends Za{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class i0 extends Za{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function fg(t){return rt(t)&&t.name==="AuthRetryableFetchError"}class L1 extends Za{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class a0 extends Za{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const xf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),q1=` 	
\r=`.split(""),_O=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<q1.length;e+=1)t[q1[e].charCodeAt(0)]=-2;for(let e=0;e<xf.length;e+=1)t[xf[e].charCodeAt(0)]=e;return t})();function P1(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(xf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(xf[r]),e.queuedBits-=6}}function q2(t,e,s){const r=_O[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function I1(t){const e=[],s=u=>{e.push(String.fromCodePoint(u))},r={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},o=u=>{SO(u,r,s)};for(let u=0;u<t.length;u+=1)q2(t.charCodeAt(u),l,o);return e.join("")}function jO(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function NO(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const l=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|l)+65536,s+=1}jO(r,e)}}function SO(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function EO(t){const e=[],s={queue:0,queuedBits:0},r=l=>{e.push(l)};for(let l=0;l<t.length;l+=1)q2(t.charCodeAt(l),s,r);return new Uint8Array(e)}function AO(t){const e=[];return NO(t,s=>e.push(s)),new Uint8Array(e)}function CO(t){const e=[],s={queue:0,queuedBits:0},r=l=>{e.push(l)};return t.forEach(l=>P1(l,s,r)),P1(null,s,r),e.join("")}function kO(t){return Math.round(Date.now()/1e3)+t}function TO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const yn=()=>typeof window<"u"&&typeof document<"u",_l={tested:!1,writable:!1},P2=()=>{if(!yn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_l.tested)return _l.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),_l.tested=!0,_l.writable=!0}catch{_l.tested=!0,_l.writable=!1}return _l.writable};function OO(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((l,o)=>{e[o]=l})}catch{}return s.searchParams.forEach((r,l)=>{e[l]=r}),e}const I2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>wc(async()=>{const{default:r}=await Promise.resolve().then(()=>jc);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},RO=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",tc=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},jl=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Aa=async(t,e)=>{await t.removeItem(e)};class Vf{constructor(){this.promise=new Vf.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Vf.promiseConstructor=Promise;function mg(t){const e=t.split(".");if(e.length!==3)throw new a0("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!gO.test(e[r]))throw new a0("JWT not in base64url format");return{header:JSON.parse(I1(e[0])),payload:JSON.parse(I1(e[1])),signature:EO(e[2]),raw:{header:e[0],payload:e[1]}}}async function MO(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function DO(t,e){return new Promise((r,l)=>{(async()=>{for(let o=0;o<1/0;o++)try{const u=await t(o);if(!e(o,null,u)){r(u);return}}catch(u){if(!e(o,u)){l(u);return}}})()})}function LO(t){return("0"+t.toString(16)).substr(-2)}function qO(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let l="";for(let o=0;o<56;o++)l+=s.charAt(Math.floor(Math.random()*r));return l}return crypto.getRandomValues(e),Array.from(e,LO).join("")}async function PO(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),l=new Uint8Array(r);return Array.from(l).map(o=>String.fromCharCode(o)).join("")}async function IO(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await PO(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zo(t,e,s=!1){const r=qO();let l=r;s&&(l+="/PASSWORD_RECOVERY"),await tc(t,`${e}-code-verifier`,l);const o=await IO(r);return[o,r===o?"plain":"s256"]}const $O=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function UO(t){const e=t.headers.get(n0);if(!e||!e.match($O))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function zO(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function BO(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const FO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yo(t){if(!FO.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function pg(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function $1(t){return JSON.parse(JSON.stringify(t))}var HO=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(t);l<r.length;l++)e.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(t,r[l])&&(s[r[l]]=t[r[l]]);return s};const Al=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),VO=[502,503,504];async function U1(t){var e;if(!RO(t))throw new i0(Al(t),0);if(VO.includes(t.status))throw new i0(Al(t),t.status);let s;try{s=await t.json()}catch(o){throw new L2(Al(o),o)}let r;const l=UO(t);if(l&&l.getTime()>=D2["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new L1(Al(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ra}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,u)=>o&&typeof u=="string",!0))throw new L1(Al(s),t.status,s.weak_password.reasons);throw new bO(Al(s),t.status||500,r)}const GO=(t,e,s,r)=>{const l={method:t,headers:e?.headers||{}};return t==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),l.body=JSON.stringify(r),Object.assign(Object.assign({},l),s))};async function ht(t,e,s,r){var l;const o=Object.assign({},r?.headers);o[n0]||(o[n0]=D2["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const u=(l=r?.query)!==null&&l!==void 0?l:{};r?.redirectTo&&(u.redirect_to=r.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await ZO(t,e,s+h,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(f):{data:Object.assign({},f),error:null}}async function ZO(t,e,s,r,l,o){const u=GO(e,r,l,o);let h;try{h=await t(s,Object.assign({},u))}catch(f){throw console.error(f),new i0(Al(f),0)}if(h.ok||await U1(h),r?.noResolveJson)return h;try{return await h.json()}catch(f){await U1(f)}}function Li(t){var e;let s=null;QO(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=kO(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function z1(t){const e=Li(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function La(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function YO(t){return{data:t,error:null}}function KO(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:l,verification_type:o}=t,u=HO(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:s,hashed_token:r,redirect_to:l,verification_type:o},f=Object.assign({},u);return{data:{properties:h,user:f},error:null}}function WO(t){return t}function QO(t){return t.access_token&&t.refresh_token&&t.expires_in}const gg=["global","local","others"];var XO=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(t);l<r.length;l++)e.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(t,r[l])&&(s[r[l]]=t[r[l]]);return s};class JO{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=I2(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=gg[0]){if(gg.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${gg.join(", ")}`);try{return await ht(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await ht(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:La})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=XO(e,["options"]),l=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(l.new_email=r?.newEmail,delete l.newEmail),await ht(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:KO,redirectTo:s?.redirectTo})}catch(s){if(rt(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await ht(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:La})}catch(s){if(rt(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,l,o,u,h,f;try{const p={nextPage:null,lastPage:0,total:0},g=await ht(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e?.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(o=(l=e?.perPage)===null||l===void 0?void 0:l.toString())!==null&&o!==void 0?o:""},xform:WO});if(g.error)throw g.error;const b=await g.json(),v=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(f=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return w.length>0&&(w.forEach(x=>{const j=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(x.split(";")[1].split("=")[1]);p[`${N}Page`]=j}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},b),p),error:null}}catch(p){if(rt(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Yo(e);try{return await ht(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:La})}catch(s){if(rt(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Yo(e);try{return await ht(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:La})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){Yo(e);try{return await ht(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:La})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Yo(e.userId);try{const{data:s,error:r}=await ht(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:s,error:r}}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Yo(e.userId),Yo(e.id);try{return{data:await ht(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}}}function B1(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function eR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ko={debug:!!(globalThis&&P2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class tR extends $2{}async function sR(t,e,s){Ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ko.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async l=>{if(l){Ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,l.name);try{return await s()}finally{Ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,l.name)}}else{if(e===0)throw Ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new tR(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ko.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}eR();const rR={url:fO,storageKey:mO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function F1(t,e,s){return await s()}const Wo={};class ed{constructor(e){var s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ed.nextInstanceID,ed.nextInstanceID+=1,this.instanceID>0&&yn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},rR),e);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new JO({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=I2(l.fetch),this.lock=l.lock||F1,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:yn()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=sR:this.lock=F1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:P2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=B1(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=B1(this.memoryStorage)),yn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Wo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Wo[this.storageKey]=Object.assign(Object.assign({},Wo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Wo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Wo[this.storageKey]=Object.assign(Object.assign({},Wo[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${M2}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=OO(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),yn()&&this.detectSessionInUrl&&r!=="none"){const{data:l,error:o}=await this._getSessionFromURL(s,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),wO(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:u,redirectType:h}=l;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return rt(s)?{error:s}:{error:new L2("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,l;try{const o=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e?.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(l=e?.options)===null||l===void 0?void 0:l.captchaToken}},xform:Li}),{data:u,error:h}=o;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(rt(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var s,r,l;try{let o;if("email"in e){const{email:g,password:b,options:v}=e;let w=null,x=null;this.flowType==="pkce"&&([w,x]=await Zo(this.storage,this.storageKey)),o=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:g,password:b,data:(s=v?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:w,code_challenge_method:x},xform:Li})}else if("phone"in e){const{phone:g,password:b,options:v}=e;o=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:b,data:(r=v?.data)!==null&&r!==void 0?r:{},channel:(l=v?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Li})}else throw new Uh("You must provide either an email or phone number and a password");const{data:u,error:h}=o;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(rt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let s;if("email"in e){const{email:o,password:u,options:h}=e;s=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:z1})}else if("phone"in e){const{phone:o,password:u,options:h}=e;s=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:z1})}else throw new Uh("You must provide either an email or phone number and a password");const{data:r,error:l}=s;return l?{data:{user:null,session:null},error:l}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new $h}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:l})}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,l,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,r,l,o,u,h,f,p,g,b,v,w;let x,j;if("message"in e)x=e.message,j=e.signature;else{const{chain:N,wallet:T,statement:S,options:k}=e;let Z;if(yn())if(typeof T=="object")Z=T;else{const U=window;if("solana"in U&&typeof U.solana=="object"&&("signIn"in U.solana&&typeof U.solana.signIn=="function"||"signMessage"in U.solana&&typeof U.solana.signMessage=="function"))Z=U.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Z=T}const R=new URL((s=k?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in Z&&Z.signIn){const U=await Z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k?.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),S?{statement:S}:null));let B;if(Array.isArray(U)&&U[0]&&typeof U[0]=="object")B=U[0];else if(U&&typeof U=="object"&&"signedMessage"in U&&"signature"in U)B=U;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)x=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),j=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Z)||typeof Z.signMessage!="function"||!("publicKey"in Z)||typeof Z!="object"||!Z.publicKey||!("toBase58"in Z.publicKey)||typeof Z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${R.host} wants you to sign in with your Solana account:`,Z.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(l=(r=k?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((o=k?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((u=k?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((h=k?.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((f=k?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((p=k?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((b=(g=k?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||b===void 0)&&b.length?["Resources",...k.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const U=await Z.signMessage(new TextEncoder().encode(x),"utf8");if(!U||!(U instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=U}}try{const{data:N,error:T}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:CO(j)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Li});if(T)throw T;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new $h}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:T})}catch(N){if(rt(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const s=await jl(this.storage,`${this.storageKey}-code-verifier`),[r,l]=(s??"").split("/");try{const{data:o,error:u}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Li});if(await Aa(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new $h}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:l??null}),error:u})}catch(o){if(rt(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:s,provider:r,token:l,access_token:o,nonce:u}=e,h=await ht(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:l,access_token:o,nonce:u,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Li}),{data:f,error:p}=h;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new $h}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:p})}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,l,o,u;try{if("email"in e){const{email:h,options:f}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Zo(this.storage,this.storageKey));const{error:b}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(s=f?.data)!==null&&s!==void 0?s:{},create_user:(r=f?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in e){const{phone:h,options:f}=e,{data:p,error:g}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(l=f?.data)!==null&&l!==void 0?l:{},create_user:(o=f?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(u=f?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:g}}throw new Uh("You must provide either an email or phone number.")}catch(h){if(rt(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var s,r;try{let l,o;"options"in e&&(l=(s=e.options)===null||s===void 0?void 0:s.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:h}=await ht(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:l,xform:Li});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,p=u.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(l){if(rt(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(e){var s,r,l;try{let o=null,u=null;return this.flowType==="pkce"&&([o,u]=await Zo(this.storage,this.storageKey)),await ht(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((l=e?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:u}),headers:this.headers,xform:YO})}catch(o){if(rt(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Ra;const{error:l}=await ht(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:l}})}catch(e){if(rt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:l,options:o}=e,{error:u}=await ht(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:l,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:r,type:l,options:o}=e,{data:u,error:h}=await ht(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:l,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:h}}throw new Uh("You must provide either an email or phone number and a type")}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await jl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<hg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const u=await jl(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=pg()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,p,g)=>(!u&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,p,g))})}return{data:{session:e},error:null}}const{session:l,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:La}):await this._useSession(async s=>{var r,l,o;const{data:u,error:h}=s;if(h)throw h;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ra}:await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&o!==void 0?o:void 0,xform:La})})}catch(s){if(rt(s))return vO(s)&&(await this._removeSession(),await Aa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:l,error:o}=r;if(o)throw o;if(!l.session)throw new Ra;const u=l.session;let h=null,f=null;this.flowType==="pkce"&&e.email!=null&&([h,f]=await Zo(this.storage,this.storageKey));const{data:p,error:g}=await ht(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:f}),jwt:u.access_token,xform:La});if(g)throw g;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ra;const s=Date.now()/1e3;let r=s,l=!0,o=null;const{payload:u}=mg(e.access_token);if(u.exp&&(r=u.exp,l=r<=s),l){const{session:h,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!h)return{data:{user:null,session:null},error:null};o=h}else{const{data:h,error:f}=await this._getUser(e.access_token);if(f)throw f;o={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(rt(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:u,error:h}=s;if(h)throw h;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Ra;const{session:l,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!yn())throw new zh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new zh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new D1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zh("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new D1("No code detected.");const{data:S,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const Z=new URL(window.location.href);return Z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Z.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:l,access_token:o,refresh_token:u,expires_in:h,expires_at:f,token_type:p}=e;if(!o||!h||!u||!p)throw new zh("No session defined in URL");const g=Math.round(Date.now()/1e3),b=parseInt(h);let v=g+b;f&&(v=parseInt(f));const w=v-g;w*1e3<=ec&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${b}s`);const x=v-b;g-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,v,g):g-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,v,g);const{data:j,error:N}=await this._getUser(o);if(N)throw N;const T={provider_token:r,provider_refresh_token:l,access_token:o,expires_in:b,expires_at:v,refresh_token:u,token_type:p,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:e.type},error:null}}catch(r){if(rt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await jl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:l,error:o}=s;if(o)return{error:o};const u=(r=l.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(xO(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await Aa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=TO(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,l;try{const{data:{session:o},error:u}=s;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((l=this.stateChangeEmitters.get(e))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,s={}){let r=null,l=null;this.flowType==="pkce"&&([r,l]=await Zo(this.storage,this.storageKey,!0));try{return await ht(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:l,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(rt(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:l}=await this._useSession(async o=>{var u,h,f,p,g;const{data:b,error:v}=o;if(v)throw v;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await ht(this.fetch,"GET",w,{headers:this.headers,jwt:(g=(p=b.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(l)throw l;return yn()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(rt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,l;const{data:o,error:u}=s;if(u)throw u;return await ht(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(l=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0})})}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await DO(async l=>(l>0&&await MO(200*Math.pow(2,l-1)),this._debug(s,"refreshing attempt",l),await ht(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Li})),(l,o)=>{const u=200*Math.pow(2,l);return o&&fg(o)&&Date.now()+u-r<ec})}catch(r){if(this._debug(s,"error",r),rt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),yn()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const l=await jl(this.storage,this.storageKey);if(l&&this.userStorage){let u=await jl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:l.user},await tc(this.userStorage,this.storageKey+"-user",u)),l.user=(e=u?.user)!==null&&e!==void 0?e:pg()}else if(l&&!l.user&&!l.user){const u=await jl(this.storage,this.storageKey+"-user");u&&u?.user?(l.user=u.user,await Aa(this.storage,this.storageKey+"-user"),await tc(this.storage,this.storageKey,l)):l.user=pg()}if(this._debug(r,"session from storage",l),!this._isValidSession(l)){this._debug(r,"session is not valid"),l!==null&&await this._removeSession();return}const o=((s=l.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<hg;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${hg}s`),o){if(this.autoRefreshToken&&l.refresh_token){const{error:u}=await this._callRefreshToken(l.refresh_token);u&&(console.error(u),fg(u)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(l.access_token);!h&&u?.user?(l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(r,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(r,"error",l),console.error(l);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Ra;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Vf;const{data:o,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!o.session)throw new Ra;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const h={session:o.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(o){if(this._debug(l,"error",o),rt(o)){const u={session:null,error:o};return fg(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(e,s,r=!0){const l=`#_notifyAllSubscribers(${e})`;this._debug(l,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const o=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,s)}catch(f){o.push(f)}});if(await Promise.all(u),o.length>0){for(let h=0;h<o.length;h+=1)console.error(o[h]);throw o[0]}}finally{this._debug(l,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await tc(this.userStorage,this.storageKey+"-user",{user:s.user});const l=Object.assign({},s);delete l.user;const o=$1(l);await tc(this.storage,this.storageKey,o)}else{const l=$1(s);await tc(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await Aa(this.storage,this.storageKey),await Aa(this.storage,this.storageKey+"-code-verifier"),await Aa(this.storage,this.storageKey+"-user"),this.userStorage&&await Aa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&yn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ec);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((r.expires_at*1e3-e)/ec);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${ec}ms, refresh threshold is ${r0} ticks`),l<=r0&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof $2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const l=[`provider=${encodeURIComponent(s)}`];if(r?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&l.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,u]=await Zo(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(u)}`});l.push(h.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);l.push(o.toString())}return r?.skipBrowserRedirect&&l.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${l.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:l,error:o}=s;return o?{data:null,error:o}:await ht(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=l?.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,l;const{data:o,error:u}=s;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:p}=await ht(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&(!((l=f?.totp)===null||l===void 0)&&l.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:l,error:o}=s;if(o)return{data:null,error:o};const{data:u,error:h}=await ht(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=l?.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(s){if(rt(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:l,error:o}=s;return o?{data:null,error:o}:await ht(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=l?.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(rt(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=e?.factors||[],l=r.filter(u=>u.factor_type==="totp"&&u.status==="verified"),o=r.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:r,totp:l,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:l},error:o}=e;if(o)return{data:null,error:o};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=mg(l.access_token);let h=null;u.aal&&(h=u.aal);let f=h;((r=(s=l.user.factors)===null||s===void 0?void 0:s.filter(b=>b.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const g=u.amr||[];return{data:{currentLevel:h,nextLevel:f,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(h=>h.kid===e);if(r)return r;const l=Date.now();if(r=this.jwks.keys.find(h=>h.kid===e),r&&this.jwks_cached_at+yO>l)return r;const{data:o,error:u}=await ht(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=l,r=o.keys.find(h=>h.kid===e),!r)?null:r}async getClaims(e,s={}){try{let r=e;if(!r){const{data:w,error:x}=await this.getSession();if(x||!w.session)return{data:null,error:x};r=w.session.access_token}const{header:l,payload:o,signature:u,raw:{header:h,payload:f}}=mg(r);s?.allowExpired||zO(o.exp);const p=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!p){const{error:w}=await this.getUser(r);if(w)throw w;return{data:{claims:o,header:l,signature:u},error:null}}const g=BO(l.alg),b=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,b,u,AO(`${h}.${f}`)))throw new a0("Invalid JWT signature");return{data:{claims:o,header:l,signature:u},error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}}ed.nextInstanceID=0;const nR=ed;class iR extends nR{constructor(e){super(e)}}var aR=function(t,e,s,r){function l(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{p(r.next(g))}catch(b){u(b)}}function f(g){try{p(r.throw(g))}catch(b){u(b)}}function p(g){g.done?o(g.value):l(g.value).then(h,f)}p((r=r.apply(t,e||[])).next())})};class lR{constructor(e,s,r){var l,o,u;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const h=dO(e),f=new URL(h);this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const p=`sb-${f.hostname.split(".")[0]}-auth-token`,g={db:rO,realtime:iO,auth:Object.assign(Object.assign({},nO),{storageKey:p}),global:sO},b=hO(r??{},g);this.storageKey=(l=b.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(o=b.global.headers)!==null&&o!==void 0?o:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(v,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=b.auth)!==null&&u!==void 0?u:{},this.headers,b.global.fetch),this.fetch=cO(s,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new S3(new URL("rest/v1",f).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new J3(this.storageUrl.href,this.headers,this.fetch,r?.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new f3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return aR(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:l,storageKey:o,flowType:u,lock:h,debug:f},p,g){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new iR({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),p),storageKey:o,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:l,flowType:u,lock:h,debug:f,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new U3(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r?.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const U2=(t,e,s)=>new lR(t,e,s);function oR(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const t=process.version.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}oR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const cR="https://english-australia-eau-supabase.lkobs5.easypanel.host",uR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJhbm9uIiwKICAgICJpc3MiOiAic3VwYWJhc2UtZGVtbyIsCiAgICAiaWF0IjogMTY0MTc2OTIwMCwKICAgICJleHAiOiAxNzk5NTM1NjAwCn0.dc_X5iR_VP_qT0zsiyj_I_OZ2T9FtRU2BBNWN8Bu4GE",J=U2(cR,uR,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"sb-english-australia-eau-supabase-auth-token",storage:window.localStorage},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}});class z2{static mapDatabaseRoleToSystemRole(e){return{member:["Members"],admin:["Admin","Members"],super_admin:["AdminSuper","Admin","Members"],moderator:["Admin","Members"],instructor:["Members","MemberColleges"]}[e]||["Members"]}static async getUserRoles(e){try{const{data:s}=await J.auth.getUser();if(!s.user?.email)return console.warn("No email found, using default role"),["Members"];if(s.user.email==="rrzillesg@gmail.com")return console.log("Admin user detected"),["AdminSuper","Admin","Members"];try{const{data:r,error:l}=await J.from("members").select("id, email").or(`email.eq.${s.user.email},created_by.eq.${e}`).single();if(l||!r)return console.warn("Member not found in database, using default role"),["Members"];const{data:o,error:u}=await J.from("member_roles").select("role").eq("member_id",r.id);if(u||!o||o.length===0)return console.warn("No roles found, using default role"),["Members"];const h=[];return o.forEach(f=>{const p=this.mapDatabaseRoleToSystemRole(f.role);h.push(...p)}),[...new Set(h)]}catch(r){return console.warn("Database error fetching member/roles:",r),["Members"]}}catch(s){return console.warn("General error in getUserRoles:",s),["Members"]}}static async createMemberAfterSignup(e,s){try{const{data:r}=await J.from("members").select("id").eq("email",s).single();if(r)return;const{error:l}=await J.from("members").insert({email:s,first_name:s.split("@")[0],last_name:"User",membership_status:"active",membership_type:"standard",created_by:e,updated_by:e});if(l)return;const{data:o}=await J.from("members").select("id").eq("email",s).single();o&&await J.from("member_roles").insert({member_id:o.id,role:"member"})}catch{}}static async signInWithRoles(e,s){try{const{data:r,error:l}=await J.auth.signInWithPassword({email:e,password:s});if(l||!r.user)return{user:null,roles:[],error:l};const o=await this.getUserRoles(r.user.id);return{user:r.user,roles:o,error:null}}catch(r){return{user:null,roles:[],error:r}}}}const l0={signIn:async(t,e)=>{const{data:s,error:r}=await J.auth.signInWithPassword({email:t,password:e});return{data:s,error:r}},signUp:async(t,e,s)=>{const{data:r,error:l}=await J.auth.signUp({email:t,password:e,options:{data:{full_name:s}}});return{data:r,error:l}},signOut:async()=>{const{error:t}=await J.auth.signOut();return{error:t}},resetPassword:async t=>{const{data:e,error:s}=await J.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/reset-password`});return{data:e,error:s}},updatePassword:async t=>{const{data:e,error:s}=await J.auth.updateUser({password:t});return{data:e,error:s}},getSession:async()=>{const{data:t,error:e}=await J.auth.getSession();return{data:t,error:e}},getUser:async()=>{const{data:{user:t},error:e}=await J.auth.getUser();return{user:t,error:e}},onAuthStateChange:t=>J.auth.onAuthStateChange(t)},dR=pd({email:Zt().email("Please enter a valid email address"),password:Zt().min(6,"Password must be at least 6 characters")}),hR=()=>{const t=or(),[e,s]=O.useState(!1),[r,l]=O.useState(null),{register:o,handleSubmit:u,formState:{errors:h}}=hd({resolver:md(dR)}),f=async p=>{s(!0),l(null);try{const{user:g,roles:b,error:v}=await z2.signInWithRoles(p.email,p.password);if(v)l(v.message);else if(g){const{useAuthStore:w}=await wc(async()=>{const{useAuthStore:T}=await Promise.resolve().then(()=>nM);return{useAuthStore:T}},void 0),{setUser:x,setRoles:j,setIsLoading:N}=w.getState();x(g),j(b),N(!1),t("/dashboard")}}catch{l("An unexpected error occurred. Please try again.")}finally{s(!1)}};return i.jsx("div",{className:"w-full",children:i.jsxs("div",{className:"bg-white rounded-lg p-8",children:[i.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Welcome member"}),i.jsx("p",{className:"text-gray-600 mb-8",children:"Welcome to the Australian Online Academy of English Australia"}),i.jsxs("form",{onSubmit:u(f),className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),i.jsx("input",{id:"email",type:"email",placeholder:"Username",className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",...o("email"),disabled:e}),h.email&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.email.message})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),i.jsx("input",{id:"password",type:"password",placeholder:"Password",className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",...o("password"),disabled:e}),h.password&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.password.message})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"remember",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"remember",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),r&&i.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md",children:r}),i.jsx("button",{type:"submit",disabled:e,className:"w-full py-3 px-4 bg-black text-white font-medium rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e?"Signing in...":"Login"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("a",{href:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-500",children:"Forgot your password?"})})]})})},fR=()=>i.jsx(F0,{children:i.jsx(hR,{})});function B2(t){var e,s,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(s=B2(t[e]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}function F2(){for(var t,e,s=0,r="",l=arguments.length;s<l;s++)(t=arguments[s])&&(e=B2(t))&&(r&&(r+=" "),r+=e);return r}const H1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,V1=F2,H2=(t,e)=>s=>{var r;if(e?.variants==null)return V1(t,s?.class,s?.className);const{variants:l,defaultVariants:o}=e,u=Object.keys(l).map(p=>{const g=s?.[p],b=o?.[p];if(g===null)return null;const v=H1(g)||H1(b);return l[p][v]}),h=s&&Object.entries(s).reduce((p,g)=>{let[b,v]=g;return v===void 0||(p[b]=v),p},{}),f=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,g)=>{let{class:b,className:v,...w}=g;return Object.entries(w).every(x=>{let[j,N]=x;return Array.isArray(N)?N.includes({...o,...h}[j]):{...o,...h}[j]===N})?[...p,b,v]:p},[]);return V1(t,u,f,s?.class,s?.className)},ay="-",mR=t=>{const e=gR(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:u=>{const h=u.split(ay);return h[0]===""&&h.length!==1&&h.shift(),V2(h,e)||pR(u)},getConflictingClassGroupIds:(u,h)=>{const f=s[u]||[];return h&&r[u]?[...f,...r[u]]:f}}},V2=(t,e)=>{if(t.length===0)return e.classGroupId;const s=t[0],r=e.nextPart.get(s),l=r?V2(t.slice(1),r):void 0;if(l)return l;if(e.validators.length===0)return;const o=t.join(ay);return e.validators.find(({validator:u})=>u(o))?.classGroupId},G1=/^\[(.+)\]$/,pR=t=>{if(G1.test(t)){const e=G1.exec(t)[1],s=e?.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}},gR=t=>{const{theme:e,classGroups:s}=t,r={nextPart:new Map,validators:[]};for(const l in s)o0(s[l],r,l,e);return r},o0=(t,e,s,r)=>{t.forEach(l=>{if(typeof l=="string"){const o=l===""?e:Z1(e,l);o.classGroupId=s;return}if(typeof l=="function"){if(yR(l)){o0(l(r),e,s,r);return}e.validators.push({validator:l,classGroupId:s});return}Object.entries(l).forEach(([o,u])=>{o0(u,Z1(e,o),s,r)})})},Z1=(t,e)=>{let s=t;return e.split(ay).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},yR=t=>t.isThemeGetter,bR=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,r=new Map;const l=(o,u)=>{s.set(o,u),e++,e>t&&(e=0,r=s,s=new Map)};return{get(o){let u=s.get(o);if(u!==void 0)return u;if((u=r.get(o))!==void 0)return l(o,u),u},set(o,u){s.has(o)?s.set(o,u):l(o,u)}}},c0="!",u0=":",xR=u0.length,vR=t=>{const{prefix:e,experimentalParseClassName:s}=t;let r=l=>{const o=[];let u=0,h=0,f=0,p;for(let x=0;x<l.length;x++){let j=l[x];if(u===0&&h===0){if(j===u0){o.push(l.slice(f,x)),f=x+xR;continue}if(j==="/"){p=x;continue}}j==="["?u++:j==="]"?u--:j==="("?h++:j===")"&&h--}const g=o.length===0?l:l.substring(f),b=wR(g),v=b!==g,w=p&&p>f?p-f:void 0;return{modifiers:o,hasImportantModifier:v,baseClassName:b,maybePostfixModifierPosition:w}};if(e){const l=e+u0,o=r;r=u=>u.startsWith(l)?o(u.substring(l.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(s){const l=r;r=o=>s({className:o,parseClassName:l})}return r},wR=t=>t.endsWith(c0)?t.substring(0,t.length-1):t.startsWith(c0)?t.substring(1):t,_R=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const l=[];let o=[];return r.forEach(u=>{u[0]==="["||e[u]?(l.push(...o.sort(),u),o=[]):o.push(u)}),l.push(...o.sort()),l}},jR=t=>({cache:bR(t.cacheSize),parseClassName:vR(t),sortModifiers:_R(t),...mR(t)}),NR=/\s+/,SR=(t,e)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:l,sortModifiers:o}=e,u=[],h=t.trim().split(NR);let f="";for(let p=h.length-1;p>=0;p-=1){const g=h[p],{isExternal:b,modifiers:v,hasImportantModifier:w,baseClassName:x,maybePostfixModifierPosition:j}=s(g);if(b){f=g+(f.length>0?" "+f:f);continue}let N=!!j,T=r(N?x.substring(0,j):x);if(!T){if(!N){f=g+(f.length>0?" "+f:f);continue}if(T=r(x),!T){f=g+(f.length>0?" "+f:f);continue}N=!1}const S=o(v).join(":"),k=w?S+c0:S,Z=k+T;if(u.includes(Z))continue;u.push(Z);const R=l(T,N);for(let U=0;U<R.length;++U){const B=R[U];u.push(k+B)}f=g+(f.length>0?" "+f:f)}return f};function ER(){let t=0,e,s,r="";for(;t<arguments.length;)(e=arguments[t++])&&(s=G2(e))&&(r&&(r+=" "),r+=s);return r}const G2=t=>{if(typeof t=="string")return t;let e,s="";for(let r=0;r<t.length;r++)t[r]&&(e=G2(t[r]))&&(s&&(s+=" "),s+=e);return s};function AR(t,...e){let s,r,l,o=u;function u(f){const p=e.reduce((g,b)=>b(g),t());return s=jR(p),r=s.cache.get,l=s.cache.set,o=h,h(f)}function h(f){const p=r(f);if(p)return p;const g=SR(f,s);return l(f,g),g}return function(){return o(ER.apply(null,arguments))}}const js=t=>{const e=s=>s[t]||[];return e.isThemeGetter=!0,e},Z2=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Y2=/^\((?:(\w[\w-]*):)?(.+)\)$/i,CR=/^\d+\/\d+$/,kR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,TR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,OR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,RR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,MR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Qo=t=>CR.test(t),at=t=>!!t&&!Number.isNaN(Number(t)),Ca=t=>!!t&&Number.isInteger(Number(t)),yg=t=>t.endsWith("%")&&at(t.slice(0,-1)),Ri=t=>kR.test(t),DR=()=>!0,LR=t=>TR.test(t)&&!OR.test(t),K2=()=>!1,qR=t=>RR.test(t),PR=t=>MR.test(t),IR=t=>!Pe(t)&&!Ie(t),$R=t=>Nc(t,X2,K2),Pe=t=>Z2.test(t),Nl=t=>Nc(t,J2,LR),bg=t=>Nc(t,HR,at),Y1=t=>Nc(t,W2,K2),UR=t=>Nc(t,Q2,PR),Bh=t=>Nc(t,eN,qR),Ie=t=>Y2.test(t),Du=t=>Sc(t,J2),zR=t=>Sc(t,VR),K1=t=>Sc(t,W2),BR=t=>Sc(t,X2),FR=t=>Sc(t,Q2),Fh=t=>Sc(t,eN,!0),Nc=(t,e,s)=>{const r=Z2.exec(t);return r?r[1]?e(r[1]):s(r[2]):!1},Sc=(t,e,s=!1)=>{const r=Y2.exec(t);return r?r[1]?e(r[1]):s:!1},W2=t=>t==="position"||t==="percentage",Q2=t=>t==="image"||t==="url",X2=t=>t==="length"||t==="size"||t==="bg-size",J2=t=>t==="length",HR=t=>t==="number",VR=t=>t==="family-name",eN=t=>t==="shadow",GR=()=>{const t=js("color"),e=js("font"),s=js("text"),r=js("font-weight"),l=js("tracking"),o=js("leading"),u=js("breakpoint"),h=js("container"),f=js("spacing"),p=js("radius"),g=js("shadow"),b=js("inset-shadow"),v=js("text-shadow"),w=js("drop-shadow"),x=js("blur"),j=js("perspective"),N=js("aspect"),T=js("ease"),S=js("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],R=()=>[...Z(),Ie,Pe],U=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],A=()=>[Ie,Pe,f],C=()=>[Qo,"full","auto",...A()],z=()=>[Ca,"none","subgrid",Ie,Pe],L=()=>["auto",{span:["full",Ca,Ie,Pe]},Ca,Ie,Pe],q=()=>[Ca,"auto",Ie,Pe],P=()=>["auto","min","max","fr",Ie,Pe],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],te=()=>["start","end","center","stretch","center-safe","end-safe"],$=()=>["auto",...A()],Y=()=>[Qo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],W=()=>[t,Ie,Pe],oe=()=>[...Z(),K1,Y1,{position:[Ie,Pe]}],I=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Q=()=>["auto","cover","contain",BR,$R,{size:[Ie,Pe]}],ie=()=>[yg,Du,Nl],X=()=>["","none","full",p,Ie,Pe],fe=()=>["",at,Du,Nl],ve=()=>["solid","dashed","dotted","double"],Ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Re=()=>[at,yg,K1,Y1],je=()=>["","none",x,Ie,Pe],Te=()=>["none",at,Ie,Pe],Me=()=>["none",at,Ie,Pe],Oe=()=>[at,Ie,Pe],De=()=>[Qo,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ri],breakpoint:[Ri],color:[DR],container:[Ri],"drop-shadow":[Ri],ease:["in","out","in-out"],font:[IR],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ri],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ri],shadow:[Ri],spacing:["px",at],text:[Ri],"text-shadow":[Ri],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Qo,Pe,Ie,N]}],container:["container"],columns:[{columns:[at,Pe,Ie,h]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:R()}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[Ca,"auto",Ie,Pe]}],basis:[{basis:[Qo,"full","auto",h,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[at,Qo,"auto","initial","none",Pe]}],grow:[{grow:["",at,Ie,Pe]}],shrink:[{shrink:["",at,Ie,Pe]}],order:[{order:[Ca,"first","last","none",Ie,Pe]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":P()}],"auto-rows":[{"auto-rows":P()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...te(),"normal"]}],"justify-self":[{"justify-self":["auto",...te()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...te(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...te(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...te(),"baseline"]}],"place-self":[{"place-self":["auto",...te()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:$()}],mx:[{mx:$()}],my:[{my:$()}],ms:[{ms:$()}],me:[{me:$()}],mt:[{mt:$()}],mr:[{mr:$()}],mb:[{mb:$()}],ml:[{ml:$()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:Y()}],w:[{w:[h,"screen",...Y()]}],"min-w":[{"min-w":[h,"screen","none",...Y()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[u]},...Y()]}],h:[{h:["screen","lh",...Y()]}],"min-h":[{"min-h":["screen","lh","none",...Y()]}],"max-h":[{"max-h":["screen","lh",...Y()]}],"font-size":[{text:["base",s,Du,Nl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ie,bg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",yg,Pe]}],"font-family":[{font:[zR,Pe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,Ie,Pe]}],"line-clamp":[{"line-clamp":[at,"none",Ie,bg]}],leading:[{leading:[o,...A()]}],"list-image":[{"list-image":["none",Ie,Pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ie,Pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ve(),"wavy"]}],"text-decoration-thickness":[{decoration:[at,"from-font","auto",Ie,Nl]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[at,"auto",Ie,Pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ie,Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ie,Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:oe()}],"bg-repeat":[{bg:I()}],"bg-size":[{bg:Q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ca,Ie,Pe],radial:["",Ie,Pe],conic:[Ca,Ie,Pe]},FR,UR]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:ie()}],"gradient-via-pos":[{via:ie()}],"gradient-to-pos":[{to:ie()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:X()}],"rounded-s":[{"rounded-s":X()}],"rounded-e":[{"rounded-e":X()}],"rounded-t":[{"rounded-t":X()}],"rounded-r":[{"rounded-r":X()}],"rounded-b":[{"rounded-b":X()}],"rounded-l":[{"rounded-l":X()}],"rounded-ss":[{"rounded-ss":X()}],"rounded-se":[{"rounded-se":X()}],"rounded-ee":[{"rounded-ee":X()}],"rounded-es":[{"rounded-es":X()}],"rounded-tl":[{"rounded-tl":X()}],"rounded-tr":[{"rounded-tr":X()}],"rounded-br":[{"rounded-br":X()}],"rounded-bl":[{"rounded-bl":X()}],"border-w":[{border:fe()}],"border-w-x":[{"border-x":fe()}],"border-w-y":[{"border-y":fe()}],"border-w-s":[{"border-s":fe()}],"border-w-e":[{"border-e":fe()}],"border-w-t":[{"border-t":fe()}],"border-w-r":[{"border-r":fe()}],"border-w-b":[{"border-b":fe()}],"border-w-l":[{"border-l":fe()}],"divide-x":[{"divide-x":fe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":fe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ve(),"hidden","none"]}],"divide-style":[{divide:[...ve(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...ve(),"none","hidden"]}],"outline-offset":[{"outline-offset":[at,Ie,Pe]}],"outline-w":[{outline:["",at,Du,Nl]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",g,Fh,Bh]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",b,Fh,Bh]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[at,Nl]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":fe()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",v,Fh,Bh]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[at,Ie,Pe]}],"mix-blend":[{"mix-blend":[...Ee(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ee()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[at]}],"mask-image-linear-from-pos":[{"mask-linear-from":Re()}],"mask-image-linear-to-pos":[{"mask-linear-to":Re()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":Re()}],"mask-image-t-to-pos":[{"mask-t-to":Re()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":Re()}],"mask-image-r-to-pos":[{"mask-r-to":Re()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":Re()}],"mask-image-b-to-pos":[{"mask-b-to":Re()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":Re()}],"mask-image-l-to-pos":[{"mask-l-to":Re()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":Re()}],"mask-image-x-to-pos":[{"mask-x-to":Re()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":Re()}],"mask-image-y-to-pos":[{"mask-y-to":Re()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[Ie,Pe]}],"mask-image-radial-from-pos":[{"mask-radial-from":Re()}],"mask-image-radial-to-pos":[{"mask-radial-to":Re()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":Z()}],"mask-image-conic-pos":[{"mask-conic":[at]}],"mask-image-conic-from-pos":[{"mask-conic-from":Re()}],"mask-image-conic-to-pos":[{"mask-conic-to":Re()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:oe()}],"mask-repeat":[{mask:I()}],"mask-size":[{mask:Q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ie,Pe]}],filter:[{filter:["","none",Ie,Pe]}],blur:[{blur:je()}],brightness:[{brightness:[at,Ie,Pe]}],contrast:[{contrast:[at,Ie,Pe]}],"drop-shadow":[{"drop-shadow":["","none",w,Fh,Bh]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",at,Ie,Pe]}],"hue-rotate":[{"hue-rotate":[at,Ie,Pe]}],invert:[{invert:["",at,Ie,Pe]}],saturate:[{saturate:[at,Ie,Pe]}],sepia:[{sepia:["",at,Ie,Pe]}],"backdrop-filter":[{"backdrop-filter":["","none",Ie,Pe]}],"backdrop-blur":[{"backdrop-blur":je()}],"backdrop-brightness":[{"backdrop-brightness":[at,Ie,Pe]}],"backdrop-contrast":[{"backdrop-contrast":[at,Ie,Pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",at,Ie,Pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[at,Ie,Pe]}],"backdrop-invert":[{"backdrop-invert":["",at,Ie,Pe]}],"backdrop-opacity":[{"backdrop-opacity":[at,Ie,Pe]}],"backdrop-saturate":[{"backdrop-saturate":[at,Ie,Pe]}],"backdrop-sepia":[{"backdrop-sepia":["",at,Ie,Pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ie,Pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[at,"initial",Ie,Pe]}],ease:[{ease:["linear","initial",T,Ie,Pe]}],delay:[{delay:[at,Ie,Pe]}],animate:[{animate:["none",S,Ie,Pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[j,Ie,Pe]}],"perspective-origin":[{"perspective-origin":R()}],rotate:[{rotate:Te()}],"rotate-x":[{"rotate-x":Te()}],"rotate-y":[{"rotate-y":Te()}],"rotate-z":[{"rotate-z":Te()}],scale:[{scale:Me()}],"scale-x":[{"scale-x":Me()}],"scale-y":[{"scale-y":Me()}],"scale-z":[{"scale-z":Me()}],"scale-3d":["scale-3d"],skew:[{skew:Oe()}],"skew-x":[{"skew-x":Oe()}],"skew-y":[{"skew-y":Oe()}],transform:[{transform:[Ie,Pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:R()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:De()}],"translate-x":[{"translate-x":De()}],"translate-y":[{"translate-y":De()}],"translate-z":[{"translate-z":De()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ie,Pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ie,Pe]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[at,Du,Nl,bg]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ZR=AR(GR);function Zi(...t){return ZR(F2(t))}const YR=H2("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-white hover:bg-primary/90",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",ghost:"hover:bg-gray-100 hover:text-gray-900",link:"text-primary underline-offset-4 hover:underline",destructive:"bg-red-500 text-white hover:bg-red-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ce=O.forwardRef(({className:t,variant:e,size:s,...r},l)=>i.jsx("button",{className:Zi(YR({variant:e,size:s,className:t})),ref:l,...r}));ce.displayName="Button";const Ae=O.forwardRef(({className:t,type:e,...s},r)=>i.jsx("input",{type:e,className:Zi("flex h-11 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-0 focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s}));Ae.displayName="Input";const KR=H2("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),xe=O.forwardRef(({className:t,...e},s)=>i.jsx("label",{ref:s,className:Zi(KR(),t),...e}));xe.displayName="Label";const ge=O.forwardRef(({className:t,...e},s)=>i.jsx("div",{ref:s,className:Zi("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ge.displayName="Card";const Nn=O.forwardRef(({className:t,...e},s)=>i.jsx("div",{ref:s,className:Zi("flex flex-col space-y-1.5 p-6",t),...e}));Nn.displayName="CardHeader";const Sn=O.forwardRef(({className:t,...e},s)=>i.jsx("h3",{ref:s,className:Zi("text-2xl font-semibold leading-none tracking-tight",t),...e}));Sn.displayName="CardTitle";const En=O.forwardRef(({className:t,...e},s)=>i.jsx("p",{ref:s,className:Zi("text-sm text-muted-foreground",t),...e}));En.displayName="CardDescription";const nr=O.forwardRef(({className:t,...e},s)=>i.jsx("div",{ref:s,className:Zi("p-6 pt-0",t),...e}));nr.displayName="CardContent";const d0=O.forwardRef(({className:t,...e},s)=>i.jsx("div",{ref:s,className:Zi("flex items-center p-6 pt-0",t),...e}));d0.displayName="CardFooter";const WR=pd({email:Zt().email("Please enter a valid email address")}),QR=()=>{const t=or(),[e,s]=O.useState(!1),[r,l]=O.useState(!1),[o,u]=O.useState(null),{register:h,handleSubmit:f,formState:{errors:p}}=hd({resolver:md(WR)}),g=async b=>{s(!0),u(null);try{const{error:v}=await l0.resetPassword(b.email);v?u(v.message):l(!0)}catch{u("An unexpected error occurred. Please try again.")}finally{s(!1)}};return r?i.jsxs(ge,{className:"w-full",children:[i.jsxs(Nn,{className:"space-y-1 text-center",children:[i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx(Sn,{className:"text-2xl font-bold",children:"Check your email"}),i.jsx(En,{children:"We've sent a password reset link to your email address."})]}),i.jsx(nr,{className:"text-center",children:i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"If you don't see the email, check your spam folder or try again."})}),i.jsx(d0,{children:i.jsx(ce,{variant:"outline",className:"w-full",onClick:()=>t("/login"),children:"Back to login"})})]}):i.jsxs(ge,{className:"w-full",children:[i.jsxs(Nn,{className:"space-y-1",children:[i.jsx(Sn,{className:"text-2xl font-bold",children:"Password Recovery"}),i.jsx(En,{children:"Enter your email address and we'll send you a link to reset your password."})]}),i.jsx(nr,{children:i.jsxs("form",{onSubmit:f(g),className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{htmlFor:"email",children:"Email address"}),i.jsx(Ae,{id:"email",type:"email",placeholder:"Enter your email address",...h("email"),disabled:e}),p.email&&i.jsx("p",{className:"text-sm text-destructive",children:p.email.message})]}),o&&i.jsx("div",{className:"text-sm text-destructive",children:o}),i.jsx(ce,{type:"submit",className:"w-full",disabled:e,children:e?"Sending...":"Send reset link"})]})}),i.jsx(d0,{children:i.jsx("button",{className:"text-sm text-primary hover:underline w-full text-center",onClick:()=>t("/login"),children:"Remember your password? Sign in"})})]})},XR=()=>i.jsx(F0,{children:i.jsx(QR,{})}),JR=()=>{const t=or(),[e,s]=O.useState(""),[r,l]=O.useState(""),[o,u]=O.useState(!1),[h,f]=O.useState(""),p=async g=>{g.preventDefault(),u(!0),f("");try{const{data:b,error:v}=await J.auth.signUp({email:e,password:r,options:{emailRedirectTo:`${window.location.origin}/dashboard`}});v?f(`Erro: ${v.message}`):b.user&&(await z2.createMemberAfterSignup(b.user.id,e),f("Usurio criado com sucesso! Voc pode fazer login agora."),setTimeout(()=>t("/login"),2e3))}catch{f("Erro ao criar usurio")}finally{u(!1)}};return i.jsx(F0,{children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[i.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Criar Usurio de Teste"}),i.jsxs("form",{onSubmit:p,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:e,onChange:g=>s(g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md",placeholder:"admin@englishaustralia.com.au",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),i.jsx("input",{type:"password",value:r,onChange:g=>l(g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md",placeholder:"Mnimo 6 caracteres",required:!0,minLength:6})]}),h&&i.jsx("div",{className:`p-3 rounded-md text-sm ${h.includes("sucesso")?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:h}),i.jsx(ce,{type:"submit",className:"w-full",disabled:o,children:o?"Criando...":"Criar Usurio"})]}),i.jsx("div",{className:"mt-4",children:i.jsx(ce,{variant:"outline",onClick:()=>t("/login"),className:"w-full",children:"Voltar para Login"})})]})})},W1=t=>{let e;const s=new Set,r=(p,g)=>{const b=typeof p=="function"?p(e):p;if(!Object.is(b,e)){const v=e;e=g??(typeof b!="object"||b===null)?b:Object.assign({},e,b),s.forEach(w=>w(e,v))}},l=()=>e,h={setState:r,getState:l,getInitialState:()=>f,subscribe:p=>(s.add(p),()=>s.delete(p))},f=e=t(r,l,h);return h},eM=t=>t?W1(t):W1,tM=t=>t;function sM(t,e=tM){const s=Fs.useSyncExternalStore(t.subscribe,Fs.useCallback(()=>e(t.getState()),[t,e]),Fs.useCallback(()=>e(t.getInitialState()),[t,e]));return Fs.useDebugValue(s),s}const Q1=t=>{const e=eM(t),s=r=>sM(e,r);return Object.assign(s,e),s},rM=t=>t?Q1(t):Q1,Bt=rM((t,e)=>({user:null,roles:[],isLoading:!0,rolesLoaded:!1,setUser:s=>t({user:s}),setRoles:s=>t({roles:s,rolesLoaded:!0}),setIsLoading:s=>{console.log(" STORE: setIsLoading called with:",s),t({isLoading:s})},setRolesLoaded:s=>t({rolesLoaded:s}),hasRole:s=>e().roles.includes(s),reset:()=>t({user:null,roles:[],isLoading:!1,rolesLoaded:!1})})),nM=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:Bt},Symbol.toStringTag,{value:"Module"})),iM={CREATE_CPD:["Admin","AdminSuper","Members","MemberColleges","ConsultantsAgents","BoardMembers"],APPROVE_CPD:["Admin","AdminSuper"],VIEW_ALL_CPDS:["Admin","AdminSuper"],CREATE_EVENT:["Admin","AdminSuper"],EDIT_EVENT:["Admin","AdminSuper"],DELETE_EVENT:["Admin","AdminSuper"],REGISTER_EVENT:["Admin","AdminSuper","Members","MemberColleges","ConsultantsAgents","BoardMembers","Affiliates"],MANAGE_USERS:["AdminSuper"],ASSIGN_ROLES:["AdminSuper"],VIEW_USER_REPORTS:["Admin","AdminSuper"],ACCESS_ADMIN_DASHBOARD:["Admin","AdminSuper"],ACCESS_MEMBER_DASHBOARD:["Admin","AdminSuper","Members","MemberColleges","ConsultantsAgents","BoardMembers","Affiliates"],ACCESS_PUBLIC_CONTENT:["Public","Openlearning","Admin","AdminSuper","Members","MemberColleges","ConsultantsAgents","BoardMembers","Affiliates"]};function Gf(){const{roles:t,hasRole:e}=Bt();return{roles:t,hasPermission:f=>{const p=iM[f],g=p.some(b=>e(b));return console.log("Verificando permisso:",f),console.log("Roles necessrias:",p),console.log("Roles do usurio:",t),console.log("Tem acesso:",g),g},hasAnyRole:f=>f.some(p=>e(p)),hasAllRoles:f=>f.every(p=>e(p)),isAdmin:()=>e("Admin")||e("AdminSuper"),isSuper:()=>e("AdminSuper"),isMember:()=>e("Members")||e("MemberColleges")}}const Ns=({children:t,permission:e,roles:s,requireAll:r=!1,fallback:l=null})=>{const{hasPermission:o,hasAnyRole:u,hasAllRoles:h}=Gf();return(e?o(e):s?r?h(s):u(s):!0)?i.jsx(i.Fragment,{children:t}):i.jsx(i.Fragment,{children:l})},aM=()=>{const{user:t,roles:e}=Bt(),s=or();return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ",t?.user_metadata?.full_name||t?.email]}),i.jsxs("p",{className:"text-gray-600",children:["Roles: ",e.join(", ")||"No roles assigned"]})]})})})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs(ge,{children:[i.jsxs(Nn,{children:[i.jsx(Sn,{className:"flex items-center gap-2",children:" CPD Summary"}),i.jsx(En,{children:"Your Continuing Professional Development progress"})]}),i.jsx(nr,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Total Points:"}),i.jsx("span",{className:"text-2xl font-bold text-primary-600",children:"0"})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Activities:"}),i.jsx("span",{className:"text-lg font-semibold",children:"0"})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"This Year:"}),i.jsx("span",{className:"text-lg font-semibold",children:"0"})]}),i.jsx(Ns,{permission:"CREATE_CPD",children:i.jsx(ce,{className:"w-full mt-4",onClick:()=>s("/cpd"),children:"Add New CPD Activity"})})]})})]}),i.jsxs(ge,{children:[i.jsxs(Nn,{children:[i.jsx(Sn,{className:"flex items-center gap-2",children:" Upcoming Events"}),i.jsx(En,{children:"Professional development events and workshops"})]}),i.jsx(nr,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"text-center py-8 text-gray-500",children:i.jsx("p",{children:"No upcoming events"})}),i.jsx(Ns,{permission:"REGISTER_EVENT",children:i.jsx(ce,{variant:"outline",className:"w-full",onClick:()=>s("/events"),children:"Browse Events"})})]})})]}),i.jsxs(ge,{children:[i.jsxs(Nn,{children:[i.jsx(Sn,{className:"flex items-center gap-2",children:" Quick Actions"}),i.jsx(En,{children:"Common tasks and shortcuts"})]}),i.jsx(nr,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsx(Ns,{permission:"CREATE_CPD",children:i.jsx(ce,{variant:"outline",className:"w-full justify-start",onClick:()=>s("/cpd"),children:" Log CPD Activity"})}),i.jsx(ce,{variant:"outline",className:"w-full justify-start",onClick:()=>s("/profile"),children:" My Profile"}),i.jsx(ce,{variant:"outline",className:"w-full justify-start",onClick:()=>s("/cpd"),children:" Export Certificate"}),i.jsx(Ns,{roles:["Admin","AdminSuper"],children:i.jsx(ce,{variant:"outline",className:"w-full justify-start",onClick:()=>s("/admin"),children:" Admin Panel"})})]})})]}),i.jsxs(ge,{className:"md:col-span-2 lg:col-span-3",children:[i.jsxs(Nn,{children:[i.jsx(Sn,{className:"flex items-center gap-2",children:" Recent Activity"}),i.jsx(En,{children:"Your latest CPD activities and events"})]}),i.jsx(nr,{children:i.jsxs("div",{className:"text-center py-12 text-gray-500",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"No activities yet"}),i.jsx("p",{className:"text-sm mb-4",children:"Start logging your professional development activities to see them here."}),i.jsx(Ns,{permission:"CREATE_CPD",children:i.jsx(ce,{onClick:()=>s("/cpd"),children:"Add Your First Activity"})})]})})]})]})})]})};/*!
* sweetalert2 v11.22.2
* Released under the MIT License.
*/function tN(t,e,s){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:s;throw new TypeError("Private element is not present on this object")}function lM(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function X1(t,e){return t.get(tN(t,e))}function oM(t,e,s){lM(t,e),e.set(t,s)}function cM(t,e,s){return t.set(tN(t,e),s),s}const uM=100,We={},dM=()=>{We.previousActiveElement instanceof HTMLElement?(We.previousActiveElement.focus(),We.previousActiveElement=null):document.body&&document.body.focus()},hM=t=>new Promise(e=>{if(!t)return e();const s=window.scrollX,r=window.scrollY;We.restoreFocusTimeout=setTimeout(()=>{dM(),e()},uM),window.scrollTo(s,r)}),sN="swal2-",fM=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],de=fM.reduce((t,e)=>(t[e]=sN+e,t),{}),mM=["success","warning","info","question","error"],vf=mM.reduce((t,e)=>(t[e]=sN+e,t),{}),rN="SweetAlert2:",ly=t=>t.charAt(0).toUpperCase()+t.slice(1),lr=t=>{console.warn(`${rN} ${typeof t=="object"?t.join(" "):t}`)},Hl=t=>{console.error(`${rN} ${t}`)},J1=[],pM=t=>{J1.includes(t)||(J1.push(t),lr(t))},nN=(t,e=null)=>{pM(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},Zf=t=>typeof t=="function"?t():t,oy=t=>t&&typeof t.toPromise=="function",yd=t=>oy(t)?t.toPromise():Promise.resolve(t),cy=t=>t&&Promise.resolve(t)===t,cr=()=>document.body.querySelector(`.${de.container}`),bd=t=>{const e=cr();return e?e.querySelector(t):null},Pr=t=>bd(`.${t}`),wt=()=>Pr(de.popup),Ec=()=>Pr(de.icon),gM=()=>Pr(de["icon-content"]),iN=()=>Pr(de.title),uy=()=>Pr(de["html-container"]),aN=()=>Pr(de.image),dy=()=>Pr(de["progress-steps"]),Yf=()=>Pr(de["validation-message"]),ri=()=>bd(`.${de.actions} .${de.confirm}`),Ac=()=>bd(`.${de.actions} .${de.cancel}`),Vl=()=>bd(`.${de.actions} .${de.deny}`),yM=()=>Pr(de["input-label"]),Cc=()=>bd(`.${de.loader}`),xd=()=>Pr(de.actions),lN=()=>Pr(de.footer),Kf=()=>Pr(de["timer-progress-bar"]),hy=()=>Pr(de.close),bM=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,fy=()=>{const t=wt();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),s=Array.from(e).sort((o,u)=>{const h=parseInt(o.getAttribute("tabindex")||"0"),f=parseInt(u.getAttribute("tabindex")||"0");return h>f?1:h<f?-1:0}),r=t.querySelectorAll(bM),l=Array.from(r).filter(o=>o.getAttribute("tabindex")!=="-1");return[...new Set(s.concat(l))].filter(o=>vr(o))},my=()=>Ui(document.body,de.shown)&&!Ui(document.body,de["toast-shown"])&&!Ui(document.body,de["no-backdrop"]),Wf=()=>{const t=wt();return t?Ui(t,de.toast):!1},xM=()=>{const t=wt();return t?t.hasAttribute("data-loading"):!1},Ir=(t,e)=>{if(t.textContent="",e){const r=new DOMParser().parseFromString(e,"text/html"),l=r.querySelector("head");l&&Array.from(l.childNodes).forEach(u=>{t.appendChild(u)});const o=r.querySelector("body");o&&Array.from(o.childNodes).forEach(u=>{u instanceof HTMLVideoElement||u instanceof HTMLAudioElement?t.appendChild(u.cloneNode(!0)):t.appendChild(u)})}},Ui=(t,e)=>{if(!e)return!1;const s=e.split(/\s+/);for(let r=0;r<s.length;r++)if(!t.classList.contains(s[r]))return!1;return!0},vM=(t,e)=>{Array.from(t.classList).forEach(s=>{!Object.values(de).includes(s)&&!Object.values(vf).includes(s)&&!Object.values(e.showClass||{}).includes(s)&&t.classList.remove(s)})},qr=(t,e,s)=>{if(vM(t,e),!e.customClass)return;const r=e.customClass[s];if(r){if(typeof r!="string"&&!r.forEach){lr(`Invalid type of customClass.${s}! Expected string or iterable object, got "${typeof r}"`);return}jt(t,r)}},Qf=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${de.popup} > .${de[e]}`);case"checkbox":return t.querySelector(`.${de.popup} > .${de.checkbox} input`);case"radio":return t.querySelector(`.${de.popup} > .${de.radio} input:checked`)||t.querySelector(`.${de.popup} > .${de.radio} input:first-child`);case"range":return t.querySelector(`.${de.popup} > .${de.range} input`);default:return t.querySelector(`.${de.popup} > .${de.input}`)}},oN=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},cN=(t,e,s)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(r=>{Array.isArray(t)?t.forEach(l=>{s?l.classList.add(r):l.classList.remove(r)}):s?t.classList.add(r):t.classList.remove(r)}))},jt=(t,e)=>{cN(t,e,!0)},nn=(t,e)=>{cN(t,e,!1)},Pa=(t,e)=>{const s=Array.from(t.children);for(let r=0;r<s.length;r++){const l=s[r];if(l instanceof HTMLElement&&Ui(l,e))return l}},Ol=(t,e,s)=>{s===`${parseInt(s)}`&&(s=parseInt(s)),s||parseInt(s)===0?t.style.setProperty(e,typeof s=="number"?`${s}px`:s):t.style.removeProperty(e)},Is=(t,e="flex")=>{t&&(t.style.display=e)},tr=t=>{t&&(t.style.display="none")},py=(t,e="block")=>{t&&new MutationObserver(()=>{vd(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},e_=(t,e,s,r)=>{const l=t.querySelector(e);l&&l.style.setProperty(s,r)},vd=(t,e,s="flex")=>{e?Is(t,s):tr(t)},vr=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),wM=()=>!vr(ri())&&!vr(Vl())&&!vr(Ac()),h0=t=>t.scrollHeight>t.clientHeight,_M=(t,e)=>{let s=t;for(;s&&s!==e;){if(h0(s))return!0;s=s.parentElement}return!1},uN=t=>{const e=window.getComputedStyle(t),s=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return s>0||r>0},gy=(t,e=!1)=>{const s=Kf();s&&vr(s)&&(e&&(s.style.transition="none",s.style.width="100%"),setTimeout(()=>{s.style.transition=`width ${t/1e3}s linear`,s.style.width="0%"},10))},jM=()=>{const t=Kf();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const s=parseInt(window.getComputedStyle(t).width),r=e/s*100;t.style.width=`${r}%`},NM=()=>typeof window>"u"||typeof document>"u",SM=`
 <div aria-labelledby="${de.title}" aria-describedby="${de["html-container"]}" class="${de.popup}" tabindex="-1">
   <button type="button" class="${de.close}"></button>
   <ul class="${de["progress-steps"]}"></ul>
   <div class="${de.icon}"></div>
   <img class="${de.image}" />
   <h2 class="${de.title}" id="${de.title}"></h2>
   <div class="${de["html-container"]}" id="${de["html-container"]}"></div>
   <input class="${de.input}" id="${de.input}" />
   <input type="file" class="${de.file}" />
   <div class="${de.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${de.select}" id="${de.select}"></select>
   <div class="${de.radio}"></div>
   <label class="${de.checkbox}">
     <input type="checkbox" id="${de.checkbox}" />
     <span class="${de.label}"></span>
   </label>
   <textarea class="${de.textarea}" id="${de.textarea}"></textarea>
   <div class="${de["validation-message"]}" id="${de["validation-message"]}"></div>
   <div class="${de.actions}">
     <div class="${de.loader}"></div>
     <button type="button" class="${de.confirm}"></button>
     <button type="button" class="${de.deny}"></button>
     <button type="button" class="${de.cancel}"></button>
   </div>
   <div class="${de.footer}"></div>
   <div class="${de["timer-progress-bar-container"]}">
     <div class="${de["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),EM=()=>{const t=cr();return t?(t.remove(),nn([document.documentElement,document.body],[de["no-backdrop"],de["toast-shown"],de["has-column"]]),!0):!1},Sl=()=>{We.currentInstance.resetValidationMessage()},AM=()=>{const t=wt(),e=Pa(t,de.input),s=Pa(t,de.file),r=t.querySelector(`.${de.range} input`),l=t.querySelector(`.${de.range} output`),o=Pa(t,de.select),u=t.querySelector(`.${de.checkbox} input`),h=Pa(t,de.textarea);e.oninput=Sl,s.onchange=Sl,o.onchange=Sl,u.onchange=Sl,h.oninput=Sl,r.oninput=()=>{Sl(),l.value=r.value},r.onchange=()=>{Sl(),l.value=r.value}},CM=t=>typeof t=="string"?document.querySelector(t):t,kM=t=>{const e=wt();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},TM=t=>{window.getComputedStyle(t).direction==="rtl"&&jt(cr(),de.rtl)},OM=t=>{const e=EM();if(NM()){Hl("SweetAlert2 requires document to initialize");return}const s=document.createElement("div");s.className=de.container,e&&jt(s,de["no-transition"]),Ir(s,SM),s.dataset.swal2Theme=t.theme;const r=CM(t.target);r.appendChild(s),t.topLayer&&(s.setAttribute("popover",""),s.showPopover()),kM(t),TM(r),AM()},yy=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?RM(t,e):t&&Ir(e,t)},RM=(t,e)=>{t.jquery?MM(e,t):Ir(e,t.toString())},MM=(t,e)=>{if(t.textContent="",0 in e)for(let s=0;s in e;s++)t.appendChild(e[s].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},DM=(t,e)=>{const s=xd(),r=Cc();!s||!r||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?tr(s):Is(s),qr(s,e,"actions"),LM(s,r,e),Ir(r,e.loaderHtml||""),qr(r,e,"loader"))};function LM(t,e,s){const r=ri(),l=Vl(),o=Ac();!r||!l||!o||(vg(r,"confirm",s),vg(l,"deny",s),vg(o,"cancel",s),qM(r,l,o,s),s.reverseButtons&&(s.toast?(t.insertBefore(o,r),t.insertBefore(l,r)):(t.insertBefore(o,e),t.insertBefore(l,e),t.insertBefore(r,e))))}function qM(t,e,s,r){if(!r.buttonsStyling){nn([t,e,s],de.styled);return}jt([t,e,s],de.styled),r.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&s.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),xg(t),xg(e),xg(s)}function xg(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const s=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${s}`))}function vg(t,e,s){const r=ly(e);vd(t,s[`show${r}Button`],"inline-block"),Ir(t,s[`${e}ButtonText`]||""),t.setAttribute("aria-label",s[`${e}ButtonAriaLabel`]||""),t.className=de[e],qr(t,s,`${e}Button`)}const PM=(t,e)=>{const s=hy();s&&(Ir(s,e.closeButtonHtml||""),qr(s,e,"closeButton"),vd(s,e.showCloseButton),s.setAttribute("aria-label",e.closeButtonAriaLabel||""))},IM=(t,e)=>{const s=cr();s&&($M(s,e.backdrop),UM(s,e.position),zM(s,e.grow),qr(s,e,"container"))};function $M(t,e){typeof e=="string"?t.style.background=e:e||jt([document.documentElement,document.body],de["no-backdrop"])}function UM(t,e){e&&(e in de?jt(t,de[e]):(lr('The "position" parameter is not valid, defaulting to "center"'),jt(t,de.center)))}function zM(t,e){e&&jt(t,de[`grow-${e}`])}var It={innerParams:new WeakMap,domCache:new WeakMap};const BM=["input","file","range","select","radio","checkbox","textarea"],FM=(t,e)=>{const s=wt();if(!s)return;const r=It.innerParams.get(t),l=!r||e.input!==r.input;BM.forEach(o=>{const u=Pa(s,de[o]);u&&(GM(o,e.inputAttributes),u.className=de[o],l&&tr(u))}),e.input&&(l&&HM(e),ZM(e))},HM=t=>{if(!t.input)return;if(!cs[t.input]){Hl(`Unexpected type of input! Expected ${Object.keys(cs).join(" | ")}, got "${t.input}"`);return}const e=dN(t.input);if(!e)return;const s=cs[t.input](e,t);Is(e),t.inputAutoFocus&&setTimeout(()=>{oN(s)})},VM=t=>{for(let e=0;e<t.attributes.length;e++){const s=t.attributes[e].name;["id","type","value","style"].includes(s)||t.removeAttribute(s)}},GM=(t,e)=>{const s=wt();if(!s)return;const r=Qf(s,t);if(r){VM(r);for(const l in e)r.setAttribute(l,e[l])}},ZM=t=>{if(!t.input)return;const e=dN(t.input);e&&qr(e,t,"input")},by=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},wd=(t,e,s)=>{if(s.inputLabel){const r=document.createElement("label"),l=de["input-label"];r.setAttribute("for",t.id),r.className=l,typeof s.customClass=="object"&&jt(r,s.customClass.inputLabel),r.innerText=s.inputLabel,e.insertAdjacentElement("beforebegin",r)}},dN=t=>{const e=wt();if(e)return Pa(e,de[t]||de.input)},wf=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:cy(e)||lr(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},cs={};cs.text=cs.email=cs.password=cs.number=cs.tel=cs.url=cs.search=cs.date=cs["datetime-local"]=cs.time=cs.week=cs.month=(t,e)=>(wf(t,e.inputValue),wd(t,t,e),by(t,e),t.type=e.input,t);cs.file=(t,e)=>(wd(t,t,e),by(t,e),t);cs.range=(t,e)=>{const s=t.querySelector("input"),r=t.querySelector("output");return wf(s,e.inputValue),s.type=e.input,wf(r,e.inputValue),wd(s,t,e),t};cs.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const s=document.createElement("option");Ir(s,e.inputPlaceholder),s.value="",s.disabled=!0,s.selected=!0,t.appendChild(s)}return wd(t,t,e),t};cs.radio=t=>(t.textContent="",t);cs.checkbox=(t,e)=>{const s=Qf(wt(),"checkbox");s.value="1",s.checked=!!e.inputValue;const r=t.querySelector("span");return Ir(r,e.inputPlaceholder||e.inputLabel),s};cs.textarea=(t,e)=>{wf(t,e.inputValue),by(t,e),wd(t,t,e);const s=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(wt()).width),l=()=>{if(!document.body.contains(t))return;const o=t.offsetWidth+s(t);o>r?wt().style.width=`${o}px`:Ol(wt(),"width",e.width)};new MutationObserver(l).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const YM=(t,e)=>{const s=uy();s&&(py(s),qr(s,e,"htmlContainer"),e.html?(yy(e.html,s),Is(s,"block")):e.text?(s.textContent=e.text,Is(s,"block")):tr(s),FM(t,e))},KM=(t,e)=>{const s=lN();s&&(py(s),vd(s,e.footer,"block"),e.footer&&yy(e.footer,s),qr(s,e,"footer"))},WM=(t,e)=>{const s=It.innerParams.get(t),r=Ec();if(!r)return;if(s&&e.icon===s.icon){s_(r,e),t_(r,e);return}if(!e.icon&&!e.iconHtml){tr(r);return}if(e.icon&&Object.keys(vf).indexOf(e.icon)===-1){Hl(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),tr(r);return}Is(r),s_(r,e),t_(r,e),jt(r,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",hN)},t_=(t,e)=>{for(const[s,r]of Object.entries(vf))e.icon!==s&&nn(t,r);jt(t,e.icon&&vf[e.icon]),JM(t,e),hN(),qr(t,e,"icon")},hN=()=>{const t=wt();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),s=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<s.length;r++)s[r].style.backgroundColor=e},QM=t=>`
  ${t.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${t.animation?'<div class="swal2-success-fix"></div>':""}
  ${t.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,XM=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,s_=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let s=t.innerHTML,r="";e.iconHtml?r=r_(e.iconHtml):e.icon==="success"?(r=QM(e),s=s.replace(/ style=".*?"/g,"")):e.icon==="error"?r=XM:e.icon&&(r=r_({question:"?",warning:"!",info:"i"}[e.icon])),s.trim()!==r.trim()&&Ir(t,r)},JM=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const s of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])e_(t,s,"background-color",e.iconColor);e_(t,".swal2-success-ring","border-color",e.iconColor)}},r_=t=>`<div class="${de["icon-content"]}">${t}</div>`,eD=(t,e)=>{const s=aN();if(s){if(!e.imageUrl){tr(s);return}Is(s,""),s.setAttribute("src",e.imageUrl),s.setAttribute("alt",e.imageAlt||""),Ol(s,"width",e.imageWidth),Ol(s,"height",e.imageHeight),s.className=de.image,qr(s,e,"image")}};let xy=!1,fN=0,mN=0,pN=0,gN=0;const tD=t=>{t.addEventListener("mousedown",_f),document.body.addEventListener("mousemove",jf),t.addEventListener("mouseup",Nf),t.addEventListener("touchstart",_f),document.body.addEventListener("touchmove",jf),t.addEventListener("touchend",Nf)},sD=t=>{t.removeEventListener("mousedown",_f),document.body.removeEventListener("mousemove",jf),t.removeEventListener("mouseup",Nf),t.removeEventListener("touchstart",_f),document.body.removeEventListener("touchmove",jf),t.removeEventListener("touchend",Nf)},_f=t=>{const e=wt();if(t.target===e||Ec().contains(t.target)){xy=!0;const s=yN(t);fN=s.clientX,mN=s.clientY,pN=parseInt(e.style.insetInlineStart)||0,gN=parseInt(e.style.insetBlockStart)||0,jt(e,"swal2-dragging")}},jf=t=>{const e=wt();if(xy){let{clientX:s,clientY:r}=yN(t);e.style.insetInlineStart=`${pN+(s-fN)}px`,e.style.insetBlockStart=`${gN+(r-mN)}px`}},Nf=()=>{const t=wt();xy=!1,nn(t,"swal2-dragging")},yN=t=>{let e=0,s=0;return t.type.startsWith("mouse")?(e=t.clientX,s=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,s=t.touches[0].clientY),{clientX:e,clientY:s}},rD=(t,e)=>{const s=cr(),r=wt();if(!(!s||!r)){if(e.toast){Ol(s,"width",e.width),r.style.width="100%";const l=Cc();l&&r.insertBefore(l,Ec())}else Ol(r,"width",e.width);Ol(r,"padding",e.padding),e.color&&(r.style.color=e.color),e.background&&(r.style.background=e.background),tr(Yf()),nD(r,e),e.draggable&&!e.toast?(jt(r,de.draggable),tD(r)):(nn(r,de.draggable),sD(r))}},nD=(t,e)=>{const s=e.showClass||{};t.className=`${de.popup} ${vr(t)?s.popup:""}`,e.toast?(jt([document.documentElement,document.body],de["toast-shown"]),jt(t,de.toast)):jt(t,de.modal),qr(t,e,"popup"),typeof e.customClass=="string"&&jt(t,e.customClass),e.icon&&jt(t,de[`icon-${e.icon}`])},iD=(t,e)=>{const s=dy();if(!s)return;const{progressSteps:r,currentProgressStep:l}=e;if(!r||r.length===0||l===void 0){tr(s);return}Is(s),s.textContent="",l>=r.length&&lr("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((o,u)=>{const h=aD(o);if(s.appendChild(h),u===l&&jt(h,de["active-progress-step"]),u!==r.length-1){const f=lD(e);s.appendChild(f)}})},aD=t=>{const e=document.createElement("li");return jt(e,de["progress-step"]),Ir(e,t),e},lD=t=>{const e=document.createElement("li");return jt(e,de["progress-step-line"]),t.progressStepsDistance&&Ol(e,"width",t.progressStepsDistance),e},oD=(t,e)=>{const s=iN();s&&(py(s),vd(s,e.title||e.titleText,"block"),e.title&&yy(e.title,s),e.titleText&&(s.innerText=e.titleText),qr(s,e,"title"))},bN=(t,e)=>{rD(t,e),IM(t,e),iD(t,e),WM(t,e),eD(t,e),oD(t,e),PM(t,e),YM(t,e),DM(t,e),KM(t,e);const s=wt();typeof e.didRender=="function"&&s&&e.didRender(s),We.eventEmitter.emit("didRender",s)},cD=()=>vr(wt()),xN=()=>{var t;return(t=ri())===null||t===void 0?void 0:t.click()},uD=()=>{var t;return(t=Vl())===null||t===void 0?void 0:t.click()},dD=()=>{var t;return(t=Ac())===null||t===void 0?void 0:t.click()},kc=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),vN=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},hD=(t,e,s)=>{vN(t),e.toast||(t.keydownHandler=r=>mD(e,r,s),t.keydownTarget=e.keydownListenerCapture?window:wt(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},f0=(t,e)=>{var s;const r=fy();if(r.length){t=t+e,t===-2&&(t=r.length-1),t===r.length?t=0:t===-1&&(t=r.length-1),r[t].focus();return}(s=wt())===null||s===void 0||s.focus()},wN=["ArrowRight","ArrowDown"],fD=["ArrowLeft","ArrowUp"],mD=(t,e,s)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?pD(e,t):e.key==="Tab"?gD(e):[...wN,...fD].includes(e.key)?yD(e.key):e.key==="Escape"&&bD(e,t,s)))},pD=(t,e)=>{if(!Zf(e.allowEnterKey))return;const s=Qf(wt(),e.input);if(t.target&&s&&t.target instanceof HTMLElement&&t.target.outerHTML===s.outerHTML){if(["textarea","file"].includes(e.input))return;xN(),t.preventDefault()}},gD=t=>{const e=t.target,s=fy();let r=-1;for(let l=0;l<s.length;l++)if(e===s[l]){r=l;break}t.shiftKey?f0(r,-1):f0(r,1),t.stopPropagation(),t.preventDefault()},yD=t=>{const e=xd(),s=ri(),r=Vl(),l=Ac();if(!e||!s||!r||!l)return;const o=[s,r,l];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const u=wN.includes(t)?"nextElementSibling":"previousElementSibling";let h=document.activeElement;if(h){for(let f=0;f<e.children.length;f++){if(h=h[u],!h)return;if(h instanceof HTMLButtonElement&&vr(h))break}h instanceof HTMLButtonElement&&h.focus()}},bD=(t,e,s)=>{t.preventDefault(),Zf(e.allowEscapeKey)&&s(kc.esc)};var fc={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const xD=()=>{const t=cr();Array.from(document.body.children).forEach(s=>{s.contains(t)||(s.hasAttribute("aria-hidden")&&s.setAttribute("data-previous-aria-hidden",s.getAttribute("aria-hidden")||""),s.setAttribute("aria-hidden","true"))})},_N=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},jN=typeof window<"u"&&!!window.GestureEvent,vD=()=>{if(jN&&!Ui(document.body,de.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,jt(document.body,de.iosfix),wD()}},wD=()=>{const t=cr();if(!t)return;let e;t.ontouchstart=s=>{e=_D(s)},t.ontouchmove=s=>{e&&(s.preventDefault(),s.stopPropagation())}},_D=t=>{const e=t.target,s=cr(),r=uy();return!s||!r||jD(t)||ND(t)?!1:e===s||!h0(s)&&e instanceof HTMLElement&&!_M(e,r)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(h0(r)&&r.contains(e))},jD=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",ND=t=>t.touches&&t.touches.length>1,SD=()=>{if(Ui(document.body,de.iosfix)){const t=parseInt(document.body.style.top,10);nn(document.body,de.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},ED=()=>{const t=document.createElement("div");t.className=de["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let lc=null;const AD=t=>{lc===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(lc=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${lc+ED()}px`)},CD=()=>{lc!==null&&(document.body.style.paddingRight=`${lc}px`,lc=null)};function NN(t,e,s,r){Wf()?n_(t,r):(hM(s).then(()=>n_(t,r)),vN(We)),jN?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),my()&&(CD(),SD(),_N()),kD()}function kD(){nn([document.documentElement,document.body],[de.shown,de["height-auto"],de["no-backdrop"],de["toast-shown"]])}function Ia(t){t=OD(t);const e=fc.swalPromiseResolve.get(this),s=TD(this);this.isAwaitingPromise?t.isDismissed||(_d(this),e(t)):s&&e(t)}const TD=t=>{const e=wt();if(!e)return!1;const s=It.innerParams.get(t);if(!s||Ui(e,s.hideClass.popup))return!1;nn(e,s.showClass.popup),jt(e,s.hideClass.popup);const r=cr();return nn(r,s.showClass.backdrop),jt(r,s.hideClass.backdrop),RD(t,e,s),!0};function SN(t){const e=fc.swalPromiseReject.get(this);_d(this),e&&e(t)}const _d=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,It.innerParams.get(t)||t._destroy())},OD=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),RD=(t,e,s)=>{var r;const l=cr(),o=uN(e);typeof s.willClose=="function"&&s.willClose(e),(r=We.eventEmitter)===null||r===void 0||r.emit("willClose",e),o?MD(t,e,l,s.returnFocus,s.didClose):NN(t,l,s.returnFocus,s.didClose)},MD=(t,e,s,r,l)=>{We.swalCloseEventFinishedCallback=NN.bind(null,t,s,r,l);const o=function(u){if(u.target===e){var h;(h=We.swalCloseEventFinishedCallback)===null||h===void 0||h.call(We),delete We.swalCloseEventFinishedCallback,e.removeEventListener("animationend",o),e.removeEventListener("transitionend",o)}};e.addEventListener("animationend",o),e.addEventListener("transitionend",o)},n_=(t,e)=>{setTimeout(()=>{var s;typeof e=="function"&&e.bind(t.params)(),(s=We.eventEmitter)===null||s===void 0||s.emit("didClose"),t._destroy&&t._destroy()})},mc=t=>{let e=wt();if(e||new zt,e=wt(),!e)return;const s=Cc();Wf()?tr(Ec()):DD(e,t),Is(s),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},DD=(t,e)=>{const s=xd(),r=Cc();!s||!r||(!e&&vr(ri())&&(e=ri()),Is(s),e&&(tr(e),r.setAttribute("data-button-to-replace",e.className),s.insertBefore(r,e)),jt([t,s],de.loading))},LD=(t,e)=>{e.input==="select"||e.input==="radio"?UD(t,e):["text","email","number","tel","textarea"].some(s=>s===e.input)&&(oy(e.inputValue)||cy(e.inputValue))&&(mc(ri()),zD(t,e))},qD=(t,e)=>{const s=t.getInput();if(!s)return null;switch(e.input){case"checkbox":return PD(s);case"radio":return ID(s);case"file":return $D(s);default:return e.inputAutoTrim?s.value.trim():s.value}},PD=t=>t.checked?1:0,ID=t=>t.checked?t.value:null,$D=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,UD=(t,e)=>{const s=wt();if(!s)return;const r=l=>{e.input==="select"?BD(s,Sf(l),e):e.input==="radio"&&FD(s,Sf(l),e)};oy(e.inputOptions)||cy(e.inputOptions)?(mc(ri()),yd(e.inputOptions).then(l=>{t.hideLoading(),r(l)})):typeof e.inputOptions=="object"?r(e.inputOptions):Hl(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},zD=(t,e)=>{const s=t.getInput();s&&(tr(s),yd(e.inputValue).then(r=>{s.value=e.input==="number"?`${parseFloat(r)||0}`:`${r}`,Is(s),s.focus(),t.hideLoading()}).catch(r=>{Hl(`Error in inputValue promise: ${r}`),s.value="",Is(s),s.focus(),t.hideLoading()}))};function BD(t,e,s){const r=Pa(t,de.select);if(!r)return;const l=(o,u,h)=>{const f=document.createElement("option");f.value=h,Ir(f,u),f.selected=EN(h,s.inputValue),o.appendChild(f)};e.forEach(o=>{const u=o[0],h=o[1];if(Array.isArray(h)){const f=document.createElement("optgroup");f.label=u,f.disabled=!1,r.appendChild(f),h.forEach(p=>l(f,p[1],p[0]))}else l(r,h,u)}),r.focus()}function FD(t,e,s){const r=Pa(t,de.radio);if(!r)return;e.forEach(o=>{const u=o[0],h=o[1],f=document.createElement("input"),p=document.createElement("label");f.type="radio",f.name=de.radio,f.value=u,EN(u,s.inputValue)&&(f.checked=!0);const g=document.createElement("span");Ir(g,h),g.className=de.label,p.appendChild(f),p.appendChild(g),r.appendChild(p)});const l=r.querySelectorAll("input");l.length&&l[0].focus()}const Sf=t=>{const e=[];return t instanceof Map?t.forEach((s,r)=>{let l=s;typeof l=="object"&&(l=Sf(l)),e.push([r,l])}):Object.keys(t).forEach(s=>{let r=t[s];typeof r=="object"&&(r=Sf(r)),e.push([s,r])}),e},EN=(t,e)=>!!e&&e.toString()===t.toString(),HD=t=>{const e=It.innerParams.get(t);t.disableButtons(),e.input?AN(t,"confirm"):wy(t,!0)},VD=t=>{const e=It.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?AN(t,"deny"):vy(t,!1)},GD=(t,e)=>{t.disableButtons(),e(kc.cancel)},AN=(t,e)=>{const s=It.innerParams.get(t);if(!s.input){Hl(`The "input" parameter is needed to be set when using returnInputValueOn${ly(e)}`);return}const r=t.getInput(),l=qD(t,s);s.inputValidator?ZD(t,l,e):r&&!r.checkValidity()?(t.enableButtons(),t.showValidationMessage(s.validationMessage||r.validationMessage)):e==="deny"?vy(t,l):wy(t,l)},ZD=(t,e,s)=>{const r=It.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>yd(r.inputValidator(e,r.validationMessage))).then(o=>{t.enableButtons(),t.enableInput(),o?t.showValidationMessage(o):s==="deny"?vy(t,e):wy(t,e)})},vy=(t,e)=>{const s=It.innerParams.get(t||void 0);s.showLoaderOnDeny&&mc(Vl()),s.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>yd(s.preDeny(e,s.validationMessage))).then(l=>{l===!1?(t.hideLoading(),_d(t)):t.close({isDenied:!0,value:typeof l>"u"?e:l})}).catch(l=>CN(t||void 0,l))):t.close({isDenied:!0,value:e})},i_=(t,e)=>{t.close({isConfirmed:!0,value:e})},CN=(t,e)=>{t.rejectPromise(e)},wy=(t,e)=>{const s=It.innerParams.get(t||void 0);s.showLoaderOnConfirm&&mc(),s.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>yd(s.preConfirm(e,s.validationMessage))).then(l=>{vr(Yf())||l===!1?(t.hideLoading(),_d(t)):i_(t,typeof l>"u"?e:l)}).catch(l=>CN(t||void 0,l))):i_(t,e)};function Ef(){const t=It.innerParams.get(this);if(!t)return;const e=It.domCache.get(this);tr(e.loader),Wf()?t.icon&&Is(Ec()):YD(e),nn([e.popup,e.actions],de.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const YD=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?Is(e[0],"inline-block"):wM()&&tr(t.actions)};function kN(){const t=It.innerParams.get(this),e=It.domCache.get(this);return e?Qf(e.popup,t.input):null}function TN(t,e,s){const r=It.domCache.get(t);e.forEach(l=>{r[l].disabled=s})}function ON(t,e){const s=wt();if(!(!s||!t))if(t.type==="radio"){const r=s.querySelectorAll(`[name="${de.radio}"]`);for(let l=0;l<r.length;l++)r[l].disabled=e}else t.disabled=e}function RN(){TN(this,["confirmButton","denyButton","cancelButton"],!1)}function MN(){TN(this,["confirmButton","denyButton","cancelButton"],!0)}function DN(){ON(this.getInput(),!1)}function LN(){ON(this.getInput(),!0)}function qN(t){const e=It.domCache.get(this),s=It.innerParams.get(this);Ir(e.validationMessage,t),e.validationMessage.className=de["validation-message"],s.customClass&&s.customClass.validationMessage&&jt(e.validationMessage,s.customClass.validationMessage),Is(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",de["validation-message"]),oN(r),jt(r,de.inputerror))}function PN(){const t=It.domCache.get(this);t.validationMessage&&tr(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),nn(e,de.inputerror))}const oc={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},KD=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],WD={allowEnterKey:void 0},QD=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],IN=t=>Object.prototype.hasOwnProperty.call(oc,t),$N=t=>KD.indexOf(t)!==-1,UN=t=>WD[t],XD=t=>{IN(t)||lr(`Unknown parameter "${t}"`)},JD=t=>{QD.includes(t)&&lr(`The parameter "${t}" is incompatible with toasts`)},eL=t=>{const e=UN(t);e&&nN(t,e)},zN=t=>{t.backdrop===!1&&t.allowOutsideClick&&lr('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&lr(`Invalid theme "${t.theme}"`);for(const e in t)XD(e),t.toast&&JD(e),eL(e)};function BN(t){const e=cr(),s=wt(),r=It.innerParams.get(this);if(!s||Ui(s,r.hideClass.popup)){lr("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const l=tL(t),o=Object.assign({},r,l);zN(o),e.dataset.swal2Theme=o.theme,bN(this,o),It.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const tL=t=>{const e={};return Object.keys(t).forEach(s=>{$N(s)?e[s]=t[s]:lr(`Invalid parameter to update: ${s}`)}),e};function FN(){const t=It.domCache.get(this),e=It.innerParams.get(this);if(!e){HN(this);return}t.popup&&We.swalCloseEventFinishedCallback&&(We.swalCloseEventFinishedCallback(),delete We.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),We.eventEmitter.emit("didDestroy"),sL(this)}const sL=t=>{HN(t),delete t.params,delete We.keydownHandler,delete We.keydownTarget,delete We.currentInstance},HN=t=>{t.isAwaitingPromise?(wg(It,t),t.isAwaitingPromise=!0):(wg(fc,t),wg(It,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},wg=(t,e)=>{for(const s in t)t[s].delete(e)};var rL=Object.freeze({__proto__:null,_destroy:FN,close:Ia,closeModal:Ia,closePopup:Ia,closeToast:Ia,disableButtons:MN,disableInput:LN,disableLoading:Ef,enableButtons:RN,enableInput:DN,getInput:kN,handleAwaitingPromise:_d,hideLoading:Ef,rejectPromise:SN,resetValidationMessage:PN,showValidationMessage:qN,update:BN});const nL=(t,e,s)=>{t.toast?iL(t,e,s):(lL(e),oL(e),cL(t,e,s))},iL=(t,e,s)=>{e.popup.onclick=()=>{t&&(aL(t)||t.timer||t.input)||s(kc.close)}},aL=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let Af=!1;const lL=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(Af=!0)}}},oL=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(s){t.popup.onmouseup=()=>{},(s.target===t.popup||s.target instanceof HTMLElement&&t.popup.contains(s.target))&&(Af=!0)}}},cL=(t,e,s)=>{e.container.onclick=r=>{if(Af){Af=!1;return}r.target===e.container&&Zf(t.allowOutsideClick)&&s(kc.backdrop)}},uL=t=>typeof t=="object"&&t.jquery,a_=t=>t instanceof Element||uL(t),dL=t=>{const e={};return typeof t[0]=="object"&&!a_(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((s,r)=>{const l=t[r];typeof l=="string"||a_(l)?e[s]=l:l!==void 0&&Hl(`Unexpected type of ${s}! Expected "string" or "Element", got ${typeof l}`)}),e};function hL(...t){return new this(...t)}function fL(t){class e extends this{_main(r,l){return super._main(r,Object.assign({},t,l))}}return e}const mL=()=>We.timeout&&We.timeout.getTimerLeft(),VN=()=>{if(We.timeout)return jM(),We.timeout.stop()},GN=()=>{if(We.timeout){const t=We.timeout.start();return gy(t),t}},pL=()=>{const t=We.timeout;return t&&(t.running?VN():GN())},gL=t=>{if(We.timeout){const e=We.timeout.increase(t);return gy(e,!0),e}},yL=()=>!!(We.timeout&&We.timeout.isRunning());let l_=!1;const m0={};function bL(t="data-swal-template"){m0[t]=this,l_||(document.body.addEventListener("click",xL),l_=!0)}const xL=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const s in m0){const r=e.getAttribute(s);if(r){m0[s].fire({template:r});return}}};let vL=class{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,s){const r=this._getHandlersByEventName(e);r.includes(s)||r.push(s)}once(e,s){const r=(...l)=>{this.removeListener(e,r),s.apply(this,l)};this.on(e,r)}emit(e,...s){this._getHandlersByEventName(e).forEach(r=>{try{r.apply(this,s)}catch(l){console.error(l)}})}removeListener(e,s){const r=this._getHandlersByEventName(e),l=r.indexOf(s);l>-1&&r.splice(l,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}};We.eventEmitter=new vL;const wL=(t,e)=>{We.eventEmitter.on(t,e)},_L=(t,e)=>{We.eventEmitter.once(t,e)},jL=(t,e)=>{if(!t){We.eventEmitter.reset();return}e?We.eventEmitter.removeListener(t,e):We.eventEmitter.removeAllListeners(t)};var NL=Object.freeze({__proto__:null,argsToParams:dL,bindClickHandler:bL,clickCancel:dD,clickConfirm:xN,clickDeny:uD,enableLoading:mc,fire:hL,getActions:xd,getCancelButton:Ac,getCloseButton:hy,getConfirmButton:ri,getContainer:cr,getDenyButton:Vl,getFocusableElements:fy,getFooter:lN,getHtmlContainer:uy,getIcon:Ec,getIconContent:gM,getImage:aN,getInputLabel:yM,getLoader:Cc,getPopup:wt,getProgressSteps:dy,getTimerLeft:mL,getTimerProgressBar:Kf,getTitle:iN,getValidationMessage:Yf,increaseTimer:gL,isDeprecatedParameter:UN,isLoading:xM,isTimerRunning:yL,isUpdatableParameter:$N,isValidParameter:IN,isVisible:cD,mixin:fL,off:jL,on:wL,once:_L,resumeTimer:GN,showLoading:mc,stopTimer:VN,toggleTimer:pL});class SL{constructor(e,s){this.callback=e,this.remaining=s,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const s=this.running;return s&&this.stop(),this.remaining+=e,s&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const ZN=["swal-title","swal-html","swal-footer"],EL=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const s=e.content;return DL(s),Object.assign(AL(s),CL(s),kL(s),TL(s),OL(s),RL(s),ML(s,ZN))},AL=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(r=>{Dl(r,["name","value"]);const l=r.getAttribute("name"),o=r.getAttribute("value");!l||!o||(typeof oc[l]=="boolean"?e[l]=o!=="false":typeof oc[l]=="object"?e[l]=JSON.parse(o):e[l]=o)}),e},CL=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(r=>{const l=r.getAttribute("name"),o=r.getAttribute("value");!l||!o||(e[l]=new Function(`return ${o}`)())}),e},kL=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(r=>{Dl(r,["type","color","aria-label"]);const l=r.getAttribute("type");!l||!["confirm","cancel","deny"].includes(l)||(e[`${l}ButtonText`]=r.innerHTML,e[`show${ly(l)}Button`]=!0,r.hasAttribute("color")&&(e[`${l}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(e[`${l}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),e},TL=t=>{const e={},s=t.querySelector("swal-image");return s&&(Dl(s,["src","width","height","alt"]),s.hasAttribute("src")&&(e.imageUrl=s.getAttribute("src")||void 0),s.hasAttribute("width")&&(e.imageWidth=s.getAttribute("width")||void 0),s.hasAttribute("height")&&(e.imageHeight=s.getAttribute("height")||void 0),s.hasAttribute("alt")&&(e.imageAlt=s.getAttribute("alt")||void 0)),e},OL=t=>{const e={},s=t.querySelector("swal-icon");return s&&(Dl(s,["type","color"]),s.hasAttribute("type")&&(e.icon=s.getAttribute("type")),s.hasAttribute("color")&&(e.iconColor=s.getAttribute("color")),e.iconHtml=s.innerHTML),e},RL=t=>{const e={},s=t.querySelector("swal-input");s&&(Dl(s,["type","label","placeholder","value"]),e.input=s.getAttribute("type")||"text",s.hasAttribute("label")&&(e.inputLabel=s.getAttribute("label")),s.hasAttribute("placeholder")&&(e.inputPlaceholder=s.getAttribute("placeholder")),s.hasAttribute("value")&&(e.inputValue=s.getAttribute("value")));const r=Array.from(t.querySelectorAll("swal-input-option"));return r.length&&(e.inputOptions={},r.forEach(l=>{Dl(l,["value"]);const o=l.getAttribute("value");if(!o)return;const u=l.innerHTML;e.inputOptions[o]=u})),e},ML=(t,e)=>{const s={};for(const r in e){const l=e[r],o=t.querySelector(l);o&&(Dl(o,[]),s[l.replace(/^swal-/,"")]=o.innerHTML.trim())}return s},DL=t=>{const e=ZN.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(s=>{const r=s.tagName.toLowerCase();e.includes(r)||lr(`Unrecognized element <${r}>`)})},Dl=(t,e)=>{Array.from(t.attributes).forEach(s=>{e.indexOf(s.name)===-1&&lr([`Unrecognized attribute "${s.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},YN=10,LL=t=>{const e=cr(),s=wt();typeof t.willOpen=="function"&&t.willOpen(s),We.eventEmitter.emit("willOpen",s);const l=window.getComputedStyle(document.body).overflowY;IL(e,s,t),setTimeout(()=>{qL(e,s)},YN),my()&&(PL(e,t.scrollbarPadding,l),xD()),!Wf()&&!We.previousActiveElement&&(We.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(s)),We.eventEmitter.emit("didOpen",s),nn(e,de["no-transition"])},Cf=t=>{const e=wt();if(t.target!==e)return;const s=cr();e.removeEventListener("animationend",Cf),e.removeEventListener("transitionend",Cf),s.style.overflowY="auto"},qL=(t,e)=>{uN(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",Cf),e.addEventListener("transitionend",Cf)):t.style.overflowY="auto"},PL=(t,e,s)=>{vD(),e&&s!=="hidden"&&AD(s),setTimeout(()=>{t.scrollTop=0})},IL=(t,e,s)=>{jt(t,s.showClass.backdrop),s.animation?(e.style.setProperty("opacity","0","important"),Is(e,"grid"),setTimeout(()=>{jt(e,s.showClass.popup),e.style.removeProperty("opacity")},YN)):Is(e,"grid"),jt([document.documentElement,document.body],de.shown),s.heightAuto&&s.backdrop&&!s.toast&&jt([document.documentElement,document.body],de["height-auto"])};var o_={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function $L(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=o_.email),t.input==="url"&&(t.inputValidator=o_.url))}function UL(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(lr('Target parameter is not valid, defaulting to "body"'),t.target="body")}function zL(t){$L(t),t.showLoaderOnConfirm&&!t.preConfirm&&lr(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),UL(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),OM(t)}let Qn;var Hh=new WeakMap;class hs{constructor(...e){if(oM(this,Hh,void 0),typeof window>"u")return;Qn=this;const s=Object.freeze(this.constructor.argsToParams(e));this.params=s,this.isAwaitingPromise=!1,cM(Hh,this,this._main(Qn.params))}_main(e,s={}){if(zN(Object.assign({},s,e)),We.currentInstance){const o=fc.swalPromiseResolve.get(We.currentInstance),{isAwaitingPromise:u}=We.currentInstance;We.currentInstance._destroy(),u||o({isDismissed:!0}),my()&&_N()}We.currentInstance=Qn;const r=FL(e,s);zL(r),Object.freeze(r),We.timeout&&(We.timeout.stop(),delete We.timeout),clearTimeout(We.restoreFocusTimeout);const l=HL(Qn);return bN(Qn,r),It.innerParams.set(Qn,r),BL(Qn,l,r)}then(e){return X1(Hh,this).then(e)}finally(e){return X1(Hh,this).finally(e)}}const BL=(t,e,s)=>new Promise((r,l)=>{const o=u=>{t.close({isDismissed:!0,dismiss:u})};fc.swalPromiseResolve.set(t,r),fc.swalPromiseReject.set(t,l),e.confirmButton.onclick=()=>{HD(t)},e.denyButton.onclick=()=>{VD(t)},e.cancelButton.onclick=()=>{GD(t,o)},e.closeButton.onclick=()=>{o(kc.close)},nL(s,e,o),hD(We,s,o),LD(t,s),LL(s),VL(We,s,o),GL(e,s),setTimeout(()=>{e.container.scrollTop=0})}),FL=(t,e)=>{const s=EL(t),r=Object.assign({},oc,e,s,t);return r.showClass=Object.assign({},oc.showClass,r.showClass),r.hideClass=Object.assign({},oc.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},HL=t=>{const e={popup:wt(),container:cr(),actions:xd(),confirmButton:ri(),denyButton:Vl(),cancelButton:Ac(),loader:Cc(),closeButton:hy(),validationMessage:Yf(),progressSteps:dy()};return It.domCache.set(t,e),e},VL=(t,e,s)=>{const r=Kf();tr(r),e.timer&&(t.timeout=new SL(()=>{s("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(Is(r),qr(r,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&gy(e.timer)})))},GL=(t,e)=>{if(!e.toast){if(!Zf(e.allowEnterKey)){nN("allowEnterKey"),KL();return}ZL(t)||YL(t,e)||f0(-1,1)}},ZL=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const s of e)if(s instanceof HTMLElement&&vr(s))return s.focus(),!0;return!1},YL=(t,e)=>e.focusDeny&&vr(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&vr(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&vr(t.confirmButton)?(t.confirmButton.focus(),!0):!1,KL=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const t=new Date,e=localStorage.getItem("swal-initiation");e?(t.getTime()-Date.parse(e))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const s=document.createElement("audio");s.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",s.loop=!0,document.body.appendChild(s),setTimeout(()=>{s.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${t}`)}hs.prototype.disableButtons=MN;hs.prototype.enableButtons=RN;hs.prototype.getInput=kN;hs.prototype.disableInput=LN;hs.prototype.enableInput=DN;hs.prototype.hideLoading=Ef;hs.prototype.disableLoading=Ef;hs.prototype.showValidationMessage=qN;hs.prototype.resetValidationMessage=PN;hs.prototype.close=Ia;hs.prototype.closePopup=Ia;hs.prototype.closeModal=Ia;hs.prototype.closeToast=Ia;hs.prototype.rejectPromise=SN;hs.prototype.update=BN;hs.prototype._destroy=FN;Object.assign(hs,NL);Object.keys(rL).forEach(t=>{hs[t]=function(...e){return Qn&&Qn[t]?Qn[t](...e):null}});hs.DismissReason=kc;hs.version="11.22.2";const zt=hs;zt.default=zt;typeof document<"u"&&function(t,e){var s=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(s),s.styleSheet)s.styleSheet.disabled||(s.styleSheet.cssText=e);else try{s.innerHTML=e}catch{s.innerText=e}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const ka={customClass:{popup:"rounded-lg shadow-xl",title:"text-lg font-semibold text-gray-900",htmlContainer:"text-sm text-gray-600",confirmButton:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",cancelButton:"bg-gray-300 hover:bg-gray-400 text-gray-700 font-medium py-2 px-4 rounded-md transition-colors mr-2",denyButton:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition-colors mr-2"},buttonsStyling:!1},kf={success:(t,e)=>zt.fire({...ka,icon:"success",title:t,text:e,timer:3e3,timerProgressBar:!0,showConfirmButton:!1}),error:(t,e)=>zt.fire({...ka,icon:"error",title:t,text:e,confirmButtonText:"OK"}),warning:(t,e)=>zt.fire({...ka,icon:"warning",title:t,text:e,confirmButtonText:"OK"}),info:(t,e)=>zt.fire({...ka,icon:"info",title:t,text:e,confirmButtonText:"OK"}),confirm:(t,e,s="Yes",r="Cancel")=>zt.fire({...ka,icon:"question",title:t,text:e,showCancelButton:!0,confirmButtonText:s,cancelButtonText:r}),confirmDelete:t=>zt.fire({...ka,icon:"warning",title:"Are you sure?",text:`Do you want to delete ${t}? This action cannot be undone.`,showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",customClass:{...ka.customClass,confirmButton:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}}),loading:(t="Processing...")=>zt.fire({...ka,title:t,allowEscapeKey:!1,allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{zt.showLoading()}}),toast:{success:t=>zt.fire({toast:!0,position:"top-end",icon:"success",title:t,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}}),error:t=>zt.fire({toast:!0,position:"top-end",icon:"error",title:t,showConfirmButton:!1,timer:4e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}}),info:t=>zt.fire({toast:!0,position:"top-end",icon:"info",title:t,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}})},copyToClipboard:(t,e="Copied to clipboard!")=>{navigator.clipboard.writeText(t).then(()=>{kf.toast.success(e)}).catch(()=>{kf.toast.error("Failed to copy to clipboard")})}},ye=(t,e,s)=>kf[t](e,s),KN=[{id:25,name:"Learning Circle Interactive Course",points_per_hour:1},{id:24,name:"Mentor TESOL teacher",points_per_hour:1},{id:23,name:"Attend industry webinar",points_per_hour:1},{id:15,name:"Attend industry PD event",points_per_hour:1},{id:14,name:"Attend English Australia PD event",points_per_hour:1},{id:17,name:"Present at industry event (include preparation time)",points_per_hour:2},{id:21,name:"Attend in-house PD or Training event",points_per_hour:1},{id:22,name:"Present at in-house PD event (include preparation time)",points_per_hour:2},{id:9,name:"Attend English Australia webinar",points_per_hour:1},{id:12,name:"Watch recorded webinar",points_per_hour:1},{id:18,name:"Peer-observe someone's lesson",points_per_hour:1},{id:19,name:"Be observed teaching (including feedback)",points_per_hour:1},{id:20,name:"Complete professional course",points_per_hour:1},{id:10,name:"Attend Industry Training",points_per_hour:1},{id:13,name:"Read journal article",points_per_hour:.5},{id:11,name:"Read professional article",points_per_hour:.5}];let WL=class cf{static async getUserActivities(e){try{const{data:s,error:r}=await J.from("cpd_activities").select("*").eq("user_id",e).order("date_completed",{ascending:!1});if(r)throw r;return s||[]}catch(s){throw console.error("Error fetching CPD activities:",s),s}}static async createActivity(e,s,r){try{const[l,o,u]=await Promise.all([cf.getCPDSettings(),cf.getCategorySettings(),J.from("members").select("id").eq("email",r).single()]),h=o.find(R=>R.category_id===e.category_id),f=KN.find(R=>R.id===e.category_id),p=h?.points_per_hour||f?.points_per_hour||1,g=h?.category_name||f?.name||"Unknown Category",v=(e.hours+e.minutes/60)*p,w="approved",x={approved_at:new Date().toISOString(),approved_by:"auto-approved"};let j=null,N=null;if(e.evidence){const R=e.evidence.name.split(".").pop(),B=`cpd-evidence/${`cpd-evidence-${s}-${Date.now()}.${R}`}`,{error:A}=await J.storage.from("profiles").upload(B,e.evidence);if(!A){const{data:{publicUrl:C}}=J.storage.from("profiles").getPublicUrl(B);j=C,N=e.evidence.name}}const T={user_id:s,member_id:u.data?.id||null,category_id:e.category_id,category_name:g,activity_title:e.activity_title,description:e.description,provider:e.provider,date_completed:e.date_completed,hours:e.hours,minutes:e.minutes,points:v,evidence_url:j,evidence_filename:N,status:w,created_by:s,...x},{data:S,error:k}=await J.from("cpd_activities").insert(T).select().single();if(k)throw k;return ye("success","CPD activity added and automatically approved!"),S}catch(l){throw console.error("Error creating CPD activity:",l),ye("error","Failed to add CPD activity"),l}}static async updateActivity(e,s){try{const{data:r,error:l}=await J.from("cpd_activities").update(s).eq("id",e).select().single();if(l)throw l;return ye("success","CPD activity updated successfully!"),r}catch(r){throw console.error("Error updating CPD activity:",r),ye("error","Failed to update CPD activity"),r}}static async deleteActivity(e){try{const{error:s}=await J.from("cpd_activities").delete().eq("id",e);if(s)throw s;ye("success","CPD activity deleted successfully!")}catch(s){throw console.error("Error deleting CPD activity:",s),ye("error","Failed to delete CPD activity"),s}}static async getTotalPoints(e){try{const{data:s,error:r}=await J.from("cpd_activities").select("points").eq("user_id",e).eq("status","approved");if(r)throw r;return s?.reduce((l,o)=>l+(o.points||0),0)||0}catch(s){return console.error("Error calculating total points:",s),0}}static async getYearlyPoints(e,s){try{const r=`${s}-01-01`,l=`${s}-12-31`,{data:o,error:u}=await J.from("cpd_activities").select("points").eq("user_id",e).eq("status","approved").gte("date_completed",r).lte("date_completed",l);if(u)throw u;return o?.reduce((h,f)=>h+(f.points||0),0)||0}catch(r){return console.error("Error calculating yearly points:",r),0}}static async getAllPendingActivities(){try{const{data:e,error:s}=await J.from("cpd_activities").select(`
          *,
          members!inner(first_name, last_name, email)
        `).eq("status","pending").order("created_at",{ascending:!1});if(s)throw s;return e||[]}catch(e){throw console.error("Error fetching pending activities:",e),e}}static async getPendingActivitiesCount(){try{const{count:e,error:s}=await J.from("cpd_activities").select("*",{count:"exact",head:!0}).eq("status","pending");if(s)throw s;return e||0}catch(e){return console.error("Error counting pending activities:",e),0}}static async getAllActivitiesStats(){try{const[e,s,r,l]=await Promise.all([J.from("cpd_activities").select("*",{count:"exact",head:!0}),J.from("cpd_activities").select("*",{count:"exact",head:!0}).eq("status","pending"),J.from("cpd_activities").select("*",{count:"exact",head:!0}).eq("status","approved"),J.from("cpd_activities").select("*",{count:"exact",head:!0}).eq("status","rejected")]);return{total:e.count||0,pending:s.count||0,approved:r.count||0,rejected:l.count||0}}catch(e){return console.error("Error getting activities stats:",e),{total:0,pending:0,approved:0,rejected:0}}}static async approveActivity(e,s){try{const{data:r,error:l}=await J.from("cpd_activities").update({status:"approved",approved_by:s,approved_at:new Date().toISOString(),updated_by:s,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(l)throw l;return ye("success","CPD activity approved successfully!"),r}catch(r){throw console.error("Error approving activity:",r),ye("error","Failed to approve activity"),r}}static async rejectActivity(e,s,r){try{const{data:l,error:o}=await J.from("cpd_activities").update({status:"rejected",approved_by:s,approved_at:new Date().toISOString(),rejection_reason:r,updated_by:s,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(o)throw o;return ye("success","CPD activity rejected"),l}catch(l){throw console.error("Error rejecting activity:",l),ye("error","Failed to reject activity"),l}}static async getCPDSettings(){try{const{data:e,error:s}=await J.from("cpd_settings").select("*").single();if(s){if(s.code==="42P01"||s.message.includes("404")||s.message.includes("relation")||s.message.includes("does not exist"))return console.warn("CPD Settings table not found, using default settings. Please run the setup SQL."),{id:"default",auto_approval_enabled:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};throw s}return e}catch(e){return console.error("Error fetching CPD settings:",e),{id:"default",auto_approval_enabled:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}}static async updateCPDSettings(e){try{const s=await cf.getCPDSettings();if(!s||s.id==="default"){const{data:o,error:u}=await J.from("cpd_settings").insert({...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(u)throw u;return ye("success","CPD settings created successfully!"),o}const{data:r,error:l}=await J.from("cpd_settings").update({...e,updated_at:new Date().toISOString()}).eq("id",s.id).select().single();if(l)throw l.code==="42P01"||l.message.includes("404")||l.message.includes("relation")||l.message.includes("does not exist")?(ye("error","CPD Settings table not found. Please run the setup SQL first."),new Error("Tables not created. Please run the setup SQL in Supabase Studio.")):l;return ye("success","CPD settings updated successfully!"),r}catch(s){console.error("Error updating CPD settings:",s);const r=s.message?.includes("Tables not created")?"Please run the setup SQL first":"Failed to update CPD settings";throw ye("error",r),s}}static async getCategorySettings(){try{const{data:e,error:s}=await J.from("cpd_category_settings").select("*").eq("is_active",!0).order("category_name");if(s){if(s.code==="42P01"||s.message.includes("404")||s.message.includes("relation")||s.message.includes("does not exist"))return console.warn("CPD Category Settings table not found, using hardcoded categories. Please run the setup SQL."),[];throw s}return e||[]}catch(e){return console.error("Error fetching category settings:",e),[]}}static async updateCategorySettings(e,s){try{const{data:r,error:l}=await J.from("cpd_category_settings").update({...s,updated_at:new Date().toISOString()}).eq("category_id",e).select().single();if(l)throw l.code==="42P01"||l.message.includes("404")||l.message.includes("relation")||l.message.includes("does not exist")?(ye("error","CPD Category Settings table not found. Please run the setup SQL first."),new Error("Tables not created. Please run the setup SQL in Supabase Studio.")):l;return ye("success","Category settings updated successfully!"),r}catch(r){console.error("Error updating category settings:",r);const l=r.message?.includes("Tables not created")?"Please run the setup SQL first":"Failed to update category settings";throw ye("error",l),r}}};const Gl={CPDService:WL,CPD_CATEGORIES:KN},QL=[{id:"1",created_at:"2025-01-01T00:00:00Z",updated_at:"2025-01-01T00:00:00Z",first_name:"Joo",last_name:"Silva",email:"joao.silva@example.com",phone:"+61 123 456 789",date_of_birth:"1985-05-15",address_line1:"123 Collins Street",address_line2:null,city:"Melbourne",state:"VIC",postal_code:"3000",country:"Australia",membership_status:"active",membership_type:"premium",membership_start_date:"2025-01-01",membership_end_date:null,profession:"English Teacher",experience_years:10,qualifications:"TESOL Certified, Masters in Education",receive_newsletters:!0,receive_event_notifications:!0,created_by:"demo-user",updated_by:"demo-user",member_roles:[{id:"1",created_at:"2025-01-01T00:00:00Z",member_id:"1",role:"member"}]},{id:"2",created_at:"2025-01-02T00:00:00Z",updated_at:"2025-01-02T00:00:00Z",first_name:"Maria",last_name:"Santos",email:"maria.santos@example.com",phone:"+61 987 654 321",date_of_birth:"1990-08-22",address_line1:"456 Queen Street",address_line2:"Apt 12",city:"Sydney",state:"NSW",postal_code:"2000",country:"Australia",membership_status:"active",membership_type:"standard",membership_start_date:"2025-01-02",membership_end_date:null,profession:"Language Coordinator",experience_years:7,qualifications:"CELTA Certified, Bachelor in Linguistics",receive_newsletters:!0,receive_event_notifications:!1,created_by:"demo-user",updated_by:"demo-user",member_roles:[{id:"2",created_at:"2025-01-02T00:00:00Z",member_id:"2",role:"member"},{id:"3",created_at:"2025-01-02T00:00:00Z",member_id:"2",role:"moderator"}]},{id:"3",created_at:"2025-01-15T00:00:00Z",updated_at:"2025-01-15T00:00:00Z",first_name:"Peter",last_name:"Johnson",email:"peter.johnson@example.com",phone:null,date_of_birth:null,address_line1:null,address_line2:null,city:null,state:null,postal_code:null,country:"Australia",membership_status:"inactive",membership_type:"student",membership_start_date:"2025-01-15",membership_end_date:"2025-12-31",profession:"Student",experience_years:2,qualifications:"Currently studying TESOL",receive_newsletters:!1,receive_event_notifications:!0,created_by:"demo-user",updated_by:"demo-user",member_roles:[{id:"4",created_at:"2025-01-15T00:00:00Z",member_id:"3",role:"member"}]}];class El{static members=[...QL];static nextId=4;static delay(e=300){return new Promise(s=>setTimeout(s,e))}static async getAllMembers(){return await this.delay(),[...this.members]}static async getMemberById(e){return await this.delay(),this.members.find(s=>s.id===e)||null}static async getMemberByEmail(e){return await this.delay(),this.members.find(s=>s.email===e)||null}static async createMember(e){await this.delay();const s={id:this.nextId.toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString(),first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,date_of_birth:e.date_of_birth,address_line1:e.address_line1,address_line2:e.address_line2,city:e.city,state:e.state,postal_code:e.postal_code,country:e.country||"Australia",membership_status:e.membership_status||"active",membership_type:e.membership_type||"standard",membership_start_date:e.membership_start_date||new Date().toISOString().split("T")[0],membership_end_date:e.membership_end_date,profession:e.profession,experience_years:e.experience_years,qualifications:e.qualifications,receive_newsletters:e.receive_newsletters??!0,receive_event_notifications:e.receive_event_notifications??!0,created_by:"demo-user",updated_by:"demo-user",member_roles:[{id:(this.nextId+100).toString(),created_at:new Date().toISOString(),member_id:this.nextId.toString(),role:"member"}]};return this.members.push(s),this.nextId++,{id:s.id,created_at:s.created_at,updated_at:s.updated_at,first_name:s.first_name,last_name:s.last_name,email:s.email,phone:s.phone,date_of_birth:s.date_of_birth,address_line1:s.address_line1,address_line2:s.address_line2,city:s.city,state:s.state,postal_code:s.postal_code,country:s.country,membership_status:s.membership_status,membership_type:s.membership_type,membership_start_date:s.membership_start_date,membership_end_date:s.membership_end_date,profession:s.profession,experience_years:s.experience_years,qualifications:s.qualifications,receive_newsletters:s.receive_newsletters,receive_event_notifications:s.receive_event_notifications,created_by:s.created_by,updated_by:s.updated_by}}static async updateMember(e,s){await this.delay();const r=this.members.findIndex(l=>l.id===e);if(r===-1)throw new Error("Membro no encontrado");return this.members[r]={...this.members[r],...s,updated_at:new Date().toISOString()},this.members[r]}static async deleteMember(e){await this.delay();const s=this.members.findIndex(r=>r.id===e);if(s===-1)throw new Error("Membro no encontrado");this.members.splice(s,1)}static async searchMembers(e){await this.delay();let s=[...this.members];if(e.search){const r=e.search.toLowerCase();s=s.filter(l=>l.first_name.toLowerCase().includes(r)||l.last_name.toLowerCase().includes(r)||l.email.toLowerCase().includes(r))}return e.status&&(s=s.filter(r=>r.membership_status===e.status)),e.type&&(s=s.filter(r=>r.membership_type===e.type)),e.offset&&(s=s.slice(e.offset)),e.limit&&(s=s.slice(0,e.limit)),s}static async addMemberRole(e,s){await this.delay();const r=this.members.find(o=>o.id===e);if(!r)throw new Error("Membro no encontrado");r.member_roles.some(o=>o.role===s)||r.member_roles.push({id:Date.now().toString(),created_at:new Date().toISOString(),member_id:e,role:s})}static async removeMemberRole(e,s){await this.delay();const r=this.members.find(l=>l.id===e);if(!r)throw new Error("Membro no encontrado");r.member_roles=r.member_roles.filter(l=>l.role!==s)}static async addMemberHistory(e,s,r){await this.delay()}static async getMemberHistory(e){return await this.delay(),[]}static async getMemberStats(){await this.delay();const e=this.members.length,s=this.members.filter(o=>o.membership_status==="active").length,r=new Date;r.setMonth(r.getMonth());const l=this.members.filter(o=>new Date(o.created_at)>=new Date(r.getFullYear(),r.getMonth(),1)).length;return{total:e,active:s,newThisMonth:l,inactive:e-s}}}class Xn{static async isSupabaseAvailable(){try{const{error:e}=await J.from("members").select("id").limit(1);return!e}catch{return!1}}static async getAllMembers(){if(!await this.isSupabaseAvailable())return console.warn("Supabase no disponvel, usando modo demo"),El.getAllMembers();const{data:s,error:r}=await J.from("members").select(`
        *,
        member_roles (*)
      `).order("created_at",{ascending:!1});if(r)throw new Error(`Erro ao buscar membros: ${r.message}`);return s||[]}static async getMemberById(e){if(!await this.isSupabaseAvailable())return El.getMemberById(e);const{data:r,error:l}=await J.from("members").select(`
        *,
        member_roles (*)
      `).eq("id",e).single();if(l){if(l.code==="PGRST116")return null;throw new Error(`Erro ao buscar membro: ${l.message}`)}return r}static async getMemberByEmail(e){if(!await this.isSupabaseAvailable())return El.getMemberByEmail(e);const{data:r,error:l}=await J.from("members").select(`
        *,
        member_roles (*)
      `).eq("email",e).single();if(l){if(l.code==="PGRST116")return null;throw new Error(`Erro ao buscar membro: ${l.message}`)}return r}static async createMember(e){if(!await this.isSupabaseAvailable())return El.createMember(e);const{data:r}=await J.auth.getUser(),l={...e,created_by:r.user?.id,updated_by:r.user?.id},{data:o,error:u}=await J.from("members").insert(l).select().single();if(u)throw new Error(`Erro ao criar membro: ${u.message}`);return await this.addMemberHistory(o.id,"created",{member:e}),o}static async updateMember(e,s){const{data:r}=await J.auth.getUser(),l={...s,updated_by:r.user?.id},{data:o,error:u}=await J.from("members").update(l).eq("id",e).select().single();if(u)throw new Error(`Erro ao atualizar membro: ${u.message}`);return await this.addMemberHistory(e,"updated",{updates:s}),o}static async deleteMember(e){try{await this.addMemberHistory(e,"deleted",{})}catch(r){console.log("Could not add deletion to history:",r)}const{error:s}=await J.from("members").delete().eq("id",e);if(s)throw new Error(`Erro ao deletar membro: ${s.message}`)}static async deleteMultipleMembers(e){if(e.length===0)return{success:0,failed:0};const{error:s}=await J.from("members").delete().in("id",e);if(s){console.error("Bulk delete failed, falling back to individual deletes:",s);let r=0,l=0;for(const o of e)try{await this.deleteMember(o),r++}catch(u){console.error(`Failed to delete member ${o}:`,u),l++}return{success:r,failed:l}}return{success:e.length,failed:0}}static async searchMembers(e){if(!await this.isSupabaseAvailable())return El.searchMembers(e);let r=J.from("members").select(`
        *,
        member_roles (*)
      `);e.search&&(r=r.or(`first_name.ilike.%${e.search}%,last_name.ilike.%${e.search}%,email.ilike.%${e.search}%`)),e.status&&(r=r.eq("membership_status",e.status)),e.type&&(r=r.eq("membership_type",e.type)),e.limit&&(r=r.limit(e.limit)),e.offset&&(r=r.range(e.offset,e.offset+(e.limit||10)-1)),r=r.order("created_at",{ascending:!1});const{data:l,error:o}=await r;if(o)throw new Error(`Erro ao buscar membros: ${o.message}`);return l||[]}static async searchMembersPaginated(e){if(!await this.isSupabaseAvailable()){const p=await El.searchMembers(e),g=(e.page-1)*e.pageSize,b=g+e.pageSize;return{data:p.slice(g,b),count:p.length}}let r=J.from("members").select(`
        *,
        member_roles (*)
      `,{count:"exact"});e.search&&(r=r.or(`first_name.ilike.%${e.search}%,last_name.ilike.%${e.search}%,email.ilike.%${e.search}%`)),e.status&&(r=r.eq("membership_status",e.status)),e.type&&(r=r.eq("membership_type",e.type));const l=(e.page-1)*e.pageSize,o=l+e.pageSize-1;r=r.range(l,o).order("created_at",{ascending:!1});const{data:u,error:h,count:f}=await r;if(h)throw new Error(`Erro ao pesquisar membros: ${h.message}`);return{data:u||[],count:f||0}}static async addMemberRole(e,s){const{error:r}=await J.from("member_roles").insert({member_id:e,role:s});if(r)throw new Error(`Erro ao adicionar role: ${r.message}`);await this.addMemberHistory(e,"role_added",{role:s})}static async removeMemberRole(e,s){const{error:r}=await J.from("member_roles").delete().eq("member_id",e).eq("role",s);if(r)throw new Error(`Erro ao remover role: ${r.message}`);await this.addMemberHistory(e,"role_removed",{role:s})}static async addMemberHistory(e,s,r){const{data:l}=await J.auth.getUser(),{error:o}=await J.from("member_history").insert({member_id:e,action:s,details:r,performed_by:l.user?.id});o&&console.error("Erro ao adicionar histrico:",o.message)}static async getMemberHistory(e){const{data:s,error:r}=await J.from("member_history").select("*").eq("member_id",e).order("created_at",{ascending:!1});if(r)throw new Error(`Erro ao buscar histrico: ${r.message}`);return s||[]}static async getMemberStats(){if(!await this.isSupabaseAvailable())return El.getMemberStats();const{count:s}=await J.from("members").select("*",{count:"exact",head:!0}),{count:r}=await J.from("members").select("*",{count:"exact",head:!0}).eq("membership_status","active"),{count:l}=await J.from("members").select("*",{count:"exact",head:!0}).gte("created_at",new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString());return{total:s||0,active:r||0,newThisMonth:l||0,inactive:(s||0)-(r||0)}}}class Yt{static async getCategories(e=!0){let s=J.from("event_categories").select("*").order("sort_order");e&&(s=s.eq("is_active",!0));const{data:r,error:l}=await s;if(l)throw console.error("Error fetching categories:",l),l;return r||[]}static async getEvents(e){let s=J.from("events").select(`
        *,
        category:event_categories(*)
      `).order("start_date",{ascending:!0});e&&(e.status?.length&&(s=s.in("status",e.status)),e.category?.length&&(s=s.in("category_id",e.category)),e.location_type?.length&&(s=s.in("location_type",e.location_type)),e.date_from&&(s=s.gte("start_date",e.date_from)),e.date_to&&(s=s.lte("start_date",e.date_to)),e.has_cpd!==void 0&&(s=e.has_cpd?s.gt("cpd_points",0):s.eq("cpd_points",0)),e.featured_only&&(s=s.eq("featured",!0)),e.search&&(s=s.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%`)));const{data:r,error:l}=await s;if(l)throw console.error("Error fetching events:",l),l;return r||[]}static async getPublicEvents(){return this.getEvents({status:["published"]})}static async getUpcomingEvents(e=10){const{data:s,error:r}=await J.from("events").select(`
        *,
        category:event_categories(*)
      `).eq("status","published").gte("start_date",new Date().toISOString()).order("start_date",{ascending:!0}).limit(e);if(r)throw console.error("Error fetching upcoming events:",r),r;return s||[]}static async getEventById(e){const{data:s,error:r}=await J.from("events").select(`
        *,
        category:event_categories(*)
      `).eq("id",e).single();if(r)throw console.error("Error fetching event:",r),r;return s}static async getEventBySlug(e){const{data:s,error:r}=await J.from("events").select(`
        *,
        category:event_categories(*)
      `).eq("slug",e).single();if(r)throw console.error("Error fetching event by slug:",r),r;return s}static async createEvent(e){const{data:{session:s}}=await J.auth.getSession();if(!s?.user)throw new Error("User not authenticated");const r={title:e.title,description:e.description||null,short_description:e.short_description||null,category_id:e.category_id||null,start_date:e.start_date,end_date:e.end_date,timezone:e.timezone,location_type:e.location_type,venue_name:e.venue_name||null,address_line1:e.address_line1||null,city:e.city||null,state:e.state||null,postal_code:e.postal_code||null,country:e.country,virtual_link:e.virtual_link||null,capacity:Number(e.capacity)||50,member_price_cents:Math.round((Number(e.member_price)||0)*100),non_member_price_cents:Math.round((Number(e.non_member_price)||0)*100),early_bird_price_cents:e.early_bird_price?Math.round(Number(e.early_bird_price)*100):null,early_bird_end_date:e.early_bird_end_date||null,cpd_points:Number(e.cpd_points)||0,cpd_category:e.cpd_category||null,visibility:e.visibility,featured:!!e.featured,allow_guests:!!e.allow_guests,max_guests_per_registration:Number(e.max_guests_per_registration)||0,requires_approval:!!e.requires_approval,image_url:e.image_url||null,created_by:s.user.id,status:"published"};console.log("Creating event with data:",r);const{data:l,error:o}=await J.from("events").insert(r).select().single();if(o)throw console.error("Error creating event:",o),console.error("Error details:",{message:o.message,details:o.details,hint:o.hint,code:o.code}),o;return l}static async updateEvent(e,s){console.log(" [EventService.updateEvent] Input data:",{id:e,description_length:s.description?.length,description_preview:s.description?.substring(0,100),hasDescription:"description"in s,eventData_keys:Object.keys(s),full_eventData:s});const r={...s};Object.keys(r).forEach(l=>{r[l]===void 0&&delete r[l]}),"image_url"in s&&(r.image_url=s.image_url||null),s.member_price!==void 0&&(r.member_price_cents=Math.round(s.member_price*100),delete r.member_price),s.non_member_price!==void 0&&(r.non_member_price_cents=Math.round(s.non_member_price*100),delete r.non_member_price),s.early_bird_price!==void 0&&(r.early_bird_price_cents=s.early_bird_price?Math.round(s.early_bird_price*100):null,delete r.early_bird_price),console.log(" [EventService.updateEvent] Data for DB:",{id:e,description_length:r.description?.length,description_preview:r.description?.substring(0,100),hasDescription:"description"in r,dataForDb_keys:Object.keys(r),dataForDb_types:Object.fromEntries(Object.entries(r).map(([l,o])=>[l,typeof o])),full_dataForDb:r});try{const{data:l,error:o}=await J.from("events").update(r).eq("id",e).select().single();if(o)throw console.error(" [EventService.updateEvent] Supabase error details:",{error:o,errorMessage:o.message,errorCode:o.code,errorDetails:o.details,errorHint:o.hint}),o;return console.log(" [EventService.updateEvent] Response from Supabase:",{id:l.id,description_length:l.description?.length,description_preview:l.description?.substring(0,100)}),l}catch(l){throw console.error(" [EventService.updateEvent] Network/Request error:",l),l}}static async publishEvent(e){const{data:s,error:r}=await J.from("events").update({status:"published",published_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw console.error("Error publishing event:",r),r;return s}static async cancelEvent(e,s){const{data:r,error:l}=await J.from("events").update({status:"cancelled",cancelled_at:new Date().toISOString(),cancellation_reason:s}).eq("id",e).select().single();if(l)throw console.error("Error cancelling event:",l),l;return r}static async deleteEvent(e){const{error:s}=await J.from("events").delete().eq("id",e);if(s)throw console.error("Error deleting event:",s),s}static async getRegistrations(e){let s=J.from("event_registrations").select(`
        *,
        event:events(*)
      `).order("created_at",{ascending:!1});e&&(e.event_id&&(s=s.eq("event_id",e.event_id)),e.status?.length&&(s=s.in("status",e.status)),e.payment_status?.length&&(s=s.in("payment_status",e.payment_status)),e.attended!==void 0&&(s=s.eq("attended",e.attended)),e.date_from&&(s=s.gte("created_at",e.date_from)),e.date_to&&(s=s.lte("created_at",e.date_to)),e.search&&(s=s.or(`first_name.ilike.%${e.search}%,last_name.ilike.%${e.search}%,email.ilike.%${e.search}%,registration_number.ilike.%${e.search}%`)));const{data:r,error:l}=await s;if(l)throw console.error("Error fetching registrations:",l),l;return r||[]}static async getEventRegistrations(e){return this.getRegistrations({event_id:e})}static async getUserRegistrations(e){const{data:s,error:r}=await J.from("event_registrations").select(`
        *,
        event:events(*)
      `).eq("user_id",e).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching user registrations:",r),r;return s||[]}static async getRegistrationById(e){const{data:s,error:r}=await J.from("event_registrations").select(`
        *,
        event:events(*)
      `).eq("id",e).single();if(r)throw console.error("Error fetching registration:",r),r;return s}static async registerForEvent(e){const s=await this.getEventById(e.event_id);if(!s)throw new Error("Event not found");const l=(await this.getEventRegistrations(e.event_id)).filter(g=>g.status==="confirmed").length;let o="confirmed";if(l>=s.capacity)if(s.waitlist_enabled)o="waitlisted";else throw new Error("Event is full and waitlist is not enabled");let h=s.non_member_price_cents;s.early_bird_price_cents&&s.early_bird_end_date&&new Date<new Date(s.early_bird_end_date)&&(h=s.early_bird_price_cents);const{data:f,error:p}=await J.from("event_registrations").insert({...e,status:o,registration_type:"non_member",amount_paid_cents:h,payment_status:h===0?"exempt":"pending"}).select().single();if(p)throw console.error("Error creating registration:",p),p;return f}static async updateRegistration(e,s){const{data:r,error:l}=await J.from("event_registrations").update(s).eq("id",e).select().single();if(l)throw console.error("Error updating registration:",l),l;return r}static async cancelRegistration(e,s){const{data:r,error:l}=await J.from("event_registrations").update({status:"cancelled",cancelled_at:new Date().toISOString(),cancellation_reason:s}).eq("id",e).select().single();if(l)throw console.error("Error cancelling registration:",l),l;return r}static async checkInRegistration(e,s="manual"){const{data:r,error:l}=await J.from("event_registrations").update({attended:!0,check_in_time:new Date().toISOString(),check_in_method:s}).eq("id",e).select().single();if(l)throw console.error("Error checking in registration:",l),l;return r}static async checkInByQRCode(e){const{data:s,error:r}=await J.from("event_registrations").select("*").eq("qr_code_token",e).single();if(r||!s)throw new Error("Invalid QR code");if(s.attended)throw new Error("Already checked in");return this.checkInRegistration(s.id,"qr_code")}static async getEventStatistics(e){const{data:s,error:r}=await J.from("event_statistics").select("*").eq("id",e).single();if(r)throw console.error("Error fetching event statistics:",r),r;return s}static async getDashboardStatistics(){const{count:e}=await J.from("events").select("*",{count:"exact",head:!0}),{count:s}=await J.from("events").select("*",{count:"exact",head:!0}).eq("status","published").gte("start_date",new Date().toISOString()),{count:r}=await J.from("event_registrations").select("*",{count:"exact",head:!0}).eq("status","confirmed"),{data:l}=await J.from("event_registrations").select("amount_paid_cents").eq("payment_status","paid"),o=l?.reduce((f,p)=>f+(p.amount_paid_cents||0),0)||0,u=await this.getUpcomingEvents(5),{data:h}=await J.from("event_registrations").select(`
        *,
        event:events(title, start_date)
      `).order("created_at",{ascending:!1}).limit(10);return{total_events:e||0,upcoming_events:s||0,total_registrations:r||0,total_revenue:o/100,average_attendance_rate:0,popular_categories:[],recent_registrations:h||[],upcoming_events_list:u}}static async getEventEmails(e){const{data:s,error:r}=await J.from("event_emails").select("*").eq("event_id",e).order("type");if(r)throw console.error("Error fetching event emails:",r),r;return s||[]}static async updateEmailTemplate(e,s){const{data:r,error:l}=await J.from("event_emails").update(s).eq("id",e).select().single();if(l)throw console.error("Error updating email template:",l),l;return r}static formatPrice(e){return new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"}).format(e/100)}static getEventStatus(e){const s=new Date,r=new Date(e.start_date),l=new Date(e.end_date);return e.status==="cancelled"?"Cancelled":e.status==="draft"?"Draft":s<r?"Upcoming":s>=r&&s<=l?"In Progress":"Completed"}static getAvailableSpots(e,s){const r=s.filter(l=>l.status==="confirmed").length;return Math.max(0,e.capacity-r)}static isRegistrationOpen(e){const s=new Date;return!(e.status!=="published"||e.registration_start_date&&s<new Date(e.registration_start_date)||e.registration_end_date&&s>new Date(e.registration_end_date))}}const{CPDService:c_}=Gl,XL=()=>{const{user:t,roles:e}=Bt(),s=or(),[r,l]=O.useState({total:0,pending:0,approved:0,rejected:0}),[o,u]=O.useState([]),[h,f]=O.useState({total:0,active:0,newThisMonth:0,inactive:0}),[p,g]=O.useState({active:0,upcoming:0,past:0}),[b,v]=O.useState(!0);O.useEffect(()=>{w()},[]);const w=async()=>{try{v(!0);const[x,j,N,T]=await Promise.all([c_.getAllActivitiesStats(),c_.getAllPendingActivities(),Xn.getMemberStats(),Yt.getEvents()]);l(x),u(j),f(N);const S=new Date,k=T.filter(U=>U.status==="published"),Z=k.filter(U=>new Date(U.start_date)>S),R=k.filter(U=>new Date(U.end_date)<S);g({active:k.length,upcoming:Z.length,past:R.length})}catch(x){console.error("Error loading dashboard data:",x)}finally{v(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),i.jsxs("p",{className:"text-gray-600",children:["Welcome, ",t?.user_metadata?.full_name||t?.email," | Roles: ",e.join(", ")]})]})})})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsx(ge,{children:i.jsxs(nr,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Members"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:b?"...":h.total})]}),i.jsx("div",{className:"text-3xl",children:""})]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Active: ",b?"...":h.active]})]})}),i.jsx(ge,{children:i.jsxs(nr,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"CPD Activities"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:b?"...":r.total})]}),i.jsx("div",{className:"text-3xl",children:""})]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Pending approval: ",b?"...":r.pending]})]})}),i.jsx(ge,{children:i.jsxs(nr,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Events"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:b?"...":p.active})]}),i.jsx("div",{className:"text-3xl",children:""})]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Upcoming: ",b?"...":p.upcoming]})]})}),i.jsx(ge,{children:i.jsxs(nr,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Points Awarded"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"0"})]}),i.jsx("div",{className:"text-3xl",children:""})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This month: 0"})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ge,{children:[i.jsxs(Nn,{children:[i.jsx(Sn,{className:"flex items-center gap-2",children:" Admin Actions"}),i.jsx(En,{children:"Common administrative tasks"})]}),i.jsx(nr,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsx(Ns,{permission:"APPROVE_CPD",children:i.jsxs(ce,{variant:"outline",className:"w-full justify-start",onClick:()=>s("/cpd/review"),children:[" Review CPD Submissions (",b?"...":`${r.pending} pending`,")"]})}),i.jsx(Ns,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(ce,{variant:"outline",className:"w-full justify-start",onClick:()=>s("/cpd/settings"),children:" CPD Settings & Configuration"})}),i.jsx(Ns,{permission:"CREATE_EVENT",children:i.jsx(ce,{variant:"outline",className:"w-full justify-start",onClick:()=>s("/events"),children:" Create New Event"})}),i.jsx(Ns,{permission:"MANAGE_USERS",children:i.jsx(ce,{variant:"outline",className:"w-full justify-start",onClick:()=>s("/admin/members"),children:" Manage Users"})}),i.jsx(Ns,{permission:"VIEW_USER_REPORTS",children:i.jsx(ce,{variant:"outline",className:"w-full justify-start",onClick:()=>s("/admin"),children:" Generate Reports"})}),i.jsx(Ns,{permission:"ASSIGN_ROLES",children:i.jsx(ce,{variant:"outline",className:"w-full justify-start",onClick:()=>s("/admin/members"),children:" Assign User Roles"})}),i.jsx(Ns,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(ce,{variant:"outline",className:"w-full justify-start",onClick:()=>s("/admin/smtp-settings"),children:" SMTP Settings"})}),i.jsx(Ns,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(ce,{variant:"outline",className:"w-full justify-start",onClick:()=>s("/admin/email-templates"),children:" Email Templates"})}),i.jsx(Ns,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(ce,{variant:"outline",className:"w-full justify-start",onClick:()=>s("/admin/event-reminders"),children:" Event Reminders"})})]})})]}),i.jsxs(ge,{children:[i.jsxs(Nn,{children:[i.jsx(Sn,{className:"flex items-center gap-2",children:" Recent System Activity"}),i.jsx(En,{children:"Latest platform activities and submissions"})]}),i.jsx(nr,{children:i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx("div",{className:"text-4xl mb-2",children:""}),i.jsx("p",{children:"No recent activity"}),i.jsx("p",{className:"text-sm",children:"System activities will appear here"})]})})]})]}),i.jsxs(ge,{className:"mt-6",children:[i.jsxs(Nn,{children:[i.jsxs(Sn,{className:"flex items-center gap-2",children:[" Pending Actions (",b?"...":o.length,")"]}),i.jsx(En,{children:"Items requiring your attention"})]}),i.jsx(nr,{children:b?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.length===0?i.jsxs("div",{className:"text-center py-12 text-gray-500",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"All caught up!"}),i.jsx("p",{className:"text-sm",children:"No pending actions require your attention."})]}):i.jsxs("div",{className:"space-y-4",children:[o.slice(0,5).map(x=>i.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:i.jsx("span",{className:"text-orange-600 font-medium text-sm",children:""})}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["CPD Submission: ",x.activity_title]}),i.jsxs("p",{className:"text-xs text-gray-600",children:["From: ",x.members?.first_name," ",x.members?.last_name," ",x.points," points ",new Date(x.created_at).toLocaleDateString()]})]})]}),i.jsx(ce,{size:"sm",onClick:()=>s("/cpd/review"),className:"text-xs",children:"Review"})]},x.id)),o.length>5&&i.jsx("div",{className:"text-center pt-4 border-t border-gray-200",children:i.jsxs(ce,{variant:"outline",onClick:()=>s("/cpd/review"),className:"text-sm",children:["View All ",o.length," Pending Items"]})})]})})]})]})]})},JL=()=>{const{isAdmin:t}=Gf(),{user:e,isLoading:s}=Bt();return s?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading your dashboard..."})]})}):e?t()?i.jsx(XL,{}):i.jsx(aM,{}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-gray-600",children:"Please log in to access your dashboard."})})})},e8=()=>{const t=or(),{reset:e}=Bt(),s=async()=>{try{await J.auth.signOut(),e(),t("/login")}catch(r){console.error("Erro ao fazer logout:",r),e(),t("/login")}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:i.jsxs(ge,{className:"w-full max-w-md text-center",children:[i.jsxs(Nn,{children:[i.jsx("div",{className:"mx-auto mb-4 text-6xl",children:""}),i.jsx(Sn,{className:"text-2xl font-bold text-gray-900",children:"Access Denied"}),i.jsx(En,{children:"You don't have permission to access this page. Please contact your administrator if you believe this is an error."})]}),i.jsxs(nr,{className:"space-y-4",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsx("p",{children:"Required permissions not found in your account."}),i.jsx("p",{className:"mt-2",children:"Your current roles may not include access to this resource."})]}),i.jsxs("div",{className:"flex flex-col gap-3 pt-4",children:[i.jsx(ce,{onClick:s,className:"w-full",children:"Logout and Try Again"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(ce,{variant:"outline",onClick:()=>t(-1),className:"flex-1",children:"Go Back"}),i.jsx(ce,{variant:"outline",onClick:()=>t("/dashboard"),className:"flex-1",children:"Dashboard"})]})]})]})]})})},$t=({children:t,permission:e,roles:s,requireAll:r=!1,redirectTo:l="/unauthorized"})=>{const{hasPermission:o,hasAnyRole:u,hasAllRoles:h}=Gf(),{rolesLoaded:f,isLoading:p}=Bt();return p||!f?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Verifying permissions..."})]})}):(e?o(e):s?r?h(s):u(s):!0)?i.jsx(i.Fragment,{children:t}):i.jsx(Qu,{to:l,replace:!0})};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s8=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),u_=t=>{const e=s8(t);return e.charAt(0).toUpperCase()+e.slice(1)},WN=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim(),r8=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:l="",children:o,iconNode:u,...h},f)=>O.createElement("svg",{ref:f,...n8,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:WN("lucide",l),...!o&&!r8(h)&&{"aria-hidden":"true"},...h},[...u.map(([p,g])=>O.createElement(p,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=(t,e)=>{const s=O.forwardRef(({className:r,...l},o)=>O.createElement(i8,{ref:o,iconNode:e,className:WN(`lucide-${t8(u_(t))}`,`lucide-${t}`,r),...l}));return s.displayName=u_(t),s};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],rn=Fe("award",a8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],QN=Fe("bell",l8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],d_=Fe("book-open",o8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],u8=Fe("building-2",c8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Tf=Fe("building",d8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],er=Fe("calendar",h8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],h_=Fe("camera",f8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Vh=Fe("check",m8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],g8=Fe("chevron-down",p8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],XN=Fe("chevron-left",y8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],x8=Fe("chevron-right",b8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ll=Fe("circle-alert",v8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ss=Fe("circle-check-big",w8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],p0=Fe("circle-x",_8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ba=Fe("clock",j8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],S8=Fe("code",N8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],JN=Fe("copy",E8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],eS=Fe("credit-card",A8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],k8=Fe("database",C8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],tS=Fe("dollar-sign",T8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],_y=Fe("download",O8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],M8=Fe("ellipsis-vertical",R8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],f_=Fe("external-link",D8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],uf=Fe("eye-off",L8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ti=Fe("eye",q8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Fa=Fe("file-text",P8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],$8=Fe("funnel",I8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],sS=Fe("globe",U8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],B8=Fe("graduation-cap",z8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],H8=Fe("grid-3x3",F8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],G8=Fe("heart",V8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Y8=Fe("info",Z8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],W8=Fe("key",K8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],X8=Fe("list",Q8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Bi=Fe("loader-circle",J8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eq=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],tq=Fe("loader",eq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sq=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],jy=Fe("mail",sq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Tc=Fe("map-pin",rq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nq=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],pc=Fe("plus",nq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iq=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],m_=Fe("refresh-cw",iq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aq=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],jd=Fe("save",aq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lq=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ny=Fe("search",lq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Sy=Fe("send",oq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ql=Fe("settings",cq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uq=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],dq=Fe("share-2",uq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],fq=Fe("shield",hq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mq=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],g0=Fe("square-pen",mq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pq=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],gq=Fe("test-tube",pq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yq=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],bq=Fe("ticket",yq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xq=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ey=Fe("trash-2",xq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],wq=Fe("trending-up",vq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _q=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ay=Fe("triangle-alert",_q);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jq=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Fi=Fe("upload",jq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Nd=Fe("user-check",Nq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Cy=Fe("user-plus",Sq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Aq=Fe("user-x",Eq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ky=Fe("user",Cq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ni=Fe("users",kq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tq=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],rS=Fe("video",Tq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oq=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Hi=Fe("x",Oq),Rq=({children:t})=>{const e=or(),{user:s,roles:r,reset:l}=Bt(),[o,u]=O.useState(!1),h=async()=>{u(!0);try{await J.auth.signOut(),l(),e("/login")}catch(f){console.error("Error signing out:",f)}finally{u(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("nav",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-16",children:[i.jsx("div",{className:"flex items-center space-x-4",children:i.jsx("button",{onClick:()=>e("/dashboard"),className:"flex items-center focus:outline-none",children:i.jsx("img",{src:"/logo-500.png",alt:"English Australia",className:"h-12 w-auto"})})}),i.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[i.jsx("button",{onClick:()=>e("/dashboard"),className:"text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium",children:"Dashboard"}),i.jsx(Ns,{permission:"CREATE_CPD",children:i.jsx("button",{onClick:()=>e("/cpd"),className:"text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium",children:"My CPDs"})}),i.jsx(Ns,{permission:"REGISTER_EVENT",children:i.jsx("button",{onClick:()=>e("/events"),className:"text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium",children:"Events"})}),i.jsx(Ns,{permission:"REGISTER_EVENT",children:i.jsx("button",{onClick:()=>e("/my-registrations"),className:"text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium",children:"My Registrations"})}),i.jsx(Ns,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx("button",{onClick:()=>e("/admin"),className:"text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium",children:"Admin"})}),i.jsx(Ns,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx("button",{onClick:()=>e("/admin/membership"),className:"text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium",children:"Membership"})})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"hidden md:block text-sm text-gray-700",children:[i.jsx("p",{className:"font-medium",children:s?.user_metadata?.full_name||s?.email}),i.jsx("p",{className:"text-xs text-gray-500",children:r.join(", ")||"No roles"})]}),i.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>e("/profile"),className:"flex items-center gap-2",children:[i.jsx(ky,{className:"w-4 h-4"}),"Perfil"]}),i.jsx(ce,{variant:"outline",size:"sm",onClick:h,disabled:o,children:o?"Signing out...":"Sign out"})]})]})})}),i.jsx("main",{children:t})]})},nS=()=>{const[t,e]=O.useState({total:0,active:0,newThisMonth:0,inactive:0}),[s,r]=O.useState(!0);O.useEffect(()=>{(async()=>{try{const u=await Xn.getMemberStats();e(u)}catch(u){console.error("Error loading statistics:",u)}finally{r(!1)}})()},[]);const l=[{title:"Total Members",value:t.total,icon:ni,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Active Members",value:t.active,icon:Nd,color:"text-green-600",bgColor:"bg-green-100"},{title:"New This Month",value:t.newThisMonth,icon:Cy,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Inactive Members",value:t.inactive,icon:Aq,color:"text-red-600",bgColor:"bg-red-100"}];return s?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(o=>i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),i.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})},o))}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:l.map(o=>{const u=o.icon;return i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`p-3 rounded-lg ${o.bgColor}`,children:i.jsx(u,{className:`h-6 w-6 ${o.color}`})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:o.title}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.value})]})]})},o.title)})})},Mq=()=>{const t=or(),e=[{title:"Manage Members",description:"View, create and edit members",icon:ni,color:"text-blue-600",bgColor:"bg-blue-100",onClick:()=>t("/admin/members")},{title:"CPDs",description:"Approve and manage CPD activities",icon:d_,color:"text-purple-600",bgColor:"bg-purple-100",onClick:()=>t("/admin/cpds")},{title:"Approvals",description:"Pending approval items",icon:Nd,color:"text-orange-600",bgColor:"bg-orange-100",onClick:()=>t("/admin/approvals")},{title:"Reports",description:"View reports and statistics",icon:Fa,color:"text-indigo-600",bgColor:"bg-indigo-100",onClick:()=>t("/admin/reports")},{title:"Import Users",description:"Import users from CSV",icon:Cy,color:"text-indigo-600",bgColor:"bg-indigo-100",onClick:()=>t("/admin/import-users")},{title:"Import Activities",description:"Import CPD activities from CSV",icon:Fi,color:"text-teal-600",bgColor:"bg-teal-100",onClick:()=>t("/admin/import-activities")},{title:"Complete Import",description:"Import members, companies & memberships",icon:k8,color:"text-rose-600",bgColor:"bg-rose-100",onClick:()=>t("/admin/import-complete")},{title:"Settings",description:"System settings",icon:ql,color:"text-gray-600",bgColor:"bg-gray-100",onClick:()=>t("/admin/settings")}];return i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Administrative Panel"}),i.jsx("p",{className:"mt-2 text-gray-600",children:"Manage members, events and system settings"})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Member Statistics"}),i.jsx(nS,{})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Administrative Tools"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(s=>{const r=s.icon;return i.jsx(ge,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:s.onClick,children:i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:`p-3 rounded-lg ${s.bgColor}`,children:i.jsx(r,{className:`h-6 w-6 ${s.color}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:s.description}),i.jsx(ce,{variant:"outline",size:"sm",onClick:l=>{l.stopPropagation(),s.onClick()},children:"Access"})]})]})},s.title)})})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(ce,{className:"h-16 text-left justify-start",onClick:()=>t("/admin/members"),children:[i.jsx(ni,{className:"mr-3 h-5 w-5"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"New Member"}),i.jsx("div",{className:"text-xs opacity-75",children:"Register member"})]})]}),i.jsxs(ce,{variant:"outline",className:"h-16 text-left justify-start",onClick:()=>t("/admin/events"),children:[i.jsx(er,{className:"mr-3 h-5 w-5"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"New Event"}),i.jsx("div",{className:"text-xs opacity-75",children:"Create event"})]})]}),i.jsxs(ce,{variant:"outline",className:"h-16 text-left justify-start",onClick:()=>t("/admin/cpds"),children:[i.jsx(d_,{className:"mr-3 h-5 w-5"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Approve CPDs"}),i.jsx("div",{className:"text-xs opacity-75",children:"Review pending"})]})]}),i.jsxs(ce,{variant:"outline",className:"h-16 text-left justify-start",onClick:()=>t("/admin/reports"),children:[i.jsx(Fa,{className:"mr-3 h-5 w-5"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"View Reports"}),i.jsx("div",{className:"text-xs opacity-75",children:"Analytics and metrics"})]})]})]})]})]})};function Dq(t,e={}){const{filename:s=`export-${new Date().toISOString().split("T")[0]}.csv`,headers:r,includeHeaders:l=!0}=e;if(!t||t.length===0){console.warn("No data to export");return}const o=r||Array.from(new Set(t.flatMap(b=>Object.keys(b)))),u=[];l&&u.push(o.map(b=>p_(b)).join(",")),t.forEach(b=>{const v=o.map(w=>{const x=b[w];return p_(Lq(x))});u.push(v.join(","))});const h=u.join(`
`),f=new Blob(["\uFEFF"+h],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a"),g=URL.createObjectURL(f);p.setAttribute("href",g),p.setAttribute("download",s),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(g)}function p_(t){if(t==null)return"";const e=String(t);return e.includes(",")||e.includes('"')||e.includes(`
`)||e.includes("\r")?`"${e.replace(/"/g,'""')}"`:e}function Lq(t){return t==null?"":t instanceof Date?t.toISOString():typeof t=="boolean"?t?"Yes":"No":typeof t=="object"?JSON.stringify(t):String(t)}function iS(t,e){const s=t.map(r=>({"First Name":r.first_name,"Last Name":r.last_name,Email:r.email,Phone:r.phone||"","Membership Status":r.membership_status,"Membership Type":r.membership_type,"Interest Group":r.interest_group||"",City:r.city||"",State:r.state||"",Country:r.country||"Australia",Profession:r.profession||"","Experience Years":r.experience_years||"",Qualifications:r.qualifications||"",Roles:r.member_roles?.map(l=>l.role).join(", ")||"","Member Since":r.membership_start_date?new Date(r.membership_start_date).toLocaleDateString():"",Newsletter:r.receive_newsletters?"Yes":"No","Event Notifications":r.receive_event_notifications?"Yes":"No"}));Dq(s,{filename:e||`members-export-${new Date().toISOString().split("T")[0]}.csv`})}const qq=["Full Provider","Associate Provider","Corporate Affiliate","Professional Affiliate"],Pq=({onMemberSelect:t,onAddMember:e,onEditMember:s})=>{const[r,l]=O.useState([]),[o,u]=O.useState(!0),[h,f]=O.useState(!1),[p,g]=O.useState({search:"",status:"",type:"",interestGroup:"",city:"",state:"",hasRoles:!1}),[b,v]=O.useState(1),[w,x]=O.useState(0),[j]=O.useState(20),N=async()=>{try{u(!0);const R={search:p.search||void 0,status:p.status||void 0,type:p.type||void 0,page:b,pageSize:j},{data:U,count:B}=await Xn.searchMembersPaginated(R);let A=U;p.interestGroup&&(A=A.filter(C=>C.interest_group===p.interestGroup)),p.city&&(A=A.filter(C=>C.city?.toLowerCase().includes(p.city.toLowerCase()))),p.state&&(A=A.filter(C=>C.state?.toLowerCase().includes(p.state.toLowerCase()))),p.hasRoles&&(A=A.filter(C=>C.member_roles&&C.member_roles.length>0)),l(A),x(B)}catch(R){console.error("Error loading members:",R),ye("error","Failed to load members")}finally{u(!1)}};O.useEffect(()=>{N()},[b,p]);const T=async()=>{try{const{data:R}=await Xn.searchMembersPaginated({search:p.search||void 0,status:p.status||void 0,type:p.type||void 0,pageSize:1e4});if(R.length===0){ye("warning","No members to export");return}iS(R),ye("success",`Exported ${R.length} members to CSV`)}catch(R){console.error("Error exporting members:",R),ye("error","Failed to export members")}},S=()=>{g({search:"",status:"",type:"",interestGroup:"",city:"",state:"",hasRoles:!1}),v(1)},k=Object.values(p).filter(R=>R&&R!=="").length,Z=Math.ceil(w/j);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Members Management"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Manage member accounts, roles, and groups"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(ce,{onClick:T,variant:"outline",className:"flex items-center gap-2",children:[i.jsx(_y,{className:"w-4 h-4"}),"Export CSV"]}),e&&i.jsxs(ce,{onClick:e,children:[i.jsx(pc,{className:"w-4 h-4 mr-2"}),"Add Member"]})]})]}),i.jsxs(ge,{className:"p-4",children:[i.jsxs("div",{className:"flex gap-4 items-center",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Ny,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),i.jsx(Ae,{type:"text",placeholder:"Search by name, email, or phone...",value:p.search,onChange:R=>{g(U=>({...U,search:R.target.value})),v(1)},className:"pl-10"})]}),i.jsxs(ce,{variant:"outline",onClick:()=>f(!h),className:`flex items-center gap-2 ${k>0?"border-blue-500":""}`,children:[i.jsx($8,{className:"w-4 h-4"}),"Filters",k>0&&i.jsx("span",{className:"bg-blue-500 text-white text-xs rounded-full px-2 py-0.5",children:k})]})]}),h&&i.jsxs("div",{className:"mt-4 pt-4 border-t grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"status-filter",children:"Membership Status"}),i.jsxs("select",{id:"status-filter",value:p.status,onChange:R=>g(U=>({...U,status:R.target.value})),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"All Status"}),i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"inactive",children:"Inactive"}),i.jsx("option",{value:"suspended",children:"Suspended"}),i.jsx("option",{value:"expired",children:"Expired"})]})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"type-filter",children:"Membership Type"}),i.jsxs("select",{id:"type-filter",value:p.type,onChange:R=>g(U=>({...U,type:R.target.value})),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"All Types"}),i.jsx("option",{value:"standard",children:"Standard"}),i.jsx("option",{value:"premium",children:"Premium"}),i.jsx("option",{value:"student",children:"Student"}),i.jsx("option",{value:"corporate",children:"Corporate"})]})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"group-filter",children:"Interest Group"}),i.jsxs("select",{id:"group-filter",value:p.interestGroup,onChange:R=>g(U=>({...U,interestGroup:R.target.value})),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"All Groups"}),qq.map(R=>i.jsx("option",{value:R,children:R},R))]})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"city-filter",children:"City"}),i.jsx(Ae,{id:"city-filter",type:"text",placeholder:"Filter by city...",value:p.city,onChange:R=>g(U=>({...U,city:R.target.value}))})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"state-filter",children:"State"}),i.jsx(Ae,{id:"state-filter",type:"text",placeholder:"Filter by state...",value:p.state,onChange:R=>g(U=>({...U,state:R.target.value}))})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:p.hasRoles,onChange:R=>g(U=>({...U,hasRoles:R.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),i.jsx("span",{className:"text-sm",children:"Has special roles"})]})}),i.jsx("div",{className:"md:col-span-3 flex justify-end gap-2",children:i.jsxs(ce,{variant:"outline",size:"sm",onClick:S,className:"flex items-center gap-2",children:[i.jsx(Hi,{className:"w-3 h-3"}),"Clear Filters"]})})]})]}),i.jsx(ge,{children:o?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading members..."})]}):r.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(ni,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No members found"}),i.jsx("p",{className:"text-gray-600",children:k>0?"Try adjusting your filters":"Start by adding your first member"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Membership"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Interest Group"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roles"}),i.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(R=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[R.first_name," ",R.last_name]}),R.profession&&i.jsx("div",{className:"text-sm text-gray-500",children:R.profession})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-gray-900",children:R.email}),R.phone&&i.jsx("div",{className:"text-gray-500",children:R.phone})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("span",{className:`inline-flex text-xs font-medium px-2 py-1 rounded-full ${R.membership_status==="active"?"bg-green-100 text-green-800":R.membership_status==="inactive"?"bg-gray-100 text-gray-800":R.membership_status==="suspended"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:R.membership_status}),i.jsx("span",{className:"text-xs text-gray-500 capitalize",children:R.membership_type})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:"text-sm text-gray-900",children:R.interest_group||"-"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"text-sm text-gray-900",children:[R.city,R.state].filter(Boolean).join(", ")||"-"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"flex flex-wrap gap-1",children:R.member_roles?.map(U=>i.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-purple-100 text-purple-800",children:U.role},U.id))||"-"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[t&&i.jsx("button",{onClick:()=>t(R),className:"text-gray-400 hover:text-gray-600",title:"View details",children:i.jsx(ti,{className:"w-4 h-4"})}),s&&i.jsx("button",{onClick:()=>s(R),className:"text-blue-400 hover:text-blue-600",title:"Edit member",children:i.jsx(g0,{className:"w-4 h-4"})})]})})]},R.id))})]})}),Z>1&&i.jsxs("div",{className:"px-6 py-4 border-t flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(b-1)*j+1," to"," ",Math.min(b*j,w)," of ",w," members"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ce,{variant:"outline",size:"sm",onClick:()=>v(R=>Math.max(1,R-1)),disabled:b===1,children:i.jsx(XN,{className:"w-4 h-4"})}),i.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,Z)},(R,U)=>{let B;return Z<=5||b<=3?B=U+1:b>=Z-2?B=Z-4+U:B=b-2+U,i.jsx(ce,{variant:b===B?"primary":"outline",size:"sm",onClick:()=>v(B),children:B},B)})}),i.jsx(ce,{variant:"outline",size:"sm",onClick:()=>v(R=>Math.min(Z,R+1)),disabled:b===Z,children:i.jsx(x8,{className:"w-4 h-4"})})]})]})]})})]})},Gh=[{code:"AU",name:"Australia",flag:"",dialCode:"+61",format:"### ### ###",maxLength:9},{code:"US",name:"United States",flag:"",dialCode:"+1",format:"(###) ###-####",maxLength:10},{code:"BR",name:"Brazil",flag:"",dialCode:"+55",format:"(##) #####-####",maxLength:11},{code:"GB",name:"United Kingdom",flag:"",dialCode:"+44",format:"#### ### ###",maxLength:10},{code:"CA",name:"Canada",flag:"",dialCode:"+1",format:"(###) ###-####",maxLength:10},{code:"DE",name:"Germany",flag:"",dialCode:"+49",format:"### ########",maxLength:11},{code:"FR",name:"France",flag:"",dialCode:"+33",format:"## ## ## ## ##",maxLength:10},{code:"JP",name:"Japan",flag:"",dialCode:"+81",format:"##-####-####",maxLength:11},{code:"CN",name:"China",flag:"",dialCode:"+86",format:"### #### ####",maxLength:11}];function aS({value:t="",onChange:e,placeholder:s,disabled:r,className:l=""}){const[o,u]=O.useState(!1),h=w=>{if(!w)return{country:Gh[0],number:""};const x=Gh.find(N=>w.startsWith(N.dialCode))||Gh[0],j=w.replace(x.dialCode,"").replace(/\s/g,"");return{country:x,number:j}},{country:f,number:p}=h(t),g=(w,x,j)=>{const T=w.replace(/\D/g,"").slice(0,j);let S="",k=0;for(let Z=0;Z<x.length&&k<T.length;Z++)x[Z]==="#"?(S+=T[k],k++):S+=x[Z];return S},b=w=>{const x=g(p,w.format,w.maxLength);e(`${w.dialCode} ${x}`.trim()),u(!1)},v=w=>{const x=w.target.value,j=g(x,f.format,f.maxLength);e(`${f.dialCode} ${j}`.trim())};return i.jsxs("div",{className:`relative ${l}`,children:[i.jsxs("div",{className:"flex",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("button",{type:"button",disabled:r,className:"flex items-center gap-2 px-3 py-2 border border-r-0 border-gray-300 rounded-l-md bg-gray-50 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed min-w-[120px]",onClick:()=>u(!o),children:[i.jsx("span",{className:"text-lg",children:f.flag}),i.jsx("span",{className:"text-sm font-medium",children:f.dialCode}),i.jsx(g8,{className:"w-4 h-4"})]}),o&&i.jsx("div",{className:"absolute z-50 top-full left-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto min-w-[280px]",children:Gh.map(w=>i.jsxs("button",{type:"button",className:"flex items-center gap-3 w-full px-3 py-2 text-left hover:bg-gray-100 text-sm",onClick:()=>b(w),children:[i.jsx("span",{className:"text-lg",children:w.flag}),i.jsx("span",{className:"font-medium",children:w.dialCode}),i.jsx("span",{className:"text-gray-600",children:w.name})]},w.code))})]}),i.jsx("input",{type:"tel",value:g(p,f.format,f.maxLength),onChange:v,placeholder:s||f.format.replace(/#/g,"0"),disabled:r,className:"flex-1 px-3 py-2 border border-gray-300 rounded-r-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"})]}),o&&i.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)})]})}const Iq=({memberEmail:t,onClose:e,onSuccess:s})=>{const[r,l]=O.useState(""),[o,u]=O.useState(!1),[h,f]=O.useState(""),[p,g]=O.useState(""),b=()=>{const x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let j="";for(let N=0;N<12;N++)j+=x.charAt(Math.floor(Math.random()*x.length));l(j)},v=async()=>{if(!r){f("Please generate a temporary password");return}u(!0),f("");try{const{error:x}=await J.auth.admin.createUser({email:t,password:r,email_confirm:!0});if(x)f(`Unable to create automatically. Please create manually in Supabase Studio:
        
1. Go to Authentication > Users
2. Click "Add user" > "Create new user"  
3. Email: ${t}
4. Password: ${r}
5. Check "Auto Confirm User"`);else{f(` User created successfully!
        
Temporary credentials:
Email: ${t}
Password: ${r}

 User must change password on first login.`);const j=`${window.location.origin}/login?email=${encodeURIComponent(t)}`;g(j)}}catch(x){f(`Error: ${x instanceof Error?x.message:"Unknown error"}`)}finally{u(!1)}},w=x=>{kf.copyToClipboard(x,"Copied to clipboard!")};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs(ge,{className:"w-full max-w-md p-6 m-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Invite User"}),i.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-xl",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(xe,{children:"Member Email"}),i.jsx(Ae,{value:t,disabled:!0,className:"bg-gray-100"})]}),i.jsxs("div",{children:[i.jsx(xe,{children:"Temporary Password"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ae,{type:"text",value:r,onChange:x=>l(x.target.value),placeholder:"Click 'Generate' to create a password"}),i.jsx(ce,{type:"button",onClick:b,variant:"outline",children:"Generate"})]})]}),h&&i.jsx("div",{className:`p-3 rounded-md text-sm whitespace-pre-line ${h.includes("")?"bg-green-50 text-green-800":h.includes("Unable to create")?"bg-yellow-50 text-yellow-800":"bg-red-50 text-red-800"}`,children:h}),p&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{children:"Login Link"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ae,{value:p,readOnly:!0,className:"text-xs"}),i.jsx(ce,{type:"button",onClick:()=>w(p),variant:"outline",size:"sm",children:"Copy"})]})]}),r&&i.jsx("div",{className:"space-y-2",children:i.jsx(ce,{type:"button",onClick:()=>w(`Email: ${t}
Password: ${r}`),variant:"outline",className:"w-full",children:"Copy Credentials"})}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx(ce,{onClick:e,variant:"outline",className:"flex-1",children:"Close"}),i.jsx(ce,{onClick:v,disabled:o||!r,className:"flex-1",children:o?"Creating...":"Create Account"})]})]})]})})},$q=({member:t,onSave:e,onCancel:s})=>{const r=!!t,[l,o]=O.useState({first_name:t?.first_name||"",last_name:t?.last_name||"",email:t?.email||"",phone:t?.phone||"",date_of_birth:t?.date_of_birth||"",address_line1:t?.address_line1||"",address_line2:t?.address_line2||"",city:t?.city||"",state:t?.state||"",postal_code:t?.postal_code||"",country:t?.country||"Australia",membership_status:t?.membership_status||"active",membership_type:t?.membership_type||"standard",membership_start_date:t?.membership_start_date||new Date().toISOString().split("T")[0],membership_end_date:t?.membership_end_date||"",profession:t?.profession||"",experience_years:t?.experience_years?.toString()||"",qualifications:t?.qualifications||"",receive_newsletters:t?.receive_newsletters??!0,receive_event_notifications:t?.receive_event_notifications??!0,roles:t?.member_roles?.map(T=>T.role)||["member"]}),[u,h]=O.useState(!1),[f,p]=O.useState(null),[g,b]=O.useState(!1),[v,w]=O.useState(""),x=async T=>{if(!(!T||T.length<4))try{if(/^\d{4}$/.test(T)){const Z={1:"NSW",2:"NSW",3:"VIC",4:"QLD",5:"SA",6:"WA",7:"TAS",0:"NT"}[T[0]]||"NSW";o(R=>({...R,state:Z,country:"Australia"}));return}if(/^\d{5}$/.test(T)){o(k=>({...k,country:"United States"}));return}if(/^[A-Z]{1,2}\d{1,2}[A-Z]?\s?\d[A-Z]{2}$/i.test(T)){o(k=>({...k,country:"United Kingdom"}));return}const S=T.replace(/\D/g,"");if(/^\d{8}$/.test(S)){o(k=>({...k,country:"Brazil"}));return}o(k=>({...k,country:"Australia"}))}catch(S){console.error("Error fetching address data:",S)}},j=async T=>{T.preventDefault(),h(!0),p(null);try{const S={first_name:l.first_name,last_name:l.last_name,email:l.email,phone:l.phone||null,date_of_birth:l.date_of_birth||null,address_line1:l.address_line1||null,address_line2:l.address_line2||null,city:l.city||null,state:l.state||null,postal_code:l.postal_code||null,country:l.country||null,membership_status:l.membership_status,membership_type:l.membership_type,membership_start_date:l.membership_start_date||null,membership_end_date:l.membership_end_date||null,profession:l.profession||null,experience_years:l.experience_years?parseInt(l.experience_years):null,qualifications:l.qualifications||null,receive_newsletters:l.receive_newsletters,receive_event_notifications:l.receive_event_notifications};let k;if(r&&t?k=await Xn.updateMember(t.id,S):k=await Xn.createMember(S),r&&t){const R=t.member_roles.map(A=>A.role),U=R.filter(A=>!l.roles.includes(A)),B=l.roles.filter(A=>!R.includes(A));for(const A of U)await Xn.removeMemberRole(t.id,A);for(const A of B)await Xn.addMemberRole(t.id,A)}else for(const R of l.roles)await Xn.addMemberRole(k.id,R);const Z=await Xn.getMemberById(k.id);Z&&(e?.(Z),r||(w(l.email),b(!0)))}catch(S){p(S instanceof Error?S.message:"Error saving member"),console.error("Erro ao salvar membro:",S)}finally{h(!1)}},N=(T,S)=>{o(S?k=>({...k,roles:[...k.roles,T]}):k=>({...k,roles:k.roles.filter(Z=>Z!==T)}))};return i.jsxs(ge,{className:"p-6",children:[i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r?"Edit Member":"New Member"})}),f&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:i.jsx("p",{className:"text-red-800",children:f})}),i.jsxs("form",{onSubmit:j,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"first_name",children:"First Name *"}),i.jsx(Ae,{id:"first_name",required:!0,value:l.first_name,onChange:T=>o(S=>({...S,first_name:T.target.value}))})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"last_name",children:"Last Name *"}),i.jsx(Ae,{id:"last_name",required:!0,value:l.last_name,onChange:T=>o(S=>({...S,last_name:T.target.value}))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"email",children:"Email *"}),i.jsx(Ae,{id:"email",type:"email",required:!0,value:l.email,onChange:T=>o(S=>({...S,email:T.target.value}))})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"phone",children:"Phone"}),i.jsx(aS,{value:l.phone,onChange:T=>o(S=>({...S,phone:T})),placeholder:"Enter phone number"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"date_of_birth",children:"Date of Birth"}),i.jsx(Ae,{id:"date_of_birth",type:"date",value:l.date_of_birth,onChange:T=>o(S=>({...S,date_of_birth:T.target.value}))})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"profession",children:"Profession"}),i.jsx(Ae,{id:"profession",value:l.profession,onChange:T=>o(S=>({...S,profession:T.target.value}))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Address"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(xe,{htmlFor:"address_line1",children:"Address Line 1"}),i.jsx(Ae,{id:"address_line1",value:l.address_line1,onChange:T=>o(S=>({...S,address_line1:T.target.value})),placeholder:"123 Main Street"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(xe,{htmlFor:"address_line2",children:"Address Line 2"}),i.jsx(Ae,{id:"address_line2",value:l.address_line2,onChange:T=>o(S=>({...S,address_line2:T.target.value})),placeholder:"Apartment 4B"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"city",children:"City"}),i.jsx(Ae,{id:"city",value:l.city,onChange:T=>o(S=>({...S,city:T.target.value})),placeholder:"Sydney"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"state",children:"State"}),i.jsx(Ae,{id:"state",value:l.state,onChange:T=>o(S=>({...S,state:T.target.value})),placeholder:"NSW"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"postal_code",children:"Postal Code *"}),i.jsx(Ae,{id:"postal_code",value:l.postal_code,onChange:T=>{const S=T.target.value;o(k=>({...k,postal_code:S})),S&&S.length>=4&&x(S)},placeholder:"2000"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"country",children:"Country"}),i.jsx(Ae,{id:"country",value:l.country,onChange:T=>o(S=>({...S,country:T.target.value})),placeholder:"Australia"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Membership"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"membership_status",children:"Status"}),i.jsxs("select",{id:"membership_status",value:l.membership_status,onChange:T=>o(S=>({...S,membership_status:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"inactive",children:"Inactive"}),i.jsx("option",{value:"suspended",children:"Suspended"}),i.jsx("option",{value:"expired",children:"Expired"})]})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"membership_type",children:"Type"}),i.jsxs("select",{id:"membership_type",value:l.membership_type,onChange:T=>o(S=>({...S,membership_type:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"standard",children:"Standard"}),i.jsx("option",{value:"premium",children:"Premium"}),i.jsx("option",{value:"student",children:"Student"}),i.jsx("option",{value:"corporate",children:"Corporate"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"membership_start_date",children:"Start Date"}),i.jsx(Ae,{id:"membership_start_date",type:"date",value:l.membership_start_date,onChange:T=>o(S=>({...S,membership_start_date:T.target.value}))})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"membership_end_date",children:"End Date"}),i.jsx(Ae,{id:"membership_end_date",type:"date",value:l.membership_end_date,onChange:T=>o(S=>({...S,membership_end_date:T.target.value}))})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Roles"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:["member","admin","super_admin","moderator","instructor"].map(T=>i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:l.roles.includes(T),onChange:S=>N(T,S.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-gray-700 capitalize",children:T.replace("_"," ")})]},T))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Settings"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:l.receive_newsletters,onChange:T=>o(S=>({...S,receive_newsletters:T.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-gray-700",children:"Receive newsletters"})]}),i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:l.receive_event_notifications,onChange:T=>o(S=>({...S,receive_event_notifications:T.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-gray-700",children:"Receive event notifications"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Professional Information"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"experience_years",children:"Years of Experience"}),i.jsx(Ae,{id:"experience_years",type:"number",min:"0",value:l.experience_years,onChange:T=>o(S=>({...S,experience_years:T.target.value}))})]})}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"qualifications",children:"Qualifications"}),i.jsx("textarea",{id:"qualifications",rows:3,value:l.qualifications,onChange:T=>o(S=>({...S,qualifications:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the member's qualifications..."})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-6",children:[i.jsx(ce,{type:"button",variant:"outline",onClick:s,disabled:u,children:"Cancel"}),i.jsxs(ce,{type:"submit",disabled:u,children:[u?"Saving...":r?"Update":"Create"," Member"]})]})]}),g&&i.jsx(Iq,{memberEmail:v,onClose:()=>b(!1),onSuccess:()=>b(!1)})]})},Uq=()=>{const[t,e]=O.useState("list"),[s,r]=O.useState(null),l=()=>{r(null),e("form")},o=p=>{r(p),e("form")},u=p=>{r(p),e("view")},h=p=>{r(p),e("list")},f=()=>{r(null),e("list")};return i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t==="list"&&i.jsxs("div",{className:"space-y-8",children:[i.jsx(nS,{}),i.jsx(Pq,{onAddMember:l,onEditMember:o,onMemberSelect:u})]}),t==="form"&&i.jsx($q,{member:s,onSave:h,onCancel:f}),t==="view"&&s&&i.jsx(zq,{member:s,onEdit:()=>o(s),onBack:f})]})},zq=({member:t,onEdit:e,onBack:s})=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[t.first_name," ",t.last_name]}),i.jsxs("div",{className:"space-x-4",children:[i.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Back"}),i.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Edit"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personal Information"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Email:"}),i.jsx("p",{className:"text-sm text-gray-900",children:t.email})]}),t.phone&&i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Phone:"}),i.jsx("p",{className:"text-sm text-gray-900",children:t.phone})]}),t.date_of_birth&&i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Date of Birth:"}),i.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.date_of_birth).toLocaleDateString("en-AU")})]}),t.profession&&i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Profession:"}),i.jsx("p",{className:"text-sm text-gray-900",children:t.profession})]})]})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Membership Status"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Status:"}),i.jsx("p",{className:"text-sm text-gray-900 capitalize",children:t.membership_status})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Type:"}),i.jsx("p",{className:"text-sm text-gray-900 capitalize",children:t.membership_type})]}),t.membership_start_date&&i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Start Date:"}),i.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.membership_start_date).toLocaleDateString("en-AU")})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Roles:"}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:t.member_roles.map(r=>i.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-purple-100 text-purple-800",children:r.role},r.id))})]})]})]}),(t.address_line1||t.city||t.state)&&i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address"}),i.jsxs("div",{className:"space-y-2",children:[t.address_line1&&i.jsx("p",{className:"text-sm text-gray-900",children:t.address_line1}),t.address_line2&&i.jsx("p",{className:"text-sm text-gray-900",children:t.address_line2}),i.jsx("p",{className:"text-sm text-gray-900",children:[t.city,t.state,t.postal_code].filter(Boolean).join(", ")}),t.country&&i.jsx("p",{className:"text-sm text-gray-900",children:t.country})]})]}),(t.experience_years||t.qualifications)&&i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Professional Information"}),i.jsxs("div",{className:"space-y-3",children:[t.experience_years&&i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Years of Experience:"}),i.jsx("p",{className:"text-sm text-gray-900",children:t.experience_years})]}),t.qualifications&&i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Qualifications:"}),i.jsx("p",{className:"text-sm text-gray-900",children:t.qualifications})]})]})]})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"System Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Created on:"}),i.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.created_at).toLocaleString("en-AU")})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Last updated:"}),i.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.updated_at).toLocaleString("en-AU")})]})]})]})]});function Bq(){const[t,e]=O.useState({total:0,byStatus:{active:0,inactive:0,suspended:0,expired:0},byType:{standard:0,premium:0,student:0,corporate:0},byGroup:{}}),[s,r]=O.useState([]),[l,o]=O.useState(!0),[u,h]=O.useState({status:"",type:"",group:""});O.useEffect(()=>{f(),p()},[]);const f=async()=>{try{const{count:x}=await J.from("members").select("*",{count:"exact",head:!0}),j=["active","inactive","suspended","expired"],N={active:0,inactive:0,suspended:0,expired:0};for(const R of j){const{count:U}=await J.from("members").select("*",{count:"exact",head:!0}).eq("membership_status",R);N[R]=U||0}const T=["standard","premium","student","corporate"],S={standard:0,premium:0,student:0,corporate:0};for(const R of T){const{count:U}=await J.from("members").select("*",{count:"exact",head:!0}).eq("membership_type",R);S[R]=U||0}const{data:k}=await J.from("members").select("interest_group").not("interest_group","is",null),Z={};k?.forEach(R=>{const U=R.interest_group||"Unknown";Z[U]=(Z[U]||0)+1}),e({total:x||0,byStatus:N,byType:S,byGroup:Z})}catch(x){console.error("Error loading stats:",x)}},p=async()=>{try{o(!0);const{data:x,error:j}=await J.from("members").select("*").order("created_at",{ascending:!1}).limit(10);if(j)throw j;r(x||[])}catch(x){console.error("Error loading members:",x),ye("error","Failed to load members")}finally{o(!1)}},g=async()=>{if(s.length===0){ye("warning","No members selected");return}try{const x={};if(u.status&&(x.membership_status=u.status),u.type&&(x.membership_type=u.type),u.group&&(x.interest_group=u.group),Object.keys(x).length===0){ye("warning","No changes selected");return}for(const j of s)await J.from("members").update(x).eq("id",j.id);ye("success",`Updated ${s.length} members`),p(),f(),h({status:"",type:"",group:""})}catch(x){console.error("Error updating members:",x),ye("error","Failed to update members")}},b=async()=>{try{const{data:x}=await J.from("members").select("*");x&&x.length>0&&(iS(x,"all-members-export.csv"),ye("success",`Exported ${x.length} members`))}catch(x){console.error("Error exporting:",x),ye("error","Failed to export members")}},v=x=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800",expired:"bg-yellow-100 text-yellow-800"})[x],w=x=>{switch(x){case"premium":return i.jsx(rn,{className:"w-4 h-4"});case"corporate":return i.jsx(Tf,{className:"w-4 h-4"});case"student":return i.jsx(B8,{className:"w-4 h-4"});default:return i.jsx(ni,{className:"w-4 h-4"})}};return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Membership Management"}),i.jsx("p",{className:"text-gray-600",children:"Manage membership types, statuses, and interest groups"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Members"}),i.jsx("p",{className:"text-2xl font-bold",children:t.total})]}),i.jsx(ni,{className:"w-8 h-8 text-blue-500"})]})}),i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Active Members"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.byStatus.active})]}),i.jsx(Nd,{className:"w-8 h-8 text-green-500"})]})}),i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Premium Members"}),i.jsx("p",{className:"text-2xl font-bold text-purple-600",children:t.byType.premium})]}),i.jsx(rn,{className:"w-8 h-8 text-purple-500"})]})}),i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Interest Groups"}),i.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:Object.keys(t.byGroup).length})]}),i.jsx(wq,{className:"w-8 h-8 text-indigo-500"})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[i.jsxs(ge,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Membership Status Distribution"}),i.jsx("div",{className:"space-y-3",children:Object.entries(t.byStatus).map(([x,j])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v(x)}`,children:x})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-semibold",children:j}),i.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.total>0?(j/t.total*100).toFixed(1):0,"%)"]})]})]},x))})]}),i.jsxs(ge,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Membership Type Distribution"}),i.jsx("div",{className:"space-y-3",children:Object.entries(t.byType).map(([x,j])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[w(x),i.jsx("span",{className:"capitalize",children:x})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-semibold",children:j}),i.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.total>0?(j/t.total*100).toFixed(1):0,"%)"]})]})]},x))})]})]}),i.jsxs(ge,{className:"p-6 mb-8",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Interest Groups Distribution"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(t.byGroup).map(([x,j])=>i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:x}),i.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:j}),i.jsx("p",{className:"text-sm text-gray-500",children:"members"})]},x))})]}),i.jsxs(ge,{className:"p-6 mb-8",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Bulk Membership Update"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"bulk-status",children:"Update Status"}),i.jsxs("select",{id:"bulk-status",value:u.status,onChange:x=>h({...u,status:x.target.value}),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md",children:[i.jsx("option",{value:"",children:"No change"}),i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"inactive",children:"Inactive"}),i.jsx("option",{value:"suspended",children:"Suspended"}),i.jsx("option",{value:"expired",children:"Expired"})]})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"bulk-type",children:"Update Type"}),i.jsxs("select",{id:"bulk-type",value:u.type,onChange:x=>h({...u,type:x.target.value}),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md",children:[i.jsx("option",{value:"",children:"No change"}),i.jsx("option",{value:"standard",children:"Standard"}),i.jsx("option",{value:"premium",children:"Premium"}),i.jsx("option",{value:"student",children:"Student"}),i.jsx("option",{value:"corporate",children:"Corporate"})]})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"bulk-group",children:"Update Interest Group"}),i.jsxs("select",{id:"bulk-group",value:u.group,onChange:x=>h({...u,group:x.target.value}),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md",children:[i.jsx("option",{value:"",children:"No change"}),i.jsx("option",{value:"Full Provider",children:"Full Provider"}),i.jsx("option",{value:"Associate Provider",children:"Associate Provider"}),i.jsx("option",{value:"Corporate Affiliate",children:"Corporate Affiliate"}),i.jsx("option",{value:"Professional Affiliate",children:"Professional Affiliate"})]})]}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsxs(ce,{onClick:g,className:"flex items-center gap-2",children:[i.jsx(m_,{className:"w-4 h-4"}),"Update Selected"]}),i.jsxs(ce,{onClick:b,variant:"outline",className:"flex items-center gap-2",children:[i.jsx(_y,{className:"w-4 h-4"}),"Export All"]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Recent Members (Select for bulk update)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:i.jsx("input",{type:"checkbox",onChange:x=>{x.target.checked?r(s):r([])}})}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Member"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Interest Group"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Member Since"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(x=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-4 py-2",children:i.jsx("input",{type:"checkbox",checked:!0,onChange:()=>{}})}),i.jsx("td",{className:"px-4 py-2",children:i.jsxs("div",{children:[i.jsxs("div",{className:"font-medium text-gray-900",children:[x.first_name," ",x.last_name]}),i.jsx("div",{className:"text-sm text-gray-500",children:x.email})]})}),i.jsx("td",{className:"px-4 py-2",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v(x.membership_status)}`,children:x.membership_status})}),i.jsx("td",{className:"px-4 py-2",children:i.jsxs("div",{className:"flex items-center gap-1",children:[w(x.membership_type),i.jsx("span",{className:"text-sm capitalize",children:x.membership_type})]})}),i.jsx("td",{className:"px-4 py-2 text-sm",children:x.interest_group||"-"}),i.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:x.membership_start_date?new Date(x.membership_start_date).toLocaleDateString():"-"})]},x.id))})]})})]})]}),i.jsxs(ge,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(ce,{onClick:()=>window.location.href="/admin/members",variant:"outline",children:"View All Members"}),i.jsx(ce,{onClick:()=>window.location.href="/admin/user-import",variant:"outline",children:"Import Members"}),i.jsxs(ce,{onClick:f,variant:"outline",className:"flex items-center justify-center gap-2",children:[i.jsx(m_,{className:"w-4 h-4"}),"Refresh Stats"]})]})]})]})}var df={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var Fq=df.exports,g_;function Hq(){return g_||(g_=1,function(t,e){((s,r)=>{t.exports=r()})(Fq,function s(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},l,o=!r.document&&!!r.postMessage,u=r.IS_PAPA_WORKER||!1,h={},f=0,p={};function g(A){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(C){var z=R(C);z.chunkSize=parseInt(z.chunkSize),C.step||C.chunk||(z.chunkSize=null),this._handle=new j(z),(this._handle.streamer=this)._config=z}).call(this,A),this.parseChunk=function(C,z){var L=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<L){let P=this._config.newline;P||(q=this._config.quoteChar||'"',P=this._handle.guessLineEndings(C,q)),C=[...C.split(P).slice(L)].join(P)}this.isFirstChunk&&B(this._config.beforeFirstChunk)&&(q=this._config.beforeFirstChunk(C))!==void 0&&(C=q),this.isFirstChunk=!1,this._halted=!1;var L=this._partialLine+C,q=(this._partialLine="",this._handle.parse(L,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(C=q.meta.cursor,L=(this._finished||(this._partialLine=L.substring(C-this._baseIndex),this._baseIndex=C),q&&q.data&&(this._rowCount+=q.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),u)r.postMessage({results:q,workerId:p.WORKER_ID,finished:L});else if(B(this._config.chunk)&&!z){if(this._config.chunk(q,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=q=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(q.data),this._completeResults.errors=this._completeResults.errors.concat(q.errors),this._completeResults.meta=q.meta),this._completed||!L||!B(this._config.complete)||q&&q.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),L||q&&q.meta.paused||this._nextChunk(),q}this._halted=!0},this._sendError=function(C){B(this._config.error)?this._config.error(C):u&&this._config.error&&r.postMessage({workerId:p.WORKER_ID,error:C,finished:!1})}}function b(A){var C;(A=A||{}).chunkSize||(A.chunkSize=p.RemoteChunkSize),g.call(this,A),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(z){this._input=z,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(C=new XMLHttpRequest,this._config.withCredentials&&(C.withCredentials=this._config.withCredentials),o||(C.onload=U(this._chunkLoaded,this),C.onerror=U(this._chunkError,this)),C.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var z,L=this._config.downloadRequestHeaders;for(z in L)C.setRequestHeader(z,L[z])}var q;this._config.chunkSize&&(q=this._start+this._config.chunkSize-1,C.setRequestHeader("Range","bytes="+this._start+"-"+q));try{C.send(this._config.downloadRequestBody)}catch(P){this._chunkError(P.message)}o&&C.status===0&&this._chunkError()}},this._chunkLoaded=function(){C.readyState===4&&(C.status<200||400<=C.status?this._chunkError():(this._start+=this._config.chunkSize||C.responseText.length,this._finished=!this._config.chunkSize||this._start>=(z=>(z=z.getResponseHeader("Content-Range"))!==null?parseInt(z.substring(z.lastIndexOf("/")+1)):-1)(C),this.parseChunk(C.responseText)))},this._chunkError=function(z){z=C.statusText||z,this._sendError(new Error(z))}}function v(A){(A=A||{}).chunkSize||(A.chunkSize=p.LocalChunkSize),g.call(this,A);var C,z,L=typeof FileReader<"u";this.stream=function(q){this._input=q,z=q.slice||q.webkitSlice||q.mozSlice,L?((C=new FileReader).onload=U(this._chunkLoaded,this),C.onerror=U(this._chunkError,this)):C=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var q=this._input,P=(this._config.chunkSize&&(P=Math.min(this._start+this._config.chunkSize,this._input.size),q=z.call(q,this._start,P)),C.readAsText(q,this._config.encoding));L||this._chunkLoaded({target:{result:P}})},this._chunkLoaded=function(q){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(q.target.result)},this._chunkError=function(){this._sendError(C.error)}}function w(A){var C;g.call(this,A=A||{}),this.stream=function(z){return C=z,this._nextChunk()},this._nextChunk=function(){var z,L;if(!this._finished)return z=this._config.chunkSize,C=z?(L=C.substring(0,z),C.substring(z)):(L=C,""),this._finished=!C,this.parseChunk(L)}}function x(A){g.call(this,A=A||{});var C=[],z=!0,L=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(q){this._input=q,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){L&&C.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),C.length?this.parseChunk(C.shift()):z=!0},this._streamData=U(function(q){try{C.push(typeof q=="string"?q:q.toString(this._config.encoding)),z&&(z=!1,this._checkIsFinished(),this.parseChunk(C.shift()))}catch(P){this._streamError(P)}},this),this._streamError=U(function(q){this._streamCleanUp(),this._sendError(q)},this),this._streamEnd=U(function(){this._streamCleanUp(),L=!0,this._streamData("")},this),this._streamCleanUp=U(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function j(A){var C,z,L,q,P=Math.pow(2,53),V=-P,te=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,$=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Y=this,W=0,oe=0,I=!1,Q=!1,ie=[],X={data:[],errors:[],meta:{}};function fe(je){return A.skipEmptyLines==="greedy"?je.join("").trim()==="":je.length===1&&je[0].length===0}function ve(){if(X&&L&&(Re("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),L=!1),A.skipEmptyLines&&(X.data=X.data.filter(function(De){return!fe(De)})),Ee()){let De=function(Ge,Ye){B(A.transformHeader)&&(Ge=A.transformHeader(Ge,Ye)),ie.push(Ge)};var Oe=De;if(X)if(Array.isArray(X.data[0])){for(var je=0;Ee()&&je<X.data.length;je++)X.data[je].forEach(De);X.data.splice(0,1)}else X.data.forEach(De)}function Te(De,Ge){for(var Ye=A.header?{}:[],Xe=0;Xe<De.length;Xe++){var st=Xe,gt=De[Xe],gt=((ot,yt)=>(F=>(A.dynamicTypingFunction&&A.dynamicTyping[F]===void 0&&(A.dynamicTyping[F]=A.dynamicTypingFunction(F)),(A.dynamicTyping[F]||A.dynamicTyping)===!0))(ot)?yt==="true"||yt==="TRUE"||yt!=="false"&&yt!=="FALSE"&&((F=>{if(te.test(F)&&(F=parseFloat(F),V<F&&F<P))return 1})(yt)?parseFloat(yt):$.test(yt)?new Date(yt):yt===""?null:yt):yt)(st=A.header?Xe>=ie.length?"__parsed_extra":ie[Xe]:st,gt=A.transform?A.transform(gt,st):gt);st==="__parsed_extra"?(Ye[st]=Ye[st]||[],Ye[st].push(gt)):Ye[st]=gt}return A.header&&(Xe>ie.length?Re("FieldMismatch","TooManyFields","Too many fields: expected "+ie.length+" fields but parsed "+Xe,oe+Ge):Xe<ie.length&&Re("FieldMismatch","TooFewFields","Too few fields: expected "+ie.length+" fields but parsed "+Xe,oe+Ge)),Ye}var Me;X&&(A.header||A.dynamicTyping||A.transform)&&(Me=1,!X.data.length||Array.isArray(X.data[0])?(X.data=X.data.map(Te),Me=X.data.length):X.data=Te(X.data,0),A.header&&X.meta&&(X.meta.fields=ie),oe+=Me)}function Ee(){return A.header&&ie.length===0}function Re(je,Te,Me,Oe){je={type:je,code:Te,message:Me},Oe!==void 0&&(je.row=Oe),X.errors.push(je)}B(A.step)&&(q=A.step,A.step=function(je){X=je,Ee()?ve():(ve(),X.data.length!==0&&(W+=je.data.length,A.preview&&W>A.preview?z.abort():(X.data=X.data[0],q(X,Y))))}),this.parse=function(je,Te,Me){var Oe=A.quoteChar||'"',Oe=(A.newline||(A.newline=this.guessLineEndings(je,Oe)),L=!1,A.delimiter?B(A.delimiter)&&(A.delimiter=A.delimiter(je),X.meta.delimiter=A.delimiter):((Oe=((De,Ge,Ye,Xe,st)=>{var gt,ot,yt,F;st=st||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var se=0;se<st.length;se++){for(var ue,Ce=st[se],Ne=0,Se=0,ke=0,Le=(yt=void 0,new T({comments:Xe,delimiter:Ce,newline:Ge,preview:10}).parse(De)),Ke=0;Ke<Le.data.length;Ke++)Ye&&fe(Le.data[Ke])?ke++:(ue=Le.data[Ke].length,Se+=ue,yt===void 0?yt=ue:0<ue&&(Ne+=Math.abs(ue-yt),yt=ue));0<Le.data.length&&(Se/=Le.data.length-ke),(ot===void 0||Ne<=ot)&&(F===void 0||F<Se)&&1.99<Se&&(ot=Ne,gt=Ce,F=Se)}return{successful:!!(A.delimiter=gt),bestDelimiter:gt}})(je,A.newline,A.skipEmptyLines,A.comments,A.delimitersToGuess)).successful?A.delimiter=Oe.bestDelimiter:(L=!0,A.delimiter=p.DefaultDelimiter),X.meta.delimiter=A.delimiter),R(A));return A.preview&&A.header&&Oe.preview++,C=je,z=new T(Oe),X=z.parse(C,Te,Me),ve(),I?{meta:{paused:!0}}:X||{meta:{paused:!1}}},this.paused=function(){return I},this.pause=function(){I=!0,z.abort(),C=B(A.chunk)?"":C.substring(z.getCharIndex())},this.resume=function(){Y.streamer._halted?(I=!1,Y.streamer.parseChunk(C,!0)):setTimeout(Y.resume,3)},this.aborted=function(){return Q},this.abort=function(){Q=!0,z.abort(),X.meta.aborted=!0,B(A.complete)&&A.complete(X),C=""},this.guessLineEndings=function(De,Oe){De=De.substring(0,1048576);var Oe=new RegExp(N(Oe)+"([^]*?)"+N(Oe),"gm"),Me=(De=De.replace(Oe,"")).split("\r"),Oe=De.split(`
`),De=1<Oe.length&&Oe[0].length<Me[0].length;if(Me.length===1||De)return`
`;for(var Ge=0,Ye=0;Ye<Me.length;Ye++)Me[Ye][0]===`
`&&Ge++;return Ge>=Me.length/2?`\r
`:"\r"}}function N(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function T(A){var C=(A=A||{}).delimiter,z=A.newline,L=A.comments,q=A.step,P=A.preview,V=A.fastMode,te=null,$=!1,Y=A.quoteChar==null?'"':A.quoteChar,W=Y;if(A.escapeChar!==void 0&&(W=A.escapeChar),(typeof C!="string"||-1<p.BAD_DELIMITERS.indexOf(C))&&(C=","),L===C)throw new Error("Comment character same as delimiter");L===!0?L="#":(typeof L!="string"||-1<p.BAD_DELIMITERS.indexOf(L))&&(L=!1),z!==`
`&&z!=="\r"&&z!==`\r
`&&(z=`
`);var oe=0,I=!1;this.parse=function(Q,ie,X){if(typeof Q!="string")throw new Error("Input must be a string");var fe=Q.length,ve=C.length,Ee=z.length,Re=L.length,je=B(q),Te=[],Me=[],Oe=[],De=oe=0;if(!Q)return Ne();if(V||V!==!1&&Q.indexOf(Y)===-1){for(var Ge=Q.split(z),Ye=0;Ye<Ge.length;Ye++){if(Oe=Ge[Ye],oe+=Oe.length,Ye!==Ge.length-1)oe+=z.length;else if(X)return Ne();if(!L||Oe.substring(0,Re)!==L){if(je){if(Te=[],F(Oe.split(C)),Se(),I)return Ne()}else F(Oe.split(C));if(P&&P<=Ye)return Te=Te.slice(0,P),Ne(!0)}}return Ne()}for(var Xe=Q.indexOf(C,oe),st=Q.indexOf(z,oe),gt=new RegExp(N(W)+N(Y),"g"),ot=Q.indexOf(Y,oe);;)if(Q[oe]===Y)for(ot=oe,oe++;;){if((ot=Q.indexOf(Y,ot+1))===-1)return X||Me.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Te.length,index:oe}),ue();if(ot===fe-1)return ue(Q.substring(oe,ot).replace(gt,Y));if(Y===W&&Q[ot+1]===W)ot++;else if(Y===W||ot===0||Q[ot-1]!==W){Xe!==-1&&Xe<ot+1&&(Xe=Q.indexOf(C,ot+1));var yt=se((st=st!==-1&&st<ot+1?Q.indexOf(z,ot+1):st)===-1?Xe:Math.min(Xe,st));if(Q.substr(ot+1+yt,ve)===C){Oe.push(Q.substring(oe,ot).replace(gt,Y)),Q[oe=ot+1+yt+ve]!==Y&&(ot=Q.indexOf(Y,oe)),Xe=Q.indexOf(C,oe),st=Q.indexOf(z,oe);break}if(yt=se(st),Q.substring(ot+1+yt,ot+1+yt+Ee)===z){if(Oe.push(Q.substring(oe,ot).replace(gt,Y)),Ce(ot+1+yt+Ee),Xe=Q.indexOf(C,oe),ot=Q.indexOf(Y,oe),je&&(Se(),I))return Ne();if(P&&Te.length>=P)return Ne(!0);break}Me.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Te.length,index:oe}),ot++}}else if(L&&Oe.length===0&&Q.substring(oe,oe+Re)===L){if(st===-1)return Ne();oe=st+Ee,st=Q.indexOf(z,oe),Xe=Q.indexOf(C,oe)}else if(Xe!==-1&&(Xe<st||st===-1))Oe.push(Q.substring(oe,Xe)),oe=Xe+ve,Xe=Q.indexOf(C,oe);else{if(st===-1)break;if(Oe.push(Q.substring(oe,st)),Ce(st+Ee),je&&(Se(),I))return Ne();if(P&&Te.length>=P)return Ne(!0)}return ue();function F(ke){Te.push(ke),De=oe}function se(ke){var Le=0;return Le=ke!==-1&&(ke=Q.substring(ot+1,ke))&&ke.trim()===""?ke.length:Le}function ue(ke){return X||(ke===void 0&&(ke=Q.substring(oe)),Oe.push(ke),oe=fe,F(Oe),je&&Se()),Ne()}function Ce(ke){oe=ke,F(Oe),Oe=[],st=Q.indexOf(z,oe)}function Ne(ke){if(A.header&&!ie&&Te.length&&!$){var Le=Te[0],Ke=Object.create(null),ft=new Set(Le);let Wt=!1;for(let Qt=0;Qt<Le.length;Qt++){let bs=Le[Qt];if(Ke[bs=B(A.transformHeader)?A.transformHeader(bs,Qt):bs]){let As,$s=Ke[bs];for(;As=bs+"_"+$s,$s++,ft.has(As););ft.add(As),Le[Qt]=As,Ke[bs]++,Wt=!0,(te=te===null?{}:te)[As]=bs}else Ke[bs]=1,Le[Qt]=bs;ft.add(bs)}Wt&&console.warn("Duplicate headers found and renamed."),$=!0}return{data:Te,errors:Me,meta:{delimiter:C,linebreak:z,aborted:I,truncated:!!ke,cursor:De+(ie||0),renamedHeaders:te}}}function Se(){q(Ne()),Te=[],Me=[]}},this.abort=function(){I=!0},this.getCharIndex=function(){return oe}}function S(A){var C=A.data,z=h[C.workerId],L=!1;if(C.error)z.userError(C.error,C.file);else if(C.results&&C.results.data){var q={abort:function(){L=!0,k(C.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Z,resume:Z};if(B(z.userStep)){for(var P=0;P<C.results.data.length&&(z.userStep({data:C.results.data[P],errors:C.results.errors,meta:C.results.meta},q),!L);P++);delete C.results}else B(z.userChunk)&&(z.userChunk(C.results,q,C.file),delete C.results)}C.finished&&!L&&k(C.workerId,C.results)}function k(A,C){var z=h[A];B(z.userComplete)&&z.userComplete(C),z.terminate(),delete h[A]}function Z(){throw new Error("Not implemented.")}function R(A){if(typeof A!="object"||A===null)return A;var C,z=Array.isArray(A)?[]:{};for(C in A)z[C]=R(A[C]);return z}function U(A,C){return function(){A.apply(C,arguments)}}function B(A){return typeof A=="function"}return p.parse=function(A,C){var z=(C=C||{}).dynamicTyping||!1;if(B(z)&&(C.dynamicTypingFunction=z,z={}),C.dynamicTyping=z,C.transform=!!B(C.transform)&&C.transform,!C.worker||!p.WORKERS_SUPPORTED)return z=null,p.NODE_STREAM_INPUT,typeof A=="string"?(A=(L=>L.charCodeAt(0)!==65279?L:L.slice(1))(A),z=new(C.download?b:w)(C)):A.readable===!0&&B(A.read)&&B(A.on)?z=new x(C):(r.File&&A instanceof File||A instanceof Object)&&(z=new v(C)),z.stream(A);(z=(()=>{var L;return!!p.WORKERS_SUPPORTED&&(L=(()=>{var q=r.URL||r.webkitURL||null,P=s.toString();return p.BLOB_URL||(p.BLOB_URL=q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",P,")();"],{type:"text/javascript"})))})(),(L=new r.Worker(L)).onmessage=S,L.id=f++,h[L.id]=L)})()).userStep=C.step,z.userChunk=C.chunk,z.userComplete=C.complete,z.userError=C.error,C.step=B(C.step),C.chunk=B(C.chunk),C.complete=B(C.complete),C.error=B(C.error),delete C.worker,z.postMessage({input:A,config:C,workerId:z.id})},p.unparse=function(A,C){var z=!1,L=!0,q=",",P=`\r
`,V='"',te=V+V,$=!1,Y=null,W=!1,oe=((()=>{if(typeof C=="object"){if(typeof C.delimiter!="string"||p.BAD_DELIMITERS.filter(function(ie){return C.delimiter.indexOf(ie)!==-1}).length||(q=C.delimiter),typeof C.quotes!="boolean"&&typeof C.quotes!="function"&&!Array.isArray(C.quotes)||(z=C.quotes),typeof C.skipEmptyLines!="boolean"&&typeof C.skipEmptyLines!="string"||($=C.skipEmptyLines),typeof C.newline=="string"&&(P=C.newline),typeof C.quoteChar=="string"&&(V=C.quoteChar),typeof C.header=="boolean"&&(L=C.header),Array.isArray(C.columns)){if(C.columns.length===0)throw new Error("Option columns is empty");Y=C.columns}C.escapeChar!==void 0&&(te=C.escapeChar+V),C.escapeFormulae instanceof RegExp?W=C.escapeFormulae:typeof C.escapeFormulae=="boolean"&&C.escapeFormulae&&(W=/^[=+\-@\t\r].*$/)}})(),new RegExp(N(V),"g"));if(typeof A=="string"&&(A=JSON.parse(A)),Array.isArray(A)){if(!A.length||Array.isArray(A[0]))return I(null,A,$);if(typeof A[0]=="object")return I(Y||Object.keys(A[0]),A,$)}else if(typeof A=="object")return typeof A.data=="string"&&(A.data=JSON.parse(A.data)),Array.isArray(A.data)&&(A.fields||(A.fields=A.meta&&A.meta.fields||Y),A.fields||(A.fields=Array.isArray(A.data[0])?A.fields:typeof A.data[0]=="object"?Object.keys(A.data[0]):[]),Array.isArray(A.data[0])||typeof A.data[0]=="object"||(A.data=[A.data])),I(A.fields||[],A.data||[],$);throw new Error("Unable to serialize unrecognized input");function I(ie,X,fe){var ve="",Ee=(typeof ie=="string"&&(ie=JSON.parse(ie)),typeof X=="string"&&(X=JSON.parse(X)),Array.isArray(ie)&&0<ie.length),Re=!Array.isArray(X[0]);if(Ee&&L){for(var je=0;je<ie.length;je++)0<je&&(ve+=q),ve+=Q(ie[je],je);0<X.length&&(ve+=P)}for(var Te=0;Te<X.length;Te++){var Me=(Ee?ie:X[Te]).length,Oe=!1,De=Ee?Object.keys(X[Te]).length===0:X[Te].length===0;if(fe&&!Ee&&(Oe=fe==="greedy"?X[Te].join("").trim()==="":X[Te].length===1&&X[Te][0].length===0),fe==="greedy"&&Ee){for(var Ge=[],Ye=0;Ye<Me;Ye++){var Xe=Re?ie[Ye]:Ye;Ge.push(X[Te][Xe])}Oe=Ge.join("").trim()===""}if(!Oe){for(var st=0;st<Me;st++){0<st&&!De&&(ve+=q);var gt=Ee&&Re?ie[st]:st;ve+=Q(X[Te][gt],st)}Te<X.length-1&&(!fe||0<Me&&!De)&&(ve+=P)}}return ve}function Q(ie,X){var fe,ve;return ie==null?"":ie.constructor===Date?JSON.stringify(ie).slice(1,25):(ve=!1,W&&typeof ie=="string"&&W.test(ie)&&(ie="'"+ie,ve=!0),fe=ie.toString().replace(oe,te),(ve=ve||z===!0||typeof z=="function"&&z(ie,X)||Array.isArray(z)&&z[X]||((Ee,Re)=>{for(var je=0;je<Re.length;je++)if(-1<Ee.indexOf(Re[je]))return!0;return!1})(fe,p.BAD_DELIMITERS)||-1<fe.indexOf(q)||fe.charAt(0)===" "||fe.charAt(fe.length-1)===" ")?V+fe+V:fe)}},p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!o&&!!r.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=T,p.ParserHandle=j,p.NetworkStreamer=b,p.FileStreamer=v,p.StringStreamer=w,p.ReadableStreamStreamer=x,r.jQuery&&((l=r.jQuery).fn.parse=function(A){var C=A.config||{},z=[];return this.each(function(P){if(!(l(this).prop("tagName").toUpperCase()==="INPUT"&&l(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var V=0;V<this.files.length;V++)z.push({file:this.files[V],inputElem:this,instanceConfig:l.extend({},C)})}),L(),this;function L(){if(z.length===0)B(A.complete)&&A.complete();else{var P,V,te,$,Y=z[0];if(B(A.before)){var W=A.before(Y.file,Y.inputElem);if(typeof W=="object"){if(W.action==="abort")return P="AbortError",V=Y.file,te=Y.inputElem,$=W.reason,void(B(A.error)&&A.error({name:P},V,te,$));if(W.action==="skip")return void q();typeof W.config=="object"&&(Y.instanceConfig=l.extend(Y.instanceConfig,W.config))}else if(W==="skip")return void q()}var oe=Y.instanceConfig.complete;Y.instanceConfig.complete=function(I){B(oe)&&oe(I,Y.file,Y.inputElem),q()},p.parse(Y.file,Y.instanceConfig)}}function q(){z.splice(0,1),L()}}),u&&(r.onmessage=function(A){A=A.data,p.WORKER_ID===void 0&&A&&(p.WORKER_ID=A.workerId),typeof A.input=="string"?r.postMessage({workerId:p.WORKER_ID,results:p.parse(A.input,A.config),finished:!0}):(r.File&&A.input instanceof File||A.input instanceof Object)&&(A=p.parse(A.input,A.config))&&r.postMessage({workerId:p.WORKER_ID,results:A,finished:!0})}),(b.prototype=Object.create(g.prototype)).constructor=b,(v.prototype=Object.create(g.prototype)).constructor=v,(w.prototype=Object.create(w.prototype)).constructor=w,(x.prototype=Object.create(g.prototype)).constructor=x,p})}(df)),df.exports}var Vq=Hq();const Ty=od(Vq),Gq=()=>{const[t,e]=O.useState(null),[s,r]=O.useState(!1),[l,o]=O.useState([]),[u,h]=O.useState(null),[f,p]=O.useState([]),[g,b]=O.useState(!1),[v,w]=O.useState(null),x=R=>{const U=R.target.files?.[0];if(U){if(U.type!=="text/csv"&&!U.name.endsWith(".csv")){ye("error","Please select a valid CSV file.");return}e(U),o([]),h(null),p([]),b(!1),w(null)}},j=(R,U)=>{const B=[];if((!R.userId||R.userId.trim()==="")&&B.push({row:U,field:"User Id",message:"User ID is required",data:R}),(!R.email||R.email.trim()==="")&&B.push({row:U,field:"Email",message:"Email is required",data:R}),(!R.categorySerial||R.categorySerial.trim()==="")&&B.push({row:U,field:"Category Serial",message:"Category Serial is required",data:R}),(!R.category||R.category.trim()==="")&&B.push({row:U,field:"Category",message:"Category is required",data:R}),(!R.activityName||R.activityName.trim()==="")&&B.push({row:U,field:"PD activity name",message:"Activity name is required",data:R}),(!R.completedDate||R.completedDate.trim()==="")&&B.push({row:U,field:"Completed Date",message:"Completed date is required",data:R}),(!R.hours||R.hours.trim()==="")&&B.push({row:U,field:"Hours",message:"Hours is required",data:R}),R.email&&R.email.trim()){const A=R.email.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A)||B.push({row:U,field:"Email",message:"Invalid email format",data:R})}if(R.completedDate&&R.completedDate.trim()){const A=R.completedDate.trim();isNaN(Date.parse(A))&&B.push({row:U,field:"Completed Date",message:"Invalid date format (expected YYYY-MM-DD)",data:R})}if(R.hours&&R.hours.trim()){const A=R.hours.trim(),C=parseFloat(A);(isNaN(C)||C<0)&&B.push({row:U,field:"Hours",message:"Hours must be a valid positive number",data:R})}return B},N=R=>new Promise((U,B)=>{Ty.parse(R,{header:!0,complete:A=>{try{const C=A.data.filter(z=>z&&Object.keys(z).length>1).map(z=>({activitySerial:z["Activity Serial"]?.toString()||"",userId:z["User Id"]?.toString()||"",user:z.User?.toString()||"",firstName:z["First Name"]?.toString()||"",lastName:z["Last Name"]?.toString()||"",email:(z.Email?.toString()||"").toLowerCase(),categorySerial:z["Category Serial"]?.toString()||"",category:z.Category?.toString()||"",activityName:z["PD activity name"]?.toString()||"",developmentAreas:z["Development areas"]?.toString()||"",completedDate:z["Completed Date"]?.toString()||"",eventWebsite:z["Event website (where possible)"]?.toString()||"",hours:z["Hours of PD (anything below 60 minutes can be entered as a decimal, e.g. 30 mins = 0.5)"]?.toString()||"",supplyEvidence:z["Supply Evidence (e.g. attendance statement)"]?.toString()||"",verified:z.Verified?.toString()||"",personalGoal:z["Personal development goal this activity addresses"]?.toString()||"",keyTakeaways:z["Key take-aways/reflections"]?.toString()||"",howToUse:z["How can I use this in my own teaching?"]?.toString()||"",actionIntended:z["Action I intend to take to experiment with this idea"]?.toString()||""}));U(C)}catch{B(new Error("Failed to parse CSV file"))}},error:A=>{B(new Error(`CSV parsing error: ${A.message}`))}})}),T=async()=>{if(t)try{r(!0);const R=await N(t),U=[];R.slice(0,10).forEach((B,A)=>{const C=j(B,A+1);U.push(...C)}),o(U),p(R.slice(0,10)),b(!0)}catch(R){console.error("Preview error:",R),ye("error","Preview failed",R instanceof Error?R.message:"Unknown error")}finally{r(!1)}},S=async R=>{const{data:U,error:B}=await J.from("members").select("id, user_id").eq("email",R.toLowerCase()).single();return B?null:U},k=async()=>{if(t)try{r(!0),w({phase:"parsing",current:0,total:100,message:"Reading CSV file..."});const R=await N(t);w({phase:"validating",current:0,total:R.length,message:"Validating data..."});const U={total:R.length,successful:0,failed:0,skipped:0},B=[];for(let C=0;C<R.length;C++){w({phase:"validating",current:C+1,total:R.length,message:`Validating row ${C+1} of ${R.length}...`}),await new Promise(P=>setTimeout(P,1));const z=R[C],L=C+1,q=j(z,L);q.length>0&&(B.push(...q),U.failed++)}w({phase:"importing",current:0,total:R.length-U.failed,message:"Importing activities..."});let A=0;for(let C=0;C<R.length;C++){const z=R[C],L=C+1;if(!B.some(P=>P.row===L)){w({phase:"importing",current:A+1,total:R.length-U.failed,message:`Importing activity ${A+1} of ${R.length-U.failed}...`});try{const P=await S(z.email);if(!P){B.push({row:L,field:"Email",message:`User not found with email: ${z.email}`,data:z}),U.failed++,A++;continue}const V=new Date(z.completedDate);if(isNaN(V.getTime())){B.push({row:L,field:"Completed Date",message:"Invalid date format",data:z}),U.failed++,A++;continue}const te=parseFloat(z.hours);if(isNaN(te)||te<0){B.push({row:L,field:"Hours",message:"Invalid hours value",data:z}),U.failed++,A++;continue}const $=[z.developmentAreas&&`Development Areas: ${z.developmentAreas}`,z.personalGoal&&`Personal Goal: ${z.personalGoal}`,z.keyTakeaways&&`Key Takeaways: ${z.keyTakeaways}`,z.howToUse&&`How to Use: ${z.howToUse}`,z.actionIntended&&`Action Intended: ${z.actionIntended}`].filter(Boolean).join(`

`),{error:Y}=await J.from("cpd_activities").insert({member_id:P.id,user_id:P.user_id,category_id:parseInt(z.categorySerial),category_name:z.category,activity_title:z.activityName,description:$||null,date_completed:V.toISOString().split("T")[0],hours:te,evidence_url:z.eventWebsite||null,status:z.verified==="1"?"approved":"pending"});Y?(console.error("Insert error:",Y),B.push({row:L,field:"Database",message:Y.message,data:z}),U.failed++):U.successful++}catch(P){console.error(`Error processing row ${L}:`,P),B.push({row:L,field:"Processing",message:P instanceof Error?P.message:"Unknown error",data:z}),U.failed++}A++}}w({phase:"complete",current:R.length,total:R.length,message:"Import completed!"}),o(B),h(U),U.successful>0&&ye("success",`Successfully imported ${U.successful} activities!`),U.failed>0&&ye("error",`${U.failed} activities failed to import. Check the errors below.`)}catch(R){console.error("Import error:",R),ye("error","Import failed",R instanceof Error?R.message:"Unknown error")}finally{r(!1),setTimeout(()=>{w(null)},3e3)}},Z=()=>{e(null),o([]),h(null),p([]),b(!1),w(null)};return i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Import Activities"}),i.jsx("p",{className:"mt-2 text-gray-600",children:"Import CPD activities from CSV files exported from the legacy system"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Fa,{className:"h-6 w-6 text-blue-600"}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload CSV File"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Activities CSV File"}),i.jsx("input",{type:"file",accept:".csv",onChange:x,className:`block w-full text-sm text-gray-500
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-full file:border-0
                  file:text-sm file:font-semibold
                  file:bg-blue-50 file:text-blue-700
                  hover:file:bg-blue-100`,disabled:s})]}),t&&i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:[i.jsx("strong",{children:"Selected File:"})," ",t.name]}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Size: ",(t.size/1024/1024).toFixed(2)," MB"]})]}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx(ce,{onClick:T,disabled:!t||s,variant:"outline",children:s?"Processing...":"Preview Data"}),i.jsxs(ce,{onClick:k,disabled:!t||s,className:"bg-green-600 hover:bg-green-700",children:[i.jsx(Fi,{className:"mr-2 h-4 w-4"}),s?"Importing...":"Import Activities"]}),(l.length>0||u)&&i.jsx(ce,{onClick:Z,variant:"outline",disabled:s,children:"Reset"})]})]})]}),i.jsxs(ge,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Expected CSV Format"}),i.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[i.jsx("p",{children:i.jsx("strong",{children:"Required Columns:"})}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[i.jsx("li",{children:"Activity Serial"}),i.jsx("li",{children:"User Id"}),i.jsx("li",{children:"User, First Name, Last Name"}),i.jsx("li",{children:"Email (used to match existing members)"}),i.jsx("li",{children:"Category Serial, Category"}),i.jsx("li",{children:"PD activity name"}),i.jsx("li",{children:"Development areas"}),i.jsx("li",{children:"Completed Date (YYYY-MM-DD format)"}),i.jsx("li",{children:"Hours of PD (decimal number)"}),i.jsx("li",{children:"Event website (optional)"}),i.jsx("li",{children:"Supply Evidence, Verified"}),i.jsx("li",{children:"Personal development goal, Key take-aways, How can I use this, Action I intend to take"})]})]})]}),g&&f.length>0&&i.jsxs(ge,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Data Preview (First 10 rows)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full table-auto border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("th",{className:"border px-4 py-2 text-left",children:"Email"}),i.jsx("th",{className:"border px-4 py-2 text-left",children:"Category"}),i.jsx("th",{className:"border px-4 py-2 text-left",children:"Activity Name"}),i.jsx("th",{className:"border px-4 py-2 text-left",children:"Date"}),i.jsx("th",{className:"border px-4 py-2 text-left",children:"Hours"})]})}),i.jsx("tbody",{children:f.map((R,U)=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"border px-4 py-2 text-sm",children:R.email}),i.jsx("td",{className:"border px-4 py-2 text-sm",children:R.category}),i.jsx("td",{className:"border px-4 py-2 text-sm",children:R.activityName}),i.jsx("td",{className:"border px-4 py-2 text-sm",children:R.completedDate}),i.jsx("td",{className:"border px-4 py-2 text-sm",children:R.hours})]},U))})]})})]}),v&&i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Fi,{className:"h-6 w-6 text-blue-600"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Import Progress"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:v.message}),i.jsxs("span",{className:"text-sm text-gray-500",children:[v.current," / ",v.total]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:i.jsx("div",{className:`h-3 rounded-full transition-all duration-300 ${v.phase==="complete"?"bg-green-600":v.phase==="importing"?"bg-blue-600":"bg-yellow-600"}`,style:{width:`${Math.min(100,v.current/v.total*100)}%`}})}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[i.jsx("span",{className:`font-medium ${v.phase==="parsing"?"text-blue-600":v.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Parsing"}),i.jsx("span",{className:`font-medium ${v.phase==="validating"?"text-yellow-600":v.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Validating"}),i.jsx("span",{className:`font-medium ${v.phase==="importing"?"text-blue-600":v.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Importing"}),i.jsx("span",{className:`font-medium ${v.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Complete"})]}),v.phase==="complete"&&i.jsxs("div",{className:"text-center",children:[i.jsx(Ss,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),i.jsx("p",{className:"text-green-700 font-medium",children:"Import completed successfully!"})]})]})]}),u&&i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Ss,{className:"h-6 w-6 text-green-600"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Import Results"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:u.total}),i.jsx("div",{className:"text-sm text-blue-700",children:"Total Records"})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.successful}),i.jsx("div",{className:"text-sm text-green-700",children:"Successful"})]}),i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:u.failed}),i.jsx("div",{className:"text-sm text-red-700",children:"Failed"})]}),i.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:u.skipped}),i.jsx("div",{className:"text-sm text-yellow-700",children:"Skipped"})]})]})]}),l.length>0&&i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Ay,{className:"h-6 w-6 text-red-600"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Validation Errors"})]}),i.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:l.map((R,U)=>i.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(Hi,{className:"h-5 w-5 text-red-500 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm font-medium text-red-800",children:["Row ",R.row,": ",R.field]}),i.jsx("p",{className:"text-sm text-red-700",children:R.message}),R.data.email&&i.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Email: ",R.data.email]})]})]})},U))})]})]})]})},Zq="https://english-australia-eau-supabase.lkobs5.easypanel.host",Yq="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJzZXJ2aWNlX3JvbGUiLAogICAgImlzcyI6ICJzdXBhYmFzZS1kZW1vIiwKICAgICJpYXQiOiAxNjQxNzY5MjAwLAogICAgImV4cCI6IDE3OTk1MzU2MDAKfQ.DaYlNEoUrrEn2Ig7tqibS-PHK5vgusbcbo7X36XVt4Q",Mr=U2(Zq,Yq,{auth:{autoRefreshToken:!1,persistSession:!1}}),Kq=async(t,e,s)=>{try{const{data:r,error:l}=await Mr.auth.admin.createUser({email:t,password:e,email_confirm:!0,user_metadata:s});if(l)throw l;return r.user}catch(r){throw console.error("Error creating user:",r),r}},Wq=()=>{const[t,e]=O.useState(null),[s,r]=O.useState(!1),[l,o]=O.useState([]),[u,h]=O.useState(null),[f,p]=O.useState([]),[g,b]=O.useState(!1),[v,w]=O.useState(null),[x,j]=O.useState(!0),N=B=>{const A=B.target.files?.[0];if(A){if(A.type!=="text/csv"&&!A.name.endsWith(".csv")){ye("error","Please select a valid CSV file.");return}e(A),o([]),h(null),p([]),b(!1),w(null)}},T=(B,A)=>{const C=[];if((!B.userId||B.userId.trim()==="")&&C.push({row:A,field:"User Id",message:"User ID is required",data:B}),(!B.firstName||B.firstName.trim()==="")&&C.push({row:A,field:"First Name",message:"First Name is required",data:B}),(!B.lastName||B.lastName.trim()==="")&&C.push({row:A,field:"Last Name",message:"Last Name is required",data:B}),(!B.email||B.email.trim()==="")&&C.push({row:A,field:"Email",message:"Email is required",data:B}),B.email&&B.email.trim()){const z=B.email.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z)||C.push({row:A,field:"Email",message:"Invalid email format",data:B})}if(B.activities&&B.activities.trim()){const z=parseInt(B.activities.trim());(isNaN(z)||z<0)&&C.push({row:A,field:"Activities",message:"Activities must be a valid positive number",data:B})}if(B.points&&B.points.trim()){const z=parseFloat(B.points.trim());(isNaN(z)||z<0)&&C.push({row:A,field:"Points",message:"Points must be a valid positive number",data:B})}return C},S=B=>new Promise((A,C)=>{Ty.parse(B,{header:!0,complete:z=>{try{const L=z.data.filter(q=>q&&Object.keys(q).length>1).map(q=>({userId:q["User Id"]?.toString()||"",firstName:q["First Name"]?.toString()||"",lastName:q["Last Name"]?.toString()||"",email:(q.Email?.toString()||"").toLowerCase(),activities:q.Activities?.toString()||"0",points:q.Points?.toString()||"0.00",goalStatus:q["Goal Status"]?.toString()||"0 / 0"}));A(L)}catch{C(new Error("Failed to parse CSV file"))}},error:z=>{C(new Error(`CSV parsing error: ${z.message}`))}})}),k=async()=>{if(t)try{r(!0);const B=await S(t),A=[];B.slice(0,10).forEach((C,z)=>{const L=T(C,z+1);A.push(...L)}),o(A),p(B.slice(0,10)),b(!0)}catch(B){console.error("Preview error:",B),ye("error","Preview failed",B instanceof Error?B.message:"Unknown error")}finally{r(!1)}},Z=async B=>{try{const{data:A,error:C}=await J.from("members").select("id, email").eq("email",B.toLowerCase()).maybeSingle();return C&&!C.message?.includes("No rows")&&console.warn("Error checking existing member:",C),!!A}catch(A){return console.warn("Error in checkExistingMember:",A),!1}},R=async()=>{if(t)try{r(!0),w({phase:"parsing",current:0,total:100,message:"Reading CSV file..."});const B=await S(t);w({phase:"validating",current:0,total:B.length,message:"Validating data..."});const A={total:B.length,successful:0,failed:0,skipped:0,existing:0},C=[];for(let L=0;L<B.length;L++){w({phase:"validating",current:L+1,total:B.length,message:`Validating user ${L+1} of ${B.length}...`}),await new Promise(te=>setTimeout(te,1));const q=B[L],P=L+1,V=T(q,P);V.length>0&&(C.push(...V),A.failed++)}const z=B.filter((L,q)=>!C.some(P=>P.row===q+1));if(w({phase:x?"creating_auth":"creating_members",current:0,total:z.length,message:x?"Creating user accounts...":"Creating member records..."}),x){w({phase:"creating_auth",current:0,total:z.length,message:"Creating user accounts with authentication..."});let L=0;for(let q=0;q<z.length;q++){const P=z[q],te=B.indexOf(P)+1;w({phase:"creating_auth",current:L+1,total:z.length,message:`Creating user ${L+1} of ${z.length}...`});try{const{data:$}=await Mr.from("members").select("id").eq("email",P.email.toLowerCase()).maybeSingle();if($){A.existing++,A.skipped++,L++;continue}const Y=`Eau2025!${P.userId}`;let W=null;try{W=(await Kq(P.email.toLowerCase(),Y,{first_name:P.firstName,last_name:P.lastName,legacy_user_id:P.userId}))?.id}catch(X){console.error("Auth creation error:",X)}const oe=P.goalStatus.split("/"),I=parseFloat(oe[0]?.trim()||"0"),Q=parseFloat(oe[1]?.trim()||"0"),{error:ie}=await Mr.from("members").insert({user_id:W,legacy_user_id:parseInt(P.userId),first_name:P.firstName,last_name:P.lastName,display_name:`${P.firstName} ${P.lastName}`,email:P.email.toLowerCase(),cpd_activities_count:parseInt(P.activities||"0"),cpd_points_total:parseFloat(P.points||"0"),cpd_goal_achieved:I,cpd_goal_target:Q,membership_status:"active",membership_type:"standard",receive_newsletters:!0,receive_event_notifications:!0});ie?(console.error("Member creation error:",ie),C.push({row:te,field:"Database",message:ie.message,data:P}),A.failed++):A.successful++}catch($){console.error(`Error processing row ${te}:`,$),C.push({row:te,field:"Processing",message:$ instanceof Error?$.message:"Unknown error",data:P}),A.failed++}L++,await new Promise($=>setTimeout($,50))}}else{let L=0;for(let q=0;q<z.length;q++){const P=z[q],te=B.indexOf(P)+1;w({phase:"creating_members",current:L+1,total:z.length,message:`Creating member ${L+1} of ${z.length}...`});try{if(await Z(P.email)){A.existing++,A.skipped++,L++;continue}const Y=P.goalStatus.split("/"),W=parseFloat(Y[0]?.trim()||"0"),oe=parseFloat(Y[1]?.trim()||"0"),{error:I}=await J.from("members").insert({user_id:null,legacy_user_id:parseInt(P.userId),first_name:P.firstName,last_name:P.lastName,display_name:`${P.firstName} ${P.lastName}`,email:P.email.toLowerCase(),cpd_activities_count:parseInt(P.activities||"0"),cpd_points_total:parseFloat(P.points||"0"),cpd_goal_achieved:W,cpd_goal_target:oe,membership_status:"active",membership_type:"standard",receive_newsletters:!0,receive_event_notifications:!0});I?(console.error("Member creation error:",I),C.push({row:te,field:"Database",message:I.message,data:P}),A.failed++):A.successful++}catch($){console.error(`Error processing row ${te}:`,$),C.push({row:te,field:"Processing",message:$ instanceof Error?$.message:"Unknown error",data:P}),A.failed++}L++}}w({phase:"complete",current:B.length,total:B.length,message:"Import completed!"}),o(C),h(A),A.successful>0&&ye("success",`Successfully imported ${A.successful} users!`),A.existing>0&&ye("info",`${A.existing} users already exist and were skipped.`),A.failed>0&&ye("error",`${A.failed} users failed to import. Check the errors below.`)}catch(B){console.error("Import error:",B),ye("error","Import failed",B instanceof Error?B.message:"Unknown error")}finally{r(!1),setTimeout(()=>{w(null)},3e3)}},U=()=>{e(null),o([]),h(null),p([]),b(!1),w(null)};return i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Import Users"}),i.jsx("p",{className:"mt-2 text-gray-600",children:"Import users from CSV files exported from the legacy system"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(ni,{className:"h-6 w-6 text-blue-600"}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload CSV File"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Users CSV File"}),i.jsx("input",{type:"file",accept:".csv",onChange:N,className:`block w-full text-sm text-gray-500
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-full file:border-0
                  file:text-sm file:font-semibold
                  file:bg-blue-50 file:text-blue-700
                  hover:file:bg-blue-100`,disabled:s})]}),t&&i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:[i.jsx("strong",{children:"Selected File:"})," ",t.name]}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Size: ",(t.size/1024).toFixed(2)," KB"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:x,onChange:B=>j(B.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 mr-2"}),i.jsx("span",{className:"text-sm text-gray-700",children:"Create authentication accounts (with temporary passwords)"})]}),x&&i.jsxs("div",{className:"ml-6 text-xs text-amber-600 bg-amber-50 p-2 rounded",children:[i.jsx("strong",{children:"Note:"})," Creating auth accounts will send confirmation emails to users. For bulk imports, consider unchecking this option and creating accounts separately."]})]}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx(ce,{onClick:k,disabled:!t||s,variant:"outline",children:s?"Processing...":"Preview Data"}),i.jsxs(ce,{onClick:R,disabled:!t||s,className:"bg-green-600 hover:bg-green-700",children:[i.jsx(Cy,{className:"mr-2 h-4 w-4"}),s?"Importing...":"Import Users"]}),(l.length>0||u)&&i.jsx(ce,{onClick:U,variant:"outline",disabled:s,children:"Reset"})]})]})]}),i.jsxs(ge,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Expected CSV Format"}),i.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[i.jsx("p",{children:i.jsx("strong",{children:"Required Columns:"})}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"User Id"})," - Unique ID from legacy system"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"First Name"})," - User's first name"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Last Name"})," - User's last name"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Email"})," - User's email address (must be unique)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Activities"})," - Number of CPD activities (numeric)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Points"})," - Total CPD points earned (decimal)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Goal Status"}),' - Format: "achieved / target" (e.g., "10 / 20")']})]}),i.jsxs("p",{className:"mt-3 text-amber-600",children:[i.jsx("strong",{children:"Note:"}),' If "Create authentication accounts" is checked, temporary passwords will be generated as: Eau2025![UserID]']})]})]}),g&&f.length>0&&i.jsxs(ge,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Data Preview (First 10 rows)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full table-auto border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("th",{className:"border px-4 py-2 text-left",children:"ID"}),i.jsx("th",{className:"border px-4 py-2 text-left",children:"Name"}),i.jsx("th",{className:"border px-4 py-2 text-left",children:"Email"}),i.jsx("th",{className:"border px-4 py-2 text-left",children:"Activities"}),i.jsx("th",{className:"border px-4 py-2 text-left",children:"Points"}),i.jsx("th",{className:"border px-4 py-2 text-left",children:"Goal"})]})}),i.jsx("tbody",{children:f.map((B,A)=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"border px-4 py-2 text-sm",children:B.userId}),i.jsxs("td",{className:"border px-4 py-2 text-sm",children:[B.firstName," ",B.lastName]}),i.jsx("td",{className:"border px-4 py-2 text-sm",children:B.email}),i.jsx("td",{className:"border px-4 py-2 text-sm",children:B.activities}),i.jsx("td",{className:"border px-4 py-2 text-sm",children:B.points}),i.jsx("td",{className:"border px-4 py-2 text-sm",children:B.goalStatus})]},A))})]})})]}),v&&i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Fi,{className:"h-6 w-6 text-blue-600"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Import Progress"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:v.message}),i.jsxs("span",{className:"text-sm text-gray-500",children:[v.current," / ",v.total]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:i.jsx("div",{className:`h-3 rounded-full transition-all duration-300 ${v.phase==="complete"?"bg-green-600":v.phase==="creating_auth"||v.phase==="creating_members"?"bg-blue-600":"bg-yellow-600"}`,style:{width:`${Math.min(100,v.current/v.total*100)}%`}})}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[i.jsx("span",{className:`font-medium ${v.phase==="parsing"?"text-blue-600":v.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Parsing"}),i.jsx("span",{className:`font-medium ${v.phase==="validating"?"text-yellow-600":v.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Validating"}),i.jsx("span",{className:`font-medium ${v.phase==="creating_auth"?"text-blue-600":v.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Auth Accounts"}),i.jsx("span",{className:`font-medium ${v.phase==="creating_members"?"text-blue-600":v.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Members"}),i.jsx("span",{className:`font-medium ${v.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Complete"})]}),v.phase==="complete"&&i.jsxs("div",{className:"text-center",children:[i.jsx(Ss,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),i.jsx("p",{className:"text-green-700 font-medium",children:"Import completed successfully!"})]})]})]}),u&&i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Ss,{className:"h-6 w-6 text-green-600"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Import Results"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:u.total}),i.jsx("div",{className:"text-sm text-blue-700",children:"Total Records"})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.successful}),i.jsx("div",{className:"text-sm text-green-700",children:"Successful"})]}),i.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:u.existing}),i.jsx("div",{className:"text-sm text-yellow-700",children:"Already Exist"})]}),i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:u.failed}),i.jsx("div",{className:"text-sm text-red-700",children:"Failed"})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-gray-600",children:u.skipped}),i.jsx("div",{className:"text-sm text-gray-700",children:"Skipped"})]})]})]}),l.length>0&&i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Ay,{className:"h-6 w-6 text-red-600"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Validation Errors"})]}),i.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:l.map((B,A)=>i.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(Hi,{className:"h-5 w-5 text-red-500 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm font-medium text-red-800",children:["Row ",B.row,": ",B.field]}),i.jsx("p",{className:"text-sm text-red-700",children:B.message}),B.data.email&&i.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Email: ",B.data.email]})]})]})},A))})]})]})]})},Qq=()=>{const[t,e]=O.useState(null),[s,r]=O.useState(!1),[l,o]=O.useState(null),[u,h]=O.useState([]),[f,p]=O.useState({phase:"",message:"",current:0,total:0}),g=w=>{const x=w.target.files?.[0];x&&(e(x),o(null),h([]))},b=w=>new Promise((x,j)=>{Ty.parse(w,{header:!0,complete:N=>{try{const T=N.data.filter(S=>S&&Object.keys(S).length>1).map(S=>({membershipId:S.ID||"",startDate:S["Start Date"]||"",expiryDate:S["Expiry Date"]||"",lastRenewedDate:S["Last Renewed Date"]||"",status:S.Status||"",previousExpiryDate:S["Previous Expiry Date"]||"",pendingStatus:S["Pending Status"]||"",userId:S.UserId||"",memberTest:S["Member Test"]||"",memberEditableAddress:S["Member Editable Address"]||"",memberTitle:S["Member Title"]||"",memberFirstName:S["Member First Name"]||"",memberLastName:S["Member Last Name"]||"",memberEmail:S["Member Email Address"]||"",memberCompanyName:S["Member Company Name"]||"",memberCompanyNameActual:S["Member Company Name (Actual name)"]||"",memberPosition:S["Member Position"]||"",memberStreetAddress:S["Member Street Address"]||"",memberStreetAddressLine2:S["Member Street Address Line 2"]||"",memberSuburb:S["Member Suburb"]||"",memberPostcode:S["Member Postcode"]||"",memberState:S["Member State"]||"",memberCountry:S["Member Country"]||"",memberMobile:S["Member Mobile"]||"",memberSubscriptions:S["Member Subscriptions"]||"",memberBio:S["Member Bio"]||"",memberBoardRole:S["Member Board Member Role"]||"",memberAreaExpertise:S["Member Area of Expertise"]||"",memberUnsubscribeNotes:S["Member Unsubscribe Notes"]||"",memberTeacherSince:S["Member Teacher Since"]||"",memberCoursesTaught:S["Member Courses Taught"]||"",memberInterestTags:S["Member Interest Tags"]||"",memberEmailSubscriptions:S["Member Email Subscriptions"]||"",memberUsername:S["Member Username"]||"",memberGroups:S["Member Groups"]||"",memberCreated:S["Member Created"]||"",memberLastEdited:S["Member Last Edited"]||"",totalMembers:S["Total Members"]||"1",category:S.Category||"",type:S.Type||"",pricingOption:S["Pricing Option"]||"",pricingOptionCost:S["Pricing Option Cost"]||"0",targetType:S["Target (Individual/Organisation)"]||"",primaryContactUserId:S["Primary Contact's User ID"]||"",primaryContactFirstName:S["Primary Contact's First Name"]||"",primaryContactLastName:S["Primary Contact's Last Name"]||"",primaryContactEmail:S["Primary Contact's Email"]||"",companyId:S["Company ID"]||"",companyName:S["Company Name"]||"",companyEmail:S["Company Email"]||"",companyCompanyName:S["Company Company Name"]||"",companyParentCompany:S["Company Parent Company"]||"",companyABN:S["Company ABN"]||"",companyCompanyEmail:S["Company Company Email Address"]||"",companyCompanyType:S["Company Company Type"]||"",companyCRICOSCode:S["Company CRICOS Code"]||"",companyAddressLine1:S["Company Company Address Line 1"]||"",companyAddressLine2:S["Company Company Address Line 2"]||"",companyAddressLine3:S["Company Company Address Line 3"]||"",companySuburb:S["Company Company Suburb"]||"",companyPostcode:S["Company Company Postcode"]||"",companyState:S["Company Company State"]||"",companyCountry:S["Company Company Country"]||"",companyPhone:S["Company Company Phone"]||"",companyPrimaryContact:S["Company Primary Contact"]||"",companyCoursesOffered:S["Company Courses Offered"]||"",companyLogo:S["Company Logo"]||"",companyWebsite:S["Company Website"]||"",companyMemberSince:S["Company Member Since: (Date)"]||"",companyCancellationDetails:S["Company Membership Cancellation Details"]||""}));x(T)}catch{j(new Error("Failed to parse CSV file"))}},error:N=>{j(new Error(`CSV parsing error: ${N.message}`))}})}),v=async()=>{if(t)try{r(!0),h([]);const w={companies:{total:0,created:0,existing:0,failed:0},memberships:{total:0,created:0,existing:0,failed:0},members:{total:0,created:0,existing:0,failed:0}},x=S=>{if(!S||S===""||S==="0000-00-00"||S==="0000-00-00 00:00:00")return null;const k=new Date(S);return isNaN(k.getTime())?null:S.split(" ")[0]};p({phase:"parsing",message:"Reading CSV file...",current:0,total:100});const j=await b(t),N=new Map,T=new Map;p({phase:"companies",message:"Processing companies...",current:0,total:j.length});for(const S of j)S.companyId&&!N.has(S.companyId)&&N.set(S.companyId,{legacy_company_id:parseInt(S.companyId),company_name:S.companyCompanyName||S.companyName,parent_company:S.companyParentCompany,abn:S.companyABN,company_email:S.companyCompanyEmail||S.companyEmail,company_type:S.companyCompanyType,cricos_code:S.companyCRICOSCode,address_line_1:S.companyAddressLine1,address_line_2:S.companyAddressLine2,address_line_3:S.companyAddressLine3,suburb:S.companySuburb,postcode:S.companyPostcode,state:S.companyState,country:S.companyCountry||"Australia",phone:S.companyPhone,website:S.companyWebsite,courses_offered:S.companyCoursesOffered,member_since:x(S.companyMemberSince),membership_cancellation_details:S.companyCancellationDetails});w.companies.total=N.size;for(const[S,k]of N)try{const{data:Z}=await Mr.from("companies").select("id").eq("legacy_company_id",k.legacy_company_id).maybeSingle();if(Z)w.companies.existing++;else{const{error:R}=await Mr.from("companies").insert(k);R?(w.companies.failed++,h(U=>[...U,`Company ${S}: ${R.message}`])):w.companies.created++}}catch(Z){w.companies.failed++,h(R=>[...R,`Company ${S}: ${Z}`])}p({phase:"memberships",message:"Processing memberships...",current:0,total:j.length});for(const S of j)if(S.membershipId&&!T.has(S.membershipId)){let k=null;if(S.companyId){const{data:Z}=await Mr.from("companies").select("id").eq("legacy_company_id",parseInt(S.companyId)).maybeSingle();k=Z?.id}T.set(S.membershipId,{legacy_membership_id:parseInt(S.membershipId),start_date:x(S.startDate),expiry_date:x(S.expiryDate),last_renewed_date:x(S.lastRenewedDate),previous_expiry_date:x(S.previousExpiryDate),status:S.status||"Active",pending_status:S.pendingStatus,category:S.category,membership_type:S.type,pricing_option:S.pricingOption,pricing_option_cost:parseFloat(S.pricingOptionCost)||0,target_type:S.targetType,total_members:parseInt(S.totalMembers)||1,company_id:k,primary_contact_user_id:S.primaryContactUserId?parseInt(S.primaryContactUserId):null})}w.memberships.total=T.size;for(const[S,k]of T)try{const{data:Z}=await Mr.from("memberships").select("id").eq("legacy_membership_id",k.legacy_membership_id).maybeSingle();if(Z)w.memberships.existing++;else{const{error:R}=await Mr.from("memberships").insert(k);R?(w.memberships.failed++,h(U=>[...U,`Membership ${S}: ${R.message}`])):w.memberships.created++}}catch(Z){w.memberships.failed++,h(R=>[...R,`Membership ${S}: ${Z}`])}p({phase:"members",message:"Processing members...",current:0,total:j.length}),w.members.total=j.length;for(let S=0;S<j.length;S++){const k=j[S];p({phase:"members",message:`Processing member ${S+1} of ${j.length}...`,current:S+1,total:j.length});try{const{data:Z}=await Mr.from("members").select("id").eq("legacy_user_id",parseInt(k.userId)).maybeSingle();if(Z){w.members.existing++;continue}let R=null;if(k.membershipId){const{data:z}=await Mr.from("memberships").select("id").eq("legacy_membership_id",parseInt(k.membershipId)).maybeSingle();R=z?.id}let U=null;if(k.companyId){const{data:z}=await Mr.from("companies").select("id").eq("legacy_company_id",parseInt(k.companyId)).maybeSingle();U=z?.id}const B={legacy_user_id:parseInt(k.userId),membership_id:R,company_id:U,title:k.memberTitle,first_name:k.memberFirstName?.trim()||"",last_name:k.memberLastName?.trim()||"",email:k.memberEmail?.toLowerCase()||"",position:k.memberPosition,street_address:k.memberStreetAddress,street_address_line_2:k.memberStreetAddressLine2,suburb:k.memberSuburb,postcode:k.memberPostcode,state:k.memberState,country:k.memberCountry||"Australia",mobile:k.memberMobile,bio:k.memberBio,board_member_role:k.memberBoardRole,area_of_expertise:k.memberAreaExpertise,teacher_since:x(k.memberTeacherSince),courses_taught:k.memberCoursesTaught,interest_tags:k.memberInterestTags,subscriptions:k.memberSubscriptions,email_subscriptions:k.memberEmailSubscriptions,unsubscribe_notes:k.memberUnsubscribeNotes,username:k.memberUsername||k.memberEmail,groups:k.memberGroups,is_test_member:k.memberTest==="1",is_editable_address:k.memberEditableAddress==="1",member_created_date:x(k.memberCreated),member_last_edited:x(k.memberLastEdited),company_name:k.memberCompanyName,company_name_actual:k.memberCompanyNameActual,display_name:`${k.memberFirstName} ${k.memberLastName}`.trim(),membership_status:(k.status||"active").toLowerCase()},{data:A,error:C}=await Mr.from("members").insert(B).select("id").single();C?(w.members.failed++,h(z=>[...z,`Member ${k.memberEmail}: ${C.message}`])):(w.members.created++,A?.id&&await Mr.from("member_roles").insert({member_id:A.id,role:"member"}).select().single())}catch(Z){w.members.failed++,h(R=>[...R,`Member ${k.memberEmail}: ${Z}`])}await new Promise(Z=>setTimeout(Z,10))}o(w),p({phase:"complete",message:"Import completed!",current:100,total:100}),w.companies.created>0&&ye("success",`Created ${w.companies.created} companies`),w.memberships.created>0&&ye("success",`Created ${w.memberships.created} memberships`),w.members.created>0&&ye("success",`Created ${w.members.created} members`)}catch(w){console.error("Import error:",w),ye("error","Import failed",w instanceof Error?w.message:"Unknown error")}finally{r(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Complete System Import"}),i.jsx("p",{className:"mt-2 text-gray-600",children:"Import members, companies, and memberships from the complete CSV export"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ge,{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Upload Complete CSV"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{type:"file",accept:".csv",onChange:g,className:`block w-full text-sm text-gray-500
                file:mr-4 file:py-2 file:px-4
                file:rounded-full file:border-0
                file:text-sm file:font-semibold
                file:bg-blue-50 file:text-blue-700
                hover:file:bg-blue-100`,disabled:s}),t&&i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:i.jsxs("p",{className:"text-sm text-gray-700",children:[i.jsx("strong",{children:"Selected File:"})," ",t.name]})}),i.jsxs(ce,{onClick:v,disabled:!t||s,className:"bg-green-600 hover:bg-green-700",children:[i.jsx(Fi,{className:"mr-2 h-4 w-4"}),s?"Importing...":"Start Import"]})]})]}),f.phase&&i.jsxs(ge,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Import Progress"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-sm text-gray-600",children:f.message}),f.total>0&&i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${f.current/f.total*100}%`}})})]})]}),l&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(u8,{className:"h-6 w-6 text-blue-600"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Companies"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:["Total: ",l.companies.total]}),i.jsxs("p",{className:"text-green-600",children:["Created: ",l.companies.created]}),i.jsxs("p",{className:"text-yellow-600",children:["Existing: ",l.companies.existing]}),i.jsxs("p",{className:"text-red-600",children:["Failed: ",l.companies.failed]})]})]}),i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(eS,{className:"h-6 w-6 text-purple-600"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Memberships"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:["Total: ",l.memberships.total]}),i.jsxs("p",{className:"text-green-600",children:["Created: ",l.memberships.created]}),i.jsxs("p",{className:"text-yellow-600",children:["Existing: ",l.memberships.existing]}),i.jsxs("p",{className:"text-red-600",children:["Failed: ",l.memberships.failed]})]})]}),i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(ni,{className:"h-6 w-6 text-green-600"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Members"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:["Total: ",l.members.total]}),i.jsxs("p",{className:"text-green-600",children:["Created: ",l.members.created]}),i.jsxs("p",{className:"text-yellow-600",children:["Existing: ",l.members.existing]}),i.jsxs("p",{className:"text-red-600",children:["Failed: ",l.members.failed]})]})]})]}),u.length>0&&i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(Ay,{className:"h-6 w-6 text-red-600"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Import Errors"})]}),i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:u.map((w,x)=>i.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:w},x))})]})]})]})};function Xq({postalCode:t,onAddressChange:e,register:s}){const[r,l]=O.useState(!1),[,o]=O.useState({});O.useEffect(()=>{t&&t.length>=4&&u(t)},[t]);const u=async h=>{if(!(!h||h.length<4)){l(!0);try{let f="",p,g;if(/^\d{4}$/.test(h)){f=`https://api.postcodes.io/postcodes/${h}`;try{if(p=await fetch(f),p.ok&&(g=await p.json(),g.result)){const T={city:g.result.admin_district||g.result.parish||"",state:g.result.country||g.result.region||"",country:"Australia"};o(T),e(T);return}}catch{console.warn("UK postcode API failed, trying alternative")}const N={state:{1:"NSW",2:"NSW",3:"VIC",4:"QLD",5:"SA",6:"WA",7:"TAS",0:"NT"}[h[0]]||"NSW",country:"Australia"};o(N),e(N);return}if(/^\d{5}$/.test(h)){f=`http://api.zippopotam.us/us/${h}`;try{if(p=await fetch(f),p.ok){g=await p.json();const x={city:g.places?.[0]?.["place name"]||"",state:g.places?.[0]?.["state abbreviation"]||"",country:"United States"};o(x),e(x);return}}catch{console.warn("US ZIP API failed")}}if(/^[A-Z]{1,2}\d{1,2}[A-Z]?\s?\d[A-Z]{2}$/i.test(h)){f=`https://api.postcodes.io/postcodes/${h.toUpperCase()}`;try{if(p=await fetch(f),p.ok&&(g=await p.json(),g.result)){const x={city:g.result.admin_district||"",state:g.result.region||"",country:"United Kingdom"};o(x),e(x);return}}catch{console.warn("UK postcode API failed")}}const b=h.replace(/\D/g,"");if(/^\d{8}$/.test(b)){f=`https://viacep.com.br/ws/${b}/json/`;try{if(p=await fetch(f),p.ok&&(g=await p.json(),!g.erro)){const x={address_line1:`${g.logradouro||""}`.trim(),city:g.localidade||"",state:g.uf||"",country:"Brazil"};o(x),e(x);return}}catch{console.warn("Brazil CEP API failed")}}let v="Australia";/^\d{5}$/.test(h)?v="United States":/^[A-Z]{1,2}\d{1,2}[A-Z]?\s?\d[A-Z]{2}$/i.test(h)?v="United Kingdom":/^\d{8}$/.test(b)&&(v="Brazil");const w={country:v};o(w),e(w)}catch(f){console.error("Error fetching address data:",f)}finally{l(!1)}}};return i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(xe,{htmlFor:"address_line1",children:"Address Line 1"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ae,{id:"address_line1",...s("address_line1"),placeholder:"123 Main Street"}),r&&i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:i.jsx(Bi,{className:"w-4 h-4 animate-spin text-blue-600"})})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(xe,{htmlFor:"address_line2",children:"Address Line 2"}),i.jsx(Ae,{id:"address_line2",...s("address_line2"),placeholder:"Apartment 4B"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"city",children:"City"}),i.jsx(Ae,{id:"city",...s("city"),placeholder:"Sydney"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"state",children:"State"}),i.jsx(Ae,{id:"state",...s("state"),placeholder:"NSW"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"postal_code",children:"Postal Code"}),i.jsx(Ae,{id:"postal_code",...s("postal_code"),placeholder:"2000"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"country",children:"Country"}),i.jsx(Ae,{id:"country",...s("country"),placeholder:"Australia"})]})]})})}const Jq=pd({first_name:Zt().min(1,"First name is required"),last_name:Zt().min(1,"Last name is required"),email:Zt().email("Invalid email"),phone:Zt().optional(),date_of_birth:Zt().optional(),address_line1:Zt().optional(),address_line2:Zt().optional(),city:Zt().optional(),state:Zt().optional(),postal_code:Zt().optional(),country:Zt().optional(),profession:Zt().optional(),experience_years:of().min(0).optional(),qualifications:Zt().optional()});function eP(){const[t,e]=O.useState(!1),[s,r]=O.useState(!0),{user:l}=Bt(),{register:o,handleSubmit:u,reset:h,watch:f,setValue:p,formState:{errors:g}}=hd({resolver:md(Jq)}),b=f("postal_code")||"";O.useEffect(()=>{v()},[l]);const v=async()=>{if(l)try{r(!0);const x=new Promise((k,Z)=>setTimeout(()=>Z(new Error("Load timeout")),3e3)),j=J.from("members").select("*").eq("email",l.email).single();let N=null,T=null;try{const k=await Promise.race([j,x]);N=k.data,T=k.error}catch{console.warn("Profile load timed out, using defaults")}T&&T.code!=="PGRST116"&&console.error("Error loading member data:",T);const S={email:l.email||"",first_name:N?.first_name||"",last_name:N?.last_name||"",phone:N?.phone||"",date_of_birth:N?.date_of_birth||"",address_line1:N?.address_line1||"",address_line2:N?.address_line2||"",city:N?.city||"",state:N?.state||"",postal_code:N?.postal_code||"",country:N?.country||"Australia",profession:N?.profession||"",experience_years:N?.experience_years||0,qualifications:N?.qualifications||""};h(S),N?.phone&&p("phone",N.phone),N?.address_line1&&p("address_line1",N.address_line1),N?.city&&p("city",N.city),N?.state&&p("state",N.state),N?.country&&p("country",N.country),N?.postal_code&&p("postal_code",N.postal_code)}catch(x){console.error("Error loading profile:",x),ye("error","Error loading profile data")}finally{r(!1)}},w=async x=>{if(l)try{e(!0);const{data:j}=await J.from("members").select("id").eq("email",l.email).single(),N={first_name:x.first_name,last_name:x.last_name,email:x.email,phone:x.phone||null,date_of_birth:x.date_of_birth&&x.date_of_birth!==""?x.date_of_birth:null,address_line1:x.address_line1||null,address_line2:x.address_line2||null,city:x.city||null,state:x.state||null,postal_code:x.postal_code||null,country:x.country||"Australia",profession:x.profession||null,experience_years:x.experience_years?Number(x.experience_years):null,qualifications:x.qualifications||null,updated_at:new Date().toISOString(),updated_by:l.id};if(j){const{error:T}=await J.from("members").update(N).eq("id",j.id);if(T)throw T}else{const{error:T}=await J.from("members").insert({...N,membership_status:"active",membership_type:"standard",receive_newsletters:!0,receive_event_notifications:!0,created_by:l.id});if(T)throw T}ye("success","Profile updated successfully!")}catch(j){console.error("Error updating profile:",j),ye("error","Error updating profile")}finally{e(!1)}};return s?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(Bi,{className:"w-8 h-8 animate-spin text-blue-600"})}):i.jsxs("form",{onSubmit:u(w),className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"first_name",children:"First Name *"}),i.jsx(Ae,{id:"first_name",...o("first_name"),placeholder:"Your first name"}),g.first_name&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:g.first_name.message})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"last_name",children:"Last Name *"}),i.jsx(Ae,{id:"last_name",...o("last_name"),placeholder:"Your last name"}),g.last_name&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:g.last_name.message})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"email",children:"Email *"}),i.jsx(Ae,{id:"email",type:"email",...o("email"),placeholder:"your@email.com",disabled:!0}),g.email&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:g.email.message})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"phone",children:"Phone"}),i.jsx(aS,{value:f("phone")||"",onChange:x=>p("phone",x),placeholder:"Enter phone number"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"date_of_birth",children:"Date of Birth"}),i.jsx(Ae,{id:"date_of_birth",type:"date",...o("date_of_birth")})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"profession",children:"Profession"}),i.jsx(Ae,{id:"profession",...o("profession"),placeholder:"English Teacher"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"experience_years",children:"Years of Experience"}),i.jsx(Ae,{id:"experience_years",type:"number",min:"0",...o("experience_years",{valueAsNumber:!0}),placeholder:"5"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"qualifications",children:"Qualifications"}),i.jsx(Ae,{id:"qualifications",...o("qualifications"),placeholder:"CELTA, DELTA, MA TESOL"})]})]}),i.jsxs("div",{className:"border-t pt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Address"}),i.jsx(Xq,{postalCode:b,onAddressChange:x=>{x.address_line1&&p("address_line1",x.address_line1),x.city&&p("city",x.city),x.state&&p("state",x.state),x.country&&p("country",x.country)},register:o,errors:g})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx(ce,{type:"button",variant:"outline",onClick:()=>v(),disabled:t,children:"Cancel"}),i.jsx(ce,{type:"submit",disabled:t,children:t?i.jsxs(i.Fragment,{children:[i.jsx(Bi,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})}const tP=pd({currentPassword:Zt().min(6,"Current password is required"),newPassword:Zt().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),confirmPassword:Zt()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function sP(){const[t,e]=O.useState(!1),[s,r]=O.useState(!1),[l,o]=O.useState(!1),[u,h]=O.useState(!1),{register:f,handleSubmit:p,reset:g,formState:{errors:b}}=hd({resolver:md(tP)}),v=async w=>{try{e(!0);const{data:{user:x}}=await J.auth.getUser();if(!x?.email)throw new Error("User not found");const{error:j}=await J.auth.signInWithPassword({email:x.email,password:w.currentPassword});if(j){ye("error","Current password is incorrect");return}const{error:N}=await J.auth.updateUser({password:w.newPassword});if(N)throw N;ye("success","Password changed successfully!"),g()}catch(x){console.error("Error updating password:",x),x.message==="New password should be different from the old password."?ye("error","New password must be different from current password"):ye("error","Error changing password. Please try again.")}finally{e(!1)}};return i.jsxs("form",{onSubmit:p(v),className:"space-y-6 max-w-md",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"currentPassword",children:"Current Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ae,{id:"currentPassword",type:s?"text":"password",...f("currentPassword"),placeholder:"Enter your current password"}),i.jsx("button",{type:"button",onClick:()=>r(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:s?i.jsx(uf,{className:"w-4 h-4"}):i.jsx(ti,{className:"w-4 h-4"})})]}),b.currentPassword&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.currentPassword.message})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"newPassword",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ae,{id:"newPassword",type:l?"text":"password",...f("newPassword"),placeholder:"Enter your new password"}),i.jsx("button",{type:"button",onClick:()=>o(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:l?i.jsx(uf,{className:"w-4 h-4"}):i.jsx(ti,{className:"w-4 h-4"})})]}),b.newPassword&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.newPassword.message}),i.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[i.jsx("p",{children:"Password must contain:"}),i.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[i.jsx("li",{children:"At least 8 characters"}),i.jsx("li",{children:"One uppercase letter (A-Z)"}),i.jsx("li",{children:"One lowercase letter (a-z)"}),i.jsx("li",{children:"One number (0-9)"}),i.jsx("li",{children:"One special character (!@#$%^&*)"})]})]})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"confirmPassword",children:"Confirm New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ae,{id:"confirmPassword",type:u?"text":"password",...f("confirmPassword"),placeholder:"Confirm your new password"}),i.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u?i.jsx(uf,{className:"w-4 h-4"}):i.jsx(ti,{className:"w-4 h-4"})})]}),b.confirmPassword&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.confirmPassword.message})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx(ce,{type:"button",variant:"outline",onClick:()=>g(),disabled:t,children:"Cancel"}),i.jsx(ce,{type:"submit",disabled:t,children:t?i.jsxs(i.Fragment,{children:[i.jsx(Bi,{className:"w-4 h-4 mr-2 animate-spin"}),"Changing..."]}):"Change Password"})]})]})}class rP{static async initializeBuckets(){try{const{data:e,error:s}=await J.storage.listBuckets();if(s&&console.warn("Error listing buckets:",s),e?.some(l=>l.name==="profiles"))console.log(" Profiles bucket already exists");else{const{data:l,error:o}=await J.storage.createBucket("profiles",{public:!0,fileSizeLimit:5242880,allowedMimeTypes:["image/jpeg","image/png","image/webp","image/gif"]});o?o.message?.includes("already exists")?console.log(" Profiles bucket already exists"):console.warn("Error creating profiles bucket:",o):console.log(" Profiles bucket created successfully",l)}}catch(e){console.warn("Error initializing storage buckets:",e)}}static async uploadAvatar(e,s){const r=s.name.split(".").pop()?.toLowerCase()||"jpg",o=`avatars/${`avatar-${e}-${Date.now()}.${r}`}`;console.log("Uploading file:",{name:s.name,type:s.type,size:s.size,path:o});const{data:u,error:h}=await J.storage.from("profiles").upload(o,s,{cacheControl:"3600",upsert:!0});if(h)throw console.error("Upload error details:",h),h;console.log("Upload successful:",u);const{data:{publicUrl:f}}=J.storage.from("profiles").getPublicUrl(o);return f}static async deleteAvatar(e){try{const r=new URL(e).pathname.match(/\/profiles\/(.+)$/);if(r&&r[1]){const l=r[1],{error:o}=await J.storage.from("profiles").remove([l]);o&&console.warn("Error deleting avatar file:",o)}}catch(s){console.warn("Error parsing avatar URL for deletion:",s)}}}function nP({currentAvatar:t,onAvatarChange:e,size:s="lg"}){const[r,l]=O.useState(!1),o=O.useRef(null),{user:u}=Bt(),f={sm:{wrapper:"w-16 h-16",text:"text-xs"},md:{wrapper:"w-24 h-24",text:"text-sm"},lg:{wrapper:"w-32 h-32",text:"text-base"}}[s],p=w=>{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(w.type))return"Only JPEG, PNG, and WebP images are allowed";const j=5*1024*1024;return w.size>j?"Image must be smaller than 5MB":null},g=O.useCallback(async w=>{if(w.target.files&&w.target.files.length>0){const x=w.target.files[0],j=p(x);if(j){ye("error",j);return}await b(x)}},[]),b=async w=>{if(u)try{l(!0);const x=await rP.uploadAvatar(u.id,w);if(u.email){const{error:j}=await J.from("members").update({avatar_url:x}).eq("email",u.email);if(j)if(j.code==="PGRST116")await J.from("members").insert({email:u.email,avatar_url:x,created_by:u.id,membership_status:"active",membership_type:"standard"});else throw j}e(x),ye("success","Profile photo updated successfully!")}catch(x){console.error("Error uploading avatar:",x),ye("error","Failed to upload profile photo")}finally{l(!1)}},v=async()=>{if(u?.email)try{l(!0);const{error:w}=await J.from("members").update({avatar_url:null}).eq("email",u.email);if(w&&w.code!=="PGRST116")throw w;e(null),ye("success","Profile photo removed")}catch(w){console.error("Error removing avatar:",w),ye("error","Failed to remove profile photo")}finally{l(!1)}};return i.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[i.jsxs("div",{className:`relative ${f.wrapper} rounded-full overflow-hidden bg-gray-100 border-4 border-white shadow-lg group cursor-pointer`,children:[t?i.jsx("img",{src:t,alt:"Profile",className:"w-full h-full object-cover",onClick:()=>o.current?.click()}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-blue-600 text-white",onClick:()=>o.current?.click(),children:i.jsx(h_,{className:"w-10 h-10"})}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:()=>o.current?.click(),children:i.jsx(h_,{className:"w-8 h-8 text-white"})}),!r&&i.jsx("div",{className:"absolute bottom-0 right-0 bg-blue-600 text-white rounded-full p-2 shadow-lg cursor-pointer hover:bg-blue-700 transition-colors",onClick:()=>o.current?.click(),children:i.jsx(Fi,{className:"w-4 h-4"})}),r&&i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})]}),t&&!r&&i.jsx("button",{type:"button",onClick:v,className:"text-xs text-gray-500 hover:text-red-600 transition-colors",children:"Remove photo"}),i.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:g,className:"hidden"})]})}function iP(){const[t,e]=O.useState("profile"),[s,r]=O.useState(null),[l,o]=O.useState(0),{user:u}=Bt(),h=or();O.useEffect(()=>{f()},[u]);const f=async()=>{if(u?.email)try{const{data:g}=await J.from("members").select("avatar_url").eq("email",u.email).single();g?.avatar_url&&r(g.avatar_url)}catch(g){console.error("Error loading avatar:",g)}},p=async g=>{r(g),o(b=>b+1)};return u?i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-8",children:"My Profile"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsxs(ge,{className:"p-4",children:[i.jsxs("div",{className:"flex flex-col items-center mb-6",children:[i.jsx(nP,{currentAvatar:s,onAvatarChange:p,size:"lg"}),i.jsx("h2",{className:"font-semibold mt-4",children:u.email}),i.jsx("p",{className:"text-sm text-gray-500 capitalize",children:"Member"})]}),i.jsxs("nav",{className:"space-y-2",children:[i.jsxs("button",{onClick:()=>e("profile"),className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${t==="profile"?"bg-blue-50 text-blue-600":"hover:bg-gray-50"}`,children:[i.jsx(ky,{className:"w-4 h-4"}),"Personal Information"]}),i.jsxs("button",{onClick:()=>e("password"),className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${t==="password"?"bg-blue-50 text-blue-600":"hover:bg-gray-50"}`,children:[i.jsx(fq,{className:"w-4 h-4"}),"Change Password"]}),i.jsxs("button",{onClick:()=>e("notifications"),className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${t==="notifications"?"bg-blue-50 text-blue-600":"hover:bg-gray-50"}`,children:[i.jsx(QN,{className:"w-4 h-4"}),"Notifications"]})]})]})}),i.jsx("div",{className:"lg:col-span-3",children:i.jsxs(ge,{className:"p-6",children:[t==="profile"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Personal Information"}),i.jsx(eP,{},l)]}),t==="password"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Change Password"}),i.jsx(sP,{})]}),t==="notifications"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Notification Preferences"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",className:"w-4 h-4",defaultChecked:!0}),i.jsx("span",{children:"Receive email newsletters"})]}),i.jsxs("label",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",className:"w-4 h-4",defaultChecked:!0}),i.jsx("span",{children:"Event notifications"})]}),i.jsxs("label",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",className:"w-4 h-4"}),i.jsx("span",{children:"CPD reminders"})]}),i.jsxs("label",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",className:"w-4 h-4",defaultChecked:!0}),i.jsx("span",{children:"Important system updates"})]})]}),i.jsx(ce,{className:"mt-6",children:"Save Preferences"})]})]})})]})]}):(h("/login"),null)}const{CPDService:y_,CPD_CATEGORIES:b_}=Gl,aP=pd({category_id:of().min(1,"Please select a category"),activity_title:Zt().min(1,"Activity title is required"),description:Zt().optional(),provider:Zt().optional(),date_completed:Zt().min(1,"Date is required"),hours:of().min(0).max(99),minutes:of().min(0).max(59)});function lP({isOpen:t,onClose:e,onSuccess:s}){const[r,l]=O.useState(!1),[o,u]=O.useState(null),[h,f]=O.useState([]),{user:p}=Bt(),{register:g,handleSubmit:b,watch:v,reset:w,formState:{errors:x}}=hd({resolver:md(aP),defaultValues:{hours:0,minutes:0,date_completed:new Date().toISOString().split("T")[0]}}),j=v("category_id"),N=v("hours")||0,T=v("minutes")||0;O.useEffect(()=>{t&&S()},[t]);const S=async()=>{try{const U=await y_.getCategorySettings();f(U)}catch(U){console.error("Error loading category settings:",U),f([])}},k=()=>{const U=h.find(z=>z.category_id===Number(j)),B=b_.find(z=>z.id===Number(j)),A=U?.points_per_hour||B?.points_per_hour||1;return((N+T/60)*A).toFixed(2)},Z=async U=>{if(p)try{l(!0);const B={...U,evidence:o||void 0};await y_.createActivity(B,p.id,p.email||""),w(),u(null),s(),e()}catch(B){console.error("Error submitting CPD activity:",B)}finally{l(!1)}},R=U=>{if(U.target.files&&U.target.files[0]){const B=U.target.files[0];if(B.size>10*1024*1024){alert("File size must be less than 10MB");return}u(B)}};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Add New CPD Activity"}),i.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:i.jsx(Hi,{className:"w-5 h-5"})})]}),i.jsxs("form",{onSubmit:b(Z),className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"category_id",children:"Category *"}),i.jsxs("select",{id:"category_id",...g("category_id",{valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"-- Select a Category --"}),b_.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))]}),x.category_id&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.category_id.message})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"activity_title",children:"Activity Title *"}),i.jsx(Ae,{id:"activity_title",...g("activity_title"),placeholder:"e.g., Annual TESOL Conference"}),x.activity_title&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.activity_title.message})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"description",children:"Description"}),i.jsx("textarea",{id:"description",...g("description"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Brief description of the activity..."})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"provider",children:"Provider/Organizer"}),i.jsx(Ae,{id:"provider",...g("provider"),placeholder:"e.g., English Australia"})]}),i.jsxs("div",{children:[i.jsxs(xe,{htmlFor:"date_completed",children:[i.jsx(er,{className:"w-4 h-4 inline mr-1"}),"Date Completed *"]}),i.jsx(Ae,{id:"date_completed",type:"date",...g("date_completed"),max:new Date().toISOString().split("T")[0]}),x.date_completed&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.date_completed.message})]}),i.jsxs("div",{children:[i.jsxs(xe,{children:[i.jsx(Ba,{className:"w-4 h-4 inline mr-1"}),"Duration *"]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ae,{type:"number",...g("hours",{valueAsNumber:!0}),min:"0",max:"99",className:"w-20"}),i.jsx("span",{className:"text-sm text-gray-600",children:"hours"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ae,{type:"number",...g("minutes",{valueAsNumber:!0}),min:"0",max:"59",className:"w-20"}),i.jsx("span",{className:"text-sm text-gray-600",children:"minutes"})]})})]})]}),j&&(N>0||T>0)&&i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Estimated Points:"}),i.jsx("span",{className:"text-2xl font-bold text-blue-600",children:k()})]})}),i.jsxs("div",{children:[i.jsxs(xe,{htmlFor:"evidence",children:[i.jsx(Fa,{className:"w-4 h-4 inline mr-1"}),"Evidence (Optional)"]}),i.jsxs("div",{className:"mt-1",children:[i.jsxs("label",{className:"flex items-center justify-center w-full px-4 py-2 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer hover:border-blue-400 transition-colors",children:[i.jsx(Fi,{className:"w-5 h-5 mr-2 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-600",children:o?o.name:"Click to upload certificate or evidence"}),i.jsx("input",{type:"file",onChange:R,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",className:"hidden"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Accepted formats: PDF, JPG, PNG, DOC, DOCX (Max 10MB)"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[i.jsx(ce,{type:"button",variant:"outline",onClick:e,disabled:r,className:"flex-1",children:"Cancel"}),i.jsx(ce,{type:"submit",disabled:r,className:"flex-1",children:r?"Adding...":"Add Activity"})]})]})]})}):null}const lS=6048e5,oP=864e5,x_=Symbol.for("constructDateFrom");function Ha(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&x_ in t?t[x_](e):t instanceof Date?new t.constructor(e):new Date(e)}function Rn(t,e){return Ha(e||t,t)}let cP={};function Xf(){return cP}function td(t,e){const s=Xf(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,l=Rn(t,e?.in),o=l.getDay(),u=(o<r?7:0)+o-r;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}function Of(t,e){return td(t,{...e,weekStartsOn:1})}function oS(t,e){const s=Rn(t,e?.in),r=s.getFullYear(),l=Ha(s,0);l.setFullYear(r+1,0,4),l.setHours(0,0,0,0);const o=Of(l),u=Ha(s,0);u.setFullYear(r,0,4),u.setHours(0,0,0,0);const h=Of(u);return s.getTime()>=o.getTime()?r+1:s.getTime()>=h.getTime()?r:r-1}function v_(t){const e=Rn(t),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return s.setUTCFullYear(e.getFullYear()),+t-+s}function uP(t,...e){const s=Ha.bind(null,e.find(r=>typeof r=="object"));return e.map(s)}function w_(t,e){const s=Rn(t,e?.in);return s.setHours(0,0,0,0),s}function dP(t,e,s){const[r,l]=uP(s?.in,t,e),o=w_(r),u=w_(l),h=+o-v_(o),f=+u-v_(u);return Math.round((h-f)/oP)}function hP(t,e){const s=oS(t,e),r=Ha(t,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),Of(r)}function fP(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function mP(t){return!(!fP(t)&&typeof t!="number"||isNaN(+Rn(t)))}function pP(t,e){const s=Rn(t,e?.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}const gP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},yP=(t,e,s)=>{let r;const l=gP[t];return typeof l=="string"?r=l:e===1?r=l.one:r=l.other.replace("{{count}}",e.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r};function _g(t){return(e={})=>{const s=e.width?String(e.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const bP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},xP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},vP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},wP={date:_g({formats:bP,defaultWidth:"full"}),time:_g({formats:xP,defaultWidth:"full"}),dateTime:_g({formats:vP,defaultWidth:"full"})},_P={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jP=(t,e,s,r)=>_P[t];function Lu(t){return(e,s)=>{const r=s?.context?String(s.context):"standalone";let l;if(r==="formatting"&&t.formattingValues){const u=t.defaultFormattingWidth||t.defaultWidth,h=s?.width?String(s.width):u;l=t.formattingValues[h]||t.formattingValues[u]}else{const u=t.defaultWidth,h=s?.width?String(s.width):t.defaultWidth;l=t.values[h]||t.values[u]}const o=t.argumentCallback?t.argumentCallback(e):e;return l[o]}}const NP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},SP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},EP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},AP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},CP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},kP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},TP=(t,e)=>{const s=Number(t),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},OP={ordinalNumber:TP,era:Lu({values:NP,defaultWidth:"wide"}),quarter:Lu({values:SP,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Lu({values:EP,defaultWidth:"wide"}),day:Lu({values:AP,defaultWidth:"wide"}),dayPeriod:Lu({values:CP,defaultWidth:"wide",formattingValues:kP,defaultFormattingWidth:"wide"})};function qu(t){return(e,s={})=>{const r=s.width,l=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(l);if(!o)return null;const u=o[0],h=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],f=Array.isArray(h)?MP(h,b=>b.test(u)):RP(h,b=>b.test(u));let p;p=t.valueCallback?t.valueCallback(f):f,p=s.valueCallback?s.valueCallback(p):p;const g=e.slice(u.length);return{value:p,rest:g}}}function RP(t,e){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return s}function MP(t,e){for(let s=0;s<t.length;s++)if(e(t[s]))return s}function DP(t){return(e,s={})=>{const r=e.match(t.matchPattern);if(!r)return null;const l=r[0],o=e.match(t.parsePattern);if(!o)return null;let u=t.valueCallback?t.valueCallback(o[0]):o[0];u=s.valueCallback?s.valueCallback(u):u;const h=e.slice(l.length);return{value:u,rest:h}}}const LP=/^(\d+)(th|st|nd|rd)?/i,qP=/\d+/i,PP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},IP={any:[/^b/i,/^(a|c)/i]},$P={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},UP={any:[/1/i,/2/i,/3/i,/4/i]},zP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},BP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},FP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},HP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},VP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},GP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ZP={ordinalNumber:DP({matchPattern:LP,parsePattern:qP,valueCallback:t=>parseInt(t,10)}),era:qu({matchPatterns:PP,defaultMatchWidth:"wide",parsePatterns:IP,defaultParseWidth:"any"}),quarter:qu({matchPatterns:$P,defaultMatchWidth:"wide",parsePatterns:UP,defaultParseWidth:"any",valueCallback:t=>t+1}),month:qu({matchPatterns:zP,defaultMatchWidth:"wide",parsePatterns:BP,defaultParseWidth:"any"}),day:qu({matchPatterns:FP,defaultMatchWidth:"wide",parsePatterns:HP,defaultParseWidth:"any"}),dayPeriod:qu({matchPatterns:VP,defaultMatchWidth:"any",parsePatterns:GP,defaultParseWidth:"any"})},YP={code:"en-US",formatDistance:yP,formatLong:wP,formatRelative:jP,localize:OP,match:ZP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function KP(t,e){const s=Rn(t,e?.in);return dP(s,pP(s))+1}function WP(t,e){const s=Rn(t,e?.in),r=+Of(s)-+hP(s);return Math.round(r/lS)+1}function cS(t,e){const s=Rn(t,e?.in),r=s.getFullYear(),l=Xf(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??l.firstWeekContainsDate??l.locale?.options?.firstWeekContainsDate??1,u=Ha(e?.in||t,0);u.setFullYear(r+1,0,o),u.setHours(0,0,0,0);const h=td(u,e),f=Ha(e?.in||t,0);f.setFullYear(r,0,o),f.setHours(0,0,0,0);const p=td(f,e);return+s>=+h?r+1:+s>=+p?r:r-1}function QP(t,e){const s=Xf(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,l=cS(t,e),o=Ha(e?.in||t,0);return o.setFullYear(l,0,r),o.setHours(0,0,0,0),td(o,e)}function XP(t,e){const s=Rn(t,e?.in),r=+td(s,e)-+QP(s,e);return Math.round(r/lS)+1}function Et(t,e){const s=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return s+r}const Ta={y(t,e){const s=t.getFullYear(),r=s>0?s:1-s;return Et(e==="yy"?r%100:r,e.length)},M(t,e){const s=t.getMonth();return e==="M"?String(s+1):Et(s+1,2)},d(t,e){return Et(t.getDate(),e.length)},a(t,e){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(t,e){return Et(t.getHours()%12||12,e.length)},H(t,e){return Et(t.getHours(),e.length)},m(t,e){return Et(t.getMinutes(),e.length)},s(t,e){return Et(t.getSeconds(),e.length)},S(t,e){const s=e.length,r=t.getMilliseconds(),l=Math.trunc(r*Math.pow(10,s-3));return Et(l,e.length)}},Xo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},__={G:function(t,e,s){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})}},y:function(t,e,s){if(e==="yo"){const r=t.getFullYear(),l=r>0?r:1-r;return s.ordinalNumber(l,{unit:"year"})}return Ta.y(t,e)},Y:function(t,e,s,r){const l=cS(t,r),o=l>0?l:1-l;if(e==="YY"){const u=o%100;return Et(u,2)}return e==="Yo"?s.ordinalNumber(o,{unit:"year"}):Et(o,e.length)},R:function(t,e){const s=oS(t);return Et(s,e.length)},u:function(t,e){const s=t.getFullYear();return Et(s,e.length)},Q:function(t,e,s){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Et(r,2);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,s){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Et(r,2);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,s){const r=t.getMonth();switch(e){case"M":case"MM":return Ta.M(t,e);case"Mo":return s.ordinalNumber(r+1,{unit:"month"});case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,s){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Et(r+1,2);case"Lo":return s.ordinalNumber(r+1,{unit:"month"});case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,s,r){const l=XP(t,r);return e==="wo"?s.ordinalNumber(l,{unit:"week"}):Et(l,e.length)},I:function(t,e,s){const r=WP(t);return e==="Io"?s.ordinalNumber(r,{unit:"week"}):Et(r,e.length)},d:function(t,e,s){return e==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):Ta.d(t,e)},D:function(t,e,s){const r=KP(t);return e==="Do"?s.ordinalNumber(r,{unit:"dayOfYear"}):Et(r,e.length)},E:function(t,e,s){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,s,r){const l=t.getDay(),o=(l-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Et(o,2);case"eo":return s.ordinalNumber(o,{unit:"day"});case"eee":return s.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(l,{width:"short",context:"formatting"});case"eeee":default:return s.day(l,{width:"wide",context:"formatting"})}},c:function(t,e,s,r){const l=t.getDay(),o=(l-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Et(o,e.length);case"co":return s.ordinalNumber(o,{unit:"day"});case"ccc":return s.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(l,{width:"narrow",context:"standalone"});case"cccccc":return s.day(l,{width:"short",context:"standalone"});case"cccc":default:return s.day(l,{width:"wide",context:"standalone"})}},i:function(t,e,s){const r=t.getDay(),l=r===0?7:r;switch(e){case"i":return String(l);case"ii":return Et(l,e.length);case"io":return s.ordinalNumber(l,{unit:"day"});case"iii":return s.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(r,{width:"short",context:"formatting"});case"iiii":default:return s.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,s){const l=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(t,e,s){const r=t.getHours();let l;switch(r===12?l=Xo.noon:r===0?l=Xo.midnight:l=r/12>=1?"pm":"am",e){case"b":case"bb":return s.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(t,e,s){const r=t.getHours();let l;switch(r>=17?l=Xo.evening:r>=12?l=Xo.afternoon:r>=4?l=Xo.morning:l=Xo.night,e){case"B":case"BB":case"BBB":return s.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(t,e,s){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),s.ordinalNumber(r,{unit:"hour"})}return Ta.h(t,e)},H:function(t,e,s){return e==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):Ta.H(t,e)},K:function(t,e,s){const r=t.getHours()%12;return e==="Ko"?s.ordinalNumber(r,{unit:"hour"}):Et(r,e.length)},k:function(t,e,s){let r=t.getHours();return r===0&&(r=24),e==="ko"?s.ordinalNumber(r,{unit:"hour"}):Et(r,e.length)},m:function(t,e,s){return e==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ta.m(t,e)},s:function(t,e,s){return e==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):Ta.s(t,e)},S:function(t,e){return Ta.S(t,e)},X:function(t,e,s){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return N_(r);case"XXXX":case"XX":return Cl(r);case"XXXXX":case"XXX":default:return Cl(r,":")}},x:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"x":return N_(r);case"xxxx":case"xx":return Cl(r);case"xxxxx":case"xxx":default:return Cl(r,":")}},O:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+j_(r,":");case"OOOO":default:return"GMT"+Cl(r,":")}},z:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+j_(r,":");case"zzzz":default:return"GMT"+Cl(r,":")}},t:function(t,e,s){const r=Math.trunc(+t/1e3);return Et(r,e.length)},T:function(t,e,s){return Et(+t,e.length)}};function j_(t,e=""){const s=t>0?"-":"+",r=Math.abs(t),l=Math.trunc(r/60),o=r%60;return o===0?s+String(l):s+String(l)+e+Et(o,2)}function N_(t,e){return t%60===0?(t>0?"-":"+")+Et(Math.abs(t)/60,2):Cl(t,e)}function Cl(t,e=""){const s=t>0?"-":"+",r=Math.abs(t),l=Et(Math.trunc(r/60),2),o=Et(r%60,2);return s+l+e+o}const S_=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},uS=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},JP=(t,e)=>{const s=t.match(/(P+)(p+)?/)||[],r=s[1],l=s[2];if(!l)return S_(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",S_(r,e)).replace("{{time}}",uS(l,e))},e7={p:uS,P:JP},t7=/^D+$/,s7=/^Y+$/,r7=["D","DD","YY","YYYY"];function n7(t){return t7.test(t)}function i7(t){return s7.test(t)}function a7(t,e,s){const r=l7(t,e,s);if(console.warn(r),r7.includes(t))throw new RangeError(r)}function l7(t,e,s){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const o7=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,c7=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,u7=/^'([^]*?)'?$/,d7=/''/g,h7=/[a-zA-Z]/;function rs(t,e,s){const r=Xf(),l=r.locale??YP,o=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,u=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,h=Rn(t,s?.in);if(!mP(h))throw new RangeError("Invalid time value");let f=e.match(c7).map(g=>{const b=g[0];if(b==="p"||b==="P"){const v=e7[b];return v(g,l.formatLong)}return g}).join("").match(o7).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const b=g[0];if(b==="'")return{isToken:!1,value:f7(g)};if(__[b])return{isToken:!0,value:g};if(b.match(h7))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:g}});l.localize.preprocessor&&(f=l.localize.preprocessor(h,f));const p={firstWeekContainsDate:o,weekStartsOn:u,locale:l};return f.map(g=>{if(!g.isToken)return g.value;const b=g.value;(i7(b)||n7(b))&&a7(b,e,String(t));const v=__[b[0]];return v(h,b,l.localize,p)}).join("")}function f7(t){const e=t.match(u7);return e?e[1].replace(d7,"'"):t}const{CPDService:jg}=Gl;function m7(){const[t,e]=O.useState([]),[s,r]=O.useState(!0),[l,o]=O.useState(!1),[u,h]=O.useState(""),[f,p]=O.useState("all"),[g,b]=O.useState(new Date().getFullYear()),[v,w]=O.useState(0),[x,j]=O.useState(0),{user:N}=Bt(),T=20;O.useEffect(()=>{N&&(S(),k())},[N,g]);const S=async()=>{if(N)try{r(!0);const C=await jg.getUserActivities(N.id);e(C)}catch(C){console.error("Error loading activities:",C)}finally{r(!1)}},k=async()=>{if(N)try{const[C,z]=await Promise.all([jg.getTotalPoints(N.id),jg.getYearlyPoints(N.id,g)]);w(C),j(z)}catch(C){console.error("Error loading points:",C)}},Z=()=>{S(),k()},R=t.filter(C=>{const z=C.activity_title.toLowerCase().includes(u.toLowerCase())||C.category_name.toLowerCase().includes(u.toLowerCase())||C.provider?.toLowerCase().includes(u.toLowerCase()),L=f==="all"||C.status===f,P=new Date(C.date_completed).getFullYear()===g;return z&&L&&P}),U=Math.min(x/T*100,100),B=Array.from({length:5},(C,z)=>new Date().getFullYear()-z),A=C=>{const z={approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z[C]}`,children:C.charAt(0).toUpperCase()+C.slice(1)})};return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"My CPD Activities"}),i.jsx("p",{className:"text-gray-600",children:"Track and manage your Continuing Professional Development"})]}),i.jsx(ge,{className:"p-6 mb-8 bg-gradient-to-r from-blue-50 to-indigo-50",children:i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[g," Annual Progress"]}),i.jsx("select",{value:g,onChange:C=>b(Number(C.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:B.map(C=>i.jsx("option",{value:C,children:C},C))})]}),i.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[i.jsxs("span",{children:[x.toFixed(1)," points earned"]}),i.jsxs("span",{children:["Goal: ",T," points"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full transition-all duration-500 flex items-center justify-end pr-2",style:{width:`${U}%`},children:U>15&&i.jsxs("span",{className:"text-xs text-white font-semibold",children:[U.toFixed(0),"%"]})})}),x>=T&&i.jsx("div",{className:"mt-3 text-center",children:i.jsxs("span",{className:"text-green-600 font-semibold flex items-center justify-center",children:[i.jsx(rn,{className:"w-5 h-5 mr-2"}),"Congratulations! You've reached your annual CPD goal!"]})})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Points"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.toFixed(1)})]}),i.jsx(rn,{className:"w-8 h-8 text-blue-500"})]})}),i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm text-gray-600",children:[g," Points"]}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.toFixed(1)})]}),i.jsx(er,{className:"w-8 h-8 text-green-500"})]})}),i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Activities"}),i.jsx("p",{className:"text-2xl font-bold text-purple-600",children:t.length})]}),i.jsx(Fa,{className:"w-8 h-8 text-purple-500"})]})}),i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Goal Progress"}),i.jsxs("p",{className:"text-2xl font-bold text-indigo-600",children:[U.toFixed(0),"%"]})]}),i.jsx(rn,{className:"w-8 h-8 text-indigo-500"})]})})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[i.jsxs(ce,{onClick:()=>o(!0),className:"md:w-auto",children:[i.jsx(pc,{className:"w-4 h-4 mr-2"}),"Add New Activity"]}),i.jsxs("div",{className:"flex-1 flex gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Ny,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),i.jsx(Ae,{type:"text",placeholder:"Search activities...",value:u,onChange:C=>h(C.target.value),className:"pl-10"})]}),i.jsxs("select",{value:f,onChange:C=>p(C.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"approved",children:"Approved"}),i.jsx("option",{value:"rejected",children:"Rejected"})]})]})]}),i.jsx(ge,{children:s?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading activities..."})]}):R.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(Fa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:u||f!=="all"?"No activities found":"No CPD activities yet"}),i.jsx("p",{className:"text-gray-600 mb-4",children:u||f!=="all"?"Try adjusting your search or filters":"Start tracking your professional development by adding your first activity"}),!u&&f==="all"&&i.jsxs(ce,{onClick:()=>o(!0),children:[i.jsx(pc,{className:"w-4 h-4 mr-2"}),"Add Your First Activity"]})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activity"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Evidence"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(C=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:rs(new Date(C.date_completed),"dd MMM yyyy")}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.activity_title}),C.provider&&i.jsx("div",{className:"text-sm text-gray-500",children:C.provider})]})}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:C.category_name}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[C.hours,"h ",C.minutes,"m"]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:"text-sm font-semibold text-blue-600",children:C.points.toFixed(1)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A(C.status)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:C.evidence_url?i.jsx("a",{href:C.evidence_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"View"}):i.jsx("span",{className:"text-gray-400",children:"-"})})]},C.id))})]})})}),i.jsx(lP,{isOpen:l,onClose:()=>o(!1),onSuccess:Z})]})}const{CPDService:Ng}=Gl;function p7(){const[t,e]=O.useState([]),[s,r]=O.useState(!0),[l,o]=O.useState(null),[u,h]=O.useState(""),[f,p]=O.useState(!1),{user:g}=Bt();O.useEffect(()=>{b()},[]);const b=async()=>{try{r(!0);const N=await Ng.getAllPendingActivities();e(N)}catch(N){console.error("Error loading pending activities:",N)}finally{r(!1)}},v=async N=>{if(g)try{await Ng.approveActivity(N,g.id),await b()}catch(T){console.error("Error approving activity:",T)}},w=async()=>{if(!(!g||!l))try{await Ng.rejectActivity(l.id,g.id,u),await b(),p(!1),o(null),h("")}catch(N){console.error("Error rejecting activity:",N)}},x=N=>{o(N),p(!0)},j=()=>{p(!1),o(null),h("")};return s?i.jsx("div",{className:"flex justify-center items-center min-h-96",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Review CPD Submissions"}),i.jsx("p",{className:"text-gray-600",children:"Review and approve or reject pending CPD activity submissions from members."})]}),t.length===0?i.jsxs(ge,{className:"p-8 text-center",children:[i.jsx(Ba,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No pending submissions"}),i.jsx("p",{className:"text-gray-600",children:"All CPD submissions have been reviewed. Check back later for new submissions."})]}):i.jsx("div",{className:"space-y-6",children:t.map(N=>i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(ky,{className:"h-5 w-5 text-blue-600"}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[N.members?.first_name," ",N.members?.last_name]}),i.jsx("p",{className:"text-sm text-gray-600",children:N.members?.email})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ba,{className:"h-4 w-4 text-orange-500"}),i.jsx("span",{className:"text-sm text-orange-600 font-medium",children:"Pending Review"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Activity Title"}),i.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:N.activity_title})]}),i.jsxs("div",{children:[i.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Category"}),i.jsx("p",{className:"text-sm text-gray-900",children:N.category_name})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{children:[i.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Duration"}),i.jsxs("p",{className:"text-sm text-gray-900",children:[N.hours,"h ",N.minutes,"m"]})]}),i.jsxs("div",{children:[i.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Points"}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(rn,{className:"h-4 w-4 text-yellow-500"}),i.jsx("span",{className:"text-sm font-semibold text-gray-900",children:N.points})]})]})]}),i.jsxs("div",{children:[i.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Date Completed"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(er,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"text-sm text-gray-900",children:rs(new Date(N.date_completed),"MMM dd, yyyy")})]})]}),i.jsxs("div",{children:[i.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Provider"}),i.jsx("p",{className:"text-sm text-gray-900",children:N.provider||"N/A"})]}),i.jsxs("div",{children:[i.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Submitted"}),i.jsx("p",{className:"text-sm text-gray-900",children:rs(new Date(N.created_at),"MMM dd, yyyy")})]})]}),N.description&&i.jsxs("div",{className:"mb-4",children:[i.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Description"}),i.jsx("p",{className:"text-sm text-gray-900 mt-1",children:N.description})]}),N.evidence_url&&i.jsxs("div",{className:"mb-6",children:[i.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Evidence"}),i.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[i.jsx(Fa,{className:"h-4 w-4 text-blue-600"}),i.jsx("a",{href:N.evidence_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm underline",children:N.evidence_filename||"View Evidence"})]})]}),i.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[i.jsxs(ce,{onClick:()=>v(N.id),className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 text-white",children:[i.jsx(Ss,{className:"h-4 w-4"}),i.jsx("span",{children:"Approve"})]}),i.jsxs(ce,{onClick:()=>x(N),variant:"outline",className:"flex items-center space-x-2 text-red-600 border-red-600 hover:bg-red-50",children:[i.jsx(p0,{className:"h-4 w-4"}),i.jsx("span",{children:"Reject"})]})]})]},N.id))}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reject CPD Submission"}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please provide a reason for rejecting this submission. This will be visible to the member."}),i.jsxs("div",{className:"mb-6",children:[i.jsx(xe,{htmlFor:"rejectReason",className:"text-sm font-medium text-gray-700",children:"Rejection Reason"}),i.jsx("textarea",{id:"rejectReason",value:u,onChange:N=>h(N.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",rows:4,placeholder:"Explain why this submission is being rejected...",required:!0})]}),i.jsxs("div",{className:"flex space-x-3 justify-end",children:[i.jsx(ce,{onClick:j,variant:"outline",className:"text-gray-600",children:"Cancel"}),i.jsx(ce,{onClick:w,className:"bg-red-600 hover:bg-red-700 text-white",disabled:!u.trim(),children:"Reject Submission"})]})]})})]})}const{CPDService:Zh}=Gl;function g7(){const[t,e]=O.useState(null),[s,r]=O.useState([]),[l,o]=O.useState(!0),[u,h]=O.useState(!1),[f,p]=O.useState({}),{user:g}=Bt();O.useEffect(()=>{b()},[]);const b=async()=>{try{o(!0);const[N,T]=await Promise.all([Zh.getCPDSettings(),Zh.getCategorySettings()]);e(N),r(T)}catch(N){console.error("Error loading settings:",N)}finally{o(!1)}},v=async()=>{if(!(!t||!g))try{h(!0);const N=await Zh.updateCPDSettings({auto_approval_enabled:!t.auto_approval_enabled});e(N)}catch(N){console.error("Error updating auto approval:",N)}finally{h(!1)}},w=(N,T)=>{p(S=>({...S,[N]:T}))},x=async N=>{if(!g)return;const T=f[N];if(!(T===void 0||T<0))try{h(!0),await Zh.updateCategorySettings(N,{points_per_hour:T}),r(S=>S.map(k=>k.category_id===N?{...k,points_per_hour:T}:k)),p(S=>{const k={...S};return delete k[N],k})}catch(S){console.error("Error saving category points:",S)}finally{h(!1)}},j=N=>{p(T=>{const S={...T};return delete S[N],S})};return l?i.jsx("div",{className:"flex justify-center items-center min-h-96",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center gap-3",children:[i.jsx(ql,{className:"h-8 w-8 text-blue-600"}),"CPD System Configuration"]}),i.jsx("p",{className:"text-gray-600",children:"Configure CPD activity settings, points per hour by category, and approval workflow."})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(Ll,{className:"h-6 w-6 text-orange-600"}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Global Settings"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Automatic Approval"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"When enabled, all CPD activities submitted by members will be automatically approved without requiring admin review."})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("span",{className:`text-sm font-medium ${t?.auto_approval_enabled?"text-green-600":"text-red-600"}`,children:t?.auto_approval_enabled?"Enabled":"Disabled"}),i.jsx(ce,{onClick:v,disabled:u,className:`${t?.auto_approval_enabled?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"} text-white`,children:t?.auto_approval_enabled?i.jsxs(i.Fragment,{children:[i.jsx(p0,{className:"h-4 w-4 mr-2"}),"Disable"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Enable"]})})]})]}),t?.auto_approval_enabled&&i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(Ss,{className:"h-5 w-5 text-green-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-green-800",children:"Auto-Approval Active"}),i.jsx("p",{className:"text-sm text-green-700 mt-1",children:"All new CPD submissions will be automatically approved and members will receive points immediately. You can still access the Review page to see all activities, but no manual approval is required."})]})]})})]})]}),i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(rn,{className:"h-6 w-6 text-yellow-600"}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Points per Hour by Category"})]}),i.jsx("div",{className:"space-y-3",children:s.map(N=>i.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:N.category_name}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Category ID: ",N.category_id]})]}),i.jsx("div",{className:"flex items-center space-x-3",children:f[N.category_id]!==void 0?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ae,{type:"number",step:"0.1",min:"0",value:f[N.category_id],onChange:T=>w(N.category_id,parseFloat(T.target.value)||0),className:"w-20 text-center"}),i.jsx("span",{className:"text-sm text-gray-600",children:"pts/hr"})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(ce,{size:"sm",onClick:()=>x(N.category_id),disabled:u,className:"bg-green-600 hover:bg-green-700 text-white",children:i.jsx(jd,{className:"h-3 w-3"})}),i.jsx(ce,{size:"sm",variant:"outline",onClick:()=>j(N.category_id),disabled:u,children:"Cancel"})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"text-lg font-bold text-blue-600",children:N.points_per_hour}),i.jsx("br",{}),i.jsx("span",{className:"text-xs text-gray-500",children:"points/hour"})]}),i.jsx(ce,{size:"sm",variant:"outline",onClick:()=>p(T=>({...T,[N.category_id]:N.points_per_hour})),className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:"Edit"})]})})]},N.category_id))}),i.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(Ll,{className:"h-5 w-5 text-blue-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Points Calculation"}),i.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Points are calculated automatically when members submit activities. The formula is: ",i.jsx("strong",{children:"(Hours + Minutes/60)  Points per Hour"}),". Changes to points per hour only apply to new submissions."]})]})]})})]}),i.jsxs(ge,{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Current Configuration Summary"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t?.auto_approval_enabled?i.jsx(Ss,{className:"h-5 w-5 text-green-600"}):i.jsx(p0,{className:"h-5 w-5 text-red-600"}),i.jsx("span",{className:"font-medium",children:"Auto-Approval"})]}),i.jsx("p",{className:"text-sm text-gray-600",children:t?.auto_approval_enabled?"Activities are automatically approved":"Activities require manual review"})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx(rn,{className:"h-5 w-5 text-yellow-600"}),i.jsx("span",{className:"font-medium",children:"Categories"})]}),i.jsxs("p",{className:"text-sm text-gray-600",children:[s.length," active categories configured"]})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx(ql,{className:"h-5 w-5 text-blue-600"}),i.jsx("span",{className:"font-medium",children:"Points Range"})]}),i.jsxs("p",{className:"text-sm text-gray-600",children:[Math.min(...s.map(N=>N.points_per_hour))," - ",Math.max(...s.map(N=>N.points_per_hour))," pts/hour"]})]})]})]})]})]})}function y7(){const t=or(),{user:e}=Bt(),{hasPermission:s}=Gf(),r=s("ACCESS_ADMIN_DASHBOARD"),[l,o]=O.useState([]),[u,h]=O.useState([]),[f,p]=O.useState(!0),[g,b]=O.useState(""),[v,w]=O.useState("all"),[x,j]=O.useState("all");O.useEffect(()=>{N()},[]);const N=async()=>{try{p(!0);const[U,B]=await Promise.all([Yt.getPublicEvents(),Yt.getCategories()]);o(U),h(B)}catch(U){console.error("Error loading events:",U)}finally{p(!1)}},T=l.filter(U=>!(g&&!U.title.toLowerCase().includes(g.toLowerCase())&&!U.description?.toLowerCase().includes(g.toLowerCase())||v!=="all"&&U.category_id!==v||x!=="all"&&U.location_type!==x)),S=T.filter(U=>new Date(U.start_date)>=new Date),k=T.filter(U=>new Date(U.start_date)<new Date),Z=U=>{const A=!!e?U.member_price_cents:U.non_member_price_cents;return A===0?"Free":Yt.formatPrice(A)},R=U=>{const B=new Date,A=new Date(U.start_date),C=U.registration_end_date?new Date(U.registration_end_date):A;if(B>C)return{text:"Registration Closed",color:"text-gray-500"};if(U.capacity>0){const z=U.capacity;if(z===0)return{text:"Sold Out",color:"text-red-500"};if(z<10)return{text:`${z} spots left`,color:"text-orange-500"}}return{text:"Open",color:"text-green-500"}};return f?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Events"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Discover and register for upcoming events"})]}),r&&i.jsx("div",{className:"flex gap-2",children:i.jsxs(ce,{onClick:()=>t("/admin/events"),children:[i.jsx(ql,{className:"h-4 w-4 mr-2"}),"Manage Events"]})})]}),i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Ae,{placeholder:"Search events...",value:g,onChange:U=>b(U.target.value),className:"md:col-span-2"}),i.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:v,onChange:U=>w(U.target.value),children:[i.jsx("option",{value:"all",children:"All Categories"}),u.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))]}),i.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:x,onChange:U=>j(U.target.value),children:[i.jsx("option",{value:"all",children:"All Types"}),i.jsx("option",{value:"physical",children:"In-Person"}),i.jsx("option",{value:"virtual",children:"Virtual"}),i.jsx("option",{value:"hybrid",children:"Hybrid"})]})]})}),S.length>0&&i.jsxs("div",{className:"mt-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Upcoming Events"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(U=>{const B=R(U);return i.jsxs(ge,{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>t(`/events/${U.slug}`),children:[U.image_url?i.jsx("img",{src:U.image_url,alt:U.title,className:"w-full h-48 object-cover",onError:A=>{const C=A.target;C.onerror=null,C.src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800&h=400&fit=crop"}}):i.jsx("img",{src:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800&h=400&fit=crop",alt:U.title,className:"w-full h-48 object-cover"}),i.jsxs("div",{className:"p-6",children:[U.category&&i.jsx("span",{className:"inline-block px-2 py-1 text-xs font-semibold rounded-full mb-2",style:{backgroundColor:`${U.category.color}20`,color:U.category.color},children:U.category.name}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:U.title}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[i.jsx(er,{className:"h-4 w-4 mr-2"}),rs(new Date(U.start_date),"MMM d, yyyy"),i.jsx(Ba,{className:"h-4 w-4 ml-3 mr-2"}),rs(new Date(U.start_date),"h:mm a")]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-3",children:[i.jsx(Tc,{className:"h-4 w-4 mr-2"}),U.location_type==="virtual"?"Online Event":U.venue_name||U.city||"Location TBA"]}),i.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(tS,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"font-semibold",children:Z(U)})]}),U.cpd_points>0&&i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(rn,{className:"h-4 w-4 text-gray-400"}),i.jsxs("span",{children:[U.cpd_points," CPD"]})]})]}),i.jsx("span",{className:`text-xs font-semibold ${B.color}`,children:B.text})]})]})]},U.id)})})]}),k.length>0&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Past Events"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 opacity-75",children:k.map(U=>i.jsx(ge,{className:"overflow-hidden",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:U.title}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[i.jsx(er,{className:"h-4 w-4 mr-2"}),rs(new Date(U.start_date),"MMM d, yyyy")]}),i.jsx("span",{className:"text-xs text-gray-500",children:"Event Completed"})]})},U.id))})]}),T.length===0&&i.jsxs(ge,{className:"p-12 text-center",children:[i.jsx(er,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No events found"}),i.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters or check back later for new events."})]})]})}class Sd{constructor(e=0,s="Network Error"){this.status=e,this.text=s}}const b7=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},Hs={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:b7()},Oy=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},x7=(t,e="https://api.emailjs.com")=>{if(!t)return;const s=Oy(t);Hs.publicKey=s.publicKey,Hs.blockHeadless=s.blockHeadless,Hs.storageProvider=s.storageProvider,Hs.blockList=s.blockList,Hs.limitRate=s.limitRate,Hs.origin=s.origin||e},dS=async(t,e,s={})=>{const r=await fetch(Hs.origin+t,{method:"POST",headers:s,body:e}),l=await r.text(),o=new Sd(r.status,l);if(r.ok)return o;throw o},hS=(t,e,s)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s||typeof s!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},v7=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},fS=t=>t.webdriver||!t.languages||t.languages.length===0,mS=()=>new Sd(451,"Unavailable For Headless Browser"),w7=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},_7=t=>!t.list?.length||!t.watchVariable,j7=(t,e)=>t instanceof FormData?t.get(e):t[e],pS=(t,e)=>{if(_7(t))return!1;w7(t.list,t.watchVariable);const s=j7(e,t.watchVariable);return typeof s!="string"?!1:t.list.includes(s)},gS=()=>new Sd(403,"Forbidden"),N7=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},S7=async(t,e,s)=>{const r=Number(await s.get(t)||0);return e-Date.now()+r},yS=async(t,e,s)=>{if(!e.throttle||!s)return!1;N7(e.throttle,e.id);const r=e.id||t;return await S7(r,e.throttle,s)>0?!0:(await s.set(r,Date.now().toString()),!1)},bS=()=>new Sd(429,"Too Many Requests"),E7=async(t,e,s,r)=>{const l=Oy(r),o=l.publicKey||Hs.publicKey,u=l.blockHeadless||Hs.blockHeadless,h=l.storageProvider||Hs.storageProvider,f={...Hs.blockList,...l.blockList},p={...Hs.limitRate,...l.limitRate};return u&&fS(navigator)?Promise.reject(mS()):(hS(o,t,e),v7(s),s&&pS(f,s)?Promise.reject(gS()):await yS(location.pathname,p,h)?Promise.reject(bS()):dS("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:o,service_id:t,template_id:e,template_params:s}),{"Content-type":"application/json"}))},A7=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},C7=t=>typeof t=="string"?document.querySelector(t):t,k7=async(t,e,s,r)=>{const l=Oy(r),o=l.publicKey||Hs.publicKey,u=l.blockHeadless||Hs.blockHeadless,h=Hs.storageProvider||l.storageProvider,f={...Hs.blockList,...l.blockList},p={...Hs.limitRate,...l.limitRate};if(u&&fS(navigator))return Promise.reject(mS());const g=C7(s);hS(o,t,e),A7(g);const b=new FormData(g);return pS(f,b)?Promise.reject(gS()):await yS(location.pathname,p,h)?Promise.reject(bS()):(b.append("lib_version","4.4.1"),b.append("service_id",t),b.append("template_id",e),b.append("user_id",o),dS("/api/v1.0/email/send-form",b))},Sg={init:x7,send:E7,sendForm:k7,EmailJSResponseStatus:Sd},Mi={SERVICE_ID:"service_eau_brevo",TEMPLATE_ID_TEST:"template_test",TEMPLATE_ID_REGISTRATION:"template_registration",TEMPLATE_ID_REMINDER:"template_reminder",PUBLIC_KEY:"",MONTHLY_LIMIT:200,DAILY_LIMIT:10};new Date().toLocaleString();class Ii{static async checkDatabaseAvailable(){try{const{error:e}=await J.from("smtp_settings").select("id").limit(1);if(!e)return!0;const s=e.message?.toLowerCase()||"";return!(s.includes("relation")||s.includes("does not exist")||s.includes("not found"))}catch{return!1}}static async getSMTPSettings(){try{if(await this.checkDatabaseAvailable()){const{data:s,error:r}=await J.from("smtp_settings").select("*").eq("enabled",!0).single();if(!r&&s)return{data:s,isLocal:!1};const l=localStorage.getItem("smtp_settings");return l?{data:JSON.parse(l),isLocal:!1}:{data:null,isLocal:!1}}else{const s=localStorage.getItem("smtp_settings");return s?{data:JSON.parse(s),isLocal:!0}:{data:null,isLocal:!0}}}catch(e){console.error("Error fetching SMTP settings:",e);const s=localStorage.getItem("smtp_settings");return s?{data:JSON.parse(s),isLocal:!0}:{data:null,isLocal:!0}}}static async saveSMTPSettings(e){try{try{if(await J.from("smtp_settings").update({enabled:!1}).neq("id",e.id||"none"),e.id){const{error:s}=await J.from("smtp_settings").update(e).eq("id",e.id);if(s)throw s}else{const{data:s,error:r}=await J.from("smtp_settings").insert(e).select().single();if(r)throw r;s&&(e.id=s.id)}}catch{console.log("Database not available, saving to localStorage"),e.id=e.id||`local-${Date.now()}`,localStorage.setItem("smtp_settings",JSON.stringify(e))}return localStorage.setItem("smtp_settings",JSON.stringify(e)),!0}catch(s){console.error("Error saving SMTP settings:",s);try{return e.id=e.id||`local-${Date.now()}`,localStorage.setItem("smtp_settings",JSON.stringify(e)),!0}catch(r){return console.error("Failed to save to localStorage:",r),!1}}}static async testSMTPConnection(e){try{return!e.smtp_host||!e.smtp_username?{success:!1,message:"Missing required SMTP settings"}:(await new Promise(r=>setTimeout(r,1e3)),["smtp.gmail.com","smtp.sendgrid.net","smtp.mailgun.org","smtp.office365.com"].includes(e.smtp_host.toLowerCase())?{success:!0,message:`Successfully connected to ${e.smtp_host}`}:{success:!0,message:"SMTP connection test completed (simulated)"})}catch(s){return{success:!1,message:s.message||"Failed to test SMTP connection"}}}static initEmailJS(e){const s=e||localStorage.getItem("emailjs_public_key")||Mi.PUBLIC_KEY;return s?(Sg.init(s),!0):!1}static async sendTestEmail(e){try{const r=(await this.getSMTPSettings()).data;if(r&&r.enabled){console.log("SMTP configured, attempting to send test email...");try{const h=await fetch("http://localhost:3001/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:e,subject:"Test Email from English Australia",html:`
                <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
                  <h2 style="color: #2c3e50;">Test Email Successful!</h2>
                  <p>This is a test email from the English Australia Members Portal.</p>
                  <p>If you receive this email, your SMTP configuration is working correctly.</p>
                  <hr style="border: none; border-top: 1px solid #ddd; margin: 20px 0;">
                  <p style="color: #666; font-size: 12px;">
                    Sent via SMTP<br>
                    Time: ${new Date().toLocaleString()}
                  </p>
                </div>
              `,text:"This is a test email from English Australia Members Portal.",smtp_config:{smtp_host:r.smtp_host,smtp_port:r.smtp_port,smtp_secure:r.smtp_secure,smtp_username:r.smtp_username,smtp_password:r.smtp_password,from_email:r.from_email,from_name:r.from_name}})}),f=await h.json();if(h.ok&&f.success)return{success:!0,message:f.message||`Test email sent to ${e} via SMTP`};throw new Error(f.error||"Failed to send email")}catch(h){console.error("Email server error:",h);try{const{data:{session:f}}=await J.auth.getSession();if(f){const p=await J.functions.invoke("send-email-smtp",{body:{to:e,subject:"Test Email from English Australia",html:`
                    <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
                      <h2 style="color: #2c3e50;">Test Email Successful!</h2>
                      <p>This is a test email from the English Australia Members Portal.</p>
                      <p>If you receive this email, your SMTP configuration is working correctly.</p>
                      <hr style="border: none; border-top: 1px solid #ddd; margin: 20px 0;">
                      <p style="color: #666; font-size: 12px;">
                        Sent via SMTP<br>
                        Time: ${new Date().toLocaleString()}
                      </p>
                    </div>
                  `,text:"This is a test email from English Australia Members Portal."}});if(!p.error&&p.data?.success)return{success:!0,message:p.data.message||`Test email sent to ${e} via SMTP`}}}catch{console.log("Edge function also not available")}return{success:!1,message:"Email server not running. Please start the email server: cd email-server && npm start"}}}const l=localStorage.getItem("emailjs_service_id")||Mi.SERVICE_ID,o=localStorage.getItem("emailjs_template_test")||Mi.TEMPLATE_ID_TEST,u=localStorage.getItem("emailjs_public_key")||Mi.PUBLIC_KEY;if(l&&o&&u){console.log("SMTP not configured, trying EmailJS..."),this.initEmailJS(u);try{const h={to_email:e,to_name:e.split("@")[0],from_name:"English Australia",from_email:"noreply@englishaustralia.com.au",subject:"Test Email from English Australia",message:"This is a test email from the English Australia Members Portal.",html_content:`
              <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
                <h2 style="color: #2c3e50;">Test Email Successful!</h2>
                <p>This is a test email from the English Australia Members Portal.</p>
                <p>If you receive this email, your EmailJS configuration is working correctly.</p>
                <hr style="border: none; border-top: 1px solid #ddd; margin: 20px 0;">
                <p style="color: #666; font-size: 12px;">
                  Sent via EmailJS<br>
                  Time: ${new Date().toLocaleString()}
                </p>
              </div>
            `,timestamp:new Date().toLocaleString()};if((await Sg.send(l,o,h)).status===200)return{success:!0,message:`Test email sent successfully to ${e} via EmailJS`};throw new Error("EmailJS returned non-200 status")}catch(h){console.error("EmailJS error:",h)}}return{success:!1,message:"Email service not configured. Please configure either SMTP settings or EmailJS."}}catch(s){return{success:!1,message:s.message||"Failed to send test email"}}}static async sendTemplatedEmail(e,s,r){try{const l=localStorage.getItem("emailjs_service_id")||Mi.SERVICE_ID,o=localStorage.getItem("emailjs_public_key")||Mi.PUBLIC_KEY;let u="";switch(e){case"event-registration":u=localStorage.getItem("emailjs_template_registration")||Mi.TEMPLATE_ID_REGISTRATION;break;case"event-reminder":u=localStorage.getItem("emailjs_template_reminder")||Mi.TEMPLATE_ID_REMINDER;break;default:u=localStorage.getItem("emailjs_template_test")||Mi.TEMPLATE_ID_TEST}if(l&&u&&o){this.initEmailJS(o);try{const h={to_email:s,to_name:r.user_name||s.split("@")[0],...r,timestamp:new Date().toLocaleString()};if((await Sg.send(l,u,h)).status===200)return console.log(`Email sent successfully via EmailJS: ${e} to ${s}`),!0}catch(h){console.error("EmailJS error:",h)}}return console.error(`Template ${e} not found or EmailJS not configured`),!1}catch(l){return console.error("Error sending templated email:",l),!1}}static async sendEventRegistrationConfirmation(e){try{const r=(await this.getSMTPSettings()).data;if(r&&r.enabled){console.log("Sending registration confirmation via SMTP...");try{const l=await fetch("http://localhost:3001/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:e.to,subject:`Registration Confirmed: ${e.eventTitle}`,html:`
                <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
                  <div style="background-color: #2563eb; color: white; padding: 20px; text-align: center;">
                    <h1 style="margin: 0;">Registration Confirmed!</h1>
                  </div>
                  <div style="padding: 30px; background-color: #f9fafb;">
                    <p style="font-size: 16px; color: #374151;">Dear ${e.userName},</p>
                    
                    <p style="font-size: 16px; color: #374151;">
                      Your registration for <strong>${e.eventTitle}</strong> has been successfully confirmed!
                    </p>
                    
                    <div style="background-color: white; border-radius: 8px; padding: 20px; margin: 20px 0; border: 1px solid #e5e7eb;">
                      <h2 style="color: #111827; font-size: 18px; margin-top: 0;">Event Details</h2>
                      <table style="width: 100%; border-collapse: collapse;">
                        <tr>
                          <td style="padding: 8px 0; color: #6b7280;"> Date:</td>
                          <td style="padding: 8px 0; color: #111827; font-weight: 600;">${e.eventDate}</td>
                        </tr>
                        <tr>
                          <td style="padding: 8px 0; color: #6b7280;"> Time:</td>
                          <td style="padding: 8px 0; color: #111827; font-weight: 600;">${e.eventTime}</td>
                        </tr>
                        <tr>
                          <td style="padding: 8px 0; color: #6b7280;"> Location:</td>
                          <td style="padding: 8px 0; color: #111827; font-weight: 600;">${e.eventLocation}</td>
                        </tr>
                        <tr>
                          <td style="padding: 8px 0; color: #6b7280;"> Registration ID:</td>
                          <td style="padding: 8px 0; color: #111827; font-family: monospace;">${e.registrationId.substring(0,8)}</td>
                        </tr>
                      </table>
                    </div>
                    
                    <div style="text-align: center; margin: 30px 0;">
                      <a href="${e.eventLink}" 
                         style="display: inline-block; background-color: #2563eb; color: white; text-decoration: none; padding: 12px 30px; border-radius: 6px; font-weight: 600;">
                        View Event Details
                      </a>
                    </div>
                    
                    <div style="background-color: #fef3c7; border-radius: 8px; padding: 15px; margin: 20px 0; border: 1px solid #fcd34d;">
                      <p style="margin: 0; color: #92400e;">
                        <strong> Important:</strong> For online events, the "Join Event" button will become available 10 minutes before the scheduled start time. 
                        Please access the event through our platform to ensure your attendance is recorded for CPD points.
                      </p>
                    </div>
                    
                    <p style="font-size: 14px; color: #6b7280; margin-top: 30px;">
                      You will receive reminder emails as the event approaches:
                    </p>
                    <ul style="font-size: 14px; color: #6b7280;">
                      <li>7 days before the event</li>
                      <li>3 days before the event</li>
                      <li>1 day before the event</li>
                      <li>30 minutes before the event</li>
                      <li>When the event goes live</li>
                    </ul>
                    
                    <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;">
                    
                    <p style="font-size: 12px; color: #9ca3af; text-align: center;">
                      If you need to cancel your registration, please contact us at support@englishaustralia.com.au<br>
                       ${new Date().getFullYear()} English Australia. All rights reserved.
                    </p>
                  </div>
                </div>
              `,text:`Registration Confirmed: ${e.eventTitle}

Dear ${e.userName},

Your registration has been confirmed!

Event: ${e.eventTitle}
Date: ${e.eventDate}
Time: ${e.eventTime}
Location: ${e.eventLocation}

View event details: ${e.eventLink}`,smtp_config:{smtp_host:r.smtp_host,smtp_port:r.smtp_port,smtp_secure:r.smtp_secure,smtp_username:r.smtp_username,smtp_password:r.smtp_password,from_email:r.from_email,from_name:r.from_name||"English Australia Events"}})}),o=await l.json();if(l.ok&&o.success)return console.log("Registration confirmation email sent successfully"),!0;throw new Error(o.error||"Failed to send email")}catch(l){return console.error("Email server error:",l),!1}}return await this.sendTemplatedEmail("event-registration",e.to,{user_name:e.userName,event_title:e.eventTitle,event_date:e.eventDate,event_time:e.eventTime,event_location:e.eventLocation,event_link:e.eventLink})}catch(s){return console.error("Error sending registration confirmation:",s),!1}}static async sendCPDPointsNotification(e){try{const r=(await this.getSMTPSettings()).data;if(r&&r.enabled){console.log("Sending CPD notification via SMTP...");try{const l=await fetch("http://localhost:3001/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:e.to,subject:`CPD Points Awarded: ${e.cpdPoints} points for ${e.eventTitle}`,html:`
                <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
                  <div style="background-color: #10b981; color: white; padding: 20px; text-align: center;">
                    <h1 style="margin: 0;"> CPD Points Awarded!</h1>
                  </div>
                  <div style="padding: 30px; background-color: #f9fafb;">
                    <p style="font-size: 16px; color: #374151;">Dear ${e.userName},</p>
                    
                    <p style="font-size: 16px; color: #374151;">
                      Congratulations! You have successfully earned CPD points for attending:
                    </p>
                    
                    <div style="background-color: white; border-radius: 8px; padding: 20px; margin: 20px 0; border: 2px solid #10b981;">
                      <h2 style="color: #111827; font-size: 20px; margin-top: 0;">${e.eventTitle}</h2>
                      <div style="display: flex; justify-content: space-around; margin: 20px 0;">
                        <div style="text-align: center;">
                          <p style="font-size: 36px; color: #10b981; font-weight: bold; margin: 0;">${e.cpdPoints}</p>
                          <p style="color: #6b7280; margin: 5px 0;">CPD Points</p>
                        </div>
                        <div style="text-align: center;">
                          <p style="font-size: 18px; color: #374151; font-weight: 600; margin: 10px 0;">${e.cpdCategory}</p>
                          <p style="color: #6b7280; margin: 5px 0;">Category</p>
                        </div>
                      </div>
                    </div>
                    
                    ${e.certificateLink?`
                    <div style="text-align: center; margin: 30px 0;">
                      <a href="${e.certificateLink}" 
                         style="display: inline-block; background-color: #2563eb; color: white; text-decoration: none; padding: 12px 30px; border-radius: 6px; font-weight: 600;">
                        Download Certificate
                      </a>
                    </div>
                    `:""}
                    
                    <p style="font-size: 14px; color: #6b7280; margin-top: 30px;">
                      These points have been automatically added to your CPD record. You can view your complete CPD history and download certificates anytime from your dashboard.
                    </p>
                    
                    <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;">
                    
                    <p style="font-size: 12px; color: #9ca3af; text-align: center;">
                       ${new Date().getFullYear()} English Australia. All rights reserved.
                    </p>
                  </div>
                </div>
              `,text:`CPD Points Awarded!

Dear ${e.userName},

You have earned ${e.cpdPoints} CPD points for attending ${e.eventTitle}.

Category: ${e.cpdCategory}

These points have been added to your CPD record.`,smtp_config:{smtp_host:r.smtp_host,smtp_port:r.smtp_port,smtp_secure:r.smtp_secure,smtp_username:r.smtp_username,smtp_password:r.smtp_password,from_email:r.from_email,from_name:r.from_name||"English Australia CPD"}})}),o=await l.json();if(l.ok&&o.success)return console.log("CPD notification email sent successfully"),!0}catch(l){console.error("Failed to send CPD notification:",l)}}return!1}catch(s){return console.error("Error sending CPD notification:",s),!1}}}const T7=Gl;class Jn{static async registerForEvent(e,s,r){try{const{data:l,error:o}=await J.from("event_registrations").select("*").eq("event_id",e).eq("user_id",s).single();if(l)throw new Error("You are already registered for this event");const u=await Yt.getEventById(e);if(!u)throw new Error("Event not found");if((await this.getEventRegistrations(e)).length>=u.capacity)throw new Error("Event is full");let p=!1?u.member_price_cents:u.non_member_price_cents;u.early_bird_price_cents&&u.early_bird_end_date&&new Date<new Date(u.early_bird_end_date)&&(p=u.early_bird_price_cents);const{data:g,error:b}=await J.from("event_registrations").insert({event_id:e,user_id:s,status:"registered",registration_type:"participant",payment_status:p===0?"waived":"pending",payment_amount:p,...r}).select().single();if(b)throw b;try{const{data:{user:v}}=await J.auth.getUser(),w=v?.email||"",x=v?.user_metadata?.full_name||v?.email?.split("@")[0]||"Member",j=rs(new Date(u.start_date),"EEEE, MMMM d, yyyy"),N=rs(new Date(u.start_date),"h:mm a"),T=u.location_type==="virtual"?"Online Event":u.venue_name||"TBA";await Ii.sendEventRegistrationConfirmation({to:w,userName:x,eventTitle:u.title,eventDate:j,eventTime:N,eventLocation:T,eventLink:`${window.location.origin}/events/${u.slug}`,registrationId:g.id}),console.log("Registration confirmation email sent to:",w)}catch(v){console.error("Failed to send confirmation email:",v)}return console.log(" ABOUT TO CALL scheduleConfigurableReminders"),await this.scheduleConfigurableReminders(g.id,e,s,u),console.log(" FINISHED CALLING scheduleConfigurableReminders"),g}catch(l){throw console.error("Error registering for event:",l),new Error(l.message||"Failed to register for event")}}static async cancelRegistration(e){try{const{error:s}=await J.from("event_registrations").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",e);if(s)throw s}catch(s){throw console.error("Error cancelling registration:",s),new Error(s.message||"Failed to cancel registration")}}static async checkInUser(e,s="manual"){try{const r={status:"attended",attended:!0,attendance_date:new Date().toISOString()};s&&(r.check_in_date=new Date().toISOString(),r.check_in_method=s,r.checked_in=!0),"updated_at"in r&&(r.updated_at=new Date().toISOString());const{error:l}=await J.from("event_registrations").update(r).eq("id",e);if(l){console.error("Check-in error:",l);const{error:o}=await J.from("event_registrations").update({status:"attended",attended:!0,attendance_date:new Date().toISOString()}).eq("id",e);if(o)throw o}try{const{data:o}=await J.from("event_registrations").select("*").eq("id",e).single();if(o&&!o.cpd_activity_created){const u=await Yt.getEventById(o.event_id);if(u&&u.cpd_points>0){const{data:{user:h}}=await J.auth.getUser(),f=h?.email||"",p=h?.user_metadata?.full_name||h?.email?.split("@")[0]||"Member",g=new Date(u.start_date),v=new Date(u.end_date).getTime()-g.getTime(),w=Math.floor(v/(1e3*60*60)),x=Math.floor(v%(1e3*60*60)/(1e3*60)),j=await T7.createActivity({category_id:14,activity_title:`Event: ${u.title}`,description:`Attended ${u.title} on ${rs(g,"MMMM d, yyyy")}`,provider:"English Australia",date_completed:rs(new Date,"yyyy-MM-dd"),hours:w,minutes:x},o.user_id,f);await J.from("event_registrations").update({cpd_activity_created:!0,cpd_activity_id:j.id}).eq("id",e),await Ii.sendCPDPointsNotification({to:f,userName:p,eventTitle:u.title,cpdPoints:u.cpd_points,cpdCategory:u.cpd_category||"Event Attendance",certificateLink:`/certificates/${e}`}),console.log(`CPD activity created for registration ${e}: ${u.cpd_points} points`)}}}catch(o){console.error("Error creating CPD activity:",o)}}catch(r){throw console.error("Error checking in user:",r),new Error(r.message||"Failed to check in")}}static async autoCheckIn(e,s){try{const{data:r,error:l}=await J.from("event_registrations").select("*").eq("event_id",e).eq("user_id",s).single();if(l||!r){console.log("No registration found for auto check-in");return}if(r.checked_in||r.attended){console.log("User already checked in");return}const o=await Yt.getEventById(e);if(!o)return;const u=new Date,h=new Date(o.start_date),f=new Date(o.end_date),p=new Date(h.getTime()-1800*1e3);u>=p&&u<=f&&(await this.checkInUser(r.id,"auto"),console.log("Auto check-in successful"))}catch(r){console.error("Error in auto check-in:",r)}}static async logAttendance(e,s,r,l,o){try{const{error:u}=await J.from("event_attendance_log").insert({registration_id:e,event_id:s,user_id:r,access_type:l,...o});if(u)throw u}catch(u){console.error("Error logging attendance:",u)}}static async generateCertificate(e){try{const{data:s,error:r}=await J.from("event_registrations").select("*").eq("id",e).single();if(r||!s)throw new Error("Registration not found");if(!s.checked_in&&!s.attended)throw new Error("Certificate can only be issued for attended events");const l=await Yt.getEventById(s.event_id);if(!l)throw new Error("Event not found");const{data:{user:o}}=await J.auth.getUser(),u=o?.email?.split("@")[0]||"Member";try{const{data:f}=await J.from("event_certificates").select("*").eq("registration_id",e).single();if(f)return f}catch{console.log("Certificate table might not exist yet")}const h={id:`cert-${Date.now()}`,registration_id:e,event_id:s.event_id,user_id:s.user_id,certificate_number:`CERT-${Date.now()}`,issue_date:new Date().toISOString(),recipient_name:u,event_title:l.title,event_date:new Date(l.start_date).toLocaleDateString("en-AU"),cpd_points:l.cpd_points,cpd_category:l.cpd_category,pdf_generated:!1,is_valid:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};try{await J.from("event_registrations").update({certificate_issued:!0,certificate_issued_date:new Date().toISOString(),certificate_number:h.certificate_number}).eq("id",e)}catch{console.log("Could not update registration with certificate info")}return h}catch(s){throw console.error("Error generating certificate:",s),new Error(s.message||"Failed to generate certificate")}}static async scheduleConfigurableReminders(e,s,r,l){try{console.log(" DEBUG: Starting scheduleConfigurableReminders"),console.log(" Event start date:",l.start_date),console.log(" Current time:",new Date().toISOString());const{data:{user:o}}=await J.auth.getUser(),u=o?.email;if(console.log(" Using email server API to create reminders..."),console.log(" User email:",u),!u){console.log(" No email found, skipping reminders");return}try{const f=await(await fetch("http://localhost:3001/api/create-reminders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({registrationId:e,eventId:s,userId:r,event:l})})).json();f.success?(console.log(` Successfully created ${f.created} reminders via email server`),console.log(" Reminders created:",f.reminders)):console.error(" Email server API error:",f.error)}catch(h){console.error(" Failed to call email server API:",h.message)}}catch(o){console.error("Error scheduling reminders:",o)}}static async scheduleReminders(e,s,r,l){try{const{data:{user:o}}=await J.auth.getUser(),u=o?.email;if(!u)return;const h=new Date(l),f=[{reminder_type:"1_week",scheduled_date:new Date(h.getTime()-10080*60*1e3)},{reminder_type:"1_day",scheduled_date:new Date(h.getTime()-1440*60*1e3)},{reminder_type:"1_hour",scheduled_date:new Date(h.getTime()-3600*1e3)}];for(const p of f)p.scheduled_date>new Date&&await J.from("event_reminders").insert({event_id:s,registration_id:e,user_id:r,reminder_type:p.reminder_type,scheduled_date:p.scheduled_date.toISOString(),email_to:u})}catch(o){console.error("Error scheduling reminders:",o)}}static async getUserRegistrations(e){try{const{data:s,error:r}=await J.from("event_registrations").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(r)throw r;return s||[]}catch(s){return console.error("Error fetching user registrations:",s),[]}}static async getEventRegistrations(e){try{const{data:s,error:r}=await J.from("event_registrations").select("*").eq("event_id",e).order("created_at",{ascending:!1});if(r)throw r;return s||[]}catch(s){return console.error("Error fetching event registrations:",s),[]}}static async getRegistration(e){try{const{data:s,error:r}=await J.from("event_registrations").select("*").eq("id",e).single();if(r)throw r;return s}catch(s){return console.error("Error fetching registration:",s),null}}static async isUserRegistered(e,s){try{const{data:r,error:l}=await J.from("event_registrations").select("id").eq("event_id",e).eq("user_id",s).single();return!!r&&!l}catch{return!1}}}function O7({event:t,onClose:e,onSuccess:s}){const{user:r}=Bt(),[l,o]=O.useState(!1),[u,h]=O.useState("details"),[f,p]=O.useState({dietary_requirements:"",accessibility_requirements:"",notes:"",agree_terms:!1});if(!r)return null;const g=r.membership_status==="active";let b=g?t.member_price_cents:t.non_member_price_cents,v=g?"Member Price":"Non-Member Price";const w=t.early_bird_price_cents&&t.early_bird_end_date&&new Date<new Date(t.early_bird_end_date);w&&t.early_bird_price_cents&&(b=t.early_bird_price_cents,v="Early Bird Price");const x=async()=>{if(!f.agree_terms){ye("error","Please agree to the terms and conditions");return}o(!0);try{await Jn.registerForEvent(t.id,r.id,{dietary_requirements:f.dietary_requirements,accessibility_requirements:f.accessibility_requirements,notes:f.notes}),h("confirmation"),ye("success","Successfully registered for the event!"),setTimeout(()=>{s()},3e3)}catch(j){console.error("Registration error:",j),ye("error",j.message||"Failed to register for event")}finally{o(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:u==="confirmation"?"Registration Complete!":"Register for Event"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:i.jsx(Hi,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[u==="details"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:t.title}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(er,{className:"h-4 w-4"}),i.jsx("span",{children:rs(new Date(t.start_date),"PPP")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ba,{className:"h-4 w-4"}),i.jsxs("span",{children:[rs(new Date(t.start_date),"p")," -",rs(new Date(t.end_date),"p")]})]}),t.venue_name&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tc,{className:"h-4 w-4"}),i.jsx("span",{children:t.venue_name})]})]})]}),i.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:v}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b===0?"Free":Yt.formatPrice(b)}),w&&i.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Early bird discount applied!"})]}),i.jsx(eS,{className:"h-8 w-8 text-primary-600"})]})}),t.cpd_points>0&&i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ss,{className:"h-5 w-5 text-blue-600"}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium text-gray-900",children:["Earn ",t.cpd_points," CPD Points"]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Certificate will be issued upon attendance"})]})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Additional Information (Optional)"}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"dietary",children:"Dietary Requirements"}),i.jsx(Ae,{id:"dietary",value:f.dietary_requirements,onChange:j=>p({...f,dietary_requirements:j.target.value}),placeholder:"e.g., Vegetarian, Gluten-free, Halal"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"accessibility",children:"Accessibility Requirements"}),i.jsx(Ae,{id:"accessibility",value:f.accessibility_requirements,onChange:j=>p({...f,accessibility_requirements:j.target.value}),placeholder:"e.g., Wheelchair access, Hearing loop"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"notes",children:"Additional Notes"}),i.jsx("textarea",{id:"notes",value:f.notes,onChange:j=>p({...f,notes:j.target.value}),placeholder:"Any other information we should know?",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3})]})]}),i.jsx("div",{className:"border-t pt-4",children:i.jsxs("label",{className:"flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",checked:f.agree_terms,onChange:j=>p({...f,agree_terms:j.target.checked}),className:"mt-1"}),i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsx("p",{children:"I agree to the terms and conditions and understand that:"}),i.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[i.jsx("li",{children:"Registration is subject to availability"}),i.jsx("li",{children:"Cancellations must be made 48 hours in advance"}),i.jsx("li",{children:"CPD points will be awarded upon attendance"}),i.jsx("li",{children:"I will receive email reminders about this event"})]})]})]})})]}),u==="confirmation"&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Ss,{className:"h-8 w-8 text-green-600"})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"You're all set!"}),i.jsxs("p",{className:"text-gray-600 mb-6",children:['Your registration for "',t.title,'" has been confirmed.']}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-left max-w-md mx-auto",children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"What's next?"}),i.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx(Ss,{className:"h-4 w-4 text-green-500 mt-0.5"}),i.jsx("span",{children:"You'll receive a confirmation email shortly"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx(Ss,{className:"h-4 w-4 text-green-500 mt-0.5"}),i.jsx("span",{children:"We'll send you reminders before the event"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx(Ss,{className:"h-4 w-4 text-green-500 mt-0.5"}),i.jsx("span",{children:"Your CPD activity will be created automatically when you attend"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx(Ss,{className:"h-4 w-4 text-green-500 mt-0.5"}),i.jsx("span",{children:"Certificate will be available after the event"})]})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50",children:[u==="details"&&i.jsxs(i.Fragment,{children:[i.jsx(ce,{variant:"outline",onClick:e,disabled:l,children:"Cancel"}),i.jsx(ce,{onClick:x,disabled:l||!f.agree_terms,children:l?"Registering...":b===0?"Register for Free":`Register & Pay ${Yt.formatPrice(b)}`})]}),u==="confirmation"&&i.jsx(ce,{onClick:e,children:"Close"})]})]})})}function xS({content:t,className:e=""}){const s=t;return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`ql-container ql-snow ${e}`,style:{border:"none"},children:i.jsx("div",{className:"ql-editor",style:{padding:0,minHeight:"auto",fontSize:"16px",lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:s}})}),i.jsx("style",{children:`
        /* FIX FOR FRONT-END DISPLAY - Same logic as editor */
        
        /* BULLETS - Use native ::marker */
        .ql-editor ul {
          list-style-type: disc !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
        }
        
        .ql-editor ul li {
          list-style-type: disc !important;
          display: list-item !important;
        }
        
        .ql-editor li[data-list="bullet"] {
          list-style-type: disc !important;
          display: list-item !important;
        }
        
        /* Hide Quill's UI elements in rendered content */
        .ql-editor li > .ql-ui {
          display: none !important;
        }
        
        .ql-editor li > .ql-ui::before {
          content: none !important;
          display: none !important;
        }
        
        /* ORDERED LISTS - Use native numbering */
        .ql-editor ol {
          list-style-type: decimal !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
          counter-reset: none !important;
        }
        
        .ql-editor ol li {
          list-style-type: decimal !important;
          display: list-item !important;
        }
        
        .ql-editor li[data-list="ordered"] {
          list-style-type: decimal !important;
          display: list-item !important;
        }
        
        /* Remove any Quill counter increments */
        .ql-editor li[data-list] {
          counter-increment: none !important;
        }
        
        /* Spacing adjustments */
        .ql-editor h1 {
          margin: 0.5em 0 !important;
          font-size: 2em !important;
        }
        
        .ql-editor h2 {
          margin: 0.5em 0 !important;
          font-size: 1.5em !important;
        }
        
        .ql-editor h3 {
          margin: 0.5em 0 !important;
          font-size: 1.17em !important;
        }
        
        .ql-editor p {
          margin: 0.5em 0 !important;
        }
        
        .ql-editor p:first-child {
          margin-top: 0 !important;
        }
        
        .ql-editor p:last-child {
          margin-bottom: 0 !important;
        }
        
        .ql-editor blockquote {
          margin: 0.5em 0 !important;
          padding-left: 1em !important;
        }
        
        /* Keep numbered lists as normal */
        .ql-editor ol {
          list-style-type: decimal !important;
          display: block !important;
          margin: 0.5em 0 !important;
          padding-left: 1.5em !important;
        }
        
        .ql-editor ol > li {
          list-style-type: decimal !important;
          display: list-item !important;
          margin: 0.25em 0 !important;
        }
      `})]})}function R7({startDate:t,eventTitle:e,locationName:s,virtualLink:r,locationType:l="physical"}){const[o,u]=O.useState({days:0,hours:0,minutes:0,seconds:0,isLive:!1,isPast:!1});return O.useEffect(()=>{const h=()=>{const p=new Date().getTime(),b=new Date(t).getTime()-p;if(b<0)Math.abs(b)/36e5<2?u({days:0,hours:0,minutes:0,seconds:0,isLive:!0,isPast:!1}):u({days:0,hours:0,minutes:0,seconds:0,isLive:!1,isPast:!0});else{const v=Math.floor(b/864e5),w=Math.floor(b%(1e3*60*60*24)/(1e3*60*60)),x=Math.floor(b%(1e3*60*60)/(1e3*60)),j=Math.floor(b%(1e3*60)/1e3);u({days:v,hours:w,minutes:x,seconds:j,isLive:!1,isPast:!1})}};h();const f=setInterval(h,1e3);return()=>clearInterval(f)},[t]),o.isPast?i.jsx("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[i.jsx(er,{className:"h-5 w-5"}),i.jsx("p",{className:"text-lg font-medium",children:"This event has ended"})]})}):o.isLive?i.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 rounded-lg p-6 text-white animate-pulse",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[i.jsx("div",{className:"h-3 w-3 bg-white rounded-full animate-pulse"}),i.jsx("p",{className:"text-2xl font-bold",children:"EVENT IS LIVE NOW!"}),i.jsx("div",{className:"h-3 w-3 bg-white rounded-full animate-pulse"})]}),r&&(l==="virtual"||l==="hybrid")&&i.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 bg-white text-red-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition",children:[i.jsx(rS,{className:"h-5 w-5"}),i.jsx("span",{children:"Join Virtual Event"})]}),s&&(l==="physical"||l==="hybrid")&&i.jsxs("div",{className:"mt-4 flex items-center justify-center space-x-2",children:[i.jsx(Tc,{className:"h-5 w-5"}),i.jsx("span",{className:"text-lg",children:s})]})]})}):i.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-teal-500 rounded-lg p-6 text-white",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx(Ba,{className:"h-5 w-5"}),i.jsx("p",{className:"text-lg font-semibold",children:"Event Starts In"})]}),i.jsx("p",{className:"text-sm opacity-90",children:e})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"bg-white/20 rounded-lg p-3 backdrop-blur",children:[i.jsx("div",{className:"text-3xl font-bold",children:String(o.days).padStart(2,"0")}),i.jsx("div",{className:"text-xs uppercase opacity-90 mt-1",children:"Days"})]})}),i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"bg-white/20 rounded-lg p-3 backdrop-blur",children:[i.jsx("div",{className:"text-3xl font-bold",children:String(o.hours).padStart(2,"0")}),i.jsx("div",{className:"text-xs uppercase opacity-90 mt-1",children:"Hours"})]})}),i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"bg-white/20 rounded-lg p-3 backdrop-blur",children:[i.jsx("div",{className:"text-3xl font-bold",children:String(o.minutes).padStart(2,"0")}),i.jsx("div",{className:"text-xs uppercase opacity-90 mt-1",children:"Minutes"})]})}),i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"bg-white/20 rounded-lg p-3 backdrop-blur",children:[i.jsx("div",{className:"text-3xl font-bold",children:String(o.seconds).padStart(2,"0")}),i.jsx("div",{className:"text-xs uppercase opacity-90 mt-1",children:"Seconds"})]})})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx("p",{className:"text-sm opacity-90",children:new Date(t).toLocaleDateString("en-AU",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})})]})}function M7(){const{slug:t}=ek(),e=or(),{user:s}=Bt(),[r,l]=O.useState(null),[o,u]=O.useState(!0),[h,f]=O.useState(null),[p,g]=O.useState(!1),[b,v]=O.useState(0);O.useEffect(()=>{t&&w()},[t]);const w=async()=>{if(t)try{u(!0);const C=await Yt.getEventBySlug(t);if(!C){ye("error","Event not found"),e("/events");return}l(C);const z=await Jn.getEventRegistrations(C.id);if(v(z.length),s&&await Jn.isUserRegistered(C.id,s.id)){const P=(await Jn.getUserRegistrations(s.id)).find(V=>V.event_id===C.id);f(P||null),await Jn.autoCheckIn(C.id,s.id)}}catch(C){console.error("Error loading event:",C),ye("error","Failed to load event details")}finally{u(!1)}},x=()=>{if(!s){e("/login");return}g(!0)},j=()=>{g(!1),w()},N=()=>{navigator.share?navigator.share({title:r?.title,text:r?.short_description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),ye("success","Link copied to clipboard"))},T=()=>{if(!r)return!1;const C=new Date,z=new Date(r.start_date),L=new Date(r.end_date),q=10,P=new Date(z.getTime()-q*60*1e3);return C>=P&&C<=L},S=async()=>{if(!(!r||!h))try{await Jn.checkInUser(h.id,"auto"),await Jn.logAttendance(h.id,r.id,s.id,"video_start"),r.virtual_link&&window.open(r.virtual_link,"_blank"),ye("success","Check-in successful! Opening event...");const C=new Date(r.end_date);if(C>new Date){const L={eventId:r.id,registrationId:h.id,eventTitle:r.title,eventEndTime:C.toISOString(),cpdPoints:r.cpd_points,cpdCategory:r.cpd_category||"Event Attendance"};localStorage.setItem(`cpd_pending_${r.id}`,JSON.stringify(L))}await w()}catch(C){console.error("Error joining event:",C),ye("error","Failed to join event. Please try again.")}};if(o)return i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!r)return null;const k=s?.membership_status==="active",Z=k?r.member_price_cents:r.non_member_price_cents,R=r.capacity-b,U=Yt.isRegistrationOpen(r);Yt.getEventStatus(r);const B=new Date(r.end_date)<new Date,A=R<=0;return i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs(ce,{variant:"ghost",onClick:()=>e("/events"),className:"mb-6",children:[i.jsx(XN,{className:"h-4 w-4 mr-2"}),"Back to Events"]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsx("img",{src:r.image_url||"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=1200&h=600&fit=crop",alt:r.title,className:"w-full h-64 lg:h-96 object-cover rounded-lg",onError:C=>{const z=C.target;z.onerror=null,z.src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=1200&h=600&fit=crop"}}),i.jsxs("div",{children:[r.category&&i.jsx("span",{className:"inline-block px-3 py-1 text-sm font-semibold rounded-full mb-3",style:{backgroundColor:`${r.category.color}20`,color:r.category.color},children:r.category.name}),i.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:r.title}),r.short_description&&i.jsx("p",{className:"text-lg text-gray-600",children:r.short_description})]}),i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(er,{className:"h-5 w-5 text-gray-400 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-900",children:"Date & Time"}),i.jsx("p",{className:"text-gray-600",children:rs(new Date(r.start_date),"EEEE, MMMM d, yyyy")}),i.jsxs("p",{className:"text-gray-600",children:[rs(new Date(r.start_date),"h:mm a")," -",rs(new Date(r.end_date),"h:mm a")]})]})]}),i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(Tc,{className:"h-5 w-5 text-gray-400 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-900",children:"Location"}),r.location_type==="virtual"?i.jsxs("div",{children:[i.jsxs("p",{className:"text-gray-600 flex items-center",children:[i.jsx(sS,{className:"h-4 w-4 mr-1"}),"Online Event"]}),h&&r.virtual_link&&i.jsx("div",{className:"mt-2",children:T()?i.jsxs(ce,{onClick:S,className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:[i.jsx(rS,{className:"h-4 w-4 mr-2"}),"Join Live Event"]}):i.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[i.jsx(Ll,{className:"h-4 w-4 mr-1"}),"Join button available 10 min before start"]})})]}):i.jsxs("div",{children:[r.venue_name&&i.jsxs("p",{className:"text-gray-600 flex items-center",children:[i.jsx(Tf,{className:"h-4 w-4 mr-1"}),r.venue_name]}),i.jsxs("p",{className:"text-gray-600",children:[r.address_line1,r.address_line2&&`, ${r.address_line2}`]}),i.jsxs("p",{className:"text-gray-600",children:[r.city,", ",r.state," ",r.postal_code]})]}),r.location_instructions&&i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:r.location_instructions})]})]})]})}),i.jsxs(ge,{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"About This Event"}),r.description?i.jsx(xS,{content:r.description}):i.jsx("p",{className:"text-gray-600",children:"No description available"})]}),r.cpd_points>0&&i.jsxs(ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(rn,{className:"h-6 w-6 text-primary-600 mr-2"}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"CPD Points"})]}),i.jsxs("p",{className:"text-gray-600",children:["Earn ",i.jsxs("span",{className:"font-semibold",children:[r.cpd_points," CPD points"]})," by attending this event."]}),r.cpd_category&&i.jsxs("p",{className:"text-gray-600 mt-1",children:["Category: ",i.jsx("span",{className:"font-semibold",children:r.cpd_category})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(ge,{className:"p-6 sticky top-4 bg-white",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:k?"Member Price":"Non-Member Price"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Z===0?"Free":Yt.formatPrice(Z)}),r.early_bird_price_cents&&r.early_bird_end_date&&new Date<new Date(r.early_bird_end_date)&&i.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Early bird pricing available until ",rs(new Date(r.early_bird_end_date),"MMM d")]})]}),i.jsxs("div",{className:"flex items-center justify-between py-3 border-y",children:[i.jsxs("div",{className:"flex items-center text-gray-600",children:[i.jsx(ni,{className:"h-5 w-5 mr-2"}),i.jsx("span",{children:"Capacity"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold text-gray-900",children:r.capacity}),R>0&&R<10&&i.jsxs("p",{className:"text-sm text-orange-600",children:["Only ",R," spots left!"]})]})]}),!B&&i.jsx(i.Fragment,{children:h?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ss,{className:"h-5 w-5 text-green-600"}),i.jsx("p",{className:"text-green-800 font-semibold",children:"You're registered!"})]}),(h.checked_in||h.attended)&&i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx(Nd,{className:"h-4 w-4 text-green-600"}),i.jsx("p",{className:"text-sm text-green-600",children:"Checked in"})]}),h.certificate_issued&&i.jsx(ce,{variant:"link",className:"text-sm text-primary-600 p-0 h-auto mt-2",onClick:()=>e(`/certificates/${h.certificate_number}`),children:"View Certificate "})]}),i.jsx(R7,{startDate:r.start_date,eventTitle:r.title,locationName:r.venue_name,virtualLink:r.virtual_link,locationType:r.location_type}),i.jsx(ce,{variant:"outline",className:"w-full",onClick:()=>e("/cpd/activities"),children:"View in My CPD"})]}):i.jsxs(i.Fragment,{children:[U&&!A?i.jsx(ce,{className:"w-full",size:"lg",onClick:x,children:"Register Now"}):i.jsx(ce,{className:"w-full",size:"lg",disabled:!0,children:A?"Event Full":"Registration Closed"}),r.waitlist_enabled&&A&&i.jsx(ce,{variant:"outline",className:"w-full mt-2",onClick:()=>ye("info","Waitlist feature coming soon"),children:"Join Waitlist"})]})}),B&&i.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:i.jsx("p",{className:"text-gray-600 text-center",children:"This event has ended"})}),i.jsxs("div",{className:"flex gap-2 pt-3",children:[i.jsxs(ce,{variant:"outline",className:"flex-1",onClick:N,children:[i.jsx(dq,{className:"h-4 w-4 mr-2"}),"Share"]}),i.jsxs(ce,{variant:"outline",className:"flex-1",onClick:()=>{},children:[i.jsx(G8,{className:"h-4 w-4 mr-2"}),"Save"]})]})]})}),i.jsxs(ge,{className:"p-6",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Organized by"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"h-12 w-12 bg-primary-100 rounded-full flex items-center justify-center",children:i.jsx(Tf,{className:"h-6 w-6 text-primary-600"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"font-semibold text-gray-900",children:"English Australia"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Professional Development Team"})]})]})]}),r.tags&&r.tags.length>0&&i.jsxs(ge,{className:"p-6",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Tags"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map((C,z)=>i.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full",children:C},z))})]})]})]}),p&&r&&i.jsx(O7,{event:r,onClose:()=>g(!1),onSuccess:j})]})}function D7(){const t=or(),{user:e}=Bt(),[s,r]=O.useState([]),[l,o]=O.useState(!0),[u,h]=O.useState("upcoming");O.useEffect(()=>{e&&f()},[e]);const f=async()=>{if(e)try{o(!0);const j=await Jn.getUserRegistrations(e.id),N=await Promise.all(j.map(async T=>{try{const S=await Yt.getEventById(T.event_id);return{registration:T,event:S}}catch(S){return console.error(`Failed to load event ${T.event_id}:`,S),{registration:T,event:null}}}));r(N)}catch(j){console.error("Error loading registrations:",j),ye("error","Failed to load your registrations")}finally{o(!1)}},p=async j=>{try{await Jn.cancelRegistration(j),ye("success","Registration cancelled successfully"),f()}catch(N){console.error("Error cancelling registration:",N),ye("error","Failed to cancel registration")}},g=async j=>{try{const N=await Jn.generateCertificate(j.id);N&&(ye("success","Certificate generated successfully"),console.log("Certificate:",N))}catch(N){console.error("Error generating certificate:",N),ye("error",N.message||"Failed to generate certificate")}},b=new Date,v=s.filter(j=>j.event&&new Date(j.event.end_date)>=b),w=s.filter(j=>j.event&&new Date(j.event.end_date)<b),x=u==="upcoming"?v:w;return l?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Event Registrations"}),i.jsx("p",{className:"text-gray-600",children:"Manage your event registrations and access certificates"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Registrations"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.length})]}),i.jsx(bq,{className:"h-8 w-8 text-primary-600"})]})}),i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Upcoming Events"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.length})]}),i.jsx(er,{className:"h-8 w-8 text-blue-600"})]})}),i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Events Attended"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.filter(j=>j.registration.attended||j.registration.checked_in).length})]}),i.jsx(Ss,{className:"h-8 w-8 text-green-600"})]})})]}),i.jsx("div",{className:"border-b border-gray-200 mb-6",children:i.jsxs("nav",{className:"-mb-px flex space-x-8",children:[i.jsxs("button",{onClick:()=>h("upcoming"),className:`py-2 px-1 border-b-2 font-medium text-sm ${u==="upcoming"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Upcoming Events (",v.length,")"]}),i.jsxs("button",{onClick:()=>h("past"),className:`py-2 px-1 border-b-2 font-medium text-sm ${u==="past"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Past Events (",w.length,")"]})]})}),x.length>0?i.jsx("div",{className:"space-y-4",children:x.map(({registration:j,event:N})=>{if(!N)return null;const T=new Date(N.end_date)<b,S=!T&&j.status==="registered",k=T&&(j.attended||j.checked_in);return i.jsx(ge,{className:"p-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("img",{src:N.image_url||"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=200&h=150&fit=crop",alt:N.title,className:"w-24 h-24 object-cover rounded-lg"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 cursor-pointer hover:text-primary-600",onClick:()=>t(`/events/${N.slug}`),children:N.title}),i.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(er,{className:"h-4 w-4"}),i.jsx("span",{children:rs(new Date(N.start_date),"PPP")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ba,{className:"h-4 w-4"}),i.jsxs("span",{children:[rs(new Date(N.start_date),"p")," -",rs(new Date(N.end_date),"p")]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tc,{className:"h-4 w-4"}),i.jsx("span",{children:N.location_type==="virtual"?"Online Event":N.venue_name||N.city||"Location TBA"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j.status==="cancelled"?"bg-gray-100 text-gray-800":j.status==="attended"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:j.status==="attended"?"Attended":j.status==="cancelled"?"Cancelled":"Registered"}),(j.checked_in||j.attended)&&i.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-green-600",children:[i.jsx(Nd,{className:"h-3 w-3"}),"Checked In"]}),j.payment_amount&&j.payment_amount>0&&i.jsxs("span",{className:`inline-flex items-center gap-1 text-xs ${j.payment_status==="completed"?"text-green-600":j.payment_status==="pending"?"text-orange-600":"text-gray-600"}`,children:[i.jsx(tS,{className:"h-3 w-3"}),j.payment_status==="completed"?"Paid":j.payment_status==="pending"?"Payment Pending":j.payment_status]}),N.cpd_points>0&&i.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-purple-600",children:[i.jsx(rn,{className:"h-3 w-3"}),N.cpd_points," CPD Points"]})]})]})]})}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx(ce,{variant:"outline",size:"sm",onClick:()=>t(`/events/${N.slug}`),children:"View Event"}),k&&i.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>g(j),children:[i.jsx(_y,{className:"h-4 w-4 mr-2"}),"Certificate"]}),S&&i.jsx(ce,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to cancel this registration?")&&p(j.id)},className:"text-red-600 hover:text-red-700 hover:border-red-300",children:"Cancel Registration"}),j.cpd_activity_id&&i.jsx(ce,{variant:"outline",size:"sm",onClick:()=>t("/cpd/activities"),children:"View in CPD"})]})]})},j.id)})}):i.jsxs(ge,{className:"p-12 text-center",children:[i.jsx(Ll,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:u==="upcoming"?"No upcoming events":"No past events"}),i.jsx("p",{className:"text-gray-600 mb-4",children:u==="upcoming"?"You are not registered for any upcoming events.":"You have not attended any past events."}),u==="upcoming"&&i.jsx(ce,{onClick:()=>t("/events"),children:"Browse Events"})]})]})}var vS=typeof global=="object"&&global&&global.Object===Object&&global,L7=typeof self=="object"&&self&&self.Object===Object&&self,ai=vS||L7||Function("return this")(),Va=ai.Symbol,wS=Object.prototype,q7=wS.hasOwnProperty,P7=wS.toString,Pu=Va?Va.toStringTag:void 0;function I7(t){var e=q7.call(t,Pu),s=t[Pu];try{t[Pu]=void 0;var r=!0}catch{}var l=P7.call(t);return r&&(e?t[Pu]=s:delete t[Pu]),l}var $7=Object.prototype,U7=$7.toString;function z7(t){return U7.call(t)}var B7="[object Null]",F7="[object Undefined]",E_=Va?Va.toStringTag:void 0;function Oc(t){return t==null?t===void 0?F7:B7:E_&&E_ in Object(t)?I7(t):z7(t)}function Vi(t){return t!=null&&typeof t=="object"}var Pl=Array.isArray;function Ya(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function _S(t){return t}var H7="[object AsyncFunction]",V7="[object Function]",G7="[object GeneratorFunction]",Z7="[object Proxy]";function Ry(t){if(!Ya(t))return!1;var e=Oc(t);return e==V7||e==G7||e==H7||e==Z7}var Eg=ai["__core-js_shared__"],A_=function(){var t=/[^.]+$/.exec(Eg&&Eg.keys&&Eg.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Y7(t){return!!A_&&A_ in t}var K7=Function.prototype,W7=K7.toString;function Zl(t){if(t!=null){try{return W7.call(t)}catch{}try{return t+""}catch{}}return""}var Q7=/[\\^$.*+?()[\]{}|]/g,X7=/^\[object .+?Constructor\]$/,J7=Function.prototype,eI=Object.prototype,tI=J7.toString,sI=eI.hasOwnProperty,rI=RegExp("^"+tI.call(sI).replace(Q7,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nI(t){if(!Ya(t)||Y7(t))return!1;var e=Ry(t)?rI:X7;return e.test(Zl(t))}function iI(t,e){return t?.[e]}function Yl(t,e){var s=iI(t,e);return nI(s)?s:void 0}var y0=Yl(ai,"WeakMap"),C_=Object.create,aI=function(){function t(){}return function(e){if(!Ya(e))return{};if(C_)return C_(e);t.prototype=e;var s=new t;return t.prototype=void 0,s}}();function lI(t,e,s){switch(s.length){case 0:return t.call(e);case 1:return t.call(e,s[0]);case 2:return t.call(e,s[0],s[1]);case 3:return t.call(e,s[0],s[1],s[2])}return t.apply(e,s)}function oI(t,e){var s=-1,r=t.length;for(e||(e=Array(r));++s<r;)e[s]=t[s];return e}var cI=800,uI=16,dI=Date.now;function hI(t){var e=0,s=0;return function(){var r=dI(),l=uI-(r-s);if(s=r,l>0){if(++e>=cI)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function fI(t){return function(){return t}}var Rf=function(){try{var t=Yl(Object,"defineProperty");return t({},"",{}),t}catch{}}(),mI=Rf?function(t,e){return Rf(t,"toString",{configurable:!0,enumerable:!1,value:fI(e),writable:!0})}:_S,pI=hI(mI);function gI(t,e){for(var s=-1,r=t==null?0:t.length;++s<r&&e(t[s],s,t)!==!1;);return t}var yI=9007199254740991,bI=/^(?:0|[1-9]\d*)$/;function jS(t,e){var s=typeof t;return e=e??yI,!!e&&(s=="number"||s!="symbol"&&bI.test(t))&&t>-1&&t%1==0&&t<e}function My(t,e,s){e=="__proto__"&&Rf?Rf(t,e,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[e]=s}function Ed(t,e){return t===e||t!==t&&e!==e}var xI=Object.prototype,vI=xI.hasOwnProperty;function NS(t,e,s){var r=t[e];(!(vI.call(t,e)&&Ed(r,s))||s===void 0&&!(e in t))&&My(t,e,s)}function wI(t,e,s,r){var l=!s;s||(s={});for(var o=-1,u=e.length;++o<u;){var h=e[o],f=void 0;f===void 0&&(f=t[h]),l?My(s,h,f):NS(s,h,f)}return s}var k_=Math.max;function _I(t,e,s){return e=k_(e===void 0?t.length-1:e,0),function(){for(var r=arguments,l=-1,o=k_(r.length-e,0),u=Array(o);++l<o;)u[l]=r[e+l];l=-1;for(var h=Array(e+1);++l<e;)h[l]=r[l];return h[e]=s(u),lI(t,this,h)}}function jI(t,e){return pI(_I(t,e,_S),t+"")}var NI=9007199254740991;function SS(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=NI}function Jf(t){return t!=null&&SS(t.length)&&!Ry(t)}function SI(t,e,s){if(!Ya(s))return!1;var r=typeof e;return(r=="number"?Jf(s)&&jS(e,s.length):r=="string"&&e in s)?Ed(s[e],t):!1}function EI(t){return jI(function(e,s){var r=-1,l=s.length,o=l>1?s[l-1]:void 0,u=l>2?s[2]:void 0;for(o=t.length>3&&typeof o=="function"?(l--,o):void 0,u&&SI(s[0],s[1],u)&&(o=l<3?void 0:o,l=1),e=Object(e);++r<l;){var h=s[r];h&&t(e,h,r,o)}return e})}var AI=Object.prototype;function Dy(t){var e=t&&t.constructor,s=typeof e=="function"&&e.prototype||AI;return t===s}function CI(t,e){for(var s=-1,r=Array(t);++s<t;)r[s]=e(s);return r}var kI="[object Arguments]";function T_(t){return Vi(t)&&Oc(t)==kI}var ES=Object.prototype,TI=ES.hasOwnProperty,OI=ES.propertyIsEnumerable,b0=T_(function(){return arguments}())?T_:function(t){return Vi(t)&&TI.call(t,"callee")&&!OI.call(t,"callee")};function RI(){return!1}var AS=typeof Dr=="object"&&Dr&&!Dr.nodeType&&Dr,O_=AS&&typeof Lr=="object"&&Lr&&!Lr.nodeType&&Lr,MI=O_&&O_.exports===AS,R_=MI?ai.Buffer:void 0,DI=R_?R_.isBuffer:void 0,sd=DI||RI,LI="[object Arguments]",qI="[object Array]",PI="[object Boolean]",II="[object Date]",$I="[object Error]",UI="[object Function]",zI="[object Map]",BI="[object Number]",FI="[object Object]",HI="[object RegExp]",VI="[object Set]",GI="[object String]",ZI="[object WeakMap]",YI="[object ArrayBuffer]",KI="[object DataView]",WI="[object Float32Array]",QI="[object Float64Array]",XI="[object Int8Array]",JI="[object Int16Array]",e9="[object Int32Array]",t9="[object Uint8Array]",s9="[object Uint8ClampedArray]",r9="[object Uint16Array]",n9="[object Uint32Array]",Ut={};Ut[WI]=Ut[QI]=Ut[XI]=Ut[JI]=Ut[e9]=Ut[t9]=Ut[s9]=Ut[r9]=Ut[n9]=!0;Ut[LI]=Ut[qI]=Ut[YI]=Ut[PI]=Ut[KI]=Ut[II]=Ut[$I]=Ut[UI]=Ut[zI]=Ut[BI]=Ut[FI]=Ut[HI]=Ut[VI]=Ut[GI]=Ut[ZI]=!1;function i9(t){return Vi(t)&&SS(t.length)&&!!Ut[Oc(t)]}function Ly(t){return function(e){return t(e)}}var CS=typeof Dr=="object"&&Dr&&!Dr.nodeType&&Dr,Yu=CS&&typeof Lr=="object"&&Lr&&!Lr.nodeType&&Lr,a9=Yu&&Yu.exports===CS,Ag=a9&&vS.process,gc=function(){try{var t=Yu&&Yu.require&&Yu.require("util").types;return t||Ag&&Ag.binding&&Ag.binding("util")}catch{}}(),M_=gc&&gc.isTypedArray,qy=M_?Ly(M_):i9,l9=Object.prototype,o9=l9.hasOwnProperty;function kS(t,e){var s=Pl(t),r=!s&&b0(t),l=!s&&!r&&sd(t),o=!s&&!r&&!l&&qy(t),u=s||r||l||o,h=u?CI(t.length,String):[],f=h.length;for(var p in t)(e||o9.call(t,p))&&!(u&&(p=="length"||l&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||jS(p,f)))&&h.push(p);return h}function TS(t,e){return function(s){return t(e(s))}}var c9=TS(Object.keys,Object),u9=Object.prototype,d9=u9.hasOwnProperty;function h9(t){if(!Dy(t))return c9(t);var e=[];for(var s in Object(t))d9.call(t,s)&&s!="constructor"&&e.push(s);return e}function f9(t){return Jf(t)?kS(t):h9(t)}function m9(t){var e=[];if(t!=null)for(var s in Object(t))e.push(s);return e}var p9=Object.prototype,g9=p9.hasOwnProperty;function y9(t){if(!Ya(t))return m9(t);var e=Dy(t),s=[];for(var r in t)r=="constructor"&&(e||!g9.call(t,r))||s.push(r);return s}function OS(t){return Jf(t)?kS(t,!0):y9(t)}var rd=Yl(Object,"create");function b9(){this.__data__=rd?rd(null):{},this.size=0}function x9(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var v9="__lodash_hash_undefined__",w9=Object.prototype,_9=w9.hasOwnProperty;function j9(t){var e=this.__data__;if(rd){var s=e[t];return s===v9?void 0:s}return _9.call(e,t)?e[t]:void 0}var N9=Object.prototype,S9=N9.hasOwnProperty;function E9(t){var e=this.__data__;return rd?e[t]!==void 0:S9.call(e,t)}var A9="__lodash_hash_undefined__";function C9(t,e){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=rd&&e===void 0?A9:e,this}function Il(t){var e=-1,s=t==null?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}Il.prototype.clear=b9;Il.prototype.delete=x9;Il.prototype.get=j9;Il.prototype.has=E9;Il.prototype.set=C9;function k9(){this.__data__=[],this.size=0}function em(t,e){for(var s=t.length;s--;)if(Ed(t[s][0],e))return s;return-1}var T9=Array.prototype,O9=T9.splice;function R9(t){var e=this.__data__,s=em(e,t);if(s<0)return!1;var r=e.length-1;return s==r?e.pop():O9.call(e,s,1),--this.size,!0}function M9(t){var e=this.__data__,s=em(e,t);return s<0?void 0:e[s][1]}function D9(t){return em(this.__data__,t)>-1}function L9(t,e){var s=this.__data__,r=em(s,t);return r<0?(++this.size,s.push([t,e])):s[r][1]=e,this}function Yi(t){var e=-1,s=t==null?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}Yi.prototype.clear=k9;Yi.prototype.delete=R9;Yi.prototype.get=M9;Yi.prototype.has=D9;Yi.prototype.set=L9;var nd=Yl(ai,"Map");function q9(){this.size=0,this.__data__={hash:new Il,map:new(nd||Yi),string:new Il}}function P9(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function tm(t,e){var s=t.__data__;return P9(e)?s[typeof e=="string"?"string":"hash"]:s.map}function I9(t){var e=tm(this,t).delete(t);return this.size-=e?1:0,e}function $9(t){return tm(this,t).get(t)}function U9(t){return tm(this,t).has(t)}function z9(t,e){var s=tm(this,t),r=s.size;return s.set(t,e),this.size+=s.size==r?0:1,this}function Kl(t){var e=-1,s=t==null?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}Kl.prototype.clear=q9;Kl.prototype.delete=I9;Kl.prototype.get=$9;Kl.prototype.has=U9;Kl.prototype.set=z9;function B9(t,e){for(var s=-1,r=e.length,l=t.length;++s<r;)t[l+s]=e[s];return t}var RS=TS(Object.getPrototypeOf,Object),F9="[object Object]",H9=Function.prototype,V9=Object.prototype,MS=H9.toString,G9=V9.hasOwnProperty,Z9=MS.call(Object);function Y9(t){if(!Vi(t)||Oc(t)!=F9)return!1;var e=RS(t);if(e===null)return!0;var s=G9.call(e,"constructor")&&e.constructor;return typeof s=="function"&&s instanceof s&&MS.call(s)==Z9}function K9(){this.__data__=new Yi,this.size=0}function W9(t){var e=this.__data__,s=e.delete(t);return this.size=e.size,s}function Q9(t){return this.__data__.get(t)}function X9(t){return this.__data__.has(t)}var J9=200;function e$(t,e){var s=this.__data__;if(s instanceof Yi){var r=s.__data__;if(!nd||r.length<J9-1)return r.push([t,e]),this.size=++s.size,this;s=this.__data__=new Kl(r)}return s.set(t,e),this.size=s.size,this}function si(t){var e=this.__data__=new Yi(t);this.size=e.size}si.prototype.clear=K9;si.prototype.delete=W9;si.prototype.get=Q9;si.prototype.has=X9;si.prototype.set=e$;var DS=typeof Dr=="object"&&Dr&&!Dr.nodeType&&Dr,D_=DS&&typeof Lr=="object"&&Lr&&!Lr.nodeType&&Lr,t$=D_&&D_.exports===DS,L_=t$?ai.Buffer:void 0,q_=L_?L_.allocUnsafe:void 0;function LS(t,e){if(e)return t.slice();var s=t.length,r=q_?q_(s):new t.constructor(s);return t.copy(r),r}function s$(t,e){for(var s=-1,r=t==null?0:t.length,l=0,o=[];++s<r;){var u=t[s];e(u,s,t)&&(o[l++]=u)}return o}function r$(){return[]}var n$=Object.prototype,i$=n$.propertyIsEnumerable,P_=Object.getOwnPropertySymbols,a$=P_?function(t){return t==null?[]:(t=Object(t),s$(P_(t),function(e){return i$.call(t,e)}))}:r$;function l$(t,e,s){var r=e(t);return Pl(t)?r:B9(r,s(t))}function x0(t){return l$(t,f9,a$)}var v0=Yl(ai,"DataView"),w0=Yl(ai,"Promise"),_0=Yl(ai,"Set"),I_="[object Map]",o$="[object Object]",$_="[object Promise]",U_="[object Set]",z_="[object WeakMap]",B_="[object DataView]",c$=Zl(v0),u$=Zl(nd),d$=Zl(w0),h$=Zl(_0),f$=Zl(y0),xn=Oc;(v0&&xn(new v0(new ArrayBuffer(1)))!=B_||nd&&xn(new nd)!=I_||w0&&xn(w0.resolve())!=$_||_0&&xn(new _0)!=U_||y0&&xn(new y0)!=z_)&&(xn=function(t){var e=Oc(t),s=e==o$?t.constructor:void 0,r=s?Zl(s):"";if(r)switch(r){case c$:return B_;case u$:return I_;case d$:return $_;case h$:return U_;case f$:return z_}return e});var m$=Object.prototype,p$=m$.hasOwnProperty;function g$(t){var e=t.length,s=new t.constructor(e);return e&&typeof t[0]=="string"&&p$.call(t,"index")&&(s.index=t.index,s.input=t.input),s}var Mf=ai.Uint8Array;function Py(t){var e=new t.constructor(t.byteLength);return new Mf(e).set(new Mf(t)),e}function y$(t,e){var s=Py(t.buffer);return new t.constructor(s,t.byteOffset,t.byteLength)}var b$=/\w*$/;function x$(t){var e=new t.constructor(t.source,b$.exec(t));return e.lastIndex=t.lastIndex,e}var F_=Va?Va.prototype:void 0,H_=F_?F_.valueOf:void 0;function v$(t){return H_?Object(H_.call(t)):{}}function qS(t,e){var s=e?Py(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.length)}var w$="[object Boolean]",_$="[object Date]",j$="[object Map]",N$="[object Number]",S$="[object RegExp]",E$="[object Set]",A$="[object String]",C$="[object Symbol]",k$="[object ArrayBuffer]",T$="[object DataView]",O$="[object Float32Array]",R$="[object Float64Array]",M$="[object Int8Array]",D$="[object Int16Array]",L$="[object Int32Array]",q$="[object Uint8Array]",P$="[object Uint8ClampedArray]",I$="[object Uint16Array]",$$="[object Uint32Array]";function U$(t,e,s){var r=t.constructor;switch(e){case k$:return Py(t);case w$:case _$:return new r(+t);case T$:return y$(t);case O$:case R$:case M$:case D$:case L$:case q$:case P$:case I$:case $$:return qS(t,s);case j$:return new r;case N$:case A$:return new r(t);case S$:return x$(t);case E$:return new r;case C$:return v$(t)}}function PS(t){return typeof t.constructor=="function"&&!Dy(t)?aI(RS(t)):{}}var z$="[object Map]";function B$(t){return Vi(t)&&xn(t)==z$}var V_=gc&&gc.isMap,F$=V_?Ly(V_):B$,H$="[object Set]";function V$(t){return Vi(t)&&xn(t)==H$}var G_=gc&&gc.isSet,G$=G_?Ly(G_):V$,Z$=1,IS="[object Arguments]",Y$="[object Array]",K$="[object Boolean]",W$="[object Date]",Q$="[object Error]",$S="[object Function]",X$="[object GeneratorFunction]",J$="[object Map]",eU="[object Number]",US="[object Object]",tU="[object RegExp]",sU="[object Set]",rU="[object String]",nU="[object Symbol]",iU="[object WeakMap]",aU="[object ArrayBuffer]",lU="[object DataView]",oU="[object Float32Array]",cU="[object Float64Array]",uU="[object Int8Array]",dU="[object Int16Array]",hU="[object Int32Array]",fU="[object Uint8Array]",mU="[object Uint8ClampedArray]",pU="[object Uint16Array]",gU="[object Uint32Array]",qt={};qt[IS]=qt[Y$]=qt[aU]=qt[lU]=qt[K$]=qt[W$]=qt[oU]=qt[cU]=qt[uU]=qt[dU]=qt[hU]=qt[J$]=qt[eU]=qt[US]=qt[tU]=qt[sU]=qt[rU]=qt[nU]=qt[fU]=qt[mU]=qt[pU]=qt[gU]=!0;qt[Q$]=qt[$S]=qt[iU]=!1;function hf(t,e,s,r,l,o){var u,h=e&Z$;if(u!==void 0)return u;if(!Ya(t))return t;var f=Pl(t);if(f)u=g$(t);else{var p=xn(t),g=p==$S||p==X$;if(sd(t))return LS(t,h);if(p==US||p==IS||g&&!l)u=g?{}:PS(t);else{if(!qt[p])return l?t:{};u=U$(t,p,h)}}o||(o=new si);var b=o.get(t);if(b)return b;o.set(t,u),G$(t)?t.forEach(function(x){u.add(hf(x,e,s,x,t,o))}):F$(t)&&t.forEach(function(x,j){u.set(j,hf(x,e,s,j,t,o))});var v=x0,w=f?void 0:v(t);return gI(w||t,function(x,j){w&&(j=x,x=t[j]),NS(u,j,hf(x,e,s,j,t,o))}),u}var yU=1,bU=4;function cc(t){return hf(t,yU|bU)}var xU="__lodash_hash_undefined__";function vU(t){return this.__data__.set(t,xU),this}function wU(t){return this.__data__.has(t)}function Df(t){var e=-1,s=t==null?0:t.length;for(this.__data__=new Kl;++e<s;)this.add(t[e])}Df.prototype.add=Df.prototype.push=vU;Df.prototype.has=wU;function _U(t,e){for(var s=-1,r=t==null?0:t.length;++s<r;)if(e(t[s],s,t))return!0;return!1}function jU(t,e){return t.has(e)}var NU=1,SU=2;function zS(t,e,s,r,l,o){var u=s&NU,h=t.length,f=e.length;if(h!=f&&!(u&&f>h))return!1;var p=o.get(t),g=o.get(e);if(p&&g)return p==e&&g==t;var b=-1,v=!0,w=s&SU?new Df:void 0;for(o.set(t,e),o.set(e,t);++b<h;){var x=t[b],j=e[b];if(r)var N=u?r(j,x,b,e,t,o):r(x,j,b,t,e,o);if(N!==void 0){if(N)continue;v=!1;break}if(w){if(!_U(e,function(T,S){if(!jU(w,S)&&(x===T||l(x,T,s,r,o)))return w.push(S)})){v=!1;break}}else if(!(x===j||l(x,j,s,r,o))){v=!1;break}}return o.delete(t),o.delete(e),v}function EU(t){var e=-1,s=Array(t.size);return t.forEach(function(r,l){s[++e]=[l,r]}),s}function AU(t){var e=-1,s=Array(t.size);return t.forEach(function(r){s[++e]=r}),s}var CU=1,kU=2,TU="[object Boolean]",OU="[object Date]",RU="[object Error]",MU="[object Map]",DU="[object Number]",LU="[object RegExp]",qU="[object Set]",PU="[object String]",IU="[object Symbol]",$U="[object ArrayBuffer]",UU="[object DataView]",Z_=Va?Va.prototype:void 0,Cg=Z_?Z_.valueOf:void 0;function zU(t,e,s,r,l,o,u){switch(s){case UU:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case $U:return!(t.byteLength!=e.byteLength||!o(new Mf(t),new Mf(e)));case TU:case OU:case DU:return Ed(+t,+e);case RU:return t.name==e.name&&t.message==e.message;case LU:case PU:return t==e+"";case MU:var h=EU;case qU:var f=r&CU;if(h||(h=AU),t.size!=e.size&&!f)return!1;var p=u.get(t);if(p)return p==e;r|=kU,u.set(t,e);var g=zS(h(t),h(e),r,l,o,u);return u.delete(t),g;case IU:if(Cg)return Cg.call(t)==Cg.call(e)}return!1}var BU=1,FU=Object.prototype,HU=FU.hasOwnProperty;function VU(t,e,s,r,l,o){var u=s&BU,h=x0(t),f=h.length,p=x0(e),g=p.length;if(f!=g&&!u)return!1;for(var b=f;b--;){var v=h[b];if(!(u?v in e:HU.call(e,v)))return!1}var w=o.get(t),x=o.get(e);if(w&&x)return w==e&&x==t;var j=!0;o.set(t,e),o.set(e,t);for(var N=u;++b<f;){v=h[b];var T=t[v],S=e[v];if(r)var k=u?r(S,T,v,e,t,o):r(T,S,v,t,e,o);if(!(k===void 0?T===S||l(T,S,s,r,o):k)){j=!1;break}N||(N=v=="constructor")}if(j&&!N){var Z=t.constructor,R=e.constructor;Z!=R&&"constructor"in t&&"constructor"in e&&!(typeof Z=="function"&&Z instanceof Z&&typeof R=="function"&&R instanceof R)&&(j=!1)}return o.delete(t),o.delete(e),j}var GU=1,Y_="[object Arguments]",K_="[object Array]",Yh="[object Object]",ZU=Object.prototype,W_=ZU.hasOwnProperty;function YU(t,e,s,r,l,o){var u=Pl(t),h=Pl(e),f=u?K_:xn(t),p=h?K_:xn(e);f=f==Y_?Yh:f,p=p==Y_?Yh:p;var g=f==Yh,b=p==Yh,v=f==p;if(v&&sd(t)){if(!sd(e))return!1;u=!0,g=!1}if(v&&!g)return o||(o=new si),u||qy(t)?zS(t,e,s,r,l,o):zU(t,e,f,s,r,l,o);if(!(s&GU)){var w=g&&W_.call(t,"__wrapped__"),x=b&&W_.call(e,"__wrapped__");if(w||x){var j=w?t.value():t,N=x?e.value():e;return o||(o=new si),l(j,N,s,r,o)}}return v?(o||(o=new si),VU(t,e,s,r,l,o)):!1}function BS(t,e,s,r,l){return t===e?!0:t==null||e==null||!Vi(t)&&!Vi(e)?t!==t&&e!==e:YU(t,e,s,r,BS,l)}function KU(t){return function(e,s,r){for(var l=-1,o=Object(e),u=r(e),h=u.length;h--;){var f=u[++l];if(s(o[f],f,o)===!1)break}return e}}var WU=KU();function j0(t,e,s){(s!==void 0&&!Ed(t[e],s)||s===void 0&&!(e in t))&&My(t,e,s)}function QU(t){return Vi(t)&&Jf(t)}function N0(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function XU(t){return wI(t,OS(t))}function JU(t,e,s,r,l,o,u){var h=N0(t,s),f=N0(e,s),p=u.get(f);if(p){j0(t,s,p);return}var g=o?o(h,f,s+"",t,e,u):void 0,b=g===void 0;if(b){var v=Pl(f),w=!v&&sd(f),x=!v&&!w&&qy(f);g=f,v||w||x?Pl(h)?g=h:QU(h)?g=oI(h):w?(b=!1,g=LS(f,!0)):x?(b=!1,g=qS(f,!0)):g=[]:Y9(f)||b0(f)?(g=h,b0(h)?g=XU(h):(!Ya(h)||Ry(h))&&(g=PS(f))):b=!1}b&&(u.set(f,g),l(g,f,r,o,u),u.delete(f)),j0(t,s,g)}function FS(t,e,s,r,l){t!==e&&WU(e,function(o,u){if(l||(l=new si),Ya(o))JU(t,e,u,s,FS,r,l);else{var h=r?r(N0(t,u),o,u+"",t,e,l):void 0;h===void 0&&(h=o),j0(t,u,h)}},OS)}function Iy(t,e){return BS(t,e)}var Ua=EI(function(t,e,s){FS(t,e,s)}),Be=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(Be||{});class ii{constructor(e,s,r={}){this.attrName=e,this.keyName=s;const l=Be.TYPE&Be.ATTRIBUTE;this.scope=r.scope!=null?r.scope&Be.LEVEL|l:Be.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(s=>s.name)}add(e,s){return this.canAdd(e,s)?(e.setAttribute(this.keyName,s),!0):!1}canAdd(e,s){return this.whitelist==null?!0:typeof s=="string"?this.whitelist.indexOf(s.replace(/["']/g,""))>-1:this.whitelist.indexOf(s)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const s=e.getAttribute(this.keyName);return this.canAdd(e,s)&&s?s:""}}class uc extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const HS=class S0{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,s=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(s){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,s)}return null}create(e,s,r){const l=this.query(s);if(l==null)throw new uc(`Unable to create ${s} blot`);const o=l,u=s instanceof Node||s.nodeType===Node.TEXT_NODE?s:o.create(r),h=new o(e,u,r);return S0.blots.set(h.domNode,h),h}find(e,s=!1){return S0.find(e,s)}query(e,s=Be.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&Be.LEVEL&Be.BLOCK?r=this.types.block:e&Be.LEVEL&Be.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(l=>(r=this.classes[l],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&s&Be.LEVEL&r.scope&&s&Be.TYPE&r.scope?r:null}register(...e){return e.map(s=>{const r="blotName"in s,l="attrName"in s;if(!r&&!l)throw new uc("Invalid definition");if(r&&s.blotName==="abstract")throw new uc("Cannot register abstract class");const o=r?s.blotName:l?s.attrName:void 0;return this.types[o]=s,l?typeof s.keyName=="string"&&(this.attributes[s.keyName]=s):r&&(s.className&&(this.classes[s.className]=s),s.tagName&&(Array.isArray(s.tagName)?s.tagName=s.tagName.map(u=>u.toUpperCase()):s.tagName=s.tagName.toUpperCase(),(Array.isArray(s.tagName)?s.tagName:[s.tagName]).forEach(u=>{(this.tags[u]==null||s.className==null)&&(this.tags[u]=s)}))),s})}};HS.blots=new WeakMap;let yc=HS;function Q_(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(s=>s.indexOf(`${e}-`)===0)}class ez extends ii{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(s=>s.split("-").slice(0,-1).join("-"))}add(e,s){return this.canAdd(e,s)?(this.remove(e),e.classList.add(`${this.keyName}-${s}`),!0):!1}remove(e){Q_(e,this.keyName).forEach(s=>{e.classList.remove(s)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const s=(Q_(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,s)?s:""}}const Mn=ez;function kg(t){const e=t.split("-"),s=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+s}class tz extends ii{static keys(e){return(e.getAttribute("style")||"").split(";").map(s=>s.split(":")[0].trim())}add(e,s){return this.canAdd(e,s)?(e.style[kg(this.keyName)]=s,!0):!1}remove(e){e.style[kg(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const s=e.style[kg(this.keyName)];return this.canAdd(e,s)?s:""}}const Ka=tz;class sz{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,s){s?e.add(this.domNode,s)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=yc.find(this.domNode);if(e==null)return;const s=ii.keys(this.domNode),r=Mn.keys(this.domNode),l=Ka.keys(this.domNode);s.concat(r).concat(l).forEach(o=>{const u=e.scroll.query(o,Be.ATTRIBUTE);u instanceof ii&&(this.attributes[u.attrName]=u)})}copy(e){Object.keys(this.attributes).forEach(s=>{const r=this.attributes[s].value(this.domNode);e.format(s,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(s=>{this.attributes[s].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,s)=>(e[s]=this.attributes[s].value(this.domNode),e),{})}}const sm=sz,VS=class{constructor(e,s){this.scroll=e,this.domNode=s,yc.blots.set(s,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new uc("Blot definition missing tagName");let s,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?s=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?s=document.createElement(r):s=document.createElement(this.tagName[0])):s=document.createElement(this.tagName),this.className&&s.classList.add(this.className),s}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),yc.blots.delete(this.domNode)}deleteAt(e,s){this.isolate(e,s).remove()}formatAt(e,s,r,l){const o=this.isolate(e,s);if(this.scroll.query(r,Be.BLOT)!=null&&l)o.wrap(r,l);else if(this.scroll.query(r,Be.ATTRIBUTE)!=null){const u=this.scroll.create(this.statics.scope);o.wrap(u),u.format(r,l)}}insertAt(e,s,r){const l=r==null?this.scroll.create("text",s):this.scroll.create(s,r),o=this.split(e);this.parent.insertBefore(l,o||void 0)}isolate(e,s){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(s),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,s){const r=typeof e=="string"?this.scroll.create(e,s):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,s){return e===0?this:this.next}update(e,s){}wrap(e,s){const r=typeof e=="string"?this.scroll.create(e,s):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new uc(`Cannot wrap ${e}`);return r.appendChild(this),r}};VS.blotName="abstract";let GS=VS;const ZS=class extends GS{static value(e){return!0}index(e,s){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(s,1):-1}position(e,s){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};ZS.scope=Be.INLINE_BLOT;let rz=ZS;const Js=rz;class nz{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const s=e.slice(1);this.append(...s)}}at(e){const s=this.iterator();let r=s();for(;r&&e>0;)e-=1,r=s();return r}contains(e){const s=this.iterator();let r=s();for(;r;){if(r===e)return!0;r=s()}return!1}indexOf(e){const s=this.iterator();let r=s(),l=0;for(;r;){if(r===e)return l;l+=1,r=s()}return-1}insertBefore(e,s){e!=null&&(this.remove(e),e.next=s,s!=null?(e.prev=s.prev,s.prev!=null&&(s.prev.next=e),s.prev=e,s===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let s=0,r=this.head;for(;r!=null;){if(r===e)return s;s+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const s=e;return e!=null&&(e=e.next),s}}find(e,s=!1){const r=this.iterator();let l=r();for(;l;){const o=l.length();if(e<o||s&&e===o&&(l.next==null||l.next.length()!==0))return[l,e];e-=o,l=r()}return[null,0]}forEach(e){const s=this.iterator();let r=s();for(;r;)e(r),r=s()}forEachAt(e,s,r){if(s<=0)return;const[l,o]=this.find(e);let u=e-o;const h=this.iterator(l);let f=h();for(;f&&u<e+s;){const p=f.length();e>u?r(f,e-u,Math.min(s,u+p-e)):r(f,0,Math.min(p,e+s-u)),u+=p,f=h()}}map(e){return this.reduce((s,r)=>(s.push(e(r)),s),[])}reduce(e,s){const r=this.iterator();let l=r();for(;l;)s=e(s,l),l=r();return s}}function X_(t,e){const s=e.find(t);if(s)return s;try{return e.create(t)}catch{const r=e.create(Be.INLINE);return Array.from(t.childNodes).forEach(l=>{r.domNode.appendChild(l)}),t.parentNode&&t.parentNode.replaceChild(r.domNode,t),r.attach(),r}}const YS=class Ma extends GS{constructor(e,s){super(e,s),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,Ma.uiClass&&this.uiNode.classList.add(Ma.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new nz,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const s=X_(e,this.scroll);this.insertBefore(s,this.children.head||void 0)}catch(s){if(s instanceof uc)return;throw s}})}deleteAt(e,s){if(e===0&&s===this.length())return this.remove();this.children.forEachAt(e,s,(r,l,o)=>{r.deleteAt(l,o)})}descendant(e,s=0){const[r,l]=this.children.find(s);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,l]:r instanceof Ma?r.descendant(e,l):[null,-1]}descendants(e,s=0,r=Number.MAX_VALUE){let l=[],o=r;return this.children.forEachAt(s,r,(u,h,f)=>{(e.blotName==null&&e(u)||e.blotName!=null&&u instanceof e)&&l.push(u),u instanceof Ma&&(l=l.concat(u.descendants(e,h,o))),o-=f}),l}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(s=>{e||this.statics.allowedChildren.some(r=>s instanceof r)||(s.statics.scope===Be.BLOCK_BLOT?(s.next!=null&&this.splitAfter(s),s.prev!=null&&this.splitAfter(s.prev),s.parent.unwrap(),e=!0):s instanceof Ma?s.unwrap():s.remove())})}formatAt(e,s,r,l){this.children.forEachAt(e,s,(o,u,h)=>{o.formatAt(u,h,r,l)})}insertAt(e,s,r){const[l,o]=this.children.find(e);if(l)l.insertAt(o,s,r);else{const u=r==null?this.scroll.create("text",s):this.scroll.create(s,r);this.appendChild(u)}}insertBefore(e,s){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,s||null),e.parent=this,s!=null&&(r=s.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,s)=>e+s.length(),0)}moveChildren(e,s){this.children.forEach(r=>{e.insertBefore(r,s)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s)}else this.remove()}path(e,s=!1){const[r,l]=this.children.find(e,s),o=[[this,e]];return r instanceof Ma?o.concat(r.path(l,s)):(r!=null&&o.push([r,l]),o)}removeChild(e){this.children.remove(e)}replaceWith(e,s){const r=typeof e=="string"?this.scroll.create(e,s):e;return r instanceof Ma&&this.moveChildren(r),super.replaceWith(r)}split(e,s=!1){if(!s){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(l,o,u)=>{const h=l.split(o,s);h!=null&&r.appendChild(h)}),r}splitAfter(e){const s=this.clone();for(;e.next!=null;)s.appendChild(e.next);return this.parent&&this.parent.insertBefore(s,this.next||void 0),s}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,s){const r=[],l=[];e.forEach(o=>{o.target===this.domNode&&o.type==="childList"&&(r.push(...o.addedNodes),l.push(...o.removedNodes))}),l.forEach(o=>{if(o.parentNode!=null&&o.tagName!=="IFRAME"&&document.body.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const u=this.scroll.find(o);u!=null&&(u.domNode.parentNode==null||u.domNode.parentNode===this.domNode)&&u.detach()}),r.filter(o=>o.parentNode===this.domNode&&o!==this.uiNode).sort((o,u)=>o===u?0:o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(o=>{let u=null;o.nextSibling!=null&&(u=this.scroll.find(o.nextSibling));const h=X_(o,this.scroll);(h.next!==u||h.next==null)&&(h.parent!=null&&h.parent.removeChild(this),this.insertBefore(h,u||void 0))}),this.enforceAllowedChildren()}};YS.uiClass="";let iz=YS;const An=iz;function az(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}const sc=class rc extends An{static create(e){return super.create(e)}static formats(e,s){const r=s.query(rc.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,s){super(e,s),this.attributes=new sm(this.domNode)}format(e,s){if(e===this.statics.blotName&&!s)this.children.forEach(r=>{r instanceof rc||(r=r.wrap(rc.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,Be.INLINE);if(r==null)return;r instanceof ii?this.attributes.attribute(r,s):s&&(e!==this.statics.blotName||this.formats()[e]!==s)&&this.replaceWith(e,s)}}formats(){const e=this.attributes.values(),s=this.statics.formats(this.domNode,this.scroll);return s!=null&&(e[this.statics.blotName]=s),e}formatAt(e,s,r,l){this.formats()[r]!=null||this.scroll.query(r,Be.ATTRIBUTE)?this.isolate(e,s).format(r,l):super.formatAt(e,s,r,l)}optimize(e){super.optimize(e);const s=this.formats();if(Object.keys(s).length===0)return this.unwrap();const r=this.next;r instanceof rc&&r.prev===this&&az(s,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,s){const r=super.replaceWith(e,s);return this.attributes.copy(r),r}update(e,s){super.update(e,s),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,s){const r=super.wrap(e,s);return r instanceof rc&&this.attributes.move(r),r}};sc.allowedChildren=[sc,Js],sc.blotName="inline",sc.scope=Be.INLINE_BLOT,sc.tagName="SPAN";let lz=sc;const $y=lz,nc=class E0 extends An{static create(e){return super.create(e)}static formats(e,s){const r=s.query(E0.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,s){super(e,s),this.attributes=new sm(this.domNode)}format(e,s){const r=this.scroll.query(e,Be.BLOCK);r!=null&&(r instanceof ii?this.attributes.attribute(r,s):e===this.statics.blotName&&!s?this.replaceWith(E0.blotName):s&&(e!==this.statics.blotName||this.formats()[e]!==s)&&this.replaceWith(e,s))}formats(){const e=this.attributes.values(),s=this.statics.formats(this.domNode,this.scroll);return s!=null&&(e[this.statics.blotName]=s),e}formatAt(e,s,r,l){this.scroll.query(r,Be.BLOCK)!=null?this.format(r,l):super.formatAt(e,s,r,l)}insertAt(e,s,r){if(r==null||this.scroll.query(s,Be.INLINE)!=null)super.insertAt(e,s,r);else{const l=this.split(e);if(l!=null){const o=this.scroll.create(s,r);l.parent.insertBefore(o,l)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,s){const r=super.replaceWith(e,s);return this.attributes.copy(r),r}update(e,s){super.update(e,s),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};nc.blotName="block",nc.scope=Be.BLOCK_BLOT,nc.tagName="P",nc.allowedChildren=[$y,nc,Js];let oz=nc;const id=oz,A0=class extends An{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,s){super.deleteAt(e,s),this.enforceAllowedChildren()}formatAt(e,s,r,l){super.formatAt(e,s,r,l),this.enforceAllowedChildren()}insertAt(e,s,r){super.insertAt(e,s,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};A0.blotName="container",A0.scope=Be.BLOCK_BLOT;let cz=A0;const rm=cz;class uz extends Js{static formats(e,s){}format(e,s){super.formatAt(0,this.length(),e,s)}formatAt(e,s,r,l){e===0&&s===this.length()?this.format(r,l):super.formatAt(e,s,r,l)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const $r=uz,dz={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},hz=100,ic=class extends An{constructor(e,s){super(null,s),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,dz),this.attach()}create(e,s){return this.registry.create(this,e,s)}find(e,s=!1){const r=this.registry.find(e,s);return r?r.scroll===this?r:s?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,s=Be.ANY){return this.registry.query(e,s)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,s){this.update(),e===0&&s===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,s)}formatAt(e,s,r,l){this.update(),super.formatAt(e,s,r,l)}insertAt(e,s,r){this.update(),super.insertAt(e,s,r)}optimize(e=[],s={}){super.optimize(s);const r=s.mutationsMap||new WeakMap;let l=Array.from(this.observer.takeRecords());for(;l.length>0;)e.push(l.pop());const o=(f,p=!0)=>{f==null||f===this||f.domNode.parentNode!=null&&(r.has(f.domNode)||r.set(f.domNode,[]),p&&o(f.parent))},u=f=>{r.has(f.domNode)&&(f instanceof An&&f.children.forEach(u),r.delete(f.domNode),f.optimize(s))};let h=e;for(let f=0;h.length>0;f+=1){if(f>=hz)throw new Error("[Parchment] Maximum optimize iterations reached");for(h.forEach(p=>{const g=this.find(p.target,!0);g!=null&&(g.domNode===p.target&&(p.type==="childList"?(o(this.find(p.previousSibling,!1)),Array.from(p.addedNodes).forEach(b=>{const v=this.find(b,!1);o(v,!1),v instanceof An&&v.children.forEach(w=>{o(w,!1)})})):p.type==="attributes"&&o(g.prev)),o(g))}),this.children.forEach(u),h=Array.from(this.observer.takeRecords()),l=h.slice();l.length>0;)e.push(l.pop())}}update(e,s={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(l=>{const o=this.find(l.target,!0);return o==null?null:r.has(o.domNode)?(r.get(o.domNode).push(l),null):(r.set(o.domNode,[l]),o)}).forEach(l=>{l!=null&&l!==this&&r.has(l.domNode)&&l.update(r.get(l.domNode)||[],s)}),s.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),s),this.optimize(e,s)}};ic.blotName="scroll",ic.defaultChild=id,ic.allowedChildren=[id,rm],ic.scope=Be.BLOCK_BLOT,ic.tagName="DIV";let fz=ic;const Uy=fz,C0=class KS extends Js{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,s){super(e,s),this.text=this.statics.value(this.domNode)}deleteAt(e,s){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+s)}index(e,s){return this.domNode===e?s:-1}insertAt(e,s,r){r==null?(this.text=this.text.slice(0,e)+s+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,s,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof KS&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,s=!1){return[this.domNode,e]}split(e,s=!1){if(!s){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,s){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};C0.blotName="text",C0.scope=Be.INLINE_BLOT;let mz=C0;const Lf=mz,pz=Object.freeze(Object.defineProperty({__proto__:null,Attributor:ii,AttributorStore:sm,BlockBlot:id,ClassAttributor:Mn,ContainerBlot:rm,EmbedBlot:$r,InlineBlot:$y,LeafBlot:Js,ParentBlot:An,Registry:yc,Scope:Be,ScrollBlot:Uy,StyleAttributor:Ka,TextBlot:Lf},Symbol.toStringTag,{value:"Module"}));var Kh={exports:{}},Tg,J_;function gz(){if(J_)return Tg;J_=1;var t=-1,e=1,s=0;function r(L,q,P,V,te){if(L===q)return L?[[s,L]]:[];if(P!=null){var $=C(L,q,P);if($)return $}var Y=h(L,q),W=L.substring(0,Y);L=L.substring(Y),q=q.substring(Y),Y=p(L,q);var oe=L.substring(L.length-Y);L=L.substring(0,L.length-Y),q=q.substring(0,q.length-Y);var I=l(L,q);return W&&I.unshift([s,W]),oe&&I.push([s,oe]),S(I,te),V&&b(I),I}function l(L,q){var P;if(!L)return[[e,q]];if(!q)return[[t,L]];var V=L.length>q.length?L:q,te=L.length>q.length?q:L,$=V.indexOf(te);if($!==-1)return P=[[e,V.substring(0,$)],[s,te],[e,V.substring($+te.length)]],L.length>q.length&&(P[0][0]=P[2][0]=t),P;if(te.length===1)return[[t,L],[e,q]];var Y=g(L,q);if(Y){var W=Y[0],oe=Y[1],I=Y[2],Q=Y[3],ie=Y[4],X=r(W,I),fe=r(oe,Q);return X.concat([[s,ie]],fe)}return o(L,q)}function o(L,q){for(var P=L.length,V=q.length,te=Math.ceil((P+V)/2),$=te,Y=2*te,W=new Array(Y),oe=new Array(Y),I=0;I<Y;I++)W[I]=-1,oe[I]=-1;W[$+1]=0,oe[$+1]=0;for(var Q=P-V,ie=Q%2!==0,X=0,fe=0,ve=0,Ee=0,Re=0;Re<te;Re++){for(var je=-Re+X;je<=Re-fe;je+=2){var Te=$+je,Me;je===-Re||je!==Re&&W[Te-1]<W[Te+1]?Me=W[Te+1]:Me=W[Te-1]+1;for(var Oe=Me-je;Me<P&&Oe<V&&L.charAt(Me)===q.charAt(Oe);)Me++,Oe++;if(W[Te]=Me,Me>P)fe+=2;else if(Oe>V)X+=2;else if(ie){var De=$+Q-je;if(De>=0&&De<Y&&oe[De]!==-1){var Ge=P-oe[De];if(Me>=Ge)return u(L,q,Me,Oe)}}}for(var Ye=-Re+ve;Ye<=Re-Ee;Ye+=2){var De=$+Ye,Ge;Ye===-Re||Ye!==Re&&oe[De-1]<oe[De+1]?Ge=oe[De+1]:Ge=oe[De-1]+1;for(var Xe=Ge-Ye;Ge<P&&Xe<V&&L.charAt(P-Ge-1)===q.charAt(V-Xe-1);)Ge++,Xe++;if(oe[De]=Ge,Ge>P)Ee+=2;else if(Xe>V)ve+=2;else if(!ie){var Te=$+Q-Ye;if(Te>=0&&Te<Y&&W[Te]!==-1){var Me=W[Te],Oe=$+Me-Te;if(Ge=P-Ge,Me>=Ge)return u(L,q,Me,Oe)}}}}return[[t,L],[e,q]]}function u(L,q,P,V){var te=L.substring(0,P),$=q.substring(0,V),Y=L.substring(P),W=q.substring(V),oe=r(te,$),I=r(Y,W);return oe.concat(I)}function h(L,q){if(!L||!q||L.charAt(0)!==q.charAt(0))return 0;for(var P=0,V=Math.min(L.length,q.length),te=V,$=0;P<te;)L.substring($,te)==q.substring($,te)?(P=te,$=P):V=te,te=Math.floor((V-P)/2+P);return k(L.charCodeAt(te-1))&&te--,te}function f(L,q){var P=L.length,V=q.length;if(P==0||V==0)return 0;P>V?L=L.substring(P-V):P<V&&(q=q.substring(0,P));var te=Math.min(P,V);if(L==q)return te;for(var $=0,Y=1;;){var W=L.substring(te-Y),oe=q.indexOf(W);if(oe==-1)return $;Y+=oe,(oe==0||L.substring(te-Y)==q.substring(0,Y))&&($=Y,Y++)}}function p(L,q){if(!L||!q||L.slice(-1)!==q.slice(-1))return 0;for(var P=0,V=Math.min(L.length,q.length),te=V,$=0;P<te;)L.substring(L.length-te,L.length-$)==q.substring(q.length-te,q.length-$)?(P=te,$=P):V=te,te=Math.floor((V-P)/2+P);return Z(L.charCodeAt(L.length-te))&&te--,te}function g(L,q){var P=L.length>q.length?L:q,V=L.length>q.length?q:L;if(P.length<4||V.length*2<P.length)return null;function te(fe,ve,Ee){for(var Re=fe.substring(Ee,Ee+Math.floor(fe.length/4)),je=-1,Te="",Me,Oe,De,Ge;(je=ve.indexOf(Re,je+1))!==-1;){var Ye=h(fe.substring(Ee),ve.substring(je)),Xe=p(fe.substring(0,Ee),ve.substring(0,je));Te.length<Xe+Ye&&(Te=ve.substring(je-Xe,je)+ve.substring(je,je+Ye),Me=fe.substring(0,Ee-Xe),Oe=fe.substring(Ee+Ye),De=ve.substring(0,je-Xe),Ge=ve.substring(je+Ye))}return Te.length*2>=fe.length?[Me,Oe,De,Ge,Te]:null}var $=te(P,V,Math.ceil(P.length/4)),Y=te(P,V,Math.ceil(P.length/2)),W;if(!$&&!Y)return null;Y?$?W=$[4].length>Y[4].length?$:Y:W=Y:W=$;var oe,I,Q,ie;L.length>q.length?(oe=W[0],I=W[1],Q=W[2],ie=W[3]):(Q=W[0],ie=W[1],oe=W[2],I=W[3]);var X=W[4];return[oe,I,Q,ie,X]}function b(L){for(var q=!1,P=[],V=0,te=null,$=0,Y=0,W=0,oe=0,I=0;$<L.length;)L[$][0]==s?(P[V++]=$,Y=oe,W=I,oe=0,I=0,te=L[$][1]):(L[$][0]==e?oe+=L[$][1].length:I+=L[$][1].length,te&&te.length<=Math.max(Y,W)&&te.length<=Math.max(oe,I)&&(L.splice(P[V-1],0,[t,te]),L[P[V-1]+1][0]=e,V--,V--,$=V>0?P[V-1]:-1,Y=0,W=0,oe=0,I=0,te=null,q=!0)),$++;for(q&&S(L),T(L),$=1;$<L.length;){if(L[$-1][0]==t&&L[$][0]==e){var Q=L[$-1][1],ie=L[$][1],X=f(Q,ie),fe=f(ie,Q);X>=fe?(X>=Q.length/2||X>=ie.length/2)&&(L.splice($,0,[s,ie.substring(0,X)]),L[$-1][1]=Q.substring(0,Q.length-X),L[$+1][1]=ie.substring(X),$++):(fe>=Q.length/2||fe>=ie.length/2)&&(L.splice($,0,[s,Q.substring(0,fe)]),L[$-1][0]=e,L[$-1][1]=ie.substring(0,ie.length-fe),L[$+1][0]=t,L[$+1][1]=Q.substring(fe),$++),$++}$++}}var v=/[^a-zA-Z0-9]/,w=/\s/,x=/[\r\n]/,j=/\n\r?\n$/,N=/^\r?\n\r?\n/;function T(L){function q(fe,ve){if(!fe||!ve)return 6;var Ee=fe.charAt(fe.length-1),Re=ve.charAt(0),je=Ee.match(v),Te=Re.match(v),Me=je&&Ee.match(w),Oe=Te&&Re.match(w),De=Me&&Ee.match(x),Ge=Oe&&Re.match(x),Ye=De&&fe.match(j),Xe=Ge&&ve.match(N);return Ye||Xe?5:De||Ge?4:je&&!Me&&Oe?3:Me||Oe?2:je||Te?1:0}for(var P=1;P<L.length-1;){if(L[P-1][0]==s&&L[P+1][0]==s){var V=L[P-1][1],te=L[P][1],$=L[P+1][1],Y=p(V,te);if(Y){var W=te.substring(te.length-Y);V=V.substring(0,V.length-Y),te=W+te.substring(0,te.length-Y),$=W+$}for(var oe=V,I=te,Q=$,ie=q(V,te)+q(te,$);te.charAt(0)===$.charAt(0);){V+=te.charAt(0),te=te.substring(1)+$.charAt(0),$=$.substring(1);var X=q(V,te)+q(te,$);X>=ie&&(ie=X,oe=V,I=te,Q=$)}L[P-1][1]!=oe&&(oe?L[P-1][1]=oe:(L.splice(P-1,1),P--),L[P][1]=I,Q?L[P+1][1]=Q:(L.splice(P+1,1),P--))}P++}}function S(L,q){L.push([s,""]);for(var P=0,V=0,te=0,$="",Y="",W;P<L.length;){if(P<L.length-1&&!L[P][1]){L.splice(P,1);continue}switch(L[P][0]){case e:te++,Y+=L[P][1],P++;break;case t:V++,$+=L[P][1],P++;break;case s:var oe=P-te-V-1;if(q){if(oe>=0&&U(L[oe][1])){var I=L[oe][1].slice(-1);if(L[oe][1]=L[oe][1].slice(0,-1),$=I+$,Y=I+Y,!L[oe][1]){L.splice(oe,1),P--;var Q=oe-1;L[Q]&&L[Q][0]===e&&(te++,Y=L[Q][1]+Y,Q--),L[Q]&&L[Q][0]===t&&(V++,$=L[Q][1]+$,Q--),oe=Q}}if(R(L[P][1])){var I=L[P][1].charAt(0);L[P][1]=L[P][1].slice(1),$+=I,Y+=I}}if(P<L.length-1&&!L[P][1]){L.splice(P,1);break}if($.length>0||Y.length>0){$.length>0&&Y.length>0&&(W=h(Y,$),W!==0&&(oe>=0?L[oe][1]+=Y.substring(0,W):(L.splice(0,0,[s,Y.substring(0,W)]),P++),Y=Y.substring(W),$=$.substring(W)),W=p(Y,$),W!==0&&(L[P][1]=Y.substring(Y.length-W)+L[P][1],Y=Y.substring(0,Y.length-W),$=$.substring(0,$.length-W)));var ie=te+V;$.length===0&&Y.length===0?(L.splice(P-ie,ie),P=P-ie):$.length===0?(L.splice(P-ie,ie,[e,Y]),P=P-ie+1):Y.length===0?(L.splice(P-ie,ie,[t,$]),P=P-ie+1):(L.splice(P-ie,ie,[t,$],[e,Y]),P=P-ie+2)}P!==0&&L[P-1][0]===s?(L[P-1][1]+=L[P][1],L.splice(P,1)):P++,te=0,V=0,$="",Y="";break}}L[L.length-1][1]===""&&L.pop();var X=!1;for(P=1;P<L.length-1;)L[P-1][0]===s&&L[P+1][0]===s&&(L[P][1].substring(L[P][1].length-L[P-1][1].length)===L[P-1][1]?(L[P][1]=L[P-1][1]+L[P][1].substring(0,L[P][1].length-L[P-1][1].length),L[P+1][1]=L[P-1][1]+L[P+1][1],L.splice(P-1,1),X=!0):L[P][1].substring(0,L[P+1][1].length)==L[P+1][1]&&(L[P-1][1]+=L[P+1][1],L[P][1]=L[P][1].substring(L[P+1][1].length)+L[P+1][1],L.splice(P+1,1),X=!0)),P++;X&&S(L,q)}function k(L){return L>=55296&&L<=56319}function Z(L){return L>=56320&&L<=57343}function R(L){return Z(L.charCodeAt(0))}function U(L){return k(L.charCodeAt(L.length-1))}function B(L){for(var q=[],P=0;P<L.length;P++)L[P][1].length>0&&q.push(L[P]);return q}function A(L,q,P,V){return U(L)||R(V)?null:B([[s,L],[t,q],[e,P],[s,V]])}function C(L,q,P){var V=typeof P=="number"?{index:P,length:0}:P.oldRange,te=typeof P=="number"?null:P.newRange,$=L.length,Y=q.length;if(V.length===0&&(te===null||te.length===0)){var W=V.index,oe=L.slice(0,W),I=L.slice(W),Q=te?te.index:null;e:{var ie=W+Y-$;if(Q!==null&&Q!==ie||ie<0||ie>Y)break e;var X=q.slice(0,ie),fe=q.slice(ie);if(fe!==I)break e;var ve=Math.min(W,ie),Ee=oe.slice(0,ve),Re=X.slice(0,ve);if(Ee!==Re)break e;var je=oe.slice(ve),Te=X.slice(ve);return A(Ee,je,Te,I)}e:{if(Q!==null&&Q!==W)break e;var Me=W,X=q.slice(0,Me),fe=q.slice(Me);if(X!==oe)break e;var Oe=Math.min($-Me,Y-Me),De=I.slice(I.length-Oe),Ge=fe.slice(fe.length-Oe);if(De!==Ge)break e;var je=I.slice(0,I.length-Oe),Te=fe.slice(0,fe.length-Oe);return A(oe,je,Te,De)}}if(V.length>0&&te&&te.length===0)e:{var Ee=L.slice(0,V.index),De=L.slice(V.index+V.length),ve=Ee.length,Oe=De.length;if(Y<ve+Oe)break e;var Re=q.slice(0,ve),Ge=q.slice(Y-Oe);if(Ee!==Re||De!==Ge)break e;var je=L.slice(ve,$-Oe),Te=q.slice(ve,Y-Oe);return A(Ee,je,Te,De)}return null}function z(L,q,P,V){return r(L,q,P,V,!0)}return z.INSERT=e,z.DELETE=t,z.EQUAL=s,Tg=z,Tg}var Uu={exports:{}};Uu.exports;var ej;function WS(){return ej||(ej=1,function(t,e){var s=200,r="__lodash_hash_undefined__",l=9007199254740991,o="[object Arguments]",u="[object Array]",h="[object Boolean]",f="[object Date]",p="[object Error]",g="[object Function]",b="[object GeneratorFunction]",v="[object Map]",w="[object Number]",x="[object Object]",j="[object Promise]",N="[object RegExp]",T="[object Set]",S="[object String]",k="[object Symbol]",Z="[object WeakMap]",R="[object ArrayBuffer]",U="[object DataView]",B="[object Float32Array]",A="[object Float64Array]",C="[object Int8Array]",z="[object Int16Array]",L="[object Int32Array]",q="[object Uint8Array]",P="[object Uint8ClampedArray]",V="[object Uint16Array]",te="[object Uint32Array]",$=/[\\^$.*+?()[\]{}|]/g,Y=/\w*$/,W=/^\[object .+?Constructor\]$/,oe=/^(?:0|[1-9]\d*)$/,I={};I[o]=I[u]=I[R]=I[U]=I[h]=I[f]=I[B]=I[A]=I[C]=I[z]=I[L]=I[v]=I[w]=I[x]=I[N]=I[T]=I[S]=I[k]=I[q]=I[P]=I[V]=I[te]=!0,I[p]=I[g]=I[Z]=!1;var Q=typeof qa=="object"&&qa&&qa.Object===Object&&qa,ie=typeof self=="object"&&self&&self.Object===Object&&self,X=Q||ie||Function("return this")(),fe=e&&!e.nodeType&&e,ve=fe&&!0&&t&&!t.nodeType&&t,Ee=ve&&ve.exports===fe;function Re(_,D){return _.set(D[0],D[1]),_}function je(_,D){return _.add(D),_}function Te(_,D){for(var G=-1,he=_?_.length:0;++G<he&&D(_[G],G,_)!==!1;);return _}function Me(_,D){for(var G=-1,he=D.length,et=_.length;++G<he;)_[et+G]=D[G];return _}function Oe(_,D,G,he){for(var et=-1,He=_?_.length:0;++et<He;)G=D(G,_[et],et,_);return G}function De(_,D){for(var G=-1,he=Array(_);++G<_;)he[G]=D(G);return he}function Ge(_,D){return _?.[D]}function Ye(_){var D=!1;if(_!=null&&typeof _.toString!="function")try{D=!!(_+"")}catch{}return D}function Xe(_){var D=-1,G=Array(_.size);return _.forEach(function(he,et){G[++D]=[et,he]}),G}function st(_,D){return function(G){return _(D(G))}}function gt(_){var D=-1,G=Array(_.size);return _.forEach(function(he){G[++D]=he}),G}var ot=Array.prototype,yt=Function.prototype,F=Object.prototype,se=X["__core-js_shared__"],ue=function(){var _=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),Ce=yt.toString,Ne=F.hasOwnProperty,Se=F.toString,ke=RegExp("^"+Ce.call(Ne).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Le=Ee?X.Buffer:void 0,Ke=X.Symbol,ft=X.Uint8Array,Wt=st(Object.getPrototypeOf,Object),Qt=Object.create,bs=F.propertyIsEnumerable,As=ot.splice,$s=Object.getOwnPropertySymbols,Gs=Le?Le.isBuffer:void 0,Ur=st(Object.keys,Object),ur=Ts(X,"DataView"),zr=Ts(X,"Map"),dr=Ts(X,"Promise"),oi=Ts(X,"Set"),ci=Ts(X,"WeakMap"),_r=Ts(Object,"create"),Wa=es(ur),Ln=es(zr),Wi=es(dr),ui=es(oi),di=es(ci),an=Ke?Ke.prototype:void 0,Jl=an?an.valueOf:void 0;function Cs(_){var D=-1,G=_?_.length:0;for(this.clear();++D<G;){var he=_[D];this.set(he[0],he[1])}}function fs(){this.__data__=_r?_r(null):{}}function ks(_){return this.has(_)&&delete this.__data__[_]}function qn(_){var D=this.__data__;if(_r){var G=D[_];return G===r?void 0:G}return Ne.call(D,_)?D[_]:void 0}function Qi(_){var D=this.__data__;return _r?D[_]!==void 0:Ne.call(D,_)}function Qa(_,D){var G=this.__data__;return G[_]=_r&&D===void 0?r:D,this}Cs.prototype.clear=fs,Cs.prototype.delete=ks,Cs.prototype.get=qn,Cs.prototype.has=Qi,Cs.prototype.set=Qa;function xs(_){var D=-1,G=_?_.length:0;for(this.clear();++D<G;){var he=_[D];this.set(he[0],he[1])}}function eo(){this.__data__=[]}function hi(_){var D=this.__data__,G=Un(D,_);if(G<0)return!1;var he=D.length-1;return G==he?D.pop():As.call(D,G,1),!0}function Xa(_){var D=this.__data__,G=Un(D,_);return G<0?void 0:D[G][1]}function Pn(_){return Un(this.__data__,_)>-1}function In(_,D){var G=this.__data__,he=Un(G,_);return he<0?G.push([_,D]):G[he][1]=D,this}xs.prototype.clear=eo,xs.prototype.delete=hi,xs.prototype.get=Xa,xs.prototype.has=Pn,xs.prototype.set=In;function Xt(_){var D=-1,G=_?_.length:0;for(this.clear();++D<G;){var he=_[D];this.set(he[0],he[1])}}function $n(){this.__data__={hash:new Cs,map:new(zr||xs),string:new Cs}}function Jt(_){return Bn(this,_).delete(_)}function to(_){return Bn(this,_).get(_)}function so(_){return Bn(this,_).has(_)}function ln(_,D){return Bn(this,_).set(_,D),this}Xt.prototype.clear=$n,Xt.prototype.delete=Jt,Xt.prototype.get=to,Xt.prototype.has=so,Xt.prototype.set=ln;function ns(_){this.__data__=new xs(_)}function Mc(){this.__data__=new xs}function ro(_){return this.__data__.delete(_)}function no(_){return this.__data__.get(_)}function Dc(_){return this.__data__.has(_)}function Xi(_,D){var G=this.__data__;if(G instanceof xs){var he=G.__data__;if(!zr||he.length<s-1)return he.push([_,D]),this;G=this.__data__=new Xt(he)}return G.set(_,D),this}ns.prototype.clear=Mc,ns.prototype.delete=ro,ns.prototype.get=no,ns.prototype.has=Dc,ns.prototype.set=Xi;function on(_,D){var G=ta(_)||Fn(_)?De(_.length,String):[],he=G.length,et=!!he;for(var He in _)Ne.call(_,He)&&!(et&&(He=="length"||Ic(He,he)))&&G.push(He);return G}function hr(_,D,G){var he=_[D];(!(Ne.call(_,D)&&il(he,G))||G===void 0&&!(D in _))&&(_[D]=G)}function Un(_,D){for(var G=_.length;G--;)if(il(_[G][0],D))return G;return-1}function jr(_,D){return _&&pi(D,ra(D),_)}function Br(_,D,G,he,et,He,mt){var ct;if(he&&(ct=He?he(_,et,He,mt):he(_)),ct!==void 0)return ct;if(!mr(_))return _;var Rt=ta(_);if(Rt){if(ct=oo(_),!D)return ao(_,ct)}else{var pt=Hr(_),vs=pt==g||pt==b;if(sa(_))return fi(_,D);if(pt==x||pt==o||vs&&!He){if(Ye(_))return He?_:{};if(ct=fr(vs?{}:_),!D)return zn(_,jr(ct,_))}else{if(!I[pt])return He?_:{};ct=Pc(_,pt,Br,D)}}mt||(mt=new ns);var Ks=mt.get(_);if(Ks)return Ks;if(mt.set(_,ct),!Rt)var is=G?lo(_):ra(_);return Te(is||_,function(Os,as){is&&(as=Os,Os=_[as]),hr(ct,as,Br(Os,D,G,he,as,_,mt))}),ct}function Ja(_){return mr(_)?Qt(_):{}}function el(_,D,G){var he=D(_);return ta(_)?he:Me(he,G(_))}function Lc(_){return Se.call(_)}function io(_){if(!mr(_)||nl(_))return!1;var D=dn(_)||Ye(_)?ke:W;return D.test(es(_))}function Zs(_){if(!ea(_))return Ur(_);var D=[];for(var G in Object(_))Ne.call(_,G)&&G!="constructor"&&D.push(G);return D}function fi(_,D){if(D)return _.slice();var G=new _.constructor(_.length);return _.copy(G),G}function tl(_){var D=new _.constructor(_.byteLength);return new ft(D).set(new ft(_)),D}function Fr(_,D){var G=D?tl(_.buffer):_.buffer;return new _.constructor(G,_.byteOffset,_.byteLength)}function sl(_,D,G){var he=D?G(Xe(_),!0):Xe(_);return Oe(he,Re,new _.constructor)}function mi(_){var D=new _.constructor(_.source,Y.exec(_));return D.lastIndex=_.lastIndex,D}function qc(_,D,G){var he=D?G(gt(_),!0):gt(_);return Oe(he,je,new _.constructor)}function Ys(_){return Jl?Object(Jl.call(_)):{}}function rl(_,D){var G=D?tl(_.buffer):_.buffer;return new _.constructor(G,_.byteOffset,_.length)}function ao(_,D){var G=-1,he=_.length;for(D||(D=Array(he));++G<he;)D[G]=_[G];return D}function pi(_,D,G,he){G||(G={});for(var et=-1,He=D.length;++et<He;){var mt=D[et],ct=void 0;hr(G,mt,ct===void 0?_[mt]:ct)}return G}function zn(_,D){return pi(_,cn(_),D)}function lo(_){return el(_,ra,cn)}function Bn(_,D){var G=_.__data__;return Ji(D)?G[typeof D=="string"?"string":"hash"]:G.map}function Ts(_,D){var G=Ge(_,D);return io(G)?G:void 0}var cn=$s?st($s,Object):na,Hr=Lc;(ur&&Hr(new ur(new ArrayBuffer(1)))!=U||zr&&Hr(new zr)!=v||dr&&Hr(dr.resolve())!=j||oi&&Hr(new oi)!=T||ci&&Hr(new ci)!=Z)&&(Hr=function(_){var D=Se.call(_),G=D==x?_.constructor:void 0,he=G?es(G):void 0;if(he)switch(he){case Wa:return U;case Ln:return v;case Wi:return j;case ui:return T;case di:return Z}return D});function oo(_){var D=_.length,G=_.constructor(D);return D&&typeof _[0]=="string"&&Ne.call(_,"index")&&(G.index=_.index,G.input=_.input),G}function fr(_){return typeof _.constructor=="function"&&!ea(_)?Ja(Wt(_)):{}}function Pc(_,D,G,he){var et=_.constructor;switch(D){case R:return tl(_);case h:case f:return new et(+_);case U:return Fr(_,he);case B:case A:case C:case z:case L:case q:case P:case V:case te:return rl(_,he);case v:return sl(_,he,G);case w:case S:return new et(_);case N:return mi(_);case T:return qc(_,he,G);case k:return Ys(_)}}function Ic(_,D){return D=D??l,!!D&&(typeof _=="number"||oe.test(_))&&_>-1&&_%1==0&&_<D}function Ji(_){var D=typeof _;return D=="string"||D=="number"||D=="symbol"||D=="boolean"?_!=="__proto__":_===null}function nl(_){return!!ue&&ue in _}function ea(_){var D=_&&_.constructor,G=typeof D=="function"&&D.prototype||F;return _===G}function es(_){if(_!=null){try{return Ce.call(_)}catch{}try{return _+""}catch{}}return""}function un(_){return Br(_,!0,!0)}function il(_,D){return _===D||_!==_&&D!==D}function Fn(_){return Nr(_)&&Ne.call(_,"callee")&&(!bs.call(_,"callee")||Se.call(_)==o)}var ta=Array.isArray;function Vr(_){return _!=null&&Sr(_.length)&&!dn(_)}function Nr(_){return gi(_)&&Vr(_)}var sa=Gs||ia;function dn(_){var D=mr(_)?Se.call(_):"";return D==g||D==b}function Sr(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=l}function mr(_){var D=typeof _;return!!_&&(D=="object"||D=="function")}function gi(_){return!!_&&typeof _=="object"}function ra(_){return Vr(_)?on(_):Zs(_)}function na(){return[]}function ia(){return!1}t.exports=un}(Uu,Uu.exports)),Uu.exports}var zu={exports:{}};zu.exports;var tj;function QS(){return tj||(tj=1,function(t,e){var s=200,r="__lodash_hash_undefined__",l=1,o=2,u=9007199254740991,h="[object Arguments]",f="[object Array]",p="[object AsyncFunction]",g="[object Boolean]",b="[object Date]",v="[object Error]",w="[object Function]",x="[object GeneratorFunction]",j="[object Map]",N="[object Number]",T="[object Null]",S="[object Object]",k="[object Promise]",Z="[object Proxy]",R="[object RegExp]",U="[object Set]",B="[object String]",A="[object Symbol]",C="[object Undefined]",z="[object WeakMap]",L="[object ArrayBuffer]",q="[object DataView]",P="[object Float32Array]",V="[object Float64Array]",te="[object Int8Array]",$="[object Int16Array]",Y="[object Int32Array]",W="[object Uint8Array]",oe="[object Uint8ClampedArray]",I="[object Uint16Array]",Q="[object Uint32Array]",ie=/[\\^$.*+?()[\]{}|]/g,X=/^\[object .+?Constructor\]$/,fe=/^(?:0|[1-9]\d*)$/,ve={};ve[P]=ve[V]=ve[te]=ve[$]=ve[Y]=ve[W]=ve[oe]=ve[I]=ve[Q]=!0,ve[h]=ve[f]=ve[L]=ve[g]=ve[q]=ve[b]=ve[v]=ve[w]=ve[j]=ve[N]=ve[S]=ve[R]=ve[U]=ve[B]=ve[z]=!1;var Ee=typeof qa=="object"&&qa&&qa.Object===Object&&qa,Re=typeof self=="object"&&self&&self.Object===Object&&self,je=Ee||Re||Function("return this")(),Te=e&&!e.nodeType&&e,Me=Te&&!0&&t&&!t.nodeType&&t,Oe=Me&&Me.exports===Te,De=Oe&&Ee.process,Ge=function(){try{return De&&De.binding&&De.binding("util")}catch{}}(),Ye=Ge&&Ge.isTypedArray;function Xe(_,D){for(var G=-1,he=_==null?0:_.length,et=0,He=[];++G<he;){var mt=_[G];D(mt,G,_)&&(He[et++]=mt)}return He}function st(_,D){for(var G=-1,he=D.length,et=_.length;++G<he;)_[et+G]=D[G];return _}function gt(_,D){for(var G=-1,he=_==null?0:_.length;++G<he;)if(D(_[G],G,_))return!0;return!1}function ot(_,D){for(var G=-1,he=Array(_);++G<_;)he[G]=D(G);return he}function yt(_){return function(D){return _(D)}}function F(_,D){return _.has(D)}function se(_,D){return _?.[D]}function ue(_){var D=-1,G=Array(_.size);return _.forEach(function(he,et){G[++D]=[et,he]}),G}function Ce(_,D){return function(G){return _(D(G))}}function Ne(_){var D=-1,G=Array(_.size);return _.forEach(function(he){G[++D]=he}),G}var Se=Array.prototype,ke=Function.prototype,Le=Object.prototype,Ke=je["__core-js_shared__"],ft=ke.toString,Wt=Le.hasOwnProperty,Qt=function(){var _=/[^.]+$/.exec(Ke&&Ke.keys&&Ke.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),bs=Le.toString,As=RegExp("^"+ft.call(Wt).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$s=Oe?je.Buffer:void 0,Gs=je.Symbol,Ur=je.Uint8Array,ur=Le.propertyIsEnumerable,zr=Se.splice,dr=Gs?Gs.toStringTag:void 0,oi=Object.getOwnPropertySymbols,ci=$s?$s.isBuffer:void 0,_r=Ce(Object.keys,Object),Wa=cn(je,"DataView"),Ln=cn(je,"Map"),Wi=cn(je,"Promise"),ui=cn(je,"Set"),di=cn(je,"WeakMap"),an=cn(Object,"create"),Jl=es(Wa),Cs=es(Ln),fs=es(Wi),ks=es(ui),qn=es(di),Qi=Gs?Gs.prototype:void 0,Qa=Qi?Qi.valueOf:void 0;function xs(_){var D=-1,G=_==null?0:_.length;for(this.clear();++D<G;){var he=_[D];this.set(he[0],he[1])}}function eo(){this.__data__=an?an(null):{},this.size=0}function hi(_){var D=this.has(_)&&delete this.__data__[_];return this.size-=D?1:0,D}function Xa(_){var D=this.__data__;if(an){var G=D[_];return G===r?void 0:G}return Wt.call(D,_)?D[_]:void 0}function Pn(_){var D=this.__data__;return an?D[_]!==void 0:Wt.call(D,_)}function In(_,D){var G=this.__data__;return this.size+=this.has(_)?0:1,G[_]=an&&D===void 0?r:D,this}xs.prototype.clear=eo,xs.prototype.delete=hi,xs.prototype.get=Xa,xs.prototype.has=Pn,xs.prototype.set=In;function Xt(_){var D=-1,G=_==null?0:_.length;for(this.clear();++D<G;){var he=_[D];this.set(he[0],he[1])}}function $n(){this.__data__=[],this.size=0}function Jt(_){var D=this.__data__,G=fi(D,_);if(G<0)return!1;var he=D.length-1;return G==he?D.pop():zr.call(D,G,1),--this.size,!0}function to(_){var D=this.__data__,G=fi(D,_);return G<0?void 0:D[G][1]}function so(_){return fi(this.__data__,_)>-1}function ln(_,D){var G=this.__data__,he=fi(G,_);return he<0?(++this.size,G.push([_,D])):G[he][1]=D,this}Xt.prototype.clear=$n,Xt.prototype.delete=Jt,Xt.prototype.get=to,Xt.prototype.has=so,Xt.prototype.set=ln;function ns(_){var D=-1,G=_==null?0:_.length;for(this.clear();++D<G;){var he=_[D];this.set(he[0],he[1])}}function Mc(){this.size=0,this.__data__={hash:new xs,map:new(Ln||Xt),string:new xs}}function ro(_){var D=Ts(this,_).delete(_);return this.size-=D?1:0,D}function no(_){return Ts(this,_).get(_)}function Dc(_){return Ts(this,_).has(_)}function Xi(_,D){var G=Ts(this,_),he=G.size;return G.set(_,D),this.size+=G.size==he?0:1,this}ns.prototype.clear=Mc,ns.prototype.delete=ro,ns.prototype.get=no,ns.prototype.has=Dc,ns.prototype.set=Xi;function on(_){var D=-1,G=_==null?0:_.length;for(this.__data__=new ns;++D<G;)this.add(_[D])}function hr(_){return this.__data__.set(_,r),this}function Un(_){return this.__data__.has(_)}on.prototype.add=on.prototype.push=hr,on.prototype.has=Un;function jr(_){var D=this.__data__=new Xt(_);this.size=D.size}function Br(){this.__data__=new Xt,this.size=0}function Ja(_){var D=this.__data__,G=D.delete(_);return this.size=D.size,G}function el(_){return this.__data__.get(_)}function Lc(_){return this.__data__.has(_)}function io(_,D){var G=this.__data__;if(G instanceof Xt){var he=G.__data__;if(!Ln||he.length<s-1)return he.push([_,D]),this.size=++G.size,this;G=this.__data__=new ns(he)}return G.set(_,D),this.size=G.size,this}jr.prototype.clear=Br,jr.prototype.delete=Ja,jr.prototype.get=el,jr.prototype.has=Lc,jr.prototype.set=io;function Zs(_,D){var G=Fn(_),he=!G&&il(_),et=!G&&!he&&Vr(_),He=!G&&!he&&!et&&gi(_),mt=G||he||et||He,ct=mt?ot(_.length,String):[],Rt=ct.length;for(var pt in _)Wt.call(_,pt)&&!(mt&&(pt=="length"||et&&(pt=="offset"||pt=="parent")||He&&(pt=="buffer"||pt=="byteLength"||pt=="byteOffset")||Pc(pt,Rt)))&&ct.push(pt);return ct}function fi(_,D){for(var G=_.length;G--;)if(un(_[G][0],D))return G;return-1}function tl(_,D,G){var he=D(_);return Fn(_)?he:st(he,G(_))}function Fr(_){return _==null?_===void 0?C:T:dr&&dr in Object(_)?Hr(_):ea(_)}function sl(_){return mr(_)&&Fr(_)==h}function mi(_,D,G,he,et){return _===D?!0:_==null||D==null||!mr(_)&&!mr(D)?_!==_&&D!==D:qc(_,D,G,he,mi,et)}function qc(_,D,G,he,et,He){var mt=Fn(_),ct=Fn(D),Rt=mt?f:fr(_),pt=ct?f:fr(D);Rt=Rt==h?S:Rt,pt=pt==h?S:pt;var vs=Rt==S,Ks=pt==S,is=Rt==pt;if(is&&Vr(_)){if(!Vr(D))return!1;mt=!0,vs=!1}if(is&&!vs)return He||(He=new jr),mt||gi(_)?pi(_,D,G,he,et,He):zn(_,D,Rt,G,he,et,He);if(!(G&l)){var Os=vs&&Wt.call(_,"__wrapped__"),as=Ks&&Wt.call(D,"__wrapped__");if(Os||as){var Hn=Os?_.value():_,hn=as?D.value():D;return He||(He=new jr),et(Hn,hn,G,he,He)}}return is?(He||(He=new jr),lo(_,D,G,he,et,He)):!1}function Ys(_){if(!Sr(_)||Ji(_))return!1;var D=sa(_)?As:X;return D.test(es(_))}function rl(_){return mr(_)&&dn(_.length)&&!!ve[Fr(_)]}function ao(_){if(!nl(_))return _r(_);var D=[];for(var G in Object(_))Wt.call(_,G)&&G!="constructor"&&D.push(G);return D}function pi(_,D,G,he,et,He){var mt=G&l,ct=_.length,Rt=D.length;if(ct!=Rt&&!(mt&&Rt>ct))return!1;var pt=He.get(_);if(pt&&He.get(D))return pt==D;var vs=-1,Ks=!0,is=G&o?new on:void 0;for(He.set(_,D),He.set(D,_);++vs<ct;){var Os=_[vs],as=D[vs];if(he)var Hn=mt?he(as,Os,vs,D,_,He):he(Os,as,vs,_,D,He);if(Hn!==void 0){if(Hn)continue;Ks=!1;break}if(is){if(!gt(D,function(hn,yi){if(!F(is,yi)&&(Os===hn||et(Os,hn,G,he,He)))return is.push(yi)})){Ks=!1;break}}else if(!(Os===as||et(Os,as,G,he,He))){Ks=!1;break}}return He.delete(_),He.delete(D),Ks}function zn(_,D,G,he,et,He,mt){switch(G){case q:if(_.byteLength!=D.byteLength||_.byteOffset!=D.byteOffset)return!1;_=_.buffer,D=D.buffer;case L:return!(_.byteLength!=D.byteLength||!He(new Ur(_),new Ur(D)));case g:case b:case N:return un(+_,+D);case v:return _.name==D.name&&_.message==D.message;case R:case B:return _==D+"";case j:var ct=ue;case U:var Rt=he&l;if(ct||(ct=Ne),_.size!=D.size&&!Rt)return!1;var pt=mt.get(_);if(pt)return pt==D;he|=o,mt.set(_,D);var vs=pi(ct(_),ct(D),he,et,He,mt);return mt.delete(_),vs;case A:if(Qa)return Qa.call(_)==Qa.call(D)}return!1}function lo(_,D,G,he,et,He){var mt=G&l,ct=Bn(_),Rt=ct.length,pt=Bn(D),vs=pt.length;if(Rt!=vs&&!mt)return!1;for(var Ks=Rt;Ks--;){var is=ct[Ks];if(!(mt?is in D:Wt.call(D,is)))return!1}var Os=He.get(_);if(Os&&He.get(D))return Os==D;var as=!0;He.set(_,D),He.set(D,_);for(var Hn=mt;++Ks<Rt;){is=ct[Ks];var hn=_[is],yi=D[is];if(he)var Rd=mt?he(yi,hn,is,D,_,He):he(hn,yi,is,_,D,He);if(!(Rd===void 0?hn===yi||et(hn,yi,G,he,He):Rd)){as=!1;break}Hn||(Hn=is=="constructor")}if(as&&!Hn){var co=_.constructor,al=D.constructor;co!=al&&"constructor"in _&&"constructor"in D&&!(typeof co=="function"&&co instanceof co&&typeof al=="function"&&al instanceof al)&&(as=!1)}return He.delete(_),He.delete(D),as}function Bn(_){return tl(_,ra,oo)}function Ts(_,D){var G=_.__data__;return Ic(D)?G[typeof D=="string"?"string":"hash"]:G.map}function cn(_,D){var G=se(_,D);return Ys(G)?G:void 0}function Hr(_){var D=Wt.call(_,dr),G=_[dr];try{_[dr]=void 0;var he=!0}catch{}var et=bs.call(_);return he&&(D?_[dr]=G:delete _[dr]),et}var oo=oi?function(_){return _==null?[]:(_=Object(_),Xe(oi(_),function(D){return ur.call(_,D)}))}:na,fr=Fr;(Wa&&fr(new Wa(new ArrayBuffer(1)))!=q||Ln&&fr(new Ln)!=j||Wi&&fr(Wi.resolve())!=k||ui&&fr(new ui)!=U||di&&fr(new di)!=z)&&(fr=function(_){var D=Fr(_),G=D==S?_.constructor:void 0,he=G?es(G):"";if(he)switch(he){case Jl:return q;case Cs:return j;case fs:return k;case ks:return U;case qn:return z}return D});function Pc(_,D){return D=D??u,!!D&&(typeof _=="number"||fe.test(_))&&_>-1&&_%1==0&&_<D}function Ic(_){var D=typeof _;return D=="string"||D=="number"||D=="symbol"||D=="boolean"?_!=="__proto__":_===null}function Ji(_){return!!Qt&&Qt in _}function nl(_){var D=_&&_.constructor,G=typeof D=="function"&&D.prototype||Le;return _===G}function ea(_){return bs.call(_)}function es(_){if(_!=null){try{return ft.call(_)}catch{}try{return _+""}catch{}}return""}function un(_,D){return _===D||_!==_&&D!==D}var il=sl(function(){return arguments}())?sl:function(_){return mr(_)&&Wt.call(_,"callee")&&!ur.call(_,"callee")},Fn=Array.isArray;function ta(_){return _!=null&&dn(_.length)&&!sa(_)}var Vr=ci||ia;function Nr(_,D){return mi(_,D)}function sa(_){if(!Sr(_))return!1;var D=Fr(_);return D==w||D==x||D==p||D==Z}function dn(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=u}function Sr(_){var D=typeof _;return _!=null&&(D=="object"||D=="function")}function mr(_){return _!=null&&typeof _=="object"}var gi=Ye?yt(Ye):rl;function ra(_){return ta(_)?Zs(_):ao(_)}function na(){return[]}function ia(){return!1}t.exports=Nr}(zu,zu.exports)),zu.exports}var Wh={},sj;function yz(){if(sj)return Wh;sj=1,Object.defineProperty(Wh,"__esModule",{value:!0});const t=WS(),e=QS();var s;return function(r){function l(f={},p={},g=!1){typeof f!="object"&&(f={}),typeof p!="object"&&(p={});let b=t(p);g||(b=Object.keys(b).reduce((v,w)=>(b[w]!=null&&(v[w]=b[w]),v),{}));for(const v in f)f[v]!==void 0&&p[v]===void 0&&(b[v]=f[v]);return Object.keys(b).length>0?b:void 0}r.compose=l;function o(f={},p={}){typeof f!="object"&&(f={}),typeof p!="object"&&(p={});const g=Object.keys(f).concat(Object.keys(p)).reduce((b,v)=>(e(f[v],p[v])||(b[v]=p[v]===void 0?null:p[v]),b),{});return Object.keys(g).length>0?g:void 0}r.diff=o;function u(f={},p={}){f=f||{};const g=Object.keys(p).reduce((b,v)=>(p[v]!==f[v]&&f[v]!==void 0&&(b[v]=p[v]),b),{});return Object.keys(f).reduce((b,v)=>(f[v]!==p[v]&&p[v]===void 0&&(b[v]=null),b),g)}r.invert=u;function h(f,p,g=!1){if(typeof f!="object")return p;if(typeof p!="object")return;if(!g)return p;const b=Object.keys(p).reduce((v,w)=>(f[w]===void 0&&(v[w]=p[w]),v),{});return Object.keys(b).length>0?b:void 0}r.transform=h}(s||(s={})),Wh.default=s,Wh}var Qh={},rj;function XS(){if(rj)return Qh;rj=1,Object.defineProperty(Qh,"__esModule",{value:!0});var t;return function(e){function s(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=s}(t||(t={})),Qh.default=t,Qh}var Xh={},nj;function bz(){if(nj)return Xh;nj=1,Object.defineProperty(Xh,"__esModule",{value:!0});const t=XS();class e{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const l=this.ops[this.index];if(l){const o=this.offset,u=t.default.length(l);if(r>=u-o?(r=u-o,this.index+=1,this.offset=0):this.offset+=r,typeof l.delete=="number")return{delete:r};{const h={};return l.attributes&&(h.attributes=l.attributes),typeof l.retain=="number"?h.retain=r:typeof l.retain=="object"&&l.retain!==null?h.retain=l.retain:typeof l.insert=="string"?h.insert=l.insert.substr(o,r):h.insert=l.insert,h}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?t.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,l=this.index,o=this.next(),u=this.ops.slice(this.index);return this.offset=r,this.index=l,[o].concat(u)}}else return[]}}return Xh.default=e,Xh}var ij;function xz(){return ij||(ij=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const s=gz(),r=WS(),l=QS(),o=yz();e.AttributeMap=o.default;const u=XS();e.Op=u.default;const h=bz();e.OpIterator=h.default;const f="\0",p=(b,v)=>{if(typeof b!="object"||b===null)throw new Error(`cannot retain a ${typeof b}`);if(typeof v!="object"||v===null)throw new Error(`cannot retain a ${typeof v}`);const w=Object.keys(b)[0];if(!w||w!==Object.keys(v)[0])throw new Error(`embed types not matched: ${w} != ${Object.keys(v)[0]}`);return[w,b[w],v[w]]};class g{constructor(v){Array.isArray(v)?this.ops=v:v!=null&&Array.isArray(v.ops)?this.ops=v.ops:this.ops=[]}static registerEmbed(v,w){this.handlers[v]=w}static unregisterEmbed(v){delete this.handlers[v]}static getHandler(v){const w=this.handlers[v];if(!w)throw new Error(`no handlers for embed type "${v}"`);return w}insert(v,w){const x={};return typeof v=="string"&&v.length===0?this:(x.insert=v,w!=null&&typeof w=="object"&&Object.keys(w).length>0&&(x.attributes=w),this.push(x))}delete(v){return v<=0?this:this.push({delete:v})}retain(v,w){if(typeof v=="number"&&v<=0)return this;const x={retain:v};return w!=null&&typeof w=="object"&&Object.keys(w).length>0&&(x.attributes=w),this.push(x)}push(v){let w=this.ops.length,x=this.ops[w-1];if(v=r(v),typeof x=="object"){if(typeof v.delete=="number"&&typeof x.delete=="number")return this.ops[w-1]={delete:x.delete+v.delete},this;if(typeof x.delete=="number"&&v.insert!=null&&(w-=1,x=this.ops[w-1],typeof x!="object"))return this.ops.unshift(v),this;if(l(v.attributes,x.attributes)){if(typeof v.insert=="string"&&typeof x.insert=="string")return this.ops[w-1]={insert:x.insert+v.insert},typeof v.attributes=="object"&&(this.ops[w-1].attributes=v.attributes),this;if(typeof v.retain=="number"&&typeof x.retain=="number")return this.ops[w-1]={retain:x.retain+v.retain},typeof v.attributes=="object"&&(this.ops[w-1].attributes=v.attributes),this}}return w===this.ops.length?this.ops.push(v):this.ops.splice(w,0,v),this}chop(){const v=this.ops[this.ops.length-1];return v&&typeof v.retain=="number"&&!v.attributes&&this.ops.pop(),this}filter(v){return this.ops.filter(v)}forEach(v){this.ops.forEach(v)}map(v){return this.ops.map(v)}partition(v){const w=[],x=[];return this.forEach(j=>{(v(j)?w:x).push(j)}),[w,x]}reduce(v,w){return this.ops.reduce(v,w)}changeLength(){return this.reduce((v,w)=>w.insert?v+u.default.length(w):w.delete?v-w.delete:v,0)}length(){return this.reduce((v,w)=>v+u.default.length(w),0)}slice(v=0,w=1/0){const x=[],j=new h.default(this.ops);let N=0;for(;N<w&&j.hasNext();){let T;N<v?T=j.next(v-N):(T=j.next(w-N),x.push(T)),N+=u.default.length(T)}return new g(x)}compose(v){const w=new h.default(this.ops),x=new h.default(v.ops),j=[],N=x.peek();if(N!=null&&typeof N.retain=="number"&&N.attributes==null){let S=N.retain;for(;w.peekType()==="insert"&&w.peekLength()<=S;)S-=w.peekLength(),j.push(w.next());N.retain-S>0&&x.next(N.retain-S)}const T=new g(j);for(;w.hasNext()||x.hasNext();)if(x.peekType()==="insert")T.push(x.next());else if(w.peekType()==="delete")T.push(w.next());else{const S=Math.min(w.peekLength(),x.peekLength()),k=w.next(S),Z=x.next(S);if(Z.retain){const R={};if(typeof k.retain=="number")R.retain=typeof Z.retain=="number"?S:Z.retain;else if(typeof Z.retain=="number")k.retain==null?R.insert=k.insert:R.retain=k.retain;else{const B=k.retain==null?"insert":"retain",[A,C,z]=p(k[B],Z.retain),L=g.getHandler(A);R[B]={[A]:L.compose(C,z,B==="retain")}}const U=o.default.compose(k.attributes,Z.attributes,typeof k.retain=="number");if(U&&(R.attributes=U),T.push(R),!x.hasNext()&&l(T.ops[T.ops.length-1],R)){const B=new g(w.rest());return T.concat(B).chop()}}else typeof Z.delete=="number"&&(typeof k.retain=="number"||typeof k.retain=="object"&&k.retain!==null)&&T.push(Z)}return T.chop()}concat(v){const w=new g(this.ops.slice());return v.ops.length>0&&(w.push(v.ops[0]),w.ops=w.ops.concat(v.ops.slice(1))),w}diff(v,w){if(this.ops===v.ops)return new g;const x=[this,v].map(k=>k.map(Z=>{if(Z.insert!=null)return typeof Z.insert=="string"?Z.insert:f;const R=k===v?"on":"with";throw new Error("diff() called "+R+" non-document")}).join("")),j=new g,N=s(x[0],x[1],w,!0),T=new h.default(this.ops),S=new h.default(v.ops);return N.forEach(k=>{let Z=k[1].length;for(;Z>0;){let R=0;switch(k[0]){case s.INSERT:R=Math.min(S.peekLength(),Z),j.push(S.next(R));break;case s.DELETE:R=Math.min(Z,T.peekLength()),T.next(R),j.delete(R);break;case s.EQUAL:R=Math.min(T.peekLength(),S.peekLength(),Z);const U=T.next(R),B=S.next(R);l(U.insert,B.insert)?j.retain(R,o.default.diff(U.attributes,B.attributes)):j.push(B).delete(R);break}Z-=R}}),j.chop()}eachLine(v,w=`
`){const x=new h.default(this.ops);let j=new g,N=0;for(;x.hasNext();){if(x.peekType()!=="insert")return;const T=x.peek(),S=u.default.length(T)-x.peekLength(),k=typeof T.insert=="string"?T.insert.indexOf(w,S)-S:-1;if(k<0)j.push(x.next());else if(k>0)j.push(x.next(k));else{if(v(j,x.next(1).attributes||{},N)===!1)return;N+=1,j=new g}}j.length()>0&&v(j,{},N)}invert(v){const w=new g;return this.reduce((x,j)=>{if(j.insert)w.delete(u.default.length(j));else{if(typeof j.retain=="number"&&j.attributes==null)return w.retain(j.retain),x+j.retain;if(j.delete||typeof j.retain=="number"){const N=j.delete||j.retain;return v.slice(x,x+N).forEach(S=>{j.delete?w.push(S):j.retain&&j.attributes&&w.retain(u.default.length(S),o.default.invert(j.attributes,S.attributes))}),x+N}else if(typeof j.retain=="object"&&j.retain!==null){const N=v.slice(x,x+1),T=new h.default(N.ops).next(),[S,k,Z]=p(j.retain,T.insert),R=g.getHandler(S);return w.retain({[S]:R.invert(k,Z)},o.default.invert(j.attributes,T.attributes)),x+1}}return x},0),w.chop()}transform(v,w=!1){if(w=!!w,typeof v=="number")return this.transformPosition(v,w);const x=v,j=new h.default(this.ops),N=new h.default(x.ops),T=new g;for(;j.hasNext()||N.hasNext();)if(j.peekType()==="insert"&&(w||N.peekType()!=="insert"))T.retain(u.default.length(j.next()));else if(N.peekType()==="insert")T.push(N.next());else{const S=Math.min(j.peekLength(),N.peekLength()),k=j.next(S),Z=N.next(S);if(k.delete)continue;if(Z.delete)T.push(Z);else{const R=k.retain,U=Z.retain;let B=typeof U=="object"&&U!==null?U:S;if(typeof R=="object"&&R!==null&&typeof U=="object"&&U!==null){const A=Object.keys(R)[0];if(A===Object.keys(U)[0]){const C=g.getHandler(A);C&&(B={[A]:C.transform(R[A],U[A],w)})}}T.retain(B,o.default.transform(k.attributes,Z.attributes,w))}}return T.chop()}transformPosition(v,w=!1){w=!!w;const x=new h.default(this.ops);let j=0;for(;x.hasNext()&&j<=v;){const N=x.peekLength(),T=x.peekType();if(x.next(),T==="delete"){v-=Math.min(N,v-j);continue}else T==="insert"&&(j<v||!w)&&(v+=N);j+=N}return v}}g.Op=u.default,g.OpIterator=h.default,g.AttributeMap=o.default,g.handlers={},e.default=g,t.exports=g,t.exports.default=g}(Kh,Kh.exports)),Kh.exports}var sn=xz();const ze=od(sn);class Dn extends $r{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Dn.blotName="break";Dn.tagName="BR";let kn=class extends Lf{};function nm(t){return t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}class ir extends $y{static allowedChildren=[ir,Dn,$r,kn];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,s){const r=ir.order.indexOf(e),l=ir.order.indexOf(s);return r>=0||l>=0?r-l:e===s?0:e<s?-1:1}formatAt(e,s,r,l){if(ir.compare(this.statics.blotName,r)<0&&this.scroll.query(r,Be.BLOT)){const o=this.isolate(e,s);l&&o.wrap(r,l)}else super.formatAt(e,s,r,l)}optimize(e){if(super.optimize(e),this.parent instanceof ir&&ir.compare(this.statics.blotName,this.parent.statics.blotName)>0){const s=this.parent.isolate(this.offset(),this.length());this.moveChildren(s),s.wrap(this)}}}const aj=1;class Vs extends id{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=JS(this)),this.cache.delta}deleteAt(e,s){super.deleteAt(e,s),this.cache={}}formatAt(e,s,r,l){s<=0||(this.scroll.query(r,Be.BLOCK)?e+s===this.length()&&this.format(r,l):super.formatAt(e,Math.min(s,this.length()-e-1),r,l),this.cache={})}insertAt(e,s,r){if(r!=null){super.insertAt(e,s,r),this.cache={};return}if(s.length===0)return;const l=s.split(`
`),o=l.shift();o.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let u=this;l.reduce((h,f)=>(u=u.split(h,!0),u.insertAt(0,f),f.length),e+o.length)}insertBefore(e,s){const{head:r}=this.children;super.insertBefore(e,s),r instanceof Dn&&r.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+aj),this.cache.length}moveChildren(e,s){super.moveChildren(e,s),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s&&(e===0||e>=this.length()-aj)){const l=this.clone();return e===0?(this.parent.insertBefore(l,this),this):(this.parent.insertBefore(l,this.next),l)}const r=super.split(e,s);return this.cache={},r}}Vs.blotName="block";Vs.tagName="P";Vs.defaultChild=Dn;Vs.allowedChildren=[Dn,ir,$r,kn];class tn extends $r{attach(){super.attach(),this.attributes=new sm(this.domNode)}delta(){return new ze().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,s){const r=this.scroll.query(e,Be.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,s)}formatAt(e,s,r,l){this.format(r,l)}insertAt(e,s,r){if(r!=null){super.insertAt(e,s,r);return}const l=s.split(`
`),o=l.pop(),u=l.map(f=>{const p=this.scroll.create(Vs.blotName);return p.insertAt(0,f),p}),h=this.split(e);u.forEach(f=>{this.parent.insertBefore(f,h)}),o&&this.parent.insertBefore(this.scroll.create("text",o),h)}}tn.scope=Be.BLOCK_BLOT;function JS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(Js).reduce((s,r)=>r.length()===0?s:s.insert(r.value(),Jr(r,{},e)),new ze).insert(`
`,Jr(t))}function Jr(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},s&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:Jr(t.parent,e,s)}class vn extends $r{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,s,r){super(e,s),this.selection=r,this.textNode=document.createTextNode(vn.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,s){if(this.savedLength!==0){super.format(e,s);return}let r=this,l=0;for(;r!=null&&r.statics.scope!==Be.BLOCK_BLOT;)l+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=vn.CONTENTS.length,r.optimize(),r.formatAt(l,vn.CONTENTS.length,e,s),this.savedLength=0)}index(e,s){return e===this.textNode?0:super.index(e,s)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const s=this.prev instanceof kn?this.prev:null,r=s?s.length():0,l=this.next instanceof kn?this.next:null,o=l?l.text:"",{textNode:u}=this,h=u.data.split(vn.CONTENTS).join("");u.data=vn.CONTENTS;let f;if(s)f=s,(h||l)&&(s.insertAt(s.length(),h+o),l&&l.remove());else if(l)f=l,l.insertAt(0,h);else{const p=document.createTextNode(h);f=this.scroll.create(p),this.parent.insertBefore(f,this)}if(this.remove(),e){const p=(v,w)=>s&&v===s.domNode?w:v===u?r+w-1:l&&v===l.domNode?r+h.length+w:null,g=p(e.start.node,e.start.offset),b=p(e.end.node,e.end.offset);if(g!==null&&b!==null)return{startNode:f.domNode,startOffset:g,endNode:f.domNode,endOffset:b}}return null}update(e,s){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(s.range=r)}}optimize(e){super.optimize(e);let{parent:s}=this;for(;s;){if(s.domNode.tagName==="A"){this.savedLength=vn.CONTENTS.length,s.isolate(this.offset(s),this.length()).unwrap(),this.savedLength=0;break}s=s.parent}}value(){return""}}var Og={exports:{}},lj;function vz(){return lj||(lj=1,function(t){var e=Object.prototype.hasOwnProperty,s="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(s=!1));function l(f,p,g){this.fn=f,this.context=p,this.once=g||!1}function o(f,p,g,b,v){if(typeof g!="function")throw new TypeError("The listener must be a function");var w=new l(g,b||f,v),x=s?s+p:p;return f._events[x]?f._events[x].fn?f._events[x]=[f._events[x],w]:f._events[x].push(w):(f._events[x]=w,f._eventsCount++),f}function u(f,p){--f._eventsCount===0?f._events=new r:delete f._events[p]}function h(){this._events=new r,this._eventsCount=0}h.prototype.eventNames=function(){var p=[],g,b;if(this._eventsCount===0)return p;for(b in g=this._events)e.call(g,b)&&p.push(s?b.slice(1):b);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(g)):p},h.prototype.listeners=function(p){var g=s?s+p:p,b=this._events[g];if(!b)return[];if(b.fn)return[b.fn];for(var v=0,w=b.length,x=new Array(w);v<w;v++)x[v]=b[v].fn;return x},h.prototype.listenerCount=function(p){var g=s?s+p:p,b=this._events[g];return b?b.fn?1:b.length:0},h.prototype.emit=function(p,g,b,v,w,x){var j=s?s+p:p;if(!this._events[j])return!1;var N=this._events[j],T=arguments.length,S,k;if(N.fn){switch(N.once&&this.removeListener(p,N.fn,void 0,!0),T){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,g),!0;case 3:return N.fn.call(N.context,g,b),!0;case 4:return N.fn.call(N.context,g,b,v),!0;case 5:return N.fn.call(N.context,g,b,v,w),!0;case 6:return N.fn.call(N.context,g,b,v,w,x),!0}for(k=1,S=new Array(T-1);k<T;k++)S[k-1]=arguments[k];N.fn.apply(N.context,S)}else{var Z=N.length,R;for(k=0;k<Z;k++)switch(N[k].once&&this.removeListener(p,N[k].fn,void 0,!0),T){case 1:N[k].fn.call(N[k].context);break;case 2:N[k].fn.call(N[k].context,g);break;case 3:N[k].fn.call(N[k].context,g,b);break;case 4:N[k].fn.call(N[k].context,g,b,v);break;default:if(!S)for(R=1,S=new Array(T-1);R<T;R++)S[R-1]=arguments[R];N[k].fn.apply(N[k].context,S)}}return!0},h.prototype.on=function(p,g,b){return o(this,p,g,b,!1)},h.prototype.once=function(p,g,b){return o(this,p,g,b,!0)},h.prototype.removeListener=function(p,g,b,v){var w=s?s+p:p;if(!this._events[w])return this;if(!g)return u(this,w),this;var x=this._events[w];if(x.fn)x.fn===g&&(!v||x.once)&&(!b||x.context===b)&&u(this,w);else{for(var j=0,N=[],T=x.length;j<T;j++)(x[j].fn!==g||v&&!x[j].once||b&&x[j].context!==b)&&N.push(x[j]);N.length?this._events[w]=N.length===1?N[0]:N:u(this,w)}return this},h.prototype.removeAllListeners=function(p){var g;return p?(g=s?s+p:p,this._events[g]&&u(this,g)):(this._events=new r,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=s,h.EventEmitter=h,t.exports=h}(Og)),Og.exports}var wz=vz();const _z=od(wz),k0=new WeakMap,T0=["error","warn","log","info"];let O0="warn";function eE(t){if(O0&&T0.indexOf(t)<=T0.indexOf(O0)){for(var e=arguments.length,s=new Array(e>1?e-1:0),r=1;r<e;r++)s[r-1]=arguments[r];console[t](...s)}}function Ki(t){return T0.reduce((e,s)=>(e[s]=eE.bind(console,s,t),e),{})}Ki.level=t=>{O0=t};eE.level=Ki.level;const Rg=Ki("quill:events"),jz=["selectionchange","mousedown","mouseup","click"];jz.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(l=>{const o=k0.get(l);o&&o.emitter&&o.emitter.handleDOM(...s)})})});class Ue extends _z{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Rg.error)}emit(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return Rg.log.call(Rg,...s),super.emit(...s)}handleDOM(e){for(var s=arguments.length,r=new Array(s>1?s-1:0),l=1;l<s;l++)r[l-1]=arguments[l];(this.domListeners[e.type]||[]).forEach(o=>{let{node:u,handler:h}=o;(e.target===u||u.contains(e.target))&&h(e,...r)})}listenDOM(e,s,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:s,handler:r})}}const Mg=Ki("quill:selection");class $l{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=s}}class Nz{constructor(e,s){this.emitter=s,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new $l(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Ue.sources.USER),1)}),this.emitter.on(Ue.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(Ue.events.SCROLL_UPDATE,(l,o)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const u=o.some(h=>h.type==="characterData"||h.type==="childList"||h.type==="attributes"&&h.target===this.root);this.update(u?Ue.sources.SILENT:l)}catch{}})}),this.emitter.on(Ue.events.SCROLL_OPTIMIZE,(r,l)=>{if(l.range){const{startNode:o,startOffset:u,endNode:h,endOffset:f}=l.range;this.setNativeRange(o,u,h,f),this.update(Ue.sources.SILENT)}}),this.update(Ue.sources.SILENT)}handleComposition(){this.emitter.on(Ue.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Ue.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Ue.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,s){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,Be.BLOCK))){if(r.start.node!==this.cursor.textNode){const l=this.scroll.find(r.start.node,!1);if(l==null)return;if(l instanceof Js){const o=l.split(r.start.offset);l.parent.insertBefore(this.cursor,o)}else l.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,s),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),s=Math.min(e+s,r-1)-e;let l,[o,u]=this.scroll.leaf(e);if(o==null)return null;if(s>0&&u===o.length()){const[g]=this.scroll.leaf(e+1);if(g){const[b]=this.scroll.line(e),[v]=this.scroll.line(e+1);b===v&&(o=g,u=0)}}[l,u]=o.position(u,!0);const h=document.createRange();if(s>0)return h.setStart(l,u),[o,u]=this.scroll.leaf(e+s),o==null?null:([l,u]=o.position(u,!0),h.setEnd(l,u),h.getBoundingClientRect());let f="left",p;if(l instanceof Text){if(!l.data.length)return null;u<l.data.length?(h.setStart(l,u),h.setEnd(l,u+1)):(h.setStart(l,u-1),h.setEnd(l,u),f="right"),p=h.getBoundingClientRect()}else{if(!(o.domNode instanceof Element))return null;p=o.domNode.getBoundingClientRect(),u>0&&(f="right")}return{bottom:p.top+p.height,height:p.height,left:p[f],right:p[f],top:p.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const s=e.getRangeAt(0);if(s==null)return null;const r=this.normalizeNative(s);return Mg.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const s=this.getNativeRange();return s==null?[null,null]:[this.normalizedToRange(s),s]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Dg(this.root,document.activeElement)}normalizedToRange(e){const s=[[e.start.node,e.start.offset]];e.native.collapsed||s.push([e.end.node,e.end.offset]);const r=s.map(u=>{const[h,f]=u,p=this.scroll.find(h,!0),g=p.offset(this.scroll);return f===0?g:p instanceof Js?g+p.index(h,f):g+p.length()}),l=Math.min(Math.max(...r),this.scroll.length()-1),o=Math.min(l,...r);return new $l(o,l-o)}normalizeNative(e){if(!Dg(this.root,e.startContainer)||!e.collapsed&&!Dg(this.root,e.endContainer))return null;const s={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[s.start,s.end].forEach(r=>{let{node:l,offset:o}=r;for(;!(l instanceof Text)&&l.childNodes.length>0;)if(l.childNodes.length>o)l=l.childNodes[o],o=0;else if(l.childNodes.length===o)l=l.lastChild,l instanceof Text?o=l.data.length:l.childNodes.length>0?o=l.childNodes.length:o=l.childNodes.length+1;else break;r.node=l,r.offset=o}),s}rangeToNative(e){const s=this.scroll.length(),r=(l,o)=>{l=Math.min(s-1,l);const[u,h]=this.scroll.leaf(l);return u?u.position(h,o):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:s,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Mg.info("setNativeRange",e,s,r,l),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const u=document.getSelection();if(u!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:h}=this.getNativeRange()||{};if(h==null||o||e!==h.startContainer||s!==h.startOffset||r!==h.endContainer||l!==h.endOffset){e instanceof Element&&e.tagName==="BR"&&(s=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(l=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const f=document.createRange();f.setStart(e,s),f.setEnd(r,l),u.removeAllRanges(),u.addRange(f)}}else u.removeAllRanges(),this.root.blur()}setRange(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ue.sources.API;if(typeof s=="string"&&(r=s,s=!1),Mg.info("setRange",e),e!=null){const l=this.rangeToNative(e);this.setNativeRange(...l,s)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ue.sources.USER;const s=this.lastRange,[r,l]=this.getRange();if(this.lastRange=r,this.lastNative=l,this.lastRange!=null&&(this.savedRange=this.lastRange),!Iy(s,this.lastRange)){if(!this.composing&&l!=null&&l.native.collapsed&&l.start.node!==this.cursor.textNode){const u=this.cursor.restore();u&&this.setNativeRange(u.startNode,u.startOffset,u.endNode,u.endOffset)}const o=[Ue.events.SELECTION_CHANGE,cc(this.lastRange),cc(s),e];this.emitter.emit(Ue.events.EDITOR_CHANGE,...o),e!==Ue.sources.SILENT&&this.emitter.emit(...o)}}}function Dg(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const Sz=/^[ -~]*$/;class Ez{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let s=this.scroll.length();this.scroll.batchStart();const r=oj(e),l=new ze;return Cz(r.ops.slice()).reduce((u,h)=>{const f=sn.Op.length(h);let p=h.attributes||{},g=!1,b=!1;if(h.insert!=null){if(l.retain(f),typeof h.insert=="string"){const x=h.insert;b=!x.endsWith(`
`)&&(s<=u||!!this.scroll.descendant(tn,u)[0]),this.scroll.insertAt(u,x);const[j,N]=this.scroll.line(u);let T=Ua({},Jr(j));if(j instanceof Vs){const[S]=j.descendant(Js,N);S&&(T=Ua(T,Jr(S)))}p=sn.AttributeMap.diff(T,p)||{}}else if(typeof h.insert=="object"){const x=Object.keys(h.insert)[0];if(x==null)return u;const j=this.scroll.query(x,Be.INLINE)!=null;if(j)(s<=u||this.scroll.descendant(tn,u)[0])&&(b=!0);else if(u>0){const[N,T]=this.scroll.descendant(Js,u-1);N instanceof kn?N.value()[T]!==`
`&&(g=!0):N instanceof $r&&N.statics.scope===Be.INLINE_BLOT&&(g=!0)}if(this.scroll.insertAt(u,x,h.insert[x]),j){const[N]=this.scroll.descendant(Js,u);if(N){const T=Ua({},Jr(N));p=sn.AttributeMap.diff(T,p)||{}}}}s+=f}else if(l.push(h),h.retain!==null&&typeof h.retain=="object"){const x=Object.keys(h.retain)[0];if(x==null)return u;this.scroll.updateEmbedAt(u,x,h.retain[x])}Object.keys(p).forEach(x=>{this.scroll.formatAt(u,f,x,p[x])});const v=g?1:0,w=b?1:0;return s+=v+w,l.retain(v),l.delete(w),u+f+v+w},0),l.reduce((u,h)=>typeof h.delete=="number"?(this.scroll.deleteAt(u,h.delete),u):u+sn.Op.length(h),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,s){return this.scroll.deleteAt(e,s),this.update(new ze().retain(e).delete(s))}formatLine(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(o=>{this.scroll.lines(e,Math.max(s,1)).forEach(u=>{u.format(o,r[o])})}),this.scroll.optimize();const l=new ze().retain(e).retain(s,cc(r));return this.update(l)}formatText(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(o=>{this.scroll.formatAt(e,s,o,r[o])});const l=new ze().retain(e).retain(s,cc(r));return this.update(l)}getContents(e,s){return this.delta.slice(e,e+s)}getDelta(){return this.scroll.lines().reduce((e,s)=>e.concat(s.delta()),new ze)}getFormat(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],l=[];s===0?this.scroll.path(e).forEach(h=>{const[f]=h;f instanceof Vs?r.push(f):f instanceof Js&&l.push(f)}):(r=this.scroll.lines(e,s),l=this.scroll.descendants(Js,e,s));const[o,u]=[r,l].map(h=>{const f=h.shift();if(f==null)return{};let p=Jr(f);for(;Object.keys(p).length>0;){const g=h.shift();if(g==null)return p;p=Az(Jr(g),p)}return p});return{...o,...u}}getHTML(e,s){const[r,l]=this.scroll.line(e);if(r){const o=r.length();return r.length()>=l+s&&!(l===0&&s===o)?ad(r,l,s,!0):ad(this.scroll,e,s,!0)}return""}getText(e,s){return this.getContents(e,s).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,s){const r=oj(s),l=new ze().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(l)}insertEmbed(e,s,r){return this.scroll.insertAt(e,s,r),this.update(new ze().retain(e).insert({[s]:r}))}insertText(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return s=s.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,s),Object.keys(r).forEach(l=>{this.scroll.formatAt(e,s.length,l,r[l])}),this.update(new ze().retain(e).insert(s,cc(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==Vs.blotName)return!1;const s=e;return s.children.length>1?!1:s.children.head instanceof Dn}removeFormat(e,s){const r=this.getText(e,s),[l,o]=this.scroll.line(e+s);let u=0,h=new ze;l!=null&&(u=l.length()-o,h=l.delta().slice(o,o+u-1).insert(`
`));const p=this.getContents(e,s+u).diff(new ze().insert(r).concat(h)),g=new ze().retain(e).concat(p);return this.applyDelta(g)}update(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const l=this.delta;if(s.length===1&&s[0].type==="characterData"&&s[0].target.data.match(Sz)&&this.scroll.find(s[0].target)){const o=this.scroll.find(s[0].target),u=Jr(o),h=o.offset(this.scroll),f=s[0].oldValue.replace(vn.CONTENTS,""),p=new ze().insert(f),g=new ze().insert(o.value()),b=r&&{oldRange:cj(r.oldRange,-h),newRange:cj(r.newRange,-h)};e=new ze().retain(h).concat(p.diff(g,b)).reduce((w,x)=>x.insert?w.insert(x.insert,u):w.push(x),new ze),this.delta=l.compose(e)}else this.delta=this.getDelta(),(!e||!Iy(l.compose(e),this.delta))&&(e=l.diff(this.delta,r));return e}}function ac(t,e,s){if(t.length===0){const[w]=Lg(s.pop());return e<=0?`</li></${w}>`:`</li></${w}>${ac([],e-1,s)}`}const[{child:r,offset:l,length:o,indent:u,type:h},...f]=t,[p,g]=Lg(h);if(u>e)return s.push(h),u===e+1?`<${p}><li${g}>${ad(r,l,o)}${ac(f,u,s)}`:`<${p}><li>${ac(t,e+1,s)}`;const b=s[s.length-1];if(u===e&&h===b)return`</li><li${g}>${ad(r,l,o)}${ac(f,u,s)}`;const[v]=Lg(s.pop());return`</li></${v}>${ac(t,e-1,s)}`}function ad(t,e,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,s);if(t instanceof kn)return nm(t.value().slice(e,e+s));if(t instanceof An){if(t.statics.blotName==="list-container"){const p=[];return t.children.forEachAt(e,s,(g,b,v)=>{const w="formats"in g&&typeof g.formats=="function"?g.formats():{};p.push({child:g,offset:b,length:v,indent:w.indent||0,type:w.list})}),ac(p,-1,[])}const l=[];if(t.children.forEachAt(e,s,(p,g,b)=>{l.push(ad(p,g,b))}),r||t.statics.blotName==="list")return l.join("");const{outerHTML:o,innerHTML:u}=t.domNode,[h,f]=o.split(`>${u}<`);return h==="<table"?`<table style="border: 1px solid #000;">${l.join("")}<${f}`:`${h}>${l.join("")}<${f}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function Az(t,e){return Object.keys(e).reduce((s,r)=>{if(t[r]==null)return s;const l=e[r];return l===t[r]?s[r]=l:Array.isArray(l)?l.indexOf(t[r])<0?s[r]=l.concat([t[r]]):s[r]=l:s[r]=[l,t[r]],s},{})}function Lg(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function oj(t){return t.reduce((e,s)=>{if(typeof s.insert=="string"){const r=s.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,s.attributes)}return e.push(s)},new ze)}function cj(t,e){let{index:s,length:r}=t;return new $l(s+e,r)}function Cz(t){const e=[];return t.forEach(s=>{typeof s.insert=="string"?s.insert.split(`
`).forEach((l,o)=>{o&&e.push({insert:`
`,attributes:s.attributes}),l&&e.push({insert:l,attributes:s.attributes})}):e.push(s)}),e}class li{static DEFAULTS={};constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=s}}const Jh="\uFEFF";class zy extends $r{constructor(e,s){super(e,s),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(Jh),this.rightGuard=document.createTextNode(Jh),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,s){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,s)}restore(e){let s=null,r;const l=e.data.split(Jh).join("");if(e===this.leftGuard)if(this.prev instanceof kn){const o=this.prev.length();this.prev.insertAt(o,l),s={startNode:this.prev.domNode,startOffset:o+l.length}}else r=document.createTextNode(l),this.parent.insertBefore(this.scroll.create(r),this),s={startNode:r,startOffset:l.length};else e===this.rightGuard&&(this.next instanceof kn?(this.next.insertAt(0,l),s={startNode:this.next.domNode,startOffset:l.length}):(r=document.createTextNode(l),this.parent.insertBefore(this.scroll.create(r),this.next),s={startNode:r,startOffset:l.length}));return e.data=Jh,s}update(e,s){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const l=this.restore(r.target);l&&(s.range=l)}})}}class kz{isComposing=!1;constructor(e,s){this.scroll=e,this.emitter=s,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const s=e.target instanceof Node?this.scroll.find(e.target,!0):null;s&&!(s instanceof zy)&&(this.emitter.emit(Ue.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(Ue.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(Ue.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(Ue.events.COMPOSITION_END,e),this.isComposing=!1}}class Rc{static DEFAULTS={modules:{}};static themes={default:Rc};modules={};constructor(e,s){this.quill=e,this.options=s}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const s=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new s(this.quill,this.options.modules[e]||{}),this.modules[e]}}const Tz=t=>t.parentElement||t.getRootNode().host||null,Oz=t=>{const e=t.getBoundingClientRect(),s="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,r="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*s,bottom:e.top+t.clientHeight*r,left:e.left}},ef=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},uj=(t,e,s,r,l,o)=>t<s&&e>r?0:t<s?-(s-t+l):e>r?e-t>r-s?t+l-s:e-r+o:0,Rz=(t,e)=>{const s=t.ownerDocument;let r=e,l=t;for(;l;){const o=l===s.body,u=o?{top:0,right:window.visualViewport?.width??s.documentElement.clientWidth,bottom:window.visualViewport?.height??s.documentElement.clientHeight,left:0}:Oz(l),h=getComputedStyle(l),f=uj(r.left,r.right,u.left,u.right,ef(h.scrollPaddingLeft),ef(h.scrollPaddingRight)),p=uj(r.top,r.bottom,u.top,u.bottom,ef(h.scrollPaddingTop),ef(h.scrollPaddingBottom));if(f||p)if(o)s.defaultView?.scrollBy(f,p);else{const{scrollLeft:g,scrollTop:b}=l;p&&(l.scrollTop+=p),f&&(l.scrollLeft+=f);const v=l.scrollLeft-g,w=l.scrollTop-b;r={left:r.left-v,top:r.top-w,right:r.right-v,bottom:r.bottom-w}}l=o||h.position==="fixed"?null:Tz(l)}},Mz=100,Dz=["block","break","cursor","inline","scroll","text"],Lz=(t,e,s)=>{const r=new yc;return Dz.forEach(l=>{const o=e.query(l);o&&r.register(o)}),t.forEach(l=>{let o=e.query(l);o||s.error(`Cannot register "${l}" specified in "formats" config. Are you sure it was registered?`);let u=0;for(;o;)if(r.register(o),o="blotName"in o?o.requiredContainer??null:null,u+=1,u>Mz){s.error(`Cycle detected in registering blot requiredContainer: "${l}"`);break}}),r},dc=Ki("quill"),tf=new yc;An.uiClass="ql-ui";class pe{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:tf,theme:"default"};static events=Ue.events;static sources=Ue.sources;static version="2.0.2";static imports={delta:ze,parchment:pz,"core/module":li,"core/theme":Rc};static debug(e){e===!0&&(e="log"),Ki.level(e)}static find(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return k0.get(e)||tf.find(e,s)}static import(e){return this.imports[e]==null&&dc.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],s=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,s):Object.keys(e).forEach(l=>{this.register(l,e[l],s)})}else{const e=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&dc.warn(`Overwriting ${e} with`,s),this.imports[e]=s,(e.startsWith("blots/")||e.startsWith("formats/"))&&s&&typeof s!="boolean"&&s.blotName!=="abstract"&&tf.register(s),typeof s.register=="function"&&s.register(tf)}}constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=qz(e,s),this.container=this.options.container,this.container==null){dc.error("Invalid Quill container",e);return}this.options.debug&&pe.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",k0.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Ue;const l=Uy.blotName,o=this.options.registry.query(l);if(!o||!("blotName"in o))throw new Error(`Cannot initialize Quill without "${l}" blot`);if(this.scroll=new o(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Ez(this.scroll),this.selection=new Nz(this.scroll,this.emitter),this.composition=new kz(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Ue.events.EDITOR_CHANGE,u=>{u===Ue.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Ue.events.SCROLL_UPDATE,(u,h)=>{const f=this.selection.lastRange,[p]=this.selection.getRange(),g=f&&p?{oldRange:f,newRange:p}:void 0;gn.call(this,()=>this.editor.update(null,h,g),u)}),this.emitter.on(Ue.events.SCROLL_EMBED_UPDATE,(u,h)=>{const f=this.selection.lastRange,[p]=this.selection.getRange(),g=f&&p?{oldRange:f,newRange:p}:void 0;gn.call(this,()=>{const b=new ze().retain(u.offset(this)).retain({[u.statics.blotName]:h});return this.editor.update(b,[],g)},pe.sources.USER)}),r){const u=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(u)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,s),e}blur(){this.selection.setRange(null)}deleteText(e,s,r){return[e,s,,r]=Di(e,s,r),gn.call(this,()=>this.editor.deleteText(e,s),r,e,-1*s)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const s=e();return this.allowReadOnlyEdits=!1,s}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ue.sources.API;return gn.call(this,()=>{const l=this.getSelection(!0);let o=new ze;if(l==null)return o;if(this.scroll.query(e,Be.BLOCK))o=this.editor.formatLine(l.index,l.length,{[e]:s});else{if(l.length===0)return this.selection.format(e,s),o;o=this.editor.formatText(l.index,l.length,{[e]:s})}return this.setSelection(l,Ue.sources.SILENT),o},r)}formatLine(e,s,r,l,o){let u;return[e,s,u,o]=Di(e,s,r,l,o),gn.call(this,()=>this.editor.formatLine(e,s,u),o,e,0)}formatText(e,s,r,l,o){let u;return[e,s,u,o]=Di(e,s,r,l,o),gn.call(this,()=>this.editor.formatText(e,s,u),o,e,0)}getBounds(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,s):r=this.selection.getBounds(e.index,e.length),!r)return null;const l=this.container.getBoundingClientRect();return{bottom:r.bottom-l.top,height:r.height,left:r.left-l.left,right:r.right-l.left,top:r.top-l.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,s]=Di(e,s),this.editor.getContents(e,s)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,s):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,s)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(s=s??this.getLength()-e),[e,s]=Di(e,s),this.editor.getHTML(e,s)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(s=s??this.getLength()-e),[e,s]=Di(e,s),this.editor.getText(e,s)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,s,r){let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:pe.sources.API;return gn.call(this,()=>this.editor.insertEmbed(e,s,r),l,e)}insertText(e,s,r,l,o){let u;return[e,,u,o]=Di(e,0,r,l,o),gn.call(this,()=>this.editor.insertText(e,s,u),o,e,s.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,s,r){return[e,s,,r]=Di(e,s,r),gn.call(this,()=>this.editor.removeFormat(e,s),r,e)}scrollRectIntoView(e){Rz(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,s=e&&this.selection.getBounds(e.index,e.length);s&&this.scrollRectIntoView(s)}setContents(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ue.sources.API;return gn.call(this,()=>{e=new ze(e);const r=this.getLength(),l=this.editor.deleteText(0,r),o=this.editor.insertContents(0,e),u=this.editor.deleteText(this.getLength()-1,1);return l.compose(o).compose(u)},s)}setSelection(e,s,r){e==null?this.selection.setRange(null,s||pe.sources.API):([e,s,,r]=Di(e,s,r),this.selection.setRange(new $l(Math.max(0,e),s),r),r!==Ue.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ue.sources.API;const r=new ze().insert(e);return this.setContents(r,s)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ue.sources.USER;const s=this.scroll.update(e);return this.selection.update(e),s}updateContents(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ue.sources.API;return gn.call(this,()=>(e=new ze(e),this.editor.applyDelta(e)),s,!0)}}function dj(t){return typeof t=="string"?document.querySelector(t):t}function qg(t){return Object.entries(t??{}).reduce((e,s)=>{let[r,l]=s;return{...e,[r]:l===!0?{}:l}},{})}function hj(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function qz(t,e){const s=dj(t);if(!s)throw new Error("Invalid Quill container");const l=!e.theme||e.theme===pe.DEFAULTS.theme?Rc:pe.import(`themes/${e.theme}`);if(!l)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:o,...u}=pe.DEFAULTS,{modules:h,...f}=l.DEFAULTS;let p=qg(e.modules);p!=null&&p.toolbar&&p.toolbar.constructor!==Object&&(p={...p,toolbar:{container:p.toolbar}});const g=Ua({},qg(o),qg(h),p),b={...u,...hj(f),...hj(e)};let v=e.registry;return v?e.formats&&dc.warn('Ignoring "formats" option because "registry" is specified'):v=e.formats?Lz(e.formats,b.registry,dc):b.registry,{...b,registry:v,container:s,theme:l,modules:Object.entries(g).reduce((w,x)=>{let[j,N]=x;if(!N)return w;const T=pe.import(`modules/${j}`);return T==null?(dc.error(`Cannot load ${j} module. Are you sure you registered it?`),w):{...w,[j]:Ua({},T.DEFAULTS||{},N)}},{}),bounds:dj(b.bounds)}}function gn(t,e,s,r){if(!this.isEnabled()&&e===Ue.sources.USER&&!this.allowReadOnlyEdits)return new ze;let l=s==null?null:this.getSelection();const o=this.editor.delta,u=t();if(l!=null&&(s===!0&&(s=l.index),r==null?l=fj(l,u,e):r!==0&&(l=fj(l,s,r,e)),this.setSelection(l,Ue.sources.SILENT)),u.length()>0){const h=[Ue.events.TEXT_CHANGE,u,o,e];this.emitter.emit(Ue.events.EDITOR_CHANGE,...h),e!==Ue.sources.SILENT&&this.emitter.emit(...h)}return u}function Di(t,e,s,r,l){let o={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(l=r,r=s,s=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(l=r,r=s,s=e,e=0),typeof s=="object"?(o=s,l=r):typeof s=="string"&&(r!=null?o[s]=r:l=s),l=l||Ue.sources.API,[t,e,o,l]}function fj(t,e,s,r){const l=typeof s=="number"?s:0;if(t==null)return null;let o,u;return e&&typeof e.transformPosition=="function"?[o,u]=[t.index,t.index+t.length].map(h=>e.transformPosition(h,r!==Ue.sources.USER)):[o,u]=[t.index,t.index+t.length].map(h=>h<e||h===e&&r===Ue.sources.USER?h:l>=0?h+l:Math.max(e,h+l)),new $l(o,u-o)}class Wl extends rm{}function mj(t){return t instanceof Vs||t instanceof tn}function pj(t){return typeof t.updateContent=="function"}class Pz extends Uy{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Vs;static allowedChildren=[Vs,tn,Wl];constructor(e,s,r){let{emitter:l}=r;super(e,s),this.emitter=l,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",o=>this.handleDragStart(o))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(Ue.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(Ue.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,s){this.emitter.emit(Ue.events.SCROLL_EMBED_UPDATE,e,s)}deleteAt(e,s){const[r,l]=this.line(e),[o]=this.line(e+s);if(super.deleteAt(e,s),o!=null&&r!==o&&l>0){if(r instanceof tn||o instanceof tn){this.optimize();return}const u=o.children.head instanceof Dn?null:o.children.head;r.moveChildren(o,u),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,s,r,l){super.formatAt(e,s,r,l),this.optimize()}insertAt(e,s,r){if(e>=this.length())if(r==null||this.scroll.query(s,Be.BLOCK)==null){const l=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(l),r==null&&s.endsWith(`
`)?l.insertAt(0,s.slice(0,-1),r):l.insertAt(0,s,r)}else{const l=this.scroll.create(s,r);this.appendChild(l)}else super.insertAt(e,s,r);this.optimize()}insertBefore(e,s){if(e.statics.scope===Be.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,s)}else super.insertBefore(e,s)}insertContents(e,s){const r=this.deltaToRenderBlocks(s.concat(new ze().insert(`
`))),l=r.pop();if(l==null)return;this.batchStart();const o=r.shift();if(o){const f=o.type==="block"&&(o.delta.length()===0||!this.descendant(tn,e)[0]&&e<this.length()),p=o.type==="block"?o.delta:new ze().insert({[o.key]:o.value});Pg(this,e,p);const g=o.type==="block"?1:0,b=e+p.length()+g;f&&this.insertAt(b-1,`
`);const v=Jr(this.line(e)[0]),w=sn.AttributeMap.diff(v,o.attributes)||{};Object.keys(w).forEach(x=>{this.formatAt(b-1,1,x,w[x])}),e=b}let[u,h]=this.children.find(e);if(r.length&&(u&&(u=u.split(h),h=0),r.forEach(f=>{if(f.type==="block"){const p=this.createBlock(f.attributes,u||void 0);Pg(p,0,f.delta)}else{const p=this.create(f.key,f.value);this.insertBefore(p,u||void 0),Object.keys(f.attributes).forEach(g=>{p.format(g,f.attributes[g])})}})),l.type==="block"&&l.delta.length()){const f=u?u.offset(u.scroll)+h:this.length();Pg(this,f,l.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const s=this.path(e).pop();if(!s)return[null,-1];const[r,l]=s;return r instanceof Js?[r,l]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(mj,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(l,o,u)=>{let h=[],f=u;return l.children.forEachAt(o,u,(p,g,b)=>{mj(p)?h.push(p):p instanceof rm&&(h=h.concat(r(p,g,f))),f-=b}),h};return r(this,e,s)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,s),e.length>0&&this.emitter.emit(Ue.events.SCROLL_OPTIMIZE,e,s))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let s=Ue.sources.USER;typeof e=="string"&&(s=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:l}=r;const o=this.find(l,!0);return o&&!pj(o)}),e.length>0&&this.emitter.emit(Ue.events.SCROLL_BEFORE_UPDATE,s,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(Ue.events.SCROLL_UPDATE,s,e)}updateEmbedAt(e,s,r){const[l]=this.descendant(o=>o instanceof tn,e);l&&l.statics.blotName===s&&pj(l)&&l.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const s=[];let r=new ze;return e.forEach(l=>{const o=l?.insert;if(o)if(typeof o=="string"){const u=o.split(`
`);u.slice(0,-1).forEach(f=>{r.insert(f,l.attributes),s.push({type:"block",delta:r,attributes:l.attributes??{}}),r=new ze});const h=u[u.length-1];h&&r.insert(h,l.attributes)}else{const u=Object.keys(o)[0];if(!u)return;this.query(u,Be.INLINE)?r.push(l):(r.length()&&s.push({type:"block",delta:r,attributes:{}}),r=new ze,s.push({type:"blockEmbed",key:u,value:o[u],attributes:l.attributes??{}}))}}),r.length()&&s.push({type:"block",delta:r,attributes:{}}),s}createBlock(e,s){let r;const l={};Object.entries(e).forEach(h=>{let[f,p]=h;this.query(f,Be.BLOCK&Be.BLOT)!=null?r=f:l[f]=p});const o=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(o,s||void 0);const u=o.length();return Object.entries(l).forEach(h=>{let[f,p]=h;o.formatAt(0,u,f,p)}),o}}function Pg(t,e,s){s.reduce((r,l)=>{const o=sn.Op.length(l);let u=l.attributes||{};if(l.insert!=null){if(typeof l.insert=="string"){const h=l.insert;t.insertAt(r,h);const[f]=t.descendant(Js,r),p=Jr(f);u=sn.AttributeMap.diff(p,u)||{}}else if(typeof l.insert=="object"){const h=Object.keys(l.insert)[0];if(h==null)return r;if(t.insertAt(r,h,l.insert[h]),t.scroll.query(h,Be.INLINE)!=null){const[p]=t.descendant(Js,r),g=Jr(p);u=sn.AttributeMap.diff(g,u)||{}}}}return Object.keys(u).forEach(h=>{t.formatAt(r,o,h,u[h])}),r+o},e)}const By={scope:Be.BLOCK,whitelist:["right","center","justify"]},Iz=new ii("align","align",By),tE=new Mn("align","ql-align",By),sE=new Ka("align","text-align",By);class rE extends Ka{value(e){let s=super.value(e);return s.startsWith("rgb(")?(s=s.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${s.split(",").map(l=>`00${parseInt(l,10).toString(16)}`.slice(-2)).join("")}`):s}}const $z=new Mn("color","ql-color",{scope:Be.INLINE}),Fy=new rE("color","color",{scope:Be.INLINE}),Uz=new Mn("background","ql-bg",{scope:Be.INLINE}),Hy=new rE("background","background-color",{scope:Be.INLINE});class Ql extends Wl{static create(e){const s=super.create(e);return s.setAttribute("spellcheck","false"),s}code(e,s){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+s)}html(e,s){return`<pre>
${nm(this.code(e,s))}
</pre>`}}class ar extends Vs{static TAB="  ";static register(){pe.register(Ql)}}class Vy extends ir{}Vy.blotName="code";Vy.tagName="CODE";ar.blotName="code-block";ar.className="ql-code-block";ar.tagName="DIV";Ql.blotName="code-block-container";Ql.className="ql-code-block-container";Ql.tagName="DIV";Ql.allowedChildren=[ar];ar.allowedChildren=[kn,Dn,vn];ar.requiredContainer=Ql;const Gy={scope:Be.BLOCK,whitelist:["rtl"]},nE=new ii("direction","dir",Gy),iE=new Mn("direction","ql-direction",Gy),aE=new Ka("direction","direction",Gy),lE={scope:Be.INLINE,whitelist:["serif","monospace"]},oE=new Mn("font","ql-font",lE);class zz extends Ka{value(e){return super.value(e).replace(/["']/g,"")}}const cE=new zz("font","font-family",lE),uE=new Mn("size","ql-size",{scope:Be.INLINE,whitelist:["small","large","huge"]}),dE=new Ka("size","font-size",{scope:Be.INLINE,whitelist:["10px","18px","32px"]}),Bz=Ki("quill:keyboard"),Fz=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class im extends li{static match(e,s){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!s[r]!==e[r]&&s[r]!==null)?!1:s.key===e.key||s.key===e.which}constructor(e,s){super(e,s),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const l=Vz(e);if(l==null){Bz.warn("Attempted to add invalid keyboard binding",l);return}typeof s=="function"&&(s={handler:s}),typeof r=="function"&&(r={handler:r}),(Array.isArray(l.key)?l.key:[l.key]).forEach(u=>{const h={...l,key:u,...s,...r};this.bindings[h.key]=this.bindings[h.key]||[],this.bindings[h.key].push(h)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const l=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(T=>im.match(e,T));if(l.length===0)return;const o=pe.find(e.target,!0);if(o&&o.scroll!==this.quill.scroll)return;const u=this.quill.getSelection();if(u==null||!this.quill.hasFocus())return;const[h,f]=this.quill.getLine(u.index),[p,g]=this.quill.getLeaf(u.index),[b,v]=u.length===0?[p,g]:this.quill.getLeaf(u.index+u.length),w=p instanceof Lf?p.value().slice(0,g):"",x=b instanceof Lf?b.value().slice(v):"",j={collapsed:u.length===0,empty:u.length===0&&h.length()<=1,format:this.quill.getFormat(u),line:h,offset:f,prefix:w,suffix:x,event:e};l.some(T=>{if(T.collapsed!=null&&T.collapsed!==j.collapsed||T.empty!=null&&T.empty!==j.empty||T.offset!=null&&T.offset!==j.offset)return!1;if(Array.isArray(T.format)){if(T.format.every(S=>j.format[S]==null))return!1}else if(typeof T.format=="object"&&!Object.keys(T.format).every(S=>T.format[S]===!0?j.format[S]!=null:T.format[S]===!1?j.format[S]==null:Iy(T.format[S],j.format[S])))return!1;return T.prefix!=null&&!T.prefix.test(j.prefix)||T.suffix!=null&&!T.suffix.test(j.suffix)?!1:T.handler.call(this,u,j,T)!==!0})&&e.preventDefault()})}handleBackspace(e,s){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(s.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let l={};const[o]=this.quill.getLine(e.index);let u=new ze().retain(e.index-r).delete(r);if(s.offset===0){const[h]=this.quill.getLine(e.index-1);if(h&&!(h.statics.blotName==="block"&&h.length()<=1)){const p=o.formats(),g=this.quill.getFormat(e.index-1,1);if(l=sn.AttributeMap.diff(p,g)||{},Object.keys(l).length>0){const b=new ze().retain(e.index+o.length()-2).retain(1,l);u=u.compose(b)}}}this.quill.updateContents(u,pe.sources.USER),this.quill.focus()}handleDelete(e,s){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(s.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let l={};const[o]=this.quill.getLine(e.index);let u=new ze().retain(e.index).delete(r);if(s.offset>=o.length()-1){const[h]=this.quill.getLine(e.index+1);if(h){const f=o.formats(),p=this.quill.getFormat(e.index,1);l=sn.AttributeMap.diff(f,p)||{},Object.keys(l).length>0&&(u=u.retain(h.length()-1).retain(1,l))}}this.quill.updateContents(u,pe.sources.USER),this.quill.focus()}handleDeleteRange(e){Zy({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,s){const r=Object.keys(s.format).reduce((o,u)=>(this.quill.scroll.query(u,Be.BLOCK)&&!Array.isArray(s.format[u])&&(o[u]=s.format[u]),o),{}),l=new ze().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(l,pe.sources.USER),this.quill.setSelection(e.index+1,pe.sources.SILENT),this.quill.focus()}}const Hz={bindings:{bold:Ig("bold"),italic:Ig("italic"),underline:Ig("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",pe.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",pe.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",pe.sources.USER):e.format.list!=null&&this.quill.format("list",!1,pe.sources.USER)}},"indent code-block":gj(!0),"outdent code-block":gj(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,pe.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const s=new ze().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(s,pe.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,pe.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,pe.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const s={list:!1};e.format.indent&&(s.indent=!1),this.quill.formatLine(t.index,t.length,s,pe.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,s]=this.quill.getLine(t.index),r={...e.formats(),list:"checked"},l=new ze().retain(t.index).insert(`
`,r).retain(e.length()-s-1).retain(1,{list:"unchecked"});this.quill.updateContents(l,pe.sources.USER),this.quill.setSelection(t.index+1,pe.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[s,r]=this.quill.getLine(t.index),l=new ze().retain(t.index).insert(`
`,e.format).retain(s.length()-r-1).retain(1,{header:null});this.quill.updateContents(l,pe.sources.USER),this.quill.setSelection(t.index+1,pe.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[s,r,l,o]=e.getTable(t),u=Gz(s,r,l,o);if(u==null)return;let h=s.offset();if(u<0){const f=new ze().retain(h).insert(`
`);this.quill.updateContents(f,pe.sources.USER),this.quill.setSelection(t.index+1,t.length,pe.sources.SILENT)}else if(u>0){h+=s.length();const f=new ze().retain(h).insert(`
`);this.quill.updateContents(f,pe.sources.USER),this.quill.setSelection(h,pe.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:s,line:r}=e,l=r.offset(this.quill.scroll);s.shiftKey?this.quill.setSelection(l-1,pe.sources.USER):this.quill.setSelection(l+r.length(),pe.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:s}=e.prefix,[r,l]=this.quill.getLine(t.index);if(l>s)return!0;let o;switch(e.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(t.index," ",pe.sources.USER),this.quill.history.cutoff();const u=new ze().retain(t.index-l).delete(s+1).retain(r.length()-2-l).retain(1,{list:o});return this.quill.updateContents(u,pe.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-s,pe.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,s]=this.quill.getLine(t.index);let r=2,l=e;for(;l!=null&&l.length()<=1&&l.formats()["code-block"];)if(l=l.prev,r-=1,r<=0){const o=new ze().retain(t.index+e.length()-s-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(o,pe.sources.USER),this.quill.setSelection(t.index-1,pe.sources.SILENT),!1}return!0}},"embed left":sf("ArrowLeft",!1),"embed left shift":sf("ArrowLeft",!0),"embed right":sf("ArrowRight",!1),"embed right shift":sf("ArrowRight",!0),"table down":yj(!1),"table up":yj(!0)}};im.DEFAULTS=Hz;function gj(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,s){let{event:r}=s;const l=this.quill.scroll.query("code-block"),{TAB:o}=l;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,o,pe.sources.USER),this.quill.setSelection(e.index+o.length,pe.sources.SILENT);return}const u=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:h,length:f}=e;u.forEach((p,g)=>{t?(p.insertAt(0,o),g===0?h+=o.length:f+=o.length):p.domNode.textContent.startsWith(o)&&(p.deleteAt(0,o.length),g===0?h-=o.length:f-=o.length)}),this.quill.update(pe.sources.USER),this.quill.setSelection(h,f,pe.sources.SILENT)}}}function sf(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:l}=r;t==="ArrowRight"&&(l+=r.length+1);const[o]=this.quill.getLeaf(l);return o instanceof $r?(t==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,pe.sources.USER):this.quill.setSelection(r.index-1,pe.sources.USER):e?this.quill.setSelection(r.index,r.length+1,pe.sources.USER):this.quill.setSelection(r.index+r.length+1,pe.sources.USER),!1):!0}}}function Ig(t){return{key:t[0],shortKey:!0,handler(e,s){this.quill.format(t,!s.format[t],pe.sources.USER)}}}function yj(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,s){const r=t?"prev":"next",l=s.line,o=l.parent[r];if(o!=null){if(o.statics.blotName==="table-row"){let u=o.children.head,h=l;for(;h.prev!=null;)h=h.prev,u=u.next;const f=u.offset(this.quill.scroll)+Math.min(s.offset,u.length()-1);this.quill.setSelection(f,0,pe.sources.USER)}}else{const u=l.table()[r];u!=null&&(t?this.quill.setSelection(u.offset(this.quill.scroll)+u.length()-1,0,pe.sources.USER):this.quill.setSelection(u.offset(this.quill.scroll),0,pe.sources.USER))}return!1}}}function Vz(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=cc(t);else return null;return t.shortKey&&(t[Fz]=t.shortKey,delete t.shortKey),t}function Zy(t){let{quill:e,range:s}=t;const r=e.getLines(s);let l={};if(r.length>1){const o=r[0].formats(),u=r[r.length-1].formats();l=sn.AttributeMap.diff(u,o)||{}}e.deleteText(s,pe.sources.USER),Object.keys(l).length>0&&e.formatLine(s.index,1,l,pe.sources.USER),e.setSelection(s.index,pe.sources.SILENT)}function Gz(t,e,s,r){return e.prev==null&&e.next==null?s.prev==null&&s.next==null?r===0?-1:1:s.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const Zz=/font-weight:\s*normal/,Yz=["P","OL","UL"],bj=t=>t&&Yz.includes(t.tagName),Kz=t=>{Array.from(t.querySelectorAll("br")).filter(e=>bj(e.previousElementSibling)&&bj(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},Wz=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(Zz)).forEach(e=>{const s=t.createDocumentFragment();s.append(...e.childNodes),e.parentNode?.replaceChild(s,e)})};function Qz(t){t.querySelector('[id^="docs-internal-guid-"]')&&(Wz(t),Kz(t))}const Xz=/\bmso-list:[^;]*ignore/i,Jz=/\bmso-list:[^;]*\bl(\d+)/i,eB=/\bmso-list:[^;]*\blevel(\d+)/i,tB=(t,e)=>{const s=t.getAttribute("style"),r=s?.match(Jz);if(!r)return null;const l=Number(r[1]),o=s?.match(eB),u=o?Number(o[1]):1,h=new RegExp(`@list l${l}:level${u}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),f=e.match(h),p=f&&f[1]==="bullet"?"bullet":"ordered";return{id:l,indent:u,type:p,element:t}},sB=t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),s=[],r=[];e.forEach(u=>{(u.getAttribute("style")||"").match(Xz)?s.push(u):r.push(u)}),s.forEach(u=>u.parentNode?.removeChild(u));const l=t.documentElement.innerHTML,o=r.map(u=>tB(u,l)).filter(u=>u);for(;o.length;){const u=[];let h=o.shift();for(;h;)u.push(h),h=o.length&&o[0]?.element===h.element.nextElementSibling&&o[0].id===h.id?o.shift():null;const f=document.createElement("ul");u.forEach(b=>{const v=document.createElement("li");v.setAttribute("data-list",b.type),b.indent>1&&v.setAttribute("class",`ql-indent-${b.indent-1}`),v.innerHTML=b.element.innerHTML,f.appendChild(v)});const p=u[0]?.element,{parentNode:g}=p??{};p&&g?.replaceChild(f,p),u.slice(1).forEach(b=>{let{element:v}=b;g?.removeChild(v)})}};function rB(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&sB(t)}const nB=[rB,Qz],iB=t=>{t.documentElement&&nB.forEach(e=>{e(t)})},aB=Ki("quill:clipboard"),lB=[[Node.TEXT_NODE,vB],[Node.TEXT_NODE,vj],["br",fB],[Node.ELEMENT_NODE,vj],[Node.ELEMENT_NODE,hB],[Node.ELEMENT_NODE,dB],[Node.ELEMENT_NODE,bB],["li",gB],["ol, ul",yB],["pre",mB],["tr",xB],["b",$g("bold")],["i",$g("italic")],["strike",$g("strike")],["style",pB]],oB=[Iz,nE].reduce((t,e)=>(t[e.keyName]=e,t),{}),xj=[sE,Hy,Fy,aE,cE,dE].reduce((t,e)=>(t[e.keyName]=e,t),{});class cB extends li{static DEFAULTS={matchers:[]};constructor(e,s){super(e,s),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],lB.concat(this.options.matchers??[]).forEach(r=>{let[l,o]=r;this.addMatcher(l,o)})}addMatcher(e,s){this.matchers.push([e,s])}convert(e){let{html:s,text:r}=e,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(l[ar.blotName])return new ze().insert(r||"",{[ar.blotName]:l[ar.blotName]});if(!s)return new ze().insert(r||"",l);const o=this.convertHTML(s);return Ad(o,`
`)&&(o.ops[o.ops.length-1].attributes==null||l.table)?o.compose(new ze().retain(o.length()-1).delete(1)):o}normalizeHTML(e){iB(e)}convertHTML(e){const s=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(s);const r=s.body,l=new WeakMap,[o,u]=this.prepareMatching(r,l);return Yy(this.quill.scroll,r,o,u,l)}dangerouslyPasteHTML(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pe.sources.API;if(typeof e=="string"){const l=this.convert({html:e,text:""});this.quill.setContents(l,s),this.quill.setSelection(0,pe.sources.SILENT)}else{const l=this.convert({html:s,text:""});this.quill.updateContents(new ze().retain(e).concat(l),r),this.quill.setSelection(e+l.length(),pe.sources.SILENT)}}onCaptureCopy(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:l,text:o}=this.onCopy(r,s);e.clipboardData?.setData("text/plain",o),e.clipboardData?.setData("text/html",l),s&&Zy({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(s=>s[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const s=this.quill.getSelection(!0);if(s==null)return;const r=e.clipboardData?.getData("text/html");let l=e.clipboardData?.getData("text/plain");if(!r&&!l){const u=e.clipboardData?.getData("text/uri-list");u&&(l=this.normalizeURIList(u))}const o=Array.from(e.clipboardData?.files||[]);if(!r&&o.length>0){this.quill.uploader.upload(s,o);return}if(r&&o.length>0){const u=new DOMParser().parseFromString(r,"text/html");if(u.body.childElementCount===1&&u.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(s,o);return}}this.onPaste(s,{html:r,text:l})}onCopy(e){const s=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:s}}onPaste(e,s){let{text:r,html:l}=s;const o=this.quill.getFormat(e.index),u=this.convert({text:r,html:l},o);aB.log("onPaste",u,{text:r,html:l});const h=new ze().retain(e.index).delete(e.length).concat(u);this.quill.updateContents(h,pe.sources.USER),this.quill.setSelection(h.length()-e.length,pe.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,s){const r=[],l=[];return this.matchers.forEach(o=>{const[u,h]=o;switch(u){case Node.TEXT_NODE:l.push(h);break;case Node.ELEMENT_NODE:r.push(h);break;default:Array.from(e.querySelectorAll(u)).forEach(f=>{s.has(f)?s.get(f)?.push(h):s.set(f,[h])});break}}),[r,l]}}function Xl(t,e,s,r){return r.query(e)?t.reduce((l,o)=>{if(!o.insert)return l;if(o.attributes&&o.attributes[e])return l.push(o);const u=s?{[e]:s}:{};return l.insert(o.insert,{...u,...o.attributes})},new ze):t}function Ad(t,e){let s="";for(let r=t.ops.length-1;r>=0&&s.length<e.length;--r){const l=t.ops[r];if(typeof l.insert!="string")break;s=l.insert+s}return s.slice(-1*e.length)===e}function $a(t,e){if(!(t instanceof Element))return!1;const s=e.query(t);return s&&s.prototype instanceof $r?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function uB(t,e){return t.previousElementSibling&&t.nextElementSibling&&!$a(t.previousElementSibling,e)&&!$a(t.nextElementSibling,e)}const rf=new WeakMap;function hE(t){return t==null?!1:(rf.has(t)||(t.tagName==="PRE"?rf.set(t,!0):rf.set(t,hE(t.parentNode))),rf.get(t))}function Yy(t,e,s,r,l){return e.nodeType===e.TEXT_NODE?r.reduce((o,u)=>u(e,o,t),new ze):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((o,u)=>{let h=Yy(t,u,s,r,l);return u.nodeType===e.ELEMENT_NODE&&(h=s.reduce((f,p)=>p(u,f,t),h),h=(l.get(u)||[]).reduce((f,p)=>p(u,f,t),h)),o.concat(h)},new ze):new ze}function $g(t){return(e,s,r)=>Xl(s,t,!0,r)}function dB(t,e,s){const r=ii.keys(t),l=Mn.keys(t),o=Ka.keys(t),u={};return r.concat(l).concat(o).forEach(h=>{let f=s.query(h,Be.ATTRIBUTE);f!=null&&(u[f.attrName]=f.value(t),u[f.attrName])||(f=oB[h],f!=null&&(f.attrName===h||f.keyName===h)&&(u[f.attrName]=f.value(t)||void 0),f=xj[h],f!=null&&(f.attrName===h||f.keyName===h)&&(f=xj[h],u[f.attrName]=f.value(t)||void 0))}),Object.entries(u).reduce((h,f)=>{let[p,g]=f;return Xl(h,p,g,s)},e)}function hB(t,e,s){const r=s.query(t);if(r==null)return e;if(r.prototype instanceof $r){const l={},o=r.value(t);if(o!=null)return l[r.blotName]=o,new ze().insert(l,r.formats(t,s))}else if(r.prototype instanceof id&&!Ad(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return Xl(e,r.blotName,r.formats(t,s),s);return e}function fB(t,e){return Ad(e,`
`)||e.insert(`
`),e}function mB(t,e,s){const r=s.query("code-block"),l=r&&"formats"in r&&typeof r.formats=="function"?r.formats(t,s):!0;return Xl(e,"code-block",l,s)}function pB(){return new ze}function gB(t,e,s){const r=s.query(t);if(r==null||r.blotName!=="list"||!Ad(e,`
`))return e;let l=-1,o=t.parentNode;for(;o!=null;)["OL","UL"].includes(o.tagName)&&(l+=1),o=o.parentNode;return l<=0?e:e.reduce((u,h)=>h.insert?h.attributes&&typeof h.attributes.indent=="number"?u.push(h):u.insert(h.insert,{indent:l,...h.attributes||{}}):u,new ze)}function yB(t,e,s){const r=t;let l=r.tagName==="OL"?"ordered":"bullet";const o=r.getAttribute("data-checked");return o&&(l=o==="true"?"checked":"unchecked"),Xl(e,"list",l,s)}function vj(t,e,s){if(!Ad(e,`
`)){if($a(t,s)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let r=t.nextSibling;for(;r!=null;){if($a(r,s))return e.insert(`
`);const l=s.query(r);if(l&&l.prototype instanceof tn)return e.insert(`
`);r=r.firstChild}}}return e}function bB(t,e,s){const r={},l=t.style||{};return l.fontStyle==="italic"&&(r.italic=!0),l.textDecoration==="underline"&&(r.underline=!0),l.textDecoration==="line-through"&&(r.strike=!0),(l.fontWeight?.startsWith("bold")||parseInt(l.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((o,u)=>{let[h,f]=u;return Xl(o,h,f,s)},e),parseFloat(l.textIndent||0)>0?new ze().insert("	").concat(e):e}function xB(t,e,s){const r=t.parentElement?.tagName==="TABLE"?t.parentElement:t.parentElement?.parentElement;if(r!=null){const o=Array.from(r.querySelectorAll("tr")).indexOf(t)+1;return Xl(e,"table",o,s)}return e}function vB(t,e,s){let r=t.data;if(t.parentElement?.tagName==="O:P")return e.insert(r.trim());if(!hE(t)){if(r.trim().length===0&&r.includes(`
`)&&!uB(t,s))return e;const l=(o,u)=>{const h=u.replace(/[^\u00a0]/g,"");return h.length<1&&o?" ":h};r=r.replace(/\r\n/g," ").replace(/\n/g," "),r=r.replace(/\s\s+/g,l.bind(l,!0)),(t.previousSibling==null&&t.parentElement!=null&&$a(t.parentElement,s)||t.previousSibling instanceof Element&&$a(t.previousSibling,s))&&(r=r.replace(/^\s+/,l.bind(l,!1))),(t.nextSibling==null&&t.parentElement!=null&&$a(t.parentElement,s)||t.nextSibling instanceof Element&&$a(t.nextSibling,s))&&(r=r.replace(/\s+$/,l.bind(l,!1)))}return e.insert(r)}class wB extends li{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,s){super(e,s),this.quill.on(pe.events.EDITOR_CHANGE,(r,l,o,u)=>{r===pe.events.SELECTION_CHANGE?l&&u!==pe.sources.SILENT&&(this.currentRange=l):r===pe.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||u===pe.sources.USER?this.record(l,o):this.transform(l)),this.currentRange=R0(this.currentRange,l))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{r.inputType==="historyUndo"?(this.undo(),r.preventDefault()):r.inputType==="historyRedo"&&(this.redo(),r.preventDefault())})}change(e,s){if(this.stack[e].length===0)return;const r=this.stack[e].pop();if(!r)return;const l=this.quill.getContents(),o=r.delta.invert(l);this.stack[s].push({delta:o,range:R0(r.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,pe.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,s){if(e.ops.length===0)return;this.stack.redo=[];let r=e.invert(s),l=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const u=this.stack.undo.pop();u&&(r=r.compose(u.delta),l=u.range)}else this.lastRecorded=o;r.length()!==0&&(this.stack.undo.push({delta:r,range:l}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){wj(this.stack.undo,e),wj(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,pe.sources.USER);else{const s=jB(this.quill.scroll,e.delta);this.quill.setSelection(s,pe.sources.USER)}}}function wj(t,e){let s=e;for(let r=t.length-1;r>=0;r-=1){const l=t[r];t[r]={delta:s.transform(l.delta,!0),range:l.range&&R0(l.range,s)},s=l.delta.transform(s),t[r].delta.length()===0&&t.splice(r,1)}}function _B(t,e){const s=e.ops[e.ops.length-1];return s==null?!1:s.insert!=null?typeof s.insert=="string"&&s.insert.endsWith(`
`):s.attributes!=null?Object.keys(s.attributes).some(r=>t.query(r,Be.BLOCK)!=null):!1}function jB(t,e){const s=e.reduce((l,o)=>l+(o.delete||0),0);let r=e.length()-s;return _B(t,e)&&(r-=1),r}function R0(t,e){if(!t)return t;const s=e.transformPosition(t.index),r=e.transformPosition(t.index+t.length);return{index:s,length:r-s}}class fE extends li{constructor(e,s){super(e,s),e.root.addEventListener("drop",r=>{r.preventDefault();let l=null;if(document.caretRangeFromPoint)l=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const u=document.caretPositionFromPoint(r.clientX,r.clientY);l=document.createRange(),l.setStart(u.offsetNode,u.offset),l.setEnd(u.offsetNode,u.offset)}const o=l&&e.selection.normalizeNative(l);if(o){const u=e.selection.normalizedToRange(o);r.dataTransfer?.files&&this.upload(u,r.dataTransfer.files)}})}upload(e,s){const r=[];Array.from(s).forEach(l=>{l&&this.options.mimetypes?.includes(l.type)&&r.push(l)}),r.length>0&&this.options.handler.call(this,e,r)}}fE.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const s=e.map(r=>new Promise(l=>{const o=new FileReader;o.onload=()=>{l(o.result)},o.readAsDataURL(r)}));Promise.all(s).then(r=>{const l=r.reduce((o,u)=>o.insert({image:u}),new ze().retain(t.index).delete(t.length));this.quill.updateContents(l,Ue.sources.USER),this.quill.setSelection(t.index+r.length,Ue.sources.SILENT)})}};const NB=["insertText","insertReplacementText"];class SB extends li{constructor(e,s){super(e,s),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(pe.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){Zy({range:e,quill:this.quill})}replaceText(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(s){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new ze().retain(e.index).insert(s,r),pe.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+s.length,0,pe.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!NB.includes(e.inputType))return;const s=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!s||s.collapsed===!0)return;const r=EB(e);if(r==null)return;const l=this.quill.selection.normalizeNative(s),o=l?this.quill.selection.normalizedToRange(l):null;o&&this.replaceText(o,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function EB(t){return typeof t.data=="string"?t.data:t.dataTransfer?.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const AB=/Mac/i.test(navigator.platform),CB=100,kB=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||AB&&t.key==="a"&&t.ctrlKey===!0);class TB extends li{isListening=!1;selectionChangeDeadline=0;constructor(e,s){super(e,s),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,s){let{line:r,event:l}=s;if(!(r instanceof An)||!r.uiNode)return!0;const o=getComputedStyle(r.domNode).direction==="rtl";return o&&l.key!=="ArrowRight"||!o&&l.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(l.shiftKey?1:0),pe.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&kB(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+CB,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const s=e.getRangeAt(0);if(s.collapsed!==!0||s.startOffset!==0)return;const r=this.quill.scroll.find(s.startContainer);if(!(r instanceof An)||!r.uiNode)return;const l=document.createRange();l.setStartAfter(r.uiNode),l.setEndAfter(r.uiNode),e.removeAllRanges(),e.addRange(l)}}pe.register({"blots/block":Vs,"blots/block/embed":tn,"blots/break":Dn,"blots/container":Wl,"blots/cursor":vn,"blots/embed":zy,"blots/inline":ir,"blots/scroll":Pz,"blots/text":kn,"modules/clipboard":cB,"modules/history":wB,"modules/keyboard":im,"modules/uploader":fE,"modules/input":SB,"modules/uiNode":TB});class OB extends Mn{add(e,s){let r=0;if(s==="+1"||s==="-1"){const l=this.value(e)||0;r=s==="+1"?l+1:l-1}else typeof s=="number"&&(r=s);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,s){return super.canAdd(e,s)||super.canAdd(e,parseInt(s,10))}value(e){return parseInt(super.value(e),10)||void 0}}const RB=new OB("indent","ql-indent",{scope:Be.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class MB extends Vs{static blotName="blockquote";static tagName="blockquote"}class DB extends Vs{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class Cd extends Wl{}Cd.blotName="list-container";Cd.tagName="OL";class kd extends Vs{static create(e){const s=super.create();return s.setAttribute("data-list",e),s}static formats(e){return e.getAttribute("data-list")||void 0}static register(){pe.register(Cd)}constructor(e,s){super(e,s);const r=s.ownerDocument.createElement("span"),l=o=>{if(!e.isEnabled())return;const u=this.statics.formats(s,e);u==="checked"?(this.format("list","unchecked"),o.preventDefault()):u==="unchecked"&&(this.format("list","checked"),o.preventDefault())};r.addEventListener("mousedown",l),r.addEventListener("touchstart",l),this.attachUI(r)}format(e,s){e===this.statics.blotName&&s?this.domNode.setAttribute("data-list",s):super.format(e,s)}}kd.blotName="list";kd.tagName="LI";Cd.allowedChildren=[kd];kd.requiredContainer=Cd;class Ky extends ir{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class LB extends Ky{static blotName="italic";static tagName=["EM","I"]}class qf extends ir{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const s=super.create(e);return s.setAttribute("href",this.sanitize(e)),s.setAttribute("rel","noopener noreferrer"),s.setAttribute("target","_blank"),s}static formats(e){return e.getAttribute("href")}static sanitize(e){return mE(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,s){e!==this.statics.blotName||!s?super.format(e,s):this.domNode.setAttribute("href",this.constructor.sanitize(s))}}function mE(t,e){const s=document.createElement("a");s.href=t;const r=s.href.slice(0,s.href.indexOf(":"));return e.indexOf(r)>-1}class qB extends ir{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class PB extends Ky{static blotName="strike";static tagName=["S","STRIKE"]}class IB extends ir{static blotName="underline";static tagName="U"}class $B extends zy{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const s=super.create(e);return typeof e=="string"&&(window.katex.render(e,s,{throwOnError:!1,errorColor:"#f00"}),s.setAttribute("data-value",e)),s}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const _j=["alt","height","width"];class UB extends $r{static blotName="image";static tagName="IMG";static create(e){const s=super.create(e);return typeof e=="string"&&s.setAttribute("src",this.sanitize(e)),s}static formats(e){return _j.reduce((s,r)=>(e.hasAttribute(r)&&(s[r]=e.getAttribute(r)),s),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return mE(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,s){_j.indexOf(e)>-1?s?this.domNode.setAttribute(e,s):this.domNode.removeAttribute(e):super.format(e,s)}}const jj=["height","width"];class zB extends tn{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const s=super.create(e);return s.setAttribute("frameborder","0"),s.setAttribute("allowfullscreen","true"),s.setAttribute("src",this.sanitize(e)),s}static formats(e){return jj.reduce((s,r)=>(e.hasAttribute(r)&&(s[r]=e.getAttribute(r)),s),{})}static sanitize(e){return qf.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,s){jj.indexOf(e)>-1?s?this.domNode.setAttribute(e,s):this.domNode.removeAttribute(e):super.format(e,s)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const Bu=new Mn("code-token","hljs",{scope:Be.INLINE});class Gi extends ir{static formats(e,s){for(;e!=null&&e!==s.domNode;){if(e.classList&&e.classList.contains(ar.className))return super.formats(e,s);e=e.parentNode}}constructor(e,s,r){super(e,s,r),Bu.add(this.domNode,r)}format(e,s){e!==Gi.blotName?super.format(e,s):s?Bu.add(this.domNode,s):(Bu.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Bu.value(this.domNode)||this.unwrap()}}Gi.blotName="code-token";Gi.className="ql-token";class en extends ar{static create(e){const s=super.create(e);return typeof e=="string"&&s.setAttribute("data-language",e),s}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,s){e===this.statics.blotName&&s?this.domNode.setAttribute("data-language",s):super.format(e,s)}replaceWith(e,s){return this.formatAt(0,this.length(),Gi.blotName,!1),super.replaceWith(e,s)}}class Ku extends Ql{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,s){e===en.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,s)}))}formatAt(e,s,r,l){r===en.blotName&&(this.forceNext=!0),super.formatAt(e,s,r,l)}highlight(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const l=`${Array.from(this.domNode.childNodes).filter(u=>u!==this.uiNode).map(u=>u.textContent).join(`
`)}
`,o=en.formats(this.children.head.domNode);if(s||this.forceNext||this.cachedText!==l){if(l.trim().length>0||this.cachedText==null){const u=this.children.reduce((f,p)=>f.concat(JS(p,!1)),new ze),h=e(l,o);u.diff(h).reduce((f,p)=>{let{retain:g,attributes:b}=p;return g?(b&&Object.keys(b).forEach(v=>{[en.blotName,Gi.blotName].includes(v)&&this.formatAt(f,g,v,b[v])}),f+g):f},0)}this.cachedText=l,this.forceNext=!1}}html(e,s){const[r]=this.children.find(e);return`<pre data-language="${r?en.formats(r.domNode):"plain"}">
${nm(this.code(e,s))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const s=en.formats(this.children.head.domNode);s!==this.uiNode.value&&(this.uiNode.value=s)}}}Ku.allowedChildren=[en];en.requiredContainer=Ku;en.allowedChildren=[Gi,vn,kn,Dn];const BB=(t,e,s)=>{if(typeof t.versionString=="string"){const r=t.versionString.split(".")[0];if(parseInt(r,10)>=11)return t.highlight(s,{language:e}).value}return t.highlight(e,s).value};class pE extends li{static register(){pe.register(Gi,!0),pe.register(en,!0),pe.register(Ku,!0)}constructor(e,s){if(super(e,s),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,l)=>{let{key:o}=l;return r[o]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(pe.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof Ku))return;const s=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:l,label:o}=r;const u=s.ownerDocument.createElement("option");u.textContent=o,u.setAttribute("value",l),s.appendChild(u)}),s.addEventListener("change",()=>{e.format(en.blotName,s.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(s),e.children.head&&(s.value=en.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(pe.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(pe.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(Ku):[e]).forEach(o=>{o.highlight(this.highlightBlot,s)}),this.quill.update(pe.sources.SILENT),r!=null&&this.quill.setSelection(r,pe.sources.SILENT)}highlightBlot(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(s=this.languages[s]?s:"plain",s==="plain")return nm(e).split(`
`).reduce((l,o,u)=>(u!==0&&l.insert(`
`,{[ar.blotName]:s}),l.insert(o)),new ze);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(ar.className),r.innerHTML=BB(this.options.hljs,s,e),Yy(this.quill.scroll,r,[(l,o)=>{const u=Bu.value(l);return u?o.compose(new ze().retain(o.length(),{[Gi.blotName]:u})):o}],[(l,o)=>l.data.split(`
`).reduce((u,h,f)=>(f!==0&&u.insert(`
`,{[ar.blotName]:s}),u.insert(h)),o)],new WeakMap)}}pE.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class jn extends Vs{static blotName="table";static tagName="TD";static create(e){const s=super.create();return e?s.setAttribute("data-row",e):s.setAttribute("data-row",Wy()),s}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,s){e===jn.blotName&&s?this.domNode.setAttribute("data-row",s):super.format(e,s)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class Ul extends Wl{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),s=this.children.tail.formats(),r=this.next.children.head.formats(),l=this.next.children.tail.formats();return e.table===s.table&&e.table===r.table&&e.table===l.table}return!1}optimize(e){super.optimize(e),this.children.forEach(s=>{if(s.next==null)return;const r=s.formats(),l=s.next.formats();if(r.table!==l.table){const o=this.splitAfter(s);o&&o.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class za extends Wl{static blotName="table-body";static tagName="TBODY"}class Pf extends Wl{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(Ul),s=e.reduce((r,l)=>Math.max(l.children.length,r),0);e.forEach(r=>{new Array(s-r.children.length).fill(0).forEach(()=>{let l;r.children.head!=null&&(l=jn.formats(r.children.head.domNode));const o=this.scroll.create(jn.blotName,l);r.appendChild(o),o.optimize()})})}cells(e){return this.rows().map(s=>s.children.at(e))}deleteColumn(e){const[s]=this.descendant(za);s==null||s.children.head==null||s.children.forEach(r=>{const l=r.children.at(e);l?.remove()})}insertColumn(e){const[s]=this.descendant(za);s==null||s.children.head==null||s.children.forEach(r=>{const l=r.children.at(e),o=jn.formats(r.children.head.domNode),u=this.scroll.create(jn.blotName,o);r.insertBefore(u,l)})}insertRow(e){const[s]=this.descendant(za);if(s==null||s.children.head==null)return;const r=Wy(),l=this.scroll.create(Ul.blotName);s.children.head.children.forEach(()=>{const u=this.scroll.create(jn.blotName,r);l.appendChild(u)});const o=s.children.at(e);s.insertBefore(l,o)}rows(){const e=this.children.head;return e==null?[]:e.children.map(s=>s)}}Pf.allowedChildren=[za];za.requiredContainer=Pf;za.allowedChildren=[Ul];Ul.requiredContainer=za;Ul.allowedChildren=[jn];jn.requiredContainer=Ul;function Wy(){return`row-${Math.random().toString(36).slice(2,6)}`}class FB extends li{static register(){pe.register(jn),pe.register(Ul),pe.register(za),pe.register(Pf)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Pf).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,s]=this.getTable();s!=null&&(e.deleteColumn(s.cellOffset()),this.quill.update(pe.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(pe.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const s=e.offset();e.remove(),this.quill.update(pe.sources.USER),this.quill.setSelection(s,pe.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[s,r]=this.quill.getLine(e.index);if(s==null||s.statics.blotName!==jn.blotName)return[null,null,null,-1];const l=s.parent;return[l.parent.parent,l,s,r]}insertColumn(e){const s=this.quill.getSelection();if(!s)return;const[r,l,o]=this.getTable(s);if(o==null)return;const u=o.cellOffset();r.insertColumn(u+e),this.quill.update(pe.sources.USER);let h=l.rowOffset();e===0&&(h+=1),this.quill.setSelection(s.index+h,s.length,pe.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const s=this.quill.getSelection();if(!s)return;const[r,l,o]=this.getTable(s);if(o==null)return;const u=l.rowOffset();r.insertRow(u+e),this.quill.update(pe.sources.USER),e>0?this.quill.setSelection(s,pe.sources.SILENT):this.quill.setSelection(s.index+l.children.length,s.length,pe.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,s){const r=this.quill.getSelection();if(r==null)return;const l=new Array(e).fill(0).reduce(o=>{const u=new Array(s).fill(`
`).join("");return o.insert(u,{table:Wy()})},new ze().retain(r.index));this.quill.updateContents(l,pe.sources.USER),this.quill.setSelection(r.index,pe.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(pe.events.SCROLL_OPTIMIZE,e=>{e.some(s=>["TD","TR","TBODY","TABLE"].includes(s.target.tagName)?(this.quill.once(pe.events.TEXT_CHANGE,(r,l,o)=>{o===pe.sources.USER&&this.balanceTables()}),!0):!1)})}}const Nj=Ki("quill:toolbar");class Qy extends li{constructor(e,s){if(super(e,s),Array.isArray(this.options.container)){const r=document.createElement("div");r.setAttribute("role","toolbar"),HB(r,this.options.container),e.container?.parentNode?.insertBefore(r,e.container),this.container=r}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){Nj.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(r=>{const l=this.options.handlers?.[r];l&&this.addHandler(r,l)}),Array.from(this.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)}),this.quill.on(pe.events.EDITOR_CHANGE,()=>{const[r]=this.quill.selection.getRange();this.update(r)})}addHandler(e,s){this.handlers[e]=s}attach(e){let s=Array.from(e.classList).find(l=>l.indexOf("ql-")===0);if(!s)return;if(s=s.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[s]==null&&this.quill.scroll.query(s)==null){Nj.warn("ignoring attaching to nonexistent format",s,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,l=>{let o;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const h=e.options[e.selectedIndex];h.hasAttribute("selected")?o=!1:o=h.value||!1}else e.classList.contains("ql-active")?o=!1:o=e.value||!e.hasAttribute("value"),l.preventDefault();this.quill.focus();const[u]=this.quill.selection.getRange();if(this.handlers[s]!=null)this.handlers[s].call(this,o);else if(this.quill.scroll.query(s).prototype instanceof $r){if(o=prompt(`Enter ${s}`),!o)return;this.quill.updateContents(new ze().retain(u.index).delete(u.length).insert({[s]:o}),pe.sources.USER)}else this.quill.format(s,o,pe.sources.USER);this.update(u)}),this.controls.push([s,e])}update(e){const s=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[l,o]=r;if(o.tagName==="SELECT"){let u=null;if(e==null)u=null;else if(s[l]==null)u=o.querySelector("option[selected]");else if(!Array.isArray(s[l])){let h=s[l];typeof h=="string"&&(h=h.replace(/"/g,'\\"')),u=o.querySelector(`option[value="${h}"]`)}u==null?(o.value="",o.selectedIndex=-1):u.selected=!0}else if(e==null)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){const u=s[l],h=u===o.getAttribute("value")||u!=null&&u.toString()===o.getAttribute("value")||u==null&&!o.getAttribute("value");o.classList.toggle("ql-active",h),o.setAttribute("aria-pressed",h.toString())}else{const u=s[l]!=null;o.classList.toggle("ql-active",u),o.setAttribute("aria-pressed",u.toString())}})}}Qy.DEFAULTS={};function Sj(t,e,s){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),s!=null?(r.value=s,r.setAttribute("aria-label",`${e}: ${s}`)):r.setAttribute("aria-label",e),t.appendChild(r)}function HB(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(s=>{const r=document.createElement("span");r.classList.add("ql-formats"),s.forEach(l=>{if(typeof l=="string")Sj(r,l);else{const o=Object.keys(l)[0],u=l[o];Array.isArray(u)?VB(r,o,u):Sj(r,o,u)}}),t.appendChild(r)})}function VB(t,e,s){const r=document.createElement("select");r.classList.add(`ql-${e}`),s.forEach(l=>{const o=document.createElement("option");l!==!1?o.setAttribute("value",String(l)):o.setAttribute("selected","selected"),r.appendChild(o)}),t.appendChild(r)}Qy.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(s=>{this.quill.scroll.query(s,Be.INLINE)!=null&&this.quill.format(s,!1,pe.sources.USER)})}else this.quill.removeFormat(t.index,t.length,pe.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",pe.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,pe.sources.USER),this.quill.format("direction",t,pe.sources.USER)},indent(t){const e=this.quill.getSelection(),s=this.quill.getFormat(e),r=parseInt(s.indent||0,10);if(t==="+1"||t==="-1"){let l=t==="+1"?1:-1;s.direction==="rtl"&&(l*=-1),this.quill.format("indent",r+l,pe.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,pe.sources.USER)},list(t){const e=this.quill.getSelection(),s=this.quill.getFormat(e);t==="check"?s.list==="checked"||s.list==="unchecked"?this.quill.format("list",!1,pe.sources.USER):this.quill.format("list","unchecked",pe.sources.USER):this.quill.format("list",t,pe.sources.USER)}}};const GB='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',ZB='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',YB='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',KB='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',WB='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',QB='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',XB='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',JB='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Ej='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',eF='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',tF='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',sF='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',rF='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',nF='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',iF='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',aF='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',lF='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',oF='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',cF='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',uF='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',dF='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',hF='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',fF='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',mF='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',pF='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',gF='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',yF='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',bF='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',xF='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',vF='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',wF='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',_F='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',jF='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',ld={align:{"":GB,center:ZB,right:YB,justify:KB},background:WB,blockquote:QB,bold:XB,clean:JB,code:Ej,"code-block":Ej,color:eF,direction:{"":tF,rtl:sF},formula:rF,header:{1:nF,2:iF,3:aF,4:lF,5:oF,6:cF},italic:uF,image:dF,indent:{"+1":hF,"-1":fF},link:mF,list:{bullet:pF,check:gF,ordered:yF},script:{sub:bF,super:xF},strike:vF,table:wF,underline:_F,video:jF},NF='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let Aj=0;function Cj(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class am{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),s.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Cj(this.label,"aria-expanded"),Cj(this.options,"aria-hidden")}buildItem(e){const s=document.createElement("span");s.tabIndex="0",s.setAttribute("role","button"),s.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&s.setAttribute("data-value",r),e.textContent&&s.setAttribute("data-label",e.textContent),s.addEventListener("click",()=>{this.selectItem(s,!0)}),s.addEventListener("keydown",l=>{switch(l.key){case"Enter":this.selectItem(s,!0),l.preventDefault();break;case"Escape":this.escape(),l.preventDefault();break}}),s}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=NF,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${Aj}`,Aj+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(s=>{const r=this.buildItem(s);e.appendChild(r),s.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),s&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const s=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",s)}}class gE extends am{constructor(e,s){super(e),this.label.innerHTML=s,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const s=super.buildItem(e);return s.style.backgroundColor=e.getAttribute("value")||"",s}selectItem(e,s){super.selectItem(e,s);const r=this.label.querySelector(".ql-color-label"),l=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=l:r.style.fill=l)}}class yE extends am{constructor(e,s){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=s[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,s){super.selectItem(e,s);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const SF=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class bE{constructor(e,s){this.quill=e,this.boundsContainer=s||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,SF(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const s=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${s}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const l=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect();let u=0;if(o.right>l.right&&(u=l.right-o.right,this.root.style.left=`${s+u}px`),o.left<l.left&&(u=l.left-o.left,this.root.style.left=`${s+u}px`),o.bottom>l.bottom){const h=o.bottom-o.top,f=e.bottom-e.top+h;this.root.style.top=`${r-f}px`,this.root.classList.add("ql-flip")}return u}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const EF=[!1,"center","right","justify"],AF=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],CF=[!1,"serif","monospace"],kF=["1","2","3",!1],TF=["small",!1,"large","huge"];class Td extends Rc{constructor(e,s){super(e,s);const r=l=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(l.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(o=>{o.container.contains(l.target)||o.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const s=super.addModule(e);return e==="toolbar"&&this.extendToolbar(s),s}buildButtons(e,s){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(o=>{if(o.startsWith("ql-")&&(o=o.slice(3),s[o]!=null))if(o==="direction")r.innerHTML=s[o][""]+s[o].rtl;else if(typeof s[o]=="string")r.innerHTML=s[o];else{const u=r.value||"";u!=null&&s[o][u]&&(r.innerHTML=s[o][u])}})})}buildPickers(e,s){this.pickers=Array.from(e).map(l=>{if(l.classList.contains("ql-align")&&(l.querySelector("option")==null&&Iu(l,EF),typeof s.align=="object"))return new yE(l,s.align);if(l.classList.contains("ql-background")||l.classList.contains("ql-color")){const o=l.classList.contains("ql-background")?"background":"color";return l.querySelector("option")==null&&Iu(l,AF,o==="background"?"#ffffff":"#000000"),new gE(l,s[o])}return l.querySelector("option")==null&&(l.classList.contains("ql-font")?Iu(l,CF):l.classList.contains("ql-header")?Iu(l,kF):l.classList.contains("ql-size")&&Iu(l,TF)),new am(l)});const r=()=>{this.pickers.forEach(l=>{l.update()})};this.quill.on(Ue.events.EDITOR_CHANGE,r)}}Td.DEFAULTS=Ua({},Rc.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class xE extends bE{constructor(e,s){super(e,s),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;s!=null?this.textbox.value=s:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:s}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,Ue.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,Ue.sources.USER)),this.quill.root.scrollTop=s;break}case"video":e=OF(e);case"formula":{if(!e)break;const s=this.quill.getSelection(!0);if(s!=null){const r=s.index+s.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,Ue.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",Ue.sources.USER),this.quill.setSelection(r+2,Ue.sources.USER)}break}}this.textbox.value="",this.hide()}}function OF(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function Iu(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const l=document.createElement("option");r===s?l.setAttribute("selected","selected"):l.setAttribute("value",String(r)),t.appendChild(l)})}const RF=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class MF extends xE{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,s){super(e,s),this.quill.on(Ue.events.EDITOR_CHANGE,(r,l,o,u)=>{if(r===Ue.events.SELECTION_CHANGE)if(l!=null&&l.length>0&&u===Ue.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const h=this.quill.getLines(l.index,l.length);if(h.length===1){const f=this.quill.getBounds(l);f!=null&&this.position(f)}else{const f=h[h.length-1],p=this.quill.getIndex(f),g=Math.min(f.length()-1,l.index+l.length-p),b=this.quill.getBounds(new $l(p,g));b!=null&&this.position(b)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Ue.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const s=this.quill.getBounds(e);s!=null&&this.position(s)}},1)})}cancel(){this.show()}position(e){const s=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",s!==0&&(r.style.marginLeft=`${-1*s-r.offsetWidth/2}px`),s}}class vE extends Td{constructor(e,s){s.modules.toolbar!=null&&s.modules.toolbar.container==null&&(s.modules.toolbar.container=RF),super(e,s),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new MF(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),ld),this.buildPickers(e.container.querySelectorAll("select"),ld))}}vE.DEFAULTS=Ua({},Td.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,pe.sources.USER)}}}}});const DF=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class LF extends xE{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const s=this.linkRange;this.restoreFocus(),this.quill.formatText(s,"link",!1,Ue.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(Ue.events.SELECTION_CHANGE,(e,s,r)=>{if(e!=null){if(e.length===0&&r===Ue.sources.USER){const[l,o]=this.quill.scroll.descendant(qf,e.index);if(l!=null){this.linkRange=new $l(e.index-o,l.length());const u=qf.formats(l.domNode);this.preview.textContent=u,this.preview.setAttribute("href",u),this.show();const h=this.quill.getBounds(this.linkRange);h!=null&&this.position(h);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class wE extends Td{constructor(e,s){s.modules.toolbar!=null&&s.modules.toolbar.container==null&&(s.modules.toolbar.container=DF),super(e,s),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),ld),this.buildPickers(e.container.querySelectorAll("select"),ld),this.tooltip=new LF(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(s,r)=>{e.handlers.link.call(e,!r.format.link)}))}}wE.DEFAULTS=Ua({},Td.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let s=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(s)&&s.indexOf("mailto:")!==0&&(s=`mailto:${s}`);const{tooltip:r}=this.quill.theme;r.edit("link",s)}else this.quill.format("link",!1,pe.sources.USER)}}}}});pe.register({"attributors/attribute/direction":nE,"attributors/class/align":tE,"attributors/class/background":Uz,"attributors/class/color":$z,"attributors/class/direction":iE,"attributors/class/font":oE,"attributors/class/size":uE,"attributors/style/align":sE,"attributors/style/background":Hy,"attributors/style/color":Fy,"attributors/style/direction":aE,"attributors/style/font":cE,"attributors/style/size":dE},!0);pe.register({"formats/align":tE,"formats/direction":iE,"formats/indent":RB,"formats/background":Hy,"formats/color":Fy,"formats/font":oE,"formats/size":uE,"formats/blockquote":MB,"formats/code-block":ar,"formats/header":DB,"formats/list":kd,"formats/bold":Ky,"formats/code":Vy,"formats/italic":LB,"formats/link":qf,"formats/script":qB,"formats/strike":PB,"formats/underline":IB,"formats/formula":$B,"formats/image":UB,"formats/video":zB,"modules/syntax":pE,"modules/table":FB,"modules/toolbar":Qy,"themes/bubble":vE,"themes/snow":wE,"ui/icons":ld,"ui/picker":am,"ui/icon-picker":yE,"ui/color-picker":gE,"ui/tooltip":bE},!0);const qF=pe.import("formats/list");class Od extends qF{static create(e){const s=super.create(e);if(e==="bullet"&&s.tagName==="OL"){const r=document.createElement("UL");return r.innerHTML=s.innerHTML,r}return s}}Od.blotName="list";Od.tagName=["OL","UL"];Od.defaultChild="list-item";Od.allowedChildren=["list-item"];pe.register(Od,!0);function PF({content:t,onChange:e,placeholder:s="Start typing...",height:r="200px",enableDebugLogs:l=!1}){const o=O.useRef(null),u=O.useRef(null),[h,f]=O.useState(!1),p=O.useRef(null),g=O.useRef(!1),b=O.useCallback((w,x)=>{l&&console.log(`[QuillBulletFix] ${w}`,x||"")},[l]),v=O.useCallback(async w=>{try{if(f(!0),b("Starting image upload",{fileName:w.name}),!w.type.startsWith("image/"))throw new Error("Please select an image file");if(w.size>5*1024*1024)throw new Error("Image size must be less than 5MB");const x=w.name.split(".").pop(),N=`editor-images/${`${Date.now()}_${Math.random().toString(36).substr(2,9)}.${x}`}`,{data:T,error:S}=await J.storage.from("media").upload(N,w,{contentType:w.type,cacheControl:"3600"});if(S)throw S;const{data:{publicUrl:k}}=J.storage.from("media").getPublicUrl(N);if(u.current){const Z=u.current.getSelection()||{index:0};u.current.insertEmbed(Z.index,"image",k),u.current.setSelection(Z.index+1)}ye("success","Image uploaded successfully")}catch(x){b("Image upload failed",x),ye("error",x.message||"Failed to upload image")}finally{f(!1),p.current&&(p.current.value="")}},[b]);return O.useEffect(()=>{if(!o.current||u.current)return;b("Initializing Quill editor with bullet fix");const w=new pe(o.current,{theme:"snow",placeholder:s,modules:{toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"bullet"},{list:"ordered"}],["link","image"],[{color:[]},{background:[]}],["clean"]],handlers:{image:()=>p.current?.click(),list:function(x){w.getSelection()&&(x==="bullet"?(w.format("list","bullet"),setTimeout(()=>{w.root.querySelectorAll("ol").forEach(T=>{if(T.querySelectorAll('li[data-list="bullet"]').length>0){const k=document.createElement("ul");for(;T.firstChild;)k.appendChild(T.firstChild);T.parentNode?.replaceChild(k,T)}})},0)):w.format("list",x))}}}}});return t&&t!=="<p><br></p>"&&(w.root.innerHTML=t),w.on("text-change",()=>{if(g.current){g.current=!1;return}const x=w.root.innerHTML;b("Text changed",{preview:x.substring(0,100)}),e(x==="<p><br></p>"?"":x)}),w.root.addEventListener("paste",async x=>{const j=x.clipboardData?.items;if(j){for(const N of j)if(N.type.startsWith("image/")){x.preventDefault();const T=N.getAsFile();T&&await v(T)}}}),u.current=w,()=>{w.off("text-change")}},[]),O.useEffect(()=>{if(!u.current||g.current){g.current=!1;return}const w=u.current.root.innerHTML;w===t||(!w||w==="<p><br></p>")&&(!t||t==="<p><br></p>"||t==="")||(b("Updating content from prop",{old:w?.substring(0,50),new:t?.substring(0,50)}),g.current=!0,setTimeout(()=>{u.current&&(u.current.root.innerHTML=t||"",g.current=!1)},0))},[t,b]),i.jsxs("div",{className:"quill-bullet-fix-wrapper relative",children:[i.jsx("input",{ref:p,type:"file",accept:"image/*",className:"hidden",onChange:w=>{const x=w.target.files?.[0];x&&v(x)}}),h&&i.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center z-50 rounded-md",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Bi,{className:"h-5 w-5 animate-spin"}),i.jsx("span",{children:"Uploading image..."})]})}),i.jsx("div",{ref:o,style:{height:r},className:"bg-white"}),i.jsx("style",{children:`
        /* FIX DOUBLE BULLETS - Hide the .ql-ui::before bullet since we have ::marker working */
        .quill-bullet-fix-wrapper .ql-editor ul {
          list-style-type: disc !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor ul li {
          list-style-type: disc !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor li[data-list="bullet"] {
          list-style-type: disc !important;
        }
        
        /* HIDE THE QUILL UI for bullets - We're using native ::marker now */
        .quill-bullet-fix-wrapper .ql-editor li[data-list="bullet"] > .ql-ui {
          display: none !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor li[data-list="bullet"] > .ql-ui::before {
          content: none !important;
          display: none !important;
        }
        
        /* FIX ORDERED LISTS - Use native numbering */
        .quill-bullet-fix-wrapper .ql-editor ol {
          list-style-type: decimal !important;
          counter-reset: none !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor ol li {
          list-style-type: decimal !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor li[data-list="ordered"] {
          list-style-type: decimal !important;
        }
        
        /* HIDE THE QUILL UI for ordered lists too */
        .quill-bullet-fix-wrapper .ql-editor li[data-list="ordered"] > .ql-ui {
          display: none !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor li[data-list="ordered"] > .ql-ui::before {
          content: none !important;
          display: none !important;
        }
        
        .quill-bullet-fix-wrapper .ql-toolbar {
          border: 1px solid #e5e7eb;
          border-bottom: none;
          border-radius: 0.375rem 0.375rem 0 0;
          background: #f9fafb;
        }
        
        .quill-bullet-fix-wrapper .ql-container {
          border: 1px solid #e5e7eb;
          border-radius: 0 0 0.375rem 0.375rem;
          font-family: inherit;
          overflow: hidden;
        }
        
        .quill-bullet-fix-wrapper .ql-editor {
          min-height: ${r};
          max-height: 400px;
          overflow-y: auto;
          overflow-x: hidden;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
          white-space: pre-wrap;
        }
        
        .quill-bullet-fix-wrapper .ql-editor * {
          max-width: 100%;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
        }
        
        .quill-bullet-fix-wrapper .ql-editor img {
          max-width: 100%;
          height: auto;
          border-radius: 0.375rem;
          margin: 0.5rem 0;
        }
        
        .quill-bullet-fix-wrapper .ql-editor.ql-blank::before {
          color: #9ca3af;
          font-style: normal;
        }
      `})]})}class kj{static async createMediaFileRecord(e,s,r,l){const{data:{publicUrl:o}}=J.storage.from("media").getPublicUrl(e),u=(s instanceof File,s.size),h=s instanceof File?s.type:"image/jpeg",f=o+"?width=150&height=150&resize=cover",p=o+"?width=800&height=600&resize=fit",g=o+"?width=1920&height=1080&resize=fit";try{const{data:b,error:v}=await J.from("media_files").insert({filename:e,original_filename:s instanceof File?s.name:"uploaded-image.jpg",file_type:h,file_size:u,mime_type:h,url:o,thumbnail_url:f,medium_url:p,large_url:g,title:r.title,alt_text:r.alt_text,description:r.description,category:r.category||"general",tags:r.tags||[],folder_id:r.folder_id,status:"active",is_public:!1}).select().single();return v?(console.warn("Could not save media metadata to database:",v),{id:e,filename:e,original_filename:s instanceof File?s.name:"uploaded-image.jpg",file_type:h,file_size:u,mime_type:h,url:o,thumbnail_url:f,medium_url:p,large_url:g,title:r.title,alt_text:r.alt_text,description:r.description,category:r.category||"general",tags:r.tags||[],status:"active",is_public:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}):b}catch(b){return console.warn("Database not configured, returning file info without metadata:",b),{id:e,filename:e,original_filename:s instanceof File?s.name:"uploaded-image.jpg",file_type:h,file_size:u,mime_type:h,url:o,thumbnail_url:f,medium_url:p,large_url:g,title:r.title,alt_text:r.alt_text,description:r.description,category:r.category||"general",tags:r.tags||[],status:"active",is_public:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}}static async uploadImage(e,s={}){try{const r=Date.now(),l=Math.random().toString(36).substring(7),o=e instanceof File?e.name.split(".").pop():"jpg",u=`${r}-${l}.${o}`;console.log("Attempting to upload file:",u);const{data:h,error:f}=await J.storage.from("media").upload(u,e,{cacheControl:"3600",upsert:!1});if(f){if(console.error("Upload error details:",{error:f,message:f.message,statusCode:f.statusCode}),f.message?.includes("Bucket not found")){console.log("Bucket not found, attempting to create...");const{data:p,error:g}=await J.storage.createBucket("media",{public:!0,allowedMimeTypes:["image/*"],fileSizeLimit:10485760});if(g){console.error("Could not create bucket:",g),console.log("Retrying upload after bucket creation attempt...");const{data:b,error:v}=await J.storage.from("media").upload(u,e,{cacheControl:"3600",upsert:!1});if(v)throw console.error("Retry failed:",v),new Error(`Storage error: ${v.message}. Please check Supabase Storage configuration.`);return this.createMediaFileRecord(u,e,s,b)}else{console.log("Bucket created successfully, retrying upload...");const{data:b,error:v}=await J.storage.from("media").upload(u,e,{cacheControl:"3600",upsert:!1});if(v)throw new Error(`Upload failed after creating bucket: ${v.message}`);return this.createMediaFileRecord(u,e,s,b)}}throw f}return this.createMediaFileRecord(u,e,s,h)}catch(r){throw console.error("Error uploading image:",r),r}}static async getMediaFiles(e){let s=J.from("media_files").select("*").eq("status","active").order("created_at",{ascending:!1});e?.category&&(s=s.eq("category",e.category)),e?.folder_id&&(s=s.eq("folder_id",e.folder_id)),e?.tags&&e.tags.length>0&&(s=s.contains("tags",e.tags)),e?.search&&(s=s.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%,alt_text.ilike.%${e.search}%`)),e?.limit&&(s=s.limit(e.limit)),e?.offset&&(s=s.range(e.offset,e.offset+(e?.limit||20)-1));const{data:r,error:l}=await s;if(l)throw console.error("Error fetching media files:",l),l;return r||[]}static async getMediaFile(e){const{data:s,error:r}=await J.from("media_files").select("*").eq("id",e).single();if(r)throw console.error("Error fetching media file:",r),r;return s}static async updateMediaFile(e,s){const{data:r,error:l}=await J.from("media_files").update(s).eq("id",e).select().single();if(l)throw console.error("Error updating media file:",l),l;return r}static async deleteMediaFile(e){const s=await this.getMediaFile(e);if(!s)throw new Error("Media file not found");const{error:r}=await J.from("media_files").update({status:"deleted"}).eq("id",e);if(r)throw console.error("Error deleting media file:",r),r;const{error:l}=await J.storage.from("media").remove([s.filename]);l&&console.error("Error deleting file from storage:",l)}static async getFolders(){const{data:e,error:s}=await J.from("media_folders").select("*").order("path");if(s)throw console.error("Error fetching folders:",s),s;return e||[]}static async createFolder(e,s){let r="/";if(s){const u=await J.from("media_folders").select("path").eq("id",s).single();u.data&&(r=u.data.path+e+"/")}else r="/"+e+"/";const{data:l,error:o}=await J.from("media_folders").insert({name:e,parent_id:s,path:r}).select().single();if(o)throw console.error("Error creating folder:",o),o;return l}static async trackUsage(e,s,r,l){const{error:o}=await J.from("media_usage").upsert({media_file_id:e,entity_type:s,entity_id:r,field_name:l});if(o)throw console.error("Error tracking media usage:",o),o}static async getMediaUsage(e){const{data:s,error:r}=await J.from("media_usage").select("*").eq("media_file_id",e);if(r)throw console.error("Error fetching media usage:",r),r;return s||[]}static async getMediaStatistics(){const{data:e,error:s}=await J.rpc("get_media_statistics");if(s)throw console.error("Error fetching media statistics:",s),s;return e}}function IF({onSelectImage:t,onClose:e,category:s="events",currentImageUrl:r}){const[l,o]=O.useState([]),[u,h]=O.useState(!0),[f,p]=O.useState(""),[g,b]=O.useState(r||null),[v,w]=O.useState("grid"),[x,j]=O.useState("gallery"),[N,T]=O.useState(""),[S,k]=O.useState(!1),[Z,R]=O.useState(!1),U=[{id:"default-1",name:"Conference",url:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800"},{id:"default-2",name:"Meeting",url:"https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=800"},{id:"default-3",name:"Workshop",url:"https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=800"},{id:"default-4",name:"Presentation",url:"https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=800"},{id:"default-5",name:"Networking",url:"https://images.unsplash.com/photo-1559223607-a43c990c692c?w=800"},{id:"default-6",name:"Team Event",url:"https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=800"},{id:"default-7",name:"Training",url:"https://images.unsplash.com/photo-1591115765373-5207764f72e7?w=800"},{id:"default-8",name:"Business",url:"https://images.unsplash.com/photo-1542744173-8e7e53415bb0?w=800"},{id:"default-9",name:"Seminar",url:"https://images.unsplash.com/photo-1560439514-4e9645039924?w=800"},{id:"default-10",name:"Virtual Event",url:"https://images.unsplash.com/photo-1588196749597-9ff075ee6b5b?w=800"},{id:"default-11",name:"Panel",url:"https://images.unsplash.com/photo-1582192730841-2a682d7375f9?w=800"},{id:"default-12",name:"Awards",url:"https://images.unsplash.com/photo-1569163139394-de4798aa62b6?w=800"}];O.useEffect(()=>{B()},[s]);const B=async()=>{try{h(!0);const V=await kj.getMediaFiles({category:s,search:f});o(V||[])}catch(V){console.error("Error loading images:",V),o([])}finally{h(!1)}},A=async V=>{try{if(k(!0),!V.type.startsWith("image/"))throw new Error("Please select an image file");if(V.size>10*1024*1024)throw new Error("Image size must be less than 10MB");const te=await kj.uploadImage(V,{title:V.name.split(".")[0],category:s,alt_text:V.name});te&&(ye("success","Image uploaded successfully"),o([te,...l]),b(te.url),j("gallery"))}catch(te){if(console.error("Error uploading image:",te),te.message?.includes("relation")||te.message?.includes("media_files")){ye("warning","Database not configured. Using direct upload.");const $=new FileReader;$.onloadend=()=>{const Y=$.result;t(Y),e()},$.readAsDataURL(V)}else ye("error",te.message||"Failed to upload image")}finally{k(!1)}},C=O.useCallback(V=>{V.preventDefault(),V.stopPropagation(),R(!1),V.dataTransfer.files&&V.dataTransfer.files[0]&&A(V.dataTransfer.files[0])},[]),z=O.useCallback(V=>{V.preventDefault(),V.stopPropagation(),V.type==="dragenter"||V.type==="dragover"?R(!0):V.type==="dragleave"&&R(!1)},[]),L=()=>{if(N)try{new URL(N),t(N),e()}catch{ye("error","Please enter a valid URL")}},q=()=>{g&&(t(g),e())},P=l.filter(V=>!f||V.title?.toLowerCase().includes(f.toLowerCase())||V.original_filename?.toLowerCase().includes(f.toLowerCase()));return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Select Image"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:i.jsx(Hi,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"flex border-b",children:[i.jsx("button",{onClick:()=>j("gallery"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${x==="gallery"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:"Gallery"}),i.jsx("button",{onClick:()=>j("upload"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${x==="upload"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:"Upload New"}),i.jsx("button",{onClick:()=>j("url"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${x==="url"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:"From URL"})]}),i.jsx("div",{className:"flex-1 overflow-hidden",children:x==="gallery"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[i.jsx("div",{className:"flex items-center gap-4 flex-1",children:i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Ny,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(Ae,{placeholder:"Search images...",value:f,onChange:V=>p(V.target.value),className:"pl-10"})]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>w("grid"),className:`p-2 rounded ${v==="grid"?"bg-gray-200":"hover:bg-gray-100"}`,title:"Grid View",children:i.jsx(H8,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>w("list"),className:`p-2 rounded ${v==="list"?"bg-gray-200":"hover:bg-gray-100"}`,title:"List View",children:i.jsx(X8,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(Bi,{className:"h-8 w-8 animate-spin text-primary-600"})}):v==="grid"?i.jsxs(i.Fragment,{children:[P.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Your Images"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:P.map(V=>i.jsxs("div",{onClick:()=>b(V.url),className:`relative cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${g===V.url?"border-primary-500 shadow-lg":"border-gray-200 hover:border-gray-400"}`,children:[i.jsx("img",{src:V.thumbnail_url||V.url,alt:V.title||"Image",className:"w-full h-32 object-cover"}),V.title&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2",children:i.jsx("p",{className:"text-white text-xs truncate",children:V.title})}),g===V.url&&i.jsx("div",{className:"absolute top-2 right-2 bg-primary-500 rounded-full p-1",children:i.jsx(Vh,{className:"h-4 w-4 text-white"})})]},V.id))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Stock Images"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:U.map(V=>i.jsxs("div",{onClick:()=>b(V.url),className:`relative cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${g===V.url?"border-primary-500 shadow-lg":"border-gray-200 hover:border-gray-400"}`,children:[i.jsx("img",{src:V.url,alt:V.name,className:"w-full h-32 object-cover"}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2",children:i.jsx("p",{className:"text-white text-xs truncate",children:V.name})}),g===V.url&&i.jsx("div",{className:"absolute top-2 right-2 bg-primary-500 rounded-full p-1",children:i.jsx(Vh,{className:"h-4 w-4 text-white"})})]},V.id))})]})]}):i.jsxs("div",{className:"space-y-2",children:[P.map(V=>i.jsxs("div",{onClick:()=>b(V.url),className:`flex items-center gap-4 p-3 rounded-lg cursor-pointer transition-colors ${g===V.url?"bg-primary-50 border border-primary-500":"hover:bg-gray-50 border border-gray-200"}`,children:[i.jsx("img",{src:V.thumbnail_url||V.url,alt:V.title||"Image",className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:V.title||"Untitled"}),i.jsx("p",{className:"text-sm text-gray-500",children:V.category})]}),g===V.url&&i.jsx(Vh,{className:"h-5 w-5 text-primary-600"})]},V.id)),i.jsx("h3",{className:"text-sm font-semibold text-gray-700 mt-4 mb-2",children:"Stock Images"}),U.map(V=>i.jsxs("div",{onClick:()=>b(V.url),className:`flex items-center gap-4 p-3 rounded-lg cursor-pointer transition-colors ${g===V.url?"bg-primary-50 border border-primary-500":"hover:bg-gray-50 border border-gray-200"}`,children:[i.jsx("img",{src:V.url,alt:V.name,className:"w-16 h-16 object-cover rounded"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:V.name}),i.jsx("p",{className:"text-sm text-gray-500",children:"Stock Photo"})]}),g===V.url&&i.jsx(Vh,{className:"h-5 w-5 text-primary-600"})]},V.id))]})})]}):x==="upload"?i.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:i.jsxs("div",{className:`w-full max-w-md p-8 border-2 border-dashed rounded-lg transition-colors ${Z?"border-primary-500 bg-primary-50":"border-gray-300"}`,onDrop:C,onDragEnter:z,onDragLeave:z,onDragOver:z,children:[i.jsx("input",{type:"file",id:"file-upload",accept:"image/*",className:"hidden",onChange:V=>{const te=V.target.files?.[0];te&&A(te)},disabled:S}),i.jsx("label",{htmlFor:"file-upload",className:"flex flex-col items-center cursor-pointer",children:S?i.jsxs(i.Fragment,{children:[i.jsx(Bi,{className:"h-12 w-12 text-primary-600 animate-spin mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Uploading..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Fi,{className:"h-12 w-12 text-gray-400 mb-4"}),i.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"Click to upload or drag and drop"}),i.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]})}):x==="url"?i.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL"}),i.jsx(Ae,{type:"url",placeholder:"https://example.com/image.jpg",value:N,onChange:V=>T(V.target.value),onKeyPress:V=>{V.key==="Enter"&&L()}}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Enter a direct link to an image file"}),N&&i.jsxs("div",{className:"mt-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview:"}),i.jsx("img",{src:N,alt:"Preview",className:"w-full h-48 object-cover rounded-lg border",onError:V=>{const te=V.target;te.style.display="none"},onLoad:V=>{const te=V.target;te.style.display="block"}})]})]})}):null}),i.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t bg-gray-50",children:[i.jsx(ce,{variant:"outline",onClick:e,children:"Cancel"}),x==="gallery"&&i.jsx(ce,{onClick:q,disabled:!g,children:"Select Image"}),x==="url"&&i.jsx(ce,{onClick:L,disabled:!N,children:"Use This URL"})]})]})})}const{CPD_CATEGORIES:$F}=Gl;function UF({event:t,categories:e,onClose:s,onSuccess:r}){const[l,o]=O.useState(!1),[u,h]=O.useState("basic"),[f,p]=O.useState(!1),[g,b]=O.useState({title:"",description:"",short_description:"",category_id:"",start_date:"",end_date:"",timezone:"Australia/Sydney",location_type:"physical",venue_name:"",address_line1:"",city:"",state:"",postal_code:"",country:"Australia",virtual_link:"",capacity:50,member_price:0,non_member_price:0,early_bird_price:void 0,early_bird_end_date:void 0,cpd_points:1,cpd_category:"",visibility:"public",featured:!1,allow_guests:!1,max_guests_per_registration:0,requires_approval:!1,image_url:""});O.useEffect(()=>{t&&(console.log(" [EventFormModal] Loading event data:",{id:t.id,title:t.title,description_length:t.description?.length,description_preview:t.description?.substring(0,100)}),b({title:t.title,description:t.description||"",short_description:t.short_description||"",category_id:t.category_id||"",start_date:t.start_date.slice(0,16),end_date:t.end_date.slice(0,16),timezone:t.timezone,location_type:t.location_type,venue_name:t.venue_name||"",address_line1:t.address_line1||"",city:t.city||"",state:t.state||"",postal_code:t.postal_code||"",country:t.country,virtual_link:t.virtual_link||"",capacity:t.capacity,member_price:t.member_price_cents/100,non_member_price:t.non_member_price_cents/100,early_bird_price:t.early_bird_price_cents?t.early_bird_price_cents/100:void 0,early_bird_end_date:t.early_bird_end_date?.slice(0,16),cpd_points:t.cpd_points,cpd_category:t.cpd_category||"",visibility:t.visibility,featured:t.featured,allow_guests:t.allow_guests,max_guests_per_registration:t.max_guests_per_registration,requires_approval:t.requires_approval,image_url:t.image_url||""}))},[t]);const v=async x=>{if(x.preventDefault(),console.log(" [EventFormModal] Submitting form with data:",{title:g.title,description_length:g.description?.length,description_preview:g.description?.substring(0,100),full_formData:g}),!g.title||!g.start_date||!g.end_date){ye("error","Please fill in all required fields");return}if(new Date(g.end_date)<new Date(g.start_date)){ye("error","End date must be after start date");return}o(!0);try{const j={...g,start_date:new Date(g.start_date).toISOString(),end_date:new Date(g.end_date).toISOString(),early_bird_end_date:g.early_bird_end_date?new Date(g.early_bird_end_date).toISOString():void 0};console.log(" [EventFormModal] Data being sent to service:",{description_length:j.description?.length,description_preview:j.description?.substring(0,100),full_data:j}),t?(console.log(" [EventFormModal] Updating event ID:",t.id),await Yt.updateEvent(t.id,j),ye("success","Event updated successfully")):(console.log(" [EventFormModal] Creating new event"),await Yt.createEvent(j),ye("success","Event created successfully")),r()}catch(j){console.error(" [EventFormModal] Error saving event:",j),ye("error","Failed to save event. Check console for details.")}finally{o(!1)}},w=[{id:"basic",label:"Basic Info",icon:er},{id:"location",label:"Location",icon:Tc},{id:"capacity",label:"Capacity & Pricing",icon:ni},{id:"cpd",label:"CPD & Settings",icon:rn}];return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[i.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Edit Event":"Create New Event"}),i.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:i.jsx(Hi,{className:"h-6 w-6"})})]}),i.jsx("div",{className:"flex border-b",children:w.map(x=>{const j=x.icon;return i.jsxs("button",{onClick:()=>h(x.id),className:`flex items-center px-4 py-3 text-sm font-medium border-b-2 transition-colors ${u===x.id?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:[i.jsx(j,{className:"h-4 w-4 mr-2"}),x.label]},x.id)})}),i.jsxs("form",{onSubmit:v,className:"flex-1 overflow-y-auto",children:[i.jsxs("div",{className:"p-6 space-y-6",children:[u==="basic"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"title",children:"Event Title *"}),i.jsx(Ae,{id:"title",value:g.title,onChange:x=>b({...g,title:x.target.value}),placeholder:"Enter event title",required:!0})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"short_description",children:"Short Description"}),i.jsx(Ae,{id:"short_description",value:g.short_description,onChange:x=>b({...g,short_description:x.target.value}),placeholder:"Brief description for event cards (max 500 characters)",maxLength:500})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"description",children:"Full Description"}),i.jsx(PF,{content:g.description,onChange:x=>{console.log(" [EventFormModal] Description changed:",{length:x?.length,preview:x?.substring(0,100)}),b(j=>({...j,description:x}))},placeholder:"Enter detailed event description...",height:"250px",enableDebugLogs:!0}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tip: Use the toolbar to format text and add images."})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"category",children:"Category"}),i.jsxs("select",{id:"category",value:g.category_id,onChange:x=>b({...g,category_id:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[i.jsx("option",{value:"",children:"Select a category"}),e.map(x=>i.jsx("option",{value:x.id,children:x.name},x.id))]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"start_date",children:"Start Date & Time *"}),i.jsx(Ae,{id:"start_date",type:"datetime-local",value:g.start_date,onChange:x=>b({...g,start_date:x.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"end_date",children:"End Date & Time *"}),i.jsx(Ae,{id:"end_date",type:"datetime-local",value:g.end_date,onChange:x=>b({...g,end_date:x.target.value}),required:!0})]})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"timezone",children:"Timezone"}),i.jsxs("select",{id:"timezone",value:g.timezone,onChange:x=>b({...g,timezone:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[i.jsx("option",{value:"Australia/Sydney",children:"Sydney"}),i.jsx("option",{value:"Australia/Melbourne",children:"Melbourne"}),i.jsx("option",{value:"Australia/Brisbane",children:"Brisbane"}),i.jsx("option",{value:"Australia/Perth",children:"Perth"}),i.jsx("option",{value:"Australia/Adelaide",children:"Adelaide"})]})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"image_url",children:"Event Image"}),g.image_url&&i.jsx("div",{className:"mb-3",children:i.jsx("img",{src:g.image_url,alt:"Event preview",className:"w-full h-48 object-cover rounded-md border",onError:x=>{const j=x.target;j.onerror=null,j.src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=400"}})}),i.jsxs(ce,{type:"button",variant:"outline",onClick:()=>p(!0),className:"w-full",children:[i.jsx(Fi,{className:"h-4 w-4 mr-2"}),g.image_url?"Change Image":"Select Image"]}),g.image_url&&i.jsx(ce,{type:"button",variant:"ghost",onClick:()=>b({...g,image_url:""}),className:"w-full mt-2 text-red-600 hover:text-red-700",children:"Remove Image"})]})]}),u==="location"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(xe,{children:"Event Type"}),i.jsxs("div",{className:"flex gap-4 mt-2",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",value:"physical",checked:g.location_type==="physical",onChange:x=>b({...g,location_type:x.target.value}),className:"mr-2"}),i.jsx(Tf,{className:"h-4 w-4 mr-1"}),"In-Person"]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",value:"virtual",checked:g.location_type==="virtual",onChange:x=>b({...g,location_type:x.target.value}),className:"mr-2"}),i.jsx(sS,{className:"h-4 w-4 mr-1"}),"Virtual"]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",value:"hybrid",checked:g.location_type==="hybrid",onChange:x=>b({...g,location_type:x.target.value}),className:"mr-2"}),"Hybrid"]})]})]}),(g.location_type==="physical"||g.location_type==="hybrid")&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"venue_name",children:"Venue Name"}),i.jsx(Ae,{id:"venue_name",value:g.venue_name,onChange:x=>b({...g,venue_name:x.target.value}),placeholder:"e.g., Sydney Convention Centre"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"address_line1",children:"Address"}),i.jsx(Ae,{id:"address_line1",value:g.address_line1,onChange:x=>b({...g,address_line1:x.target.value}),placeholder:"Street address"})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"city",children:"City"}),i.jsx(Ae,{id:"city",value:g.city,onChange:x=>b({...g,city:x.target.value})})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"state",children:"State"}),i.jsx(Ae,{id:"state",value:g.state,onChange:x=>b({...g,state:x.target.value})})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"postal_code",children:"Postal Code"}),i.jsx(Ae,{id:"postal_code",value:g.postal_code,onChange:x=>b({...g,postal_code:x.target.value})})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"country",children:"Country"}),i.jsx(Ae,{id:"country",value:g.country,onChange:x=>b({...g,country:x.target.value})})]})]})]}),(g.location_type==="virtual"||g.location_type==="hybrid")&&i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"virtual_link",children:"Virtual Event Link"}),i.jsx(Ae,{id:"virtual_link",value:g.virtual_link,onChange:x=>b({...g,virtual_link:x.target.value}),placeholder:"https://zoom.us/j/..."})]})]}),u==="capacity"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"capacity",children:"Event Capacity"}),i.jsx(Ae,{id:"capacity",type:"number",value:g.capacity,onChange:x=>b({...g,capacity:parseInt(x.target.value)}),min:"1"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"member_price",children:"Member Price ($)"}),i.jsx(Ae,{id:"member_price",type:"number",value:g.member_price,onChange:x=>b({...g,member_price:parseFloat(x.target.value)}),min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"non_member_price",children:"Non-Member Price ($)"}),i.jsx(Ae,{id:"non_member_price",type:"number",value:g.non_member_price,onChange:x=>b({...g,non_member_price:parseFloat(x.target.value)}),min:"0",step:"0.01"})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Early Bird Pricing (Optional)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"early_bird_price",children:"Early Bird Price ($)"}),i.jsx(Ae,{id:"early_bird_price",type:"number",value:g.early_bird_price||"",onChange:x=>b({...g,early_bird_price:x.target.value?parseFloat(x.target.value):void 0}),min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"early_bird_end_date",children:"Early Bird End Date"}),i.jsx(Ae,{id:"early_bird_end_date",type:"datetime-local",value:g.early_bird_end_date||"",onChange:x=>b({...g,early_bird_end_date:x.target.value||void 0})})]})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Guest Settings"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:g.allow_guests,onChange:x=>b({...g,allow_guests:x.target.checked}),className:"mr-2"}),"Allow guests"]}),g.allow_guests&&i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"max_guests",children:"Max Guests per Registration"}),i.jsx(Ae,{id:"max_guests",type:"number",value:g.max_guests_per_registration,onChange:x=>b({...g,max_guests_per_registration:parseInt(x.target.value)}),min:"0"})]})]})]})]}),u==="cpd"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"CPD Settings"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"cpd_points",children:"CPD Points"}),i.jsx(Ae,{id:"cpd_points",type:"number",value:g.cpd_points,onChange:x=>b({...g,cpd_points:parseFloat(x.target.value)}),min:"0",step:"0.5"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"cpd_category",children:"CPD Category"}),i.jsxs("select",{id:"cpd_category",value:g.cpd_category,onChange:x=>b({...g,cpd_category:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[i.jsx("option",{value:"",children:"Select CPD category"}),$F.map(x=>i.jsx("option",{value:x.name,children:x.name},x.id))]})]})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Visibility Settings"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(xe,{children:"Event Visibility"}),i.jsxs("select",{value:g.visibility,onChange:x=>b({...g,visibility:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[i.jsx("option",{value:"public",children:"Public - Everyone can see"}),i.jsx("option",{value:"members",children:"Members Only"}),i.jsx("option",{value:"private",children:"Private - Invite only"})]})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:g.featured,onChange:x=>b({...g,featured:x.target.checked}),className:"mr-2"}),"Featured Event (shown prominently)"]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:g.requires_approval,onChange:x=>b({...g,requires_approval:x.target.checked}),className:"mr-2"}),"Require approval for registrations"]})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50",children:[i.jsx(ce,{type:"button",variant:"outline",onClick:s,disabled:l,children:"Cancel"}),i.jsx(ce,{type:"submit",disabled:l,children:l?"Saving...":t?"Update Event":"Create Event"})]})]})]}),f&&i.jsx(IF,{onSelectImage:x=>{b({...g,image_url:x}),p(!1)},onClose:()=>p(!1),category:"events",currentImageUrl:g.image_url})]})}function zF(){const t=or(),[e,s]=O.useState([]),[r,l]=O.useState([]),[o,u]=O.useState(!0),[h,f]=O.useState(""),[p,g]=O.useState("all"),[b,v]=O.useState(!1),[w,x]=O.useState(null),[j,N]=O.useState(null);O.useEffect(()=>{T()},[]);const T=async()=>{try{u(!0);const[C,z]=await Promise.all([Yt.getEvents(),Yt.getCategories()]);s(C),l(z)}catch(C){console.error("Error loading events:",C),ye("error","Failed to load events")}finally{u(!1)}},S=()=>{x(null),v(!0)},k=C=>{x(C),v(!0)},Z=async C=>{try{const z={...C,title:`${C.title} (Copy)`,slug:void 0,status:"draft",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};delete z.id,await Yt.createEvent(z),ye("success","Event duplicated successfully"),T()}catch(z){console.error("Error duplicating event:",z),ye("error","Failed to duplicate event")}},R=async C=>{try{await Yt.deleteEvent(C),ye("success","Event deleted successfully"),N(null),T()}catch(z){console.error("Error deleting event:",z),ye("error","Failed to delete event")}},U=async C=>{try{C.status==="published"?(await Yt.updateEvent(C.id,{status:"draft"}),ye("success","Event unpublished")):(await Yt.publishEvent(C.id),ye("success","Event published successfully")),T()}catch(z){console.error("Error publishing event:",z),ye("error","Failed to publish event")}},B=e.filter(C=>!(h&&!C.title.toLowerCase().includes(h.toLowerCase())||p!=="all"&&C.status!==p)),A=C=>{const z={draft:"bg-gray-100 text-gray-800",published:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"};return i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${z[C]}`,children:C.charAt(0).toUpperCase()+C.slice(1)})};return o?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Event Management"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Create and manage events"})]}),i.jsxs(ce,{onClick:S,children:[i.jsx(pc,{className:"h-4 w-4 mr-2"}),"Create Event"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsx(ge,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Events"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),i.jsx(er,{className:"h-8 w-8 text-gray-400"})]})}),i.jsx(ge,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Published"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.filter(C=>C.status==="published").length})]}),i.jsx(ti,{className:"h-8 w-8 text-green-400"})]})}),i.jsx(ge,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Draft"}),i.jsx("p",{className:"text-2xl font-bold text-gray-600",children:e.filter(C=>C.status==="draft").length})]}),i.jsx(g0,{className:"h-8 w-8 text-gray-400"})]})}),i.jsx(ge,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Upcoming"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.filter(C=>new Date(C.start_date)>new Date).length})]}),i.jsx(er,{className:"h-8 w-8 text-blue-400"})]})})]}),i.jsx(ge,{className:"p-4 mb-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx(Ae,{placeholder:"Search events...",value:h,onChange:C=>f(C.target.value),className:"flex-1"}),i.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:p,onChange:C=>g(C.target.value),children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"}),i.jsx("option",{value:"cancelled",children:"Cancelled"}),i.jsx("option",{value:"completed",children:"Completed"})]})]})}),i.jsx(ge,{children:i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capacity"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(C=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.title}),C.category&&i.jsx("div",{className:"text-xs text-gray-500",children:C.category.name})]})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[rs(new Date(C.start_date),"MMM d, yyyy"),i.jsx("div",{className:"text-xs text-gray-500",children:rs(new Date(C.start_date),"h:mm a")})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.location_type==="virtual"?"Online":C.venue_name||C.city}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.capacity}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A(C.status)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>t(`/events/${C.slug}`),children:i.jsx(ti,{className:"h-4 w-4"})}),i.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>k(C),children:i.jsx(g0,{className:"h-4 w-4"})}),i.jsxs("div",{className:"relative",children:[i.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>N(j===C.id?null:C.id),children:i.jsx(M8,{className:"h-4 w-4"})}),j===C.id&&i.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border",children:i.jsxs("div",{className:"py-1",children:[i.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>U(C),children:C.status==="published"?"Unpublish":"Publish"}),i.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>Z(C),children:[i.jsx(JN,{className:"h-4 w-4 inline mr-2"}),"Duplicate"]}),i.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>t(`/admin/events/${C.id}/registrations`),children:"View Registrations"}),i.jsx("hr",{className:"my-1"}),i.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",onClick:()=>R(C.id),children:[i.jsx(Ey,{className:"h-4 w-4 inline mr-2"}),"Delete"]})]})})]})]})})]},C.id))})]}),B.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(er,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"No events found"}),i.jsx(ce,{onClick:S,className:"mt-4",children:"Create your first event"})]})]})}),b&&i.jsx(UF,{event:w,categories:r,onClose:()=>{v(!1),x(null)},onSuccess:()=>{v(!1),x(null),T()}})]})}function BF(){const{user:t}=Bt(),[e,s]=O.useState(!1),[r,l]=O.useState(!1),[o,u]=O.useState(!1),[h,f]=O.useState(t?.email||""),[p,g]=O.useState(!1),[b,v]=O.useState({smtp_host:"",smtp_port:587,smtp_secure:!0,smtp_auth_type:"LOGIN",smtp_username:"",smtp_password:"",from_email:"",from_name:"English Australia",reply_to_email:"",reply_to_name:"",enabled:!1,test_mode:!1,test_email:"",daily_limit:1e3,hourly_limit:100,emails_sent_today:0,emails_sent_this_hour:0}),w=[{name:"Gmail",host:"smtp.gmail.com",port:587,secure:!0},{name:"Outlook/Office365",host:"smtp.office365.com",port:587,secure:!0},{name:"SendGrid",host:"smtp.sendgrid.net",port:587,secure:!0},{name:"Mailgun",host:"smtp.mailgun.org",port:587,secure:!0},{name:"Amazon SES",host:"email-smtp.us-east-1.amazonaws.com",port:587,secure:!0},{name:"Custom",host:"",port:587,secure:!0}];O.useEffect(()=>{x()},[]);const x=async()=>{try{s(!0);const k=await Ii.checkDatabaseAvailable();g(!k);const Z=await Ii.getSMTPSettings();Z.data&&v(Z.data),g(Z.isLocal)}catch(k){console.error("Error loading SMTP settings:",k),ye("error","Failed to load SMTP settings")}finally{s(!1)}},j=k=>{v({...b,smtp_host:k.host,smtp_port:k.port,smtp_secure:k.secure})},N=async()=>{if(!b.smtp_host||!b.smtp_username||!b.from_email){ye("error","Please fill in all required fields");return}if(!b.smtp_password&&!b.id){ye("error","Password is required for new SMTP configuration");return}try{s(!0),await Ii.saveSMTPSettings(b)?(ye("success","SMTP settings saved successfully"),x()):ye("error","Failed to save SMTP settings")}catch(k){console.error("Error saving SMTP settings:",k),ye("error","Failed to save SMTP settings")}finally{s(!1)}},T=async()=>{try{l(!0);const k=await Ii.testSMTPConnection(b);k.success?ye("success",k.message):ye("error",k.message)}catch(k){console.error("Error testing SMTP connection:",k),ye("error","Failed to test SMTP connection")}finally{l(!1)}},S=async()=>{if(!h){ye("error","Please enter a test email address");return}try{l(!0);const k=await Ii.sendTestEmail(h);k.success?ye("success",k.message):ye("error",k.message)}catch(k){console.error("Error sending test email:",k),ye("error","Failed to send test email")}finally{l(!1)}};return i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"SMTP Settings"}),i.jsx("p",{className:"text-gray-600",children:"Configure email sending settings for the system"})]}),i.jsx(ge,{className:"mb-6 bg-blue-50 border-blue-200",children:i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx(Ll,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-semibold mb-2 text-blue-900",children:"Choose Your Email Setup Method:"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded",children:[i.jsx("p",{className:"font-semibold text-green-900 mb-1",children:" Option 1: EmailJS (Recommended - Works Immediately!)"}),i.jsx("p",{className:"text-green-800 mb-2",children:"Send emails directly from the browser. No server setup needed!"}),i.jsxs("a",{href:"/admin/emailjs-config",className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:[i.jsx(ql,{className:"w-4 h-4"}),"Configure EmailJS Now"]})]}),i.jsxs("div",{className:"p-3 bg-white border border-blue-200 rounded",children:[i.jsx("p",{className:"font-semibold text-blue-900 mb-1",children:"Option 2: SMTP + Edge Function (Advanced)"}),i.jsx("p",{className:"text-blue-800",children:"Configure SMTP settings below, then deploy an Edge Function for server-side sending."})]})]}),p&&i.jsx("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded",children:i.jsxs("p",{className:"text-yellow-800",children:[i.jsx("strong",{children:"Note:"})," Settings are being saved locally in your browser."]})})]})]})})}),i.jsx(ge,{className:"mb-6",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Setup"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:w.map(k=>i.jsx(ce,{variant:"outline",size:"sm",onClick:()=>j(k),className:b.smtp_host===k.host?"border-primary-500 bg-primary-50":"",children:k.name},k.name))})]})}),i.jsx(ge,{className:"mb-6",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"SMTP Server Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"smtp_host",children:"SMTP Host *"}),i.jsx(Ae,{id:"smtp_host",value:b.smtp_host,onChange:k=>v({...b,smtp_host:k.target.value}),placeholder:"smtp.gmail.com",required:!0})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"smtp_port",children:"SMTP Port *"}),i.jsx(Ae,{id:"smtp_port",type:"number",value:b.smtp_port,onChange:k=>v({...b,smtp_port:parseInt(k.target.value)}),placeholder:"587",required:!0})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"smtp_username",children:"Username *"}),i.jsx(Ae,{id:"smtp_username",value:b.smtp_username,onChange:k=>v({...b,smtp_username:k.target.value}),placeholder:"your-email@gmail.com",required:!0})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"smtp_password",children:"Password *"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ae,{id:"smtp_password",type:o?"text":"password",value:b.smtp_password||"",onChange:k=>v({...b,smtp_password:k.target.value}),placeholder:b.id?"(unchanged)":"Enter password"}),i.jsx("button",{type:"button",onClick:()=>u(!o),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:o?i.jsx(uf,{className:"h-4 w-4"}):i.jsx(ti,{className:"h-4 w-4"})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For Gmail, use an App Password instead of your regular password"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"from_email",children:"From Email *"}),i.jsx(Ae,{id:"from_email",type:"email",value:b.from_email,onChange:k=>v({...b,from_email:k.target.value}),placeholder:"noreply@englishaustralia.com.au",required:!0})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"from_name",children:"From Name *"}),i.jsx(Ae,{id:"from_name",value:b.from_name,onChange:k=>v({...b,from_name:k.target.value}),placeholder:"English Australia",required:!0})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"reply_to_email",children:"Reply-To Email"}),i.jsx(Ae,{id:"reply_to_email",type:"email",value:b.reply_to_email||"",onChange:k=>v({...b,reply_to_email:k.target.value}),placeholder:"info@englishaustralia.com.au"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"reply_to_name",children:"Reply-To Name"}),i.jsx(Ae,{id:"reply_to_name",value:b.reply_to_name||"",onChange:k=>v({...b,reply_to_name:k.target.value}),placeholder:"English Australia Support"})]})]}),i.jsxs("div",{className:"mt-4 space-y-3",children:[i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:b.smtp_secure,onChange:k=>v({...b,smtp_secure:k.target.checked}),className:"rounded border-gray-300"}),i.jsx("span",{className:"text-sm",children:"Use TLS/SSL encryption"})]}),i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:b.enabled,onChange:k=>v({...b,enabled:k.target.checked}),className:"rounded border-gray-300"}),i.jsx("span",{className:"text-sm font-medium",children:"Enable email sending"})]}),i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:b.test_mode,onChange:k=>v({...b,test_mode:k.target.checked}),className:"rounded border-gray-300"}),i.jsx("span",{className:"text-sm",children:"Test mode (all emails go to test address)"})]}),b.test_mode&&i.jsxs("div",{className:"ml-6",children:[i.jsx(xe,{htmlFor:"test_email_address",children:"Test Email Address"}),i.jsx(Ae,{id:"test_email_address",type:"email",value:b.test_email||"",onChange:k=>v({...b,test_email:k.target.value}),placeholder:"test@example.com"})]})]})]})}),i.jsx(ge,{className:"mb-6",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rate Limits"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"daily_limit",children:"Daily Email Limit"}),i.jsx(Ae,{id:"daily_limit",type:"number",value:b.daily_limit,onChange:k=>v({...b,daily_limit:parseInt(k.target.value)})}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Sent today: ",b.emails_sent_today]})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"hourly_limit",children:"Hourly Email Limit"}),i.jsx(Ae,{id:"hourly_limit",type:"number",value:b.hourly_limit,onChange:k=>v({...b,hourly_limit:parseInt(k.target.value)})}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Sent this hour: ",b.emails_sent_this_hour]})]})]})]})}),i.jsx(ge,{className:"mb-6",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Test Configuration"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs(ce,{variant:"outline",onClick:T,disabled:r||!b.smtp_host||!b.smtp_username,children:[i.jsx(gq,{className:"h-4 w-4 mr-2"}),r?"Testing...":"Test Connection"]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Test if the SMTP server can be reached with current settings"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"test_email_to",children:"Send Test Email To"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ae,{id:"test_email_to",type:"email",value:h,onChange:k=>f(k.target.value),placeholder:"test@example.com",className:"flex-1"}),i.jsxs(ce,{onClick:S,disabled:r||!b.enabled||!h,children:[i.jsx(Sy,{className:"h-4 w-4 mr-2"}),r?"Sending...":"Send Test"]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Send a test email to verify everything is working"})]})]})]})}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(ce,{variant:"outline",onClick:x,disabled:e,children:"Cancel"}),i.jsxs(ce,{onClick:N,disabled:e,children:[i.jsx(jd,{className:"h-4 w-4 mr-2"}),e?"Saving...":"Save Settings"]})]}),i.jsx(ge,{className:"mt-6 bg-blue-50 border-blue-200",children:i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx(Ll,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-semibold mb-1",children:"Gmail Configuration Tips:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Enable 2-factor authentication in your Google account"}),i.jsx("li",{children:"Generate an App Password: Google Account  Security  2-Step Verification  App passwords"}),i.jsx("li",{children:"Use the App Password instead of your regular Gmail password"}),i.jsx("li",{children:"SMTP Host: smtp.gmail.com, Port: 587, Enable TLS"})]})]})]})})})]})}const Oa={customClass:{popup:"rounded-lg shadow-xl",title:"text-lg font-semibold text-gray-900",htmlContainer:"text-sm text-gray-600",confirmButton:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",cancelButton:"bg-gray-300 hover:bg-gray-400 text-gray-700 font-medium py-2 px-4 rounded-md transition-colors mr-2",denyButton:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition-colors mr-2"},buttonsStyling:!1},M0={success:(t,e)=>zt.fire({...Oa,icon:"success",title:t,text:e,timer:3e3,timerProgressBar:!0,showConfirmButton:!1}),error:(t,e)=>zt.fire({...Oa,icon:"error",title:t,text:e,confirmButtonText:"OK"}),warning:(t,e)=>zt.fire({...Oa,icon:"warning",title:t,text:e,confirmButtonText:"OK"}),info:(t,e)=>zt.fire({...Oa,icon:"info",title:t,text:e,confirmButtonText:"OK"}),confirm:(t,e,s="Yes",r="Cancel")=>zt.fire({...Oa,icon:"question",title:t,text:e,showCancelButton:!0,confirmButtonText:s,cancelButtonText:r}),confirmDelete:t=>zt.fire({...Oa,icon:"warning",title:"Are you sure?",text:`Do you want to delete ${t}? This action cannot be undone.`,showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",customClass:{...Oa.customClass,confirmButton:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}}),loading:(t="Processing...")=>zt.fire({...Oa,title:t,allowEscapeKey:!1,allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{zt.showLoading()}}),toast:{success:t=>zt.fire({toast:!0,position:"top-end",icon:"success",title:t,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}}),error:t=>zt.fire({toast:!0,position:"top-end",icon:"error",title:t,showConfirmButton:!1,timer:4e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}}),info:t=>zt.fire({toast:!0,position:"top-end",icon:"info",title:t,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}})},copyToClipboard:(t,e="Copied to clipboard!")=>{navigator.clipboard.writeText(t).then(()=>{M0.toast.success(e)}).catch(()=>{M0.toast.error("Failed to copy to clipboard")})}},Jo=(t,e,s)=>M0[t](e,s);function FF(){const[t,e]=O.useState(!1),[s,r]=O.useState(""),[l,o]=O.useState(!1),[u,h]=O.useState({serviceId:"",templateIdTest:"",templateIdRegistration:"",templateIdReminder:"",publicKey:""});O.useEffect(()=>{h({serviceId:localStorage.getItem("emailjs_service_id")||"",templateIdTest:localStorage.getItem("emailjs_template_test")||"",templateIdRegistration:localStorage.getItem("emailjs_template_registration")||"",templateIdReminder:localStorage.getItem("emailjs_template_reminder")||"",publicKey:localStorage.getItem("emailjs_public_key")||""})},[]);const f=()=>{e(!0),localStorage.setItem("emailjs_service_id",u.serviceId),localStorage.setItem("emailjs_template_test",u.templateIdTest),localStorage.setItem("emailjs_template_registration",u.templateIdRegistration),localStorage.setItem("emailjs_template_reminder",u.templateIdReminder),localStorage.setItem("emailjs_public_key",u.publicKey),Ii.initEmailJS(u.publicKey),Jo("success","EmailJS settings saved successfully!"),e(!1)},p=async()=>{if(!s){Jo("error","Please enter a test email address");return}if(!u.serviceId||!u.templateIdTest||!u.publicKey){Jo("error","Please configure EmailJS settings first");return}o(!0);try{const g=await Ii.sendTestEmail(s);g.success?Jo("success",g.message):Jo("error",g.message)}catch(g){Jo("error",g.message||"Failed to send test email")}finally{o(!1)}};return i.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"EmailJS Configuration"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Configure EmailJS to send emails directly from the browser without a backend server"})]}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(Y8,{className:"w-5 h-5 text-blue-600 mt-0.5"}),i.jsxs("div",{className:"space-y-3 flex-1",children:[i.jsx("h3",{className:"font-semibold text-blue-900",children:"Quick Setup Guide"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-blue-800",children:[i.jsxs("li",{children:["Create a free account at"," ",i.jsxs("a",{href:"https://www.emailjs.com/docs/get-started/sign-up/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline inline-flex items-center gap-1",children:["EmailJS.com",i.jsx(f_,{className:"w-3 h-3"})]})]}),i.jsxs("li",{children:["Add an email service (Gmail, Outlook, or SMTP) in your"," ",i.jsxs("a",{href:"https://dashboard.emailjs.com/admin",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline inline-flex items-center gap-1",children:["EmailJS Dashboard",i.jsx(f_,{className:"w-3 h-3"})]})]}),i.jsx("li",{children:"Create email templates for: Test Email, Event Registration, and Event Reminder"}),i.jsx("li",{children:"Copy your Service ID, Template IDs, and Public Key from the dashboard"}),i.jsx("li",{children:"Paste them in the form below and save"}),i.jsx("li",{children:"Send a test email to verify everything works!"})]}),i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3 mt-3",children:i.jsxs("p",{className:"text-xs text-yellow-800",children:[i.jsx("strong",{children:"Free Plan Limits:"})," 200 emails/month, 2 templates. Perfect for testing and small organizations."]})})]})]})}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[i.jsx(ql,{className:"w-5 h-5"}),"EmailJS Settings"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"serviceId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Service ID *"}),i.jsx("input",{type:"text",id:"serviceId",value:u.serviceId,onChange:g=>h({...u,serviceId:g.target.value}),placeholder:"e.g., service_abc123",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Found in: Email Services  Your Service  Service ID"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"publicKey",className:"block text-sm font-medium text-gray-700 mb-2",children:"Public Key *"}),i.jsx("input",{type:"text",id:"publicKey",value:u.publicKey,onChange:g=>h({...u,publicKey:g.target.value}),placeholder:"e.g., AbCdEfGhIjKlMnOpQr",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Found in: Account  API Keys  Public Key"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"templateIdTest",className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Email Template ID *"}),i.jsx("input",{type:"text",id:"templateIdTest",value:u.templateIdTest,onChange:g=>h({...u,templateIdTest:g.target.value}),placeholder:"e.g., template_test123",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Template for sending test emails"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"templateIdRegistration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration Template ID"}),i.jsx("input",{type:"text",id:"templateIdRegistration",value:u.templateIdRegistration,onChange:g=>h({...u,templateIdRegistration:g.target.value}),placeholder:"e.g., template_reg456",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Template for event registration confirmations"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"templateIdReminder",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reminder Template ID"}),i.jsx("input",{type:"text",id:"templateIdReminder",value:u.templateIdReminder,onChange:g=>h({...u,templateIdReminder:g.target.value}),placeholder:"e.g., template_rem789",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Template for event reminders"})]})]}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsxs("button",{onClick:f,disabled:t||!u.serviceId||!u.publicKey||!u.templateIdTest,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[i.jsx(jd,{className:"w-4 h-4"}),"Save Settings"]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mt-6",children:[i.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[i.jsx(jy,{className:"w-5 h-5"}),"Test Email Sending"]}),i.jsxs("div",{className:"flex gap-4 items-end",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{htmlFor:"testEmailAddress",className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Email Address"}),i.jsx("input",{type:"email",id:"testEmailAddress",value:s,onChange:g=>r(g.target.value),placeholder:"test@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("button",{onClick:p,disabled:l||!s||!u.serviceId||!u.publicKey,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[i.jsx(Sy,{className:"w-4 h-4"}),l?"Sending...":"Send Test"]})]}),u.serviceId&&u.publicKey&&i.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2 text-green-700 text-sm",children:[i.jsx(Ss,{className:"w-4 h-4"}),"EmailJS is configured and ready to send emails"]})})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mt-6",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[i.jsx(W8,{className:"w-5 h-5"}),"Template Variables Reference"]}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Use these variables in your EmailJS templates:"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Common Variables"}),i.jsxs("ul",{className:"space-y-1 text-gray-600 font-mono text-xs",children:[i.jsx("li",{children:"{{to_email}}"}),i.jsx("li",{children:"{{to_name}}"}),i.jsx("li",{children:"{{from_name}}"}),i.jsx("li",{children:"{{timestamp}}"})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Event Variables"}),i.jsxs("ul",{className:"space-y-1 text-gray-600 font-mono text-xs",children:[i.jsx("li",{children:"{{event_title}}"}),i.jsx("li",{children:"{{event_date}}"}),i.jsx("li",{children:"{{event_time}}"}),i.jsx("li",{children:"{{event_location}}"}),i.jsx("li",{children:"{{virtual_link}}"})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"User Variables"}),i.jsxs("ul",{className:"space-y-1 text-gray-600 font-mono text-xs",children:[i.jsx("li",{children:"{{user_name}}"}),i.jsx("li",{children:"{{user_email}}"}),i.jsx("li",{children:"{{registration_id}}"}),i.jsx("li",{children:"{{reminder_time}}"})]})]})]})]}),i.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500",children:["Need help? Check the"," ",i.jsx("a",{href:"https://www.emailjs.com/docs/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"EmailJS Documentation"})," or ",i.jsx("a",{href:"https://dashboard.emailjs.com/admin/templates",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Manage Your Templates"})]})]})}const HF=[{id:"tpl-1",name:"event-registration",subject:"Registration Confirmed: {{event_title}}",body_html:`<h2>Registration Confirmed!</h2>
<p>Dear {{user_name}},</p>
<p>Your registration for <strong>{{event_title}}</strong> has been confirmed.</p>
<p>Event Date: {{event_date}}</p>
<p>Location: {{event_location}}</p>`,body_text:"Registration confirmed for {{event_title}}",category:"event",variables:["user_name","event_title","event_date","event_location"],enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"tpl-2",name:"event-reminder",subject:"Reminder: {{event_title}} - {{reminder_time}}",body_html:`<h2>Event Reminder</h2>
<p>Dear {{user_name}},</p>
<p>This is a reminder about your upcoming event: <strong>{{event_title}}</strong></p>
<p>When: {{event_date}} at {{event_time}}</p>
<p>Where: {{event_location}}</p>`,body_text:"Reminder: {{event_title}} on {{event_date}}",category:"event",variables:["user_name","event_title","event_date","event_time","event_location","reminder_time"],enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"tpl-3",name:"cpd-approved",subject:"CPD Activity Approved: {{activity_title}}",body_html:`<h2>CPD Activity Approved</h2>
<p>Dear {{user_name}},</p>
<p>Your CPD activity "<strong>{{activity_title}}</strong>" has been approved.</p>
<p>Points Awarded: {{cpd_points}}</p>`,body_text:"CPD activity {{activity_title}} approved. Points: {{cpd_points}}",category:"cpd",variables:["user_name","activity_title","cpd_points","cpd_category"],enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];function VF(){const[t,e]=O.useState(HF),[s,r]=O.useState(null),[l,o]=O.useState(!1),[u,h]=O.useState(!1),[f,p]=O.useState("html"),[g,b]=O.useState("all"),[v,w]=O.useState({}),[x,j]=O.useState({}),N=[{value:"all",label:"All Categories"},{value:"event",label:"Events"},{value:"cpd",label:"CPD"},{value:"member",label:"Members"},{value:"system",label:"System"},{value:"custom",label:"Custom"}],T=g==="all"?t:t.filter(A=>A.category===g),S=A=>{r(A),w(A),o(!0);const C={};A.variables.forEach(z=>{C[z]=`[${z}]`}),j(C)},k=()=>{if(!v.name||!v.subject||!v.body_html){ye("error","Please fill in all required fields");return}e(t.map(A=>A.id===v.id?{...A,...v,updated_at:new Date().toISOString()}:A)),ye("success","Template saved successfully"),o(!1),r(null),w({})},Z=A=>{confirm("Are you sure you want to delete this template?")&&(e(t.filter(C=>C.id!==A)),ye("success","Template deleted successfully"))},R=A=>{const C={...A,id:`tpl-${Date.now()}`,name:`${A.name}-copy`,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};e([...t,C]),ye("success","Template duplicated successfully")},U=A=>{e(t.map(C=>C.id===A?{...C,enabled:!C.enabled}:C))},B=()=>{if(!v.body_html)return"";let A=v.body_html;return Object.entries(x).forEach(([C,z])=>{A=A.replace(new RegExp(`{{${C}}}`,"g"),z)}),A};return i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Email Templates"}),i.jsx("p",{className:"text-gray-600",children:"Manage email templates for automated messages"})]}),i.jsxs(ce,{onClick:()=>{w({id:`tpl-${Date.now()}`,name:"",subject:"",body_html:"",body_text:"",category:"custom",variables:[],enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),o(!0)},children:[i.jsx(pc,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsxs(ge,{children:[i.jsx("div",{className:"p-4 border-b",children:i.jsx("select",{value:g,onChange:A=>b(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:N.map(A=>i.jsx("option",{value:A.value,children:A.label},A.value))})}),i.jsx("div",{className:"divide-y",children:T.map(A=>i.jsxs("div",{className:`p-4 hover:bg-gray-50 cursor-pointer ${s?.id===A.id?"bg-primary-50":""}`,onClick:()=>S(A),children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-medium text-gray-900",children:A.name}),i.jsx("p",{className:"text-sm text-gray-500 truncate",children:A.subject})]}),i.jsx("div",{className:"flex items-center gap-1",children:A.enabled?i.jsx(Ss,{className:"h-4 w-4 text-green-500"}):i.jsx(Hi,{className:"h-4 w-4 text-gray-400"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${A.category==="event"?"bg-blue-100 text-blue-700":A.category==="cpd"?"bg-purple-100 text-purple-700":A.category==="member"?"bg-green-100 text-green-700":A.category==="system"?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"}`,children:A.category}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:C=>{C.stopPropagation(),R(A)},className:"p-1 hover:bg-gray-200 rounded",title:"Duplicate",children:i.jsx(JN,{className:"h-3 w-3 text-gray-600"})}),i.jsx("button",{onClick:C=>{C.stopPropagation(),U(A.id)},className:"p-1 hover:bg-gray-200 rounded",title:A.enabled?"Disable":"Enable",children:A.enabled?i.jsx(ti,{className:"h-3 w-3 text-gray-600"}):i.jsx(ti,{className:"h-3 w-3 text-gray-400"})}),i.jsx("button",{onClick:C=>{C.stopPropagation(),Z(A.id)},className:"p-1 hover:bg-gray-200 rounded",title:"Delete",children:i.jsx(Ey,{className:"h-3 w-3 text-red-600"})})]})]})]},A.id))})]})}),i.jsx("div",{className:"lg:col-span-2",children:l?i.jsx(ge,{children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:v.id?.startsWith("tpl-")&&!t.find(A=>A.id===v.id)?"New Template":"Edit Template"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ce,{variant:"outline",onClick:()=>{o(!1),w({})},children:[i.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Cancel"]}),i.jsxs(ce,{onClick:k,children:[i.jsx(jd,{className:"h-4 w-4 mr-2"}),"Save"]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"template_name",children:"Template Name *"}),i.jsx(Ae,{id:"template_name",value:v.name||"",onChange:A=>w({...v,name:A.target.value}),placeholder:"e.g., welcome-email"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"template_category",children:"Category *"}),i.jsx("select",{id:"template_category",value:v.category||"custom",onChange:A=>w({...v,category:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:N.filter(A=>A.value!=="all").map(A=>i.jsx("option",{value:A.value,children:A.label},A.value))})]})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"template_subject",children:"Subject Line *"}),i.jsx(Ae,{id:"template_subject",value:v.subject||"",onChange:A=>w({...v,subject:A.target.value}),placeholder:"e.g., Welcome to {{organization_name}}!"})]}),i.jsxs("div",{children:[i.jsx(xe,{children:"Variables"}),i.jsx(Ae,{value:v.variables?.join(", ")||"",onChange:A=>w({...v,variables:A.target.value.split(",").map(C=>C.trim()).filter(Boolean)}),placeholder:"e.g., user_name, event_title, event_date"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Comma-separated list of variables that can be used in the template"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsxs("button",{onClick:()=>p("html"),className:`px-3 py-1 rounded ${f==="html"?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-700"}`,children:[i.jsx(S8,{className:"h-4 w-4 inline mr-1"}),"HTML"]}),i.jsxs("button",{onClick:()=>p("text"),className:`px-3 py-1 rounded ${f==="text"?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-700"}`,children:[i.jsx(Fa,{className:"h-4 w-4 inline mr-1"}),"Plain Text"]}),i.jsxs("button",{onClick:()=>p("preview"),className:`px-3 py-1 rounded ${f==="preview"?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-700"}`,children:[i.jsx(ti,{className:"h-4 w-4 inline mr-1"}),"Preview"]})]}),f==="html"&&i.jsx("textarea",{value:v.body_html||"",onChange:A=>w({...v,body_html:A.target.value}),className:"w-full h-64 px-3 py-2 border border-gray-300 rounded-md font-mono text-sm",placeholder:"HTML template content..."}),f==="text"&&i.jsx("textarea",{value:v.body_text||"",onChange:A=>w({...v,body_text:A.target.value}),className:"w-full h-64 px-3 py-2 border border-gray-300 rounded-md font-mono text-sm",placeholder:"Plain text template content..."}),f==="preview"&&i.jsxs("div",{className:"border border-gray-300 rounded-md p-4 h-64 overflow-auto bg-white",children:[i.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview Variables:"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:v.variables?.map(A=>i.jsxs("div",{className:"flex gap-1",children:[i.jsxs("span",{className:"text-xs text-gray-600",children:[A,":"]}),i.jsx("input",{type:"text",value:x[A]||"",onChange:C=>j({...x,[A]:C.target.value}),className:"flex-1 text-xs px-1 py-0.5 border border-gray-200 rounded"})]},A))})]}),i.jsx("div",{dangerouslySetInnerHTML:{__html:B()}})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"template_enabled",checked:v.enabled||!1,onChange:A=>w({...v,enabled:A.target.checked}),className:"rounded border-gray-300"}),i.jsx(xe,{htmlFor:"template_enabled",children:"Template is enabled"})]})]})]})}):i.jsxs(ge,{className:"p-12 text-center",children:[i.jsx(jy,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Select a Template"}),i.jsx("p",{className:"text-gray-600",children:"Choose a template from the list to view or edit its content"})]})})]})]})}const GF=({checked:t,onCheckedChange:e,disabled:s=!1,id:r,className:l=""})=>i.jsx("button",{type:"button",role:"switch","aria-checked":t,disabled:s,id:r,className:`
        relative inline-flex h-6 w-11 items-center rounded-full
        transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        ${t?"bg-blue-600":"bg-gray-200"}
        ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        ${l}
      `,onClick:()=>!s&&e(!t),children:i.jsx("span",{className:`
          inline-block h-4 w-4 transform rounded-full bg-white transition
          ${t?"translate-x-6":"translate-x-1"}
        `})}),Ug=[{name:"Registration Confirmation",description:"Sent immediately after registration",timing_type:"after",timing_value:0,timing_unit:"minutes",email_subject:"Registration Confirmed: {{event_title}}",email_template:"registration_confirmation",is_active:!0,send_to_all:!1,order_index:0},{name:"7 Days Before",description:"One week reminder",timing_type:"before",timing_value:7,timing_unit:"days",email_subject:"Event in 1 Week: {{event_title}}",email_template:"event_reminder_week",is_active:!0,send_to_all:!0,order_index:1},{name:"3 Days Before",description:"Mid-week reminder",timing_type:"before",timing_value:3,timing_unit:"days",email_subject:"Event in 3 Days: {{event_title}}",email_template:"event_reminder_3days",is_active:!0,send_to_all:!0,order_index:2},{name:"1 Day Before",description:"Day before reminder",timing_type:"before",timing_value:1,timing_unit:"days",email_subject:"Event Tomorrow: {{event_title}}",email_template:"event_reminder_tomorrow",is_active:!0,send_to_all:!0,order_index:3},{name:"30 Minutes Before",description:"Final reminder",timing_type:"before",timing_value:30,timing_unit:"minutes",email_subject:"Starting Soon: {{event_title}}",email_template:"event_starting_soon",is_active:!0,send_to_all:!0,order_index:4},{name:"Event Live",description:"When event goes live",timing_type:"at_start",timing_value:0,timing_unit:"minutes",email_subject:" LIVE NOW: {{event_title}}",email_template:"event_live",is_active:!0,send_to_all:!0,order_index:5}];function ZF(){const[t,e]=O.useState([]),[s,r]=O.useState(!0),[l,o]=O.useState(!1),[u,h]=O.useState(!1),[f,p]=O.useState(null),[g,b]=O.useState(""),[v,w]=O.useState(null),x=O.useRef(null),[j,N]=O.useState({name:"",description:"",timing_type:"before",timing_value:1,timing_unit:"days",email_subject:"",email_template:"",is_active:!0,send_to_all:!0});O.useEffect(()=>{T()},[]);const T=async()=>{try{r(!0);const{data:q,error:P}=await J.from("event_reminder_configs").select("*").order("order_index");if(P){console.log("Using default reminders configuration");const V=Ug.map((te,$)=>({...te,id:`default-${$}`}));e(V)}else if(q&&q.length>0)e(q);else{const V=Ug.map((te,$)=>({...te,id:`default-${$}`}));e(V)}}catch(q){console.error("Error loading reminders:",q);const P=Ug.map((V,te)=>({...V,id:`default-${te}`}));e(P)}finally{r(!1)}},S=async()=>{try{o(!0),localStorage.setItem("event_reminder_configs",JSON.stringify(t));try{await J.from("event_reminder_configs").delete().neq("id","00000000-0000-0000-0000-000000000000");const{error:q}=await J.from("event_reminder_configs").insert(t.map(P=>({...P,id:P.id.startsWith("default-")?void 0:P.id})));if(q)throw q;ye("success","Reminder settings saved successfully!")}catch(q){console.log("Saved to localStorage only:",q),ye("success","Settings saved locally")}}catch(q){console.error("Error saving reminders:",q),ye("error","Failed to save reminder settings")}finally{o(!1)}},k=()=>{N({name:"",description:"",timing_type:"before",timing_value:1,timing_unit:"days",email_subject:"",email_template:"",is_active:!0,send_to_all:!0}),p(null),h(!0)},Z=q=>{N(q),p(q.id),h(!0),setTimeout(()=>{x.current?.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},R=()=>{if(!j.name||!j.email_subject){ye("error","Please fill in all required fields");return}if(f)e(t.map(q=>q.id===f?{...q,...j}:q));else{const q={id:`custom-${Date.now()}`,name:j.name,description:j.description||"",timing_type:j.timing_type,timing_value:j.timing_value,timing_unit:j.timing_unit,email_subject:j.email_subject,email_template:j.email_template||j.name.toLowerCase().replace(/\s+/g,"_"),is_active:j.is_active,send_to_all:j.send_to_all,order_index:t.length};e([...t,q])}h(!1),p(null)},U=q=>{confirm("Are you sure you want to delete this reminder?")&&e(t.filter(P=>P.id!==q))},B=q=>{e(t.map(P=>P.id===q?{...P,is_active:!P.is_active}:P))},A=q=>{if(q===0)return;const P=[...t];[P[q-1],P[q]]=[P[q],P[q-1]],P.forEach((V,te)=>V.order_index=te),e(P)},C=q=>{if(q===t.length-1)return;const P=[...t];[P[q],P[q+1]]=[P[q+1],P[q]],P.forEach((V,te)=>V.order_index=te),e(P)},z=async q=>{if(!g){ye("error","Please enter a test email address");return}w(q.id);try{const P=`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
          <div style="background: linear-gradient(135deg, #0f172a 0%, #059669 100%); color: white; padding: 30px; text-align: center;">
            <h1 style="margin: 0; font-size: 28px;"> Test Reminder</h1>
            <p style="margin: 12px 0 0 0; opacity: 0.9;">EAU Event Reminder System</p>
          </div>
          <div style="padding: 40px;">
            <p style="font-size: 18px; margin-bottom: 24px;">Hello <strong>Test User</strong>,</p>
            <p>This is a test of the <strong>${q.name}</strong> reminder configuration.</p>
            
            <div style="background: #f8fafc; border: 2px solid #059669; border-radius: 12px; padding: 24px; margin: 24px 0;">
              <h2 style="margin: 0 0 16px 0; color: #0f172a;"> Sample Event Title</h2>
              <div style="font-size: 16px; line-height: 1.8;">
                <div><strong> Date:</strong> August 25, 2025</div>
                <div><strong> Time:</strong> 10:00 AM</div>
                <div><strong> Location:</strong> Online via Zoom</div>
                <div><strong> Reminder Type:</strong> ${L(q)}</div>
              </div>
            </div>
            
            <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 16px; margin: 24px 0; border-radius: 0 8px 8px 0;">
              <h3 style="margin: 0 0 8px 0; color: #856404;"> Reminder Details</h3>
              <p style="margin: 0; color: #856404;"><strong>Subject:</strong> ${q.email_subject}</p>
              <p style="margin: 8px 0 0 0; color: #856404;"><strong>Template:</strong> ${q.email_template}</p>
            </div>
            
            <div style="text-align: center;">
              <a href="http://localhost:5180/events" style="background: #059669; color: white; padding: 14px 28px; text-decoration: none; border-radius: 8px; font-weight: 600;">View Events</a>
            </div>
          </div>
          <div style="background: #f8fafc; padding: 20px; text-align: center; font-size: 14px; color: #64748b;">
            <strong>EAU Members</strong> | Email Reminder Test<br>
            Sent at ${new Date().toLocaleString()}
          </div>
        </div>
      `,V=await fetch("http://localhost:3001/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:g,subject:`[TEST] ${q.email_subject.replace(/\{\{([^}]+)\}\}/g,"Sample Event Title")}`,html:P,text:`Test reminder: ${q.name} - ${L(q)}`,useStoredConfig:!0})});if(V.ok)ye("success",`Test reminder "${q.name}" sent to ${g}`);else{const te=await V.text();console.error("Email send error:",te),ye("error","Failed to send test reminder. Check SMTP configuration.")}}catch(P){console.error("Test reminder error:",P),ye("error","Failed to send test reminder")}finally{w(null)}},L=q=>q.timing_type==="at_start"?"At event start":q.timing_type==="after"?`${q.timing_value} ${q.timing_unit} after registration`:`${q.timing_value} ${q.timing_unit} before event`;return s?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[i.jsx(QN,{className:"h-8 w-8 text-primary-600"}),"Event Reminder Settings"]}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Configure automated email reminders for event registrations"})]}),i.jsx(ge,{className:"p-6 mb-6",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(jy,{className:"h-5 w-5 text-gray-500"}),i.jsxs("div",{className:"flex-1",children:[i.jsx(xe,{htmlFor:"test-email",children:"Test Email Address"}),i.jsx(Ae,{id:"test-email",type:"email",placeholder:"Enter email for testing reminders",value:g,onChange:q=>b(q.target.value),className:"max-w-md"})]})]})}),i.jsxs(ge,{className:"p-6 mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Configured Reminders"}),i.jsxs(ce,{onClick:k,children:[i.jsx(pc,{className:"h-4 w-4 mr-2"}),"Add Reminder"]})]}),i.jsxs("div",{className:"space-y-4",children:[t.map((q,P)=>i.jsx("div",{className:`border rounded-lg p-4 ${q.is_active?"bg-white":"bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:q.name}),q.is_active?i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(Ss,{className:"h-3 w-3 mr-1"}),"Active"]}):i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Inactive"})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:q.description}),i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Ba,{className:"h-4 w-4 text-gray-400"}),L(q)]}),i.jsxs("span",{className:"text-gray-500",children:["Subject: ",q.email_subject]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>A(P),disabled:P===0,children:""}),i.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>C(P),disabled:P===t.length-1,children:""}),i.jsx(GF,{checked:q.is_active,onCheckedChange:()=>B(q.id)}),i.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>Z(q),children:i.jsx(ql,{className:"h-4 w-4"})}),g&&i.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>z(q),disabled:v===q.id,children:v===q.id?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):i.jsx(Sy,{className:"h-4 w-4"})}),!q.id.startsWith("default-")&&i.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>U(q.id),className:"text-red-600 hover:text-red-700",children:i.jsx(Ey,{className:"h-4 w-4"})})]})]})},q.id)),t.length===0&&i.jsx("div",{className:"text-center py-8 text-gray-500",children:'No reminders configured. Click "Add Reminder" to create one.'})]})]}),u&&i.jsxs(ge,{className:"p-6 mb-6",ref:x,children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:f?"Edit Reminder":"Add New Reminder"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"name",children:"Reminder Name *"}),i.jsx(Ae,{id:"name",value:j.name,onChange:q=>N({...j,name:q.target.value}),placeholder:"e.g., 2 Hours Before"})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"description",children:"Description"}),i.jsx(Ae,{id:"description",value:j.description,onChange:q=>N({...j,description:q.target.value}),placeholder:"Brief description"})]}),i.jsxs("div",{children:[i.jsx(xe,{children:"Timing"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ae,{type:"number",min:"0",value:j.timing_value,onChange:q=>N({...j,timing_value:parseInt(q.target.value)}),className:"w-20"}),i.jsxs("select",{value:j.timing_unit,onChange:q=>N({...j,timing_unit:q.target.value}),className:"flex-1 rounded-md border border-gray-300 px-3 py-2",children:[i.jsx("option",{value:"minutes",children:"Minutes"}),i.jsx("option",{value:"hours",children:"Hours"}),i.jsx("option",{value:"days",children:"Days"})]}),i.jsxs("select",{value:j.timing_type,onChange:q=>N({...j,timing_type:q.target.value}),className:"flex-1 rounded-md border border-gray-300 px-3 py-2",children:[i.jsx("option",{value:"before",children:"Before Event"}),i.jsx("option",{value:"after",children:"After Registration"}),i.jsx("option",{value:"at_start",children:"At Event Start"})]})]})]}),i.jsxs("div",{children:[i.jsx(xe,{htmlFor:"email_subject",children:"Email Subject *"}),i.jsx(Ae,{id:"email_subject",value:j.email_subject,onChange:q=>N({...j,email_subject:q.target.value}),placeholder:"Use {{event_title}} for dynamic content"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx(xe,{htmlFor:"email_template",children:"Template Name"}),i.jsx(Ae,{id:"email_template",value:j.email_template,onChange:q=>N({...j,email_template:q.target.value}),placeholder:"Template identifier (e.g., reminder_2hours)"})]}),i.jsxs("div",{className:"col-span-2 flex items-center gap-4",children:[i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:j.is_active,onChange:q=>N({...j,is_active:q.target.checked})}),i.jsx("span",{children:"Active"})]}),i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:j.send_to_all,onChange:q=>N({...j,send_to_all:q.target.checked})}),i.jsx("span",{children:"Send to all registrants"})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx(ce,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),i.jsxs(ce,{onClick:R,children:[f?"Update":"Add"," Reminder"]})]})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx(ce,{variant:"outline",onClick:T,disabled:l,children:"Reset to Defaults"}),i.jsx(ce,{onClick:S,disabled:l,className:"min-w-[120px]",children:l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(jd,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})]}),i.jsx("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(Ll,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-blue-900 font-semibold mb-1",children:"Available Variables"}),i.jsx("p",{className:"text-blue-800 text-sm mb-2",children:"You can use these variables in email subjects and templates:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-blue-700",children:[i.jsx("code",{children:"{{event_title}}"}),i.jsx("code",{children:"{{event_date}}"}),i.jsx("code",{children:"{{event_time}}"}),i.jsx("code",{children:"{{event_location}}"}),i.jsx("code",{children:"{{user_name}}"}),i.jsx("code",{children:"{{user_email}}"}),i.jsx("code",{children:"{{registration_id}}"}),i.jsx("code",{children:"{{event_link}}"})]})]})]})})]})}async function YF(){try{console.log("Setting up storage bucket...");const{data:t,error:e}=await J.storage.listBuckets();if(e)return console.error("Error listing buckets:",e),!1;if(t?.some(r=>r.name==="media"))return console.log("Storage bucket already exists"),!0;{const{data:r,error:l}=await J.storage.createBucket("media",{public:!0,allowedMimeTypes:["image/jpeg","image/png","image/gif","image/webp"],fileSizeLimit:5242880});return l?(console.error("Error creating bucket:",l),!1):(console.log("Storage bucket created successfully"),!0)}}catch(t){return console.error("Setup error:",t),!1}}function KF(){const[t,e]=O.useState(!1),[s,r]=O.useState([]),l=async()=>{e(!0),r([]);const o=[];try{o.push("Setting up storage bucket..."),r([...o]),await YF()?o.push(" Storage bucket ready"):o.push(" Storage bucket setup failed (may already exist)"),r([...o]),o.push("Checking database tables..."),r([...o]);const{error:h}=await J.from("media_folders").select("id").limit(1);if(h)o.push(" media_folders table not found - please run SQL script manually"),o.push("Copy the content from database/media_library_schema_fixed.sql"),o.push("and execute it in Supabase SQL Editor");else{o.push(" media_folders table exists");const g=[{name:"Events",path:"/events/"},{name:"Members",path:"/members/"},{name:"CPD",path:"/cpd/"},{name:"General",path:"/general/"},{name:"Banners",path:"/banners/"},{name:"Icons",path:"/icons/"}];for(const b of g){const{error:v}=await J.from("media_folders").upsert(b,{onConflict:"path"});v||o.push(` Created folder: ${b.name}`)}}r([...o]);const{error:f}=await J.from("media_files").select("id").limit(1);f?o.push(" media_files table not found"):o.push(" media_files table exists"),r([...o]);const{error:p}=await J.from("media_usage").select("id").limit(1);if(p?o.push(" media_usage table not found"):o.push(" media_usage table exists"),r([...o]),!f){const{count:g}=await J.from("media_files").select("*",{count:"exact",head:!0});if(g===0){o.push("Adding sample images..."),r([...o]);const b=[{filename:"conference-event.jpg",original_filename:"conference-event.jpg",file_type:"image/jpeg",file_size:102400,mime_type:"image/jpeg",url:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800",thumbnail_url:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=200",medium_url:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=600",title:"Conference Event",category:"events",status:"active",is_public:!0},{filename:"business-meeting.jpg",original_filename:"business-meeting.jpg",file_type:"image/jpeg",file_size:98304,mime_type:"image/jpeg",url:"https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=800",thumbnail_url:"https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=200",medium_url:"https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=600",title:"Business Meeting",category:"events",status:"active",is_public:!0},{filename:"networking-event.jpg",original_filename:"networking-event.jpg",file_type:"image/jpeg",file_size:110592,mime_type:"image/jpeg",url:"https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=800",thumbnail_url:"https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=200",medium_url:"https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=600",title:"Networking Event",category:"events",status:"active",is_public:!0},{filename:"workshop.jpg",original_filename:"workshop.jpg",file_type:"image/jpeg",file_size:94208,mime_type:"image/jpeg",url:"https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=800",thumbnail_url:"https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=200",medium_url:"https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=600",title:"Workshop",category:"events",status:"active",is_public:!0}];for(const v of b){const{error:w}=await J.from("media_files").insert(v);w||o.push(` Added sample image: ${v.title}`)}r([...o])}}o.push(""),o.push(" Media Library setup completed!"),o.push(""),o.push(" If any tables are missing, please:"),o.push("1. Go to Supabase SQL Editor"),o.push("2. Copy the SQL from database/media_library_schema_fixed.sql"),o.push("3. Execute the script"),r([...o]),ye("success","Media Library setup completed!")}catch(u){console.error("Setup error:",u),o.push(` Error: ${u.message}`),r([...o]),ye("error","Failed to setup Media Library")}finally{e(!1)}};return i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsxs(ge,{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Media Library Setup"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"This will check and setup the Media Library system. If tables don't exist, you'll need to run the SQL script manually in Supabase."}),i.jsx(ce,{onClick:l,disabled:t,className:"mb-6",children:t?i.jsxs(i.Fragment,{children:[i.jsx(tq,{className:"h-4 w-4 mr-2 animate-spin"}),"Running setup..."]}):"Run Setup"}),s.length>0&&i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Setup Log:"}),i.jsx("div",{className:"space-y-1 font-mono text-sm",children:s.map((o,u)=>i.jsx("div",{className:`${o.includes("")?"text-green-600":o.includes("")?"text-red-600":o.includes("")?"text-yellow-600":o.includes("")?"text-primary-600 font-semibold":o.includes("")?"text-blue-600":"text-gray-700"}`,children:o||""},u))})]})]})})}function WF({content:t,onChange:e,placeholder:s="Start typing...",height:r="200px",enableDebugLogs:l=!0}){const o=O.useRef(null),u=O.useRef(null),[h,f]=O.useState(!1),p=O.useRef(null),g=O.useRef(e),b=O.useCallback((x,j)=>{if(!l)return;const N=new Date().toISOString();console.group(`[QuillEditor ${N}] ${x}`),j&&console.log("Data:",j),console.groupEnd()},[l]),v=O.useCallback(async x=>{try{if(f(!0),b("Starting image upload",{fileName:x.name,fileSize:x.size,fileType:x.type}),!x.type.startsWith("image/"))throw new Error("Please select an image file");if(x.size>5*1024*1024)throw new Error("Image size must be less than 5MB");const j=x.name.split(".").pop(),T=`editor-images/${`${Date.now()}_${Math.random().toString(36).substr(2,9)}.${j}`}`;b("Uploading to Supabase",{filePath:T});const{data:S,error:k}=await J.storage.from("media").upload(T,x,{contentType:x.type,cacheControl:"3600"});if(k)throw b("Upload error",k),k;b("Upload successful",S);const{data:{publicUrl:Z}}=J.storage.from("media").getPublicUrl(T);if(b("Public URL generated",{publicUrl:Z}),u.current){const R=u.current.getSelection(),U=R?R.index:0;u.current.insertEmbed(U,"image",Z),u.current.setSelection(U+1)}ye("success","Image uploaded successfully")}catch(j){b("Image upload failed",j),ye("error",j.message||"Failed to upload image")}finally{f(!1),p.current&&(p.current.value="")}},[b]),w=O.useCallback(()=>{b("Image button clicked"),p.current?.click()},[b]);return O.useEffect(()=>{g.current=e},[e]),O.useEffect(()=>{if(!o.current||u.current)return;b("Initializing Quill editor");const x=new pe(o.current,{theme:"snow",placeholder:s,modules:{toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"bullet"},{list:"ordered"}],[{indent:"-1"},{indent:"+1"}],["link","image","video"],[{color:[]},{background:[]}],[{align:[]}],["clean"]],handlers:{image:w}},clipboard:{matchVisual:!1}}});return t&&(b("Setting initial content",{content:t}),x.root.innerHTML=t),x.on("text-change",(j,N,T)=>{b("Text changed",{source:T,deltaOps:j.ops?.length,html:x.root.innerHTML});const S=x.root.innerHTML;S==="<p><br></p>"?g.current(""):g.current(S)}),x.on("selection-change",(j,N,T)=>{b("Selection changed",{range:j,oldRange:N,source:T})}),x.root.addEventListener("paste",async j=>{b("Paste event detected");const N=j.clipboardData?.items;if(N){for(const T of N)if(T.type.startsWith("image/")){j.preventDefault();const S=T.getAsFile();S&&(b("Image pasted",{fileName:S.name,fileType:S.type}),await v(S))}}}),u.current=x,b("Quill editor initialized successfully"),()=>{b("Cleaning up Quill editor"),x.off("text-change"),x.off("selection-change")}},[s,w,v,b]),O.useEffect(()=>{if(!u.current)return;const x=u.current.root.innerHTML,j=x==="<p><br></p>"||x==="",N=!t||t==="";b("Content prop check",{currentHtml:x?.substring(0,100),propContent:t?.substring(0,100),willUpdate:x!==t&&!(j&&N)}),!(j&&N)&&x!==t&&(b("Updating content from prop",{oldContent:x,newContent:t}),u.current.off("text-change"),u.current.root.innerHTML=t||"",setTimeout(()=>{u.current&&u.current.on("text-change",(T,S,k)=>{b("Text changed (re-attached)",{source:k,deltaOps:T.ops?.length,html:u.current?.root.innerHTML});const Z=u.current?.root.innerHTML||"";Z==="<p><br></p>"?g.current(""):g.current(Z)})},0))},[t,b]),i.jsxs("div",{className:"quill-editor-wrapper relative",children:[i.jsx("input",{ref:p,type:"file",accept:"image/*",className:"hidden",onChange:x=>{const j=x.target.files?.[0];j&&(b("File selected",{fileName:j.name}),v(j))}}),h&&i.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center z-50 rounded-md",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Bi,{className:"h-5 w-5 animate-spin"}),i.jsx("span",{children:"Uploading image..."})]})}),i.jsx("div",{ref:o,style:{height:r},className:"bg-white"}),i.jsx("style",{children:`
        .quill-editor-wrapper .ql-toolbar {
          border: 1px solid #e5e7eb;
          border-bottom: none;
          border-radius: 0.375rem 0.375rem 0 0;
          background: #f9fafb;
        }
        
        .quill-editor-wrapper .ql-container {
          border: 1px solid #e5e7eb;
          border-radius: 0 0 0.375rem 0.375rem;
          font-family: inherit;
          overflow: hidden;
        }
        
        .quill-editor-wrapper .ql-editor {
          min-height: ${r};
          max-height: 400px;
          overflow-y: auto;
          overflow-x: hidden;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
          white-space: pre-wrap;
        }
        
        .quill-editor-wrapper .ql-editor * {
          max-width: 100%;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
        }
        
        .quill-editor-wrapper .ql-editor p,
        .quill-editor-wrapper .ql-editor li,
        .quill-editor-wrapper .ql-editor h1,
        .quill-editor-wrapper .ql-editor h2,
        .quill-editor-wrapper .ql-editor h3,
        .quill-editor-wrapper .ql-editor h4,
        .quill-editor-wrapper .ql-editor h5,
        .quill-editor-wrapper .ql-editor h6,
        .quill-editor-wrapper .ql-editor blockquote {
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
          max-width: 100%;
        }
        
        .quill-editor-wrapper .ql-editor img {
          max-width: 100%;
          height: auto;
          border-radius: 0.375rem;
          margin: 0.5rem 0;
        }
        
        .quill-editor-wrapper .ql-editor.ql-blank::before {
          color: #9ca3af;
          font-style: normal;
        }
        
        .quill-editor-wrapper .ql-snow .ql-tooltip {
          z-index: 100;
        }
        
        /* Custom scrollbar */
        .quill-editor-wrapper .ql-editor::-webkit-scrollbar {
          width: 8px;
        }
        
        .quill-editor-wrapper .ql-editor::-webkit-scrollbar-track {
          background: #f1f1f1;
          border-radius: 4px;
        }
        
        .quill-editor-wrapper .ql-editor::-webkit-scrollbar-thumb {
          background: #888;
          border-radius: 4px;
        }
        
        .quill-editor-wrapper .ql-editor::-webkit-scrollbar-thumb:hover {
          background: #555;
        }
      `})]})}function QF(){const[t,e]=O.useState(""),[s,r]=O.useState(""),[l,o]=O.useState(!1),u=()=>{r(t),ye("success","Content saved successfully"),console.log("Saved content:",t)},h=()=>{e(""),r(""),ye("info","Content cleared")};return i.jsxs("div",{className:"container mx-auto py-8 px-4",children:[i.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Rich Text Editor Test"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx("div",{children:i.jsxs(ge,{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quill Editor"}),i.jsx(WF,{content:t,onChange:e,placeholder:"Start typing or paste an image...",height:"300px",enableDebugLogs:!0}),i.jsxs("div",{className:"mt-4 flex gap-2",children:[i.jsx(ce,{onClick:u,children:"Save Content"}),i.jsx(ce,{variant:"outline",onClick:h,children:"Clear"}),i.jsxs(ce,{variant:"outline",onClick:()=>o(!l),children:[l?"Hide":"Show"," Preview"]})]}),i.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Features:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[i.jsx("li",{children:"Rich text formatting (bold, italic, underline, etc.)"}),i.jsx("li",{children:"Headers and lists"}),i.jsx("li",{children:"Image upload from computer (click image button)"}),i.jsx("li",{children:"Paste images directly (Ctrl+V)"}),i.jsx("li",{children:"Links and videos"}),i.jsx("li",{children:"Color and background formatting"}),i.jsx("li",{children:"All changes are logged in the console (F12)"})]})]})]})}),i.jsxs("div",{children:[i.jsxs(ge,{className:"p-6 mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Raw HTML Output"}),i.jsx("div",{className:"bg-gray-100 p-4 rounded font-mono text-xs overflow-x-auto max-h-48 overflow-y-auto",children:i.jsx("pre",{children:t||"<empty>"})})]}),l&&i.jsxs(ge,{className:"p-6 mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Rendered Preview"}),i.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:t||'<p class="text-gray-400">No content to preview</p>'}})]}),s&&i.jsxs(ge,{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Last Saved Content"}),i.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s}})]})]})]})]})}function XF(){const t=`
    <h1>Heading 1 - Main Title</h1>
    <p>This is a regular paragraph with some <strong>bold text</strong>, <em>italic text</em>, and <u>underlined text</u>. You can also have <s>strikethrough text</s>.</p>
    
    <h2>Heading 2 - Section Title</h2>
    <p>Here's another paragraph demonstrating text formatting. You can combine <strong><em>bold and italic</em></strong> or any other combination.</p>
    
    <h3>Heading 3 - Subsection</h3>
    <p>Let's demonstrate lists. Here's an unordered list:</p>
    <ul>
      <li>First item in the list</li>
      <li>Second item with <strong>bold text</strong></li>
      <li>Third item with nested list:
        <ul>
          <li>Nested item 1</li>
          <li>Nested item 2</li>
          <li>Nested item 3 with another level:
            <ul>
              <li>Deep nested item</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Fourth item back at main level</li>
    </ul>
    
    <h3>Ordered Lists</h3>
    <p>Now let's see an ordered list:</p>
    <ol>
      <li>First step in the process</li>
      <li>Second step with more details</li>
      <li>Third step with sub-steps:
        <ol>
          <li>Sub-step A</li>
          <li>Sub-step B</li>
          <li>Sub-step C</li>
        </ol>
      </li>
      <li>Final step</li>
    </ol>
    
    <h2>Blockquotes and Code</h2>
    <blockquote>
      "This is a blockquote. It's typically used for quotes or to highlight important information. It can span multiple lines and should be visually distinct from regular text."
    </blockquote>
    
    <p>Here's some inline code: <code>const example = "Hello World";</code> within a paragraph.</p>
    
    <pre><code>// Code block example
function greet(name) {
  return \`Hello, \${name}!\`;
}

const message = greet("Developer");
console.log(message);</code></pre>
    
    <h2>Links and Text Alignment</h2>
    <p>You can add <a href="https://example.com" target="_blank">links to external sites</a> or internal pages.</p>
    
    <p class="ql-align-center">This text is centered using Quill's alignment class.</p>
    
    <p class="ql-align-right">This text is right-aligned.</p>
    
    <p class="ql-align-justify">This is a justified paragraph. When text is justified, it is aligned along both the left and right margins. This creates a clean, formal appearance that's often used in printed materials like newspapers and books. The spacing between words is adjusted to achieve this alignment.</p>
    
    <h2>Indentation</h2>
    <p>Regular paragraph without indentation.</p>
    <p class="ql-indent-1">This paragraph has level 1 indentation.</p>
    <p class="ql-indent-2">This paragraph has level 2 indentation.</p>
    <p class="ql-indent-3">This paragraph has level 3 indentation.</p>
    
    <hr>
    
    <h2>Mixed Content Example</h2>
    <p>Let's combine everything in a real-world example:</p>
    
    <h3>Workshop Agenda</h3>
    <ol>
      <li><strong>9:00 AM - Introduction</strong>
        <ul>
          <li>Welcome and overview</li>
          <li>Participant introductions</li>
        </ul>
      </li>
      <li><strong>9:30 AM - Theory Session</strong>
        <ul>
          <li>Core concepts</li>
          <li>Best practices</li>
          <li>Case studies</li>
        </ul>
      </li>
      <li><strong>11:00 AM - Practical Exercise</strong>
        <blockquote>
          "Learning by doing is the most effective way to master new skills."
        </blockquote>
      </li>
      <li><strong>12:00 PM - Lunch Break</strong></li>
      <li><strong>1:00 PM - Advanced Topics</strong>
        <ul>
          <li>Complex scenarios</li>
          <li>Troubleshooting tips</li>
        </ul>
      </li>
    </ol>
    
    <p><em>Note: All times are in AEDT (Australian Eastern Daylight Time)</em></p>
  `;return i.jsxs("div",{className:"container mx-auto py-8 px-4",children:[i.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Rich Content Styles Test"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx("div",{children:i.jsxs(ge,{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Raw HTML (from Quill)"}),i.jsx("div",{className:"bg-gray-100 p-4 rounded font-mono text-xs overflow-x-auto max-h-96 overflow-y-auto",children:i.jsx("pre",{children:t})})]})}),i.jsx("div",{children:i.jsxs(ge,{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Rendered Content"}),i.jsx("div",{className:"rich-content",dangerouslySetInnerHTML:{__html:t}})]})})]}),i.jsx("div",{className:"mt-8",children:i.jsxs(ge,{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Full Width Rendered Content"}),i.jsx("div",{className:"rich-content",dangerouslySetInnerHTML:{__html:t}})]})})]})}function Xy({content:t,onChange:e,placeholder:s="Start typing...",height:r="200px",enableDebugLogs:l=!1}){const o=O.useRef(null),u=O.useRef(null),[h,f]=O.useState(!1),p=O.useRef(null),g=O.useRef(!1),b=O.useCallback((w,x)=>{l&&console.log(`[QuillEditor] ${w}`,x||"")},[l]),v=O.useCallback(async w=>{try{if(f(!0),b("Starting image upload",{fileName:w.name}),!w.type.startsWith("image/"))throw new Error("Please select an image file");if(w.size>5*1024*1024)throw new Error("Image size must be less than 5MB");const x=w.name.split(".").pop(),N=`editor-images/${`${Date.now()}_${Math.random().toString(36).substr(2,9)}.${x}`}`,{data:T,error:S}=await J.storage.from("media").upload(N,w,{contentType:w.type,cacheControl:"3600"});if(S)throw S;const{data:{publicUrl:k}}=J.storage.from("media").getPublicUrl(N);if(u.current){const Z=u.current.getSelection()||{index:0};u.current.insertEmbed(Z.index,"image",k),u.current.setSelection(Z.index+1)}ye("success","Image uploaded successfully")}catch(x){b("Image upload failed",x),ye("error",x.message||"Failed to upload image")}finally{f(!1),p.current&&(p.current.value="")}},[b]);return O.useEffect(()=>{if(!o.current||u.current)return;b("Initializing Quill editor");const w=new pe(o.current,{theme:"snow",placeholder:s,modules:{toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"bullet"},{list:"ordered"}],["link","image"],[{color:[]},{background:[]}],["clean"]],handlers:{image:()=>p.current?.click()}}}});t&&t!=="<p><br></p>"&&(w.root.innerHTML=t);const x=document.createElement("style");x.textContent=`
      ${o.current.id?`#${o.current.id}`:""} .ql-editor li[data-list="bullet"] {
        list-style-type: disc !important;
      }
      ${o.current.id?`#${o.current.id}`:""} .ql-editor ul li {
        list-style-type: disc !important;
      }
      ${o.current.id?`#${o.current.id}`:""} .ql-editor ul {
        list-style-type: disc !important;
      }
    `,document.head.appendChild(x);const j=`quill-editor-${Math.random().toString(36).substr(2,9)}`;return o.current.id=j,w.on("text-change",()=>{if(g.current){g.current=!1;return}const N=w.root.innerHTML;b("Text changed",{preview:N.substring(0,100)}),w.root.querySelectorAll('li[data-list="bullet"]').forEach(Z=>{const R=Z.parentElement;if(R&&R.tagName==="OL"){const U=document.createElement("ul");U.innerHTML=R.innerHTML,R.parentNode?.replaceChild(U,R)}}),w.root.querySelectorAll("ul").forEach(Z=>{Z.style.listStyleType="disc",Z.querySelectorAll("li").forEach(R=>{R.style.listStyleType="disc"})});const k=w.root.innerHTML;e(k==="<p><br></p>"?"":k)}),w.root.addEventListener("paste",async N=>{const T=N.clipboardData?.items;if(T){for(const S of T)if(S.type.startsWith("image/")){N.preventDefault();const k=S.getAsFile();k&&await v(k)}}}),u.current=w,()=>{w.off("text-change")}},[]),O.useEffect(()=>{if(!u.current)return;const w=u.current.root.innerHTML;w===t||(!w||w==="<p><br></p>")&&(!t||t==="<p><br></p>"||t==="")||(b("Updating content from prop",{old:w.substring(0,50),new:t.substring(0,50)}),g.current=!0,u.current.root.innerHTML=t||"")},[t,b]),i.jsxs("div",{className:"quill-editor-wrapper relative",children:[i.jsx("input",{ref:p,type:"file",accept:"image/*",className:"hidden",onChange:w=>{const x=w.target.files?.[0];x&&v(x)}}),h&&i.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center z-50 rounded-md",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Bi,{className:"h-5 w-5 animate-spin"}),i.jsx("span",{children:"Uploading image..."})]})}),i.jsx("div",{ref:o,style:{height:r},className:"bg-white"}),i.jsx("style",{children:`
        .quill-editor-wrapper .ql-toolbar {
          border: 1px solid #e5e7eb;
          border-bottom: none;
          border-radius: 0.375rem 0.375rem 0 0;
          background: #f9fafb;
        }
        
        .quill-editor-wrapper .ql-container {
          border: 1px solid #e5e7eb;
          border-radius: 0 0 0.375rem 0.375rem;
          font-family: inherit;
          overflow: hidden;
        }
        
        .quill-editor-wrapper .ql-editor {
          min-height: ${r};
          max-height: 400px;
          overflow-y: auto;
          overflow-x: hidden;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
          white-space: pre-wrap;
        }
        
        .quill-editor-wrapper .ql-editor * {
          max-width: 100%;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
        }
        
        .quill-editor-wrapper .ql-editor p,
        .quill-editor-wrapper .ql-editor li,
        .quill-editor-wrapper .ql-editor h1,
        .quill-editor-wrapper .ql-editor h2,
        .quill-editor-wrapper .ql-editor h3,
        .quill-editor-wrapper .ql-editor h4,
        .quill-editor-wrapper .ql-editor h5,
        .quill-editor-wrapper .ql-editor h6 {
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
        }
        
        .quill-editor-wrapper .ql-editor img {
          max-width: 100%;
          height: auto;
          border-radius: 0.375rem;
          margin: 0.5rem 0;
        }
        
        .quill-editor-wrapper .ql-editor.ql-blank::before {
          color: #9ca3af;
          font-style: normal;
        }
        
        
        /* Nested bullets */
        .quill-editor-wrapper .ql-editor ul ul {
          list-style-type: circle !important;
        }
        
        .quill-editor-wrapper .ql-editor ul ul ul {
          list-style-type: square !important;
        }
        
        /* Ensure ordered lists remain numbered */
        .quill-editor-wrapper .ql-editor ol {
          list-style-type: decimal !important;
          padding-left: 1.5em !important;
        }
        
        .quill-editor-wrapper .ql-editor ol li {
          list-style-type: decimal !important;
          display: list-item !important;
        }
      `})]})}function D0({content:t,className:e=""}){const s=t.replace(/<ul>/g,'<ul style="list-style:none!important;list-style-type:none!important;margin:0.5em 0!important;padding-left:0!important;">').replace(/<li>/g,'<li style="list-style:none!important;list-style-type:none!important;position:relative!important;padding-left:1.5em!important;margin:0.25em 0!important;display:block!important;">');return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`ql-container ql-snow ${e}`,style:{border:"none"},children:i.jsx("div",{className:"ql-editor bullets-fixed",style:{padding:0,minHeight:"auto",fontSize:"16px",lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:s}})}),i.jsx("style",{children:`
        /* SUPER SPECIFIC FIX: Custom bullets for bullets-fixed class */
        .bullets-fixed ul li::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
          top: 0 !important;
          color: currentColor !important;
          font-weight: bold !important;
          display: inline-block !important;
          width: 1em !important;
          height: 1em !important;
          line-height: 1 !important;
          z-index: 1 !important;
        }
        
        /* Hide ALL possible markers */
        .bullets-fixed ul li::marker {
          content: none !important;
          display: none !important;
          visibility: hidden !important;
          opacity: 0 !important;
        }
        
        .bullets-fixed ul li::-webkit-details-marker {
          display: none !important;
        }
        
        .bullets-fixed ul li {
          list-style: none !important;
          list-style-type: none !important;
          list-style-image: none !important;
          counter-increment: none !important;
        }
        
        .bullets-fixed ul {
          list-style: none !important;
          list-style-type: none !important;
          list-style-image: none !important;
          counter-reset: none !important;
        }
        
        /* Force override any external styles */
        [data-list] {
          list-style: none !important;
        }
        
        [data-list="bullet"] {
          list-style: none !important;
        }
        
        [data-list="bullet"]::marker {
          display: none !important;
        }
        
        [data-list="bullet"]::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
        }
        
        .ql-editor ul > li[data-list] {
          list-style-type: disc !important;
        }
        
        .ql-editor ul > li[data-list="bullet"] {
          list-style-type: disc !important;
        }
        
        .ql-editor ul ul {
          list-style-type: circle !important;
        }
        
        .ql-editor ul ul ul {
          list-style-type: square !important;
        }
        
        .ql-editor ol {
          list-style-type: decimal !important;
          display: block !important;
          margin-block-start: 0.5em !important;
          margin-block-end: 0.5em !important;
          padding-inline-start: 1.5em !important;
        }
        
        .ql-editor ol > li {
          list-style-type: decimal !important;
          display: list-item !important;
          margin: 0.25em 0 !important;
        }
        
        .ql-editor ol > li::before {
          display: none !important;
          content: none !important;
        }
        
        .ql-editor ol > li[data-list] {
          list-style-type: decimal !important;
        }
        
        .ql-editor ol > li[data-list="ordered"] {
          list-style-type: decimal !important;
        }
        
        /* Counter reset for any Quill counters */
        .ql-editor {
          counter-reset: none !important;
        }
        
        .ql-editor li {
          counter-increment: none !important;
        }
        
        .ql-editor li:before {
          content: none !important;
        }
        
        /* Spacing adjustments */
        .ql-editor h1 {
          margin: 0.5em 0 !important;
          font-size: 2em !important;
        }
        
        .ql-editor h2 {
          margin: 0.5em 0 !important;
          font-size: 1.5em !important;
        }
        
        .ql-editor h3 {
          margin: 0.5em 0 !important;
          font-size: 1.17em !important;
        }
        
        .ql-editor p {
          margin: 0.5em 0 !important;
        }
        
        .ql-editor p:first-child {
          margin-top: 0 !important;
        }
        
        .ql-editor p:last-child {
          margin-bottom: 0 !important;
        }
        
        .ql-editor blockquote {
          margin: 0.5em 0 !important;
          padding-left: 1em !important;
        }
        
        /* Remove any Quill-specific list indentation classes */
        .ql-editor .ql-indent-1 { padding-left: 3em !important; }
        .ql-editor .ql-indent-2 { padding-left: 6em !important; }
        .ql-editor .ql-indent-3 { padding-left: 9em !important; }
        .ql-editor .ql-indent-4 { padding-left: 12em !important; }
        .ql-editor .ql-indent-5 { padding-left: 15em !important; }
        .ql-editor .ql-indent-6 { padding-left: 18em !important; }
        .ql-editor .ql-indent-7 { padding-left: 21em !important; }
        .ql-editor .ql-indent-8 { padding-left: 24em !important; }
      `})]})}function JF(){const[t,e]=O.useState(`
    <h1>WYSIWYG Test - What You See Is What You Get</h1>
    <p>This page demonstrates that the content looks exactly the same in the editor and when rendered.</p>
    
    <h2>Unordered List (Bullet Points)</h2>
    <ul>
      <li>First bullet point</li>
      <li>Second bullet point</li>
      <li>Third bullet point with nested items:
        <ul>
          <li>Nested item 1</li>
          <li>Nested item 2</li>
        </ul>
      </li>
    </ul>
    
    <h2>Ordered List (Numbers)</h2>
    <ol>
      <li>First numbered item</li>
      <li>Second numbered item</li>
      <li>Third numbered item</li>
    </ol>
    
    <blockquote>This is a blockquote. It should look the same in both views.</blockquote>
    
    <p><strong>Bold text</strong>, <em>italic text</em>, and <u>underlined text</u>.</p>
  `),[s,r]=O.useState(!0);return i.jsxs("div",{className:"container mx-auto py-8 px-4",children:[i.jsx("h1",{className:"text-3xl font-bold mb-4",children:"WYSIWYG Test - Editor vs Display"}),i.jsx("p",{className:"text-gray-600 mb-8",children:"This page shows that content looks identical in the editor and when displayed to users."}),i.jsx("div",{className:"mb-4",children:i.jsx(ce,{onClick:()=>r(!s),variant:s?"primary":"outline",children:s?"Switch to Display Mode":"Switch to Edit Mode"})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs(ge,{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-green-600",children:"Editor View (What Admin Sees)"}),i.jsx("div",{className:s?"":"opacity-50 pointer-events-none",children:i.jsx(Xy,{content:t,onChange:e,placeholder:"Start typing...",height:"400px",enableDebugLogs:!1})})]}),i.jsxs(ge,{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-blue-600",children:"Display View (What Users See)"}),i.jsx("div",{className:"border border-gray-200 rounded-lg p-4 min-h-[400px]",children:i.jsx(D0,{content:t})})]})]}),i.jsx("div",{className:"mt-8",children:i.jsxs(ge,{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Full Width Display (Event Details Page)"}),i.jsx("div",{className:"border-t pt-4",children:i.jsx(D0,{content:t})})]})}),i.jsx("div",{className:"mt-8",children:i.jsxs(ge,{className:"p-6 bg-blue-50",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Instructions:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Edit content in the left panel (Editor View)"}),i.jsx("li",{children:"See real-time updates in the right panel (Display View)"}),i.jsx("li",{children:"Toggle between edit and display modes with the button"}),i.jsx("li",{children:"Notice that bullet points remain as bullets (not numbers)"}),i.jsx("li",{children:"All formatting looks identical in both views"})]})]})})]})}function eH(){const[t,e]=O.useState(""),s=()=>{e(`
      <h2>Test Content</h2>
      <p>This is a paragraph.</p>
      <ul>
        <li>First bullet point</li>
        <li>Second bullet point</li>
        <li>Third bullet point</li>
      </ul>
      <ol>
        <li>First numbered item</li>
        <li>Second numbered item</li>
      </ol>
    `)};return i.jsxs("div",{className:"container mx-auto py-8 px-4",children:[i.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Quill HTML Debug Tool"}),i.jsxs("div",{className:"mb-4 space-x-2",children:[i.jsx(ce,{onClick:s,children:"Load Sample Content"}),i.jsx(ce,{onClick:()=>e(""),variant:"outline",children:"Clear"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsxs(ge,{className:"p-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"1. Create content in editor:"}),i.jsx(Xy,{content:t,onChange:r=>{console.log("Content changed:",r),e(r)},height:"300px",enableDebugLogs:!1})]}),i.jsxs(ge,{className:"p-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"2. Raw HTML generated by Quill:"}),i.jsx("div",{className:"bg-gray-900 text-green-400 p-4 rounded font-mono text-xs overflow-auto max-h-[300px]",children:i.jsx("pre",{children:t||"(empty)"})})]})]}),i.jsxs(ge,{className:"p-4 mt-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"3. Raw browser rendering (no Quill styles):"}),i.jsx("div",{className:"border p-4 rounded",dangerouslySetInnerHTML:{__html:t}})]}),i.jsxs(ge,{className:"p-4 mt-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"4. With ql-editor class (Quill styles):"}),i.jsx("div",{className:"ql-editor border p-4 rounded",dangerouslySetInnerHTML:{__html:t}})]}),i.jsxs(ge,{className:"p-4 mt-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"5. With fixed styles:"}),i.jsx("div",{className:"quill-display-content border p-4 rounded",dangerouslySetInnerHTML:{__html:t}})]}),i.jsx("style",{children:`
        /* Fixed styles for display */
        .quill-display-content {
          font-size: 16px;
          line-height: 1.6;
          color: #333;
        }
        
        .quill-display-content h1 { 
          font-size: 2em; 
          margin: 0.5em 0; 
          font-weight: bold; 
        }
        
        .quill-display-content h2 { 
          font-size: 1.5em; 
          margin: 0.5em 0; 
          font-weight: bold; 
        }
        
        .quill-display-content h3 { 
          font-size: 1.17em; 
          margin: 0.5em 0; 
          font-weight: bold; 
        }
        
        .quill-display-content p { 
          margin: 0.5em 0; 
        }
        
        /* Force bullet lists to show bullets */
        .quill-display-content ul {
          list-style: disc !important;
          list-style-type: disc !important;
          margin: 0.5em 0 !important;
          padding-left: 1.5em !important;
        }
        
        .quill-display-content ul li {
          display: list-item !important;
          list-style: disc !important;
          list-style-type: disc !important;
          margin: 0.25em 0 !important;
        }
        
        .quill-display-content ul li::before {
          content: none !important;
        }
        
        /* Force numbered lists */
        .quill-display-content ol {
          list-style: decimal !important;
          list-style-type: decimal !important;
          margin: 0.5em 0 !important;
          padding-left: 1.5em !important;
        }
        
        .quill-display-content ol li {
          display: list-item !important;
          list-style: decimal !important;
          list-style-type: decimal !important;
          margin: 0.25em 0 !important;
        }
        
        .quill-display-content ol li::before {
          content: none !important;
        }
        
        /* Nested lists */
        .quill-display-content ul ul {
          list-style-type: circle !important;
        }
        
        .quill-display-content ul ul ul {
          list-style-type: square !important;
        }
        
        .quill-display-content blockquote {
          border-left: 4px solid #ddd;
          margin: 0.5em 0;
          padding-left: 1em;
          color: #666;
          font-style: italic;
        }
      `})]})}function tH(){const[t,e]=O.useState(""),s=()=>{e(`
      <h1>Testing Text Overflow</h1>
      <p>This is a normal paragraph with regular text that should wrap properly.</p>
      
      <h2>Long URL Test</h2>
      <p>Here's a very long URL that might cause overflow: https://www.example.com/very/long/path/that/continues/forever/and/ever/with/more/segments/and/parameters?param1=value1&param2=value2&param3=value3&param4=value4</p>
      
      <h2>Long Word Test</h2>
      <p>Supercalifragilisticexpialidociousantidisestablishmentarianismfloccinaucinihilipilificationpneumonoultramicroscopicsilicovolcanoconiosis</p>
      
      <h2>Long Continuous Text</h2>
      <p>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</p>
      
      <h2>Normal List</h2>
      <ul>
        <li>Normal bullet point</li>
        <li>Another normal bullet with a very long text that should wrap properly when it reaches the edge of the container</li>
        <li>Short bullet</li>
      </ul>
      
      <h2>List with Long Content</h2>
      <ul>
        <li>https://www.example.com/very/long/url/in/a/list/item/that/might/cause/overflow/problems/if/not/handled/properly</li>
        <li>Verylongwordwithoutanyspacesthatmightcauseoverflowissuesifnothandledproperlyintheeditor</li>
      </ul>
      
      <blockquote>
        This is a blockquote with a very long URL: https://www.example.com/another/very/long/path/in/a/blockquote/element/to/test/overflow/handling
      </blockquote>
    `)},r=()=>{e(`
      <h1>Normal Content Example</h1>
      <p>This is a normal paragraph with regular content that should display nicely without any overflow issues.</p>
      
      <h2>Features List</h2>
      <ul>
        <li>First feature point</li>
        <li>Second feature with more details</li>
        <li>Third feature point</li>
      </ul>
      
      <p>Another paragraph with <strong>bold</strong>, <em>italic</em>, and <u>underlined</u> text.</p>
    `)};return i.jsxs("div",{className:"container mx-auto py-8 px-4",children:[i.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Text Overflow Test"}),i.jsx("p",{className:"text-gray-600 mb-8",children:"Test how the editor handles long text, URLs, and words that might cause overflow."}),i.jsxs("div",{className:"mb-4 space-x-2",children:[i.jsx(ce,{onClick:s,children:"Load Long/Problem Text"}),i.jsx(ce,{onClick:r,variant:"outline",children:"Load Normal Text"}),i.jsx(ce,{onClick:()=>e(""),variant:"outline",children:"Clear"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsxs(ge,{className:"p-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2 text-green-600",children:"Editor (Should NOT overflow)"}),i.jsx("div",{className:"border-2 border-red-500 p-1",children:i.jsx(Xy,{content:t,onChange:e,height:"400px",enableDebugLogs:!1})}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Red border shows the container boundary. Text should NOT go outside."})]}),i.jsxs(ge,{className:"p-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2 text-blue-600",children:"Display (Should also NOT overflow)"}),i.jsx("div",{className:"border-2 border-red-500 p-4 overflow-hidden",children:i.jsx(D0,{content:t})}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Red border shows the container boundary. Text should wrap properly."})]})]}),i.jsx("div",{className:"mt-8",children:i.jsxs(ge,{className:"p-6 bg-yellow-50",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"What to Check:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Long URLs should wrap or be truncated"}),i.jsx("li",{children:"Long words should break when necessary"}),i.jsx("li",{children:"Continuous text without spaces should wrap"}),i.jsx("li",{children:"All content should stay within the red borders"}),i.jsx("li",{children:"Horizontal scrollbar should NOT appear"})]})]})})]})}function sH(){const t=`
    <p>Normal paragraph</p>
    <ul>
      <li>First bullet point</li>
      <li>Second bullet point</li>  
      <li>Third bullet point</li>
    </ul>
    <p>Another paragraph</p>
  `;return i.jsxs("div",{className:"p-4 border rounded",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Bullet Test Component"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("h4",{className:"font-semibold text-sm",children:"Test 1: Raw HTML"}),i.jsx("div",{className:"border p-2 bg-gray-50",dangerouslySetInnerHTML:{__html:t}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("h4",{className:"font-semibold text-sm",children:"Test 2: bullets-fixed class"}),i.jsx("div",{className:"bullets-fixed border p-2 bg-blue-50",dangerouslySetInnerHTML:{__html:t}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("h4",{className:"font-semibold text-sm",children:"Test 3: Forced inline styles"}),i.jsxs("div",{className:"border p-2 bg-green-50",children:[i.jsx("p",{children:"Normal paragraph"}),i.jsxs("ul",{style:{listStyle:"none",listStyleType:"none",paddingLeft:0,margin:"0.5em 0"},children:[i.jsxs("li",{style:{listStyle:"none",listStyleType:"none",position:"relative",paddingLeft:"1.5em",margin:"0.25em 0",display:"block"},children:[i.jsx("span",{style:{position:"absolute",left:0,top:0,fontWeight:"bold"},children:""}),"First forced bullet"]}),i.jsxs("li",{style:{listStyle:"none",listStyleType:"none",position:"relative",paddingLeft:"1.5em",margin:"0.25em 0",display:"block"},children:[i.jsx("span",{style:{position:"absolute",left:0,top:0,fontWeight:"bold"},children:""}),"Second forced bullet"]})]})]})]}),i.jsx("style",{children:`
        .bullets-fixed ul {
          list-style: none !important;
          list-style-type: none !important;
          padding-left: 0 !important;
          margin: 0.5em 0 !important;
        }
        
        .bullets-fixed ul li {
          list-style: none !important;
          list-style-type: none !important;
          position: relative !important;
          padding-left: 1.5em !important;
          margin: 0.25em 0 !important;
          display: block !important;
        }
        
        .bullets-fixed ul li::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
          top: 0 !important;
          font-weight: bold !important;
          color: currentColor !important;
        }
        
        .bullets-fixed ul li::marker {
          display: none !important;
          content: none !important;
          visibility: hidden !important;
        }
      `})]})}function rH(){const t=`
    <p>Paragraph before list</p>
    <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
    <p>Paragraph after list</p>
  `,e=t.replace(/<ul>/g,'<div class="forced-bullet-list">').replace(/<\/ul>/g,"</div>").replace(/<li>/g,'<div class="forced-bullet-item">').replace(/<\/li>/g,"</div>");return i.jsxs("div",{className:"p-6 space-y-8 bg-white border rounded",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Forced Bullet Test - Step by Step"}),i.jsxs("div",{className:"border-2 border-red-200 p-4 rounded",children:[i.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Step 1: Raw HTML (problematic)"}),i.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded mb-2",children:t}),i.jsx("div",{className:"border p-3 bg-red-50",dangerouslySetInnerHTML:{__html:t}}),i.jsx("p",{className:"text-sm text-red-600 mt-2",children:" This probably shows numbers instead of bullets"})]}),i.jsxs("div",{className:"border-2 border-blue-200 p-4 rounded",children:[i.jsx("h3",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Step 2: Converted HTML (should work)"}),i.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded mb-2",children:e}),i.jsx("div",{className:"border p-3 bg-blue-50",dangerouslySetInnerHTML:{__html:e}}),i.jsx("p",{className:"text-sm text-blue-600 mt-2",children:" This should show bullet points ()"})]}),i.jsxs("div",{className:"border-2 border-green-200 p-4 rounded",children:[i.jsx("h3",{className:"text-lg font-semibold text-green-700 mb-2",children:"Step 3: Manual HTML (guaranteed to work)"}),i.jsxs("div",{className:"border p-3 bg-green-50",children:[i.jsx("p",{children:"Paragraph before list"}),i.jsxs("div",{className:"forced-bullet-list",children:[i.jsx("div",{className:"forced-bullet-item",children:"Manual Item 1"}),i.jsx("div",{className:"forced-bullet-item",children:"Manual Item 2"}),i.jsx("div",{className:"forced-bullet-item",children:"Manual Item 3"})]}),i.jsx("p",{children:"Paragraph after list"})]}),i.jsx("p",{className:"text-sm text-green-600 mt-2",children:" This is manually coded and MUST work"})]}),i.jsxs("div",{className:"border-2 border-purple-200 p-4 rounded",children:[i.jsx("h3",{className:"text-lg font-semibold text-purple-700 mb-2",children:"Step 4: CSS Debug"}),i.jsx("p",{className:"text-sm mb-2",children:"Check browser DevTools for these styles:"}),i.jsx("pre",{className:"text-xs bg-purple-50 p-2 rounded",children:`.forced-bullet-list { margin: 0.5em 0; padding-left: 0; }
.forced-bullet-item { position: relative; padding-left: 1.5em; margin: 0.25em 0; }
.forced-bullet-item::before { content: ""; position: absolute; left: 0; }`})]}),i.jsx("style",{children:`
        .forced-bullet-list {
          margin: 0.5em 0 !important;
          padding-left: 0 !important;
        }
        
        .forced-bullet-item {
          position: relative !important;
          padding-left: 1.5em !important;
          margin: 0.25em 0 !important;
          display: block !important;
        }
        
        .forced-bullet-item::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
          top: 0 !important;
          color: currentColor !important;
          font-weight: bold !important;
          display: inline-block !important;
          width: 1em !important;
          font-size: 1em !important;
        }
        
        /* Force hide any potential markers on UL/LI */
        ul {
          list-style: none !important;
          list-style-type: none !important;
        }
        
        ul li {
          list-style: none !important;
          list-style-type: none !important;
        }
        
        ul li::marker {
          display: none !important;
          content: none !important;
          visibility: hidden !important;
        }
        
        ul li::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
          color: red !important;
          font-weight: bold !important;
        }
      `})]})}function nH(){const[t,e]=O.useState(""),s=O.useRef(null),r=O.useRef(null);O.useEffect(()=>{if(!s.current||r.current)return;const h=new pe(s.current,{theme:"snow",placeholder:"Type something and click the bullet list button...",modules:{toolbar:[["bold","italic"],[{list:"bullet"},{list:"ordered"}],["clean"]]}});h.on("text-change",()=>{const f=h.root.innerHTML;console.log("HTML generated:",f),e(f)}),r.current=h},[]);const l=()=>{r.current&&(r.current.root.innerHTML=`
        <p>Before list</p>
        <ul>
          <li>First bullet point</li>
          <li>Second bullet point</li>
          <li>Third bullet point</li>
        </ul>
        <p>After list</p>
      `,e(r.current.root.innerHTML))},o=()=>{r.current&&(r.current.root.innerHTML=`
        <p>Before list</p>
        <ol>
          <li>First numbered item</li>
          <li>Second numbered item</li>
          <li>Third numbered item</li>
        </ol>
        <p>After list</p>
      `,e(r.current.root.innerHTML))},u=()=>{if(r.current){const h=r.current.getSelection();if(h){const[f]=r.current.getLine(h.index),p=r.current.getFormat(h);console.log("Current formats:",p),console.log("Current line:",f)}}};return i.jsxs("div",{className:"container mx-auto py-8 px-4",children:[i.jsx("h1",{className:"text-3xl font-bold mb-8",children:"List Debug Tool"}),i.jsx(rH,{}),i.jsx(sH,{}),i.jsx("div",{className:"my-8 border-t pt-8",children:i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Quill Editor Test"})}),i.jsxs("div",{className:"mb-4 space-x-2",children:[i.jsx(ce,{onClick:l,children:"Insert Bullet List"}),i.jsx(ce,{onClick:o,children:"Insert Numbered List"}),i.jsx(ce,{onClick:()=>e(""),variant:"outline",children:"Clear"}),i.jsx(ce,{onClick:u,variant:"outline",children:"Check Current Format"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[i.jsxs(ge,{className:"p-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"1. Quill Editor"}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Try clicking the bullet list button () in the toolbar"}),i.jsx("div",{ref:s,style:{height:"300px"},className:"bg-white"})]}),i.jsxs(ge,{className:"p-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"2. Raw HTML Output"}),i.jsx("div",{className:"bg-gray-900 text-green-400 p-2 rounded font-mono text-xs overflow-auto h-[300px]",children:i.jsx("pre",{children:t||"(empty)"})}),i.jsxs("div",{className:"mt-2 text-xs",children:[i.jsx("p",{className:"text-blue-600",children:"Look for: <ul> = bullets"}),i.jsx("p",{className:"text-orange-600",children:"Look for: <ol> = numbers"})]})]}),i.jsxs(ge,{className:"p-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"3. Browser Rendering"}),i.jsx("div",{className:"rendered-content border p-4 rounded min-h-[300px]",dangerouslySetInnerHTML:{__html:t}})]})]}),i.jsx("div",{className:"mt-8",children:i.jsxs(ge,{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"QuillContentUltraFixed Test"}),t&&i.jsxs("div",{className:"border p-4 rounded bg-yellow-50",children:[i.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Using QuillContentUltraFixed Component:"}),i.jsx(xS,{content:t})]})]})}),i.jsx("div",{className:"grid grid-cols-1 gap-4 mt-6",children:i.jsxs(ge,{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Direct HTML Conversion Test"}),i.jsx("div",{className:"bg-green-50 border p-4 rounded",children:i.jsxs("div",{className:"custom-bullet-list",children:[i.jsx("div",{className:"custom-bullet-item",children:"First bullet converted to div"}),i.jsx("div",{className:"custom-bullet-item",children:"Second bullet converted to div"}),i.jsx("div",{className:"custom-bullet-item",children:"Third bullet converted to div"})]})}),i.jsx("style",{children:`
            .custom-bullet-list {
              margin: 0.5em 0 !important;
              padding-left: 0 !important;
            }
            
            .custom-bullet-item {
              position: relative !important;
              padding-left: 1.5em !important;
              margin: 0.25em 0 !important;
              display: block !important;
            }
            
            .custom-bullet-item::before {
              content: "" !important;
              position: absolute !important;
              left: 0 !important;
              top: 0 !important;
              color: currentColor !important;
              font-weight: bold !important;
              display: inline-block !important;
              width: 1em !important;
            }
          `})]})}),i.jsxs(ge,{className:"p-6 mt-8",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"What Should Happen:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-blue-600",children:"Bullet List Button ()"}),i.jsxs("ul",{className:"list-disc list-inside mt-2",children:[i.jsx("li",{children:"Should create <ul> tags"}),i.jsx("li",{children:"Should show bullet points"}),i.jsx("li",{children:"HTML should contain <ul><li>...</li></ul>"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-orange-600",children:"Numbered List Button (1.)"}),i.jsxs("ul",{className:"list-disc list-inside mt-2",children:[i.jsx("li",{children:"Should create <ol> tags"}),i.jsx("li",{children:"Should show numbers (1, 2, 3...)"}),i.jsx("li",{children:"HTML should contain <ol><li>...</li></ol>"})]})]})]})]}),i.jsxs(ge,{className:"p-6 mt-4 bg-yellow-50",children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:"CSS Interference Check:"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:"Raw UL (should show bullets):"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Item 1"}),i.jsx("li",{children:"Item 2"})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:"Raw OL (should show numbers):"}),i.jsxs("ol",{children:[i.jsx("li",{children:"Item 1"}),i.jsx("li",{children:"Item 2"})]})]})]})]}),i.jsx("style",{children:`
        /* Disable native list styles completely */
        .rendered-content ul {
          list-style: none !important;
          list-style-type: none !important;
          padding-left: 0 !important;
          margin: 0.5em 0 !important;
        }
        
        .rendered-content ul li {
          list-style: none !important;
          list-style-type: none !important;
          display: block !important;
          position: relative !important;
          padding-left: 1.5em !important;
          margin: 0.25em 0 !important;
        }
        
        /* Create custom bullet with ::before */
        .rendered-content ul li::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
          top: 0 !important;
          color: inherit !important;
          font-weight: bold !important;
          display: inline-block !important;
          width: 1em !important;
        }
        
        /* Hide native ::marker completely */
        .rendered-content ul li::marker {
          content: none !important;
          display: none !important;
        }
        
        /* Nested bullets */
        .rendered-content ul ul li::before {
          content: "" !important;
        }
        
        .rendered-content ul ul ul li::before {
          content: "" !important;
        }
        
        /* OL keeps normal behavior */
        .rendered-content ol {
          list-style-type: decimal !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
        }
        
        .rendered-content ol li {
          display: list-item !important;
          list-style-type: decimal !important;
          margin: 0.25em 0 !important;
        }
        
        .rendered-content ol li::before {
          content: none !important;
          display: none !important;
        }
      `})]})}const Dt=({children:t})=>{const{user:e,isLoading:s}=Bt();return console.log(" PROTECTED ROUTE: isLoading:",s,"user:",!!e),s?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e?i.jsx(Rq,{children:t}):i.jsx(Qu,{to:"/login",replace:!0})},zg=({children:t})=>{const{user:e,isLoading:s}=Bt();return s?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e?i.jsx(Qu,{to:"/dashboard",replace:!0}):i.jsx(i.Fragment,{children:t})},iH=()=>i.jsxs(pk,{children:[i.jsx(xt,{path:"/login",element:i.jsx(zg,{children:i.jsx(fR,{})})}),i.jsx(xt,{path:"/forgot-password",element:i.jsx(zg,{children:i.jsx(XR,{})})}),i.jsx(xt,{path:"/signup",element:i.jsx(zg,{children:i.jsx(JR,{})})}),i.jsx(xt,{path:"/",element:i.jsx(Qu,{to:"/dashboard",replace:!0})}),i.jsx(xt,{path:"/unauthorized",element:i.jsx(e8,{})}),i.jsx(xt,{path:"/dashboard",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_MEMBER_DASHBOARD",children:i.jsx(JL,{})})})}),i.jsx(xt,{path:"/cpd",element:i.jsx(Dt,{children:i.jsx($t,{permission:"CREATE_CPD",children:i.jsx(m7,{})})})}),i.jsx(xt,{path:"/cpd/review",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(p7,{})})})}),i.jsx(xt,{path:"/cpd/settings",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(g7,{})})})}),i.jsx(xt,{path:"/events",element:i.jsx(Dt,{children:i.jsx($t,{permission:"REGISTER_EVENT",children:i.jsx(y7,{})})})}),i.jsx(xt,{path:"/events/:slug",element:i.jsx(Dt,{children:i.jsx($t,{permission:"REGISTER_EVENT",children:i.jsx(M7,{})})})}),i.jsx(xt,{path:"/my-registrations",element:i.jsx(Dt,{children:i.jsx($t,{permission:"REGISTER_EVENT",children:i.jsx(D7,{})})})}),i.jsx(xt,{path:"/profile",element:i.jsx(Dt,{children:i.jsx(iP,{})})}),i.jsx(xt,{path:"/admin",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(Mq,{})})})}),i.jsx(xt,{path:"/admin/members",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(Uq,{})})})}),i.jsx(xt,{path:"/admin/membership",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(Bq,{})})})}),i.jsx(xt,{path:"/admin/import-users",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(Wq,{})})})}),i.jsx(xt,{path:"/admin/import-activities",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(Gq,{})})})}),i.jsx(xt,{path:"/admin/editor-test",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(QF,{})})})}),i.jsx(xt,{path:"/admin/rich-content-test",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(XF,{})})})}),i.jsx(xt,{path:"/admin/wysiwyg-test",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(JF,{})})})}),i.jsx(xt,{path:"/admin/quill-debug",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(eH,{})})})}),i.jsx(xt,{path:"/admin/overflow-test",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(tH,{})})})}),i.jsx(xt,{path:"/admin/list-debug",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(nH,{})})})}),i.jsx(xt,{path:"/admin/import-complete",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(Qq,{})})})}),i.jsx(xt,{path:"/admin/events",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(zF,{})})})}),i.jsx(xt,{path:"/admin/smtp-settings",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(BF,{})})})}),i.jsx(xt,{path:"/admin/emailjs-config",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(FF,{})})})}),i.jsx(xt,{path:"/admin/email-templates",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(VF,{})})})}),i.jsx(xt,{path:"/admin/event-reminders",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(ZF,{})})})}),i.jsx(xt,{path:"/admin/setup-media",element:i.jsx(Dt,{children:i.jsx($t,{permission:"ACCESS_ADMIN_DASHBOARD",children:i.jsx(KF,{})})})}),i.jsx(xt,{path:"*",element:i.jsx(Qu,{to:"/dashboard",replace:!0})})]}),aH=()=>{Object.keys(localStorage).filter(e=>e.includes("supabase")||e.includes("sb-")||e.includes("auth")).forEach(e=>{localStorage.removeItem(e)}),console.log("Supabase cache cleared")};class lH extends O.Component{state={hasError:!1,error:null};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("Uncaught error:",e,s)}handleReset=()=>{console.log("ErrorBoundary: Performing full reset"),aH(),localStorage.clear(),sessionStorage.clear(),window.location.href="/login"};handleHardReload=()=>{console.log("ErrorBoundary: Performing hard reload"),localStorage.clear(),sessionStorage.clear(),window.location.reload()};render(){return this.state.hasError?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"An error occurred while loading the application. This might be due to cached data."}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{onClick:this.handleReset,className:"w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors font-medium",children:" Clear All Data & Go to Login"}),i.jsx("button",{onClick:this.handleHardReload,className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors font-medium",children:" Hard Reload Page"}),i.jsx("button",{onClick:()=>window.location.href="/login",className:"w-full bg-gray-200 text-gray-700 py-2 px-4 rounded hover:bg-gray-300 transition-colors",children:" Go to Login Page"})]}),!1]})}):this.props.children}}const oH=()=>{const{isLoading:t}=Bt();O.useEffect(()=>{let e;return t&&(e=setTimeout(()=>{console.error("Auth health check - extremely long loading time");const s=Bt.getState();s.isLoading&&(console.warn("Force stopping loading after timeout"),s.setIsLoading(!1),s.setRolesLoaded(!0))},5e3)),()=>{e&&clearTimeout(e)}},[t])};function cH(){const{setUser:t,setIsLoading:e,setRoles:s}=Bt();return oH(),O.useEffect(()=>{(async()=>{try{const{data:{session:o}}=await l0.getSession();o?.user?(t(o.user),o.user.email==="rrzillesg@gmail.com"?s(["AdminSuper","Admin","Members"]):s(["Members"])):(t(null),s([]))}catch(o){console.error("Auth error:",o),t(null),s([])}finally{e(!1)}})();const{data:{subscription:l}}=l0.onAuthStateChange(async(o,u)=>{t(u?.user??null),u?.user?u.user.email==="rrzillesg@gmail.com"?s(["AdminSuper","Admin","Members"]):s(["Members"]):s([])});return()=>{l.unsubscribe()}},[]),i.jsx(lH,{children:i.jsx(Ik,{children:i.jsx(iH,{})})})}NC.createRoot(document.getElementById("root")).render(i.jsx(cH,{}))});export default uH();
