var $k=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var vZ=$k(($r,Ur)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();var Ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Uk(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function r(){var a=!1;try{a=this instanceof r}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),s}var Hg={exports:{}},Wu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function Bk(){if(c_)return Wu;c_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:t,type:r,key:u,ref:a!==void 0?a:null,props:o}}return Wu.Fragment=e,Wu.jsx=s,Wu.jsxs=s,Wu}var u_;function zk(){return u_||(u_=1,Hg.exports=Bk()),Hg.exports}var n=zk(),Vg={exports:{}},Qu={},Gg={exports:{}},Zg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function Fk(){return d_||(d_=1,function(t){function e(q,Z){var Q=q.length;q.push(Z);e:for(;0<Q;){var ue=Q-1>>>1,U=q[ue];if(0<a(U,Z))q[ue]=Z,q[Q]=U,Q=ue;else break e}}function s(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Z=q[0],Q=q.pop();if(Q!==Z){q[0]=Q;e:for(var ue=0,U=q.length,X=U>>>1;ue<X;){var le=2*(ue+1)-1,ee=q[le],ge=le+1,we=q[ge];if(0>a(ee,Q))ge<U&&0>a(we,ee)?(q[ue]=we,q[ge]=Q,ue=ge):(q[ue]=ee,q[le]=Q,ue=le);else if(ge<U&&0>a(we,Q))q[ue]=we,q[ge]=Q,ue=ge;else break e}}return Z}function a(q,Z){var Q=q.sortIndex-Z.sortIndex;return Q!==0?Q:q.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],m=[],g=1,x=null,v=3,_=!1,b=!1,N=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function F(q){for(var Z=s(m);Z!==null;){if(Z.callback===null)r(m);else if(Z.startTime<=q)r(m),Z.sortIndex=Z.expirationTime,e(f,Z);else break;Z=s(m)}}function C(q){if(N=!1,F(q),!b)if(s(f)!==null)b=!0,L||(L=!0,D());else{var Z=s(m);Z!==null&&J(C,Z.startTime-q)}}var L=!1,B=-1,S=5,k=-1;function z(){return w?!0:!(t.unstable_now()-k<S)}function R(){if(w=!1,L){var q=t.unstable_now();k=q;var Z=!0;try{e:{b=!1,N&&(N=!1,A(B),B=-1),_=!0;var Q=v;try{t:{for(F(q),x=s(f);x!==null&&!(x.expirationTime>q&&z());){var ue=x.callback;if(typeof ue=="function"){x.callback=null,v=x.priorityLevel;var U=ue(x.expirationTime<=q);if(q=t.unstable_now(),typeof U=="function"){x.callback=U,F(q),Z=!0;break t}x===s(f)&&r(f),F(q)}else r(f);x=s(f)}if(x!==null)Z=!0;else{var X=s(m);X!==null&&J(C,X.startTime-q),Z=!1}}break e}finally{x=null,v=Q,_=!1}Z=void 0}}finally{Z?D():L=!1}}}var D;if(typeof O=="function")D=function(){O(R)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,H=P.port2;P.port1.onmessage=R,D=function(){H.postMessage(null)}}else D=function(){E(R,0)};function J(q,Z){B=E(function(){q(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(q){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var Q=v;v=Z;try{return q()}finally{v=Q}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Q=v;v=q;try{return Z()}finally{v=Q}},t.unstable_scheduleCallback=function(q,Z,Q){var ue=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ue+Q:ue):Q=ue,q){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Q+U,q={id:g++,callback:Z,priorityLevel:q,startTime:Q,expirationTime:U,sortIndex:-1},Q>ue?(q.sortIndex=Q,e(m,q),s(f)===null&&q===s(m)&&(N?(A(B),B=-1):N=!0,J(C,Q-ue))):(q.sortIndex=U,e(f,q),b||_||(b=!0,L||(L=!0,D()))),q},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(q){var Z=v;return function(){var Q=v;v=Z;try{return q.apply(this,arguments)}finally{v=Q}}}}(Zg)),Zg}var h_;function Hk(){return h_||(h_=1,Gg.exports=Fk()),Gg.exports}var Yg={exports:{}},at={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function Vk(){if(f_)return at;f_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=x&&U[x]||U["@@iterator"],typeof U=="function"?U:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,N={};function w(U,X,le){this.props=U,this.context=X,this.refs=N,this.updater=le||_}w.prototype.isReactComponent={},w.prototype.setState=function(U,X){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,X,"setState")},w.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function E(){}E.prototype=w.prototype;function A(U,X,le){this.props=U,this.context=X,this.refs=N,this.updater=le||_}var O=A.prototype=new E;O.constructor=A,b(O,w.prototype),O.isPureReactComponent=!0;var F=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function B(U,X,le,ee,ge,we){return le=we.ref,{$$typeof:t,type:U,key:X,ref:le!==void 0?le:null,props:we}}function S(U,X){return B(U.type,X,void 0,void 0,void 0,U.props)}function k(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function z(U){var X={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(le){return X[le]})}var R=/\/+/g;function D(U,X){return typeof U=="object"&&U!==null&&U.key!=null?z(""+U.key):X.toString(36)}function P(){}function H(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(P,P):(U.status="pending",U.then(function(X){U.status==="pending"&&(U.status="fulfilled",U.value=X)},function(X){U.status==="pending"&&(U.status="rejected",U.reason=X)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function J(U,X,le,ee,ge){var we=typeof U;(we==="undefined"||we==="boolean")&&(U=null);var Ce=!1;if(U===null)Ce=!0;else switch(we){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(U.$$typeof){case t:case e:Ce=!0;break;case g:return Ce=U._init,J(Ce(U._payload),X,le,ee,ge)}}if(Ce)return ge=ge(U),Ce=ee===""?"."+D(U,0):ee,F(ge)?(le="",Ce!=null&&(le=Ce.replace(R,"$&/")+"/"),J(ge,X,le,"",function(Oe){return Oe})):ge!=null&&(k(ge)&&(ge=S(ge,le+(ge.key==null||U&&U.key===ge.key?"":(""+ge.key).replace(R,"$&/")+"/")+Ce)),X.push(ge)),1;Ce=0;var Me=ee===""?".":ee+":";if(F(U))for(var Ne=0;Ne<U.length;Ne++)ee=U[Ne],we=Me+D(ee,Ne),Ce+=J(ee,X,le,we,ge);else if(Ne=v(U),typeof Ne=="function")for(U=Ne.call(U),Ne=0;!(ee=U.next()).done;)ee=ee.value,we=Me+D(ee,Ne++),Ce+=J(ee,X,le,we,ge);else if(we==="object"){if(typeof U.then=="function")return J(H(U),X,le,ee,ge);throw X=String(U),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function q(U,X,le){if(U==null)return U;var ee=[],ge=0;return J(U,ee,"","",function(we){return X.call(le,we,ge++)}),ee}function Z(U){if(U._status===-1){var X=U._result;X=X(),X.then(function(le){(U._status===0||U._status===-1)&&(U._status=1,U._result=le)},function(le){(U._status===0||U._status===-1)&&(U._status=2,U._result=le)}),U._status===-1&&(U._status=0,U._result=X)}if(U._status===1)return U._result.default;throw U._result}var Q=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function ue(){}return at.Children={map:q,forEach:function(U,X,le){q(U,function(){X.apply(this,arguments)},le)},count:function(U){var X=0;return q(U,function(){X++}),X},toArray:function(U){return q(U,function(X){return X})||[]},only:function(U){if(!k(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},at.Component=w,at.Fragment=s,at.Profiler=a,at.PureComponent=A,at.StrictMode=r,at.Suspense=f,at.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,at.__COMPILER_RUNTIME={__proto__:null,c:function(U){return C.H.useMemoCache(U)}},at.cache=function(U){return function(){return U.apply(null,arguments)}},at.cloneElement=function(U,X,le){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ee=b({},U.props),ge=U.key,we=void 0;if(X!=null)for(Ce in X.ref!==void 0&&(we=void 0),X.key!==void 0&&(ge=""+X.key),X)!L.call(X,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&X.ref===void 0||(ee[Ce]=X[Ce]);var Ce=arguments.length-2;if(Ce===1)ee.children=le;else if(1<Ce){for(var Me=Array(Ce),Ne=0;Ne<Ce;Ne++)Me[Ne]=arguments[Ne+2];ee.children=Me}return B(U.type,ge,void 0,void 0,we,ee)},at.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:o,_context:U},U},at.createElement=function(U,X,le){var ee,ge={},we=null;if(X!=null)for(ee in X.key!==void 0&&(we=""+X.key),X)L.call(X,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ge[ee]=X[ee]);var Ce=arguments.length-2;if(Ce===1)ge.children=le;else if(1<Ce){for(var Me=Array(Ce),Ne=0;Ne<Ce;Ne++)Me[Ne]=arguments[Ne+2];ge.children=Me}if(U&&U.defaultProps)for(ee in Ce=U.defaultProps,Ce)ge[ee]===void 0&&(ge[ee]=Ce[ee]);return B(U,we,void 0,void 0,null,ge)},at.createRef=function(){return{current:null}},at.forwardRef=function(U){return{$$typeof:h,render:U}},at.isValidElement=k,at.lazy=function(U){return{$$typeof:g,_payload:{_status:-1,_result:U},_init:Z}},at.memo=function(U,X){return{$$typeof:m,type:U,compare:X===void 0?null:X}},at.startTransition=function(U){var X=C.T,le={};C.T=le;try{var ee=U(),ge=C.S;ge!==null&&ge(le,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(ue,Q)}catch(we){Q(we)}finally{C.T=X}},at.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},at.use=function(U){return C.H.use(U)},at.useActionState=function(U,X,le){return C.H.useActionState(U,X,le)},at.useCallback=function(U,X){return C.H.useCallback(U,X)},at.useContext=function(U){return C.H.useContext(U)},at.useDebugValue=function(){},at.useDeferredValue=function(U,X){return C.H.useDeferredValue(U,X)},at.useEffect=function(U,X,le){var ee=C.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(U,X)},at.useId=function(){return C.H.useId()},at.useImperativeHandle=function(U,X,le){return C.H.useImperativeHandle(U,X,le)},at.useInsertionEffect=function(U,X){return C.H.useInsertionEffect(U,X)},at.useLayoutEffect=function(U,X){return C.H.useLayoutEffect(U,X)},at.useMemo=function(U,X){return C.H.useMemo(U,X)},at.useOptimistic=function(U,X){return C.H.useOptimistic(U,X)},at.useReducer=function(U,X,le){return C.H.useReducer(U,X,le)},at.useRef=function(U){return C.H.useRef(U)},at.useState=function(U){return C.H.useState(U)},at.useSyncExternalStore=function(U,X,le){return C.H.useSyncExternalStore(U,X,le)},at.useTransition=function(){return C.H.useTransition()},at.version="19.1.1",at}var m_;function My(){return m_||(m_=1,Yg.exports=Vk()),Yg.exports}var Kg={exports:{}},sr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function Gk(){if(p_)return sr;p_=1;var t=My();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,m,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:f,containerInfo:m,implementation:g}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return sr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sr.createPortal=function(f,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(f,m,null,g)},sr.flushSync=function(f){var m=u.T,g=r.p;try{if(u.T=null,r.p=2,f)return f()}finally{u.T=m,r.p=g,r.d.f()}},sr.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(f,m))},sr.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},sr.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var g=m.as,x=h(g,m.crossOrigin),v=typeof m.integrity=="string"?m.integrity:void 0,_=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?r.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:x,integrity:v,fetchPriority:_}):g==="script"&&r.d.X(f,{crossOrigin:x,integrity:v,fetchPriority:_,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},sr.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=h(m.as,m.crossOrigin);r.d.M(f,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(f)},sr.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,x=h(g,m.crossOrigin);r.d.L(f,g,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},sr.preloadModule=function(f,m){if(typeof f=="string")if(m){var g=h(m.as,m.crossOrigin);r.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(f)},sr.requestFormReset=function(f){r.d.r(f)},sr.unstable_batchedUpdates=function(f,m){return f(m)},sr.useFormState=function(f,m,g){return u.H.useFormState(f,m,g)},sr.useFormStatus=function(){return u.H.useHostTransitionStatus()},sr.version="19.1.1",sr}var g_;function Zk(){if(g_)return Kg.exports;g_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Kg.exports=Gk(),Kg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function Yk(){if(y_)return Qu;y_=1;var t=Hk(),e=My(),s=Zk();function r(i){var l="https://react.dev/errors/"+i;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var l=i,c=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(c=l.return),i=l.return;while(i)}return l.tag===3?c:null}function u(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function h(i){if(o(i)!==i)throw Error(r(188))}function f(i){var l=i.alternate;if(!l){if(l=o(i),l===null)throw Error(r(188));return l!==i?null:i}for(var c=i,d=l;;){var p=c.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){c=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===c)return h(p),i;if(y===d)return h(p),l;y=y.sibling}throw Error(r(188))}if(c.return!==d.return)c=p,d=y;else{for(var T=!1,I=p.child;I;){if(I===c){T=!0,c=p,d=y;break}if(I===d){T=!0,d=p,c=y;break}I=I.sibling}if(!T){for(I=y.child;I;){if(I===c){T=!0,c=y,d=p;break}if(I===d){T=!0,d=y,c=p;break}I=I.sibling}if(!T)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:l}function m(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i;for(i=i.child;i!==null;){if(l=m(i),l!==null)return l;i=i.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function D(i){return i===null||typeof i!="object"?null:(i=R&&i[R]||i["@@iterator"],typeof i=="function"?i:null)}var P=Symbol.for("react.client.reference");function H(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===P?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case b:return"Fragment";case w:return"Profiler";case N:return"StrictMode";case C:return"Suspense";case L:return"SuspenseList";case k:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case _:return"Portal";case O:return(i.displayName||"Context")+".Provider";case A:return(i._context.displayName||"Context")+".Consumer";case F:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case B:return l=i.displayName||null,l!==null?l:H(i.type)||"Memo";case S:l=i._payload,i=i._init;try{return H(i(l))}catch{}}return null}var J=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ue=[],U=-1;function X(i){return{current:i}}function le(i){0>U||(i.current=ue[U],ue[U]=null,U--)}function ee(i,l){U++,ue[U]=i.current,i.current=l}var ge=X(null),we=X(null),Ce=X(null),Me=X(null);function Ne(i,l){switch(ee(Ce,l),ee(we,i),ee(ge,null),l.nodeType){case 9:case 11:i=(i=l.documentElement)&&(i=i.namespaceURI)?Pw(i):0;break;default:if(i=l.tagName,l=l.namespaceURI)l=Pw(l),i=Iw(l,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}le(ge),ee(ge,i)}function Oe(){le(ge),le(we),le(Ce)}function De(i){i.memoizedState!==null&&ee(Me,i);var l=ge.current,c=Iw(l,i.type);l!==c&&(ee(we,i),ee(ge,c))}function Re(i){we.current===i&&(le(ge),le(we)),Me.current===i&&(le(Me),Vu._currentValue=Q)}var qe=Object.prototype.hasOwnProperty,Ze=t.unstable_scheduleCallback,Ke=t.unstable_cancelCallback,Je=t.unstable_shouldYield,rt=t.unstable_requestPaint,bt=t.unstable_now,ut=t.unstable_getCurrentPriorityLevel,vt=t.unstable_ImmediatePriority,G=t.unstable_UserBlockingPriority,se=t.unstable_NormalPriority,he=t.unstable_LowPriority,ke=t.unstable_IdlePriority,Se=t.log,Ee=t.unstable_setDisableYieldValue,Te=null,Pe=null;function We(i){if(typeof Se=="function"&&Ee(i),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(Te,i)}catch{}}var pt=Math.clz32?Math.clz32:Ss,es=Math.log,ts=Math.LN2;function Ss(i){return i>>>=0,i===0?32:31-(es(i)/ts|0)|0}var Ms=256,Gs=4194304;function Qs(i){var l=i&42;if(l!==0)return l;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Gr(i,l,c){var d=i.pendingLanes;if(d===0)return 0;var p=0,y=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var I=d&134217727;return I!==0?(d=I&~y,d!==0?p=Qs(d):(T&=I,T!==0?p=Qs(T):c||(c=I&~i,c!==0&&(p=Qs(c))))):(I=d&~y,I!==0?p=Qs(I):T!==0?p=Qs(T):c||(c=d&~i,c!==0&&(p=Qs(c)))),p===0?0:l!==0&&l!==p&&(l&y)===0&&(y=p&-p,c=l&-l,y>=c||y===32&&(c&4194048)!==0)?l:p}function mr(i,l){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&l)===0}function Zr(i,l){switch(i){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pr(){var i=Ms;return Ms<<=1,(Ms&4194048)===0&&(Ms=256),i}function vi(){var i=Gs;return Gs<<=1,(Gs&62914560)===0&&(Gs=4194304),i}function wi(i){for(var l=[],c=0;31>c;c++)l.push(i);return l}function Cr(i,l){i.pendingLanes|=l,l!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function dl(i,l,c,d,p,y){var T=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var I=i.entanglements,Y=i.expirationTimes,ie=i.hiddenUpdates;for(c=T&~c;0<c;){var ye=31-pt(c),_e=1<<ye;I[ye]=0,Y[ye]=-1;var oe=ie[ye];if(oe!==null)for(ie[ye]=null,ye=0;ye<oe.length;ye++){var ce=oe[ye];ce!==null&&(ce.lane&=-536870913)}c&=~_e}d!==0&&Vn(i,d,0),y!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=y&~(T&~l))}function Vn(i,l,c){i.pendingLanes|=l,i.suspendedLanes&=~l;var d=31-pt(l);i.entangledLanes|=l,i.entanglements[d]=i.entanglements[d]|1073741824|c&4194090}function oa(i,l){var c=i.entangledLanes|=l;for(i=i.entanglements;c;){var d=31-pt(c),p=1<<d;p&l|i[d]&l&&(i[d]|=l),c&=~p}}function _i(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ji(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function mn(){var i=Z.p;return i!==0?i:(i=window.event,i===void 0?32:r_(i.type))}function bo(i,l){var c=Z.p;try{return Z.p=i,l()}finally{Z.p=c}}var Ds=Math.random().toString(36).slice(2),xs="__reactFiber$"+Ds,Ls="__reactProps$"+Ds,Gn="__reactContainer$"+Ds,ca="__reactEvents$"+Ds,hl="__reactListeners$"+Ds,Es="__reactHandles$"+Ds,vo="__reactResources$"+Ds,Ni="__reactMarker$"+Ds;function fl(i){delete i[xs],delete i[Ls],delete i[ca],delete i[hl],delete i[Es]}function Zn(i){var l=i[xs];if(l)return l;for(var c=i.parentNode;c;){if(l=c[Gn]||c[xs]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(i=zw(i);i!==null;){if(c=i[xs])return c;i=zw(i)}return l}i=c,c=i.parentNode}return null}function Yn(i){if(i=i[xs]||i[Gn]){var l=i.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return i}return null}function ss(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i.stateNode;throw Error(r(33))}function Kn(i){var l=i[vo];return l||(l=i[vo]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function rs(i){i[Ni]=!0}var wo=new Set,_o={};function pn(i,l){ls(i,l),ls(i+"Capture",l)}function ls(i,l){for(_o[i]=l,i=0;i<l.length;i++)wo.add(l[i])}var su=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jo={},No={};function ru(i){return qe.call(No,i)?!0:qe.call(jo,i)?!1:su.test(i)?No[i]=!0:(jo[i]=!0,!1)}function ua(i,l,c){if(ru(l))if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(l);return}}i.setAttribute(l,""+c)}}function gn(i,l,c){if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttribute(l,""+c)}}function gr(i,l,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(l,c,""+d)}}var Wn,kr;function Yr(i){if(Wn===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);Wn=l&&l[1]||"",kr=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wn+i+kr}var ml=!1;function pl(i,l){if(!i||ml)return"";ml=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(ce){var oe=ce}Reflect.construct(i,[],_e)}else{try{_e.call()}catch(ce){oe=ce}i.call(_e.prototype)}}else{try{throw Error()}catch(ce){oe=ce}(_e=i())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(ce){if(ce&&oe&&typeof ce.stack=="string")return[ce.stack,oe.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),T=y[0],I=y[1];if(T&&I){var Y=T.split(`
`),ie=I.split(`
`);for(p=d=0;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;for(;p<ie.length&&!ie[p].includes("DetermineComponentFrameRoot");)p++;if(d===Y.length||p===ie.length)for(d=Y.length-1,p=ie.length-1;1<=d&&0<=p&&Y[d]!==ie[p];)p--;for(;1<=d&&0<=p;d--,p--)if(Y[d]!==ie[p]){if(d!==1||p!==1)do if(d--,p--,0>p||Y[d]!==ie[p]){var ye=`
`+Y[d].replace(" at new "," at ");return i.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",i.displayName)),ye}while(1<=d&&0<=p);break}}}finally{ml=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Yr(c):""}function nu(i){switch(i.tag){case 26:case 27:case 5:return Yr(i.type);case 16:return Yr("Lazy");case 13:return Yr("Suspense");case 19:return Yr("SuspenseList");case 0:case 15:return pl(i.type,!1);case 11:return pl(i.type.render,!1);case 1:return pl(i.type,!0);case 31:return Yr("Activity");default:return""}}function So(i){try{var l="";do l+=nu(i),i=i.return;while(i);return l}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Xs(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Si(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function gl(i){var l=Si(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),d=""+i[l];if(!i.hasOwnProperty(l)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return p.call(this)},set:function(T){d=""+T,y.call(this,T)}}),Object.defineProperty(i,l,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Kr(i){i._valueTracker||(i._valueTracker=gl(i))}function yl(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var c=l.getValue(),d="";return i&&(d=Si(i)?i.checked?"true":"false":i.value),i=d,i!==c?(l.setValue(i),!0):!1}function Ei(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var iu=/[\n"\\]/g;function Js(i){return i.replace(iu,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function xl(i,l,c,d,p,y,T,I){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),l!=null?T==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+Xs(l)):i.value!==""+Xs(l)&&(i.value=""+Xs(l)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),l!=null?Ai(i,T,Xs(l)):c!=null?Ai(i,T,Xs(c)):d!=null&&i.removeAttribute("value"),p==null&&y!=null&&(i.defaultChecked=!!y),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+Xs(I):i.removeAttribute("name")}function Eo(i,l,c,d,p,y,T,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),l!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||l!=null))return;c=c!=null?""+Xs(c):"",l=l!=null?""+Xs(l):c,I||l===i.value||(i.value=l),i.defaultValue=l}d=d??p,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=I?i.checked:!!d,i.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function Ai(i,l,c){l==="number"&&Ei(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Qn(i,l,c,d){if(i=i.options,l){l={};for(var p=0;p<c.length;p++)l["$"+c[p]]=!0;for(c=0;c<i.length;c++)p=l.hasOwnProperty("$"+i[c].value),i[c].selected!==p&&(i[c].selected=p),p&&d&&(i[c].defaultSelected=!0)}else{for(c=""+Xs(c),l=null,p=0;p<i.length;p++){if(i[p].value===c){i[p].selected=!0,d&&(i[p].defaultSelected=!0);return}l!==null||i[p].disabled||(l=i[p])}l!==null&&(l.selected=!0)}}function Ao(i,l,c){if(l!=null&&(l=""+Xs(l),l!==i.value&&(i.value=l),c==null)){i.defaultValue!==l&&(i.defaultValue=l);return}i.defaultValue=c!=null?""+Xs(c):""}function Xn(i,l,c,d){if(l==null){if(d!=null){if(c!=null)throw Error(r(92));if(J(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),l=c}c=Xs(l),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d)}function qs(i,l){if(l){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=l;return}}i.textContent=l}var yn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wr(i,l,c){var d=l.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="":d?i.setProperty(l,c):typeof c!="number"||c===0||yn.has(l)?l==="float"?i.cssFloat=c:i[l]=(""+c).trim():i[l]=c+"px"}function Co(i,l,c){if(l!=null&&typeof l!="object")throw Error(r(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var p in l)d=l[p],l.hasOwnProperty(p)&&c[p]!==d&&Wr(i,p,d)}else for(var y in l)l.hasOwnProperty(y)&&Wr(i,y,l[y])}function yr(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var au=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function da(i){return lu.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var bl=null;function ha(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ns=null,xn=null;function vl(i){var l=Yn(i);if(l&&(i=l.stateNode)){var c=i[Ls]||null;e:switch(i=l.stateNode,l.type){case"input":if(xl(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),l=c.name,c.type==="radio"&&l!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Js(""+l)+'"][type="radio"]'),l=0;l<c.length;l++){var d=c[l];if(d!==i&&d.form===i.form){var p=d[Ls]||null;if(!p)throw Error(r(90));xl(d,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(l=0;l<c.length;l++)d=c[l],d.form===i.form&&yl(d)}break e;case"textarea":Ao(i,c.value,c.defaultValue);break e;case"select":l=c.value,l!=null&&Qn(i,!!c.multiple,l,!1)}}}var Jn=!1;function fa(i,l,c){if(Jn)return i(l,c);Jn=!0;try{var d=i(l);return d}finally{if(Jn=!1,(ns!==null||xn!==null)&&(zh(),ns&&(l=ns,i=xn,xn=ns=null,vl(l),i)))for(l=0;l<i.length;l++)vl(i[l])}}function Qr(i,l){var c=i.stateNode;if(c===null)return null;var d=c[Ls]||null;if(d===null)return null;c=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,l,typeof c));return c}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ma=!1;if(Tr)try{var bn={};Object.defineProperty(bn,"passive",{get:function(){ma=!0}}),window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,bn)}catch{ma=!1}var Or=null,xr=null,Ci=null;function pa(){if(Ci)return Ci;var i,l=xr,c=l.length,d,p="value"in Or?Or.value:Or.textContent,y=p.length;for(i=0;i<c&&l[i]===p[i];i++);var T=c-i;for(d=1;d<=T&&l[c-d]===p[y-d];d++);return Ci=p.slice(i,1<d?1-d:void 0)}function ga(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function ya(){return!0}function j(){return!1}function $(i){function l(c,d,p,y,T){this._reactName=c,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(c=i[I],this[I]=c?c(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ya:j,this.isPropagationStopped=j,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ya)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ya)},persist:function(){},isPersistent:ya}),l}var K={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pe=$(K),tt=g({},K,{view:0,detail:0}),Ve=$(tt),gt,dt,It,xt=g({},tt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xm,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==It&&(It&&i.type==="mousemove"?(gt=i.screenX-It.screenX,dt=i.screenY-It.screenY):dt=gt=0,It=i),gt)},movementY:function(i){return"movementY"in i?i.movementY:dt}}),As=$(xt),er=g({},xt,{dataTransfer:0}),os=$(er),Ps=g({},tt,{relatedTarget:0}),cs=$(Ps),ei=g({},K,{animationName:0,elapsedTime:0,pseudoElement:0}),vn=$(ei),ki=g({},K,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),oh=$(ki),ko=g({},K,{data:0}),wl=$(ko),YA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QA(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=WA[i])?!!l[i]:!1}function Xm(){return QA}var XA=g({},tt,{key:function(i){if(i.key){var l=YA[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=ga(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?KA[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xm,charCode:function(i){return i.type==="keypress"?ga(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ga(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),JA=$(XA),eC=g({},xt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vx=$(eC),tC=g({},tt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xm}),sC=$(tC),rC=g({},K,{propertyName:0,elapsedTime:0,pseudoElement:0}),nC=$(rC),iC=g({},xt,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),aC=$(iC),lC=g({},K,{newState:0,oldState:0}),oC=$(lC),cC=[9,13,27,32],Jm=Tr&&"CompositionEvent"in window,ou=null;Tr&&"documentMode"in document&&(ou=document.documentMode);var uC=Tr&&"TextEvent"in window&&!ou,Gx=Tr&&(!Jm||ou&&8<ou&&11>=ou),Zx=" ",Yx=!1;function Kx(i,l){switch(i){case"keyup":return cC.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wx(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var To=!1;function dC(i,l){switch(i){case"compositionend":return Wx(l);case"keypress":return l.which!==32?null:(Yx=!0,Zx);case"textInput":return i=l.data,i===Zx&&Yx?null:i;default:return null}}function hC(i,l){if(To)return i==="compositionend"||!Jm&&Kx(i,l)?(i=pa(),Ci=xr=Or=null,To=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Gx&&l.locale!=="ko"?null:l.data;default:return null}}var fC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qx(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!fC[i.type]:l==="textarea"}function Xx(i,l,c,d){ns?xn?xn.push(d):xn=[d]:ns=d,l=Yh(l,"onChange"),0<l.length&&(c=new pe("onChange","change",null,c,d),i.push({event:c,listeners:l}))}var cu=null,uu=null;function mC(i){Rw(i,0)}function ch(i){var l=ss(i);if(yl(l))return i}function Jx(i,l){if(i==="change")return l}var eb=!1;if(Tr){var ep;if(Tr){var tp="oninput"in document;if(!tp){var tb=document.createElement("div");tb.setAttribute("oninput","return;"),tp=typeof tb.oninput=="function"}ep=tp}else ep=!1;eb=ep&&(!document.documentMode||9<document.documentMode)}function sb(){cu&&(cu.detachEvent("onpropertychange",rb),uu=cu=null)}function rb(i){if(i.propertyName==="value"&&ch(uu)){var l=[];Xx(l,uu,i,ha(i)),fa(mC,l)}}function pC(i,l,c){i==="focusin"?(sb(),cu=l,uu=c,cu.attachEvent("onpropertychange",rb)):i==="focusout"&&sb()}function gC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ch(uu)}function yC(i,l){if(i==="click")return ch(l)}function xC(i,l){if(i==="input"||i==="change")return ch(l)}function bC(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var Rr=typeof Object.is=="function"?Object.is:bC;function du(i,l){if(Rr(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var c=Object.keys(i),d=Object.keys(l);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var p=c[d];if(!qe.call(l,p)||!Rr(i[p],l[p]))return!1}return!0}function nb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ib(i,l){var c=nb(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=l&&d>=l)return{node:c,offset:l-i};i=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=nb(c)}}function ab(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?ab(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function lb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var l=Ei(i.document);l instanceof i.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)i=l.contentWindow;else break;l=Ei(i.document)}return l}function sp(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}var vC=Tr&&"documentMode"in document&&11>=document.documentMode,Oo=null,rp=null,hu=null,np=!1;function ob(i,l,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;np||Oo==null||Oo!==Ei(d)||(d=Oo,"selectionStart"in d&&sp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),hu&&du(hu,d)||(hu=d,d=Yh(rp,"onSelect"),0<d.length&&(l=new pe("onSelect","select",null,l,c),i.push({event:l,listeners:d}),l.target=Oo)))}function _l(i,l){var c={};return c[i.toLowerCase()]=l.toLowerCase(),c["Webkit"+i]="webkit"+l,c["Moz"+i]="moz"+l,c}var Ro={animationend:_l("Animation","AnimationEnd"),animationiteration:_l("Animation","AnimationIteration"),animationstart:_l("Animation","AnimationStart"),transitionrun:_l("Transition","TransitionRun"),transitionstart:_l("Transition","TransitionStart"),transitioncancel:_l("Transition","TransitionCancel"),transitionend:_l("Transition","TransitionEnd")},ip={},cb={};Tr&&(cb=document.createElement("div").style,"AnimationEvent"in window||(delete Ro.animationend.animation,delete Ro.animationiteration.animation,delete Ro.animationstart.animation),"TransitionEvent"in window||delete Ro.transitionend.transition);function jl(i){if(ip[i])return ip[i];if(!Ro[i])return i;var l=Ro[i],c;for(c in l)if(l.hasOwnProperty(c)&&c in cb)return ip[i]=l[c];return i}var ub=jl("animationend"),db=jl("animationiteration"),hb=jl("animationstart"),wC=jl("transitionrun"),_C=jl("transitionstart"),jC=jl("transitioncancel"),fb=jl("transitionend"),mb=new Map,ap="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ap.push("scrollEnd");function wn(i,l){mb.set(i,l),pn(l,[i])}var pb=new WeakMap;function Xr(i,l){if(typeof i=="object"&&i!==null){var c=pb.get(i);return c!==void 0?c:(l={value:i,source:l,stack:So(l)},pb.set(i,l),l)}return{value:i,source:l,stack:So(l)}}var Jr=[],Mo=0,lp=0;function uh(){for(var i=Mo,l=lp=Mo=0;l<i;){var c=Jr[l];Jr[l++]=null;var d=Jr[l];Jr[l++]=null;var p=Jr[l];Jr[l++]=null;var y=Jr[l];if(Jr[l++]=null,d!==null&&p!==null){var T=d.pending;T===null?p.next=p:(p.next=T.next,T.next=p),d.pending=p}y!==0&&gb(c,p,y)}}function dh(i,l,c,d){Jr[Mo++]=i,Jr[Mo++]=l,Jr[Mo++]=c,Jr[Mo++]=d,lp|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function op(i,l,c,d){return dh(i,l,c,d),hh(i)}function Do(i,l){return dh(i,null,null,l),hh(i)}function gb(i,l,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var p=!1,y=i.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(p=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,p&&l!==null&&(p=31-pt(c),i=y.hiddenUpdates,d=i[p],d===null?i[p]=[l]:d.push(l),l.lane=c|536870912),y):null}function hh(i){if(50<Pu)throw Pu=0,mg=null,Error(r(185));for(var l=i.return;l!==null;)i=l,l=i.return;return i.tag===3?i.stateNode:null}var Lo={};function NC(i,l,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(i,l,c,d){return new NC(i,l,c,d)}function cp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ti(i,l){var c=i.alternate;return c===null?(c=Mr(i.tag,l,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=l,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,l=i.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function yb(i,l){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=l,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,l=c.dependencies,i.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i}function fh(i,l,c,d,p,y){var T=0;if(d=i,typeof i=="function")cp(i)&&(T=1);else if(typeof i=="string")T=Ek(i,c,ge.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case k:return i=Mr(31,c,l,p),i.elementType=k,i.lanes=y,i;case b:return Nl(c.children,p,y,l);case N:T=8,p|=24;break;case w:return i=Mr(12,c,l,p|2),i.elementType=w,i.lanes=y,i;case C:return i=Mr(13,c,l,p),i.elementType=C,i.lanes=y,i;case L:return i=Mr(19,c,l,p),i.elementType=L,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case E:case O:T=10;break e;case A:T=9;break e;case F:T=11;break e;case B:T=14;break e;case S:T=16,d=null;break e}T=29,c=Error(r(130,i===null?"null":typeof i,"")),d=null}return l=Mr(T,c,l,p),l.elementType=i,l.type=d,l.lanes=y,l}function Nl(i,l,c,d){return i=Mr(7,i,d,l),i.lanes=c,i}function up(i,l,c){return i=Mr(6,i,null,l),i.lanes=c,i}function dp(i,l,c){return l=Mr(4,i.children!==null?i.children:[],i.key,l),l.lanes=c,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}var qo=[],Po=0,mh=null,ph=0,en=[],tn=0,Sl=null,Oi=1,Ri="";function El(i,l){qo[Po++]=ph,qo[Po++]=mh,mh=i,ph=l}function xb(i,l,c){en[tn++]=Oi,en[tn++]=Ri,en[tn++]=Sl,Sl=i;var d=Oi;i=Ri;var p=32-pt(d)-1;d&=~(1<<p),c+=1;var y=32-pt(l)+p;if(30<y){var T=p-p%5;y=(d&(1<<T)-1).toString(32),d>>=T,p-=T,Oi=1<<32-pt(l)+p|c<<p|d,Ri=y+i}else Oi=1<<y|c<<p|d,Ri=i}function hp(i){i.return!==null&&(El(i,1),xb(i,1,0))}function fp(i){for(;i===mh;)mh=qo[--Po],qo[Po]=null,ph=qo[--Po],qo[Po]=null;for(;i===Sl;)Sl=en[--tn],en[tn]=null,Ri=en[--tn],en[tn]=null,Oi=en[--tn],en[tn]=null}var lr=null,is=null,St=!1,Al=null,ti=!1,mp=Error(r(519));function Cl(i){var l=Error(r(418,""));throw pu(Xr(l,i)),mp}function bb(i){var l=i.stateNode,c=i.type,d=i.memoizedProps;switch(l[xs]=i,l[Ls]=d,c){case"dialog":ft("cancel",l),ft("close",l);break;case"iframe":case"object":case"embed":ft("load",l);break;case"video":case"audio":for(c=0;c<$u.length;c++)ft($u[c],l);break;case"source":ft("error",l);break;case"img":case"image":case"link":ft("error",l),ft("load",l);break;case"details":ft("toggle",l);break;case"input":ft("invalid",l),Eo(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Kr(l);break;case"select":ft("invalid",l);break;case"textarea":ft("invalid",l),Xn(l,d.value,d.defaultValue,d.children),Kr(l)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||l.textContent===""+c||d.suppressHydrationWarning===!0||qw(l.textContent,c)?(d.popover!=null&&(ft("beforetoggle",l),ft("toggle",l)),d.onScroll!=null&&ft("scroll",l),d.onScrollEnd!=null&&ft("scrollend",l),d.onClick!=null&&(l.onclick=Kh),l=!0):l=!1,l||Cl(i)}function vb(i){for(lr=i.return;lr;)switch(lr.tag){case 5:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:lr=lr.return}}function fu(i){if(i!==lr)return!1;if(!St)return vb(i),St=!0,!1;var l=i.tag,c;if((c=l!==3&&l!==27)&&((c=l===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Tg(i.type,i.memoizedProps)),c=!c),c&&is&&Cl(i),vb(i),l===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8)if(c=i.data,c==="/$"){if(l===0){is=jn(i.nextSibling);break e}l--}else c!=="$"&&c!=="$!"&&c!=="$?"||l++;i=i.nextSibling}is=null}}else l===27?(l=is,Ma(i.type)?(i=Dg,Dg=null,is=i):is=l):is=lr?jn(i.stateNode.nextSibling):null;return!0}function mu(){is=lr=null,St=!1}function wb(){var i=Al;return i!==null&&(wr===null?wr=i:wr.push.apply(wr,i),Al=null),i}function pu(i){Al===null?Al=[i]:Al.push(i)}var pp=X(null),kl=null,Mi=null;function xa(i,l,c){ee(pp,l._currentValue),l._currentValue=c}function Di(i){i._currentValue=pp.current,le(pp)}function gp(i,l,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),i===c)break;i=i.return}}function yp(i,l,c,d){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var y=p.dependencies;if(y!==null){var T=p.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=p;for(var Y=0;Y<l.length;Y++)if(I.context===l[Y]){y.lanes|=c,I=y.alternate,I!==null&&(I.lanes|=c),gp(y.return,c,i),d||(T=null);break e}y=I.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(r(341));T.lanes|=c,y=T.alternate,y!==null&&(y.lanes|=c),gp(T,c,i),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===i){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function gu(i,l,c,d){i=null;for(var p=l,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var I=p.type;Rr(p.pendingProps.value,T.value)||(i!==null?i.push(I):i=[I])}}else if(p===Me.current){if(T=p.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(Vu):i=[Vu])}p=p.return}i!==null&&yp(l,i,c,d),l.flags|=262144}function gh(i){for(i=i.firstContext;i!==null;){if(!Rr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Tl(i){kl=i,Mi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function tr(i){return _b(kl,i)}function yh(i,l){return kl===null&&Tl(i),_b(i,l)}function _b(i,l){var c=l._currentValue;if(l={context:l,memoizedValue:c,next:null},Mi===null){if(i===null)throw Error(r(308));Mi=l,i.dependencies={lanes:0,firstContext:l},i.flags|=524288}else Mi=Mi.next=l;return c}var SC=typeof AbortController<"u"?AbortController:function(){var i=[],l=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){l.aborted=!0,i.forEach(function(c){return c()})}},EC=t.unstable_scheduleCallback,AC=t.unstable_NormalPriority,Cs={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xp(){return{controller:new SC,data:new Map,refCount:0}}function yu(i){i.refCount--,i.refCount===0&&EC(AC,function(){i.controller.abort()})}var xu=null,bp=0,Io=0,$o=null;function CC(i,l){if(xu===null){var c=xu=[];bp=0,Io=wg(),$o={status:"pending",value:void 0,then:function(d){c.push(d)}}}return bp++,l.then(jb,jb),l}function jb(){if(--bp===0&&xu!==null){$o!==null&&($o.status="fulfilled");var i=xu;xu=null,Io=0,$o=null;for(var l=0;l<i.length;l++)(0,i[l])()}}function kC(i,l){var c=[],d={status:"pending",value:null,reason:null,then:function(p){c.push(p)}};return i.then(function(){d.status="fulfilled",d.value=l;for(var p=0;p<c.length;p++)(0,c[p])(l)},function(p){for(d.status="rejected",d.reason=p,p=0;p<c.length;p++)(0,c[p])(void 0)}),d}var Nb=q.S;q.S=function(i,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&CC(i,l),Nb!==null&&Nb(i,l)};var Ol=X(null);function vp(){var i=Ol.current;return i!==null?i:$t.pooledCache}function xh(i,l){l===null?ee(Ol,Ol.current):ee(Ol,l.pool)}function Sb(){var i=vp();return i===null?null:{parent:Cs._currentValue,pool:i}}var bu=Error(r(460)),Eb=Error(r(474)),bh=Error(r(542)),wp={then:function(){}};function Ab(i){return i=i.status,i==="fulfilled"||i==="rejected"}function vh(){}function Cb(i,l,c){switch(c=i[c],c===void 0?i.push(l):c!==l&&(l.then(vh,vh),l=c),l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,Tb(i),i;default:if(typeof l.status=="string")l.then(vh,vh);else{if(i=$t,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=l,i.status="pending",i.then(function(d){if(l.status==="pending"){var p=l;p.status="fulfilled",p.value=d}},function(d){if(l.status==="pending"){var p=l;p.status="rejected",p.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,Tb(i),i}throw vu=l,bu}}var vu=null;function kb(){if(vu===null)throw Error(r(459));var i=vu;return vu=null,i}function Tb(i){if(i===bu||i===bh)throw Error(r(483))}var ba=!1;function _p(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jp(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function va(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function wa(i,l,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Ct&2)!==0){var p=d.pending;return p===null?l.next=l:(l.next=p.next,p.next=l),d.pending=l,l=hh(i),gb(i,null,c),l}return dh(i,d,l,c),hh(i)}function wu(i,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194048)!==0)){var d=l.lanes;d&=i.pendingLanes,c|=d,l.lanes=c,oa(i,c)}}function Np(i,l){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var p=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?p=y=T:y=y.next=T,c=c.next}while(c!==null);y===null?p=y=l:y=y.next=l}else p=y=l;c={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=l:i.next=l,c.lastBaseUpdate=l}var Sp=!1;function _u(){if(Sp){var i=$o;if(i!==null)throw i}}function ju(i,l,c,d){Sp=!1;var p=i.updateQueue;ba=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,I=p.shared.pending;if(I!==null){p.shared.pending=null;var Y=I,ie=Y.next;Y.next=null,T===null?y=ie:T.next=ie,T=Y;var ye=i.alternate;ye!==null&&(ye=ye.updateQueue,I=ye.lastBaseUpdate,I!==T&&(I===null?ye.firstBaseUpdate=ie:I.next=ie,ye.lastBaseUpdate=Y))}if(y!==null){var _e=p.baseState;T=0,ye=ie=Y=null,I=y;do{var oe=I.lane&-536870913,ce=oe!==I.lane;if(ce?(wt&oe)===oe:(d&oe)===oe){oe!==0&&oe===Io&&(Sp=!0),ye!==null&&(ye=ye.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var st=i,Xe=I;oe=l;var Dt=c;switch(Xe.tag){case 1:if(st=Xe.payload,typeof st=="function"){_e=st.call(Dt,_e,oe);break e}_e=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=Xe.payload,oe=typeof st=="function"?st.call(Dt,_e,oe):st,oe==null)break e;_e=g({},_e,oe);break e;case 2:ba=!0}}oe=I.callback,oe!==null&&(i.flags|=64,ce&&(i.flags|=8192),ce=p.callbacks,ce===null?p.callbacks=[oe]:ce.push(oe))}else ce={lane:oe,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ye===null?(ie=ye=ce,Y=_e):ye=ye.next=ce,T|=oe;if(I=I.next,I===null){if(I=p.shared.pending,I===null)break;ce=I,I=ce.next,ce.next=null,p.lastBaseUpdate=ce,p.shared.pending=null}}while(!0);ye===null&&(Y=_e),p.baseState=Y,p.firstBaseUpdate=ie,p.lastBaseUpdate=ye,y===null&&(p.shared.lanes=0),ka|=T,i.lanes=T,i.memoizedState=_e}}function Ob(i,l){if(typeof i!="function")throw Error(r(191,i));i.call(l)}function Rb(i,l){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Ob(c[i],l)}var Uo=X(null),wh=X(0);function Mb(i,l){i=Bi,ee(wh,i),ee(Uo,l),Bi=i|l.baseLanes}function Ep(){ee(wh,Bi),ee(Uo,Uo.current)}function Ap(){Bi=wh.current,le(Uo),le(wh)}var _a=0,lt=null,Rt=null,bs=null,_h=!1,Bo=!1,Rl=!1,jh=0,Nu=0,zo=null,TC=0;function us(){throw Error(r(321))}function Cp(i,l){if(l===null)return!1;for(var c=0;c<l.length&&c<i.length;c++)if(!Rr(i[c],l[c]))return!1;return!0}function kp(i,l,c,d,p,y){return _a=y,lt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,q.H=i===null||i.memoizedState===null?gv:yv,Rl=!1,y=c(d,p),Rl=!1,Bo&&(y=Lb(l,c,d,p)),Db(i),y}function Db(i){q.H=kh;var l=Rt!==null&&Rt.next!==null;if(_a=0,bs=Rt=lt=null,_h=!1,Nu=0,zo=null,l)throw Error(r(300));i===null||Is||(i=i.dependencies,i!==null&&gh(i)&&(Is=!0))}function Lb(i,l,c,d){lt=i;var p=0;do{if(Bo&&(zo=null),Nu=0,Bo=!1,25<=p)throw Error(r(301));if(p+=1,bs=Rt=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}q.H=PC,y=l(c,d)}while(Bo);return y}function OC(){var i=q.H,l=i.useState()[0];return l=typeof l.then=="function"?Su(l):l,i=i.useState()[0],(Rt!==null?Rt.memoizedState:null)!==i&&(lt.flags|=1024),l}function Tp(){var i=jh!==0;return jh=0,i}function Op(i,l,c){l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~c}function Rp(i){if(_h){for(i=i.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}_h=!1}_a=0,bs=Rt=lt=null,Bo=!1,Nu=jh=0,zo=null}function br(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bs===null?lt.memoizedState=bs=i:bs=bs.next=i,bs}function vs(){if(Rt===null){var i=lt.alternate;i=i!==null?i.memoizedState:null}else i=Rt.next;var l=bs===null?lt.memoizedState:bs.next;if(l!==null)bs=l,Rt=i;else{if(i===null)throw lt.alternate===null?Error(r(467)):Error(r(310));Rt=i,i={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},bs===null?lt.memoizedState=bs=i:bs=bs.next=i}return bs}function Mp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Su(i){var l=Nu;return Nu+=1,zo===null&&(zo=[]),i=Cb(zo,i,l),l=lt,(bs===null?l.memoizedState:bs.next)===null&&(l=l.alternate,q.H=l===null||l.memoizedState===null?gv:yv),i}function Nh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Su(i);if(i.$$typeof===O)return tr(i)}throw Error(r(438,String(i)))}function Dp(i){var l=null,c=lt.updateQueue;if(c!==null&&(l=c.memoCache),l==null){var d=lt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(p){return p.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),c===null&&(c=Mp(),lt.updateQueue=c),c.memoCache=l,c=l.data[l.index],c===void 0)for(c=l.data[l.index]=Array(i),d=0;d<i;d++)c[d]=z;return l.index++,c}function Li(i,l){return typeof l=="function"?l(i):l}function Sh(i){var l=vs();return Lp(l,Rt,i)}function Lp(i,l,c){var d=i.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var p=i.baseQueue,y=d.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}l.baseQueue=p=y,d.pending=null}if(y=i.baseState,p===null)i.memoizedState=y;else{l=p.next;var I=T=null,Y=null,ie=l,ye=!1;do{var _e=ie.lane&-536870913;if(_e!==ie.lane?(wt&_e)===_e:(_a&_e)===_e){var oe=ie.revertLane;if(oe===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),_e===Io&&(ye=!0);else if((_a&oe)===oe){ie=ie.next,oe===Io&&(ye=!0);continue}else _e={lane:0,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},Y===null?(I=Y=_e,T=y):Y=Y.next=_e,lt.lanes|=oe,ka|=oe;_e=ie.action,Rl&&c(y,_e),y=ie.hasEagerState?ie.eagerState:c(y,_e)}else oe={lane:_e,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},Y===null?(I=Y=oe,T=y):Y=Y.next=oe,lt.lanes|=_e,ka|=_e;ie=ie.next}while(ie!==null&&ie!==l);if(Y===null?T=y:Y.next=I,!Rr(y,i.memoizedState)&&(Is=!0,ye&&(c=$o,c!==null)))throw c;i.memoizedState=y,i.baseState=T,i.baseQueue=Y,d.lastRenderedState=y}return p===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function qp(i){var l=vs(),c=l.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var d=c.dispatch,p=c.pending,y=l.memoizedState;if(p!==null){c.pending=null;var T=p=p.next;do y=i(y,T.action),T=T.next;while(T!==p);Rr(y,l.memoizedState)||(Is=!0),l.memoizedState=y,l.baseQueue===null&&(l.baseState=y),c.lastRenderedState=y}return[y,d]}function qb(i,l,c){var d=lt,p=vs(),y=St;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=l();var T=!Rr((Rt||p).memoizedState,c);T&&(p.memoizedState=c,Is=!0),p=p.queue;var I=$b.bind(null,d,p,i);if(Eu(2048,8,I,[i]),p.getSnapshot!==l||T||bs!==null&&bs.memoizedState.tag&1){if(d.flags|=2048,Fo(9,Eh(),Ib.bind(null,d,p,c,l),null),$t===null)throw Error(r(349));y||(_a&124)!==0||Pb(d,l,c)}return c}function Pb(i,l,c){i.flags|=16384,i={getSnapshot:l,value:c},l=lt.updateQueue,l===null?(l=Mp(),lt.updateQueue=l,l.stores=[i]):(c=l.stores,c===null?l.stores=[i]:c.push(i))}function Ib(i,l,c,d){l.value=c,l.getSnapshot=d,Ub(l)&&Bb(i)}function $b(i,l,c){return c(function(){Ub(l)&&Bb(i)})}function Ub(i){var l=i.getSnapshot;i=i.value;try{var c=l();return!Rr(i,c)}catch{return!0}}function Bb(i){var l=Do(i,2);l!==null&&Ir(l,i,2)}function Pp(i){var l=br();if(typeof i=="function"){var c=i;if(i=c(),Rl){We(!0);try{c()}finally{We(!1)}}}return l.memoizedState=l.baseState=i,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:i},l}function zb(i,l,c,d){return i.baseState=c,Lp(i,Rt,typeof d=="function"?d:Li)}function RC(i,l,c,d,p){if(Ch(i))throw Error(r(485));if(i=l.action,i!==null){var y={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};q.T!==null?c(!0):y.isTransition=!1,d(y),c=l.pending,c===null?(y.next=l.pending=y,Fb(l,y)):(y.next=c.next,l.pending=c.next=y)}}function Fb(i,l){var c=l.action,d=l.payload,p=i.state;if(l.isTransition){var y=q.T,T={};q.T=T;try{var I=c(p,d),Y=q.S;Y!==null&&Y(T,I),Hb(i,l,I)}catch(ie){Ip(i,l,ie)}finally{q.T=y}}else try{y=c(p,d),Hb(i,l,y)}catch(ie){Ip(i,l,ie)}}function Hb(i,l,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Vb(i,l,d)},function(d){return Ip(i,l,d)}):Vb(i,l,c)}function Vb(i,l,c){l.status="fulfilled",l.value=c,Gb(l),i.state=c,l=i.pending,l!==null&&(c=l.next,c===l?i.pending=null:(c=c.next,l.next=c,Fb(i,c)))}function Ip(i,l,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=c,Gb(l),l=l.next;while(l!==d)}i.action=null}function Gb(i){i=i.listeners;for(var l=0;l<i.length;l++)(0,i[l])()}function Zb(i,l){return l}function Yb(i,l){if(St){var c=$t.formState;if(c!==null){e:{var d=lt;if(St){if(is){t:{for(var p=is,y=ti;p.nodeType!==8;){if(!y){p=null;break t}if(p=jn(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){is=jn(p.nextSibling),d=p.data==="F!";break e}}Cl(d)}d=!1}d&&(l=c[0])}}return c=br(),c.memoizedState=c.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zb,lastRenderedState:l},c.queue=d,c=fv.bind(null,lt,d),d.dispatch=c,d=Pp(!1),y=Fp.bind(null,lt,!1,d.queue),d=br(),p={state:l,dispatch:null,action:i,pending:null},d.queue=p,c=RC.bind(null,lt,p,y,c),p.dispatch=c,d.memoizedState=i,[l,c,!1]}function Kb(i){var l=vs();return Wb(l,Rt,i)}function Wb(i,l,c){if(l=Lp(i,l,Zb)[0],i=Sh(Li)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=Su(l)}catch(T){throw T===bu?bh:T}else d=l;l=vs();var p=l.queue,y=p.dispatch;return c!==l.memoizedState&&(lt.flags|=2048,Fo(9,Eh(),MC.bind(null,p,c),null)),[d,y,i]}function MC(i,l){i.action=l}function Qb(i){var l=vs(),c=Rt;if(c!==null)return Wb(l,c,i);vs(),l=l.memoizedState,c=vs();var d=c.queue.dispatch;return c.memoizedState=i,[l,d,!1]}function Fo(i,l,c,d){return i={tag:i,create:c,deps:d,inst:l,next:null},l=lt.updateQueue,l===null&&(l=Mp(),lt.updateQueue=l),c=l.lastEffect,c===null?l.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,l.lastEffect=i),i}function Eh(){return{destroy:void 0,resource:void 0}}function Xb(){return vs().memoizedState}function Ah(i,l,c,d){var p=br();d=d===void 0?null:d,lt.flags|=i,p.memoizedState=Fo(1|l,Eh(),c,d)}function Eu(i,l,c,d){var p=vs();d=d===void 0?null:d;var y=p.memoizedState.inst;Rt!==null&&d!==null&&Cp(d,Rt.memoizedState.deps)?p.memoizedState=Fo(l,y,c,d):(lt.flags|=i,p.memoizedState=Fo(1|l,y,c,d))}function Jb(i,l){Ah(8390656,8,i,l)}function ev(i,l){Eu(2048,8,i,l)}function tv(i,l){return Eu(4,2,i,l)}function sv(i,l){return Eu(4,4,i,l)}function rv(i,l){if(typeof l=="function"){i=i();var c=l(i);return function(){typeof c=="function"?c():l(null)}}if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function nv(i,l,c){c=c!=null?c.concat([i]):null,Eu(4,4,rv.bind(null,l,i),c)}function $p(){}function iv(i,l){var c=vs();l=l===void 0?null:l;var d=c.memoizedState;return l!==null&&Cp(l,d[1])?d[0]:(c.memoizedState=[i,l],i)}function av(i,l){var c=vs();l=l===void 0?null:l;var d=c.memoizedState;if(l!==null&&Cp(l,d[1]))return d[0];if(d=i(),Rl){We(!0);try{i()}finally{We(!1)}}return c.memoizedState=[d,l],d}function Up(i,l,c){return c===void 0||(_a&1073741824)!==0?i.memoizedState=l:(i.memoizedState=c,i=cw(),lt.lanes|=i,ka|=i,c)}function lv(i,l,c,d){return Rr(c,l)?c:Uo.current!==null?(i=Up(i,c,d),Rr(i,l)||(Is=!0),i):(_a&42)===0?(Is=!0,i.memoizedState=c):(i=cw(),lt.lanes|=i,ka|=i,l)}function ov(i,l,c,d,p){var y=Z.p;Z.p=y!==0&&8>y?y:8;var T=q.T,I={};q.T=I,Fp(i,!1,l,c);try{var Y=p(),ie=q.S;if(ie!==null&&ie(I,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ye=kC(Y,d);Au(i,l,ye,Pr(i))}else Au(i,l,d,Pr(i))}catch(_e){Au(i,l,{then:function(){},status:"rejected",reason:_e},Pr())}finally{Z.p=y,q.T=T}}function DC(){}function Bp(i,l,c,d){if(i.tag!==5)throw Error(r(476));var p=cv(i).queue;ov(i,p,l,Q,c===null?DC:function(){return uv(i),c(d)})}function cv(i){var l=i.memoizedState;if(l!==null)return l;l={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:Q},next:null};var c={};return l.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:c},next:null},i.memoizedState=l,i=i.alternate,i!==null&&(i.memoizedState=l),l}function uv(i){var l=cv(i).next.queue;Au(i,l,{},Pr())}function zp(){return tr(Vu)}function dv(){return vs().memoizedState}function hv(){return vs().memoizedState}function LC(i){for(var l=i.return;l!==null;){switch(l.tag){case 24:case 3:var c=Pr();i=va(c);var d=wa(l,i,c);d!==null&&(Ir(d,l,c),wu(d,l,c)),l={cache:xp()},i.payload=l;return}l=l.return}}function qC(i,l,c){var d=Pr();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Ch(i)?mv(l,c):(c=op(i,l,c,d),c!==null&&(Ir(c,i,d),pv(c,l,d)))}function fv(i,l,c){var d=Pr();Au(i,l,c,d)}function Au(i,l,c,d){var p={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ch(i))mv(l,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=l.lastRenderedReducer,y!==null))try{var T=l.lastRenderedState,I=y(T,c);if(p.hasEagerState=!0,p.eagerState=I,Rr(I,T))return dh(i,l,p,0),$t===null&&uh(),!1}catch{}finally{}if(c=op(i,l,p,d),c!==null)return Ir(c,i,d),pv(c,l,d),!0}return!1}function Fp(i,l,c,d){if(d={lane:2,revertLane:wg(),action:d,hasEagerState:!1,eagerState:null,next:null},Ch(i)){if(l)throw Error(r(479))}else l=op(i,c,d,2),l!==null&&Ir(l,i,2)}function Ch(i){var l=i.alternate;return i===lt||l!==null&&l===lt}function mv(i,l){Bo=_h=!0;var c=i.pending;c===null?l.next=l:(l.next=c.next,c.next=l),i.pending=l}function pv(i,l,c){if((c&4194048)!==0){var d=l.lanes;d&=i.pendingLanes,c|=d,l.lanes=c,oa(i,c)}}var kh={readContext:tr,use:Nh,useCallback:us,useContext:us,useEffect:us,useImperativeHandle:us,useLayoutEffect:us,useInsertionEffect:us,useMemo:us,useReducer:us,useRef:us,useState:us,useDebugValue:us,useDeferredValue:us,useTransition:us,useSyncExternalStore:us,useId:us,useHostTransitionStatus:us,useFormState:us,useActionState:us,useOptimistic:us,useMemoCache:us,useCacheRefresh:us},gv={readContext:tr,use:Nh,useCallback:function(i,l){return br().memoizedState=[i,l===void 0?null:l],i},useContext:tr,useEffect:Jb,useImperativeHandle:function(i,l,c){c=c!=null?c.concat([i]):null,Ah(4194308,4,rv.bind(null,l,i),c)},useLayoutEffect:function(i,l){return Ah(4194308,4,i,l)},useInsertionEffect:function(i,l){Ah(4,2,i,l)},useMemo:function(i,l){var c=br();l=l===void 0?null:l;var d=i();if(Rl){We(!0);try{i()}finally{We(!1)}}return c.memoizedState=[d,l],d},useReducer:function(i,l,c){var d=br();if(c!==void 0){var p=c(l);if(Rl){We(!0);try{c(l)}finally{We(!1)}}}else p=l;return d.memoizedState=d.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},d.queue=i,i=i.dispatch=qC.bind(null,lt,i),[d.memoizedState,i]},useRef:function(i){var l=br();return i={current:i},l.memoizedState=i},useState:function(i){i=Pp(i);var l=i.queue,c=fv.bind(null,lt,l);return l.dispatch=c,[i.memoizedState,c]},useDebugValue:$p,useDeferredValue:function(i,l){var c=br();return Up(c,i,l)},useTransition:function(){var i=Pp(!1);return i=ov.bind(null,lt,i.queue,!0,!1),br().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,l,c){var d=lt,p=br();if(St){if(c===void 0)throw Error(r(407));c=c()}else{if(c=l(),$t===null)throw Error(r(349));(wt&124)!==0||Pb(d,l,c)}p.memoizedState=c;var y={value:c,getSnapshot:l};return p.queue=y,Jb($b.bind(null,d,y,i),[i]),d.flags|=2048,Fo(9,Eh(),Ib.bind(null,d,y,c,l),null),c},useId:function(){var i=br(),l=$t.identifierPrefix;if(St){var c=Ri,d=Oi;c=(d&~(1<<32-pt(d)-1)).toString(32)+c,l=""+l+"R"+c,c=jh++,0<c&&(l+="H"+c.toString(32)),l+=""}else c=TC++,l=""+l+"r"+c.toString(32)+"";return i.memoizedState=l},useHostTransitionStatus:zp,useFormState:Yb,useActionState:Yb,useOptimistic:function(i){var l=br();l.memoizedState=l.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=c,l=Fp.bind(null,lt,!0,c),c.dispatch=l,[i,l]},useMemoCache:Dp,useCacheRefresh:function(){return br().memoizedState=LC.bind(null,lt)}},yv={readContext:tr,use:Nh,useCallback:iv,useContext:tr,useEffect:ev,useImperativeHandle:nv,useInsertionEffect:tv,useLayoutEffect:sv,useMemo:av,useReducer:Sh,useRef:Xb,useState:function(){return Sh(Li)},useDebugValue:$p,useDeferredValue:function(i,l){var c=vs();return lv(c,Rt.memoizedState,i,l)},useTransition:function(){var i=Sh(Li)[0],l=vs().memoizedState;return[typeof i=="boolean"?i:Su(i),l]},useSyncExternalStore:qb,useId:dv,useHostTransitionStatus:zp,useFormState:Kb,useActionState:Kb,useOptimistic:function(i,l){var c=vs();return zb(c,Rt,i,l)},useMemoCache:Dp,useCacheRefresh:hv},PC={readContext:tr,use:Nh,useCallback:iv,useContext:tr,useEffect:ev,useImperativeHandle:nv,useInsertionEffect:tv,useLayoutEffect:sv,useMemo:av,useReducer:qp,useRef:Xb,useState:function(){return qp(Li)},useDebugValue:$p,useDeferredValue:function(i,l){var c=vs();return Rt===null?Up(c,i,l):lv(c,Rt.memoizedState,i,l)},useTransition:function(){var i=qp(Li)[0],l=vs().memoizedState;return[typeof i=="boolean"?i:Su(i),l]},useSyncExternalStore:qb,useId:dv,useHostTransitionStatus:zp,useFormState:Qb,useActionState:Qb,useOptimistic:function(i,l){var c=vs();return Rt!==null?zb(c,Rt,i,l):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Dp,useCacheRefresh:hv},Ho=null,Cu=0;function Th(i){var l=Cu;return Cu+=1,Ho===null&&(Ho=[]),Cb(Ho,i,l)}function ku(i,l){l=l.props.ref,i.ref=l!==void 0?l:null}function Oh(i,l){throw l.$$typeof===x?Error(r(525)):(i=Object.prototype.toString.call(l),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i)))}function xv(i){var l=i._init;return l(i._payload)}function bv(i){function l(te,W){if(i){var ne=te.deletions;ne===null?(te.deletions=[W],te.flags|=16):ne.push(W)}}function c(te,W){if(!i)return null;for(;W!==null;)l(te,W),W=W.sibling;return null}function d(te){for(var W=new Map;te!==null;)te.key!==null?W.set(te.key,te):W.set(te.index,te),te=te.sibling;return W}function p(te,W){return te=Ti(te,W),te.index=0,te.sibling=null,te}function y(te,W,ne){return te.index=ne,i?(ne=te.alternate,ne!==null?(ne=ne.index,ne<W?(te.flags|=67108866,W):ne):(te.flags|=67108866,W)):(te.flags|=1048576,W)}function T(te){return i&&te.alternate===null&&(te.flags|=67108866),te}function I(te,W,ne,ve){return W===null||W.tag!==6?(W=up(ne,te.mode,ve),W.return=te,W):(W=p(W,ne),W.return=te,W)}function Y(te,W,ne,ve){var Ie=ne.type;return Ie===b?ye(te,W,ne.props.children,ve,ne.key):W!==null&&(W.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===S&&xv(Ie)===W.type)?(W=p(W,ne.props),ku(W,ne),W.return=te,W):(W=fh(ne.type,ne.key,ne.props,null,te.mode,ve),ku(W,ne),W.return=te,W)}function ie(te,W,ne,ve){return W===null||W.tag!==4||W.stateNode.containerInfo!==ne.containerInfo||W.stateNode.implementation!==ne.implementation?(W=dp(ne,te.mode,ve),W.return=te,W):(W=p(W,ne.children||[]),W.return=te,W)}function ye(te,W,ne,ve,Ie){return W===null||W.tag!==7?(W=Nl(ne,te.mode,ve,Ie),W.return=te,W):(W=p(W,ne),W.return=te,W)}function _e(te,W,ne){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=up(""+W,te.mode,ne),W.return=te,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return ne=fh(W.type,W.key,W.props,null,te.mode,ne),ku(ne,W),ne.return=te,ne;case _:return W=dp(W,te.mode,ne),W.return=te,W;case S:var ve=W._init;return W=ve(W._payload),_e(te,W,ne)}if(J(W)||D(W))return W=Nl(W,te.mode,ne,null),W.return=te,W;if(typeof W.then=="function")return _e(te,Th(W),ne);if(W.$$typeof===O)return _e(te,yh(te,W),ne);Oh(te,W)}return null}function oe(te,W,ne,ve){var Ie=W!==null?W.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ie!==null?null:I(te,W,""+ne,ve);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case v:return ne.key===Ie?Y(te,W,ne,ve):null;case _:return ne.key===Ie?ie(te,W,ne,ve):null;case S:return Ie=ne._init,ne=Ie(ne._payload),oe(te,W,ne,ve)}if(J(ne)||D(ne))return Ie!==null?null:ye(te,W,ne,ve,null);if(typeof ne.then=="function")return oe(te,W,Th(ne),ve);if(ne.$$typeof===O)return oe(te,W,yh(te,ne),ve);Oh(te,ne)}return null}function ce(te,W,ne,ve,Ie){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return te=te.get(ne)||null,I(W,te,""+ve,Ie);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case v:return te=te.get(ve.key===null?ne:ve.key)||null,Y(W,te,ve,Ie);case _:return te=te.get(ve.key===null?ne:ve.key)||null,ie(W,te,ve,Ie);case S:var ct=ve._init;return ve=ct(ve._payload),ce(te,W,ne,ve,Ie)}if(J(ve)||D(ve))return te=te.get(ne)||null,ye(W,te,ve,Ie,null);if(typeof ve.then=="function")return ce(te,W,ne,Th(ve),Ie);if(ve.$$typeof===O)return ce(te,W,ne,yh(W,ve),Ie);Oh(W,ve)}return null}function st(te,W,ne,ve){for(var Ie=null,ct=null,Ge=W,et=W=0,Us=null;Ge!==null&&et<ne.length;et++){Ge.index>et?(Us=Ge,Ge=null):Us=Ge.sibling;var _t=oe(te,Ge,ne[et],ve);if(_t===null){Ge===null&&(Ge=Us);break}i&&Ge&&_t.alternate===null&&l(te,Ge),W=y(_t,W,et),ct===null?Ie=_t:ct.sibling=_t,ct=_t,Ge=Us}if(et===ne.length)return c(te,Ge),St&&El(te,et),Ie;if(Ge===null){for(;et<ne.length;et++)Ge=_e(te,ne[et],ve),Ge!==null&&(W=y(Ge,W,et),ct===null?Ie=Ge:ct.sibling=Ge,ct=Ge);return St&&El(te,et),Ie}for(Ge=d(Ge);et<ne.length;et++)Us=ce(Ge,te,et,ne[et],ve),Us!==null&&(i&&Us.alternate!==null&&Ge.delete(Us.key===null?et:Us.key),W=y(Us,W,et),ct===null?Ie=Us:ct.sibling=Us,ct=Us);return i&&Ge.forEach(function(Ia){return l(te,Ia)}),St&&El(te,et),Ie}function Xe(te,W,ne,ve){if(ne==null)throw Error(r(151));for(var Ie=null,ct=null,Ge=W,et=W=0,Us=null,_t=ne.next();Ge!==null&&!_t.done;et++,_t=ne.next()){Ge.index>et?(Us=Ge,Ge=null):Us=Ge.sibling;var Ia=oe(te,Ge,_t.value,ve);if(Ia===null){Ge===null&&(Ge=Us);break}i&&Ge&&Ia.alternate===null&&l(te,Ge),W=y(Ia,W,et),ct===null?Ie=Ia:ct.sibling=Ia,ct=Ia,Ge=Us}if(_t.done)return c(te,Ge),St&&El(te,et),Ie;if(Ge===null){for(;!_t.done;et++,_t=ne.next())_t=_e(te,_t.value,ve),_t!==null&&(W=y(_t,W,et),ct===null?Ie=_t:ct.sibling=_t,ct=_t);return St&&El(te,et),Ie}for(Ge=d(Ge);!_t.done;et++,_t=ne.next())_t=ce(Ge,te,et,_t.value,ve),_t!==null&&(i&&_t.alternate!==null&&Ge.delete(_t.key===null?et:_t.key),W=y(_t,W,et),ct===null?Ie=_t:ct.sibling=_t,ct=_t);return i&&Ge.forEach(function(Ik){return l(te,Ik)}),St&&El(te,et),Ie}function Dt(te,W,ne,ve){if(typeof ne=="object"&&ne!==null&&ne.type===b&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case v:e:{for(var Ie=ne.key;W!==null;){if(W.key===Ie){if(Ie=ne.type,Ie===b){if(W.tag===7){c(te,W.sibling),ve=p(W,ne.props.children),ve.return=te,te=ve;break e}}else if(W.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===S&&xv(Ie)===W.type){c(te,W.sibling),ve=p(W,ne.props),ku(ve,ne),ve.return=te,te=ve;break e}c(te,W);break}else l(te,W);W=W.sibling}ne.type===b?(ve=Nl(ne.props.children,te.mode,ve,ne.key),ve.return=te,te=ve):(ve=fh(ne.type,ne.key,ne.props,null,te.mode,ve),ku(ve,ne),ve.return=te,te=ve)}return T(te);case _:e:{for(Ie=ne.key;W!==null;){if(W.key===Ie)if(W.tag===4&&W.stateNode.containerInfo===ne.containerInfo&&W.stateNode.implementation===ne.implementation){c(te,W.sibling),ve=p(W,ne.children||[]),ve.return=te,te=ve;break e}else{c(te,W);break}else l(te,W);W=W.sibling}ve=dp(ne,te.mode,ve),ve.return=te,te=ve}return T(te);case S:return Ie=ne._init,ne=Ie(ne._payload),Dt(te,W,ne,ve)}if(J(ne))return st(te,W,ne,ve);if(D(ne)){if(Ie=D(ne),typeof Ie!="function")throw Error(r(150));return ne=Ie.call(ne),Xe(te,W,ne,ve)}if(typeof ne.then=="function")return Dt(te,W,Th(ne),ve);if(ne.$$typeof===O)return Dt(te,W,yh(te,ne),ve);Oh(te,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,W!==null&&W.tag===6?(c(te,W.sibling),ve=p(W,ne),ve.return=te,te=ve):(c(te,W),ve=up(ne,te.mode,ve),ve.return=te,te=ve),T(te)):c(te,W)}return function(te,W,ne,ve){try{Cu=0;var Ie=Dt(te,W,ne,ve);return Ho=null,Ie}catch(Ge){if(Ge===bu||Ge===bh)throw Ge;var ct=Mr(29,Ge,null,te.mode);return ct.lanes=ve,ct.return=te,ct}finally{}}}var Vo=bv(!0),vv=bv(!1),sn=X(null),si=null;function ja(i){var l=i.alternate;ee(ks,ks.current&1),ee(sn,i),si===null&&(l===null||Uo.current!==null||l.memoizedState!==null)&&(si=i)}function wv(i){if(i.tag===22){if(ee(ks,ks.current),ee(sn,i),si===null){var l=i.alternate;l!==null&&l.memoizedState!==null&&(si=i)}}else Na()}function Na(){ee(ks,ks.current),ee(sn,sn.current)}function qi(i){le(sn),si===i&&(si=null),le(ks)}var ks=X(0);function Rh(i){for(var l=i;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Mg(c)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Hp(i,l,c,d){l=i.memoizedState,c=c(d,l),c=c==null?l:g({},l,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Vp={enqueueSetState:function(i,l,c){i=i._reactInternals;var d=Pr(),p=va(d);p.payload=l,c!=null&&(p.callback=c),l=wa(i,p,d),l!==null&&(Ir(l,i,d),wu(l,i,d))},enqueueReplaceState:function(i,l,c){i=i._reactInternals;var d=Pr(),p=va(d);p.tag=1,p.payload=l,c!=null&&(p.callback=c),l=wa(i,p,d),l!==null&&(Ir(l,i,d),wu(l,i,d))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var c=Pr(),d=va(c);d.tag=2,l!=null&&(d.callback=l),l=wa(i,d,c),l!==null&&(Ir(l,i,c),wu(l,i,c))}};function _v(i,l,c,d,p,y,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,y,T):l.prototype&&l.prototype.isPureReactComponent?!du(c,d)||!du(p,y):!0}function jv(i,l,c,d){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,d),l.state!==i&&Vp.enqueueReplaceState(l,l.state,null)}function Ml(i,l){var c=l;if("ref"in l){c={};for(var d in l)d!=="ref"&&(c[d]=l[d])}if(i=i.defaultProps){c===l&&(c=g({},c));for(var p in i)c[p]===void 0&&(c[p]=i[p])}return c}var Mh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Nv(i){Mh(i)}function Sv(i){console.error(i)}function Ev(i){Mh(i)}function Dh(i,l){try{var c=i.onUncaughtError;c(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function Av(i,l,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Gp(i,l,c){return c=va(c),c.tag=3,c.payload={element:null},c.callback=function(){Dh(i,l)},c}function Cv(i){return i=va(i),i.tag=3,i}function kv(i,l,c,d){var p=c.type.getDerivedStateFromError;if(typeof p=="function"){var y=d.value;i.payload=function(){return p(y)},i.callback=function(){Av(l,c,d)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){Av(l,c,d),typeof p!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})})}function IC(i,l,c,d,p){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=c.alternate,l!==null&&gu(l,c,p,!0),c=sn.current,c!==null){switch(c.tag){case 13:return si===null?gg():c.alternate===null&&as===0&&(as=3),c.flags&=-257,c.flags|=65536,c.lanes=p,d===wp?c.flags|=16384:(l=c.updateQueue,l===null?c.updateQueue=new Set([d]):l.add(d),xg(i,d,p)),!1;case 22:return c.flags|=65536,d===wp?c.flags|=16384:(l=c.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=l):(c=l.retryQueue,c===null?l.retryQueue=new Set([d]):c.add(d)),xg(i,d,p)),!1}throw Error(r(435,c.tag))}return xg(i,d,p),gg(),!1}if(St)return l=sn.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=p,d!==mp&&(i=Error(r(422),{cause:d}),pu(Xr(i,c)))):(d!==mp&&(l=Error(r(423),{cause:d}),pu(Xr(l,c))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,d=Xr(d,c),p=Gp(i.stateNode,d,p),Np(i,p),as!==4&&(as=2)),!1;var y=Error(r(520),{cause:d});if(y=Xr(y,c),qu===null?qu=[y]:qu.push(y),as!==4&&(as=2),l===null)return!0;d=Xr(d,c),c=l;do{switch(c.tag){case 3:return c.flags|=65536,i=p&-p,c.lanes|=i,i=Gp(c.stateNode,d,i),Np(c,i),!1;case 1:if(l=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ta===null||!Ta.has(y))))return c.flags|=65536,p&=-p,c.lanes|=p,p=Cv(p),kv(p,i,c,d),Np(c,p),!1}c=c.return}while(c!==null);return!1}var Tv=Error(r(461)),Is=!1;function Zs(i,l,c,d){l.child=i===null?vv(l,null,c,d):Vo(l,i.child,c,d)}function Ov(i,l,c,d,p){c=c.render;var y=l.ref;if("ref"in d){var T={};for(var I in d)I!=="ref"&&(T[I]=d[I])}else T=d;return Tl(l),d=kp(i,l,c,T,y,p),I=Tp(),i!==null&&!Is?(Op(i,l,p),Pi(i,l,p)):(St&&I&&hp(l),l.flags|=1,Zs(i,l,d,p),l.child)}function Rv(i,l,c,d,p){if(i===null){var y=c.type;return typeof y=="function"&&!cp(y)&&y.defaultProps===void 0&&c.compare===null?(l.tag=15,l.type=y,Mv(i,l,y,d,p)):(i=fh(c.type,null,d,l,l.mode,p),i.ref=l.ref,i.return=l,l.child=i)}if(y=i.child,!eg(i,p)){var T=y.memoizedProps;if(c=c.compare,c=c!==null?c:du,c(T,d)&&i.ref===l.ref)return Pi(i,l,p)}return l.flags|=1,i=Ti(y,d),i.ref=l.ref,i.return=l,l.child=i}function Mv(i,l,c,d,p){if(i!==null){var y=i.memoizedProps;if(du(y,d)&&i.ref===l.ref)if(Is=!1,l.pendingProps=d=y,eg(i,p))(i.flags&131072)!==0&&(Is=!0);else return l.lanes=i.lanes,Pi(i,l,p)}return Zp(i,l,c,d,p)}function Dv(i,l,c){var d=l.pendingProps,p=d.children,y=i!==null?i.memoizedState:null;if(d.mode==="hidden"){if((l.flags&128)!==0){if(d=y!==null?y.baseLanes|c:c,i!==null){for(p=l.child=i.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;l.childLanes=y&~d}else l.childLanes=0,l.child=null;return Lv(i,l,d,c)}if((c&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},i!==null&&xh(l,y!==null?y.cachePool:null),y!==null?Mb(l,y):Ep(),wv(l);else return l.lanes=l.childLanes=536870912,Lv(i,l,y!==null?y.baseLanes|c:c,c)}else y!==null?(xh(l,y.cachePool),Mb(l,y),Na(),l.memoizedState=null):(i!==null&&xh(l,null),Ep(),Na());return Zs(i,l,p,c),l.child}function Lv(i,l,c,d){var p=vp();return p=p===null?null:{parent:Cs._currentValue,pool:p},l.memoizedState={baseLanes:c,cachePool:p},i!==null&&xh(l,null),Ep(),wv(l),i!==null&&gu(i,l,d,!0),null}function Lh(i,l){var c=l.ref;if(c===null)i!==null&&i.ref!==null&&(l.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(l.flags|=4194816)}}function Zp(i,l,c,d,p){return Tl(l),c=kp(i,l,c,d,void 0,p),d=Tp(),i!==null&&!Is?(Op(i,l,p),Pi(i,l,p)):(St&&d&&hp(l),l.flags|=1,Zs(i,l,c,p),l.child)}function qv(i,l,c,d,p,y){return Tl(l),l.updateQueue=null,c=Lb(l,d,c,p),Db(i),d=Tp(),i!==null&&!Is?(Op(i,l,y),Pi(i,l,y)):(St&&d&&hp(l),l.flags|=1,Zs(i,l,c,y),l.child)}function Pv(i,l,c,d,p){if(Tl(l),l.stateNode===null){var y=Lo,T=c.contextType;typeof T=="object"&&T!==null&&(y=tr(T)),y=new c(d,y),l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Vp,l.stateNode=y,y._reactInternals=l,y=l.stateNode,y.props=d,y.state=l.memoizedState,y.refs={},_p(l),T=c.contextType,y.context=typeof T=="object"&&T!==null?tr(T):Lo,y.state=l.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(Hp(l,c,T,d),y.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Vp.enqueueReplaceState(y,y.state,null),ju(l,d,y,p),_u(),y.state=l.memoizedState),typeof y.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(i===null){y=l.stateNode;var I=l.memoizedProps,Y=Ml(c,I);y.props=Y;var ie=y.context,ye=c.contextType;T=Lo,typeof ye=="object"&&ye!==null&&(T=tr(ye));var _e=c.getDerivedStateFromProps;ye=typeof _e=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=l.pendingProps!==I,ye||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||ie!==T)&&jv(l,y,d,T),ba=!1;var oe=l.memoizedState;y.state=oe,ju(l,d,y,p),_u(),ie=l.memoizedState,I||oe!==ie||ba?(typeof _e=="function"&&(Hp(l,c,_e,d),ie=l.memoizedState),(Y=ba||_v(l,c,Y,d,oe,ie,T))?(ye||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(l.flags|=4194308)):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=ie),y.props=d,y.state=ie,y.context=T,d=Y):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{y=l.stateNode,jp(i,l),T=l.memoizedProps,ye=Ml(c,T),y.props=ye,_e=l.pendingProps,oe=y.context,ie=c.contextType,Y=Lo,typeof ie=="object"&&ie!==null&&(Y=tr(ie)),I=c.getDerivedStateFromProps,(ie=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==_e||oe!==Y)&&jv(l,y,d,Y),ba=!1,oe=l.memoizedState,y.state=oe,ju(l,d,y,p),_u();var ce=l.memoizedState;T!==_e||oe!==ce||ba||i!==null&&i.dependencies!==null&&gh(i.dependencies)?(typeof I=="function"&&(Hp(l,c,I,d),ce=l.memoizedState),(ye=ba||_v(l,c,ye,d,oe,ce,Y)||i!==null&&i.dependencies!==null&&gh(i.dependencies))?(ie||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,ce,Y),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,ce,Y)),typeof y.componentDidUpdate=="function"&&(l.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===i.memoizedProps&&oe===i.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&oe===i.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=ce),y.props=d,y.state=ce,y.context=Y,d=ye):(typeof y.componentDidUpdate!="function"||T===i.memoizedProps&&oe===i.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&oe===i.memoizedState||(l.flags|=1024),d=!1)}return y=d,Lh(i,l),d=(l.flags&128)!==0,y||d?(y=l.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),l.flags|=1,i!==null&&d?(l.child=Vo(l,i.child,null,p),l.child=Vo(l,null,c,p)):Zs(i,l,c,p),l.memoizedState=y.state,i=l.child):i=Pi(i,l,p),i}function Iv(i,l,c,d){return mu(),l.flags|=256,Zs(i,l,c,d),l.child}var Yp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kp(i){return{baseLanes:i,cachePool:Sb()}}function Wp(i,l,c){return i=i!==null?i.childLanes&~c:0,l&&(i|=rn),i}function $v(i,l,c){var d=l.pendingProps,p=!1,y=(l.flags&128)!==0,T;if((T=y)||(T=i!==null&&i.memoizedState===null?!1:(ks.current&2)!==0),T&&(p=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,i===null){if(St){if(p?ja(l):Na(),St){var I=is,Y;if(Y=I){e:{for(Y=I,I=ti;Y.nodeType!==8;){if(!I){I=null;break e}if(Y=jn(Y.nextSibling),Y===null){I=null;break e}}I=Y}I!==null?(l.memoizedState={dehydrated:I,treeContext:Sl!==null?{id:Oi,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},Y=Mr(18,null,null,0),Y.stateNode=I,Y.return=l,l.child=Y,lr=l,is=null,Y=!0):Y=!1}Y||Cl(l)}if(I=l.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return Mg(I)?l.lanes=32:l.lanes=536870912,null;qi(l)}return I=d.children,d=d.fallback,p?(Na(),p=l.mode,I=qh({mode:"hidden",children:I},p),d=Nl(d,p,c,null),I.return=l,d.return=l,I.sibling=d,l.child=I,p=l.child,p.memoizedState=Kp(c),p.childLanes=Wp(i,T,c),l.memoizedState=Yp,d):(ja(l),Qp(l,I))}if(Y=i.memoizedState,Y!==null&&(I=Y.dehydrated,I!==null)){if(y)l.flags&256?(ja(l),l.flags&=-257,l=Xp(i,l,c)):l.memoizedState!==null?(Na(),l.child=i.child,l.flags|=128,l=null):(Na(),p=d.fallback,I=l.mode,d=qh({mode:"visible",children:d.children},I),p=Nl(p,I,c,null),p.flags|=2,d.return=l,p.return=l,d.sibling=p,l.child=d,Vo(l,i.child,null,c),d=l.child,d.memoizedState=Kp(c),d.childLanes=Wp(i,T,c),l.memoizedState=Yp,l=p);else if(ja(l),Mg(I)){if(T=I.nextSibling&&I.nextSibling.dataset,T)var ie=T.dgst;T=ie,d=Error(r(419)),d.stack="",d.digest=T,pu({value:d,source:null,stack:null}),l=Xp(i,l,c)}else if(Is||gu(i,l,c,!1),T=(c&i.childLanes)!==0,Is||T){if(T=$t,T!==null&&(d=c&-c,d=(d&42)!==0?1:_i(d),d=(d&(T.suspendedLanes|c))!==0?0:d,d!==0&&d!==Y.retryLane))throw Y.retryLane=d,Do(i,d),Ir(T,i,d),Tv;I.data==="$?"||gg(),l=Xp(i,l,c)}else I.data==="$?"?(l.flags|=192,l.child=i.child,l=null):(i=Y.treeContext,is=jn(I.nextSibling),lr=l,St=!0,Al=null,ti=!1,i!==null&&(en[tn++]=Oi,en[tn++]=Ri,en[tn++]=Sl,Oi=i.id,Ri=i.overflow,Sl=l),l=Qp(l,d.children),l.flags|=4096);return l}return p?(Na(),p=d.fallback,I=l.mode,Y=i.child,ie=Y.sibling,d=Ti(Y,{mode:"hidden",children:d.children}),d.subtreeFlags=Y.subtreeFlags&65011712,ie!==null?p=Ti(ie,p):(p=Nl(p,I,c,null),p.flags|=2),p.return=l,d.return=l,d.sibling=p,l.child=d,d=p,p=l.child,I=i.child.memoizedState,I===null?I=Kp(c):(Y=I.cachePool,Y!==null?(ie=Cs._currentValue,Y=Y.parent!==ie?{parent:ie,pool:ie}:Y):Y=Sb(),I={baseLanes:I.baseLanes|c,cachePool:Y}),p.memoizedState=I,p.childLanes=Wp(i,T,c),l.memoizedState=Yp,d):(ja(l),c=i.child,i=c.sibling,c=Ti(c,{mode:"visible",children:d.children}),c.return=l,c.sibling=null,i!==null&&(T=l.deletions,T===null?(l.deletions=[i],l.flags|=16):T.push(i)),l.child=c,l.memoizedState=null,c)}function Qp(i,l){return l=qh({mode:"visible",children:l},i.mode),l.return=i,i.child=l}function qh(i,l){return i=Mr(22,i,null,l),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Xp(i,l,c){return Vo(l,i.child,null,c),i=Qp(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function Uv(i,l,c){i.lanes|=l;var d=i.alternate;d!==null&&(d.lanes|=l),gp(i.return,l,c)}function Jp(i,l,c,d,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:p}:(y.isBackwards=l,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=c,y.tailMode=p)}function Bv(i,l,c){var d=l.pendingProps,p=d.revealOrder,y=d.tail;if(Zs(i,l,d.children,c),d=ks.current,(d&2)!==0)d=d&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Uv(i,c,l);else if(i.tag===19)Uv(i,c,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}switch(ee(ks,d),p){case"forwards":for(c=l.child,p=null;c!==null;)i=c.alternate,i!==null&&Rh(i)===null&&(p=c),c=c.sibling;c=p,c===null?(p=l.child,l.child=null):(p=c.sibling,c.sibling=null),Jp(l,!1,p,c,y);break;case"backwards":for(c=null,p=l.child,l.child=null;p!==null;){if(i=p.alternate,i!==null&&Rh(i)===null){l.child=p;break}i=p.sibling,p.sibling=c,c=p,p=i}Jp(l,!0,c,null,y);break;case"together":Jp(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Pi(i,l,c){if(i!==null&&(l.dependencies=i.dependencies),ka|=l.lanes,(c&l.childLanes)===0)if(i!==null){if(gu(i,l,c,!1),(c&l.childLanes)===0)return null}else return null;if(i!==null&&l.child!==i.child)throw Error(r(153));if(l.child!==null){for(i=l.child,c=Ti(i,i.pendingProps),l.child=c,c.return=l;i.sibling!==null;)i=i.sibling,c=c.sibling=Ti(i,i.pendingProps),c.return=l;c.sibling=null}return l.child}function eg(i,l){return(i.lanes&l)!==0?!0:(i=i.dependencies,!!(i!==null&&gh(i)))}function $C(i,l,c){switch(l.tag){case 3:Ne(l,l.stateNode.containerInfo),xa(l,Cs,i.memoizedState.cache),mu();break;case 27:case 5:De(l);break;case 4:Ne(l,l.stateNode.containerInfo);break;case 10:xa(l,l.type,l.memoizedProps.value);break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(ja(l),l.flags|=128,null):(c&l.child.childLanes)!==0?$v(i,l,c):(ja(l),i=Pi(i,l,c),i!==null?i.sibling:null);ja(l);break;case 19:var p=(i.flags&128)!==0;if(d=(c&l.childLanes)!==0,d||(gu(i,l,c,!1),d=(c&l.childLanes)!==0),p){if(d)return Bv(i,l,c);l.flags|=128}if(p=l.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ee(ks,ks.current),d)break;return null;case 22:case 23:return l.lanes=0,Dv(i,l,c);case 24:xa(l,Cs,i.memoizedState.cache)}return Pi(i,l,c)}function zv(i,l,c){if(i!==null)if(i.memoizedProps!==l.pendingProps)Is=!0;else{if(!eg(i,c)&&(l.flags&128)===0)return Is=!1,$C(i,l,c);Is=(i.flags&131072)!==0}else Is=!1,St&&(l.flags&1048576)!==0&&xb(l,ph,l.index);switch(l.lanes=0,l.tag){case 16:e:{i=l.pendingProps;var d=l.elementType,p=d._init;if(d=p(d._payload),l.type=d,typeof d=="function")cp(d)?(i=Ml(d,i),l.tag=1,l=Pv(null,l,d,i,c)):(l.tag=0,l=Zp(null,l,d,i,c));else{if(d!=null){if(p=d.$$typeof,p===F){l.tag=11,l=Ov(null,l,d,i,c);break e}else if(p===B){l.tag=14,l=Rv(null,l,d,i,c);break e}}throw l=H(d)||d,Error(r(306,l,""))}}return l;case 0:return Zp(i,l,l.type,l.pendingProps,c);case 1:return d=l.type,p=Ml(d,l.pendingProps),Pv(i,l,d,p,c);case 3:e:{if(Ne(l,l.stateNode.containerInfo),i===null)throw Error(r(387));d=l.pendingProps;var y=l.memoizedState;p=y.element,jp(i,l),ju(l,d,null,c);var T=l.memoizedState;if(d=T.cache,xa(l,Cs,d),d!==y.cache&&yp(l,[Cs],c,!0),_u(),d=T.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=y,l.memoizedState=y,l.flags&256){l=Iv(i,l,d,c);break e}else if(d!==p){p=Xr(Error(r(424)),l),pu(p),l=Iv(i,l,d,c);break e}else{switch(i=l.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(is=jn(i.firstChild),lr=l,St=!0,Al=null,ti=!0,c=vv(l,null,d,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(mu(),d===p){l=Pi(i,l,c);break e}Zs(i,l,d,c)}l=l.child}return l;case 26:return Lh(i,l),i===null?(c=Gw(l.type,null,l.pendingProps,null))?l.memoizedState=c:St||(c=l.type,i=l.pendingProps,d=Wh(Ce.current).createElement(c),d[xs]=l,d[Ls]=i,Ks(d,c,i),rs(d),l.stateNode=d):l.memoizedState=Gw(l.type,i.memoizedProps,l.pendingProps,i.memoizedState),null;case 27:return De(l),i===null&&St&&(d=l.stateNode=Fw(l.type,l.pendingProps,Ce.current),lr=l,ti=!0,p=is,Ma(l.type)?(Dg=p,is=jn(d.firstChild)):is=p),Zs(i,l,l.pendingProps.children,c),Lh(i,l),i===null&&(l.flags|=4194304),l.child;case 5:return i===null&&St&&((p=d=is)&&(d=fk(d,l.type,l.pendingProps,ti),d!==null?(l.stateNode=d,lr=l,is=jn(d.firstChild),ti=!1,p=!0):p=!1),p||Cl(l)),De(l),p=l.type,y=l.pendingProps,T=i!==null?i.memoizedProps:null,d=y.children,Tg(p,y)?d=null:T!==null&&Tg(p,T)&&(l.flags|=32),l.memoizedState!==null&&(p=kp(i,l,OC,null,null,c),Vu._currentValue=p),Lh(i,l),Zs(i,l,d,c),l.child;case 6:return i===null&&St&&((i=c=is)&&(c=mk(c,l.pendingProps,ti),c!==null?(l.stateNode=c,lr=l,is=null,i=!0):i=!1),i||Cl(l)),null;case 13:return $v(i,l,c);case 4:return Ne(l,l.stateNode.containerInfo),d=l.pendingProps,i===null?l.child=Vo(l,null,d,c):Zs(i,l,d,c),l.child;case 11:return Ov(i,l,l.type,l.pendingProps,c);case 7:return Zs(i,l,l.pendingProps,c),l.child;case 8:return Zs(i,l,l.pendingProps.children,c),l.child;case 12:return Zs(i,l,l.pendingProps.children,c),l.child;case 10:return d=l.pendingProps,xa(l,l.type,d.value),Zs(i,l,d.children,c),l.child;case 9:return p=l.type._context,d=l.pendingProps.children,Tl(l),p=tr(p),d=d(p),l.flags|=1,Zs(i,l,d,c),l.child;case 14:return Rv(i,l,l.type,l.pendingProps,c);case 15:return Mv(i,l,l.type,l.pendingProps,c);case 19:return Bv(i,l,c);case 31:return d=l.pendingProps,c=l.mode,d={mode:d.mode,children:d.children},i===null?(c=qh(d,c),c.ref=l.ref,l.child=c,c.return=l,l=c):(c=Ti(i.child,d),c.ref=l.ref,l.child=c,c.return=l,l=c),l;case 22:return Dv(i,l,c);case 24:return Tl(l),d=tr(Cs),i===null?(p=vp(),p===null&&(p=$t,y=xp(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=c),p=y),l.memoizedState={parent:d,cache:p},_p(l),xa(l,Cs,p)):((i.lanes&c)!==0&&(jp(i,l),ju(l,null,null,c),_u()),p=i.memoizedState,y=l.memoizedState,p.parent!==d?(p={parent:d,cache:d},l.memoizedState=p,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=p),xa(l,Cs,d)):(d=y.cache,xa(l,Cs,d),d!==p.cache&&yp(l,[Cs],c,!0))),Zs(i,l,l.pendingProps.children,c),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Ii(i){i.flags|=4}function Fv(i,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Qw(l)){if(l=sn.current,l!==null&&((wt&4194048)===wt?si!==null:(wt&62914560)!==wt&&(wt&536870912)===0||l!==si))throw vu=wp,Eb;i.flags|=8192}}function Ph(i,l){l!==null&&(i.flags|=4),i.flags&16384&&(l=i.tag!==22?vi():536870912,i.lanes|=l,Ko|=l)}function Tu(i,l){if(!St)switch(i.tailMode){case"hidden":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Kt(i){var l=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(l)for(var p=i.child;p!==null;)c|=p.lanes|p.childLanes,d|=p.subtreeFlags&65011712,d|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)c|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=d,i.childLanes=c,l}function UC(i,l,c){var d=l.pendingProps;switch(fp(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(l),null;case 1:return Kt(l),null;case 3:return c=l.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Di(Cs),Oe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(fu(l)?Ii(l):i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,wb())),Kt(l),null;case 26:return c=l.memoizedState,i===null?(Ii(l),c!==null?(Kt(l),Fv(l,c)):(Kt(l),l.flags&=-16777217)):c?c!==i.memoizedState?(Ii(l),Kt(l),Fv(l,c)):(Kt(l),l.flags&=-16777217):(i.memoizedProps!==d&&Ii(l),Kt(l),l.flags&=-16777217),null;case 27:Re(l),c=Ce.current;var p=l.type;if(i!==null&&l.stateNode!=null)i.memoizedProps!==d&&Ii(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return Kt(l),null}i=ge.current,fu(l)?bb(l):(i=Fw(p,d,c),l.stateNode=i,Ii(l))}return Kt(l),null;case 5:if(Re(l),c=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==d&&Ii(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return Kt(l),null}if(i=ge.current,fu(l))bb(l);else{switch(p=Wh(Ce.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof d.is=="string"?p.createElement("select",{is:d.is}):p.createElement("select"),d.multiple?i.multiple=!0:d.size&&(i.size=d.size);break;default:i=typeof d.is=="string"?p.createElement(c,{is:d.is}):p.createElement(c)}}i[xs]=l,i[Ls]=d;e:for(p=l.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break e;for(;p.sibling===null;){if(p.return===null||p.return===l)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}l.stateNode=i;e:switch(Ks(i,c,d),c){case"button":case"input":case"select":case"textarea":i=!!d.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ii(l)}}return Kt(l),l.flags&=-16777217,null;case 6:if(i&&l.stateNode!=null)i.memoizedProps!==d&&Ii(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(r(166));if(i=Ce.current,fu(l)){if(i=l.stateNode,c=l.memoizedProps,d=null,p=lr,p!==null)switch(p.tag){case 27:case 5:d=p.memoizedProps}i[xs]=l,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||qw(i.nodeValue,c)),i||Cl(l)}else i=Wh(i).createTextNode(d),i[xs]=l,l.stateNode=i}return Kt(l),null;case 13:if(d=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=fu(l),d!==null&&d.dehydrated!==null){if(i===null){if(!p)throw Error(r(318));if(p=l.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[xs]=l}else mu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Kt(l),p=!1}else p=wb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return l.flags&256?(qi(l),l):(qi(l),null)}if(qi(l),(l.flags&128)!==0)return l.lanes=c,l;if(c=d!==null,i=i!==null&&i.memoizedState!==null,c){d=l.child,p=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(p=d.alternate.memoizedState.cachePool.pool);var y=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==p&&(d.flags|=2048)}return c!==i&&c&&(l.child.flags|=8192),Ph(l,l.updateQueue),Kt(l),null;case 4:return Oe(),i===null&&Sg(l.stateNode.containerInfo),Kt(l),null;case 10:return Di(l.type),Kt(l),null;case 19:if(le(ks),p=l.memoizedState,p===null)return Kt(l),null;if(d=(l.flags&128)!==0,y=p.rendering,y===null)if(d)Tu(p,!1);else{if(as!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(y=Rh(i),y!==null){for(l.flags|=128,Tu(p,!1),i=y.updateQueue,l.updateQueue=i,Ph(l,i),l.subtreeFlags=0,i=c,c=l.child;c!==null;)yb(c,i),c=c.sibling;return ee(ks,ks.current&1|2),l.child}i=i.sibling}p.tail!==null&&bt()>Uh&&(l.flags|=128,d=!0,Tu(p,!1),l.lanes=4194304)}else{if(!d)if(i=Rh(y),i!==null){if(l.flags|=128,d=!0,i=i.updateQueue,l.updateQueue=i,Ph(l,i),Tu(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!St)return Kt(l),null}else 2*bt()-p.renderingStartTime>Uh&&c!==536870912&&(l.flags|=128,d=!0,Tu(p,!1),l.lanes=4194304);p.isBackwards?(y.sibling=l.child,l.child=y):(i=p.last,i!==null?i.sibling=y:l.child=y,p.last=y)}return p.tail!==null?(l=p.tail,p.rendering=l,p.tail=l.sibling,p.renderingStartTime=bt(),l.sibling=null,i=ks.current,ee(ks,d?i&1|2:i&1),l):(Kt(l),null);case 22:case 23:return qi(l),Ap(),d=l.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(c&536870912)!==0&&(l.flags&128)===0&&(Kt(l),l.subtreeFlags&6&&(l.flags|=8192)):Kt(l),c=l.updateQueue,c!==null&&Ph(l,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==c&&(l.flags|=2048),i!==null&&le(Ol),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),l.memoizedState.cache!==c&&(l.flags|=2048),Di(Cs),Kt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function BC(i,l){switch(fp(l),l.tag){case 1:return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return Di(Cs),Oe(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 26:case 27:case 5:return Re(l),null;case 13:if(qi(l),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(r(340));mu()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return le(ks),null;case 4:return Oe(),null;case 10:return Di(l.type),null;case 22:case 23:return qi(l),Ap(),i!==null&&le(Ol),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 24:return Di(Cs),null;case 25:return null;default:return null}}function Hv(i,l){switch(fp(l),l.tag){case 3:Di(Cs),Oe();break;case 26:case 27:case 5:Re(l);break;case 4:Oe();break;case 13:qi(l);break;case 19:le(ks);break;case 10:Di(l.type);break;case 22:case 23:qi(l),Ap(),i!==null&&le(Ol);break;case 24:Di(Cs)}}function Ou(i,l){try{var c=l.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var p=d.next;c=p;do{if((c.tag&i)===i){d=void 0;var y=c.create,T=c.inst;d=y(),T.destroy=d}c=c.next}while(c!==p)}}catch(I){qt(l,l.return,I)}}function Sa(i,l,c){try{var d=l.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var y=p.next;d=y;do{if((d.tag&i)===i){var T=d.inst,I=T.destroy;if(I!==void 0){T.destroy=void 0,p=l;var Y=c,ie=I;try{ie()}catch(ye){qt(p,Y,ye)}}}d=d.next}while(d!==y)}}catch(ye){qt(l,l.return,ye)}}function Vv(i){var l=i.updateQueue;if(l!==null){var c=i.stateNode;try{Rb(l,c)}catch(d){qt(i,i.return,d)}}}function Gv(i,l,c){c.props=Ml(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){qt(i,l,d)}}function Ru(i,l){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(p){qt(i,l,p)}}function ri(i,l){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(p){qt(i,l,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(p){qt(i,l,p)}else c.current=null}function Zv(i){var l=i.type,c=i.memoizedProps,d=i.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(p){qt(i,i.return,p)}}function tg(i,l,c){try{var d=i.stateNode;ok(d,i.type,c,l),d[Ls]=l}catch(p){qt(i,i.return,p)}}function Yv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ma(i.type)||i.tag===4}function sg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Yv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ma(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function rg(i,l,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,l?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,l):(l=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,l.appendChild(i),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=Kh));else if(d!==4&&(d===27&&Ma(i.type)&&(c=i.stateNode,l=null),i=i.child,i!==null))for(rg(i,l,c),i=i.sibling;i!==null;)rg(i,l,c),i=i.sibling}function Ih(i,l,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,l?c.insertBefore(i,l):c.appendChild(i);else if(d!==4&&(d===27&&Ma(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Ih(i,l,c),i=i.sibling;i!==null;)Ih(i,l,c),i=i.sibling}function Kv(i){var l=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,p=l.attributes;p.length;)l.removeAttributeNode(p[0]);Ks(l,d,c),l[xs]=i,l[Ls]=c}catch(y){qt(i,i.return,y)}}var $i=!1,ds=!1,ng=!1,Wv=typeof WeakSet=="function"?WeakSet:Set,$s=null;function zC(i,l){if(i=i.containerInfo,Cg=sf,i=lb(i),sp(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var T=0,I=-1,Y=-1,ie=0,ye=0,_e=i,oe=null;t:for(;;){for(var ce;_e!==c||p!==0&&_e.nodeType!==3||(I=T+p),_e!==y||d!==0&&_e.nodeType!==3||(Y=T+d),_e.nodeType===3&&(T+=_e.nodeValue.length),(ce=_e.firstChild)!==null;)oe=_e,_e=ce;for(;;){if(_e===i)break t;if(oe===c&&++ie===p&&(I=T),oe===y&&++ye===d&&(Y=T),(ce=_e.nextSibling)!==null)break;_e=oe,oe=_e.parentNode}_e=ce}c=I===-1||Y===-1?null:{start:I,end:Y}}else c=null}c=c||{start:0,end:0}}else c=null;for(kg={focusedElem:i,selectionRange:c},sf=!1,$s=l;$s!==null;)if(l=$s,i=l.child,(l.subtreeFlags&1024)!==0&&i!==null)i.return=l,$s=i;else for(;$s!==null;){switch(l=$s,y=l.alternate,i=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,c=l,p=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var st=Ml(c.type,p,c.elementType===c.type);i=d.getSnapshotBeforeUpdate(st,y),d.__reactInternalSnapshotBeforeUpdate=i}catch(Xe){qt(c,c.return,Xe)}}break;case 3:if((i&1024)!==0){if(i=l.stateNode.containerInfo,c=i.nodeType,c===9)Rg(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Rg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=l.sibling,i!==null){i.return=l.return,$s=i;break}$s=l.return}}function Qv(i,l,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Ea(i,c),d&4&&Ou(5,c);break;case 1:if(Ea(i,c),d&4)if(i=c.stateNode,l===null)try{i.componentDidMount()}catch(T){qt(c,c.return,T)}else{var p=Ml(c.type,l.memoizedProps);l=l.memoizedState;try{i.componentDidUpdate(p,l,i.__reactInternalSnapshotBeforeUpdate)}catch(T){qt(c,c.return,T)}}d&64&&Vv(c),d&512&&Ru(c,c.return);break;case 3:if(Ea(i,c),d&64&&(i=c.updateQueue,i!==null)){if(l=null,c.child!==null)switch(c.child.tag){case 27:case 5:l=c.child.stateNode;break;case 1:l=c.child.stateNode}try{Rb(i,l)}catch(T){qt(c,c.return,T)}}break;case 27:l===null&&d&4&&Kv(c);case 26:case 5:Ea(i,c),l===null&&d&4&&Zv(c),d&512&&Ru(c,c.return);break;case 12:Ea(i,c);break;case 13:Ea(i,c),d&4&&ew(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=QC.bind(null,c),pk(i,c))));break;case 22:if(d=c.memoizedState!==null||$i,!d){l=l!==null&&l.memoizedState!==null||ds,p=$i;var y=ds;$i=d,(ds=l)&&!y?Aa(i,c,(c.subtreeFlags&8772)!==0):Ea(i,c),$i=p,ds=y}break;case 30:break;default:Ea(i,c)}}function Xv(i){var l=i.alternate;l!==null&&(i.alternate=null,Xv(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&fl(l)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Gt=null,vr=!1;function Ui(i,l,c){for(c=c.child;c!==null;)Jv(i,l,c),c=c.sibling}function Jv(i,l,c){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(Te,c)}catch{}switch(c.tag){case 26:ds||ri(c,l),Ui(i,l,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:ds||ri(c,l);var d=Gt,p=vr;Ma(c.type)&&(Gt=c.stateNode,vr=!1),Ui(i,l,c),Bu(c.stateNode),Gt=d,vr=p;break;case 5:ds||ri(c,l);case 6:if(d=Gt,p=vr,Gt=null,Ui(i,l,c),Gt=d,vr=p,Gt!==null)if(vr)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(c.stateNode)}catch(y){qt(c,l,y)}else try{Gt.removeChild(c.stateNode)}catch(y){qt(c,l,y)}break;case 18:Gt!==null&&(vr?(i=Gt,Bw(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Ku(i)):Bw(Gt,c.stateNode));break;case 4:d=Gt,p=vr,Gt=c.stateNode.containerInfo,vr=!0,Ui(i,l,c),Gt=d,vr=p;break;case 0:case 11:case 14:case 15:ds||Sa(2,c,l),ds||Sa(4,c,l),Ui(i,l,c);break;case 1:ds||(ri(c,l),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Gv(c,l,d)),Ui(i,l,c);break;case 21:Ui(i,l,c);break;case 22:ds=(d=ds)||c.memoizedState!==null,Ui(i,l,c),ds=d;break;default:Ui(i,l,c)}}function ew(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ku(i)}catch(c){qt(l,l.return,c)}}function FC(i){switch(i.tag){case 13:case 19:var l=i.stateNode;return l===null&&(l=i.stateNode=new Wv),l;case 22:return i=i.stateNode,l=i._retryCache,l===null&&(l=i._retryCache=new Wv),l;default:throw Error(r(435,i.tag))}}function ig(i,l){var c=FC(i);l.forEach(function(d){var p=XC.bind(null,i,d);c.has(d)||(c.add(d),d.then(p,p))})}function Dr(i,l){var c=l.deletions;if(c!==null)for(var d=0;d<c.length;d++){var p=c[d],y=i,T=l,I=T;e:for(;I!==null;){switch(I.tag){case 27:if(Ma(I.type)){Gt=I.stateNode,vr=!1;break e}break;case 5:Gt=I.stateNode,vr=!1;break e;case 3:case 4:Gt=I.stateNode.containerInfo,vr=!0;break e}I=I.return}if(Gt===null)throw Error(r(160));Jv(y,T,p),Gt=null,vr=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)tw(l,i),l=l.sibling}var _n=null;function tw(i,l){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Dr(l,i),Lr(i),d&4&&(Sa(3,i,i.return),Ou(3,i),Sa(5,i,i.return));break;case 1:Dr(l,i),Lr(i),d&512&&(ds||c===null||ri(c,c.return)),d&64&&$i&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var p=_n;if(Dr(l,i),Lr(i),d&512&&(ds||c===null||ri(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){e:{d=i.type,c=i.memoizedProps,p=p.ownerDocument||p;t:switch(d){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Ni]||y[xs]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(d),p.head.insertBefore(y,p.querySelector("head > title"))),Ks(y,d,c),y[xs]=i,rs(y),d=y;break e;case"link":var T=Kw("link","href",p).get(d+(c.href||""));if(T){for(var I=0;I<T.length;I++)if(y=T[I],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(I,1);break t}}y=p.createElement(d),Ks(y,d,c),p.head.appendChild(y);break;case"meta":if(T=Kw("meta","content",p).get(d+(c.content||""))){for(I=0;I<T.length;I++)if(y=T[I],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(I,1);break t}}y=p.createElement(d),Ks(y,d,c),p.head.appendChild(y);break;default:throw Error(r(468,d))}y[xs]=i,rs(y),d=y}i.stateNode=d}else Ww(p,i.type,i.stateNode);else i.stateNode=Yw(p,d,i.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?Ww(p,i.type,i.stateNode):Yw(p,d,i.memoizedProps)):d===null&&i.stateNode!==null&&tg(i,i.memoizedProps,c.memoizedProps)}break;case 27:Dr(l,i),Lr(i),d&512&&(ds||c===null||ri(c,c.return)),c!==null&&d&4&&tg(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Dr(l,i),Lr(i),d&512&&(ds||c===null||ri(c,c.return)),i.flags&32){p=i.stateNode;try{qs(p,"")}catch(ce){qt(i,i.return,ce)}}d&4&&i.stateNode!=null&&(p=i.memoizedProps,tg(i,p,c!==null?c.memoizedProps:p)),d&1024&&(ng=!0);break;case 6:if(Dr(l,i),Lr(i),d&4){if(i.stateNode===null)throw Error(r(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(ce){qt(i,i.return,ce)}}break;case 3:if(Jh=null,p=_n,_n=Qh(l.containerInfo),Dr(l,i),_n=p,Lr(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Ku(l.containerInfo)}catch(ce){qt(i,i.return,ce)}ng&&(ng=!1,sw(i));break;case 4:d=_n,_n=Qh(i.stateNode.containerInfo),Dr(l,i),Lr(i),_n=d;break;case 12:Dr(l,i),Lr(i);break;case 13:Dr(l,i),Lr(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(dg=bt()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,ig(i,d)));break;case 22:p=i.memoizedState!==null;var Y=c!==null&&c.memoizedState!==null,ie=$i,ye=ds;if($i=ie||p,ds=ye||Y,Dr(l,i),ds=ye,$i=ie,Lr(i),d&8192)e:for(l=i.stateNode,l._visibility=p?l._visibility&-2:l._visibility|1,p&&(c===null||Y||$i||ds||Dl(i)),c=null,l=i;;){if(l.tag===5||l.tag===26){if(c===null){Y=c=l;try{if(y=Y.stateNode,p)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{I=Y.stateNode;var _e=Y.memoizedProps.style,oe=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;I.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(ce){qt(Y,Y.return,ce)}}}else if(l.tag===6){if(c===null){Y=l;try{Y.stateNode.nodeValue=p?"":Y.memoizedProps}catch(ce){qt(Y,Y.return,ce)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===i)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break e;for(;l.sibling===null;){if(l.return===null||l.return===i)break e;c===l&&(c=null),l=l.return}c===l&&(c=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,ig(i,c))));break;case 19:Dr(l,i),Lr(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,ig(i,d)));break;case 30:break;case 21:break;default:Dr(l,i),Lr(i)}}function Lr(i){var l=i.flags;if(l&2){try{for(var c,d=i.return;d!==null;){if(Yv(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var p=c.stateNode,y=sg(i);Ih(i,y,p);break;case 5:var T=c.stateNode;c.flags&32&&(qs(T,""),c.flags&=-33);var I=sg(i);Ih(i,I,T);break;case 3:case 4:var Y=c.stateNode.containerInfo,ie=sg(i);rg(i,ie,Y);break;default:throw Error(r(161))}}catch(ye){qt(i,i.return,ye)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function sw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var l=i;sw(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),i=i.sibling}}function Ea(i,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Qv(i,l.alternate,l),l=l.sibling}function Dl(i){for(i=i.child;i!==null;){var l=i;switch(l.tag){case 0:case 11:case 14:case 15:Sa(4,l,l.return),Dl(l);break;case 1:ri(l,l.return);var c=l.stateNode;typeof c.componentWillUnmount=="function"&&Gv(l,l.return,c),Dl(l);break;case 27:Bu(l.stateNode);case 26:case 5:ri(l,l.return),Dl(l);break;case 22:l.memoizedState===null&&Dl(l);break;case 30:Dl(l);break;default:Dl(l)}i=i.sibling}}function Aa(i,l,c){for(c=c&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,p=i,y=l,T=y.flags;switch(y.tag){case 0:case 11:case 15:Aa(p,y,c),Ou(4,y);break;case 1:if(Aa(p,y,c),d=y,p=d.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(ie){qt(d,d.return,ie)}if(d=y,p=d.updateQueue,p!==null){var I=d.stateNode;try{var Y=p.shared.hiddenCallbacks;if(Y!==null)for(p.shared.hiddenCallbacks=null,p=0;p<Y.length;p++)Ob(Y[p],I)}catch(ie){qt(d,d.return,ie)}}c&&T&64&&Vv(y),Ru(y,y.return);break;case 27:Kv(y);case 26:case 5:Aa(p,y,c),c&&d===null&&T&4&&Zv(y),Ru(y,y.return);break;case 12:Aa(p,y,c);break;case 13:Aa(p,y,c),c&&T&4&&ew(p,y);break;case 22:y.memoizedState===null&&Aa(p,y,c),Ru(y,y.return);break;case 30:break;default:Aa(p,y,c)}l=l.sibling}}function ag(i,l){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&yu(c))}function lg(i,l){i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&yu(i))}function ni(i,l,c,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)rw(i,l,c,d),l=l.sibling}function rw(i,l,c,d){var p=l.flags;switch(l.tag){case 0:case 11:case 15:ni(i,l,c,d),p&2048&&Ou(9,l);break;case 1:ni(i,l,c,d);break;case 3:ni(i,l,c,d),p&2048&&(i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&yu(i)));break;case 12:if(p&2048){ni(i,l,c,d),i=l.stateNode;try{var y=l.memoizedProps,T=y.id,I=y.onPostCommit;typeof I=="function"&&I(T,l.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Y){qt(l,l.return,Y)}}else ni(i,l,c,d);break;case 13:ni(i,l,c,d);break;case 23:break;case 22:y=l.stateNode,T=l.alternate,l.memoizedState!==null?y._visibility&2?ni(i,l,c,d):Mu(i,l):y._visibility&2?ni(i,l,c,d):(y._visibility|=2,Go(i,l,c,d,(l.subtreeFlags&10256)!==0)),p&2048&&ag(T,l);break;case 24:ni(i,l,c,d),p&2048&&lg(l.alternate,l);break;default:ni(i,l,c,d)}}function Go(i,l,c,d,p){for(p=p&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var y=i,T=l,I=c,Y=d,ie=T.flags;switch(T.tag){case 0:case 11:case 15:Go(y,T,I,Y,p),Ou(8,T);break;case 23:break;case 22:var ye=T.stateNode;T.memoizedState!==null?ye._visibility&2?Go(y,T,I,Y,p):Mu(y,T):(ye._visibility|=2,Go(y,T,I,Y,p)),p&&ie&2048&&ag(T.alternate,T);break;case 24:Go(y,T,I,Y,p),p&&ie&2048&&lg(T.alternate,T);break;default:Go(y,T,I,Y,p)}l=l.sibling}}function Mu(i,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var c=i,d=l,p=d.flags;switch(d.tag){case 22:Mu(c,d),p&2048&&ag(d.alternate,d);break;case 24:Mu(c,d),p&2048&&lg(d.alternate,d);break;default:Mu(c,d)}l=l.sibling}}var Du=8192;function Zo(i){if(i.subtreeFlags&Du)for(i=i.child;i!==null;)nw(i),i=i.sibling}function nw(i){switch(i.tag){case 26:Zo(i),i.flags&Du&&i.memoizedState!==null&&Ck(_n,i.memoizedState,i.memoizedProps);break;case 5:Zo(i);break;case 3:case 4:var l=_n;_n=Qh(i.stateNode.containerInfo),Zo(i),_n=l;break;case 22:i.memoizedState===null&&(l=i.alternate,l!==null&&l.memoizedState!==null?(l=Du,Du=16777216,Zo(i),Du=l):Zo(i));break;default:Zo(i)}}function iw(i){var l=i.alternate;if(l!==null&&(i=l.child,i!==null)){l.child=null;do l=i.sibling,i.sibling=null,i=l;while(i!==null)}}function Lu(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var d=l[c];$s=d,lw(d,i)}iw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)aw(i),i=i.sibling}function aw(i){switch(i.tag){case 0:case 11:case 15:Lu(i),i.flags&2048&&Sa(9,i,i.return);break;case 3:Lu(i);break;case 12:Lu(i);break;case 22:var l=i.stateNode;i.memoizedState!==null&&l._visibility&2&&(i.return===null||i.return.tag!==13)?(l._visibility&=-3,$h(i)):Lu(i);break;default:Lu(i)}}function $h(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var d=l[c];$s=d,lw(d,i)}iw(i)}for(i=i.child;i!==null;){switch(l=i,l.tag){case 0:case 11:case 15:Sa(8,l,l.return),$h(l);break;case 22:c=l.stateNode,c._visibility&2&&(c._visibility&=-3,$h(l));break;default:$h(l)}i=i.sibling}}function lw(i,l){for(;$s!==null;){var c=$s;switch(c.tag){case 0:case 11:case 15:Sa(8,c,l);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:yu(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,$s=d;else e:for(c=i;$s!==null;){d=$s;var p=d.sibling,y=d.return;if(Xv(d),d===c){$s=null;break e}if(p!==null){p.return=y,$s=p;break e}$s=y}}}var HC={getCacheForType:function(i){var l=tr(Cs),c=l.data.get(i);return c===void 0&&(c=i(),l.data.set(i,c)),c}},VC=typeof WeakMap=="function"?WeakMap:Map,Ct=0,$t=null,ht=null,wt=0,kt=0,qr=null,Ca=!1,Yo=!1,og=!1,Bi=0,as=0,ka=0,Ll=0,cg=0,rn=0,Ko=0,qu=null,wr=null,ug=!1,dg=0,Uh=1/0,Bh=null,Ta=null,Ys=0,Oa=null,Wo=null,Qo=0,hg=0,fg=null,ow=null,Pu=0,mg=null;function Pr(){if((Ct&2)!==0&&wt!==0)return wt&-wt;if(q.T!==null){var i=Io;return i!==0?i:wg()}return mn()}function cw(){rn===0&&(rn=(wt&536870912)===0||St?pr():536870912);var i=sn.current;return i!==null&&(i.flags|=32),rn}function Ir(i,l,c){(i===$t&&(kt===2||kt===9)||i.cancelPendingCommit!==null)&&(Xo(i,0),Ra(i,wt,rn,!1)),Cr(i,c),((Ct&2)===0||i!==$t)&&(i===$t&&((Ct&2)===0&&(Ll|=c),as===4&&Ra(i,wt,rn,!1)),ii(i))}function uw(i,l,c){if((Ct&6)!==0)throw Error(r(327));var d=!c&&(l&124)===0&&(l&i.expiredLanes)===0||mr(i,l),p=d?YC(i,l):yg(i,l,!0),y=d;do{if(p===0){Yo&&!d&&Ra(i,l,0,!1);break}else{if(c=i.current.alternate,y&&!GC(c)){p=yg(i,l,!1),y=!1;continue}if(p===2){if(y=l,i.errorRecoveryDisabledLanes&y)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var I=i;p=qu;var Y=I.current.memoizedState.isDehydrated;if(Y&&(Xo(I,T).flags|=256),T=yg(I,T,!1),T!==2){if(og&&!Y){I.errorRecoveryDisabledLanes|=y,Ll|=y,p=4;break e}y=wr,wr=p,y!==null&&(wr===null?wr=y:wr.push.apply(wr,y))}p=T}if(y=!1,p!==2)continue}}if(p===1){Xo(i,0),Ra(i,l,0,!0);break}e:{switch(d=i,y=p,y){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Ra(d,l,rn,!Ca);break e;case 2:wr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(p=dg+300-bt(),10<p)){if(Ra(d,l,rn,!Ca),Gr(d,0,!0)!==0)break e;d.timeoutHandle=$w(dw.bind(null,d,c,wr,Bh,ug,l,rn,Ll,Ko,Ca,y,2,-0,0),p);break e}dw(d,c,wr,Bh,ug,l,rn,Ll,Ko,Ca,y,0,-0,0)}}break}while(!0);ii(i)}function dw(i,l,c,d,p,y,T,I,Y,ie,ye,_e,oe,ce){if(i.timeoutHandle=-1,_e=l.subtreeFlags,(_e&8192||(_e&16785408)===16785408)&&(Hu={stylesheets:null,count:0,unsuspend:Ak},nw(l),_e=kk(),_e!==null)){i.cancelPendingCommit=_e(xw.bind(null,i,l,y,c,d,p,T,I,Y,ye,1,oe,ce)),Ra(i,y,T,!ie);return}xw(i,l,y,c,d,p,T,I,Y)}function GC(i){for(var l=i;;){var c=l.tag;if((c===0||c===11||c===15)&&l.flags&16384&&(c=l.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var p=c[d],y=p.getSnapshot;p=p.value;try{if(!Rr(y(),p))return!1}catch{return!1}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ra(i,l,c,d){l&=~cg,l&=~Ll,i.suspendedLanes|=l,i.pingedLanes&=~l,d&&(i.warmLanes|=l),d=i.expirationTimes;for(var p=l;0<p;){var y=31-pt(p),T=1<<y;d[y]=-1,p&=~T}c!==0&&Vn(i,c,l)}function zh(){return(Ct&6)===0?(Iu(0),!1):!0}function pg(){if(ht!==null){if(kt===0)var i=ht.return;else i=ht,Mi=kl=null,Rp(i),Ho=null,Cu=0,i=ht;for(;i!==null;)Hv(i.alternate,i),i=i.return;ht=null}}function Xo(i,l){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,uk(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),pg(),$t=i,ht=c=Ti(i.current,null),wt=l,kt=0,qr=null,Ca=!1,Yo=mr(i,l),og=!1,Ko=rn=cg=Ll=ka=as=0,wr=qu=null,ug=!1,(l&8)!==0&&(l|=l&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=l;0<d;){var p=31-pt(d),y=1<<p;l|=i[p],d&=~y}return Bi=l,uh(),c}function hw(i,l){lt=null,q.H=kh,l===bu||l===bh?(l=kb(),kt=3):l===Eb?(l=kb(),kt=4):kt=l===Tv?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,qr=l,ht===null&&(as=1,Dh(i,Xr(l,i.current)))}function fw(){var i=q.H;return q.H=kh,i===null?kh:i}function mw(){var i=q.A;return q.A=HC,i}function gg(){as=4,Ca||(wt&4194048)!==wt&&sn.current!==null||(Yo=!0),(ka&134217727)===0&&(Ll&134217727)===0||$t===null||Ra($t,wt,rn,!1)}function yg(i,l,c){var d=Ct;Ct|=2;var p=fw(),y=mw();($t!==i||wt!==l)&&(Bh=null,Xo(i,l)),l=!1;var T=as;e:do try{if(kt!==0&&ht!==null){var I=ht,Y=qr;switch(kt){case 8:pg(),T=6;break e;case 3:case 2:case 9:case 6:sn.current===null&&(l=!0);var ie=kt;if(kt=0,qr=null,Jo(i,I,Y,ie),c&&Yo){T=0;break e}break;default:ie=kt,kt=0,qr=null,Jo(i,I,Y,ie)}}ZC(),T=as;break}catch(ye){hw(i,ye)}while(!0);return l&&i.shellSuspendCounter++,Mi=kl=null,Ct=d,q.H=p,q.A=y,ht===null&&($t=null,wt=0,uh()),T}function ZC(){for(;ht!==null;)pw(ht)}function YC(i,l){var c=Ct;Ct|=2;var d=fw(),p=mw();$t!==i||wt!==l?(Bh=null,Uh=bt()+500,Xo(i,l)):Yo=mr(i,l);e:do try{if(kt!==0&&ht!==null){l=ht;var y=qr;t:switch(kt){case 1:kt=0,qr=null,Jo(i,l,y,1);break;case 2:case 9:if(Ab(y)){kt=0,qr=null,gw(l);break}l=function(){kt!==2&&kt!==9||$t!==i||(kt=7),ii(i)},y.then(l,l);break e;case 3:kt=7;break e;case 4:kt=5;break e;case 7:Ab(y)?(kt=0,qr=null,gw(l)):(kt=0,qr=null,Jo(i,l,y,7));break;case 5:var T=null;switch(ht.tag){case 26:T=ht.memoizedState;case 5:case 27:var I=ht;if(!T||Qw(T)){kt=0,qr=null;var Y=I.sibling;if(Y!==null)ht=Y;else{var ie=I.return;ie!==null?(ht=ie,Fh(ie)):ht=null}break t}}kt=0,qr=null,Jo(i,l,y,5);break;case 6:kt=0,qr=null,Jo(i,l,y,6);break;case 8:pg(),as=6;break e;default:throw Error(r(462))}}KC();break}catch(ye){hw(i,ye)}while(!0);return Mi=kl=null,q.H=d,q.A=p,Ct=c,ht!==null?0:($t=null,wt=0,uh(),as)}function KC(){for(;ht!==null&&!Je();)pw(ht)}function pw(i){var l=zv(i.alternate,i,Bi);i.memoizedProps=i.pendingProps,l===null?Fh(i):ht=l}function gw(i){var l=i,c=l.alternate;switch(l.tag){case 15:case 0:l=qv(c,l,l.pendingProps,l.type,void 0,wt);break;case 11:l=qv(c,l,l.pendingProps,l.type.render,l.ref,wt);break;case 5:Rp(l);default:Hv(c,l),l=ht=yb(l,Bi),l=zv(c,l,Bi)}i.memoizedProps=i.pendingProps,l===null?Fh(i):ht=l}function Jo(i,l,c,d){Mi=kl=null,Rp(l),Ho=null,Cu=0;var p=l.return;try{if(IC(i,p,l,c,wt)){as=1,Dh(i,Xr(c,i.current)),ht=null;return}}catch(y){if(p!==null)throw ht=p,y;as=1,Dh(i,Xr(c,i.current)),ht=null;return}l.flags&32768?(St||d===1?i=!0:Yo||(wt&536870912)!==0?i=!1:(Ca=i=!0,(d===2||d===9||d===3||d===6)&&(d=sn.current,d!==null&&d.tag===13&&(d.flags|=16384))),yw(l,i)):Fh(l)}function Fh(i){var l=i;do{if((l.flags&32768)!==0){yw(l,Ca);return}i=l.return;var c=UC(l.alternate,l,Bi);if(c!==null){ht=c;return}if(l=l.sibling,l!==null){ht=l;return}ht=l=i}while(l!==null);as===0&&(as=5)}function yw(i,l){do{var c=BC(i.alternate,i);if(c!==null){c.flags&=32767,ht=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!l&&(i=i.sibling,i!==null)){ht=i;return}ht=i=c}while(i!==null);as=6,ht=null}function xw(i,l,c,d,p,y,T,I,Y){i.cancelPendingCommit=null;do Hh();while(Ys!==0);if((Ct&6)!==0)throw Error(r(327));if(l!==null){if(l===i.current)throw Error(r(177));if(y=l.lanes|l.childLanes,y|=lp,dl(i,c,y,T,I,Y),i===$t&&(ht=$t=null,wt=0),Wo=l,Oa=i,Qo=c,hg=y,fg=p,ow=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,JC(se,function(){return jw(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=q.T,q.T=null,p=Z.p,Z.p=2,T=Ct,Ct|=4;try{zC(i,l,c)}finally{Ct=T,Z.p=p,q.T=d}}Ys=1,bw(),vw(),ww()}}function bw(){if(Ys===1){Ys=0;var i=Oa,l=Wo,c=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||c){c=q.T,q.T=null;var d=Z.p;Z.p=2;var p=Ct;Ct|=4;try{tw(l,i);var y=kg,T=lb(i.containerInfo),I=y.focusedElem,Y=y.selectionRange;if(T!==I&&I&&I.ownerDocument&&ab(I.ownerDocument.documentElement,I)){if(Y!==null&&sp(I)){var ie=Y.start,ye=Y.end;if(ye===void 0&&(ye=ie),"selectionStart"in I)I.selectionStart=ie,I.selectionEnd=Math.min(ye,I.value.length);else{var _e=I.ownerDocument||document,oe=_e&&_e.defaultView||window;if(oe.getSelection){var ce=oe.getSelection(),st=I.textContent.length,Xe=Math.min(Y.start,st),Dt=Y.end===void 0?Xe:Math.min(Y.end,st);!ce.extend&&Xe>Dt&&(T=Dt,Dt=Xe,Xe=T);var te=ib(I,Xe),W=ib(I,Dt);if(te&&W&&(ce.rangeCount!==1||ce.anchorNode!==te.node||ce.anchorOffset!==te.offset||ce.focusNode!==W.node||ce.focusOffset!==W.offset)){var ne=_e.createRange();ne.setStart(te.node,te.offset),ce.removeAllRanges(),Xe>Dt?(ce.addRange(ne),ce.extend(W.node,W.offset)):(ne.setEnd(W.node,W.offset),ce.addRange(ne))}}}}for(_e=[],ce=I;ce=ce.parentNode;)ce.nodeType===1&&_e.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<_e.length;I++){var ve=_e[I];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}sf=!!Cg,kg=Cg=null}finally{Ct=p,Z.p=d,q.T=c}}i.current=l,Ys=2}}function vw(){if(Ys===2){Ys=0;var i=Oa,l=Wo,c=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||c){c=q.T,q.T=null;var d=Z.p;Z.p=2;var p=Ct;Ct|=4;try{Qv(i,l.alternate,l)}finally{Ct=p,Z.p=d,q.T=c}}Ys=3}}function ww(){if(Ys===4||Ys===3){Ys=0,rt();var i=Oa,l=Wo,c=Qo,d=ow;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Ys=5:(Ys=0,Wo=Oa=null,_w(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(Ta=null),ji(c),l=l.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(Te,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=q.T,p=Z.p,Z.p=2,q.T=null;try{for(var y=i.onRecoverableError,T=0;T<d.length;T++){var I=d[T];y(I.value,{componentStack:I.stack})}}finally{q.T=l,Z.p=p}}(Qo&3)!==0&&Hh(),ii(i),p=i.pendingLanes,(c&4194090)!==0&&(p&42)!==0?i===mg?Pu++:(Pu=0,mg=i):Pu=0,Iu(0)}}function _w(i,l){(i.pooledCacheLanes&=l)===0&&(l=i.pooledCache,l!=null&&(i.pooledCache=null,yu(l)))}function Hh(i){return bw(),vw(),ww(),jw()}function jw(){if(Ys!==5)return!1;var i=Oa,l=hg;hg=0;var c=ji(Qo),d=q.T,p=Z.p;try{Z.p=32>c?32:c,q.T=null,c=fg,fg=null;var y=Oa,T=Qo;if(Ys=0,Wo=Oa=null,Qo=0,(Ct&6)!==0)throw Error(r(331));var I=Ct;if(Ct|=4,aw(y.current),rw(y,y.current,T,c),Ct=I,Iu(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(Te,y)}catch{}return!0}finally{Z.p=p,q.T=d,_w(i,l)}}function Nw(i,l,c){l=Xr(c,l),l=Gp(i.stateNode,l,2),i=wa(i,l,2),i!==null&&(Cr(i,2),ii(i))}function qt(i,l,c){if(i.tag===3)Nw(i,i,c);else for(;l!==null;){if(l.tag===3){Nw(l,i,c);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ta===null||!Ta.has(d))){i=Xr(c,i),c=Cv(2),d=wa(l,c,2),d!==null&&(kv(c,d,l,i),Cr(d,2),ii(d));break}}l=l.return}}function xg(i,l,c){var d=i.pingCache;if(d===null){d=i.pingCache=new VC;var p=new Set;d.set(l,p)}else p=d.get(l),p===void 0&&(p=new Set,d.set(l,p));p.has(c)||(og=!0,p.add(c),i=WC.bind(null,i,l,c),l.then(i,i))}function WC(i,l,c){var d=i.pingCache;d!==null&&d.delete(l),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,$t===i&&(wt&c)===c&&(as===4||as===3&&(wt&62914560)===wt&&300>bt()-dg?(Ct&2)===0&&Xo(i,0):cg|=c,Ko===wt&&(Ko=0)),ii(i)}function Sw(i,l){l===0&&(l=vi()),i=Do(i,l),i!==null&&(Cr(i,l),ii(i))}function QC(i){var l=i.memoizedState,c=0;l!==null&&(c=l.retryLane),Sw(i,c)}function XC(i,l){var c=0;switch(i.tag){case 13:var d=i.stateNode,p=i.memoizedState;p!==null&&(c=p.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(l),Sw(i,c)}function JC(i,l){return Ze(i,l)}var Vh=null,ec=null,bg=!1,Gh=!1,vg=!1,ql=0;function ii(i){i!==ec&&i.next===null&&(ec===null?Vh=ec=i:ec=ec.next=i),Gh=!0,bg||(bg=!0,tk())}function Iu(i,l){if(!vg&&Gh){vg=!0;do for(var c=!1,d=Vh;d!==null;){if(i!==0){var p=d.pendingLanes;if(p===0)var y=0;else{var T=d.suspendedLanes,I=d.pingedLanes;y=(1<<31-pt(42|i)+1)-1,y&=p&~(T&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,kw(d,y))}else y=wt,y=Gr(d,d===$t?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||mr(d,y)||(c=!0,kw(d,y));d=d.next}while(c);vg=!1}}function ek(){Ew()}function Ew(){Gh=bg=!1;var i=0;ql!==0&&(ck()&&(i=ql),ql=0);for(var l=bt(),c=null,d=Vh;d!==null;){var p=d.next,y=Aw(d,l);y===0?(d.next=null,c===null?Vh=p:c.next=p,p===null&&(ec=c)):(c=d,(i!==0||(y&3)!==0)&&(Gh=!0)),d=p}Iu(i)}function Aw(i,l){for(var c=i.suspendedLanes,d=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var T=31-pt(y),I=1<<T,Y=p[T];Y===-1?((I&c)===0||(I&d)!==0)&&(p[T]=Zr(I,l)):Y<=l&&(i.expiredLanes|=I),y&=~I}if(l=$t,c=wt,c=Gr(i,i===l?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===l&&(kt===2||kt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&Ke(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||mr(i,c)){if(l=c&-c,l===i.callbackPriority)return l;switch(d!==null&&Ke(d),ji(c)){case 2:case 8:c=G;break;case 32:c=se;break;case 268435456:c=ke;break;default:c=se}return d=Cw.bind(null,i),c=Ze(c,d),i.callbackPriority=l,i.callbackNode=c,l}return d!==null&&d!==null&&Ke(d),i.callbackPriority=2,i.callbackNode=null,2}function Cw(i,l){if(Ys!==0&&Ys!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Hh()&&i.callbackNode!==c)return null;var d=wt;return d=Gr(i,i===$t?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(uw(i,d,l),Aw(i,bt()),i.callbackNode!=null&&i.callbackNode===c?Cw.bind(null,i):null)}function kw(i,l){if(Hh())return null;uw(i,l,!0)}function tk(){dk(function(){(Ct&6)!==0?Ze(vt,ek):Ew()})}function wg(){return ql===0&&(ql=pr()),ql}function Tw(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:da(""+i)}function Ow(i,l){var c=l.ownerDocument.createElement("input");return c.name=l.name,c.value=l.value,i.id&&c.setAttribute("form",i.id),l.parentNode.insertBefore(c,l),i=new FormData(i),c.parentNode.removeChild(c),i}function sk(i,l,c,d,p){if(l==="submit"&&c&&c.stateNode===p){var y=Tw((p[Ls]||null).action),T=d.submitter;T&&(l=(l=T[Ls]||null)?Tw(l.formAction):T.getAttribute("formAction"),l!==null&&(y=l,T=null));var I=new pe("action","action",null,d,p);i.push({event:I,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ql!==0){var Y=T?Ow(p,T):new FormData(p);Bp(c,{pending:!0,data:Y,method:p.method,action:y},null,Y)}}else typeof y=="function"&&(I.preventDefault(),Y=T?Ow(p,T):new FormData(p),Bp(c,{pending:!0,data:Y,method:p.method,action:y},y,Y))},currentTarget:p}]})}}for(var _g=0;_g<ap.length;_g++){var jg=ap[_g],rk=jg.toLowerCase(),nk=jg[0].toUpperCase()+jg.slice(1);wn(rk,"on"+nk)}wn(ub,"onAnimationEnd"),wn(db,"onAnimationIteration"),wn(hb,"onAnimationStart"),wn("dblclick","onDoubleClick"),wn("focusin","onFocus"),wn("focusout","onBlur"),wn(wC,"onTransitionRun"),wn(_C,"onTransitionStart"),wn(jC,"onTransitionCancel"),wn(fb,"onTransitionEnd"),ls("onMouseEnter",["mouseout","mouseover"]),ls("onMouseLeave",["mouseout","mouseover"]),ls("onPointerEnter",["pointerout","pointerover"]),ls("onPointerLeave",["pointerout","pointerover"]),pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ik=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($u));function Rw(i,l){l=(l&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],p=d.event;d=d.listeners;e:{var y=void 0;if(l)for(var T=d.length-1;0<=T;T--){var I=d[T],Y=I.instance,ie=I.currentTarget;if(I=I.listener,Y!==y&&p.isPropagationStopped())break e;y=I,p.currentTarget=ie;try{y(p)}catch(ye){Mh(ye)}p.currentTarget=null,y=Y}else for(T=0;T<d.length;T++){if(I=d[T],Y=I.instance,ie=I.currentTarget,I=I.listener,Y!==y&&p.isPropagationStopped())break e;y=I,p.currentTarget=ie;try{y(p)}catch(ye){Mh(ye)}p.currentTarget=null,y=Y}}}}function ft(i,l){var c=l[ca];c===void 0&&(c=l[ca]=new Set);var d=i+"__bubble";c.has(d)||(Mw(l,i,2,!1),c.add(d))}function Ng(i,l,c){var d=0;l&&(d|=4),Mw(c,i,d,l)}var Zh="_reactListening"+Math.random().toString(36).slice(2);function Sg(i){if(!i[Zh]){i[Zh]=!0,wo.forEach(function(c){c!=="selectionchange"&&(ik.has(c)||Ng(c,!1,i),Ng(c,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Zh]||(l[Zh]=!0,Ng("selectionchange",!1,l))}}function Mw(i,l,c,d){switch(r_(l)){case 2:var p=Rk;break;case 8:p=Mk;break;default:p=$g}c=p.bind(null,l,c,i),p=void 0,!ma||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(p=!0),d?p!==void 0?i.addEventListener(l,c,{capture:!0,passive:p}):i.addEventListener(l,c,!0):p!==void 0?i.addEventListener(l,c,{passive:p}):i.addEventListener(l,c,!1)}function Eg(i,l,c,d,p){var y=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var I=d.stateNode.containerInfo;if(I===p)break;if(T===4)for(T=d.return;T!==null;){var Y=T.tag;if((Y===3||Y===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;I!==null;){if(T=Zn(I),T===null)return;if(Y=T.tag,Y===5||Y===6||Y===26||Y===27){d=y=T;continue e}I=I.parentNode}}d=d.return}fa(function(){var ie=y,ye=ha(c),_e=[];e:{var oe=mb.get(i);if(oe!==void 0){var ce=pe,st=i;switch(i){case"keypress":if(ga(c)===0)break e;case"keydown":case"keyup":ce=JA;break;case"focusin":st="focus",ce=cs;break;case"focusout":st="blur",ce=cs;break;case"beforeblur":case"afterblur":ce=cs;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=As;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=os;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=sC;break;case ub:case db:case hb:ce=vn;break;case fb:ce=nC;break;case"scroll":case"scrollend":ce=Ve;break;case"wheel":ce=aC;break;case"copy":case"cut":case"paste":ce=oh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Vx;break;case"toggle":case"beforetoggle":ce=oC}var Xe=(l&4)!==0,Dt=!Xe&&(i==="scroll"||i==="scrollend"),te=Xe?oe!==null?oe+"Capture":null:oe;Xe=[];for(var W=ie,ne;W!==null;){var ve=W;if(ne=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||ne===null||te===null||(ve=Qr(W,te),ve!=null&&Xe.push(Uu(W,ve,ne))),Dt)break;W=W.return}0<Xe.length&&(oe=new ce(oe,st,null,c,ye),_e.push({event:oe,listeners:Xe}))}}if((l&7)===0){e:{if(oe=i==="mouseover"||i==="pointerover",ce=i==="mouseout"||i==="pointerout",oe&&c!==bl&&(st=c.relatedTarget||c.fromElement)&&(Zn(st)||st[Gn]))break e;if((ce||oe)&&(oe=ye.window===ye?ye:(oe=ye.ownerDocument)?oe.defaultView||oe.parentWindow:window,ce?(st=c.relatedTarget||c.toElement,ce=ie,st=st?Zn(st):null,st!==null&&(Dt=o(st),Xe=st.tag,st!==Dt||Xe!==5&&Xe!==27&&Xe!==6)&&(st=null)):(ce=null,st=ie),ce!==st)){if(Xe=As,ve="onMouseLeave",te="onMouseEnter",W="mouse",(i==="pointerout"||i==="pointerover")&&(Xe=Vx,ve="onPointerLeave",te="onPointerEnter",W="pointer"),Dt=ce==null?oe:ss(ce),ne=st==null?oe:ss(st),oe=new Xe(ve,W+"leave",ce,c,ye),oe.target=Dt,oe.relatedTarget=ne,ve=null,Zn(ye)===ie&&(Xe=new Xe(te,W+"enter",st,c,ye),Xe.target=ne,Xe.relatedTarget=Dt,ve=Xe),Dt=ve,ce&&st)t:{for(Xe=ce,te=st,W=0,ne=Xe;ne;ne=tc(ne))W++;for(ne=0,ve=te;ve;ve=tc(ve))ne++;for(;0<W-ne;)Xe=tc(Xe),W--;for(;0<ne-W;)te=tc(te),ne--;for(;W--;){if(Xe===te||te!==null&&Xe===te.alternate)break t;Xe=tc(Xe),te=tc(te)}Xe=null}else Xe=null;ce!==null&&Dw(_e,oe,ce,Xe,!1),st!==null&&Dt!==null&&Dw(_e,Dt,st,Xe,!0)}}e:{if(oe=ie?ss(ie):window,ce=oe.nodeName&&oe.nodeName.toLowerCase(),ce==="select"||ce==="input"&&oe.type==="file")var Ie=Jx;else if(Qx(oe))if(eb)Ie=xC;else{Ie=gC;var ct=pC}else ce=oe.nodeName,!ce||ce.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ie&&yr(ie.elementType)&&(Ie=Jx):Ie=yC;if(Ie&&(Ie=Ie(i,ie))){Xx(_e,Ie,c,ye);break e}ct&&ct(i,oe,ie),i==="focusout"&&ie&&oe.type==="number"&&ie.memoizedProps.value!=null&&Ai(oe,"number",oe.value)}switch(ct=ie?ss(ie):window,i){case"focusin":(Qx(ct)||ct.contentEditable==="true")&&(Oo=ct,rp=ie,hu=null);break;case"focusout":hu=rp=Oo=null;break;case"mousedown":np=!0;break;case"contextmenu":case"mouseup":case"dragend":np=!1,ob(_e,c,ye);break;case"selectionchange":if(vC)break;case"keydown":case"keyup":ob(_e,c,ye)}var Ge;if(Jm)e:{switch(i){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else To?Kx(i,c)&&(et="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(et="onCompositionStart");et&&(Gx&&c.locale!=="ko"&&(To||et!=="onCompositionStart"?et==="onCompositionEnd"&&To&&(Ge=pa()):(Or=ye,xr="value"in Or?Or.value:Or.textContent,To=!0)),ct=Yh(ie,et),0<ct.length&&(et=new wl(et,i,null,c,ye),_e.push({event:et,listeners:ct}),Ge?et.data=Ge:(Ge=Wx(c),Ge!==null&&(et.data=Ge)))),(Ge=uC?dC(i,c):hC(i,c))&&(et=Yh(ie,"onBeforeInput"),0<et.length&&(ct=new wl("onBeforeInput","beforeinput",null,c,ye),_e.push({event:ct,listeners:et}),ct.data=Ge)),sk(_e,i,ie,c,ye)}Rw(_e,l)})}function Uu(i,l,c){return{instance:i,listener:l,currentTarget:c}}function Yh(i,l){for(var c=l+"Capture",d=[];i!==null;){var p=i,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Qr(i,c),p!=null&&d.unshift(Uu(i,p,y)),p=Qr(i,l),p!=null&&d.push(Uu(i,p,y))),i.tag===3)return d;i=i.return}return[]}function tc(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Dw(i,l,c,d,p){for(var y=l._reactName,T=[];c!==null&&c!==d;){var I=c,Y=I.alternate,ie=I.stateNode;if(I=I.tag,Y!==null&&Y===d)break;I!==5&&I!==26&&I!==27||ie===null||(Y=ie,p?(ie=Qr(c,y),ie!=null&&T.unshift(Uu(c,ie,Y))):p||(ie=Qr(c,y),ie!=null&&T.push(Uu(c,ie,Y)))),c=c.return}T.length!==0&&i.push({event:l,listeners:T})}var ak=/\r\n?/g,lk=/\u0000|\uFFFD/g;function Lw(i){return(typeof i=="string"?i:""+i).replace(ak,`
`).replace(lk,"")}function qw(i,l){return l=Lw(l),Lw(i)===l}function Kh(){}function Mt(i,l,c,d,p,y){switch(c){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||qs(i,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&qs(i,""+d);break;case"className":gn(i,"class",d);break;case"tabIndex":gn(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":gn(i,c,d);break;case"style":Co(i,d,y);break;case"data":if(l!=="object"){gn(i,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=da(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(l!=="input"&&Mt(i,l,"name",p.name,p,null),Mt(i,l,"formEncType",p.formEncType,p,null),Mt(i,l,"formMethod",p.formMethod,p,null),Mt(i,l,"formTarget",p.formTarget,p,null)):(Mt(i,l,"encType",p.encType,p,null),Mt(i,l,"method",p.method,p,null),Mt(i,l,"target",p.target,p,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=da(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=Kh);break;case"onScroll":d!=null&&ft("scroll",i);break;case"onScrollEnd":d!=null&&ft("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=da(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":ft("beforetoggle",i),ft("toggle",i),ua(i,"popover",d);break;case"xlinkActuate":gr(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":gr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":gr(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":gr(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":gr(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":gr(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":gr(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":gr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":gr(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ua(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=au.get(c)||c,ua(i,c,d))}}function Ag(i,l,c,d,p,y){switch(c){case"style":Co(i,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof d=="string"?qs(i,d):(typeof d=="number"||typeof d=="bigint")&&qs(i,""+d);break;case"onScroll":d!=null&&ft("scroll",i);break;case"onScrollEnd":d!=null&&ft("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Kh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_o.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(p=c.endsWith("Capture"),l=c.slice(2,p?c.length-7:void 0),y=i[Ls]||null,y=y!=null?y[c]:null,typeof y=="function"&&i.removeEventListener(l,y,p),typeof d=="function")){typeof y!="function"&&y!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(l,d,p);break e}c in i?i[c]=d:d===!0?i.setAttribute(c,""):ua(i,c,d)}}}function Ks(i,l,c){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ft("error",i),ft("load",i);var d=!1,p=!1,y;for(y in c)if(c.hasOwnProperty(y)){var T=c[y];if(T!=null)switch(y){case"src":d=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Mt(i,l,y,T,c,null)}}p&&Mt(i,l,"srcSet",c.srcSet,c,null),d&&Mt(i,l,"src",c.src,c,null);return;case"input":ft("invalid",i);var I=y=T=p=null,Y=null,ie=null;for(d in c)if(c.hasOwnProperty(d)){var ye=c[d];if(ye!=null)switch(d){case"name":p=ye;break;case"type":T=ye;break;case"checked":Y=ye;break;case"defaultChecked":ie=ye;break;case"value":y=ye;break;case"defaultValue":I=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,l));break;default:Mt(i,l,d,ye,c,null)}}Eo(i,y,I,Y,ie,T,p,!1),Kr(i);return;case"select":ft("invalid",i),d=T=y=null;for(p in c)if(c.hasOwnProperty(p)&&(I=c[p],I!=null))switch(p){case"value":y=I;break;case"defaultValue":T=I;break;case"multiple":d=I;default:Mt(i,l,p,I,c,null)}l=y,c=T,i.multiple=!!d,l!=null?Qn(i,!!d,l,!1):c!=null&&Qn(i,!!d,c,!0);return;case"textarea":ft("invalid",i),y=p=d=null;for(T in c)if(c.hasOwnProperty(T)&&(I=c[T],I!=null))switch(T){case"value":d=I;break;case"defaultValue":p=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:Mt(i,l,T,I,c,null)}Xn(i,d,p,y),Kr(i);return;case"option":for(Y in c)if(c.hasOwnProperty(Y)&&(d=c[Y],d!=null))switch(Y){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Mt(i,l,Y,d,c,null)}return;case"dialog":ft("beforetoggle",i),ft("toggle",i),ft("cancel",i),ft("close",i);break;case"iframe":case"object":ft("load",i);break;case"video":case"audio":for(d=0;d<$u.length;d++)ft($u[d],i);break;case"image":ft("error",i),ft("load",i);break;case"details":ft("toggle",i);break;case"embed":case"source":case"link":ft("error",i),ft("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in c)if(c.hasOwnProperty(ie)&&(d=c[ie],d!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Mt(i,l,ie,d,c,null)}return;default:if(yr(l)){for(ye in c)c.hasOwnProperty(ye)&&(d=c[ye],d!==void 0&&Ag(i,l,ye,d,c,void 0));return}}for(I in c)c.hasOwnProperty(I)&&(d=c[I],d!=null&&Mt(i,l,I,d,c,null))}function ok(i,l,c,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,T=null,I=null,Y=null,ie=null,ye=null;for(ce in c){var _e=c[ce];if(c.hasOwnProperty(ce)&&_e!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":Y=_e;default:d.hasOwnProperty(ce)||Mt(i,l,ce,null,d,_e)}}for(var oe in d){var ce=d[oe];if(_e=c[oe],d.hasOwnProperty(oe)&&(ce!=null||_e!=null))switch(oe){case"type":y=ce;break;case"name":p=ce;break;case"checked":ie=ce;break;case"defaultChecked":ye=ce;break;case"value":T=ce;break;case"defaultValue":I=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,l));break;default:ce!==_e&&Mt(i,l,oe,ce,d,_e)}}xl(i,T,I,Y,ie,ye,y,p);return;case"select":ce=T=I=oe=null;for(y in c)if(Y=c[y],c.hasOwnProperty(y)&&Y!=null)switch(y){case"value":break;case"multiple":ce=Y;default:d.hasOwnProperty(y)||Mt(i,l,y,null,d,Y)}for(p in d)if(y=d[p],Y=c[p],d.hasOwnProperty(p)&&(y!=null||Y!=null))switch(p){case"value":oe=y;break;case"defaultValue":I=y;break;case"multiple":T=y;default:y!==Y&&Mt(i,l,p,y,d,Y)}l=I,c=T,d=ce,oe!=null?Qn(i,!!c,oe,!1):!!d!=!!c&&(l!=null?Qn(i,!!c,l,!0):Qn(i,!!c,c?[]:"",!1));return;case"textarea":ce=oe=null;for(I in c)if(p=c[I],c.hasOwnProperty(I)&&p!=null&&!d.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Mt(i,l,I,null,d,p)}for(T in d)if(p=d[T],y=c[T],d.hasOwnProperty(T)&&(p!=null||y!=null))switch(T){case"value":oe=p;break;case"defaultValue":ce=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==y&&Mt(i,l,T,p,d,y)}Ao(i,oe,ce);return;case"option":for(var st in c)if(oe=c[st],c.hasOwnProperty(st)&&oe!=null&&!d.hasOwnProperty(st))switch(st){case"selected":i.selected=!1;break;default:Mt(i,l,st,null,d,oe)}for(Y in d)if(oe=d[Y],ce=c[Y],d.hasOwnProperty(Y)&&oe!==ce&&(oe!=null||ce!=null))switch(Y){case"selected":i.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:Mt(i,l,Y,oe,d,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in c)oe=c[Xe],c.hasOwnProperty(Xe)&&oe!=null&&!d.hasOwnProperty(Xe)&&Mt(i,l,Xe,null,d,oe);for(ie in d)if(oe=d[ie],ce=c[ie],d.hasOwnProperty(ie)&&oe!==ce&&(oe!=null||ce!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,l));break;default:Mt(i,l,ie,oe,d,ce)}return;default:if(yr(l)){for(var Dt in c)oe=c[Dt],c.hasOwnProperty(Dt)&&oe!==void 0&&!d.hasOwnProperty(Dt)&&Ag(i,l,Dt,void 0,d,oe);for(ye in d)oe=d[ye],ce=c[ye],!d.hasOwnProperty(ye)||oe===ce||oe===void 0&&ce===void 0||Ag(i,l,ye,oe,d,ce);return}}for(var te in c)oe=c[te],c.hasOwnProperty(te)&&oe!=null&&!d.hasOwnProperty(te)&&Mt(i,l,te,null,d,oe);for(_e in d)oe=d[_e],ce=c[_e],!d.hasOwnProperty(_e)||oe===ce||oe==null&&ce==null||Mt(i,l,_e,oe,d,ce)}var Cg=null,kg=null;function Wh(i){return i.nodeType===9?i:i.ownerDocument}function Pw(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Iw(i,l){if(i===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&l==="foreignObject"?0:i}function Tg(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Og=null;function ck(){var i=window.event;return i&&i.type==="popstate"?i===Og?!1:(Og=i,!0):(Og=null,!1)}var $w=typeof setTimeout=="function"?setTimeout:void 0,uk=typeof clearTimeout=="function"?clearTimeout:void 0,Uw=typeof Promise=="function"?Promise:void 0,dk=typeof queueMicrotask=="function"?queueMicrotask:typeof Uw<"u"?function(i){return Uw.resolve(null).then(i).catch(hk)}:$w;function hk(i){setTimeout(function(){throw i})}function Ma(i){return i==="head"}function Bw(i,l){var c=l,d=0,p=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(0<d&&8>d){c=d;var T=i.ownerDocument;if(c&1&&Bu(T.documentElement),c&2&&Bu(T.body),c&4)for(c=T.head,Bu(c),T=c.firstChild;T;){var I=T.nextSibling,Y=T.nodeName;T[Ni]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&T.rel.toLowerCase()==="stylesheet"||c.removeChild(T),T=I}}if(p===0){i.removeChild(y),Ku(l);return}p--}else c==="$"||c==="$?"||c==="$!"?p++:d=c.charCodeAt(0)-48;else d=0;c=y}while(c);Ku(l)}function Rg(i){var l=i.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var c=l;switch(l=l.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Rg(c),fl(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function fk(i,l,c,d){for(;i.nodeType===1;){var p=c;if(i.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Ni])switch(l){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(l==="input"&&i.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=jn(i.nextSibling),i===null)break}return null}function mk(i,l,c){if(l==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=jn(i.nextSibling),i===null))return null;return i}function Mg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function pk(i,l){var c=i.ownerDocument;if(i.data!=="$?"||c.readyState==="complete")l();else{var d=function(){l(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function jn(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return i}var Dg=null;function zw(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(l===0)return i;l--}else c==="/$"&&l++}i=i.previousSibling}return null}function Fw(i,l,c){switch(l=Wh(c),i){case"html":if(i=l.documentElement,!i)throw Error(r(452));return i;case"head":if(i=l.head,!i)throw Error(r(453));return i;case"body":if(i=l.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Bu(i){for(var l=i.attributes;l.length;)i.removeAttributeNode(l[0]);fl(i)}var nn=new Map,Hw=new Set;function Qh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var zi=Z.d;Z.d={f:gk,r:yk,D:xk,C:bk,L:vk,m:wk,X:jk,S:_k,M:Nk};function gk(){var i=zi.f(),l=zh();return i||l}function yk(i){var l=Yn(i);l!==null&&l.tag===5&&l.type==="form"?uv(l):zi.r(i)}var sc=typeof document>"u"?null:document;function Vw(i,l,c){var d=sc;if(d&&typeof l=="string"&&l){var p=Js(l);p='link[rel="'+i+'"][href="'+p+'"]',typeof c=="string"&&(p+='[crossorigin="'+c+'"]'),Hw.has(p)||(Hw.add(p),i={rel:i,crossOrigin:c,href:l},d.querySelector(p)===null&&(l=d.createElement("link"),Ks(l,"link",i),rs(l),d.head.appendChild(l)))}}function xk(i){zi.D(i),Vw("dns-prefetch",i,null)}function bk(i,l){zi.C(i,l),Vw("preconnect",i,l)}function vk(i,l,c){zi.L(i,l,c);var d=sc;if(d&&i&&l){var p='link[rel="preload"][as="'+Js(l)+'"]';l==="image"&&c&&c.imageSrcSet?(p+='[imagesrcset="'+Js(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(p+='[imagesizes="'+Js(c.imageSizes)+'"]')):p+='[href="'+Js(i)+'"]';var y=p;switch(l){case"style":y=rc(i);break;case"script":y=nc(i)}nn.has(y)||(i=g({rel:"preload",href:l==="image"&&c&&c.imageSrcSet?void 0:i,as:l},c),nn.set(y,i),d.querySelector(p)!==null||l==="style"&&d.querySelector(zu(y))||l==="script"&&d.querySelector(Fu(y))||(l=d.createElement("link"),Ks(l,"link",i),rs(l),d.head.appendChild(l)))}}function wk(i,l){zi.m(i,l);var c=sc;if(c&&i){var d=l&&typeof l.as=="string"?l.as:"script",p='link[rel="modulepreload"][as="'+Js(d)+'"][href="'+Js(i)+'"]',y=p;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=nc(i)}if(!nn.has(y)&&(i=g({rel:"modulepreload",href:i},l),nn.set(y,i),c.querySelector(p)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Fu(y)))return}d=c.createElement("link"),Ks(d,"link",i),rs(d),c.head.appendChild(d)}}}function _k(i,l,c){zi.S(i,l,c);var d=sc;if(d&&i){var p=Kn(d).hoistableStyles,y=rc(i);l=l||"default";var T=p.get(y);if(!T){var I={loading:0,preload:null};if(T=d.querySelector(zu(y)))I.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":l},c),(c=nn.get(y))&&Lg(i,c);var Y=T=d.createElement("link");rs(Y),Ks(Y,"link",i),Y._p=new Promise(function(ie,ye){Y.onload=ie,Y.onerror=ye}),Y.addEventListener("load",function(){I.loading|=1}),Y.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Xh(T,l,d)}T={type:"stylesheet",instance:T,count:1,state:I},p.set(y,T)}}}function jk(i,l){zi.X(i,l);var c=sc;if(c&&i){var d=Kn(c).hoistableScripts,p=nc(i),y=d.get(p);y||(y=c.querySelector(Fu(p)),y||(i=g({src:i,async:!0},l),(l=nn.get(p))&&qg(i,l),y=c.createElement("script"),rs(y),Ks(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(p,y))}}function Nk(i,l){zi.M(i,l);var c=sc;if(c&&i){var d=Kn(c).hoistableScripts,p=nc(i),y=d.get(p);y||(y=c.querySelector(Fu(p)),y||(i=g({src:i,async:!0,type:"module"},l),(l=nn.get(p))&&qg(i,l),y=c.createElement("script"),rs(y),Ks(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(p,y))}}function Gw(i,l,c,d){var p=(p=Ce.current)?Qh(p):null;if(!p)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(l=rc(c.href),c=Kn(p).hoistableStyles,d=c.get(l),d||(d={type:"style",instance:null,count:0,state:null},c.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=rc(c.href);var y=Kn(p).hoistableStyles,T=y.get(i);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,T),(y=p.querySelector(zu(i)))&&!y._p&&(T.instance=y,T.state.loading=5),nn.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},nn.set(i,c),y||Sk(p,i,c,T.state))),l&&d===null)throw Error(r(528,""));return T}if(l&&d!==null)throw Error(r(529,""));return null;case"script":return l=c.async,c=c.src,typeof c=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=nc(c),c=Kn(p).hoistableScripts,d=c.get(l),d||(d={type:"script",instance:null,count:0,state:null},c.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function rc(i){return'href="'+Js(i)+'"'}function zu(i){return'link[rel="stylesheet"]['+i+"]"}function Zw(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function Sk(i,l,c,d){i.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=i.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),Ks(l,"link",c),rs(l),i.head.appendChild(l))}function nc(i){return'[src="'+Js(i)+'"]'}function Fu(i){return"script[async]"+i}function Yw(i,l,c){if(l.count++,l.instance===null)switch(l.type){case"style":var d=i.querySelector('style[data-href~="'+Js(c.href)+'"]');if(d)return l.instance=d,rs(d),d;var p=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),rs(d),Ks(d,"style",p),Xh(d,c.precedence,i),l.instance=d;case"stylesheet":p=rc(c.href);var y=i.querySelector(zu(p));if(y)return l.state.loading|=4,l.instance=y,rs(y),y;d=Zw(c),(p=nn.get(p))&&Lg(d,p),y=(i.ownerDocument||i).createElement("link"),rs(y);var T=y;return T._p=new Promise(function(I,Y){T.onload=I,T.onerror=Y}),Ks(y,"link",d),l.state.loading|=4,Xh(y,c.precedence,i),l.instance=y;case"script":return y=nc(c.src),(p=i.querySelector(Fu(y)))?(l.instance=p,rs(p),p):(d=c,(p=nn.get(y))&&(d=g({},c),qg(d,p)),i=i.ownerDocument||i,p=i.createElement("script"),rs(p),Ks(p,"link",d),i.head.appendChild(p),l.instance=p);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,Xh(d,c.precedence,i));return l.instance}function Xh(i,l,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=d.length?d[d.length-1]:null,y=p,T=0;T<d.length;T++){var I=d[T];if(I.dataset.precedence===l)y=I;else if(y!==p)break}y?y.parentNode.insertBefore(i,y.nextSibling):(l=c.nodeType===9?c.head:c,l.insertBefore(i,l.firstChild))}function Lg(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.title==null&&(i.title=l.title)}function qg(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.integrity==null&&(i.integrity=l.integrity)}var Jh=null;function Kw(i,l,c){if(Jh===null){var d=new Map,p=Jh=new Map;p.set(c,d)}else p=Jh,d=p.get(c),d||(d=new Map,p.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),p=0;p<c.length;p++){var y=c[p];if(!(y[Ni]||y[xs]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(l)||"";T=i+T;var I=d.get(T);I?I.push(y):d.set(T,[y])}}return d}function Ww(i,l,c){i=i.ownerDocument||i,i.head.insertBefore(c,l==="title"?i.querySelector("head > title"):null)}function Ek(i,l,c){if(c===1||l.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return i=l.disabled,typeof l.precedence=="string"&&i==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Qw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Hu=null;function Ak(){}function Ck(i,l,c){if(Hu===null)throw Error(r(475));var d=Hu;if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=rc(c.href),y=i.querySelector(zu(p));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(d.count++,d=ef.bind(d),i.then(d,d)),l.state.loading|=4,l.instance=y,rs(y);return}y=i.ownerDocument||i,c=Zw(c),(p=nn.get(p))&&Lg(c,p),y=y.createElement("link"),rs(y);var T=y;T._p=new Promise(function(I,Y){T.onload=I,T.onerror=Y}),Ks(y,"link",c),l.instance=y}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(d.count++,l=ef.bind(d),i.addEventListener("load",l),i.addEventListener("error",l))}}function kk(){if(Hu===null)throw Error(r(475));var i=Hu;return i.stylesheets&&i.count===0&&Pg(i,i.stylesheets),0<i.count?function(l){var c=setTimeout(function(){if(i.stylesheets&&Pg(i,i.stylesheets),i.unsuspend){var d=i.unsuspend;i.unsuspend=null,d()}},6e4);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(c)}}:null}function ef(){if(this.count--,this.count===0){if(this.stylesheets)Pg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var tf=null;function Pg(i,l){i.stylesheets=null,i.unsuspend!==null&&(i.count++,tf=new Map,l.forEach(Tk,i),tf=null,ef.call(i))}function Tk(i,l){if(!(l.state.loading&4)){var c=tf.get(i);if(c)var d=c.get(null);else{c=new Map,tf.set(i,c);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var T=p[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),d=T)}d&&c.set(null,d)}p=l.instance,T=p.getAttribute("data-precedence"),y=c.get(T)||d,y===d&&c.set(null,p),c.set(T,p),this.count++,d=ef.bind(this),p.addEventListener("load",d),p.addEventListener("error",d),y?y.parentNode.insertBefore(p,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),l.state.loading|=4}}var Vu={$$typeof:O,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function Ok(i,l,c,d,p,y,T,I){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.hiddenUpdates=wi(null),this.identifierPrefix=d,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function Xw(i,l,c,d,p,y,T,I,Y,ie,ye,_e){return i=new Ok(i,l,c,T,I,Y,ie,_e),l=1,y===!0&&(l|=24),y=Mr(3,null,null,l),i.current=y,y.stateNode=i,l=xp(),l.refCount++,i.pooledCache=l,l.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:l},_p(y),i}function Jw(i){return i?(i=Lo,i):Lo}function e_(i,l,c,d,p,y){p=Jw(p),d.context===null?d.context=p:d.pendingContext=p,d=va(l),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=wa(i,d,l),c!==null&&(Ir(c,i,l),wu(c,i,l))}function t_(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<l?c:l}}function Ig(i,l){t_(i,l),(i=i.alternate)&&t_(i,l)}function s_(i){if(i.tag===13){var l=Do(i,67108864);l!==null&&Ir(l,i,67108864),Ig(i,67108864)}}var sf=!0;function Rk(i,l,c,d){var p=q.T;q.T=null;var y=Z.p;try{Z.p=2,$g(i,l,c,d)}finally{Z.p=y,q.T=p}}function Mk(i,l,c,d){var p=q.T;q.T=null;var y=Z.p;try{Z.p=8,$g(i,l,c,d)}finally{Z.p=y,q.T=p}}function $g(i,l,c,d){if(sf){var p=Ug(d);if(p===null)Eg(i,l,d,rf,c),n_(i,d);else if(Lk(p,i,l,c,d))d.stopPropagation();else if(n_(i,d),l&4&&-1<Dk.indexOf(i)){for(;p!==null;){var y=Yn(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=Qs(y.pendingLanes);if(T!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;T;){var Y=1<<31-pt(T);I.entanglements[1]|=Y,T&=~Y}ii(y),(Ct&6)===0&&(Uh=bt()+500,Iu(0))}}break;case 13:I=Do(y,2),I!==null&&Ir(I,y,2),zh(),Ig(y,2)}if(y=Ug(d),y===null&&Eg(i,l,d,rf,c),y===p)break;p=y}p!==null&&d.stopPropagation()}else Eg(i,l,d,null,c)}}function Ug(i){return i=ha(i),Bg(i)}var rf=null;function Bg(i){if(rf=null,i=Zn(i),i!==null){var l=o(i);if(l===null)i=null;else{var c=l.tag;if(c===13){if(i=u(l),i!==null)return i;i=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null)}}return rf=i,null}function r_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ut()){case vt:return 2;case G:return 8;case se:case he:return 32;case ke:return 268435456;default:return 32}default:return 32}}var zg=!1,Da=null,La=null,qa=null,Gu=new Map,Zu=new Map,Pa=[],Dk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n_(i,l){switch(i){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":Gu.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zu.delete(l.pointerId)}}function Yu(i,l,c,d,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:l,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},l!==null&&(l=Yn(l),l!==null&&s_(l)),i):(i.eventSystemFlags|=d,l=i.targetContainers,p!==null&&l.indexOf(p)===-1&&l.push(p),i)}function Lk(i,l,c,d,p){switch(l){case"focusin":return Da=Yu(Da,i,l,c,d,p),!0;case"dragenter":return La=Yu(La,i,l,c,d,p),!0;case"mouseover":return qa=Yu(qa,i,l,c,d,p),!0;case"pointerover":var y=p.pointerId;return Gu.set(y,Yu(Gu.get(y)||null,i,l,c,d,p)),!0;case"gotpointercapture":return y=p.pointerId,Zu.set(y,Yu(Zu.get(y)||null,i,l,c,d,p)),!0}return!1}function i_(i){var l=Zn(i.target);if(l!==null){var c=o(l);if(c!==null){if(l=c.tag,l===13){if(l=u(c),l!==null){i.blockedOn=l,bo(i.priority,function(){if(c.tag===13){var d=Pr();d=_i(d);var p=Do(c,d);p!==null&&Ir(p,c,d),Ig(c,d)}});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function nf(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var c=Ug(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);bl=d,c.target.dispatchEvent(d),bl=null}else return l=Yn(c),l!==null&&s_(l),i.blockedOn=c,!1;l.shift()}return!0}function a_(i,l,c){nf(i)&&c.delete(l)}function qk(){zg=!1,Da!==null&&nf(Da)&&(Da=null),La!==null&&nf(La)&&(La=null),qa!==null&&nf(qa)&&(qa=null),Gu.forEach(a_),Zu.forEach(a_)}function af(i,l){i.blockedOn===l&&(i.blockedOn=null,zg||(zg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,qk)))}var lf=null;function l_(i){lf!==i&&(lf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){lf===i&&(lf=null);for(var l=0;l<i.length;l+=3){var c=i[l],d=i[l+1],p=i[l+2];if(typeof d!="function"){if(Bg(d||c)===null)continue;break}var y=Yn(c);y!==null&&(i.splice(l,3),l-=3,Bp(y,{pending:!0,data:p,method:c.method,action:d},d,p))}}))}function Ku(i){function l(Y){return af(Y,i)}Da!==null&&af(Da,i),La!==null&&af(La,i),qa!==null&&af(qa,i),Gu.forEach(l),Zu.forEach(l);for(var c=0;c<Pa.length;c++){var d=Pa[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Pa.length&&(c=Pa[0],c.blockedOn===null);)i_(c),c.blockedOn===null&&Pa.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var p=c[d],y=c[d+1],T=p[Ls]||null;if(typeof y=="function")T||l_(c);else if(T){var I=null;if(y&&y.hasAttribute("formAction")){if(p=y,T=y[Ls]||null)I=T.formAction;else if(Bg(p)!==null)continue}else I=T.action;typeof I=="function"?c[d+1]=I:(c.splice(d,3),d-=3),l_(c)}}}function Fg(i){this._internalRoot=i}of.prototype.render=Fg.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(r(409));var c=l.current,d=Pr();e_(c,d,i,l,null,null)},of.prototype.unmount=Fg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;e_(i.current,2,null,i,null,null),zh(),l[Gn]=null}};function of(i){this._internalRoot=i}of.prototype.unstable_scheduleHydration=function(i){if(i){var l=mn();i={blockedOn:null,target:i,priority:l};for(var c=0;c<Pa.length&&l!==0&&l<Pa[c].priority;c++);Pa.splice(c,0,i),c===0&&i_(i)}};var o_=e.version;if(o_!=="19.1.1")throw Error(r(527,o_,"19.1.1"));Z.findDOMNode=function(i){var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(l),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var Pk={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cf.isDisabled&&cf.supportsFiber)try{Te=cf.inject(Pk),Pe=cf}catch{}}return Qu.createRoot=function(i,l){if(!a(i))throw Error(r(299));var c=!1,d="",p=Nv,y=Sv,T=Ev,I=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(y=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(I=l.unstable_transitionCallbacks)),l=Xw(i,1,!1,null,null,c,d,p,y,T,I,null),i[Gn]=l.current,Sg(i),new Fg(l)},Qu.hydrateRoot=function(i,l,c){if(!a(i))throw Error(r(299));var d=!1,p="",y=Nv,T=Sv,I=Ev,Y=null,ie=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(I=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(Y=c.unstable_transitionCallbacks),c.formState!==void 0&&(ie=c.formState)),l=Xw(i,1,!0,l,c??null,d,p,y,T,I,Y,ie),l.context=Jw(null),c=l.current,d=Pr(),d=_i(d),p=va(d),p.callback=null,wa(c,p,d),c=d,l.current.lanes=c,Cr(l,c),ii(l),i[Gn]=l.current,Sg(i),new of(l)},Qu.version="19.1.1",Qu}var x_;function Kk(){if(x_)return Vg.exports;x_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Vg.exports=Yk(),Vg.exports}var Wk=Kk(),M=My();const Hs=qd(M);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var b_="popstate";function Qk(t={}){function e(r,a){let{pathname:o,search:u,hash:h}=r.location;return L0("",{pathname:o,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(r,a){return typeof a=="string"?a:wd(a)}return Jk(e,s,null,t)}function Zt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Pn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Xk(){return Math.random().toString(36).substring(2,10)}function v_(t,e){return{usr:t.state,key:t.key,idx:e}}function L0(t,e,s=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Uc(e):e,state:s,key:e&&e.key||r||Xk()}}function wd({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Uc(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Jk(t,e,s,r={}){let{window:a=document.defaultView,v5Compat:o=!1}=r,u=a.history,h="POP",f=null,m=g();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function g(){return(u.state||{idx:null}).idx}function x(){h="POP";let w=g(),E=w==null?null:w-m;m=w,f&&f({action:h,location:N.location,delta:E})}function v(w,E){h="PUSH";let A=L0(N.location,w,E);m=g()+1;let O=v_(A,m),F=N.createHref(A);try{u.pushState(O,"",F)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(F)}o&&f&&f({action:h,location:N.location,delta:1})}function _(w,E){h="REPLACE";let A=L0(N.location,w,E);m=g();let O=v_(A,m),F=N.createHref(A);u.replaceState(O,"",F),o&&f&&f({action:h,location:N.location,delta:0})}function b(w){return eT(w)}let N={get action(){return h},get location(){return t(a,u)},listen(w){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(b_,x),f=w,()=>{a.removeEventListener(b_,x),f=null}},createHref(w){return e(a,w)},createURL:b,encodeLocation(w){let E=b(w);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:_,go(w){return u.go(w)}};return N}function eT(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Zt(s,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:wd(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=s+r),new URL(r,s)}function q2(t,e,s="/"){return tT(t,e,s,!1)}function tT(t,e,s,r){let a=typeof e=="string"?Uc(e):e,o=ea(a.pathname||"/",s);if(o==null)return null;let u=P2(t);sT(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let m=fT(o);h=dT(u[f],m,r)}return h}function P2(t,e=[],s=[],r=""){let a=(o,u,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};f.relativePath.startsWith("/")&&(Zt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let m=Wi([r,f.relativePath]),g=s.concat(f);o.children&&o.children.length>0&&(Zt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),P2(o.children,e,g,m)),!(o.path==null&&!o.index)&&e.push({path:m,score:cT(m,o.index),routesMeta:g})};return t.forEach((o,u)=>{if(o.path===""||!o.path?.includes("?"))a(o,u);else for(let h of I2(o.path))a(o,u,h)}),e}function I2(t){let e=t.split("/");if(e.length===0)return[];let[s,...r]=e,a=s.endsWith("?"),o=s.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let u=I2(r.join("/")),h=[];return h.push(...u.map(f=>f===""?o:[o,f].join("/"))),a&&h.push(...u),h.map(f=>t.startsWith("/")&&f===""?"/":f)}function sT(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:uT(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}var rT=/^:[\w-]+$/,nT=3,iT=2,aT=1,lT=10,oT=-2,w_=t=>t==="*";function cT(t,e){let s=t.split("/"),r=s.length;return s.some(w_)&&(r+=oT),e&&(r+=iT),s.filter(a=>!w_(a)).reduce((a,o)=>a+(rT.test(o)?nT:o===""?aT:lT),r)}function uT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,a)=>r===e[a])?t[t.length-1]-e[e.length-1]:0}function dT(t,e,s=!1){let{routesMeta:r}=t,a={},o="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],m=h===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",x=Zf({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},g),v=f.route;if(!x&&m&&s&&!r[r.length-1].route.index&&(x=Zf({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!x)return null;Object.assign(a,x.params),u.push({params:a,pathname:Wi([o,x.pathname]),pathnameBase:yT(Wi([o,x.pathnameBase])),route:v}),x.pathnameBase!=="/"&&(o=Wi([o,x.pathnameBase]))}return u}function Zf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=hT(t.path,t.caseSensitive,t.end),a=e.match(s);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:x},v)=>{if(g==="*"){let b=h[v]||"";u=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const _=h[v];return x&&!_?m[g]=void 0:m[g]=(_||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:u,pattern:t}}function hT(t,e=!1,s=!0){Pn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function fT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ea(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function mT(t,e="/"){let{pathname:s,search:r="",hash:a=""}=typeof t=="string"?Uc(t):t;return{pathname:s?s.startsWith("/")?s:pT(s,e):e,search:xT(r),hash:bT(a)}}function pT(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function Wg(t,e,s,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gT(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Dy(t){let e=gT(t);return e.map((s,r)=>r===e.length-1?s.pathname:s.pathnameBase)}function Ly(t,e,s,r=!1){let a;typeof t=="string"?a=Uc(t):(a={...t},Zt(!a.pathname||!a.pathname.includes("?"),Wg("?","pathname","search",a)),Zt(!a.pathname||!a.pathname.includes("#"),Wg("#","pathname","hash",a)),Zt(!a.search||!a.search.includes("#"),Wg("#","search","hash",a)));let o=t===""||a.pathname==="",u=o?"/":a.pathname,h;if(u==null)h=s;else{let x=e.length-1;if(!r&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),x-=1;a.pathname=v.join("/")}h=x>=0?e[x]:"/"}let f=mT(a,h),m=u&&u!=="/"&&u.endsWith("/"),g=(o||u===".")&&s.endsWith("/");return!f.pathname.endsWith("/")&&(m||g)&&(f.pathname+="/"),f}var Wi=t=>t.join("/").replace(/\/\/+/g,"/"),yT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,bT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function vT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var $2=["POST","PUT","PATCH","DELETE"];new Set($2);var wT=["GET",...$2];new Set(wT);var Bc=M.createContext(null);Bc.displayName="DataRouter";var _m=M.createContext(null);_m.displayName="DataRouterState";M.createContext(!1);var U2=M.createContext({isTransitioning:!1});U2.displayName="ViewTransition";var _T=M.createContext(new Map);_T.displayName="Fetchers";var jT=M.createContext(null);jT.displayName="Await";var $n=M.createContext(null);$n.displayName="Navigation";var Pd=M.createContext(null);Pd.displayName="Location";var Un=M.createContext({outlet:null,matches:[],isDataRoute:!1});Un.displayName="Route";var qy=M.createContext(null);qy.displayName="RouteError";function NT(t,{relative:e}={}){Zt(zc(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=M.useContext($n),{hash:a,pathname:o,search:u}=Id(t,{relative:e}),h=o;return s!=="/"&&(h=o==="/"?s:Wi([s,o])),r.createHref({pathname:h,search:u,hash:a})}function zc(){return M.useContext(Pd)!=null}function il(){return Zt(zc(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Pd).location}var B2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function z2(t){M.useContext($n).static||M.useLayoutEffect(t)}function Ns(){let{isDataRoute:t}=M.useContext(Un);return t?IT():ST()}function ST(){Zt(zc(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(Bc),{basename:e,navigator:s}=M.useContext($n),{matches:r}=M.useContext(Un),{pathname:a}=il(),o=JSON.stringify(Dy(r)),u=M.useRef(!1);return z2(()=>{u.current=!0}),M.useCallback((f,m={})=>{if(Pn(u.current,B2),!u.current)return;if(typeof f=="number"){s.go(f);return}let g=Ly(f,JSON.parse(o),a,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Wi([e,g.pathname])),(m.replace?s.replace:s.push)(g,m.state,m)},[e,s,o,a,t])}M.createContext(null);function ET(){let{matches:t}=M.useContext(Un),e=t[t.length-1];return e?e.params:{}}function Id(t,{relative:e}={}){let{matches:s}=M.useContext(Un),{pathname:r}=il(),a=JSON.stringify(Dy(s));return M.useMemo(()=>Ly(t,JSON.parse(a),r,e==="path"),[t,a,r,e])}function AT(t,e){return F2(t,e)}function F2(t,e,s,r){Zt(zc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=M.useContext($n),{matches:o}=M.useContext(Un),u=o[o.length-1],h=u?u.params:{},f=u?u.pathname:"/",m=u?u.pathnameBase:"/",g=u&&u.route;{let E=g&&g.path||"";H2(f,!g||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let x=il(),v;if(e){let E=typeof e=="string"?Uc(e):e;Zt(m==="/"||E.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${E.pathname}" was given in the \`location\` prop.`),v=E}else v=x;let _=v.pathname||"/",b=_;if(m!=="/"){let E=m.replace(/^\//,"").split("/");b="/"+_.replace(/^\//,"").split("/").slice(E.length).join("/")}let N=q2(t,{pathname:b});Pn(g||N!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Pn(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=RT(N&&N.map(E=>Object.assign({},E,{params:Object.assign({},h,E.params),pathname:Wi([m,a.encodeLocation?a.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?m:Wi([m,a.encodeLocation?a.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,s,r);return e&&w?M.createElement(Pd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},w):w}function CT(){let t=PT(),e=vT(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:o},"ErrorBoundary")," or"," ",M.createElement("code",{style:o},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),s?M.createElement("pre",{style:a},s):null,u)}var kT=M.createElement(CT,null),TT=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?M.createElement(Un.Provider,{value:this.props.routeContext},M.createElement(qy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function OT({routeContext:t,match:e,children:s}){let r=M.useContext(Bc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Un.Provider,{value:t},s)}function RT(t,e=[],s=null,r=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,o=s?.errors;if(o!=null){let f=a.findIndex(m=>m.route.id&&o?.[m.route.id]!==void 0);Zt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,h=-1;if(s)for(let f=0;f<a.length;f++){let m=a[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=f),m.route.id){let{loaderData:g,errors:x}=s,v=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!x||x[m.route.id]===void 0);if(m.route.lazy||v){u=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((f,m,g)=>{let x,v=!1,_=null,b=null;s&&(x=o&&m.route.id?o[m.route.id]:void 0,_=m.route.errorElement||kT,u&&(h<0&&g===0?(H2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,b=null):h===g&&(v=!0,b=m.route.hydrateFallbackElement||null)));let N=e.concat(a.slice(0,g+1)),w=()=>{let E;return x?E=_:v?E=b:m.route.Component?E=M.createElement(m.route.Component,null):m.route.element?E=m.route.element:E=f,M.createElement(OT,{match:m,routeContext:{outlet:f,matches:N,isDataRoute:s!=null},children:E})};return s&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?M.createElement(TT,{location:s.location,revalidation:s.revalidation,component:_,error:x,children:w(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):w()},null)}function Py(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MT(t){let e=M.useContext(Bc);return Zt(e,Py(t)),e}function DT(t){let e=M.useContext(_m);return Zt(e,Py(t)),e}function LT(t){let e=M.useContext(Un);return Zt(e,Py(t)),e}function Iy(t){let e=LT(t),s=e.matches[e.matches.length-1];return Zt(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function qT(){return Iy("useRouteId")}function PT(){let t=M.useContext(qy),e=DT("useRouteError"),s=Iy("useRouteError");return t!==void 0?t:e.errors?.[s]}function IT(){let{router:t}=MT("useNavigate"),e=Iy("useNavigate"),s=M.useRef(!1);return z2(()=>{s.current=!0}),M.useCallback(async(a,o={})=>{Pn(s.current,B2),s.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var __={};function H2(t,e,s){!e&&!__[t]&&(__[t]=!0,Pn(!1,s))}M.memo($T);function $T({routes:t,future:e,state:s}){return F2(t,void 0,s,e)}function _d({to:t,replace:e,state:s,relative:r}){Zt(zc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=M.useContext($n);Pn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=M.useContext(Un),{pathname:u}=il(),h=Ns(),f=Ly(t,Dy(o),u,r==="path"),m=JSON.stringify(f);return M.useEffect(()=>{h(JSON.parse(m),{replace:e,state:s,relative:r})},[h,m,r,e,s]),null}function yt(t){Zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UT({basename:t="/",children:e=null,location:s,navigationType:r="POP",navigator:a,static:o=!1}){Zt(!zc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),h=M.useMemo(()=>({basename:u,navigator:a,static:o,future:{}}),[u,a,o]);typeof s=="string"&&(s=Uc(s));let{pathname:f="/",search:m="",hash:g="",state:x=null,key:v="default"}=s,_=M.useMemo(()=>{let b=ea(f,u);return b==null?null:{location:{pathname:b,search:m,hash:g,state:x,key:v},navigationType:r}},[u,f,m,g,x,v,r]);return Pn(_!=null,`<Router basename="${u}"> is not able to match the URL "${f}${m}${g}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:M.createElement($n.Provider,{value:h},M.createElement(Pd.Provider,{children:e,value:_}))}function BT({children:t,location:e}){return AT(q0(t),e)}function q0(t,e=[]){let s=[];return M.Children.forEach(t,(r,a)=>{if(!M.isValidElement(r))return;let o=[...e,a];if(r.type===M.Fragment){s.push.apply(s,q0(r.props.children,o));return}Zt(r.type===yt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=q0(r.props.children,o)),s.push(u)}),s}var Lf="get",qf="application/x-www-form-urlencoded";function jm(t){return t!=null&&typeof t.tagName=="string"}function zT(t){return jm(t)&&t.tagName.toLowerCase()==="button"}function FT(t){return jm(t)&&t.tagName.toLowerCase()==="form"}function HT(t){return jm(t)&&t.tagName.toLowerCase()==="input"}function VT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function GT(t,e){return t.button===0&&(!e||e==="_self")&&!VT(t)}var uf=null;function ZT(){if(uf===null)try{new FormData(document.createElement("form"),0),uf=!1}catch{uf=!0}return uf}var YT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qg(t){return t!=null&&!YT.has(t)?(Pn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qf}"`),null):t}function KT(t,e){let s,r,a,o,u;if(FT(t)){let h=t.getAttribute("action");r=h?ea(h,e):null,s=t.getAttribute("method")||Lf,a=Qg(t.getAttribute("enctype"))||qf,o=new FormData(t)}else if(zT(t)||HT(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||h.getAttribute("action");if(r=f?ea(f,e):null,s=t.getAttribute("formmethod")||h.getAttribute("method")||Lf,a=Qg(t.getAttribute("formenctype"))||Qg(h.getAttribute("enctype"))||qf,o=new FormData(h,t),!ZT()){let{name:m,type:g,value:x}=t;if(g==="image"){let v=m?`${m}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else m&&o.append(m,x)}}else{if(jm(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Lf,r=null,a=qf,u=t}return o&&a==="text/plain"&&(u=o,o=void 0),{action:r,method:s.toLowerCase(),encType:a,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $y(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function WT(t,e,s){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${s}`:e&&ea(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function QT(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function XT(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function JT(t,e,s){let r=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let u=await QT(o,s);return u.links?u.links():[]}return[]}));return r4(r.flat(1).filter(XT).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function j_(t,e,s,r,a,o){let u=(f,m)=>s[m]?f.route.id!==s[m].route.id:!0,h=(f,m)=>s[m].pathname!==f.pathname||s[m].route.path?.endsWith("*")&&s[m].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,m)=>u(f,m)||h(f,m)):o==="data"?e.filter((f,m)=>{let g=r.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(u(f,m)||h(f,m))return!0;if(f.route.shouldRevalidate){let x=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function e4(t,e,{includeHydrateFallback:s}={}){return t4(t.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),s&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function t4(t){return[...new Set(t)]}function s4(t){let e={},s=Object.keys(t).sort();for(let r of s)e[r]=t[r];return e}function r4(t,e){let s=new Set;return new Set(e),t.reduce((r,a)=>{let o=JSON.stringify(s4(a));return s.has(o)||(s.add(o),r.push({key:o,link:a})),r},[])}function V2(){let t=M.useContext(Bc);return $y(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function n4(){let t=M.useContext(_m);return $y(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Uy=M.createContext(void 0);Uy.displayName="FrameworkContext";function G2(){let t=M.useContext(Uy);return $y(t,"You must render this element inside a <HydratedRouter> element"),t}function i4(t,e){let s=M.useContext(Uy),[r,a]=M.useState(!1),[o,u]=M.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:m,onMouseLeave:g,onTouchStart:x}=e,v=M.useRef(null);M.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let N=E=>{E.forEach(A=>{u(A.isIntersecting)})},w=new IntersectionObserver(N,{threshold:.5});return v.current&&w.observe(v.current),()=>{w.disconnect()}}},[t]),M.useEffect(()=>{if(r){let N=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(N)}}},[r]);let _=()=>{a(!0)},b=()=>{a(!1),u(!1)};return s?t!=="intent"?[o,v,{}]:[o,v,{onFocus:Xu(h,_),onBlur:Xu(f,b),onMouseEnter:Xu(m,_),onMouseLeave:Xu(g,b),onTouchStart:Xu(x,_)}]:[!1,v,{}]}function Xu(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function a4({page:t,...e}){let{router:s}=V2(),r=M.useMemo(()=>q2(s.routes,t,s.basename),[s.routes,t,s.basename]);return r?M.createElement(o4,{page:t,matches:r,...e}):null}function l4(t){let{manifest:e,routeModules:s}=G2(),[r,a]=M.useState([]);return M.useEffect(()=>{let o=!1;return JT(t,e,s).then(u=>{o||a(u)}),()=>{o=!0}},[t,e,s]),r}function o4({page:t,matches:e,...s}){let r=il(),{manifest:a,routeModules:o}=G2(),{basename:u}=V2(),{loaderData:h,matches:f}=n4(),m=M.useMemo(()=>j_(t,e,f,a,r,"data"),[t,e,f,a,r]),g=M.useMemo(()=>j_(t,e,f,a,r,"assets"),[t,e,f,a,r]),x=M.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,N=!1;if(e.forEach(E=>{let A=a.routes[E.route.id];!A||!A.hasLoader||(!m.some(O=>O.route.id===E.route.id)&&E.route.id in h&&o[E.route.id]?.shouldRevalidate||A.hasClientLoader?N=!0:b.add(E.route.id))}),b.size===0)return[];let w=WT(t,u,"data");return N&&b.size>0&&w.searchParams.set("_routes",e.filter(E=>b.has(E.route.id)).map(E=>E.route.id).join(",")),[w.pathname+w.search]},[u,h,r,a,m,e,t,o]),v=M.useMemo(()=>e4(g,a),[g,a]),_=l4(g);return M.createElement(M.Fragment,null,x.map(b=>M.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...s})),v.map(b=>M.createElement("link",{key:b,rel:"modulepreload",href:b,...s})),_.map(({key:b,link:N})=>M.createElement("link",{key:b,...N})))}function c4(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var Z2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Z2&&(window.__reactRouterVersion="7.7.1")}catch{}function u4({basename:t,children:e,window:s}){let r=M.useRef();r.current==null&&(r.current=Qk({window:s,v5Compat:!0}));let a=r.current,[o,u]=M.useState({action:a.action,location:a.location}),h=M.useCallback(f=>{M.startTransition(()=>u(f))},[u]);return M.useLayoutEffect(()=>a.listen(h),[a,h]),M.createElement(UT,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a})}var Y2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K2=M.forwardRef(function({onClick:e,discover:s="render",prefetch:r="none",relative:a,reloadDocument:o,replace:u,state:h,target:f,to:m,preventScrollReset:g,viewTransition:x,...v},_){let{basename:b}=M.useContext($n),N=typeof m=="string"&&Y2.test(m),w,E=!1;if(typeof m=="string"&&N&&(w=m,Z2))try{let k=new URL(window.location.href),z=m.startsWith("//")?new URL(k.protocol+m):new URL(m),R=ea(z.pathname,b);z.origin===k.origin&&R!=null?m=R+z.search+z.hash:E=!0}catch{Pn(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=NT(m,{relative:a}),[O,F,C]=i4(r,v),L=m4(m,{replace:u,state:h,target:f,preventScrollReset:g,relative:a,viewTransition:x});function B(k){e&&e(k),k.defaultPrevented||L(k)}let S=M.createElement("a",{...v,...C,href:w||A,onClick:E||o?e:B,ref:c4(_,F),target:f,"data-discover":!N&&s==="render"?"true":void 0});return O&&!N?M.createElement(M.Fragment,null,S,M.createElement(a4,{page:A})):S});K2.displayName="Link";var d4=M.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:r="",end:a=!1,style:o,to:u,viewTransition:h,children:f,...m},g){let x=Id(u,{relative:m.relative}),v=il(),_=M.useContext(_m),{navigator:b,basename:N}=M.useContext($n),w=_!=null&&b4(x)&&h===!0,E=b.encodeLocation?b.encodeLocation(x).pathname:x.pathname,A=v.pathname,O=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;s||(A=A.toLowerCase(),O=O?O.toLowerCase():null,E=E.toLowerCase()),O&&N&&(O=ea(O,N)||O);const F=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let C=A===E||!a&&A.startsWith(E)&&A.charAt(F)==="/",L=O!=null&&(O===E||!a&&O.startsWith(E)&&O.charAt(E.length)==="/"),B={isActive:C,isPending:L,isTransitioning:w},S=C?e:void 0,k;typeof r=="function"?k=r(B):k=[r,C?"active":null,L?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let z=typeof o=="function"?o(B):o;return M.createElement(K2,{...m,"aria-current":S,className:k,ref:g,style:z,to:u,viewTransition:h},typeof f=="function"?f(B):f)});d4.displayName="NavLink";var h4=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:r,replace:a,state:o,method:u=Lf,action:h,onSubmit:f,relative:m,preventScrollReset:g,viewTransition:x,...v},_)=>{let b=y4(),N=x4(h,{relative:m}),w=u.toLowerCase()==="get"?"get":"post",E=typeof h=="string"&&Y2.test(h),A=O=>{if(f&&f(O),O.defaultPrevented)return;O.preventDefault();let F=O.nativeEvent.submitter,C=F?.getAttribute("formmethod")||u;b(F||O.currentTarget,{fetcherKey:e,method:C,navigate:s,replace:a,state:o,relative:m,preventScrollReset:g,viewTransition:x})};return M.createElement("form",{ref:_,method:w,action:N,onSubmit:r?f:A,...v,"data-discover":!E&&t==="render"?"true":void 0})});h4.displayName="Form";function f4(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function W2(t){let e=M.useContext(Bc);return Zt(e,f4(t)),e}function m4(t,{target:e,replace:s,state:r,preventScrollReset:a,relative:o,viewTransition:u}={}){let h=Ns(),f=il(),m=Id(t,{relative:o});return M.useCallback(g=>{if(GT(g,e)){g.preventDefault();let x=s!==void 0?s:wd(f)===wd(m);h(t,{replace:x,state:r,preventScrollReset:a,relative:o,viewTransition:u})}},[f,h,m,s,r,e,t,a,o,u])}var p4=0,g4=()=>`__${String(++p4)}__`;function y4(){let{router:t}=W2("useSubmit"),{basename:e}=M.useContext($n),s=qT();return M.useCallback(async(r,a={})=>{let{action:o,method:u,encType:h,formData:f,body:m}=KT(r,e);if(a.navigate===!1){let g=a.fetcherKey||g4();await t.fetch(g,s,a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:m,formMethod:a.method||u,formEncType:a.encType||h,flushSync:a.flushSync})}else await t.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:m,formMethod:a.method||u,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,s])}function x4(t,{relative:e}={}){let{basename:s}=M.useContext($n),r=M.useContext(Un);Zt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),o={...Id(t||".",{relative:e})},u=il();if(t==null){o.search=u.search;let h=new URLSearchParams(o.search),f=h.getAll("index");if(f.some(g=>g==="")){h.delete("index"),f.filter(x=>x).forEach(x=>h.append("index",x));let g=h.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(o.pathname=o.pathname==="/"?s:Wi([s,o.pathname])),wd(o)}function b4(t,{relative:e}={}){let s=M.useContext(U2);Zt(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=W2("useViewTransitionState"),a=Id(t,{relative:e});if(!s.isTransitioning)return!1;let o=ea(s.currentLocation.pathname,r)||s.currentLocation.pathname,u=ea(s.nextLocation.pathname,r)||s.nextLocation.pathname;return Zf(a.pathname,u)!=null||Zf(a.pathname,o)!=null}const Sc={major:1,minor:3,patch:0,build:"20250904-0933",environment:"production",get full(){return`${this.major}.${this.minor}.${this.patch}-${this.build}`},get simple(){return`v${this.major}.${this.minor}.${this.patch}`},get withEnv(){const t=this.environment==="production"?"PROD":"DEV";return`${this.simple} (${t})`},lastUpdate:"2025-09-04 09:33",changes:"Added version system, fixed CPD certificates view/download"};typeof window<"u"&&(console.log(`%c EAU Members Portal %c${Sc.full} %c${Sc.environment}`,"color: #4F46E5; font-weight: bold; font-size: 14px;","color: #10B981; font-weight: bold; font-size: 14px;","color: #6B7280; font-size: 12px;"),console.log(`Last update: ${Sc.lastUpdate}`),console.log(`Changes: ${Sc.changes}`));const By=({children:t})=>n.jsxs("div",{className:"min-h-screen bg-white flex",children:[n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("img",{src:"/logo-500.png",alt:"English Australia",className:"mx-auto h-16 w-auto mb-4"}),n.jsx("div",{className:"text-xs text-gray-500",children:Sc.withEnv})]}),t]})}),n.jsxs("div",{className:"hidden lg:flex w-1/2 bg-[#1E3A8A] relative flex-col",children:[n.jsx("div",{className:"flex-1"}),n.jsx("div",{className:"h-2 bg-gradient-to-r from-red-500 via-yellow-500 via-green-500 via-blue-500 to-purple-500"})]})]}),v4="modulepreload",w4=function(t){return"/"+t},N_={},al=function(e,s,r){let a=Promise.resolve();if(s&&s.length>0){let m=function(g){return Promise.all(g.map(x=>Promise.resolve(x).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var u=m;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=h?.nonce||h?.getAttribute("nonce");a=m(s.map(g=>{if(g=w4(g),g in N_)return;N_[g]=!0;const x=g.endsWith(".css"),v=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const _=document.createElement("link");if(_.rel=x?"stylesheet":v4,x||(_.as="script"),_.crossOrigin="",_.href=g,f&&_.setAttribute("nonce",f),document.head.appendChild(_),x)return new Promise((b,N)=>{_.addEventListener("load",b),_.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return a.then(h=>{for(const f of h||[])f.status==="rejected"&&o(f.reason);return e().catch(o)})};var $d=t=>t.type==="checkbox",Gl=t=>t instanceof Date,or=t=>t==null;const Q2=t=>typeof t=="object";var ms=t=>!or(t)&&!Array.isArray(t)&&Q2(t)&&!Gl(t),_4=t=>ms(t)&&t.target?$d(t.target)?t.target.checked:t.target.value:t,j4=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,N4=(t,e)=>t.has(j4(e)),S4=t=>{const e=t.constructor&&t.constructor.prototype;return ms(e)&&e.hasOwnProperty("isPrototypeOf")},zy=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function zs(t){let e;const s=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(zy&&(t instanceof Blob||r))&&(s||ms(t)))if(e=s?[]:Object.create(Object.getPrototypeOf(t)),!s&&!S4(t))e=t;else for(const a in t)t.hasOwnProperty(a)&&(e[a]=zs(t[a]));else return t;return e}var Nm=t=>/^\w*$/.test(t),_s=t=>t===void 0,Fy=t=>Array.isArray(t)?t.filter(Boolean):[],Hy=t=>Fy(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Be=(t,e,s)=>{if(!e||!ms(t))return s;const r=(Nm(e)?[e]:Hy(e)).reduce((a,o)=>or(a)?a:a[o],t);return _s(r)||r===t?_s(t[e])?s:t[e]:r},oi=t=>typeof t=="boolean",Pt=(t,e,s)=>{let r=-1;const a=Nm(e)?[e]:Hy(e),o=a.length,u=o-1;for(;++r<o;){const h=a[r];let f=s;if(r!==u){const m=t[h];f=ms(m)||Array.isArray(m)?m:isNaN(+a[r+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;t[h]=f,t=t[h]}};const S_={BLUR:"blur",FOCUS_OUT:"focusout"},kn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Fi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},E4=Hs.createContext(null);E4.displayName="HookFormContext";var A4=(t,e,s,r=!0)=>{const a={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(a,o,{get:()=>{const u=o;return e._proxyFormState[u]!==kn.all&&(e._proxyFormState[u]=!r||kn.all),t[u]}});return a};const C4=typeof window<"u"?Hs.useLayoutEffect:Hs.useEffect;var hi=t=>typeof t=="string",k4=(t,e,s,r,a)=>hi(t)?(r&&e.watch.add(t),Be(s,t,a)):Array.isArray(t)?t.map(o=>(r&&e.watch.add(o),Be(s,o))):(r&&(e.watchAll=!0),s),P0=t=>or(t)||!Q2(t);function Ga(t,e,s=new WeakSet){if(P0(t)||P0(e))return t===e;if(Gl(t)&&Gl(e))return t.getTime()===e.getTime();const r=Object.keys(t),a=Object.keys(e);if(r.length!==a.length)return!1;if(s.has(t)||s.has(e))return!0;s.add(t),s.add(e);for(const o of r){const u=t[o];if(!a.includes(o))return!1;if(o!=="ref"){const h=e[o];if(Gl(u)&&Gl(h)||ms(u)&&ms(h)||Array.isArray(u)&&Array.isArray(h)?!Ga(u,h,s):u!==h)return!1}}return!0}var Vy=(t,e,s,r,a)=>e?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[r]:a||!0}}:{},md=t=>Array.isArray(t)?t:[t],E_=()=>{let t=[];return{get observers(){return t},next:a=>{for(const o of t)o.next&&o.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(o=>o!==a)}}),unsubscribe:()=>{t=[]}}},jr=t=>ms(t)&&!Object.keys(t).length,Gy=t=>t.type==="file",Tn=t=>typeof t=="function",Yf=t=>{if(!zy)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},X2=t=>t.type==="select-multiple",Zy=t=>t.type==="radio",T4=t=>Zy(t)||$d(t),Xg=t=>Yf(t)&&t.isConnected;function O4(t,e){const s=e.slice(0,-1).length;let r=0;for(;r<s;)t=_s(t)?r++:t[e[r++]];return t}function R4(t){for(const e in t)if(t.hasOwnProperty(e)&&!_s(t[e]))return!1;return!0}function ws(t,e){const s=Array.isArray(e)?e:Nm(e)?[e]:Hy(e),r=s.length===1?t:O4(t,s),a=s.length-1,o=s[a];return r&&delete r[o],a!==0&&(ms(r)&&jr(r)||Array.isArray(r)&&R4(r))&&ws(t,s.slice(0,-1)),t}var J2=t=>{for(const e in t)if(Tn(t[e]))return!0;return!1};function Kf(t,e={}){const s=Array.isArray(t);if(ms(t)||s)for(const r in t)Array.isArray(t[r])||ms(t[r])&&!J2(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Kf(t[r],e[r])):or(t[r])||(e[r]=!0);return e}function eN(t,e,s){const r=Array.isArray(t);if(ms(t)||r)for(const a in t)Array.isArray(t[a])||ms(t[a])&&!J2(t[a])?_s(e)||P0(s[a])?s[a]=Array.isArray(t[a])?Kf(t[a],[]):{...Kf(t[a])}:eN(t[a],or(e)?{}:e[a],s[a]):s[a]=!Ga(t[a],e[a]);return s}var Ju=(t,e)=>eN(t,e,Kf(e));const A_={value:!1,isValid:!1},C_={value:!0,isValid:!0};var tN=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!_s(t[0].attributes.value)?_s(t[0].value)||t[0].value===""?C_:{value:t[0].value,isValid:!0}:C_:A_}return A_},sN=(t,{valueAsNumber:e,valueAsDate:s,setValueAs:r})=>_s(t)?t:e?t===""?NaN:t&&+t:s&&hi(t)?new Date(t):r?r(t):t;const k_={isValid:!1,value:null};var rN=t=>Array.isArray(t)?t.reduce((e,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:e,k_):k_;function T_(t){const e=t.ref;return Gy(e)?e.files:Zy(e)?rN(t.refs).value:X2(e)?[...e.selectedOptions].map(({value:s})=>s):$d(e)?tN(t.refs).value:sN(_s(e.value)?t.ref.value:e.value,t)}var M4=(t,e,s,r)=>{const a={};for(const o of t){const u=Be(e,o);u&&Pt(a,o,u._f)}return{criteriaMode:s,names:[...t],fields:a,shouldUseNativeValidation:r}},Wf=t=>t instanceof RegExp,ed=t=>_s(t)?t:Wf(t)?t.source:ms(t)?Wf(t.value)?t.value.source:t.value:t,O_=t=>({isOnSubmit:!t||t===kn.onSubmit,isOnBlur:t===kn.onBlur,isOnChange:t===kn.onChange,isOnAll:t===kn.all,isOnTouch:t===kn.onTouched});const R_="AsyncFunction";var D4=t=>!!t&&!!t.validate&&!!(Tn(t.validate)&&t.validate.constructor.name===R_||ms(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===R_)),L4=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),M_=(t,e,s)=>!s&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const pd=(t,e,s,r)=>{for(const a of s||Object.keys(t)){const o=Be(t,a);if(o){const{_f:u,...h}=o;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],a)&&!r)return!0;if(u.ref&&e(u.ref,u.name)&&!r)return!0;if(pd(h,e))break}else if(ms(h)&&pd(h,e))break}}};function D_(t,e,s){const r=Be(t,s);if(r||Nm(s))return{error:r,name:s};const a=s.split(".");for(;a.length;){const o=a.join("."),u=Be(e,o),h=Be(t,o);if(u&&!Array.isArray(u)&&s!==o)return{name:s};if(h&&h.type)return{name:o,error:h};if(h&&h.root&&h.root.type)return{name:`${o}.root`,error:h.root};a.pop()}return{name:s}}var q4=(t,e,s,r)=>{s(t);const{name:a,...o}=t;return jr(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(u=>e[u]===(!r||kn.all))},P4=(t,e,s)=>!t||!e||t===e||md(t).some(r=>r&&(s?r===e:r.startsWith(e)||e.startsWith(r))),I4=(t,e,s,r,a)=>a.isOnAll?!1:!s&&a.isOnTouch?!(e||t):(s?r.isOnBlur:a.isOnBlur)?!t:(s?r.isOnChange:a.isOnChange)?t:!0,$4=(t,e)=>!Fy(Be(t,e)).length&&ws(t,e),U4=(t,e,s)=>{const r=md(Be(t,s));return Pt(r,"root",e[s]),Pt(t,s,r),t},Pf=t=>hi(t);function L_(t,e,s="validate"){if(Pf(t)||Array.isArray(t)&&t.every(Pf)||oi(t)&&!t)return{type:s,message:Pf(t)?t:"",ref:e}}var ic=t=>ms(t)&&!Wf(t)?t:{value:t,message:""},q_=async(t,e,s,r,a,o)=>{const{ref:u,refs:h,required:f,maxLength:m,minLength:g,min:x,max:v,pattern:_,validate:b,name:N,valueAsNumber:w,mount:E}=t._f,A=Be(s,N);if(!E||e.has(N))return{};const O=h?h[0]:u,F=D=>{a&&O.reportValidity&&(O.setCustomValidity(oi(D)?"":D||""),O.reportValidity())},C={},L=Zy(u),B=$d(u),S=L||B,k=(w||Gy(u))&&_s(u.value)&&_s(A)||Yf(u)&&u.value===""||A===""||Array.isArray(A)&&!A.length,z=Vy.bind(null,N,r,C),R=(D,P,H,J=Fi.maxLength,q=Fi.minLength)=>{const Z=D?P:H;C[N]={type:D?J:q,message:Z,ref:u,...z(D?J:q,Z)}};if(o?!Array.isArray(A)||!A.length:f&&(!S&&(k||or(A))||oi(A)&&!A||B&&!tN(h).isValid||L&&!rN(h).isValid)){const{value:D,message:P}=Pf(f)?{value:!!f,message:f}:ic(f);if(D&&(C[N]={type:Fi.required,message:P,ref:O,...z(Fi.required,P)},!r))return F(P),C}if(!k&&(!or(x)||!or(v))){let D,P;const H=ic(v),J=ic(x);if(!or(A)&&!isNaN(A)){const q=u.valueAsNumber||A&&+A;or(H.value)||(D=q>H.value),or(J.value)||(P=q<J.value)}else{const q=u.valueAsDate||new Date(A),Z=U=>new Date(new Date().toDateString()+" "+U),Q=u.type=="time",ue=u.type=="week";hi(H.value)&&A&&(D=Q?Z(A)>Z(H.value):ue?A>H.value:q>new Date(H.value)),hi(J.value)&&A&&(P=Q?Z(A)<Z(J.value):ue?A<J.value:q<new Date(J.value))}if((D||P)&&(R(!!D,H.message,J.message,Fi.max,Fi.min),!r))return F(C[N].message),C}if((m||g)&&!k&&(hi(A)||o&&Array.isArray(A))){const D=ic(m),P=ic(g),H=!or(D.value)&&A.length>+D.value,J=!or(P.value)&&A.length<+P.value;if((H||J)&&(R(H,D.message,P.message),!r))return F(C[N].message),C}if(_&&!k&&hi(A)){const{value:D,message:P}=ic(_);if(Wf(D)&&!A.match(D)&&(C[N]={type:Fi.pattern,message:P,ref:u,...z(Fi.pattern,P)},!r))return F(P),C}if(b){if(Tn(b)){const D=await b(A,s),P=L_(D,O);if(P&&(C[N]={...P,...z(Fi.validate,P.message)},!r))return F(P.message),C}else if(ms(b)){let D={};for(const P in b){if(!jr(D)&&!r)break;const H=L_(await b[P](A,s),O,P);H&&(D={...H,...z(P,H.message)},F(H.message),r&&(C[N]=D))}if(!jr(D)&&(C[N]={ref:O,...D},!r))return C}}return F(!0),C};const B4={mode:kn.onSubmit,reValidateMode:kn.onChange,shouldFocusError:!0};function z4(t={}){let e={...B4,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:Tn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},a=ms(e.defaultValues)||ms(e.values)?zs(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:zs(a),u={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,m=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let x={...g};const v={array:E_(),state:E_()},_=e.criteriaMode===kn.all,b=G=>se=>{clearTimeout(m),m=setTimeout(G,se)},N=async G=>{if(!e.disabled&&(g.isValid||x.isValid||G)){const se=e.resolver?jr((await B()).errors):await k(r,!0);se!==s.isValid&&v.state.next({isValid:se})}},w=(G,se)=>{!e.disabled&&(g.isValidating||g.validatingFields||x.isValidating||x.validatingFields)&&((G||Array.from(h.mount)).forEach(he=>{he&&(se?Pt(s.validatingFields,he,se):ws(s.validatingFields,he))}),v.state.next({validatingFields:s.validatingFields,isValidating:!jr(s.validatingFields)}))},E=(G,se=[],he,ke,Se=!0,Ee=!0)=>{if(ke&&he&&!e.disabled){if(u.action=!0,Ee&&Array.isArray(Be(r,G))){const Te=he(Be(r,G),ke.argA,ke.argB);Se&&Pt(r,G,Te)}if(Ee&&Array.isArray(Be(s.errors,G))){const Te=he(Be(s.errors,G),ke.argA,ke.argB);Se&&Pt(s.errors,G,Te),$4(s.errors,G)}if((g.touchedFields||x.touchedFields)&&Ee&&Array.isArray(Be(s.touchedFields,G))){const Te=he(Be(s.touchedFields,G),ke.argA,ke.argB);Se&&Pt(s.touchedFields,G,Te)}(g.dirtyFields||x.dirtyFields)&&(s.dirtyFields=Ju(a,o)),v.state.next({name:G,isDirty:R(G,se),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Pt(o,G,se)},A=(G,se)=>{Pt(s.errors,G,se),v.state.next({errors:s.errors})},O=G=>{s.errors=G,v.state.next({errors:s.errors,isValid:!1})},F=(G,se,he,ke)=>{const Se=Be(r,G);if(Se){const Ee=Be(o,G,_s(he)?Be(a,G):he);_s(Ee)||ke&&ke.defaultChecked||se?Pt(o,G,se?Ee:T_(Se._f)):H(G,Ee),u.mount&&N()}},C=(G,se,he,ke,Se)=>{let Ee=!1,Te=!1;const Pe={name:G};if(!e.disabled){if(!he||ke){(g.isDirty||x.isDirty)&&(Te=s.isDirty,s.isDirty=Pe.isDirty=R(),Ee=Te!==Pe.isDirty);const We=Ga(Be(a,G),se);Te=!!Be(s.dirtyFields,G),We?ws(s.dirtyFields,G):Pt(s.dirtyFields,G,!0),Pe.dirtyFields=s.dirtyFields,Ee=Ee||(g.dirtyFields||x.dirtyFields)&&Te!==!We}if(he){const We=Be(s.touchedFields,G);We||(Pt(s.touchedFields,G,he),Pe.touchedFields=s.touchedFields,Ee=Ee||(g.touchedFields||x.touchedFields)&&We!==he)}Ee&&Se&&v.state.next(Pe)}return Ee?Pe:{}},L=(G,se,he,ke)=>{const Se=Be(s.errors,G),Ee=(g.isValid||x.isValid)&&oi(se)&&s.isValid!==se;if(e.delayError&&he?(f=b(()=>A(G,he)),f(e.delayError)):(clearTimeout(m),f=null,he?Pt(s.errors,G,he):ws(s.errors,G)),(he?!Ga(Se,he):Se)||!jr(ke)||Ee){const Te={...ke,...Ee&&oi(se)?{isValid:se}:{},errors:s.errors,name:G};s={...s,...Te},v.state.next(Te)}},B=async G=>{w(G,!0);const se=await e.resolver(o,e.context,M4(G||h.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return w(G),se},S=async G=>{const{errors:se}=await B(G);if(G)for(const he of G){const ke=Be(se,he);ke?Pt(s.errors,he,ke):ws(s.errors,he)}else s.errors=se;return se},k=async(G,se,he={valid:!0})=>{for(const ke in G){const Se=G[ke];if(Se){const{_f:Ee,...Te}=Se;if(Ee){const Pe=h.array.has(Ee.name),We=Se._f&&D4(Se._f);We&&g.validatingFields&&w([ke],!0);const pt=await q_(Se,h.disabled,o,_,e.shouldUseNativeValidation&&!se,Pe);if(We&&g.validatingFields&&w([ke]),pt[Ee.name]&&(he.valid=!1,se))break;!se&&(Be(pt,Ee.name)?Pe?U4(s.errors,pt,Ee.name):Pt(s.errors,Ee.name,pt[Ee.name]):ws(s.errors,Ee.name))}!jr(Te)&&await k(Te,se,he)}}return he.valid},z=()=>{for(const G of h.unMount){const se=Be(r,G);se&&(se._f.refs?se._f.refs.every(he=>!Xg(he)):!Xg(se._f.ref))&&Me(G)}h.unMount=new Set},R=(G,se)=>!e.disabled&&(G&&se&&Pt(o,G,se),!Ga(U(),a)),D=(G,se,he)=>k4(G,h,{...u.mount?o:_s(se)?a:hi(G)?{[G]:se}:se},he,se),P=G=>Fy(Be(u.mount?o:a,G,e.shouldUnregister?Be(a,G,[]):[])),H=(G,se,he={})=>{const ke=Be(r,G);let Se=se;if(ke){const Ee=ke._f;Ee&&(!Ee.disabled&&Pt(o,G,sN(se,Ee)),Se=Yf(Ee.ref)&&or(se)?"":se,X2(Ee.ref)?[...Ee.ref.options].forEach(Te=>Te.selected=Se.includes(Te.value)):Ee.refs?$d(Ee.ref)?Ee.refs.forEach(Te=>{(!Te.defaultChecked||!Te.disabled)&&(Array.isArray(Se)?Te.checked=!!Se.find(Pe=>Pe===Te.value):Te.checked=Se===Te.value||!!Se)}):Ee.refs.forEach(Te=>Te.checked=Te.value===Se):Gy(Ee.ref)?Ee.ref.value="":(Ee.ref.value=Se,Ee.ref.type||v.state.next({name:G,values:zs(o)})))}(he.shouldDirty||he.shouldTouch)&&C(G,Se,he.shouldTouch,he.shouldDirty,!0),he.shouldValidate&&ue(G)},J=(G,se,he)=>{for(const ke in se){if(!se.hasOwnProperty(ke))return;const Se=se[ke],Ee=G+"."+ke,Te=Be(r,Ee);(h.array.has(G)||ms(Se)||Te&&!Te._f)&&!Gl(Se)?J(Ee,Se,he):H(Ee,Se,he)}},q=(G,se,he={})=>{const ke=Be(r,G),Se=h.array.has(G),Ee=zs(se);Pt(o,G,Ee),Se?(v.array.next({name:G,values:zs(o)}),(g.isDirty||g.dirtyFields||x.isDirty||x.dirtyFields)&&he.shouldDirty&&v.state.next({name:G,dirtyFields:Ju(a,o),isDirty:R(G,Ee)})):ke&&!ke._f&&!or(Ee)?J(G,Ee,he):H(G,Ee,he),M_(G,h)&&v.state.next({...s,name:G}),v.state.next({name:u.mount?G:void 0,values:zs(o)})},Z=async G=>{u.mount=!0;const se=G.target;let he=se.name,ke=!0;const Se=Be(r,he),Ee=We=>{ke=Number.isNaN(We)||Gl(We)&&isNaN(We.getTime())||Ga(We,Be(o,he,We))},Te=O_(e.mode),Pe=O_(e.reValidateMode);if(Se){let We,pt;const es=se.type?T_(Se._f):_4(G),ts=G.type===S_.BLUR||G.type===S_.FOCUS_OUT,Ss=!L4(Se._f)&&!e.resolver&&!Be(s.errors,he)&&!Se._f.deps||I4(ts,Be(s.touchedFields,he),s.isSubmitted,Pe,Te),Ms=M_(he,h,ts);Pt(o,he,es),ts?(!se||!se.readOnly)&&(Se._f.onBlur&&Se._f.onBlur(G),f&&f(0)):Se._f.onChange&&Se._f.onChange(G);const Gs=C(he,es,ts),Qs=!jr(Gs)||Ms;if(!ts&&v.state.next({name:he,type:G.type,values:zs(o)}),Ss)return(g.isValid||x.isValid)&&(e.mode==="onBlur"?ts&&N():ts||N()),Qs&&v.state.next({name:he,...Ms?{}:Gs});if(!ts&&Ms&&v.state.next({...s}),e.resolver){const{errors:Gr}=await B([he]);if(Ee(es),ke){const mr=D_(s.errors,r,he),Zr=D_(Gr,r,mr.name||he);We=Zr.error,he=Zr.name,pt=jr(Gr)}}else w([he],!0),We=(await q_(Se,h.disabled,o,_,e.shouldUseNativeValidation))[he],w([he]),Ee(es),ke&&(We?pt=!1:(g.isValid||x.isValid)&&(pt=await k(r,!0)));ke&&(Se._f.deps&&ue(Se._f.deps),L(he,pt,We,Gs))}},Q=(G,se)=>{if(Be(s.errors,se)&&G.focus)return G.focus(),1},ue=async(G,se={})=>{let he,ke;const Se=md(G);if(e.resolver){const Ee=await S(_s(G)?G:Se);he=jr(Ee),ke=G?!Se.some(Te=>Be(Ee,Te)):he}else G?(ke=(await Promise.all(Se.map(async Ee=>{const Te=Be(r,Ee);return await k(Te&&Te._f?{[Ee]:Te}:Te)}))).every(Boolean),!(!ke&&!s.isValid)&&N()):ke=he=await k(r);return v.state.next({...!hi(G)||(g.isValid||x.isValid)&&he!==s.isValid?{}:{name:G},...e.resolver||!G?{isValid:he}:{},errors:s.errors}),se.shouldFocus&&!ke&&pd(r,Q,G?Se:h.mount),ke},U=G=>{const se={...u.mount?o:a};return _s(G)?se:hi(G)?Be(se,G):G.map(he=>Be(se,he))},X=(G,se)=>({invalid:!!Be((se||s).errors,G),isDirty:!!Be((se||s).dirtyFields,G),error:Be((se||s).errors,G),isValidating:!!Be(s.validatingFields,G),isTouched:!!Be((se||s).touchedFields,G)}),le=G=>{G&&md(G).forEach(se=>ws(s.errors,se)),v.state.next({errors:G?s.errors:{}})},ee=(G,se,he)=>{const ke=(Be(r,G,{_f:{}})._f||{}).ref,Se=Be(s.errors,G)||{},{ref:Ee,message:Te,type:Pe,...We}=Se;Pt(s.errors,G,{...We,...se,ref:ke}),v.state.next({name:G,errors:s.errors,isValid:!1}),he&&he.shouldFocus&&ke&&ke.focus&&ke.focus()},ge=(G,se)=>Tn(G)?v.state.subscribe({next:he=>"values"in he&&G(D(void 0,se),he)}):D(G,se,!0),we=G=>v.state.subscribe({next:se=>{P4(G.name,se.name,G.exact)&&q4(se,G.formState||g,bt,G.reRenderRoot)&&G.callback({values:{...o},...s,...se,defaultValues:a})}}).unsubscribe,Ce=G=>(u.mount=!0,x={...x,...G.formState},we({...G,formState:x})),Me=(G,se={})=>{for(const he of G?md(G):h.mount)h.mount.delete(he),h.array.delete(he),se.keepValue||(ws(r,he),ws(o,he)),!se.keepError&&ws(s.errors,he),!se.keepDirty&&ws(s.dirtyFields,he),!se.keepTouched&&ws(s.touchedFields,he),!se.keepIsValidating&&ws(s.validatingFields,he),!e.shouldUnregister&&!se.keepDefaultValue&&ws(a,he);v.state.next({values:zs(o)}),v.state.next({...s,...se.keepDirty?{isDirty:R()}:{}}),!se.keepIsValid&&N()},Ne=({disabled:G,name:se})=>{(oi(G)&&u.mount||G||h.disabled.has(se))&&(G?h.disabled.add(se):h.disabled.delete(se))},Oe=(G,se={})=>{let he=Be(r,G);const ke=oi(se.disabled)||oi(e.disabled);return Pt(r,G,{...he||{},_f:{...he&&he._f?he._f:{ref:{name:G}},name:G,mount:!0,...se}}),h.mount.add(G),he?Ne({disabled:oi(se.disabled)?se.disabled:e.disabled,name:G}):F(G,!0,se.value),{...ke?{disabled:se.disabled||e.disabled}:{},...e.progressive?{required:!!se.required,min:ed(se.min),max:ed(se.max),minLength:ed(se.minLength),maxLength:ed(se.maxLength),pattern:ed(se.pattern)}:{},name:G,onChange:Z,onBlur:Z,ref:Se=>{if(Se){Oe(G,se),he=Be(r,G);const Ee=_s(Se.value)&&Se.querySelectorAll&&Se.querySelectorAll("input,select,textarea")[0]||Se,Te=T4(Ee),Pe=he._f.refs||[];if(Te?Pe.find(We=>We===Ee):Ee===he._f.ref)return;Pt(r,G,{_f:{...he._f,...Te?{refs:[...Pe.filter(Xg),Ee,...Array.isArray(Be(a,G))?[{}]:[]],ref:{type:Ee.type,name:G}}:{ref:Ee}}}),F(G,!1,void 0,Ee)}else he=Be(r,G,{}),he._f&&(he._f.mount=!1),(e.shouldUnregister||se.shouldUnregister)&&!(N4(h.array,G)&&u.action)&&h.unMount.add(G)}}},De=()=>e.shouldFocusError&&pd(r,Q,h.mount),Re=G=>{oi(G)&&(v.state.next({disabled:G}),pd(r,(se,he)=>{const ke=Be(r,he);ke&&(se.disabled=ke._f.disabled||G,Array.isArray(ke._f.refs)&&ke._f.refs.forEach(Se=>{Se.disabled=ke._f.disabled||G}))},0,!1))},qe=(G,se)=>async he=>{let ke;he&&(he.preventDefault&&he.preventDefault(),he.persist&&he.persist());let Se=zs(o);if(v.state.next({isSubmitting:!0}),e.resolver){const{errors:Ee,values:Te}=await B();s.errors=Ee,Se=zs(Te)}else await k(r);if(h.disabled.size)for(const Ee of h.disabled)ws(Se,Ee);if(ws(s.errors,"root"),jr(s.errors)){v.state.next({errors:{}});try{await G(Se,he)}catch(Ee){ke=Ee}}else se&&await se({...s.errors},he),De(),setTimeout(De);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:jr(s.errors)&&!ke,submitCount:s.submitCount+1,errors:s.errors}),ke)throw ke},Ze=(G,se={})=>{Be(r,G)&&(_s(se.defaultValue)?q(G,zs(Be(a,G))):(q(G,se.defaultValue),Pt(a,G,zs(se.defaultValue))),se.keepTouched||ws(s.touchedFields,G),se.keepDirty||(ws(s.dirtyFields,G),s.isDirty=se.defaultValue?R(G,zs(Be(a,G))):R()),se.keepError||(ws(s.errors,G),g.isValid&&N()),v.state.next({...s}))},Ke=(G,se={})=>{const he=G?zs(G):a,ke=zs(he),Se=jr(G),Ee=Se?a:ke;if(se.keepDefaultValues||(a=he),!se.keepValues){if(se.keepDirtyValues){const Te=new Set([...h.mount,...Object.keys(Ju(a,o))]);for(const Pe of Array.from(Te))Be(s.dirtyFields,Pe)?Pt(Ee,Pe,Be(o,Pe)):q(Pe,Be(Ee,Pe))}else{if(zy&&_s(G))for(const Te of h.mount){const Pe=Be(r,Te);if(Pe&&Pe._f){const We=Array.isArray(Pe._f.refs)?Pe._f.refs[0]:Pe._f.ref;if(Yf(We)){const pt=We.closest("form");if(pt){pt.reset();break}}}}if(se.keepFieldsRef)for(const Te of h.mount)q(Te,Be(Ee,Te));else r={}}o=e.shouldUnregister?se.keepDefaultValues?zs(a):{}:zs(Ee),v.array.next({values:{...Ee}}),v.state.next({values:{...Ee}})}h={mount:se.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!g.isValid||!!se.keepIsValid||!!se.keepDirtyValues,u.watch=!!e.shouldUnregister,v.state.next({submitCount:se.keepSubmitCount?s.submitCount:0,isDirty:Se?!1:se.keepDirty?s.isDirty:!!(se.keepDefaultValues&&!Ga(G,a)),isSubmitted:se.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:Se?{}:se.keepDirtyValues?se.keepDefaultValues&&o?Ju(a,o):s.dirtyFields:se.keepDefaultValues&&G?Ju(a,G):se.keepDirty?s.dirtyFields:{},touchedFields:se.keepTouched?s.touchedFields:{},errors:se.keepErrors?s.errors:{},isSubmitSuccessful:se.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},Je=(G,se)=>Ke(Tn(G)?G(o):G,se),rt=(G,se={})=>{const he=Be(r,G),ke=he&&he._f;if(ke){const Se=ke.refs?ke.refs[0]:ke.ref;Se.focus&&(Se.focus(),se.shouldSelect&&Tn(Se.select)&&Se.select())}},bt=G=>{s={...s,...G}},vt={control:{register:Oe,unregister:Me,getFieldState:X,handleSubmit:qe,setError:ee,_subscribe:we,_runSchema:B,_focusError:De,_getWatch:D,_getDirty:R,_setValid:N,_setFieldArray:E,_setDisabledField:Ne,_setErrors:O,_getFieldArray:P,_reset:Ke,_resetDefaultValues:()=>Tn(e.defaultValues)&&e.defaultValues().then(G=>{Je(G,e.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:z,_disableForm:Re,_subjects:v,_proxyFormState:g,get _fields(){return r},get _formValues(){return o},get _state(){return u},set _state(G){u=G},get _defaultValues(){return a},get _names(){return h},set _names(G){h=G},get _formState(){return s},get _options(){return e},set _options(G){e={...e,...G}}},subscribe:Ce,trigger:ue,register:Oe,handleSubmit:qe,watch:ge,setValue:q,getValues:U,reset:Je,resetField:Ze,clearErrors:le,unregister:Me,setError:ee,setFocus:rt,getFieldState:X};return{...vt,formControl:vt}}function Ud(t={}){const e=Hs.useRef(void 0),s=Hs.useRef(void 0),[r,a]=Hs.useState({isDirty:!1,isValidating:!1,isLoading:Tn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Tn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Tn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:u,...h}=z4(t);e.current={...h,formState:r}}const o=e.current.control;return o._options=t,C4(()=>{const u=o._subscribe({formState:o._proxyFormState,callback:()=>a({...o._formState}),reRenderRoot:!0});return a(h=>({...h,isReady:!0})),o._formState.isReady=!0,u},[o]),Hs.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),Hs.useEffect(()=>{t.mode&&(o._options.mode=t.mode),t.reValidateMode&&(o._options.reValidateMode=t.reValidateMode)},[o,t.mode,t.reValidateMode]),Hs.useEffect(()=>{t.errors&&(o._setErrors(t.errors),o._focusError())},[o,t.errors]),Hs.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,t.shouldUnregister]),Hs.useEffect(()=>{if(o._proxyFormState.isDirty){const u=o._getDirty();u!==r.isDirty&&o._subjects.state.next({isDirty:u})}},[o,r.isDirty]),Hs.useEffect(()=>{t.values&&!Ga(t.values,s.current)?(o._reset(t.values,{keepFieldsRef:!0,...o._options.resetOptions}),s.current=t.values,a(u=>({...u}))):o._resetDefaultValues()},[o,t.values]),Hs.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=A4(r,o),e.current}const P_=(t,e,s)=>{if(t&&"reportValidity"in t){const r=Be(s,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},I0=(t,e)=>{for(const s in e.fields){const r=e.fields[s];r&&r.ref&&"reportValidity"in r.ref?P_(r.ref,s,t):r&&r.refs&&r.refs.forEach(a=>P_(a,s,t))}},I_=(t,e)=>{e.shouldUseNativeValidation&&I0(t,e);const s={};for(const r in t){const a=Be(e.fields,r),o=Object.assign(t[r]||{},{ref:a&&a.ref});if(F4(e.names||Object.keys(t),r)){const u=Object.assign({},Be(s,r));Pt(u,"root",o),Pt(s,r,u)}else Pt(s,r,o)}return s},F4=(t,e)=>{const s=$_(e);return t.some(r=>$_(r).match(`^${s}\\.\\d+`))};function $_(t){return t.replace(/\]|\[/g,"")}function je(t,e,s){function r(h,f){var m;Object.defineProperty(h,"_zod",{value:h._zod??{},enumerable:!1}),(m=h._zod).traits??(m.traits=new Set),h._zod.traits.add(t),e(h,f);for(const g in u.prototype)g in h||Object.defineProperty(h,g,{value:u.prototype[g].bind(h)});h._zod.constr=u,h._zod.def=f}const a=s?.Parent??Object;class o extends a{}Object.defineProperty(o,"name",{value:t});function u(h){var f;const m=s?.Parent?new o:this;r(m,h),(f=m._zod).deferred??(f.deferred=[]);for(const g of m._zod.deferred)g();return m}return Object.defineProperty(u,"init",{value:r}),Object.defineProperty(u,Symbol.hasInstance,{value:h=>s?.Parent&&h instanceof s.Parent?!0:h?._zod?.traits?.has(t)}),Object.defineProperty(u,"name",{value:t}),u}class jd extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const nN={};function Ql(t){return nN}function H4(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,a])=>e.indexOf(+r)===-1).map(([r,a])=>a)}function $0(t,e){return typeof e=="bigint"?e.toString():e}function iN(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function Yy(t){return t==null}function Ky(t){const e=t.startsWith("^")?1:0,s=t.endsWith("$")?t.length-1:t.length;return t.slice(e,s)}function V4(t,e){const s=(t.toString().split(".")[1]||"").length,r=e.toString();let a=(r.split(".")[1]||"").length;if(a===0&&/\d?e-\d?/.test(r)){const f=r.match(/\d?e-(\d?)/);f?.[1]&&(a=Number.parseInt(f[1]))}const o=s>a?s:a,u=Number.parseInt(t.toFixed(o).replace(".","")),h=Number.parseInt(e.toFixed(o).replace(".",""));return u%h/10**o}const U_=Symbol("evaluating");function zt(t,e,s){let r;Object.defineProperty(t,e,{get(){if(r!==U_)return r===void 0&&(r=U_,r=s()),r},set(a){Object.defineProperty(t,e,{value:a})},configurable:!0})}function ao(t,e,s){Object.defineProperty(t,e,{value:s,writable:!0,enumerable:!0,configurable:!0})}function Fc(...t){const e={};for(const s of t){const r=Object.getOwnPropertyDescriptors(s);Object.assign(e,r)}return Object.defineProperties({},e)}function B_(t){return JSON.stringify(t)}const aN="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function U0(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const G4=iN(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function B0(t){if(U0(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(U0(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}const Z4=new Set(["string","number","symbol"]);function Sm(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function lo(t,e,s){const r=new t._zod.constr(e??t._zod.def);return(!e||s?.parent)&&(r._zod.parent=t),r}function Ye(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Y4(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const K4={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function W4(t,e){const s=t._zod.def,r=Fc(t._zod.def,{get shape(){const a={};for(const o in e){if(!(o in s.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(a[o]=s.shape[o])}return ao(this,"shape",a),a},checks:[]});return lo(t,r)}function Q4(t,e){const s=t._zod.def,r=Fc(t._zod.def,{get shape(){const a={...t._zod.def.shape};for(const o in e){if(!(o in s.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete a[o]}return ao(this,"shape",a),a},checks:[]});return lo(t,r)}function X4(t,e){if(!B0(e))throw new Error("Invalid input to extend: expected a plain object");const s=Fc(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return ao(this,"shape",r),r},checks:[]});return lo(t,s)}function J4(t,e){const s=Fc(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return ao(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return lo(t,s)}function e5(t,e,s){const r=Fc(e._zod.def,{get shape(){const a=e._zod.def.shape,o={...a};if(s)for(const u in s){if(!(u in a))throw new Error(`Unrecognized key: "${u}"`);s[u]&&(o[u]=t?new t({type:"optional",innerType:a[u]}):a[u])}else for(const u in a)o[u]=t?new t({type:"optional",innerType:a[u]}):a[u];return ao(this,"shape",o),o},checks:[]});return lo(e,r)}function t5(t,e,s){const r=Fc(e._zod.def,{get shape(){const a=e._zod.def.shape,o={...a};if(s)for(const u in s){if(!(u in o))throw new Error(`Unrecognized key: "${u}"`);s[u]&&(o[u]=new t({type:"nonoptional",innerType:a[u]}))}else for(const u in a)o[u]=new t({type:"nonoptional",innerType:a[u]});return ao(this,"shape",o),o},checks:[]});return lo(e,r)}function gd(t,e=0){for(let s=e;s<t.issues.length;s++)if(t.issues[s]?.continue!==!0)return!0;return!1}function lN(t,e){return e.map(s=>{var r;return(r=s).path??(r.path=[]),s.path.unshift(t),s})}function df(t){return typeof t=="string"?t:t?.message}function Xl(t,e,s){const r={...t,path:t.path??[]};if(!t.message){const a=df(t.inst?._zod.def?.error?.(t))??df(e?.error?.(t))??df(s.customError?.(t))??df(s.localeError?.(t))??"Invalid input";r.message=a}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function Wy(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Nd(...t){const[e,s,r]=t;return typeof e=="string"?{message:e,code:"custom",input:s,inst:r}:{...e}}const oN=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,$0,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Qy=je("$ZodError",oN),Em=je("$ZodError",oN,{Parent:Error});function s5(t,e=s=>s.message){const s={},r=[];for(const a of t.issues)a.path.length>0?(s[a.path[0]]=s[a.path[0]]||[],s[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:s}}function r5(t,e){const s=e||function(o){return o.message},r={_errors:[]},a=o=>{for(const u of o.issues)if(u.code==="invalid_union"&&u.errors.length)u.errors.map(h=>a({issues:h}));else if(u.code==="invalid_key")a({issues:u.issues});else if(u.code==="invalid_element")a({issues:u.issues});else if(u.path.length===0)r._errors.push(s(u));else{let h=r,f=0;for(;f<u.path.length;){const m=u.path[f];f===u.path.length-1?(h[m]=h[m]||{_errors:[]},h[m]._errors.push(s(u))):h[m]=h[m]||{_errors:[]},h=h[m],f++}}};return a(t),r}const cN=t=>(e,s,r,a)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},u=e._zod.run({value:s,issues:[]},o);if(u instanceof Promise)throw new jd;if(u.issues.length){const h=new(a?.Err??t)(u.issues.map(f=>Xl(f,o,Ql())));throw aN(h,a?.callee),h}return u.value},n5=cN(Em),uN=t=>async(e,s,r,a)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let u=e._zod.run({value:s,issues:[]},o);if(u instanceof Promise&&(u=await u),u.issues.length){const h=new(a?.Err??t)(u.issues.map(f=>Xl(f,o,Ql())));throw aN(h,a?.callee),h}return u.value},i5=uN(Em),dN=t=>(e,s,r)=>{const a=r?{...r,async:!1}:{async:!1},o=e._zod.run({value:s,issues:[]},a);if(o instanceof Promise)throw new jd;return o.issues.length?{success:!1,error:new(t??Qy)(o.issues.map(u=>Xl(u,a,Ql())))}:{success:!0,data:o.value}},a5=dN(Em),hN=t=>async(e,s,r)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:s,issues:[]},a);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(u=>Xl(u,a,Ql())))}:{success:!0,data:o.value}},l5=hN(Em),o5=/^[cC][^\s-]{8,}$/,c5=/^[0-9a-z]+$/,u5=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,d5=/^[0-9a-vA-V]{20}$/,h5=/^[A-Za-z0-9]{27}$/,f5=/^[a-zA-Z0-9_-]{21}$/,m5=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,p5=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,z_=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,g5=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,y5="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function x5(){return new RegExp(y5,"u")}const b5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,v5=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,w5=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,_5=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,j5=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,fN=/^[A-Za-z0-9_-]*$/,N5=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,S5=/^\+(?:[0-9]){6,14}[0-9]$/,mN="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",E5=new RegExp(`^${mN}$`);function pN(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function A5(t){return new RegExp(`^${pN(t)}$`)}function C5(t){const e=pN({precision:t.precision}),s=["Z"];t.local&&s.push(""),t.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${s.join("|")})`;return new RegExp(`^${mN}T(?:${r})$`)}const k5=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},T5=/^\d+$/,O5=/^-?\d+(?:\.\d+)?/i,R5=/^[^A-Z]*$/,M5=/^[^a-z]*$/,Ar=je("$ZodCheck",(t,e)=>{var s;t._zod??(t._zod={}),t._zod.def=e,(s=t._zod).onattach??(s.onattach=[])}),gN={number:"number",bigint:"bigint",object:"date"},yN=je("$ZodCheckLessThan",(t,e)=>{Ar.init(t,e);const s=gN[typeof e.value];t._zod.onattach.push(r=>{const a=r._zod.bag,o=(e.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?a.maximum=e.value:a.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:s,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),xN=je("$ZodCheckGreaterThan",(t,e)=>{Ar.init(t,e);const s=gN[typeof e.value];t._zod.onattach.push(r=>{const a=r._zod.bag,o=(e.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?a.minimum=e.value:a.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:s,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),D5=je("$ZodCheckMultipleOf",(t,e)=>{Ar.init(t,e),t._zod.onattach.push(s=>{var r;(r=s._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=s=>{if(typeof s.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof s.value=="bigint"?s.value%e.value===BigInt(0):V4(s.value,e.value)===0)||s.issues.push({origin:typeof s.value,code:"not_multiple_of",divisor:e.value,input:s.value,inst:t,continue:!e.abort})}}),L5=je("$ZodCheckNumberFormat",(t,e)=>{Ar.init(t,e),e.format=e.format||"float64";const s=e.format?.includes("int"),r=s?"int":"number",[a,o]=K4[e.format];t._zod.onattach.push(u=>{const h=u._zod.bag;h.format=e.format,h.minimum=a,h.maximum=o,s&&(h.pattern=T5)}),t._zod.check=u=>{const h=u.value;if(s){if(!Number.isInteger(h)){u.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:h,inst:t});return}if(!Number.isSafeInteger(h)){h>0?u.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):u.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}h<a&&u.issues.push({origin:"number",input:h,code:"too_small",minimum:a,inclusive:!0,inst:t,continue:!e.abort}),h>o&&u.issues.push({origin:"number",input:h,code:"too_big",maximum:o,inst:t})}}),q5=je("$ZodCheckMaxLength",(t,e)=>{var s;Ar.init(t,e),(s=t._zod.def).when??(s.when=r=>{const a=r.value;return!Yy(a)&&a.length!==void 0}),t._zod.onattach.push(r=>{const a=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<a&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const a=r.value;if(a.length<=e.maximum)return;const u=Wy(a);r.issues.push({origin:u,code:"too_big",maximum:e.maximum,inclusive:!0,input:a,inst:t,continue:!e.abort})}}),P5=je("$ZodCheckMinLength",(t,e)=>{var s;Ar.init(t,e),(s=t._zod.def).when??(s.when=r=>{const a=r.value;return!Yy(a)&&a.length!==void 0}),t._zod.onattach.push(r=>{const a=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>a&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const a=r.value;if(a.length>=e.minimum)return;const u=Wy(a);r.issues.push({origin:u,code:"too_small",minimum:e.minimum,inclusive:!0,input:a,inst:t,continue:!e.abort})}}),I5=je("$ZodCheckLengthEquals",(t,e)=>{var s;Ar.init(t,e),(s=t._zod.def).when??(s.when=r=>{const a=r.value;return!Yy(a)&&a.length!==void 0}),t._zod.onattach.push(r=>{const a=r._zod.bag;a.minimum=e.length,a.maximum=e.length,a.length=e.length}),t._zod.check=r=>{const a=r.value,o=a.length;if(o===e.length)return;const u=Wy(a),h=o>e.length;r.issues.push({origin:u,...h?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),Am=je("$ZodCheckStringFormat",(t,e)=>{var s,r;Ar.init(t,e),t._zod.onattach.push(a=>{const o=a._zod.bag;o.format=e.format,e.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(e.pattern))}),e.pattern?(s=t._zod).check??(s.check=a=>{e.pattern.lastIndex=0,!e.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:e.format,input:a.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),$5=je("$ZodCheckRegex",(t,e)=>{Am.init(t,e),t._zod.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),U5=je("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=R5),Am.init(t,e)}),B5=je("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=M5),Am.init(t,e)}),z5=je("$ZodCheckIncludes",(t,e)=>{Ar.init(t,e);const s=Sm(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${s}`:s);e.pattern=r,t._zod.onattach.push(a=>{const o=a._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=a=>{a.value.includes(e.includes,e.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:a.value,inst:t,continue:!e.abort})}}),F5=je("$ZodCheckStartsWith",(t,e)=>{Ar.init(t,e);const s=new RegExp(`^${Sm(e.prefix)}.*`);e.pattern??(e.pattern=s),t._zod.onattach.push(r=>{const a=r._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(s)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),H5=je("$ZodCheckEndsWith",(t,e)=>{Ar.init(t,e);const s=new RegExp(`.*${Sm(e.suffix)}$`);e.pattern??(e.pattern=s),t._zod.onattach.push(r=>{const a=r._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(s)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),V5=je("$ZodCheckOverwrite",(t,e)=>{Ar.init(t,e),t._zod.check=s=>{s.value=e.tx(s.value)}});class G5{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(u=>u),a=Math.min(...r.map(u=>u.length-u.trimStart().length)),o=r.map(u=>u.slice(a)).map(u=>" ".repeat(this.indent*2)+u);for(const u of o)this.content.push(u)}compile(){const e=Function,s=this?.args,a=[...(this?.content??[""]).map(o=>`  ${o}`)];return new e(...s,a.join(`
`))}}const Z5={major:4,minor:0,patch:14},ps=je("$ZodType",(t,e)=>{var s;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=Z5;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const a of r)for(const o of a._zod.onattach)o(t);if(r.length===0)(s=t._zod).deferred??(s.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const a=(o,u,h)=>{let f=gd(o),m;for(const g of u){if(g._zod.def.when){if(!g._zod.def.when(o))continue}else if(f)continue;const x=o.issues.length,v=g._zod.check(o);if(v instanceof Promise&&h?.async===!1)throw new jd;if(m||v instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await v,o.issues.length!==x&&(f||(f=gd(o,x)))});else{if(o.issues.length===x)continue;f||(f=gd(o,x))}}return m?m.then(()=>o):o};t._zod.run=(o,u)=>{const h=t._zod.parse(o,u);if(h instanceof Promise){if(u.async===!1)throw new jd;return h.then(f=>a(f,r,u))}return a(h,r,u)}}t["~standard"]={validate:a=>{try{const o=a5(t,a);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return l5(t,a).then(u=>u.success?{value:u.data}:{issues:u.error?.issues})}},vendor:"zod",version:1}}),Xy=je("$ZodString",(t,e)=>{ps.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??k5(t._zod.bag),t._zod.parse=(s,r)=>{if(e.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:t}),s}}),Yt=je("$ZodStringFormat",(t,e)=>{Am.init(t,e),Xy.init(t,e)}),Y5=je("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=p5),Yt.init(t,e)}),K5=je("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=z_(r))}else e.pattern??(e.pattern=z_());Yt.init(t,e)}),W5=je("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=g5),Yt.init(t,e)}),Q5=je("$ZodURL",(t,e)=>{Yt.init(t,e),t._zod.check=s=>{try{const r=s.value.trim(),a=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(a.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:N5.source,input:s.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:s.value,inst:t,continue:!e.abort})),e.normalize?s.value=a.href:s.value=r;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:t,continue:!e.abort})}}}),X5=je("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=x5()),Yt.init(t,e)}),J5=je("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=f5),Yt.init(t,e)}),e3=je("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=o5),Yt.init(t,e)}),t3=je("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=c5),Yt.init(t,e)}),s3=je("$ZodULID",(t,e)=>{e.pattern??(e.pattern=u5),Yt.init(t,e)}),r3=je("$ZodXID",(t,e)=>{e.pattern??(e.pattern=d5),Yt.init(t,e)}),n3=je("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=h5),Yt.init(t,e)}),i3=je("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=C5(e)),Yt.init(t,e)}),a3=je("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=E5),Yt.init(t,e)}),l3=je("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=A5(e)),Yt.init(t,e)}),o3=je("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=m5),Yt.init(t,e)}),c3=je("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=b5),Yt.init(t,e),t._zod.onattach.push(s=>{const r=s._zod.bag;r.format="ipv4"})}),u3=je("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=v5),Yt.init(t,e),t._zod.onattach.push(s=>{const r=s._zod.bag;r.format="ipv6"}),t._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:t,continue:!e.abort})}}}),d3=je("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=w5),Yt.init(t,e)}),h3=je("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=_5),Yt.init(t,e),t._zod.check=s=>{const[r,a]=s.value.split("/");try{if(!a)throw new Error;const o=Number(a);if(`${o}`!==a)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${r}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:t,continue:!e.abort})}}});function bN(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const f3=je("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=j5),Yt.init(t,e),t._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64"}),t._zod.check=s=>{bN(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:t,continue:!e.abort})}});function m3(t){if(!fN.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),s=e.padEnd(Math.ceil(e.length/4)*4,"=");return bN(s)}const p3=je("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=fN),Yt.init(t,e),t._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64url"}),t._zod.check=s=>{m3(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:t,continue:!e.abort})}}),g3=je("$ZodE164",(t,e)=>{e.pattern??(e.pattern=S5),Yt.init(t,e)});function y3(t,e=null){try{const s=t.split(".");if(s.length!==3)return!1;const[r]=s;if(!r)return!1;const a=JSON.parse(atob(r));return!("typ"in a&&a?.typ!=="JWT"||!a.alg||e&&(!("alg"in a)||a.alg!==e))}catch{return!1}}const x3=je("$ZodJWT",(t,e)=>{Yt.init(t,e),t._zod.check=s=>{y3(s.value,e.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:t,continue:!e.abort})}}),vN=je("$ZodNumber",(t,e)=>{ps.init(t,e),t._zod.pattern=t._zod.bag.pattern??O5,t._zod.parse=(s,r)=>{if(e.coerce)try{s.value=Number(s.value)}catch{}const a=s.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return s;const o=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return s.issues.push({expected:"number",code:"invalid_type",input:a,inst:t,...o?{received:o}:{}}),s}}),b3=je("$ZodNumber",(t,e)=>{L5.init(t,e),vN.init(t,e)}),v3=je("$ZodUnknown",(t,e)=>{ps.init(t,e),t._zod.parse=s=>s}),w3=je("$ZodNever",(t,e)=>{ps.init(t,e),t._zod.parse=(s,r)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:t}),s)});function F_(t,e,s){t.issues.length&&e.issues.push(...lN(s,t.issues)),e.value[s]=t.value}const _3=je("$ZodArray",(t,e)=>{ps.init(t,e),t._zod.parse=(s,r)=>{const a=s.value;if(!Array.isArray(a))return s.issues.push({expected:"array",code:"invalid_type",input:a,inst:t}),s;s.value=Array(a.length);const o=[];for(let u=0;u<a.length;u++){const h=a[u],f=e.element._zod.run({value:h,issues:[]},r);f instanceof Promise?o.push(f.then(m=>F_(m,s,u))):F_(f,s,u)}return o.length?Promise.all(o).then(()=>s):s}});function hf(t,e,s,r){t.issues.length&&e.issues.push(...lN(s,t.issues)),t.value===void 0?s in r&&(e.value[s]=void 0):e.value[s]=t.value}const j3=je("$ZodObject",(t,e)=>{ps.init(t,e);const s=iN(()=>{const x=Object.keys(e.shape);for(const _ of x)if(!(e.shape[_]instanceof ps))throw new Error(`Invalid element at key "${_}": expected a Zod schema`);const v=Y4(e.shape);return{shape:e.shape,keys:x,keySet:new Set(x),numKeys:x.length,optionalKeys:new Set(v)}});zt(t._zod,"propValues",()=>{const x=e.shape,v={};for(const _ in x){const b=x[_]._zod;if(b.values){v[_]??(v[_]=new Set);for(const N of b.values)v[_].add(N)}}return v});const r=x=>{const v=new G5(["shape","payload","ctx"]),_=s.value,b=A=>{const O=B_(A);return`shape[${O}]._zod.run({ value: input[${O}], issues: [] }, ctx)`};v.write("const input = payload.value;");const N=Object.create(null);let w=0;for(const A of _.keys)N[A]=`key_${w++}`;v.write("const newResult = {}");for(const A of _.keys){const O=N[A],F=B_(A);v.write(`const ${O} = ${b(A)};`),v.write(`
        if (${O}.issues.length) {
          payload.issues = payload.issues.concat(${O}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${F}, ...iss.path] : [${F}]
          })));
        }
        
        if (${O}.value === undefined) {
          if (${F} in input) {
            newResult[${F}] = undefined;
          }
        } else {
          newResult[${F}] = ${O}.value;
        }
      `)}v.write("payload.value = newResult;"),v.write("return payload;");const E=v.compile();return(A,O)=>E(x,A,O)};let a;const o=U0,u=!nN.jitless,f=u&&G4.value,m=e.catchall;let g;t._zod.parse=(x,v)=>{g??(g=s.value);const _=x.value;if(!o(_))return x.issues.push({expected:"object",code:"invalid_type",input:_,inst:t}),x;const b=[];if(u&&f&&v?.async===!1&&v.jitless!==!0)a||(a=r(e.shape)),x=a(x,v);else{x.value={};const O=g.shape;for(const F of g.keys){const L=O[F]._zod.run({value:_[F],issues:[]},v);L instanceof Promise?b.push(L.then(B=>hf(B,x,F,_))):hf(L,x,F,_)}}if(!m)return b.length?Promise.all(b).then(()=>x):x;const N=[],w=g.keySet,E=m._zod,A=E.def.type;for(const O of Object.keys(_)){if(w.has(O))continue;if(A==="never"){N.push(O);continue}const F=E.run({value:_[O],issues:[]},v);F instanceof Promise?b.push(F.then(C=>hf(C,x,O,_))):hf(F,x,O,_)}return N.length&&x.issues.push({code:"unrecognized_keys",keys:N,input:_,inst:t}),b.length?Promise.all(b).then(()=>x):x}});function H_(t,e,s,r){for(const o of t)if(o.issues.length===0)return e.value=o.value,e;const a=t.filter(o=>!gd(o));return a.length===1?(e.value=a[0].value,a[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:s,errors:t.map(o=>o.issues.map(u=>Xl(u,r,Ql())))}),e)}const N3=je("$ZodUnion",(t,e)=>{ps.init(t,e),zt(t._zod,"optin",()=>e.options.some(a=>a._zod.optin==="optional")?"optional":void 0),zt(t._zod,"optout",()=>e.options.some(a=>a._zod.optout==="optional")?"optional":void 0),zt(t._zod,"values",()=>{if(e.options.every(a=>a._zod.values))return new Set(e.options.flatMap(a=>Array.from(a._zod.values)))}),zt(t._zod,"pattern",()=>{if(e.options.every(a=>a._zod.pattern)){const a=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${a.map(o=>Ky(o.source)).join("|")})$`)}});const s=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(a,o)=>{if(s)return r(a,o);let u=!1;const h=[];for(const f of e.options){const m=f._zod.run({value:a.value,issues:[]},o);if(m instanceof Promise)h.push(m),u=!0;else{if(m.issues.length===0)return m;h.push(m)}}return u?Promise.all(h).then(f=>H_(f,a,t,o)):H_(h,a,t,o)}}),S3=je("$ZodIntersection",(t,e)=>{ps.init(t,e),t._zod.parse=(s,r)=>{const a=s.value,o=e.left._zod.run({value:a,issues:[]},r),u=e.right._zod.run({value:a,issues:[]},r);return o instanceof Promise||u instanceof Promise?Promise.all([o,u]).then(([f,m])=>V_(s,f,m)):V_(s,o,u)}});function z0(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(B0(t)&&B0(e)){const s=Object.keys(e),r=Object.keys(t).filter(o=>s.indexOf(o)!==-1),a={...t,...e};for(const o of r){const u=z0(t[o],e[o]);if(!u.valid)return{valid:!1,mergeErrorPath:[o,...u.mergeErrorPath]};a[o]=u.data}return{valid:!0,data:a}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let r=0;r<t.length;r++){const a=t[r],o=e[r],u=z0(a,o);if(!u.valid)return{valid:!1,mergeErrorPath:[r,...u.mergeErrorPath]};s.push(u.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function V_(t,e,s){if(e.issues.length&&t.issues.push(...e.issues),s.issues.length&&t.issues.push(...s.issues),gd(t))return t;const r=z0(e.value,s.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const E3=je("$ZodEnum",(t,e)=>{ps.init(t,e);const s=H4(e.entries),r=new Set(s);t._zod.values=r,t._zod.pattern=new RegExp(`^(${s.filter(a=>Z4.has(typeof a)).map(a=>typeof a=="string"?Sm(a):a.toString()).join("|")})$`),t._zod.parse=(a,o)=>{const u=a.value;return r.has(u)||a.issues.push({code:"invalid_value",values:s,input:u,inst:t}),a}}),A3=je("$ZodTransform",(t,e)=>{ps.init(t,e),t._zod.parse=(s,r)=>{const a=e.transform(s.value,s);if(r.async)return(a instanceof Promise?a:Promise.resolve(a)).then(u=>(s.value=u,s));if(a instanceof Promise)throw new jd;return s.value=a,s}});function G_(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const C3=je("$ZodOptional",(t,e)=>{ps.init(t,e),t._zod.optin="optional",t._zod.optout="optional",zt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),zt(t._zod,"pattern",()=>{const s=e.innerType._zod.pattern;return s?new RegExp(`^(${Ky(s.source)})?$`):void 0}),t._zod.parse=(s,r)=>{if(e.innerType._zod.optin==="optional"){const a=e.innerType._zod.run(s,r);return a instanceof Promise?a.then(o=>G_(o,s.value)):G_(a,s.value)}return s.value===void 0?s:e.innerType._zod.run(s,r)}}),k3=je("$ZodNullable",(t,e)=>{ps.init(t,e),zt(t._zod,"optin",()=>e.innerType._zod.optin),zt(t._zod,"optout",()=>e.innerType._zod.optout),zt(t._zod,"pattern",()=>{const s=e.innerType._zod.pattern;return s?new RegExp(`^(${Ky(s.source)}|null)$`):void 0}),zt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(s,r)=>s.value===null?s:e.innerType._zod.run(s,r)}),T3=je("$ZodDefault",(t,e)=>{ps.init(t,e),t._zod.optin="optional",zt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(s,r)=>{if(s.value===void 0)return s.value=e.defaultValue,s;const a=e.innerType._zod.run(s,r);return a instanceof Promise?a.then(o=>Z_(o,e)):Z_(a,e)}});function Z_(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const O3=je("$ZodPrefault",(t,e)=>{ps.init(t,e),t._zod.optin="optional",zt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(s,r)=>(s.value===void 0&&(s.value=e.defaultValue),e.innerType._zod.run(s,r))}),R3=je("$ZodNonOptional",(t,e)=>{ps.init(t,e),zt(t._zod,"values",()=>{const s=e.innerType._zod.values;return s?new Set([...s].filter(r=>r!==void 0)):void 0}),t._zod.parse=(s,r)=>{const a=e.innerType._zod.run(s,r);return a instanceof Promise?a.then(o=>Y_(o,t)):Y_(a,t)}});function Y_(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const M3=je("$ZodCatch",(t,e)=>{ps.init(t,e),zt(t._zod,"optin",()=>e.innerType._zod.optin),zt(t._zod,"optout",()=>e.innerType._zod.optout),zt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(s,r)=>{const a=e.innerType._zod.run(s,r);return a instanceof Promise?a.then(o=>(s.value=o.value,o.issues.length&&(s.value=e.catchValue({...s,error:{issues:o.issues.map(u=>Xl(u,r,Ql()))},input:s.value}),s.issues=[]),s)):(s.value=a.value,a.issues.length&&(s.value=e.catchValue({...s,error:{issues:a.issues.map(o=>Xl(o,r,Ql()))},input:s.value}),s.issues=[]),s)}}),D3=je("$ZodPipe",(t,e)=>{ps.init(t,e),zt(t._zod,"values",()=>e.in._zod.values),zt(t._zod,"optin",()=>e.in._zod.optin),zt(t._zod,"optout",()=>e.out._zod.optout),zt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(s,r)=>{const a=e.in._zod.run(s,r);return a instanceof Promise?a.then(o=>K_(o,e,r)):K_(a,e,r)}});function K_(t,e,s){return t.issues.length?t:e.out._zod.run({value:t.value,issues:t.issues},s)}const L3=je("$ZodReadonly",(t,e)=>{ps.init(t,e),zt(t._zod,"propValues",()=>e.innerType._zod.propValues),zt(t._zod,"values",()=>e.innerType._zod.values),zt(t._zod,"optin",()=>e.innerType._zod.optin),zt(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(s,r)=>{const a=e.innerType._zod.run(s,r);return a instanceof Promise?a.then(W_):W_(a)}});function W_(t){return t.value=Object.freeze(t.value),t}const q3=je("$ZodCustom",(t,e)=>{Ar.init(t,e),ps.init(t,e),t._zod.parse=(s,r)=>s,t._zod.check=s=>{const r=s.value,a=e.fn(r);if(a instanceof Promise)return a.then(o=>Q_(o,s,r,t));Q_(a,s,r,t)}});function Q_(t,e,s,r){if(!t){const a={code:"custom",input:s,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(a.params=r._zod.def.params),e.issues.push(Nd(a))}}class P3{constructor(){this._map=new Map,this._idmap=new Map}add(e,...s){const r=s[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const s=this._map.get(e);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(e),this}get(e){const s=e._zod.parent;if(s){const r={...this.get(s)??{}};delete r.id;const a={...r,...this._map.get(e)};return Object.keys(a).length?a:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function I3(){return new P3}const ff=I3();function $3(t,e){return new t({type:"string",...Ye(e)})}function U3(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Ye(e)})}function X_(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Ye(e)})}function B3(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Ye(e)})}function z3(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ye(e)})}function F3(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ye(e)})}function H3(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ye(e)})}function V3(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Ye(e)})}function G3(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Ye(e)})}function Z3(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ye(e)})}function Y3(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Ye(e)})}function K3(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ye(e)})}function W3(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Ye(e)})}function Q3(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Ye(e)})}function X3(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ye(e)})}function J3(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ye(e)})}function e6(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ye(e)})}function t6(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ye(e)})}function s6(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ye(e)})}function r6(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Ye(e)})}function n6(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Ye(e)})}function i6(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Ye(e)})}function a6(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Ye(e)})}function l6(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ye(e)})}function o6(t,e){return new t({type:"string",format:"date",check:"string_format",...Ye(e)})}function c6(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Ye(e)})}function u6(t,e){return new t({type:"string",format:"duration",check:"string_format",...Ye(e)})}function d6(t,e){return new t({type:"number",checks:[],...Ye(e)})}function h6(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...Ye(e)})}function f6(t){return new t({type:"unknown"})}function m6(t,e){return new t({type:"never",...Ye(e)})}function J_(t,e){return new yN({check:"less_than",...Ye(e),value:t,inclusive:!1})}function Jg(t,e){return new yN({check:"less_than",...Ye(e),value:t,inclusive:!0})}function e1(t,e){return new xN({check:"greater_than",...Ye(e),value:t,inclusive:!1})}function e0(t,e){return new xN({check:"greater_than",...Ye(e),value:t,inclusive:!0})}function t1(t,e){return new D5({check:"multiple_of",...Ye(e),value:t})}function wN(t,e){return new q5({check:"max_length",...Ye(e),maximum:t})}function Qf(t,e){return new P5({check:"min_length",...Ye(e),minimum:t})}function _N(t,e){return new I5({check:"length_equals",...Ye(e),length:t})}function p6(t,e){return new $5({check:"string_format",format:"regex",...Ye(e),pattern:t})}function g6(t){return new U5({check:"string_format",format:"lowercase",...Ye(t)})}function y6(t){return new B5({check:"string_format",format:"uppercase",...Ye(t)})}function x6(t,e){return new z5({check:"string_format",format:"includes",...Ye(e),includes:t})}function b6(t,e){return new F5({check:"string_format",format:"starts_with",...Ye(e),prefix:t})}function v6(t,e){return new H5({check:"string_format",format:"ends_with",...Ye(e),suffix:t})}function Bd(t){return new V5({check:"overwrite",tx:t})}function w6(t){return Bd(e=>e.normalize(t))}function _6(){return Bd(t=>t.trim())}function j6(){return Bd(t=>t.toLowerCase())}function N6(){return Bd(t=>t.toUpperCase())}function S6(t,e,s){return new t({type:"array",element:e,...Ye(s)})}function E6(t,e,s){return new t({type:"custom",check:"custom",fn:e,...Ye(s)})}function A6(t){const e=C6(s=>(s.addIssue=r=>{if(typeof r=="string")s.issues.push(Nd(r,s.value,e._zod.def));else{const a=r;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=s.value),a.inst??(a.inst=e),a.continue??(a.continue=!e._zod.def.abort),s.issues.push(Nd(a))}},t(s.value,s)));return e}function C6(t,e){const s=new Ar({check:"custom",...Ye(e)});return s._zod.check=t,s}function s1(t,e){try{var s=t()}catch(r){return e(r)}return s&&s.then?s.then(void 0,e):s}function k6(t,e){for(var s={};t.length;){var r=t[0],a=r.code,o=r.message,u=r.path.join(".");if(!s[u])if("unionErrors"in r){var h=r.unionErrors[0].errors[0];s[u]={message:h.message,type:h.code}}else s[u]={message:o,type:a};if("unionErrors"in r&&r.unionErrors.forEach(function(g){return g.errors.forEach(function(x){return t.push(x)})}),e){var f=s[u].types,m=f&&f[r.code];s[u]=Vy(u,e,s,a,m?[].concat(m,r.message):r.message)}t.shift()}return s}function T6(t,e){for(var s={};t.length;){var r=t[0],a=r.code,o=r.message,u=r.path.join(".");if(!s[u])if(r.code==="invalid_union"&&r.errors.length>0){var h=r.errors[0][0];s[u]={message:h.message,type:h.code}}else s[u]={message:o,type:a};if(r.code==="invalid_union"&&r.errors.forEach(function(g){return g.forEach(function(x){return t.push(x)})}),e){var f=s[u].types,m=f&&f[r.code];s[u]=Vy(u,e,s,a,m?[].concat(m,r.message):r.message)}t.shift()}return s}function zd(t,e,s){if(s===void 0&&(s={}),function(r){return"_def"in r&&typeof r._def=="object"&&"typeName"in r._def}(t))return function(r,a,o){try{return Promise.resolve(s1(function(){return Promise.resolve(t[s.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return o.shouldUseNativeValidation&&I0({},o),{errors:{},values:s.raw?Object.assign({},r):u}})},function(u){if(function(h){return Array.isArray(h?.issues)}(u))return{values:{},errors:I_(k6(u.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw u}))}catch(u){return Promise.reject(u)}};if(function(r){return"_zod"in r&&typeof r._zod=="object"}(t))return function(r,a,o){try{return Promise.resolve(s1(function(){return Promise.resolve((s.mode==="sync"?n5:i5)(t,r,e)).then(function(u){return o.shouldUseNativeValidation&&I0({},o),{errors:{},values:s.raw?Object.assign({},r):u}})},function(u){if(function(h){return h instanceof Qy}(u))return{values:{},errors:I_(T6(u.issues,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw u}))}catch(u){return Promise.reject(u)}};throw new Error("Invalid input: not a Zod schema")}const O6=je("ZodISODateTime",(t,e)=>{i3.init(t,e),Jt.init(t,e)});function R6(t){return l6(O6,t)}const M6=je("ZodISODate",(t,e)=>{a3.init(t,e),Jt.init(t,e)});function D6(t){return o6(M6,t)}const L6=je("ZodISOTime",(t,e)=>{l3.init(t,e),Jt.init(t,e)});function q6(t){return c6(L6,t)}const P6=je("ZodISODuration",(t,e)=>{o3.init(t,e),Jt.init(t,e)});function I6(t){return u6(P6,t)}const $6=(t,e)=>{Qy.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:s=>r5(t,s)},flatten:{value:s=>s5(t,s)},addIssue:{value:s=>{t.issues.push(s),t.message=JSON.stringify(t.issues,$0,2)}},addIssues:{value:s=>{t.issues.push(...s),t.message=JSON.stringify(t.issues,$0,2)}},isEmpty:{get(){return t.issues.length===0}}})},Cm=je("ZodError",$6,{Parent:Error}),U6=cN(Cm),B6=uN(Cm),z6=dN(Cm),F6=hN(Cm),Rs=je("ZodType",(t,e)=>(ps.init(t,e),t.def=e,Object.defineProperty(t,"_def",{value:e}),t.check=(...s)=>t.clone({...e,checks:[...e.checks??[],...s.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),t.clone=(s,r)=>lo(t,s,r),t.brand=()=>t,t.register=(s,r)=>(s.add(t,r),t),t.parse=(s,r)=>U6(t,s,r,{callee:t.parse}),t.safeParse=(s,r)=>z6(t,s,r),t.parseAsync=async(s,r)=>B6(t,s,r,{callee:t.parseAsync}),t.safeParseAsync=async(s,r)=>F6(t,s,r),t.spa=t.safeParseAsync,t.refine=(s,r)=>t.check(DO(s,r)),t.superRefine=s=>t.check(LO(s)),t.overwrite=s=>t.check(Bd(s)),t.optional=()=>a1(t),t.nullable=()=>l1(t),t.nullish=()=>a1(l1(t)),t.nonoptional=s=>AO(t,s),t.array=()=>fO(t),t.or=s=>gO([t,s]),t.and=s=>xO(t,s),t.transform=s=>o1(t,wO(s)),t.default=s=>NO(t,s),t.prefault=s=>EO(t,s),t.catch=s=>kO(t,s),t.pipe=s=>o1(t,s),t.readonly=()=>RO(t),t.describe=s=>{const r=t.clone();return ff.add(r,{description:s}),r},Object.defineProperty(t,"description",{get(){return ff.get(t)?.description},configurable:!0}),t.meta=(...s)=>{if(s.length===0)return ff.get(t);const r=t.clone();return ff.add(r,s[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),jN=je("_ZodString",(t,e)=>{Xy.init(t,e),Rs.init(t,e);const s=t._zod.bag;t.format=s.format??null,t.minLength=s.minimum??null,t.maxLength=s.maximum??null,t.regex=(...r)=>t.check(p6(...r)),t.includes=(...r)=>t.check(x6(...r)),t.startsWith=(...r)=>t.check(b6(...r)),t.endsWith=(...r)=>t.check(v6(...r)),t.min=(...r)=>t.check(Qf(...r)),t.max=(...r)=>t.check(wN(...r)),t.length=(...r)=>t.check(_N(...r)),t.nonempty=(...r)=>t.check(Qf(1,...r)),t.lowercase=r=>t.check(g6(r)),t.uppercase=r=>t.check(y6(r)),t.trim=()=>t.check(_6()),t.normalize=(...r)=>t.check(w6(...r)),t.toLowerCase=()=>t.check(j6()),t.toUpperCase=()=>t.check(N6())}),H6=je("ZodString",(t,e)=>{Xy.init(t,e),jN.init(t,e),t.email=s=>t.check(U3(V6,s)),t.url=s=>t.check(V3(G6,s)),t.jwt=s=>t.check(a6(lO,s)),t.emoji=s=>t.check(G3(Z6,s)),t.guid=s=>t.check(X_(r1,s)),t.uuid=s=>t.check(B3(mf,s)),t.uuidv4=s=>t.check(z3(mf,s)),t.uuidv6=s=>t.check(F3(mf,s)),t.uuidv7=s=>t.check(H3(mf,s)),t.nanoid=s=>t.check(Z3(Y6,s)),t.guid=s=>t.check(X_(r1,s)),t.cuid=s=>t.check(Y3(K6,s)),t.cuid2=s=>t.check(K3(W6,s)),t.ulid=s=>t.check(W3(Q6,s)),t.base64=s=>t.check(r6(nO,s)),t.base64url=s=>t.check(n6(iO,s)),t.xid=s=>t.check(Q3(X6,s)),t.ksuid=s=>t.check(X3(J6,s)),t.ipv4=s=>t.check(J3(eO,s)),t.ipv6=s=>t.check(e6(tO,s)),t.cidrv4=s=>t.check(t6(sO,s)),t.cidrv6=s=>t.check(s6(rO,s)),t.e164=s=>t.check(i6(aO,s)),t.datetime=s=>t.check(R6(s)),t.date=s=>t.check(D6(s)),t.time=s=>t.check(q6(s)),t.duration=s=>t.check(I6(s))});function Wt(t){return $3(H6,t)}const Jt=je("ZodStringFormat",(t,e)=>{Yt.init(t,e),jN.init(t,e)}),V6=je("ZodEmail",(t,e)=>{W5.init(t,e),Jt.init(t,e)}),r1=je("ZodGUID",(t,e)=>{Y5.init(t,e),Jt.init(t,e)}),mf=je("ZodUUID",(t,e)=>{K5.init(t,e),Jt.init(t,e)}),G6=je("ZodURL",(t,e)=>{Q5.init(t,e),Jt.init(t,e)}),Z6=je("ZodEmoji",(t,e)=>{X5.init(t,e),Jt.init(t,e)}),Y6=je("ZodNanoID",(t,e)=>{J5.init(t,e),Jt.init(t,e)}),K6=je("ZodCUID",(t,e)=>{e3.init(t,e),Jt.init(t,e)}),W6=je("ZodCUID2",(t,e)=>{t3.init(t,e),Jt.init(t,e)}),Q6=je("ZodULID",(t,e)=>{s3.init(t,e),Jt.init(t,e)}),X6=je("ZodXID",(t,e)=>{r3.init(t,e),Jt.init(t,e)}),J6=je("ZodKSUID",(t,e)=>{n3.init(t,e),Jt.init(t,e)}),eO=je("ZodIPv4",(t,e)=>{c3.init(t,e),Jt.init(t,e)}),tO=je("ZodIPv6",(t,e)=>{u3.init(t,e),Jt.init(t,e)}),sO=je("ZodCIDRv4",(t,e)=>{d3.init(t,e),Jt.init(t,e)}),rO=je("ZodCIDRv6",(t,e)=>{h3.init(t,e),Jt.init(t,e)}),nO=je("ZodBase64",(t,e)=>{f3.init(t,e),Jt.init(t,e)}),iO=je("ZodBase64URL",(t,e)=>{p3.init(t,e),Jt.init(t,e)}),aO=je("ZodE164",(t,e)=>{g3.init(t,e),Jt.init(t,e)}),lO=je("ZodJWT",(t,e)=>{x3.init(t,e),Jt.init(t,e)}),NN=je("ZodNumber",(t,e)=>{vN.init(t,e),Rs.init(t,e),t.gt=(r,a)=>t.check(e1(r,a)),t.gte=(r,a)=>t.check(e0(r,a)),t.min=(r,a)=>t.check(e0(r,a)),t.lt=(r,a)=>t.check(J_(r,a)),t.lte=(r,a)=>t.check(Jg(r,a)),t.max=(r,a)=>t.check(Jg(r,a)),t.int=r=>t.check(n1(r)),t.safe=r=>t.check(n1(r)),t.positive=r=>t.check(e1(0,r)),t.nonnegative=r=>t.check(e0(0,r)),t.negative=r=>t.check(J_(0,r)),t.nonpositive=r=>t.check(Jg(0,r)),t.multipleOf=(r,a)=>t.check(t1(r,a)),t.step=(r,a)=>t.check(t1(r,a)),t.finite=()=>t;const s=t._zod.bag;t.minValue=Math.max(s.minimum??Number.NEGATIVE_INFINITY,s.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(s.maximum??Number.POSITIVE_INFINITY,s.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(s.format??"").includes("int")||Number.isSafeInteger(s.multipleOf??.5),t.isFinite=!0,t.format=s.format??null});function If(t){return d6(NN,t)}const oO=je("ZodNumberFormat",(t,e)=>{b3.init(t,e),NN.init(t,e)});function n1(t){return h6(oO,t)}const cO=je("ZodUnknown",(t,e)=>{v3.init(t,e),Rs.init(t,e)});function i1(){return f6(cO)}const uO=je("ZodNever",(t,e)=>{w3.init(t,e),Rs.init(t,e)});function dO(t){return m6(uO,t)}const hO=je("ZodArray",(t,e)=>{_3.init(t,e),Rs.init(t,e),t.element=e.element,t.min=(s,r)=>t.check(Qf(s,r)),t.nonempty=s=>t.check(Qf(1,s)),t.max=(s,r)=>t.check(wN(s,r)),t.length=(s,r)=>t.check(_N(s,r)),t.unwrap=()=>t.element});function fO(t,e){return S6(hO,t,e)}const mO=je("ZodObject",(t,e)=>{j3.init(t,e),Rs.init(t,e),zt(t,"shape",()=>e.shape),t.keyof=()=>bO(Object.keys(t._zod.def.shape)),t.catchall=s=>t.clone({...t._zod.def,catchall:s}),t.passthrough=()=>t.clone({...t._zod.def,catchall:i1()}),t.loose=()=>t.clone({...t._zod.def,catchall:i1()}),t.strict=()=>t.clone({...t._zod.def,catchall:dO()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=s=>X4(t,s),t.merge=s=>J4(t,s),t.pick=s=>W4(t,s),t.omit=s=>Q4(t,s),t.partial=(...s)=>e5(SN,t,s[0]),t.required=(...s)=>t5(EN,t,s[0])});function Fd(t,e){const s={type:"object",get shape(){return ao(this,"shape",{...t}),this.shape},...Ye(e)};return new mO(s)}const pO=je("ZodUnion",(t,e)=>{N3.init(t,e),Rs.init(t,e),t.options=e.options});function gO(t,e){return new pO({type:"union",options:t,...Ye(e)})}const yO=je("ZodIntersection",(t,e)=>{S3.init(t,e),Rs.init(t,e)});function xO(t,e){return new yO({type:"intersection",left:t,right:e})}const F0=je("ZodEnum",(t,e)=>{E3.init(t,e),Rs.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const s=new Set(Object.keys(e.entries));t.extract=(r,a)=>{const o={};for(const u of r)if(s.has(u))o[u]=e.entries[u];else throw new Error(`Key ${u} not found in enum`);return new F0({...e,checks:[],...Ye(a),entries:o})},t.exclude=(r,a)=>{const o={...e.entries};for(const u of r)if(s.has(u))delete o[u];else throw new Error(`Key ${u} not found in enum`);return new F0({...e,checks:[],...Ye(a),entries:o})}});function bO(t,e){const s=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new F0({type:"enum",entries:s,...Ye(e)})}const vO=je("ZodTransform",(t,e)=>{A3.init(t,e),Rs.init(t,e),t._zod.parse=(s,r)=>{s.addIssue=o=>{if(typeof o=="string")s.issues.push(Nd(o,s.value,e));else{const u=o;u.fatal&&(u.continue=!1),u.code??(u.code="custom"),u.input??(u.input=s.value),u.inst??(u.inst=t),s.issues.push(Nd(u))}};const a=e.transform(s.value,s);return a instanceof Promise?a.then(o=>(s.value=o,s)):(s.value=a,s)}});function wO(t){return new vO({type:"transform",transform:t})}const SN=je("ZodOptional",(t,e)=>{C3.init(t,e),Rs.init(t,e),t.unwrap=()=>t._zod.def.innerType});function a1(t){return new SN({type:"optional",innerType:t})}const _O=je("ZodNullable",(t,e)=>{k3.init(t,e),Rs.init(t,e),t.unwrap=()=>t._zod.def.innerType});function l1(t){return new _O({type:"nullable",innerType:t})}const jO=je("ZodDefault",(t,e)=>{T3.init(t,e),Rs.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function NO(t,e){return new jO({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const SO=je("ZodPrefault",(t,e)=>{O3.init(t,e),Rs.init(t,e),t.unwrap=()=>t._zod.def.innerType});function EO(t,e){return new SO({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const EN=je("ZodNonOptional",(t,e)=>{R3.init(t,e),Rs.init(t,e),t.unwrap=()=>t._zod.def.innerType});function AO(t,e){return new EN({type:"nonoptional",innerType:t,...Ye(e)})}const CO=je("ZodCatch",(t,e)=>{M3.init(t,e),Rs.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function kO(t,e){return new CO({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const TO=je("ZodPipe",(t,e)=>{D3.init(t,e),Rs.init(t,e),t.in=e.in,t.out=e.out});function o1(t,e){return new TO({type:"pipe",in:t,out:e})}const OO=je("ZodReadonly",(t,e)=>{L3.init(t,e),Rs.init(t,e),t.unwrap=()=>t._zod.def.innerType});function RO(t){return new OO({type:"readonly",innerType:t})}const MO=je("ZodCustom",(t,e)=>{q3.init(t,e),Rs.init(t,e)});function DO(t,e={}){return E6(MO,t,e)}function LO(t){return A6(t)}const qO=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>al(async()=>{const{default:r}=await Promise.resolve().then(()=>Hc);return{default:r}},[]).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class Jy extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class PO extends Jy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class c1 extends Jy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class u1 extends Jy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var H0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(H0||(H0={}));var IO=function(t,e,s,r){function a(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{m(r.next(g))}catch(x){u(x)}}function f(g){try{m(r.throw(g))}catch(x){u(x)}}function m(g){g.done?o(g.value):a(g.value).then(h,f)}m((r=r.apply(t,e||[])).next())})};class $O{constructor(e,{headers:s={},customFetch:r,region:a=H0.Any}={}){this.url=e,this.headers=s,this.region=a,this.fetch=qO(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return IO(this,void 0,void 0,function*(){try{const{headers:a,method:o,body:u}=s;let h={},{region:f}=s;f||(f=this.region);const m=new URL(`${this.url}/${e}`);f&&f!=="any"&&(h["x-region"]=f,m.searchParams.set("forceFunctionRegion",f));let g;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(h["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(h["Content-Type"]="application/json",g=JSON.stringify(u)));const x=yield this.fetch(m.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:g}).catch(N=>{throw new PO(N)}),v=x.headers.get("x-relay-error");if(v&&v==="true")throw new c1(x);if(!x.ok)throw new u1(x);let _=((r=x.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return _==="application/json"?b=yield x.json():_==="application/octet-stream"?b=yield x.blob():_==="text/event-stream"?b=x:_==="multipart/form-data"?b=yield x.formData():b=yield x.text(),{data:b,error:null,response:x}}catch(a){return{data:null,error:a,response:a instanceof u1||a instanceof c1?a.context:void 0}}})}}var Bs={},ac={},lc={},oc={},cc={},uc={},UO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Rc=UO();const BO=Rc.fetch,AN=Rc.fetch.bind(Rc),CN=Rc.Headers,zO=Rc.Request,FO=Rc.Response,Hc=Object.freeze(Object.defineProperty({__proto__:null,Headers:CN,Request:zO,Response:FO,default:AN,fetch:BO},Symbol.toStringTag,{value:"Module"})),HO=Uk(Hc);var pf={},d1;function kN(){if(d1)return pf;d1=1,Object.defineProperty(pf,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return pf.default=t,pf}var h1;function TN(){if(h1)return uc;h1=1;var t=uc&&uc.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(uc,"__esModule",{value:!0});const e=t(HO),s=t(kN());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,u){return this.headers=Object.assign({},this.headers),this.headers[o]=u,this}then(o,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const h=this.fetch;let f=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var g,x,v;let _=null,b=null,N=null,w=m.status,E=m.statusText;if(m.ok){if(this.method!=="HEAD"){const C=await m.text();C===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?b=C:b=JSON.parse(C))}const O=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),F=(x=m.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");O&&F&&F.length>1&&(N=parseInt(F[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(_={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,N=null,w=406,E="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const O=await m.text();try{_=JSON.parse(O),Array.isArray(_)&&m.status===404&&(b=[],_=null,w=200,E="OK")}catch{m.status===404&&O===""?(w=204,E="No Content"):_={message:O}}if(_&&this.isMaybeSingle&&(!((v=_?.details)===null||v===void 0)&&v.includes("0 rows"))&&(_=null,w=200,E="OK"),_&&this.shouldThrowOnError)throw new s.default(_)}return{error:_,data:b,count:N,status:w,statusText:E}});return this.shouldThrowOnError||(f=f.catch(m=>{var g,x,v;return{error:{message:`${(g=m?.name)!==null&&g!==void 0?g:"FetchError"}: ${m?.message}`,details:`${(x=m?.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(v=m?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),f.then(o,u)}returns(){return this}overrideTypes(){return this}}return uc.default=r,uc}var f1;function ON(){if(f1)return cc;f1=1;var t=cc&&cc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cc,"__esModule",{value:!0});const e=t(TN());class s extends e.default{select(a){let o=!1;const u=(a??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join("");return this.url.searchParams.set("select",u),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:o=!0,nullsFirst:u,foreignTable:h,referencedTable:f=h}={}){const m=f?`${f}.order`:"order",g=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${g?`${g},`:""}${a}.${o?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:u=o}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${a}`),this}range(a,o,{foreignTable:u,referencedTable:h=u}={}){const f=typeof h>"u"?"offset":`${h}.offset`,m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(f,`${a}`),this.url.searchParams.set(m,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:o=!1,settings:u=!1,buffers:h=!1,wal:f=!1,format:m="text"}={}){var g;const x=[a?"analyze":null,o?"verbose":null,u?"settings":null,h?"buffers":null,f?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${m}; for="${v}"; options=${x};`,m==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return cc.default=s,cc}var m1;function ex(){if(m1)return oc;m1=1;var t=oc&&oc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(oc,"__esModule",{value:!0});const e=t(ON());class s extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const u=Array.from(new Set(o)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(a,`in.(${u})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:u,type:h}={}){let f="";h==="plain"?f="pl":h==="phrase"?f="ph":h==="websearch"&&(f="w");const m=u===void 0?"":`(${u})`;return this.url.searchParams.append(a,`${f}fts${m}.${o}`),this}match(a){return Object.entries(a).forEach(([o,u])=>{this.url.searchParams.append(o,`eq.${u}`)}),this}not(a,o,u){return this.url.searchParams.append(a,`not.${o}.${u}`),this}or(a,{foreignTable:o,referencedTable:u=o}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${a})`),this}filter(a,o,u){return this.url.searchParams.append(a,`${o}.${u}`),this}}return oc.default=s,oc}var p1;function RN(){if(p1)return lc;p1=1;var t=lc&&lc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(lc,"__esModule",{value:!0});const e=t(ex());class s{constructor(a,{headers:o={},schema:u,fetch:h}){this.url=a,this.headers=o,this.schema=u,this.fetch=h}select(a,{head:o=!1,count:u}={}){const h=o?"HEAD":"GET";let f=!1;const m=(a??"*").split("").map(g=>/\s/.test(g)&&!f?"":(g==='"'&&(f=!f),g)).join("");return this.url.searchParams.set("select",m),u&&(this.headers.Prefer=`count=${u}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:o,defaultToNull:u=!0}={}){const h="POST",f=[];if(this.headers.Prefer&&f.push(this.headers.Prefer),o&&f.push(`count=${o}`),u||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(a)){const m=a.reduce((g,x)=>g.concat(Object.keys(x)),[]);if(m.length>0){const g=[...new Set(m)].map(x=>`"${x}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:o,ignoreDuplicates:u=!1,count:h,defaultToNull:f=!0}={}){const m="POST",g=[`resolution=${u?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&g.push(this.headers.Prefer),h&&g.push(`count=${h}`),f||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(a)){const x=a.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(x.length>0){const v=[...new Set(x)].map(_=>`"${_}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:o}={}){const u="PATCH",h=[];return this.headers.Prefer&&h.push(this.headers.Prefer),o&&h.push(`count=${o}`),this.headers.Prefer=h.join(","),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const o="DELETE",u=[];return a&&u.push(`count=${a}`),this.headers.Prefer&&u.unshift(this.headers.Prefer),this.headers.Prefer=u.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return lc.default=s,lc}var td={},sd={},g1;function VO(){return g1||(g1=1,Object.defineProperty(sd,"__esModule",{value:!0}),sd.version=void 0,sd.version="0.0.0-automated"),sd}var y1;function GO(){if(y1)return td;y1=1,Object.defineProperty(td,"__esModule",{value:!0}),td.DEFAULT_HEADERS=void 0;const t=VO();return td.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},td}var x1;function ZO(){if(x1)return ac;x1=1;var t=ac&&ac.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ac,"__esModule",{value:!0});const e=t(RN()),s=t(ex()),r=GO();class a{constructor(u,{headers:h={},schema:f,fetch:m}={}){this.url=u,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),h),this.schemaName=f,this.fetch=m}from(u){const h=new URL(`${this.url}/${u}`);return new e.default(h,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new a(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:f=!1,get:m=!1,count:g}={}){let x;const v=new URL(`${this.url}/rpc/${u}`);let _;f||m?(x=f?"HEAD":"GET",Object.entries(h).filter(([N,w])=>w!==void 0).map(([N,w])=>[N,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([N,w])=>{v.searchParams.append(N,w)})):(x="POST",_=h);const b=Object.assign({},this.headers);return g&&(b.Prefer=`count=${g}`),new s.default({method:x,url:v,headers:b,schema:this.schemaName,body:_,fetch:this.fetch,allowEmpty:!1})}}return ac.default=a,ac}var b1;function YO(){if(b1)return Bs;b1=1;var t=Bs&&Bs.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.PostgrestError=Bs.PostgrestBuilder=Bs.PostgrestTransformBuilder=Bs.PostgrestFilterBuilder=Bs.PostgrestQueryBuilder=Bs.PostgrestClient=void 0;const e=t(ZO());Bs.PostgrestClient=e.default;const s=t(RN());Bs.PostgrestQueryBuilder=s.default;const r=t(ex());Bs.PostgrestFilterBuilder=r.default;const a=t(ON());Bs.PostgrestTransformBuilder=a.default;const o=t(TN());Bs.PostgrestBuilder=o.default;const u=t(kN());return Bs.PostgrestError=u.default,Bs.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:u.default},Bs}var KO=YO();const WO=qd(KO),{PostgrestClient:QO,PostgrestQueryBuilder:_Z,PostgrestFilterBuilder:jZ,PostgrestTransformBuilder:NZ,PostgrestBuilder:SZ,PostgrestError:EZ}=WO;function XO(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const JO=XO(),eR="2.11.15",tR=`realtime-js/${eR}`,sR="1.0.0",MN=1e4,rR=1e3;var yd;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(yd||(yd={}));var rr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(rr||(rr={}));var En;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(En||(En={}));var V0;(function(t){t.websocket="websocket"})(V0||(V0={}));var Vl;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Vl||(Vl={}));class nR{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const a=s.getUint8(1),o=s.getUint8(2);let u=this.HEADER_LENGTH+2;const h=r.decode(e.slice(u,u+a));u=u+a;const f=r.decode(e.slice(u,u+o));u=u+o;const m=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{ref:null,topic:h,event:f,payload:m}}}let DN=class{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Ut;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ut||(Ut={}));const v1=(t,e,s={})=>{var r;const a=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,u)=>(o[u]=iR(u,t,e,a),o),{})},iR=(t,e,s,r)=>{const a=e.find(h=>h.name===t),o=a?.type,u=s[t];return o&&!r.includes(o)?LN(o,u):G0(u)},LN=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return cR(e,s)}switch(t){case Ut.bool:return aR(e);case Ut.float4:case Ut.float8:case Ut.int2:case Ut.int4:case Ut.int8:case Ut.numeric:case Ut.oid:return lR(e);case Ut.json:case Ut.jsonb:return oR(e);case Ut.timestamp:return uR(e);case Ut.abstime:case Ut.date:case Ut.daterange:case Ut.int4range:case Ut.int8range:case Ut.money:case Ut.reltime:case Ut.text:case Ut.time:case Ut.timestamptz:case Ut.timetz:case Ut.tsrange:case Ut.tstzrange:return G0(e);default:return G0(e)}},G0=t=>t,aR=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},lR=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},oR=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},cR=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let o;const u=t.slice(1,s);try{o=JSON.parse("["+u+"]")}catch{o=u?u.split(","):[]}return o.map(h=>LN(e,h))}return t},uR=t=>typeof t=="string"?t.replace(" ","T"):t,qN=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class t0{constructor(e,s,r={},a=MN){this.channel=e,this.event=s,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var w1;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(w1||(w1={}));class xd{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:o,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xd.syncState(this.state,a,o,u),this.pendingDiffs.forEach(f=>{this.state=xd.syncDiff(this.state,f,o,u)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},a=>{const{onJoin:o,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=xd.syncDiff(this.state,a,o,u),h())}),this.onJoin((a,o,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:u})}),this.onLeave((a,o,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,a){const o=this.cloneDeep(e),u=this.transformState(s),h={},f={};return this.map(o,(m,g)=>{u[m]||(f[m]=g)}),this.map(u,(m,g)=>{const x=o[m];if(x){const v=g.map(w=>w.presence_ref),_=x.map(w=>w.presence_ref),b=g.filter(w=>_.indexOf(w.presence_ref)<0),N=x.filter(w=>v.indexOf(w.presence_ref)<0);b.length>0&&(h[m]=b),N.length>0&&(f[m]=N)}else h[m]=g}),this.syncDiff(o,{joins:h,leaves:f},r,a)}static syncDiff(e,s,r,a){const{joins:o,leaves:u}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(o,(h,f)=>{var m;const g=(m=e[h])!==null&&m!==void 0?m:[];if(e[h]=this.cloneDeep(f),g.length>0){const x=e[h].map(_=>_.presence_ref),v=g.filter(_=>x.indexOf(_.presence_ref)<0);e[h].unshift(...v)}r(h,g,f)}),this.map(u,(h,f)=>{let m=e[h];if(!m)return;const g=f.map(x=>x.presence_ref);m=m.filter(x=>g.indexOf(x.presence_ref)<0),e[h]=m,a(h,m,f),m.length===0&&delete e[h]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const a=e[r];return"metas"in a?s[r]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[r]=a,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _1;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(_1||(_1={}));var j1;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(j1||(j1={}));var Zi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Zi||(Zi={}));class tx{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=rr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new t0(this,En.join,this.params,this.timeout),this.rejoinTimer=new DN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rr.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=rr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(En.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new xd(this),this.broadcastEndpointURL=qN(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==rr.closed){const{config:{broadcast:o,presence:u,private:h}}=this.params;this._onError(g=>e?.(Zi.CHANNEL_ERROR,g)),this._onClose(()=>e?.(Zi.CLOSED));const f={},m={broadcast:o,presence:u,postgres_changes:(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&a!==void 0?a:[],private:h};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:g})=>{var x;if(this.socket.setAuth(),g===void 0){e?.(Zi.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,_=(x=v?.length)!==null&&x!==void 0?x:0,b=[];for(let N=0;N<_;N++){const w=v[N],{filter:{event:E,schema:A,table:O,filter:F}}=w,C=g&&g[N];if(C&&C.event===E&&C.schema===A&&C.table===O&&C.filter===F)b.push(Object.assign(Object.assign({},w),{id:C.id}));else{this.unsubscribe(),this.state=rr.errored,e?.(Zi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(Zi.SUBSCRIBED);return}}).receive("error",g=>{this.state=rr.errored,e?.(Zi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e?.(Zi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:u}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var u,h,f;const m=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),m.receive("ok",()=>o("ok")),m.receive("error",()=>o("error")),m.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rr.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(En.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new t0(this,En.leave,{},e),r.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,r){const a=new AbortController,o=setTimeout(()=>a.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(o),u}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new t0(this,e,s,r);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var a,o;const u=e.toLocaleLowerCase(),{close:h,error:f,leave:m,join:g}=En;if(r&&[h,f,m,g].indexOf(u)>=0&&r!==this._joinRef())return;let v=this._onMessage(u,s,r);if(s&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(_=>{var b,N,w;return((b=_.filter)===null||b===void 0?void 0:b.event)==="*"||((w=(N=_.filter)===null||N===void 0?void 0:N.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===u}).map(_=>_.callback(v,r)):(o=this.bindings[u])===null||o===void 0||o.filter(_=>{var b,N,w,E,A,O;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in _){const F=_.id,C=(b=_.filter)===null||b===void 0?void 0:b.event;return F&&((N=s.ids)===null||N===void 0?void 0:N.includes(F))&&(C==="*"||C?.toLocaleLowerCase()===((w=s.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const F=(A=(E=_?.filter)===null||E===void 0?void 0:E.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return F==="*"||F===((O=s?.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===u}).map(_=>{if(typeof v=="object"&&"ids"in v){const b=v.data,{schema:N,table:w,commit_timestamp:E,type:A,errors:O}=b;v=Object.assign(Object.assign({},{schema:N,table:w,commit_timestamp:E,eventType:A,new:{},old:{},errors:O}),this._getPayloadRecords(b))}_.callback(v,r)})}_isClosed(){return this.state===rr.closed}_isJoined(){return this.state===rr.joined}_isJoining(){return this.state===rr.joining}_isLeaving(){return this.state===rr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const a=e.toLocaleLowerCase(),o={type:a,filter:s,callback:r};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&tx.isEqual(a.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(En.close,{},e)}_onError(e){this._on(En.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=v1(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=v1(e.columns,e.old_record)),s}}const N1=()=>{},dR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class hR{constructor(e,s){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=MN,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=N1,this.ref=0,this.logger=N1,this.conn=null,this.sendBuffer=[],this.serializer=new nR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let u;return o?u=o:typeof fetch>"u"?u=(...h)=>al(async()=>{const{default:f}=await Promise.resolve().then(()=>Hc);return{default:f}},void 0).then(({default:f})=>f(...h)):u=fetch,(...h)=>u(...h)},this.endPoint=`${e}/${V0.websocket}`,this.httpEndpoint=qN(e),s?.transport?this.transport=s.transport:this.transport=null,s?.params&&(this.params=s.params),s?.timeout&&(this.timeout=s.timeout),s?.logger&&(this.logger=s.logger),(s?.logLevel||s?.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const a=(r=s?.params)===null||r===void 0?void 0:r.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=s?.reconnectAfterMs?s.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=s?.encode?s.encode:(o,u)=>u(JSON.stringify(o)),this.decode=s?.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new DN(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s?.fetch),s?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=s?.worker||!1,this.workerUrl=s?.workerUrl}this.accessToken=s?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=JO),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:sR}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case yd.connecting:return Vl.Connecting;case yd.open:return Vl.Open;case yd.closing:return Vl.Closing;default:return Vl.Closed}}isConnected(){return this.connectionState()===Vl.Open}channel(e,s={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===r);if(a)return a;{const o=new tx(`realtime:${e}`,s,this);return this.channels.push(o),o}}push(e){const{topic:s,event:r,payload:a,ref:o}=e,u=()=>{this.encode(e,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${s} ${r} (${o})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{const a={access_token:s,version:tR};s&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(En.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(rR,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:a,payload:o,ref:u}=s;r==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),u&&u===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${a} ${u&&"("+u+")"||""}`,o),Array.from(this.channels).filter(h=>h._isMember(r)).forEach(h=>h._trigger(a,o,u)),this.stateChangeCallbacks.message.forEach(h=>h(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(En.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${e}${r}${a}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([dR],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}}class sx extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Fs(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class fR extends sx{constructor(e,s,r){super(e),this.name="StorageApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Z0 extends sx{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var mR=function(t,e,s,r){function a(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{m(r.next(g))}catch(x){u(x)}}function f(g){try{m(r.throw(g))}catch(x){u(x)}}function m(g){g.done?o(g.value):a(g.value).then(h,f)}m((r=r.apply(t,e||[])).next())})};const PN=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>al(async()=>{const{default:r}=await Promise.resolve().then(()=>Hc);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},pR=()=>mR(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield al(()=>Promise.resolve().then(()=>Hc),void 0)).Response:Response}),Y0=t=>{if(Array.isArray(t))return t.map(s=>Y0(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const a=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=Y0(r)}),e},gR=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var oo=function(t,e,s,r){function a(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{m(r.next(g))}catch(x){u(x)}}function f(g){try{m(r.throw(g))}catch(x){u(x)}}function m(g){g.done?o(g.value):a(g.value).then(h,f)}m((r=r.apply(t,e||[])).next())})};const s0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yR=(t,e,s)=>oo(void 0,void 0,void 0,function*(){const r=yield pR();t instanceof r&&!s?.noResolveJson?t.json().then(a=>{const o=t.status||500,u=a?.statusCode||o+"";e(new fR(s0(a),o,u))}).catch(a=>{e(new Z0(s0(a),a))}):e(new Z0(s0(t),t))}),xR=(t,e,s,r)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||!r?a:(gR(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(r)):a.body=r,Object.assign(Object.assign({},a),s))};function Hd(t,e,s,r,a,o){return oo(this,void 0,void 0,function*(){return new Promise((u,h)=>{t(s,xR(e,r,a,o)).then(f=>{if(!f.ok)throw f;return r?.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>yR(f,h,r))})})}function Xf(t,e,s,r){return oo(this,void 0,void 0,function*(){return Hd(t,"GET",e,s,r)})}function Yi(t,e,s,r,a){return oo(this,void 0,void 0,function*(){return Hd(t,"POST",e,r,a,s)})}function K0(t,e,s,r,a){return oo(this,void 0,void 0,function*(){return Hd(t,"PUT",e,r,a,s)})}function bR(t,e,s,r){return oo(this,void 0,void 0,function*(){return Hd(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function IN(t,e,s,r,a){return oo(this,void 0,void 0,function*(){return Hd(t,"DELETE",e,r,a,s)})}var _r=function(t,e,s,r){function a(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{m(r.next(g))}catch(x){u(x)}}function f(g){try{m(r.throw(g))}catch(x){u(x)}}function m(g){g.done?o(g.value):a(g.value).then(h,f)}m((r=r.apply(t,e||[])).next())})};const vR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},S1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wR{constructor(e,s={},r,a){this.url=e,this.headers=s,this.bucketId=r,this.fetch=PN(a)}uploadOrUpdate(e,s,r,a){return _r(this,void 0,void 0,function*(){try{let o;const u=Object.assign(Object.assign({},S1),a);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",u.cacheControl),f&&o.append("metadata",this.encodeMetadata(f))):(o=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,f&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),a?.headers&&(h=Object.assign(Object.assign({},h),a.headers));const m=this._removeEmptyFolders(s),g=this._getFinalPath(m),x=yield(e=="PUT"?K0:Yi)(this.fetch,`${this.url}/object/${g}`,o,Object.assign({headers:h},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:x.Id,fullPath:x.Key},error:null}}catch(o){if(Fs(o))return{data:null,error:o};throw o}})}upload(e,s,r){return _r(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,a){return _r(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),u=this._getFinalPath(o),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",s);try{let f;const m=Object.assign({upsert:S1.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",m.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",m.cacheControl)):(f=r,g["cache-control"]=`max-age=${m.cacheControl}`,g["content-type"]=m.contentType);const x=yield K0(this.fetch,h.toString(),f,{headers:g});return{data:{path:o,fullPath:x.Key},error:null}}catch(f){if(Fs(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,s){return _r(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);s?.upsert&&(a["x-upsert"]="true");const o=yield Yi(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),u=new URL(this.url+o.url),h=u.searchParams.get("token");if(!h)throw new sx("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:h},error:null}}catch(r){if(Fs(r))return{data:null,error:r};throw r}})}update(e,s,r){return _r(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return _r(this,void 0,void 0,function*(){try{return{data:yield Yi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Fs(a))return{data:null,error:a};throw a}})}copy(e,s,r){return _r(this,void 0,void 0,function*(){try{return{data:{path:(yield Yi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Fs(a))return{data:null,error:a};throw a}})}createSignedUrl(e,s,r){return _r(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield Yi(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${u}`)},{data:o,error:null}}catch(a){if(Fs(a))return{data:null,error:a};throw a}})}createSignedUrls(e,s,r){return _r(this,void 0,void 0,function*(){try{const a=yield Yi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${o}`):null})),error:null}}catch(a){if(Fs(a))return{data:null,error:a};throw a}})}download(e,s){return _r(this,void 0,void 0,function*(){const a=typeof s?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(s?.transform||{}),u=o?`?${o}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield Xf(this.fetch,`${this.url}/${a}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(Fs(h))return{data:null,error:h};throw h}})}info(e){return _r(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield Xf(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Y0(r),error:null}}catch(r){if(Fs(r))return{data:null,error:r};throw r}})}exists(e){return _r(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield bR(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Fs(r)&&r instanceof Z0){const a=r.originalError;if([400,404].includes(a?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),a=[],o=s?.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&a.push(o);const h=typeof s?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(s?.transform||{});f!==""&&a.push(f);let m=a.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${m}`)}}}remove(e){return _r(this,void 0,void 0,function*(){try{return{data:yield IN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Fs(s))return{data:null,error:s};throw s}})}list(e,s,r){return _r(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},vR),s),{prefix:e||""});return{data:yield Yi(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(Fs(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const _R="2.10.4",jR={"X-Client-Info":`storage-js/${_R}`};var dc=function(t,e,s,r){function a(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{m(r.next(g))}catch(x){u(x)}}function f(g){try{m(r.throw(g))}catch(x){u(x)}}function m(g){g.done?o(g.value):a(g.value).then(h,f)}m((r=r.apply(t,e||[])).next())})};class NR{constructor(e,s={},r,a){const o=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},jR),s),this.fetch=PN(r)}listBuckets(){return dc(this,void 0,void 0,function*(){try{return{data:yield Xf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Fs(e))return{data:null,error:e};throw e}})}getBucket(e){return dc(this,void 0,void 0,function*(){try{return{data:yield Xf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Fs(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return dc(this,void 0,void 0,function*(){try{return{data:yield Yi(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Fs(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return dc(this,void 0,void 0,function*(){try{return{data:yield K0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Fs(r))return{data:null,error:r};throw r}})}emptyBucket(e){return dc(this,void 0,void 0,function*(){try{return{data:yield Yi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Fs(s))return{data:null,error:s};throw s}})}deleteBucket(e){return dc(this,void 0,void 0,function*(){try{return{data:yield IN(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Fs(s))return{data:null,error:s};throw s}})}}class SR extends NR{constructor(e,s={},r,a){super(e,s,r,a)}from(e){return new wR(this.url,this.headers,e,this.fetch)}}const ER="2.53.0";let ud="";typeof Deno<"u"?ud="deno":typeof document<"u"?ud="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ud="react-native":ud="node";const AR={"X-Client-Info":`supabase-js-${ud}/${ER}`},CR={headers:AR},kR={schema:"public"},TR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},OR={};var RR=function(t,e,s,r){function a(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{m(r.next(g))}catch(x){u(x)}}function f(g){try{m(r.throw(g))}catch(x){u(x)}}function m(g){g.done?o(g.value):a(g.value).then(h,f)}m((r=r.apply(t,e||[])).next())})};const MR=t=>{let e;return t?e=t:typeof fetch>"u"?e=AN:e=fetch,(...s)=>e(...s)},DR=()=>typeof Headers>"u"?CN:Headers,LR=(t,e,s)=>{const r=MR(s),a=DR();return(o,u)=>RR(void 0,void 0,void 0,function*(){var h;const f=(h=yield e())!==null&&h!==void 0?h:t;let m=new a(u?.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${f}`),r(o,Object.assign(Object.assign({},u),{headers:m}))})};var qR=function(t,e,s,r){function a(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{m(r.next(g))}catch(x){u(x)}}function f(g){try{m(r.throw(g))}catch(x){u(x)}}function m(g){g.done?o(g.value):a(g.value).then(h,f)}m((r=r.apply(t,e||[])).next())})};function PR(t){return t.endsWith("/")?t:t+"/"}function IR(t,e){var s,r;const{db:a,auth:o,realtime:u,global:h}=t,{db:f,auth:m,realtime:g,global:x}=e,v={db:Object.assign(Object.assign({},f),a),auth:Object.assign(Object.assign({},m),o),realtime:Object.assign(Object.assign({},g),u),storage:{},global:Object.assign(Object.assign(Object.assign({},x),h),{headers:Object.assign(Object.assign({},(s=x?.headers)!==null&&s!==void 0?s:{}),(r=h?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>qR(this,void 0,void 0,function*(){return""})};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}const $N="2.71.1",xc=30*1e3,W0=3,r0=W0*xc,$R="http://localhost:9999",UR="supabase.auth.token",BR={"X-Client-Info":`gotrue-js/${$N}`},Q0="X-Supabase-Api-Version",UN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,FR=600*1e3;class rx extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function nt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class HR extends rx{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function VR(t){return nt(t)&&t.name==="AuthApiError"}class BN extends rx{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class ll extends rx{constructor(e,s,r,a){super(e,r,a),this.name=s,this.status=r}}class Ha extends ll{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function GR(t){return nt(t)&&t.name==="AuthSessionMissingError"}class gf extends ll{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yf extends ll{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class xf extends ll{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ZR(t){return nt(t)&&t.name==="AuthImplicitGrantRedirectError"}class E1 extends ll{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class X0 extends ll{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function n0(t){return nt(t)&&t.name==="AuthRetryableFetchError"}class A1 extends ll{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class J0 extends ll{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),C1=` 	
\r=`.split(""),YR=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<C1.length;e+=1)t[C1[e].charCodeAt(0)]=-2;for(let e=0;e<Jf.length;e+=1)t[Jf[e].charCodeAt(0)]=e;return t})();function k1(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(Jf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(Jf[r]),e.queuedBits-=6}}function zN(t,e,s){const r=YR[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function T1(t){const e=[],s=u=>{e.push(String.fromCodePoint(u))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=u=>{QR(u,r,s)};for(let u=0;u<t.length;u+=1)zN(t.charCodeAt(u),a,o);return e.join("")}function KR(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function WR(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|a)+65536,s+=1}KR(r,e)}}function QR(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function XR(t){const e=[],s={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)zN(t.charCodeAt(a),s,r);return new Uint8Array(e)}function JR(t){const e=[];return WR(t,s=>e.push(s)),new Uint8Array(e)}function eM(t){const e=[],s={queue:0,queuedBits:0},r=a=>{e.push(a)};return t.forEach(a=>k1(a,s,r)),k1(null,s,r),e.join("")}function tM(t){return Math.round(Date.now()/1e3)+t}function sM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Sn=()=>typeof window<"u"&&typeof document<"u",Pl={tested:!1,writable:!1},FN=()=>{if(!Sn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pl.tested)return Pl.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Pl.tested=!0,Pl.writable=!0}catch{Pl.tested=!0,Pl.writable=!1}return Pl.writable};function rM(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return s.searchParams.forEach((r,a)=>{e[a]=r}),e}const HN=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>al(async()=>{const{default:r}=await Promise.resolve().then(()=>Hc);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},nM=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",bc=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Il=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},$a=async(t,e)=>{await t.removeItem(e)};class km{constructor(){this.promise=new km.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}km.promiseConstructor=Promise;function i0(t){const e=t.split(".");if(e.length!==3)throw new J0("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!zR.test(e[r]))throw new J0("JWT not in base64url format");return{header:JSON.parse(T1(e[0])),payload:JSON.parse(T1(e[1])),signature:XR(e[2]),raw:{header:e[0],payload:e[1]}}}async function iM(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function aM(t,e){return new Promise((r,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const u=await t(o);if(!e(o,null,u)){r(u);return}}catch(u){if(!e(o,u)){a(u);return}}})()})}function lM(t){return("0"+t.toString(16)).substr(-2)}function oM(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let a="";for(let o=0;o<56;o++)a+=s.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,lM).join("")}async function cM(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(r);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function uM(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await cM(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function hc(t,e,s=!1){const r=oM();let a=r;s&&(a+="/PASSWORD_RECOVERY"),await bc(t,`${e}-code-verifier`,a);const o=await uM(r);return[o,r===o?"plain":"s256"]}const dM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hM(t){const e=t.headers.get(Q0);if(!e||!e.match(dM))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function fM(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function mM(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const pM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fc(t){if(!pM.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function a0(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function O1(t){return JSON.parse(JSON.stringify(t))}var gM=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(s[r[a]]=t[r[a]]);return s};const Fl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yM=[502,503,504];async function R1(t){var e;if(!nM(t))throw new X0(Fl(t),0);if(yM.includes(t.status))throw new X0(Fl(t),t.status);let s;try{s=await t.json()}catch(o){throw new BN(Fl(o),o)}let r;const a=hM(t);if(a&&a.getTime()>=UN["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new A1(Fl(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ha}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,u)=>o&&typeof u=="string",!0))throw new A1(Fl(s),t.status,s.weak_password.reasons);throw new HR(Fl(s),t.status||500,r)}const xM=(t,e,s,r)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),s))};async function mt(t,e,s,r){var a;const o=Object.assign({},r?.headers);o[Q0]||(o[Q0]=UN["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const u=(a=r?.query)!==null&&a!==void 0?a:{};r?.redirectTo&&(u.redirect_to=r.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await bM(t,e,s+h,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(f):{data:Object.assign({},f),error:null}}async function bM(t,e,s,r,a,o){const u=xM(e,r,a,o);let h;try{h=await t(s,Object.assign({},u))}catch(f){throw console.error(f),new X0(Fl(f),0)}if(h.ok||await R1(h),r?.noResolveJson)return h;try{return await h.json()}catch(f){await R1(f)}}function Gi(t){var e;let s=null;jM(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=tM(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function M1(t){const e=Gi(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Za(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function vM(t){return{data:t,error:null}}function wM(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:a,verification_type:o}=t,u=gM(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:s,hashed_token:r,redirect_to:a,verification_type:o},f=Object.assign({},u);return{data:{properties:h,user:f},error:null}}function _M(t){return t}function jM(t){return t.access_token&&t.refresh_token&&t.expires_in}const l0=["global","local","others"];var NM=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(s[r[a]]=t[r[a]]);return s};class SM{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=HN(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=l0[0]){if(l0.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${l0.join(", ")}`);try{return await mt(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await mt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Za})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=NM(e,["options"]),a=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(a.new_email=r?.newEmail,delete a.newEmail),await mt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:wM,redirectTo:s?.redirectTo})}catch(s){if(nt(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await mt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Za})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,a,o,u,h,f;try{const m={nextPage:null,lastPage:0,total:0},g=await mt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e?.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:_M});if(g.error)throw g.error;const x=await g.json(),v=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,_=(f=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return _.length>0&&(_.forEach(b=>{const N=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);m[`${w}Page`]=N}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},x),m),error:null}}catch(m){if(nt(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){fc(e);try{return await mt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Za})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){fc(e);try{return await mt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Za})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){fc(e);try{return await mt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Za})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){fc(e.userId);try{const{data:s,error:r}=await mt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:r}}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _deleteFactor(e){fc(e.userId),fc(e.id);try{return{data:await mt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}}}function D1(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function EM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const mc={debug:!!(globalThis&&FN()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class VN extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class AM extends VN{}async function CM(t,e,s){mc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),mc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){mc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await s()}finally{mc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw mc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new AM(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(mc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}EM();const kM={url:$R,storageKey:UR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:BR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function L1(t,e,s){return await s()}const pc={};class Sd{constructor(e){var s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Sd.nextInstanceID,Sd.nextInstanceID+=1,this.instanceID>0&&Sn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},kM),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new SM({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=HN(a.fetch),this.lock=a.lock||L1,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Sn()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=CM:this.lock=L1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:FN()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=D1(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=D1(this.memoryStorage)),Sn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=pc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){pc[this.storageKey]=Object.assign(Object.assign({},pc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=pc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){pc[this.storageKey]=Object.assign(Object.assign({},pc[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${$N}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=rM(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),Sn()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:o}=await this._getSessionFromURL(s,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),ZR(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:u,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return nt(s)?{error:s}:{error:new BN("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,a;try{const o=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e?.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Gi}),{data:u,error:h}=o;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(o){if(nt(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var s,r,a;try{let o;if("email"in e){const{email:g,password:x,options:v}=e;let _=null,b=null;this.flowType==="pkce"&&([_,b]=await hc(this.storage,this.storageKey)),o=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:g,password:x,data:(s=v?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:_,code_challenge_method:b},xform:Gi})}else if("phone"in e){const{phone:g,password:x,options:v}=e;o=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:x,data:(r=v?.data)!==null&&r!==void 0?r:{},channel:(a=v?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Gi})}else throw new yf("You must provide either an email or phone number and a password");const{data:u,error:h}=o;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(o){if(nt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let s;if("email"in e){const{email:o,password:u,options:h}=e;s=await mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:M1})}else if("phone"in e){const{phone:o,password:u,options:h}=e;s=await mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:M1})}else throw new yf("You must provide either an email or phone number and a password");const{data:r,error:a}=s;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new gf}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,r,a,o,u,h,f,m,g,x,v,_;let b,N;if("message"in e)b=e.message,N=e.signature;else{const{chain:w,wallet:E,statement:A,options:O}=e;let F;if(Sn())if(typeof E=="object")F=E;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))F=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=E}const C=new URL((s=O?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in F&&F.signIn){const L=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),A?{statement:A}:null));let B;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")B=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)B=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)b=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),N=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${C.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(a=(r=O?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=O?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((u=O?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((h=O?.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((f=O?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((m=O?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((x=(g=O?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||x===void 0)&&x.length?["Resources",...O.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const L=await F.signMessage(new TextEncoder().encode(b),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=L}}try{const{data:w,error:E}=await mt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:eM(N)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Gi});if(E)throw E;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new gf}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:E})}catch(w){if(nt(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const s=await Il(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(s??"").split("/");try{const{data:o,error:u}=await mt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Gi});if(await $a(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new gf}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:u})}catch(o){if(nt(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:s,provider:r,token:a,access_token:o,nonce:u}=e,h=await mt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:o,nonce:u,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Gi}),{data:f,error:m}=h;return m?{data:{user:null,session:null},error:m}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new gf}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:m})}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,a,o,u;try{if("email"in e){const{email:h,options:f}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await hc(this.storage,this.storageKey));const{error:x}=await mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(s=f?.data)!==null&&s!==void 0?s:{},create_user:(r=f?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:g},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in e){const{phone:h,options:f}=e,{data:m,error:g}=await mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=f?.data)!==null&&a!==void 0?a:{},create_user:(o=f?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(u=f?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:g}}throw new yf("You must provide either an email or phone number.")}catch(h){if(nt(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var s,r;try{let a,o;"options"in e&&(a=(s=e.options)===null||s===void 0?void 0:s.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:h}=await mt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Gi});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,m=u.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(a){if(nt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var s,r,a;try{let o=null,u=null;return this.flowType==="pkce"&&([o,u]=await hc(this.storage,this.storageKey)),await mt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:u}),headers:this.headers,xform:vM})}catch(o){if(nt(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Ha;const{error:a}=await mt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(nt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:o}=e,{error:u}=await mt(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:r,type:a,options:o}=e,{data:u,error:h}=await mt(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:h}}throw new yf("You must provide either an email or phone number and a type")}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Il(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<r0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const u=await Il(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=a0()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,m,g)=>(!u&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,m,g))})}return{data:{session:e},error:null}}const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Za}):await this._useSession(async s=>{var r,a,o;const{data:u,error:h}=s;if(h)throw h;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ha}:await mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Za})})}catch(s){if(nt(s))return GR(s)&&(await this._removeSession(),await $a(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:a,error:o}=r;if(o)throw o;if(!a.session)throw new Ha;const u=a.session;let h=null,f=null;this.flowType==="pkce"&&e.email!=null&&([h,f]=await hc(this.storage,this.storageKey));const{data:m,error:g}=await mt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:f}),jwt:u.access_token,xform:Za});if(g)throw g;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ha;const s=Date.now()/1e3;let r=s,a=!0,o=null;const{payload:u}=i0(e.access_token);if(u.exp&&(r=u.exp,a=r<=s),a){const{session:h,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!h)return{data:{user:null,session:null},error:null};o=h}else{const{data:h,error:f}=await this._getUser(e.access_token);if(f)throw f;o={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(nt(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:u,error:h}=s;if(h)throw h;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Ha;const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Sn())throw new xf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new xf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new E1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xf("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new E1("No code detected.");const{data:A,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:o,refresh_token:u,expires_in:h,expires_at:f,token_type:m}=e;if(!o||!h||!u||!m)throw new xf("No session defined in URL");const g=Math.round(Date.now()/1e3),x=parseInt(h);let v=g+x;f&&(v=parseInt(f));const _=v-g;_*1e3<=xc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${x}s`);const b=v-x;g-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,v,g):g-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,v,g);const{data:N,error:w}=await this._getUser(o);if(w)throw w;const E={provider_token:r,provider_refresh_token:a,access_token:o,expires_in:x,expires_at:v,refresh_token:u,token_type:m,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:e.type},error:null}}catch(r){if(nt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Il(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:a,error:o}=s;if(o)return{error:o};const u=(r=a.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(VR(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await $a(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=sM(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,a;try{const{data:{session:o},error:u}=s;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,s={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await hc(this.storage,this.storageKey,!0));try{return await mt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(nt(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:a}=await this._useSession(async o=>{var u,h,f,m,g;const{data:x,error:v}=o;if(v)throw v;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await mt(this.fetch,"GET",_,{headers:this.headers,jwt:(g=(m=x.session)===null||m===void 0?void 0:m.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return Sn()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(nt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,a;const{data:o,error:u}=s;if(u)throw u;return await mt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await aM(async a=>(a>0&&await iM(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await mt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gi})),(a,o)=>{const u=200*Math.pow(2,a);return o&&n0(o)&&Date.now()+u-r<xc})}catch(r){if(this._debug(s,"error",r),nt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),Sn()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Il(this.storage,this.storageKey);if(a&&this.userStorage){let u=await Il(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await bc(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u?.user)!==null&&e!==void 0?e:a0()}else if(a&&!a.user&&!a.user){const u=await Il(this.storage,this.storageKey+"-user");u&&u?.user?(a.user=u.user,await $a(this.storage,this.storageKey+"-user"),await bc(this.storage,this.storageKey,a)):a.user=a0()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const o=((s=a.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<r0;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${r0}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),n0(u)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(a.access_token);!h&&u?.user?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(r,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Ha;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new km;const{data:o,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!o.session)throw new Ha;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const h={session:o.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(o){if(this._debug(a,"error",o),nt(o)){const u={session:null,error:o};return n0(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,s,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const o=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,s)}catch(f){o.push(f)}});if(await Promise.all(u),o.length>0){for(let h=0;h<o.length;h+=1)console.error(o[h]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await bc(this.userStorage,this.storageKey+"-user",{user:s.user});const a=Object.assign({},s);delete a.user;const o=O1(a);await bc(this.storage,this.storageKey,o)}else{const a=O1(s);await bc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await $a(this.storage,this.storageKey),await $a(this.storage,this.storageKey+"-code-verifier"),await $a(this.storage,this.storageKey+"-user"),this.userStorage&&await $a(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Sn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),xc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/xc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${xc}ms, refresh threshold is ${W0} ticks`),a<=W0&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof VN)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Sn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const a=[`provider=${encodeURIComponent(s)}`];if(r?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,u]=await hc(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(h.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);a.push(o.toString())}return r?.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:a,error:o}=s;return o?{data:null,error:o}:await mt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,a;const{data:o,error:u}=s;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:m}=await mt(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&(!((a=f?.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:a,error:o}=s;if(o)return{data:null,error:o};const{data:u,error:h}=await mt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(s){if(nt(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:a,error:o}=s;return o?{data:null,error:o}:await mt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(nt(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=e?.factors||[],a=r.filter(u=>u.factor_type==="totp"&&u.status==="verified"),o=r.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:r,totp:a,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=i0(a.access_token);let h=null;u.aal&&(h=u.aal);let f=h;((r=(s=a.user.factors)===null||s===void 0?void 0:s.filter(x=>x.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const g=u.amr||[];return{data:{currentLevel:h,nextLevel:f,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(h=>h.kid===e);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(h=>h.kid===e),r&&this.jwks_cached_at+FR>a)return r;const{data:o,error:u}=await mt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,r=o.keys.find(h=>h.kid===e),!r)?null:r}async getClaims(e,s={}){try{let r=e;if(!r){const{data:_,error:b}=await this.getSession();if(b||!_.session)return{data:null,error:b};r=_.session.access_token}const{header:a,payload:o,signature:u,raw:{header:h,payload:f}}=i0(r);s?.allowExpired||fM(o.exp);const m=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!m){const{error:_}=await this.getUser(r);if(_)throw _;return{data:{claims:o,header:a,signature:u},error:null}}const g=mM(a.alg),x=await crypto.subtle.importKey("jwk",m,g,!0,["verify"]);if(!await crypto.subtle.verify(g,x,u,JR(`${h}.${f}`)))throw new J0("Invalid JWT signature");return{data:{claims:o,header:a,signature:u},error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}}Sd.nextInstanceID=0;const TM=Sd;class OM extends TM{constructor(e){super(e)}}var RM=function(t,e,s,r){function a(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(g){try{m(r.next(g))}catch(x){u(x)}}function f(g){try{m(r.throw(g))}catch(x){u(x)}}function m(g){g.done?o(g.value):a(g.value).then(h,f)}m((r=r.apply(t,e||[])).next())})};class MM{constructor(e,s,r){var a,o,u;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const h=PR(e),f=new URL(h);this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const m=`sb-${f.hostname.split(".")[0]}-auth-token`,g={db:kR,realtime:OR,auth:Object.assign(Object.assign({},TR),{storageKey:m}),global:CR},x=IR(r??{},g);this.storageKey=(a=x.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=x.global.headers)!==null&&o!==void 0?o:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(v,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=x.auth)!==null&&u!==void 0?u:{},this.headers,x.global.fetch),this.fetch=LR(s,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new QO(new URL("rest/v1",f).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new SR(this.storageUrl.href,this.headers,this.fetch,r?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new $O(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return RM(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:a,storageKey:o,flowType:u,lock:h,debug:f},m,g){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new OM({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),m),storageKey:o,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:a,flowType:u,lock:h,debug:f,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new hR(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r?.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const GN=(t,e,s)=>new MM(t,e,s);function DM(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const t=process.version.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}DM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const LM="https://english-australia-eau-supabase.lkobs5.easypanel.host",qM="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJhbm9uIiwKICAgICJpc3MiOiAic3VwYWJhc2UtZGVtbyIsCiAgICAiaWF0IjogMTY0MTc2OTIwMCwKICAgICJleHAiOiAxNzk5NTM1NjAwCn0.dc_X5iR_VP_qT0zsiyj_I_OZ2T9FtRU2BBNWN8Bu4GE",V=GN(LM,qM,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"sb-english-australia-eau-supabase-auth-token",storage:window.localStorage},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}}),PM=Object.freeze(Object.defineProperty({__proto__:null,supabase:V},Symbol.toStringTag,{value:"Module"}));class ZN{static mapDatabaseRoleToSystemRole(e){return{member:["Members"],admin:["Admin","Members"],super_admin:["AdminSuper","Admin","Members"],moderator:["Admin","Members"],instructor:["Members","MemberColleges"]}[e]||["Members"]}static async getUserRoles(e){try{const{data:s}=await V.auth.getUser();if(!s.user?.email)return console.warn("No email found, using default role"),["Members"];if(s.user.email==="rrzillesg@gmail.com")return console.log("Admin user detected"),["AdminSuper","Admin","Members"];try{const{data:r,error:a}=await V.from("members").select("id, email").or(`email.eq.${s.user.email},created_by.eq.${e}`).single();if(a||!r)return console.warn("Member not found in database, using default role"),["Members"];const{data:o,error:u}=await V.from("member_roles").select("role").eq("member_id",r.id);if(u||!o||o.length===0)return console.warn("No roles found, using default role"),["Members"];const h=[];return o.forEach(f=>{const m=this.mapDatabaseRoleToSystemRole(f.role);h.push(...m)}),[...new Set(h)]}catch(r){return console.warn("Database error fetching member/roles:",r),["Members"]}}catch(s){return console.warn("General error in getUserRoles:",s),["Members"]}}static async createMemberAfterSignup(e,s){try{const{data:r}=await V.from("members").select("id").eq("email",s).single();if(r)return;const{error:a}=await V.from("members").insert({email:s,first_name:s.split("@")[0],last_name:"User",membership_status:"active",membership_type:"standard",created_by:e,updated_by:e});if(a)return;const{data:o}=await V.from("members").select("id").eq("email",s).single();o&&await V.from("member_roles").insert({member_id:o.id,role:"member"})}catch{}}static async signInWithRoles(e,s){try{const{data:r,error:a}=await V.auth.signInWithPassword({email:e,password:s});if(a||!r.user)return{user:null,roles:[],error:a};const o=await this.getUserRoles(r.user.id);return{user:r.user,roles:o,error:null}}catch(r){return{user:null,roles:[],error:r}}}}const ey={signIn:async(t,e)=>{const{data:s,error:r}=await V.auth.signInWithPassword({email:t,password:e});return{data:s,error:r}},signUp:async(t,e,s)=>{const{data:r,error:a}=await V.auth.signUp({email:t,password:e,options:{data:{full_name:s}}});return{data:r,error:a}},signOut:async()=>{const{error:t}=await V.auth.signOut();return{error:t}},resetPassword:async t=>{const{data:e,error:s}=await V.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/reset-password`});return{data:e,error:s}},updatePassword:async t=>{const{data:e,error:s}=await V.auth.updateUser({password:t});return{data:e,error:s}},getSession:async()=>{const{data:t,error:e}=await V.auth.getSession();return{data:t,error:e}},getUser:async()=>{const{data:{user:t},error:e}=await V.auth.getUser();return{user:t,error:e}},onAuthStateChange:t=>V.auth.onAuthStateChange(t)},IM=Fd({email:Wt().email("Please enter a valid email address"),password:Wt().min(6,"Password must be at least 6 characters")}),$M=()=>{const t=Ns(),[e,s]=M.useState(!1),[r,a]=M.useState(null),{register:o,handleSubmit:u,formState:{errors:h}}=Ud({resolver:zd(IM)}),f=async m=>{s(!0),a(null);try{const{user:g,roles:x,error:v}=await ZN.signInWithRoles(m.email,m.password);if(v)a(v.message);else if(g){const{useAuthStore:_}=await al(async()=>{const{useAuthStore:E}=await Promise.resolve().then(()=>OD);return{useAuthStore:E}},void 0),{setUser:b,setRoles:N,setIsLoading:w}=_.getState();b(g),N(x),w(!1),t("/dashboard")}}catch{a("An unexpected error occurred. Please try again.")}finally{s(!1)}};return n.jsx("div",{className:"w-full",children:n.jsxs("div",{className:"bg-white rounded-lg p-8",children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Welcome member"}),n.jsx("p",{className:"text-gray-600 mb-8",children:"Welcome to the Australian Online Academy of English Australia"}),n.jsxs("form",{onSubmit:u(f),className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),n.jsx("input",{id:"email",type:"email",placeholder:"Username",className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",...o("email"),disabled:e}),h.email&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.email.message})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),n.jsx("input",{id:"password",type:"password",placeholder:"Password",className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",...o("password"),disabled:e}),h.password&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.password.message})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{id:"remember",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"remember",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),r&&n.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md",children:r}),n.jsx("button",{type:"submit",disabled:e,className:"w-full py-3 px-4 bg-black text-white font-medium rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e?"Signing in...":"Login"})]}),n.jsx("div",{className:"text-center",children:n.jsx("a",{href:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-500",children:"Forgot your password?"})})]})})},UM=()=>n.jsx(By,{children:n.jsx($M,{})});function YN(t){var e,s,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(s=YN(t[e]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}function KN(){for(var t,e,s=0,r="",a=arguments.length;s<a;s++)(t=arguments[s])&&(e=YN(t))&&(r&&(r+=" "),r+=e);return r}const q1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,P1=KN,WN=(t,e)=>s=>{var r;if(e?.variants==null)return P1(t,s?.class,s?.className);const{variants:a,defaultVariants:o}=e,u=Object.keys(a).map(m=>{const g=s?.[m],x=o?.[m];if(g===null)return null;const v=q1(g)||q1(x);return a[m][v]}),h=s&&Object.entries(s).reduce((m,g)=>{let[x,v]=g;return v===void 0||(m[x]=v),m},{}),f=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((m,g)=>{let{class:x,className:v,..._}=g;return Object.entries(_).every(b=>{let[N,w]=b;return Array.isArray(w)?w.includes({...o,...h}[N]):{...o,...h}[N]===w})?[...m,x,v]:m},[]);return P1(t,u,f,s?.class,s?.className)},nx="-",BM=t=>{const e=FM(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:u=>{const h=u.split(nx);return h[0]===""&&h.length!==1&&h.shift(),QN(h,e)||zM(u)},getConflictingClassGroupIds:(u,h)=>{const f=s[u]||[];return h&&r[u]?[...f,...r[u]]:f}}},QN=(t,e)=>{if(t.length===0)return e.classGroupId;const s=t[0],r=e.nextPart.get(s),a=r?QN(t.slice(1),r):void 0;if(a)return a;if(e.validators.length===0)return;const o=t.join(nx);return e.validators.find(({validator:u})=>u(o))?.classGroupId},I1=/^\[(.+)\]$/,zM=t=>{if(I1.test(t)){const e=I1.exec(t)[1],s=e?.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}},FM=t=>{const{theme:e,classGroups:s}=t,r={nextPart:new Map,validators:[]};for(const a in s)ty(s[a],r,a,e);return r},ty=(t,e,s,r)=>{t.forEach(a=>{if(typeof a=="string"){const o=a===""?e:$1(e,a);o.classGroupId=s;return}if(typeof a=="function"){if(HM(a)){ty(a(r),e,s,r);return}e.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([o,u])=>{ty(u,$1(e,o),s,r)})})},$1=(t,e)=>{let s=t;return e.split(nx).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},HM=t=>t.isThemeGetter,VM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,r=new Map;const a=(o,u)=>{s.set(o,u),e++,e>t&&(e=0,r=s,s=new Map)};return{get(o){let u=s.get(o);if(u!==void 0)return u;if((u=r.get(o))!==void 0)return a(o,u),u},set(o,u){s.has(o)?s.set(o,u):a(o,u)}}},sy="!",ry=":",GM=ry.length,ZM=t=>{const{prefix:e,experimentalParseClassName:s}=t;let r=a=>{const o=[];let u=0,h=0,f=0,m;for(let b=0;b<a.length;b++){let N=a[b];if(u===0&&h===0){if(N===ry){o.push(a.slice(f,b)),f=b+GM;continue}if(N==="/"){m=b;continue}}N==="["?u++:N==="]"?u--:N==="("?h++:N===")"&&h--}const g=o.length===0?a:a.substring(f),x=YM(g),v=x!==g,_=m&&m>f?m-f:void 0;return{modifiers:o,hasImportantModifier:v,baseClassName:x,maybePostfixModifierPosition:_}};if(e){const a=e+ry,o=r;r=u=>u.startsWith(a)?o(u.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(s){const a=r;r=o=>s({className:o,parseClassName:a})}return r},YM=t=>t.endsWith(sy)?t.substring(0,t.length-1):t.startsWith(sy)?t.substring(1):t,KM=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let o=[];return r.forEach(u=>{u[0]==="["||e[u]?(a.push(...o.sort(),u),o=[]):o.push(u)}),a.push(...o.sort()),a}},WM=t=>({cache:VM(t.cacheSize),parseClassName:ZM(t),sortModifiers:KM(t),...BM(t)}),QM=/\s+/,XM=(t,e)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:o}=e,u=[],h=t.trim().split(QM);let f="";for(let m=h.length-1;m>=0;m-=1){const g=h[m],{isExternal:x,modifiers:v,hasImportantModifier:_,baseClassName:b,maybePostfixModifierPosition:N}=s(g);if(x){f=g+(f.length>0?" "+f:f);continue}let w=!!N,E=r(w?b.substring(0,N):b);if(!E){if(!w){f=g+(f.length>0?" "+f:f);continue}if(E=r(b),!E){f=g+(f.length>0?" "+f:f);continue}w=!1}const A=o(v).join(":"),O=_?A+sy:A,F=O+E;if(u.includes(F))continue;u.push(F);const C=a(E,w);for(let L=0;L<C.length;++L){const B=C[L];u.push(O+B)}f=g+(f.length>0?" "+f:f)}return f};function JM(){let t=0,e,s,r="";for(;t<arguments.length;)(e=arguments[t++])&&(s=XN(e))&&(r&&(r+=" "),r+=s);return r}const XN=t=>{if(typeof t=="string")return t;let e,s="";for(let r=0;r<t.length;r++)t[r]&&(e=XN(t[r]))&&(s&&(s+=" "),s+=e);return s};function eD(t,...e){let s,r,a,o=u;function u(f){const m=e.reduce((g,x)=>x(g),t());return s=WM(m),r=s.cache.get,a=s.cache.set,o=h,h(f)}function h(f){const m=r(f);if(m)return m;const g=XM(f,s);return a(f,g),g}return function(){return o(JM.apply(null,arguments))}}const Ts=t=>{const e=s=>s[t]||[];return e.isThemeGetter=!0,e},JN=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,eS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,tD=/^\d+\/\d+$/,sD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,nD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,iD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gc=t=>tD.test(t),ot=t=>!!t&&!Number.isNaN(Number(t)),Ua=t=>!!t&&Number.isInteger(Number(t)),o0=t=>t.endsWith("%")&&ot(t.slice(0,-1)),Hi=t=>sD.test(t),lD=()=>!0,oD=t=>rD.test(t)&&!nD.test(t),tS=()=>!1,cD=t=>iD.test(t),uD=t=>aD.test(t),dD=t=>!$e(t)&&!Ue(t),hD=t=>Vc(t,nS,tS),$e=t=>JN.test(t),$l=t=>Vc(t,iS,oD),c0=t=>Vc(t,yD,ot),U1=t=>Vc(t,sS,tS),fD=t=>Vc(t,rS,uD),bf=t=>Vc(t,aS,cD),Ue=t=>eS.test(t),rd=t=>Gc(t,iS),mD=t=>Gc(t,xD),B1=t=>Gc(t,sS),pD=t=>Gc(t,nS),gD=t=>Gc(t,rS),vf=t=>Gc(t,aS,!0),Vc=(t,e,s)=>{const r=JN.exec(t);return r?r[1]?e(r[1]):s(r[2]):!1},Gc=(t,e,s=!1)=>{const r=eS.exec(t);return r?r[1]?e(r[1]):s:!1},sS=t=>t==="position"||t==="percentage",rS=t=>t==="image"||t==="url",nS=t=>t==="length"||t==="size"||t==="bg-size",iS=t=>t==="length",yD=t=>t==="number",xD=t=>t==="family-name",aS=t=>t==="shadow",bD=()=>{const t=Ts("color"),e=Ts("font"),s=Ts("text"),r=Ts("font-weight"),a=Ts("tracking"),o=Ts("leading"),u=Ts("breakpoint"),h=Ts("container"),f=Ts("spacing"),m=Ts("radius"),g=Ts("shadow"),x=Ts("inset-shadow"),v=Ts("text-shadow"),_=Ts("drop-shadow"),b=Ts("blur"),N=Ts("perspective"),w=Ts("aspect"),E=Ts("ease"),A=Ts("animate"),O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],C=()=>[...F(),Ue,$e],L=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],S=()=>[Ue,$e,f],k=()=>[gc,"full","auto",...S()],z=()=>[Ua,"none","subgrid",Ue,$e],R=()=>["auto",{span:["full",Ua,Ue,$e]},Ua,Ue,$e],D=()=>[Ua,"auto",Ue,$e],P=()=>["auto","min","max","fr",Ue,$e],H=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],q=()=>["auto",...S()],Z=()=>[gc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],Q=()=>[t,Ue,$e],ue=()=>[...F(),B1,U1,{position:[Ue,$e]}],U=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",pD,hD,{size:[Ue,$e]}],le=()=>[o0,rd,$l],ee=()=>["","none","full",m,Ue,$e],ge=()=>["",ot,rd,$l],we=()=>["solid","dashed","dotted","double"],Ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Me=()=>[ot,o0,B1,U1],Ne=()=>["","none",b,Ue,$e],Oe=()=>["none",ot,Ue,$e],De=()=>["none",ot,Ue,$e],Re=()=>[ot,Ue,$e],qe=()=>[gc,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Hi],breakpoint:[Hi],color:[lD],container:[Hi],"drop-shadow":[Hi],ease:["in","out","in-out"],font:[dD],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Hi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Hi],shadow:[Hi],spacing:["px",ot],text:[Hi],"text-shadow":[Hi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",gc,$e,Ue,w]}],container:["container"],columns:[{columns:[ot,$e,Ue,h]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:C()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[Ua,"auto",Ue,$e]}],basis:[{basis:[gc,"full","auto",h,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ot,gc,"auto","initial","none",$e]}],grow:[{grow:["",ot,Ue,$e]}],shrink:[{shrink:["",ot,Ue,$e]}],order:[{order:[Ua,"first","last","none",Ue,$e]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:R()}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:R()}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":P()}],"auto-rows":[{"auto-rows":P()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...H(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...H()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":H()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:Z()}],w:[{w:[h,"screen",...Z()]}],"min-w":[{"min-w":[h,"screen","none",...Z()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[u]},...Z()]}],h:[{h:["screen","lh",...Z()]}],"min-h":[{"min-h":["screen","lh","none",...Z()]}],"max-h":[{"max-h":["screen","lh",...Z()]}],"font-size":[{text:["base",s,rd,$l]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ue,c0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",o0,$e]}],"font-family":[{font:[mD,$e,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Ue,$e]}],"line-clamp":[{"line-clamp":[ot,"none",Ue,c0]}],leading:[{leading:[o,...S()]}],"list-image":[{"list-image":["none",Ue,$e]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ue,$e]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Q()}],"text-color":[{text:Q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...we(),"wavy"]}],"text-decoration-thickness":[{decoration:[ot,"from-font","auto",Ue,$l]}],"text-decoration-color":[{decoration:Q()}],"underline-offset":[{"underline-offset":[ot,"auto",Ue,$e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue,$e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue,$e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ue()}],"bg-repeat":[{bg:U()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ua,Ue,$e],radial:["",Ue,$e],conic:[Ua,Ue,$e]},gD,fD]}],"bg-color":[{bg:Q()}],"gradient-from-pos":[{from:le()}],"gradient-via-pos":[{via:le()}],"gradient-to-pos":[{to:le()}],"gradient-from":[{from:Q()}],"gradient-via":[{via:Q()}],"gradient-to":[{to:Q()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:ge()}],"border-w-x":[{"border-x":ge()}],"border-w-y":[{"border-y":ge()}],"border-w-s":[{"border-s":ge()}],"border-w-e":[{"border-e":ge()}],"border-w-t":[{"border-t":ge()}],"border-w-r":[{"border-r":ge()}],"border-w-b":[{"border-b":ge()}],"border-w-l":[{"border-l":ge()}],"divide-x":[{"divide-x":ge()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ge()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...we(),"hidden","none"]}],"divide-style":[{divide:[...we(),"hidden","none"]}],"border-color":[{border:Q()}],"border-color-x":[{"border-x":Q()}],"border-color-y":[{"border-y":Q()}],"border-color-s":[{"border-s":Q()}],"border-color-e":[{"border-e":Q()}],"border-color-t":[{"border-t":Q()}],"border-color-r":[{"border-r":Q()}],"border-color-b":[{"border-b":Q()}],"border-color-l":[{"border-l":Q()}],"divide-color":[{divide:Q()}],"outline-style":[{outline:[...we(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ot,Ue,$e]}],"outline-w":[{outline:["",ot,rd,$l]}],"outline-color":[{outline:Q()}],shadow:[{shadow:["","none",g,vf,bf]}],"shadow-color":[{shadow:Q()}],"inset-shadow":[{"inset-shadow":["none",x,vf,bf]}],"inset-shadow-color":[{"inset-shadow":Q()}],"ring-w":[{ring:ge()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Q()}],"ring-offset-w":[{"ring-offset":[ot,$l]}],"ring-offset-color":[{"ring-offset":Q()}],"inset-ring-w":[{"inset-ring":ge()}],"inset-ring-color":[{"inset-ring":Q()}],"text-shadow":[{"text-shadow":["none",v,vf,bf]}],"text-shadow-color":[{"text-shadow":Q()}],opacity:[{opacity:[ot,Ue,$e]}],"mix-blend":[{"mix-blend":[...Ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ot]}],"mask-image-linear-from-pos":[{"mask-linear-from":Me()}],"mask-image-linear-to-pos":[{"mask-linear-to":Me()}],"mask-image-linear-from-color":[{"mask-linear-from":Q()}],"mask-image-linear-to-color":[{"mask-linear-to":Q()}],"mask-image-t-from-pos":[{"mask-t-from":Me()}],"mask-image-t-to-pos":[{"mask-t-to":Me()}],"mask-image-t-from-color":[{"mask-t-from":Q()}],"mask-image-t-to-color":[{"mask-t-to":Q()}],"mask-image-r-from-pos":[{"mask-r-from":Me()}],"mask-image-r-to-pos":[{"mask-r-to":Me()}],"mask-image-r-from-color":[{"mask-r-from":Q()}],"mask-image-r-to-color":[{"mask-r-to":Q()}],"mask-image-b-from-pos":[{"mask-b-from":Me()}],"mask-image-b-to-pos":[{"mask-b-to":Me()}],"mask-image-b-from-color":[{"mask-b-from":Q()}],"mask-image-b-to-color":[{"mask-b-to":Q()}],"mask-image-l-from-pos":[{"mask-l-from":Me()}],"mask-image-l-to-pos":[{"mask-l-to":Me()}],"mask-image-l-from-color":[{"mask-l-from":Q()}],"mask-image-l-to-color":[{"mask-l-to":Q()}],"mask-image-x-from-pos":[{"mask-x-from":Me()}],"mask-image-x-to-pos":[{"mask-x-to":Me()}],"mask-image-x-from-color":[{"mask-x-from":Q()}],"mask-image-x-to-color":[{"mask-x-to":Q()}],"mask-image-y-from-pos":[{"mask-y-from":Me()}],"mask-image-y-to-pos":[{"mask-y-to":Me()}],"mask-image-y-from-color":[{"mask-y-from":Q()}],"mask-image-y-to-color":[{"mask-y-to":Q()}],"mask-image-radial":[{"mask-radial":[Ue,$e]}],"mask-image-radial-from-pos":[{"mask-radial-from":Me()}],"mask-image-radial-to-pos":[{"mask-radial-to":Me()}],"mask-image-radial-from-color":[{"mask-radial-from":Q()}],"mask-image-radial-to-color":[{"mask-radial-to":Q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":F()}],"mask-image-conic-pos":[{"mask-conic":[ot]}],"mask-image-conic-from-pos":[{"mask-conic-from":Me()}],"mask-image-conic-to-pos":[{"mask-conic-to":Me()}],"mask-image-conic-from-color":[{"mask-conic-from":Q()}],"mask-image-conic-to-color":[{"mask-conic-to":Q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ue()}],"mask-repeat":[{mask:U()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ue,$e]}],filter:[{filter:["","none",Ue,$e]}],blur:[{blur:Ne()}],brightness:[{brightness:[ot,Ue,$e]}],contrast:[{contrast:[ot,Ue,$e]}],"drop-shadow":[{"drop-shadow":["","none",_,vf,bf]}],"drop-shadow-color":[{"drop-shadow":Q()}],grayscale:[{grayscale:["",ot,Ue,$e]}],"hue-rotate":[{"hue-rotate":[ot,Ue,$e]}],invert:[{invert:["",ot,Ue,$e]}],saturate:[{saturate:[ot,Ue,$e]}],sepia:[{sepia:["",ot,Ue,$e]}],"backdrop-filter":[{"backdrop-filter":["","none",Ue,$e]}],"backdrop-blur":[{"backdrop-blur":Ne()}],"backdrop-brightness":[{"backdrop-brightness":[ot,Ue,$e]}],"backdrop-contrast":[{"backdrop-contrast":[ot,Ue,$e]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ot,Ue,$e]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ot,Ue,$e]}],"backdrop-invert":[{"backdrop-invert":["",ot,Ue,$e]}],"backdrop-opacity":[{"backdrop-opacity":[ot,Ue,$e]}],"backdrop-saturate":[{"backdrop-saturate":[ot,Ue,$e]}],"backdrop-sepia":[{"backdrop-sepia":["",ot,Ue,$e]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ue,$e]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ot,"initial",Ue,$e]}],ease:[{ease:["linear","initial",E,Ue,$e]}],delay:[{delay:[ot,Ue,$e]}],animate:[{animate:["none",A,Ue,$e]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[N,Ue,$e]}],"perspective-origin":[{"perspective-origin":C()}],rotate:[{rotate:Oe()}],"rotate-x":[{"rotate-x":Oe()}],"rotate-y":[{"rotate-y":Oe()}],"rotate-z":[{"rotate-z":Oe()}],scale:[{scale:De()}],"scale-x":[{"scale-x":De()}],"scale-y":[{"scale-y":De()}],"scale-z":[{"scale-z":De()}],"scale-3d":["scale-3d"],skew:[{skew:Re()}],"skew-x":[{"skew-x":Re()}],"skew-y":[{"skew-y":Re()}],transform:[{transform:[Ue,$e,"","none","gpu","cpu"]}],"transform-origin":[{origin:C()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:qe()}],"translate-x":[{"translate-x":qe()}],"translate-y":[{"translate-y":qe()}],"translate-z":[{"translate-z":qe()}],"translate-none":["translate-none"],accent:[{accent:Q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue,$e]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue,$e]}],fill:[{fill:["none",...Q()]}],"stroke-w":[{stroke:[ot,rd,$l,c0]}],stroke:[{stroke:["none",...Q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},vD=eD(bD);function yi(...t){return vD(KN(t))}const wD=WN("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-white hover:bg-primary/90",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",ghost:"hover:bg-gray-100 hover:text-gray-900",link:"text-primary underline-offset-4 hover:underline",destructive:"bg-red-500 text-white hover:bg-red-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),re=M.forwardRef(({className:t,variant:e,size:s,...r},a)=>n.jsx("button",{className:yi(wD({variant:e,size:s,className:t})),ref:a,...r}));re.displayName="Button";const Ae=M.forwardRef(({className:t,type:e,...s},r)=>n.jsx("input",{type:e,className:yi("flex h-11 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-0 focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s}));Ae.displayName="Input";const _D=WN("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),xe=M.forwardRef(({className:t,...e},s)=>n.jsx("label",{ref:s,className:yi(_D(),t),...e}));xe.displayName="Label";const de=M.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:yi("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));de.displayName="Card";const Rn=M.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:yi("flex flex-col space-y-1.5 p-6",t),...e}));Rn.displayName="CardHeader";const Mn=M.forwardRef(({className:t,...e},s)=>n.jsx("h3",{ref:s,className:yi("text-2xl font-semibold leading-none tracking-tight",t),...e}));Mn.displayName="CardTitle";const Dn=M.forwardRef(({className:t,...e},s)=>n.jsx("p",{ref:s,className:yi("text-sm text-muted-foreground",t),...e}));Dn.displayName="CardDescription";const cr=M.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:yi("p-6 pt-0",t),...e}));cr.displayName="CardContent";const ny=M.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:yi("flex items-center p-6 pt-0",t),...e}));ny.displayName="CardFooter";const jD=Fd({email:Wt().email("Please enter a valid email address")}),ND=()=>{const t=Ns(),[e,s]=M.useState(!1),[r,a]=M.useState(!1),[o,u]=M.useState(null),{register:h,handleSubmit:f,formState:{errors:m}}=Ud({resolver:zd(jD)}),g=async x=>{s(!0),u(null);try{const{error:v}=await ey.resetPassword(x.email);v?u(v.message):a(!0)}catch{u("An unexpected error occurred. Please try again.")}finally{s(!1)}};return r?n.jsxs(de,{className:"w-full",children:[n.jsxs(Rn,{className:"space-y-1 text-center",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx(Mn,{className:"text-2xl font-bold",children:"Check your email"}),n.jsx(Dn,{children:"We've sent a password reset link to your email address."})]}),n.jsx(cr,{className:"text-center",children:n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"If you don't see the email, check your spam folder or try again."})}),n.jsx(ny,{children:n.jsx(re,{variant:"outline",className:"w-full",onClick:()=>t("/login"),children:"Back to login"})})]}):n.jsxs(de,{className:"w-full",children:[n.jsxs(Rn,{className:"space-y-1",children:[n.jsx(Mn,{className:"text-2xl font-bold",children:"Password Recovery"}),n.jsx(Dn,{children:"Enter your email address and we'll send you a link to reset your password."})]}),n.jsx(cr,{children:n.jsxs("form",{onSubmit:f(g),className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(xe,{htmlFor:"email",children:"Email address"}),n.jsx(Ae,{id:"email",type:"email",placeholder:"Enter your email address",...h("email"),disabled:e}),m.email&&n.jsx("p",{className:"text-sm text-destructive",children:m.email.message})]}),o&&n.jsx("div",{className:"text-sm text-destructive",children:o}),n.jsx(re,{type:"submit",className:"w-full",disabled:e,children:e?"Sending...":"Send reset link"})]})}),n.jsx(ny,{children:n.jsx("button",{className:"text-sm text-primary hover:underline w-full text-center",onClick:()=>t("/login"),children:"Remember your password? Sign in"})})]})},SD=()=>n.jsx(By,{children:n.jsx(ND,{})}),ED=()=>{const t=Ns(),[e,s]=M.useState(""),[r,a]=M.useState(""),[o,u]=M.useState(!1),[h,f]=M.useState(""),m=async g=>{g.preventDefault(),u(!0),f("");try{const{data:x,error:v}=await V.auth.signUp({email:e,password:r,options:{emailRedirectTo:`${window.location.origin}/dashboard`}});v?f(`Erro: ${v.message}`):x.user&&(await ZN.createMemberAfterSignup(x.user.id,e),f("Usurio criado com sucesso! Voc pode fazer login agora."),setTimeout(()=>t("/login"),2e3))}catch{f("Erro ao criar usurio")}finally{u(!1)}};return n.jsx(By,{children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Criar Usurio de Teste"}),n.jsxs("form",{onSubmit:m,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),n.jsx("input",{type:"email",value:e,onChange:g=>s(g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md",placeholder:"admin@englishaustralia.com.au",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),n.jsx("input",{type:"password",value:r,onChange:g=>a(g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md",placeholder:"Mnimo 6 caracteres",required:!0,minLength:6})]}),h&&n.jsx("div",{className:`p-3 rounded-md text-sm ${h.includes("sucesso")?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:h}),n.jsx(re,{type:"submit",className:"w-full",disabled:o,children:o?"Criando...":"Criar Usurio"})]}),n.jsx("div",{className:"mt-4",children:n.jsx(re,{variant:"outline",onClick:()=>t("/login"),className:"w-full",children:"Voltar para Login"})})]})})},z1=t=>{let e;const s=new Set,r=(m,g)=>{const x=typeof m=="function"?m(e):m;if(!Object.is(x,e)){const v=e;e=g??(typeof x!="object"||x===null)?x:Object.assign({},e,x),s.forEach(_=>_(e,v))}},a=()=>e,h={setState:r,getState:a,getInitialState:()=>f,subscribe:m=>(s.add(m),()=>s.delete(m))},f=e=t(r,a,h);return h},AD=t=>t?z1(t):z1,CD=t=>t;function kD(t,e=CD){const s=Hs.useSyncExternalStore(t.subscribe,Hs.useCallback(()=>e(t.getState()),[t,e]),Hs.useCallback(()=>e(t.getInitialState()),[t,e]));return Hs.useDebugValue(s),s}const F1=t=>{const e=AD(t),s=r=>kD(e,r);return Object.assign(s,e),s},TD=t=>t?F1(t):F1,jt=TD((t,e)=>({user:null,roles:[],isLoading:!0,rolesLoaded:!1,simulatedRole:null,setUser:s=>t({user:s}),setRoles:s=>t({roles:s,rolesLoaded:!0}),setIsLoading:s=>{console.log(" STORE: setIsLoading called with:",s),t({isLoading:s})},setRolesLoaded:s=>t({rolesLoaded:s}),setSimulatedRole:s=>{s?localStorage.setItem("simulatedRole",s):localStorage.removeItem("simulatedRole"),t({simulatedRole:s})},hasRole:s=>{const r=e(),a=localStorage.getItem("eau_impersonation_session");if(a)try{return(JSON.parse(a).impersonatedRoles||["Members"]).includes(s)}catch{return r.roles.includes(s)}return r.simulatedRole,r.roles.includes(s)},getEffectiveRoles:()=>{const s=e(),r=localStorage.getItem("eau_impersonation_session");if(r)try{return JSON.parse(r).impersonatedRoles||["Members"]}catch{return s.roles}return s.simulatedRole,s.roles},getEffectiveUserId:()=>{const s=e(),r=localStorage.getItem("eau_impersonation_session");if(r)try{return JSON.parse(r).impersonatedUserId}catch{return s.user?.id}return s.user?.id},reset:()=>{localStorage.removeItem("simulatedRole"),t({user:null,roles:[],isLoading:!1,rolesLoaded:!1,simulatedRole:null})}})),OD=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:jt},Symbol.toStringTag,{value:"Module"})),RD={CREATE_CPD:["Admin","AdminSuper","Members","MemberColleges","ConsultantsAgents","BoardMembers"],APPROVE_CPD:["Admin","AdminSuper"],VIEW_ALL_CPDS:["Admin","AdminSuper"],CREATE_EVENT:["Admin","AdminSuper"],EDIT_EVENT:["Admin","AdminSuper"],DELETE_EVENT:["Admin","AdminSuper"],REGISTER_EVENT:["Admin","AdminSuper","Members","MemberColleges","ConsultantsAgents","BoardMembers","Affiliates"],MANAGE_USERS:["Admin","AdminSuper"],ASSIGN_ROLES:["AdminSuper"],VIEW_USER_REPORTS:["Admin","AdminSuper"],ACCESS_ADMIN_DASHBOARD:["Admin","AdminSuper"],ACCESS_MEMBER_DASHBOARD:["Admin","AdminSuper","Members","MemberColleges","ConsultantsAgents","BoardMembers","Affiliates"],ACCESS_PUBLIC_CONTENT:["Public","Openlearning","Admin","AdminSuper","Members","MemberColleges","ConsultantsAgents","BoardMembers","Affiliates"]};function Tm(){const{roles:t,hasRole:e}=jt();return{roles:t,hasPermission:f=>{const m=RD[f],g=m.some(x=>e(x));return console.log("Verificando permisso:",f),console.log("Roles necessrias:",m),console.log("Roles do usurio:",t),console.log("Tem acesso:",g),g},hasAnyRole:f=>f.some(m=>e(m)),hasAllRoles:f=>f.every(m=>e(m)),isAdmin:()=>e("Admin")||e("AdminSuper"),isSuper:()=>e("AdminSuper"),isMember:()=>e("Members")||e("MemberColleges")}}const Qt=({children:t,permission:e,roles:s,requireAll:r=!1,fallback:a=null})=>{const{hasPermission:o,hasAnyRole:u,hasAllRoles:h}=Tm();return(e?o(e):s?r?h(s):u(s):!0)?n.jsx(n.Fragment,{children:t}):n.jsx(n.Fragment,{children:a})};class MD{SESSION_KEY="eau_impersonation_session";ORIGINAL_USER_KEY="eau_original_user_data";canImpersonate(){return jt.getState().roles.includes("AdminSuper")}isImpersonating(){return!!localStorage.getItem(this.SESSION_KEY)}getSession(){const e=localStorage.getItem(this.SESSION_KEY);if(!e)return null;try{return JSON.parse(e)}catch{return null}}async startImpersonation(e){try{if(!this.canImpersonate())return{success:!1,error:"Only SuperAdmin can impersonate users"};if(this.isImpersonating())return{success:!1,error:"Already impersonating. Please exit current session first."};const s=jt.getState(),r=s.user,a=s.roles,o=localStorage.getItem("eau_member");if(!r)return{success:!1,error:"No user logged in"};localStorage.setItem(this.ORIGINAL_USER_KEY,o||"{}");const{data:u,error:h}=await V.from("members").select("*").eq("id",e).single();if(h||!u)return{success:!1,error:"Target user not found"};const{data:f,error:m}=await V.from("member_roles").select("role").eq("member_id",e);if(m)return console.error("Error fetching target user roles:",m),{success:!1,error:"Failed to fetch target user roles"};let g=f?.map(v=>v.role)||["Members"];g=g.map(v=>v==="member"?"Members":v==="admin"?"Admin":v==="adminsuper"?"AdminSuper":v),g.length===0&&g.push("Members");const x={originalUserId:r.id,originalEmail:r.email||"",originalRoles:a,impersonatedUserId:u.id,impersonatedEmail:u.email,impersonatedRoles:g,startedAt:new Date().toISOString()};return localStorage.setItem(this.SESSION_KEY,JSON.stringify(x)),s.setUser({id:u.id,email:u.email,user_metadata:{},app_metadata:{},aud:"authenticated",created_at:u.created_at}),s.setRoles(g),localStorage.setItem("eau_member",JSON.stringify(u)),{success:!0}}catch(s){return console.error("Error starting impersonation:",s),{success:!1,error:s.message||"Failed to start impersonation"}}}async stopImpersonation(){try{const e=this.getSession();if(!e)return{success:!1,error:"No impersonation session active"};const s=localStorage.getItem(this.ORIGINAL_USER_KEY);if(!s)return{success:!1,error:"Original user data not found"};let r;try{r=JSON.parse(s)}catch{return{success:!1,error:"Invalid original user data"}}const a=jt.getState();return a.setUser({id:r.id,email:r.email,user_metadata:{},app_metadata:{},aud:"authenticated",created_at:r.created_at}),a.setRoles(e.originalRoles),localStorage.setItem("eau_member",JSON.stringify(r)),localStorage.removeItem(this.SESSION_KEY),localStorage.removeItem(this.ORIGINAL_USER_KEY),{success:!0}}catch(e){return console.error("Error stopping impersonation:",e),{success:!1,error:e.message||"Failed to stop impersonation"}}}getDisplayInfo(){const e=this.getSession();return e?{isImpersonating:!0,originalEmail:e.originalEmail,targetEmail:e.impersonatedEmail}:{isImpersonating:!1}}}const Qi=new MD,DD=()=>{const{user:t,roles:e,getEffectiveRoles:s,getEffectiveUserId:r}=jt(),a=r(),o=Qi.isImpersonating(),u=Qi.getDisplayInfo(),h=o?{email:u.targetEmail,user_metadata:{full_name:null}}:t,f=s(),m=Ns(),[g,x]=M.useState({totalPoints:0,totalActivities:0,thisYearPoints:0,loading:!0}),[v,_]=M.useState([]),[b,N]=M.useState(!0),[w,E]=M.useState([]),[A,O]=M.useState(!0);return M.useEffect(()=>{(async()=>{if(a)try{const C=localStorage.getItem("eau_impersonation_session");let L;if(C){const P=a;console.log("Dashboard: Fetching CPD activities for impersonated member:",P),L=V.from("cpd_activities").select("*").eq("member_id",P).eq("status","approved")}else{const{data:P,error:H}=await V.from("members").select("id").eq("user_id",a).single();if(H||!P){console.error("Error fetching member data:",H),x(J=>({...J,loading:!1})),O(!1);return}L=V.from("cpd_activities").select("*").eq("member_id",P.id).eq("status","approved")}const{data:B,error:S}=await L;if(S)throw S;const k=new Date().getFullYear();let z=0,R=0;B?.forEach(P=>{const H=P.points||0;z+=H,new Date(P.date_completed).getFullYear()===k&&(R+=H)}),x({totalPoints:z,totalActivities:B?.length||0,thisYearPoints:R,loading:!1});const D=B?.sort((P,H)=>new Date(H.date_completed).getTime()-new Date(P.date_completed).getTime())||[];E(D.slice(0,5)),O(!1)}catch(C){console.error("Error fetching CPD stats:",C),x(L=>({...L,loading:!1})),O(!1)}})()},[a]),M.useEffect(()=>{(async()=>{try{const C=new Date().toISOString(),{data:L,error:B}=await V.from("events").select("*").gte("start_date",C).order("start_date",{ascending:!0}).limit(3);if(B)throw B;_(L||[])}catch(C){console.error("Error fetching upcoming events:",C)}finally{N(!1)}})()},[]),n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm border-b",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ",h?.user_metadata?.full_name||h?.email]}),n.jsxs("p",{className:"text-gray-600",children:["Roles: ",f.join(", ")||"No roles assigned"]})]})})})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsxs(de,{children:[n.jsxs(Rn,{children:[n.jsx(Mn,{className:"flex items-center gap-2",children:" CPD Summary"}),n.jsx(Dn,{children:"Your Continuing Professional Development progress"})]}),n.jsx(cr,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Total Points:"}),n.jsx("span",{className:"text-2xl font-bold text-primary-600",children:g.loading?"...":g.totalPoints})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Activities:"}),n.jsx("span",{className:"text-lg font-semibold",children:g.loading?"...":g.totalActivities})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"This Year:"}),n.jsx("span",{className:"text-lg font-semibold",children:g.loading?"...":g.thisYearPoints})]}),n.jsx(Qt,{permission:"CREATE_CPD",children:n.jsx(re,{className:"w-full mt-4",onClick:()=>m("/cpd"),children:"Add New CPD Activity"})})]})})]}),n.jsxs(de,{children:[n.jsxs(Rn,{children:[n.jsx(Mn,{className:"flex items-center gap-2",children:" Upcoming Events"}),n.jsx(Dn,{children:"Professional development events and workshops"})]}),n.jsx(cr,{children:n.jsxs("div",{className:"space-y-4",children:[b?n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"Loading..."})}):v.length>0?n.jsx("div",{className:"space-y-2",children:v.slice(0,2).map(F=>n.jsxs("div",{className:"border-l-4 border-primary-500 pl-3 py-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:F.title}),n.jsx("p",{className:"text-xs text-gray-500",children:new Date(F.start_date).toLocaleDateString()})]},F.id))}):n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No upcoming events"})}),n.jsx(Qt,{permission:"REGISTER_EVENT",children:n.jsx(re,{variant:"outline",className:"w-full",onClick:()=>m("/events"),children:"Browse Events"})})]})})]}),n.jsxs(de,{children:[n.jsxs(Rn,{children:[n.jsx(Mn,{className:"flex items-center gap-2",children:" Quick Actions"}),n.jsx(Dn,{children:"Common tasks and shortcuts"})]}),n.jsx(cr,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsx(Qt,{permission:"CREATE_CPD",children:n.jsx(re,{variant:"outline",className:"w-full justify-start",onClick:()=>m("/cpd"),children:" Log CPD Activity"})}),n.jsx(re,{variant:"outline",className:"w-full justify-start",onClick:()=>m("/profile"),children:" My Profile"}),n.jsx(re,{variant:"outline",className:"w-full justify-start",onClick:()=>m("/cpd"),children:" Export Certificate"}),n.jsx(Qt,{roles:["Admin","AdminSuper"],children:n.jsx(re,{variant:"outline",className:"w-full justify-start",onClick:()=>m("/admin"),children:" Admin Panel"})})]})})]}),n.jsxs(de,{className:"md:col-span-2 lg:col-span-3",children:[n.jsxs(Rn,{children:[n.jsx(Mn,{className:"flex items-center gap-2",children:" Recent Activity"}),n.jsx(Dn,{children:"Your latest CPD activities and events"})]}),n.jsx(cr,{children:A?n.jsx("div",{className:"text-center py-12 text-gray-500",children:n.jsx("p",{children:"Loading activities..."})}):w.length>0?n.jsxs("div",{className:"space-y-4",children:[w.map(F=>n.jsx("div",{className:"border-b pb-3 last:border-0",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:F.activity_title}),n.jsx("p",{className:"text-sm text-gray-600",children:F.category_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(F.date_completed).toLocaleDateString(),"  ",F.points," points"]})]}),n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${F.status==="approved"?"bg-green-100 text-green-800":F.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:F.status})]})},F.id)),n.jsx(Qt,{permission:"CREATE_CPD",children:n.jsx(re,{variant:"outline",className:"w-full",onClick:()=>m("/cpd"),children:"View All Activities"})})]}):n.jsxs("div",{className:"text-center py-12 text-gray-500",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"No activities yet"}),n.jsx("p",{className:"text-sm mb-4",children:"Start logging your professional development activities to see them here."}),n.jsx(Qt,{permission:"CREATE_CPD",children:n.jsx(re,{onClick:()=>m("/cpd"),children:"Add Your First Activity"})})]})})]})]})})]})};/*!
* sweetalert2 v11.22.2
* Released under the MIT License.
*/function lS(t,e,s){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:s;throw new TypeError("Private element is not present on this object")}function LD(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function H1(t,e){return t.get(lS(t,e))}function qD(t,e,s){LD(t,e),e.set(t,s)}function PD(t,e,s){return t.set(lS(t,e),s),s}const ID=100,Qe={},$D=()=>{Qe.previousActiveElement instanceof HTMLElement?(Qe.previousActiveElement.focus(),Qe.previousActiveElement=null):document.body&&document.body.focus()},UD=t=>new Promise(e=>{if(!t)return e();const s=window.scrollX,r=window.scrollY;Qe.restoreFocusTimeout=setTimeout(()=>{$D(),e()},ID),window.scrollTo(s,r)}),oS="swal2-",BD=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],me=BD.reduce((t,e)=>(t[e]=oS+e,t),{}),zD=["success","warning","info","question","error"],em=zD.reduce((t,e)=>(t[e]=oS+e,t),{}),cS="SweetAlert2:",ix=t=>t.charAt(0).toUpperCase()+t.slice(1),hr=t=>{console.warn(`${cS} ${typeof t=="object"?t.join(" "):t}`)},co=t=>{console.error(`${cS} ${t}`)},V1=[],FD=t=>{V1.includes(t)||(V1.push(t),hr(t))},uS=(t,e=null)=>{FD(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},Om=t=>typeof t=="function"?t():t,ax=t=>t&&typeof t.toPromise=="function",Vd=t=>ax(t)?t.toPromise():Promise.resolve(t),lx=t=>t&&Promise.resolve(t)===t,fr=()=>document.body.querySelector(`.${me.container}`),Gd=t=>{const e=fr();return e?e.querySelector(t):null},Fr=t=>Gd(`.${t}`),Nt=()=>Fr(me.popup),Zc=()=>Fr(me.icon),HD=()=>Fr(me["icon-content"]),dS=()=>Fr(me.title),ox=()=>Fr(me["html-container"]),hS=()=>Fr(me.image),cx=()=>Fr(me["progress-steps"]),Rm=()=>Fr(me["validation-message"]),pi=()=>Gd(`.${me.actions} .${me.confirm}`),Yc=()=>Gd(`.${me.actions} .${me.cancel}`),uo=()=>Gd(`.${me.actions} .${me.deny}`),VD=()=>Fr(me["input-label"]),Kc=()=>Gd(`.${me.loader}`),Zd=()=>Fr(me.actions),fS=()=>Fr(me.footer),Mm=()=>Fr(me["timer-progress-bar"]),ux=()=>Fr(me.close),GD=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,dx=()=>{const t=Nt();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),s=Array.from(e).sort((o,u)=>{const h=parseInt(o.getAttribute("tabindex")||"0"),f=parseInt(u.getAttribute("tabindex")||"0");return h>f?1:h<f?-1:0}),r=t.querySelectorAll(GD),a=Array.from(r).filter(o=>o.getAttribute("tabindex")!=="-1");return[...new Set(s.concat(a))].filter(o=>Nr(o))},hx=()=>Xi(document.body,me.shown)&&!Xi(document.body,me["toast-shown"])&&!Xi(document.body,me["no-backdrop"]),Dm=()=>{const t=Nt();return t?Xi(t,me.toast):!1},ZD=()=>{const t=Nt();return t?t.hasAttribute("data-loading"):!1},Hr=(t,e)=>{if(t.textContent="",e){const r=new DOMParser().parseFromString(e,"text/html"),a=r.querySelector("head");a&&Array.from(a.childNodes).forEach(u=>{t.appendChild(u)});const o=r.querySelector("body");o&&Array.from(o.childNodes).forEach(u=>{u instanceof HTMLVideoElement||u instanceof HTMLAudioElement?t.appendChild(u.cloneNode(!0)):t.appendChild(u)})}},Xi=(t,e)=>{if(!e)return!1;const s=e.split(/\s+/);for(let r=0;r<s.length;r++)if(!t.classList.contains(s[r]))return!1;return!0},YD=(t,e)=>{Array.from(t.classList).forEach(s=>{!Object.values(me).includes(s)&&!Object.values(em).includes(s)&&!Object.values(e.showClass||{}).includes(s)&&t.classList.remove(s)})},Br=(t,e,s)=>{if(YD(t,e),!e.customClass)return;const r=e.customClass[s];if(r){if(typeof r!="string"&&!r.forEach){hr(`Invalid type of customClass.${s}! Expected string or iterable object, got "${typeof r}"`);return}At(t,r)}},Lm=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${me.popup} > .${me[e]}`);case"checkbox":return t.querySelector(`.${me.popup} > .${me.checkbox} input`);case"radio":return t.querySelector(`.${me.popup} > .${me.radio} input:checked`)||t.querySelector(`.${me.popup} > .${me.radio} input:first-child`);case"range":return t.querySelector(`.${me.popup} > .${me.range} input`);default:return t.querySelector(`.${me.popup} > .${me.input}`)}},mS=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},pS=(t,e,s)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(r=>{Array.isArray(t)?t.forEach(a=>{s?a.classList.add(r):a.classList.remove(r)}):s?t.classList.add(r):t.classList.remove(r)}))},At=(t,e)=>{pS(t,e,!0)},dn=(t,e)=>{pS(t,e,!1)},Ka=(t,e)=>{const s=Array.from(t.children);for(let r=0;r<s.length;r++){const a=s[r];if(a instanceof HTMLElement&&Xi(a,e))return a}},Kl=(t,e,s)=>{s===`${parseInt(s)}`&&(s=parseInt(s)),s||parseInt(s)===0?t.style.setProperty(e,typeof s=="number"?`${s}px`:s):t.style.removeProperty(e)},Vs=(t,e="flex")=>{t&&(t.style.display=e)},ar=t=>{t&&(t.style.display="none")},fx=(t,e="block")=>{t&&new MutationObserver(()=>{Yd(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},G1=(t,e,s,r)=>{const a=t.querySelector(e);a&&a.style.setProperty(s,r)},Yd=(t,e,s="flex")=>{e?Vs(t,s):ar(t)},Nr=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),KD=()=>!Nr(pi())&&!Nr(uo())&&!Nr(Yc()),iy=t=>t.scrollHeight>t.clientHeight,WD=(t,e)=>{let s=t;for(;s&&s!==e;){if(iy(s))return!0;s=s.parentElement}return!1},gS=t=>{const e=window.getComputedStyle(t),s=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return s>0||r>0},mx=(t,e=!1)=>{const s=Mm();s&&Nr(s)&&(e&&(s.style.transition="none",s.style.width="100%"),setTimeout(()=>{s.style.transition=`width ${t/1e3}s linear`,s.style.width="0%"},10))},QD=()=>{const t=Mm();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const s=parseInt(window.getComputedStyle(t).width),r=e/s*100;t.style.width=`${r}%`},XD=()=>typeof window>"u"||typeof document>"u",JD=`
 <div aria-labelledby="${me.title}" aria-describedby="${me["html-container"]}" class="${me.popup}" tabindex="-1">
   <button type="button" class="${me.close}"></button>
   <ul class="${me["progress-steps"]}"></ul>
   <div class="${me.icon}"></div>
   <img class="${me.image}" />
   <h2 class="${me.title}" id="${me.title}"></h2>
   <div class="${me["html-container"]}" id="${me["html-container"]}"></div>
   <input class="${me.input}" id="${me.input}" />
   <input type="file" class="${me.file}" />
   <div class="${me.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${me.select}" id="${me.select}"></select>
   <div class="${me.radio}"></div>
   <label class="${me.checkbox}">
     <input type="checkbox" id="${me.checkbox}" />
     <span class="${me.label}"></span>
   </label>
   <textarea class="${me.textarea}" id="${me.textarea}"></textarea>
   <div class="${me["validation-message"]}" id="${me["validation-message"]}"></div>
   <div class="${me.actions}">
     <div class="${me.loader}"></div>
     <button type="button" class="${me.confirm}"></button>
     <button type="button" class="${me.deny}"></button>
     <button type="button" class="${me.cancel}"></button>
   </div>
   <div class="${me.footer}"></div>
   <div class="${me["timer-progress-bar-container"]}">
     <div class="${me["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),eL=()=>{const t=fr();return t?(t.remove(),dn([document.documentElement,document.body],[me["no-backdrop"],me["toast-shown"],me["has-column"]]),!0):!1},Ul=()=>{Qe.currentInstance.resetValidationMessage()},tL=()=>{const t=Nt(),e=Ka(t,me.input),s=Ka(t,me.file),r=t.querySelector(`.${me.range} input`),a=t.querySelector(`.${me.range} output`),o=Ka(t,me.select),u=t.querySelector(`.${me.checkbox} input`),h=Ka(t,me.textarea);e.oninput=Ul,s.onchange=Ul,o.onchange=Ul,u.onchange=Ul,h.oninput=Ul,r.oninput=()=>{Ul(),a.value=r.value},r.onchange=()=>{Ul(),a.value=r.value}},sL=t=>typeof t=="string"?document.querySelector(t):t,rL=t=>{const e=Nt();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},nL=t=>{window.getComputedStyle(t).direction==="rtl"&&At(fr(),me.rtl)},iL=t=>{const e=eL();if(XD()){co("SweetAlert2 requires document to initialize");return}const s=document.createElement("div");s.className=me.container,e&&At(s,me["no-transition"]),Hr(s,JD),s.dataset.swal2Theme=t.theme;const r=sL(t.target);r.appendChild(s),t.topLayer&&(s.setAttribute("popover",""),s.showPopover()),rL(t),nL(r),tL()},px=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?aL(t,e):t&&Hr(e,t)},aL=(t,e)=>{t.jquery?lL(e,t):Hr(e,t.toString())},lL=(t,e)=>{if(t.textContent="",0 in e)for(let s=0;s in e;s++)t.appendChild(e[s].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},oL=(t,e)=>{const s=Zd(),r=Kc();!s||!r||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?ar(s):Vs(s),Br(s,e,"actions"),cL(s,r,e),Hr(r,e.loaderHtml||""),Br(r,e,"loader"))};function cL(t,e,s){const r=pi(),a=uo(),o=Yc();!r||!a||!o||(d0(r,"confirm",s),d0(a,"deny",s),d0(o,"cancel",s),uL(r,a,o,s),s.reverseButtons&&(s.toast?(t.insertBefore(o,r),t.insertBefore(a,r)):(t.insertBefore(o,e),t.insertBefore(a,e),t.insertBefore(r,e))))}function uL(t,e,s,r){if(!r.buttonsStyling){dn([t,e,s],me.styled);return}At([t,e,s],me.styled),r.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&s.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),u0(t),u0(e),u0(s)}function u0(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const s=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${s}`))}function d0(t,e,s){const r=ix(e);Yd(t,s[`show${r}Button`],"inline-block"),Hr(t,s[`${e}ButtonText`]||""),t.setAttribute("aria-label",s[`${e}ButtonAriaLabel`]||""),t.className=me[e],Br(t,s,`${e}Button`)}const dL=(t,e)=>{const s=ux();s&&(Hr(s,e.closeButtonHtml||""),Br(s,e,"closeButton"),Yd(s,e.showCloseButton),s.setAttribute("aria-label",e.closeButtonAriaLabel||""))},hL=(t,e)=>{const s=fr();s&&(fL(s,e.backdrop),mL(s,e.position),pL(s,e.grow),Br(s,e,"container"))};function fL(t,e){typeof e=="string"?t.style.background=e:e||At([document.documentElement,document.body],me["no-backdrop"])}function mL(t,e){e&&(e in me?At(t,me[e]):(hr('The "position" parameter is not valid, defaulting to "center"'),At(t,me.center)))}function pL(t,e){e&&At(t,me[`grow-${e}`])}var Ht={innerParams:new WeakMap,domCache:new WeakMap};const gL=["input","file","range","select","radio","checkbox","textarea"],yL=(t,e)=>{const s=Nt();if(!s)return;const r=Ht.innerParams.get(t),a=!r||e.input!==r.input;gL.forEach(o=>{const u=Ka(s,me[o]);u&&(vL(o,e.inputAttributes),u.className=me[o],a&&ar(u))}),e.input&&(a&&xL(e),wL(e))},xL=t=>{if(!t.input)return;if(!hs[t.input]){co(`Unexpected type of input! Expected ${Object.keys(hs).join(" | ")}, got "${t.input}"`);return}const e=yS(t.input);if(!e)return;const s=hs[t.input](e,t);Vs(e),t.inputAutoFocus&&setTimeout(()=>{mS(s)})},bL=t=>{for(let e=0;e<t.attributes.length;e++){const s=t.attributes[e].name;["id","type","value","style"].includes(s)||t.removeAttribute(s)}},vL=(t,e)=>{const s=Nt();if(!s)return;const r=Lm(s,t);if(r){bL(r);for(const a in e)r.setAttribute(a,e[a])}},wL=t=>{if(!t.input)return;const e=yS(t.input);e&&Br(e,t,"input")},gx=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},Kd=(t,e,s)=>{if(s.inputLabel){const r=document.createElement("label"),a=me["input-label"];r.setAttribute("for",t.id),r.className=a,typeof s.customClass=="object"&&At(r,s.customClass.inputLabel),r.innerText=s.inputLabel,e.insertAdjacentElement("beforebegin",r)}},yS=t=>{const e=Nt();if(e)return Ka(e,me[t]||me.input)},tm=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:lx(e)||hr(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},hs={};hs.text=hs.email=hs.password=hs.number=hs.tel=hs.url=hs.search=hs.date=hs["datetime-local"]=hs.time=hs.week=hs.month=(t,e)=>(tm(t,e.inputValue),Kd(t,t,e),gx(t,e),t.type=e.input,t);hs.file=(t,e)=>(Kd(t,t,e),gx(t,e),t);hs.range=(t,e)=>{const s=t.querySelector("input"),r=t.querySelector("output");return tm(s,e.inputValue),s.type=e.input,tm(r,e.inputValue),Kd(s,t,e),t};hs.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const s=document.createElement("option");Hr(s,e.inputPlaceholder),s.value="",s.disabled=!0,s.selected=!0,t.appendChild(s)}return Kd(t,t,e),t};hs.radio=t=>(t.textContent="",t);hs.checkbox=(t,e)=>{const s=Lm(Nt(),"checkbox");s.value="1",s.checked=!!e.inputValue;const r=t.querySelector("span");return Hr(r,e.inputPlaceholder||e.inputLabel),s};hs.textarea=(t,e)=>{tm(t,e.inputValue),gx(t,e),Kd(t,t,e);const s=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(Nt()).width),a=()=>{if(!document.body.contains(t))return;const o=t.offsetWidth+s(t);o>r?Nt().style.width=`${o}px`:Kl(Nt(),"width",e.width)};new MutationObserver(a).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const _L=(t,e)=>{const s=ox();s&&(fx(s),Br(s,e,"htmlContainer"),e.html?(px(e.html,s),Vs(s,"block")):e.text?(s.textContent=e.text,Vs(s,"block")):ar(s),yL(t,e))},jL=(t,e)=>{const s=fS();s&&(fx(s),Yd(s,e.footer,"block"),e.footer&&px(e.footer,s),Br(s,e,"footer"))},NL=(t,e)=>{const s=Ht.innerParams.get(t),r=Zc();if(!r)return;if(s&&e.icon===s.icon){Y1(r,e),Z1(r,e);return}if(!e.icon&&!e.iconHtml){ar(r);return}if(e.icon&&Object.keys(em).indexOf(e.icon)===-1){co(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),ar(r);return}Vs(r),Y1(r,e),Z1(r,e),At(r,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",xS)},Z1=(t,e)=>{for(const[s,r]of Object.entries(em))e.icon!==s&&dn(t,r);At(t,e.icon&&em[e.icon]),AL(t,e),xS(),Br(t,e,"icon")},xS=()=>{const t=Nt();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),s=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<s.length;r++)s[r].style.backgroundColor=e},SL=t=>`
  ${t.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${t.animation?'<div class="swal2-success-fix"></div>':""}
  ${t.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,EL=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Y1=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let s=t.innerHTML,r="";e.iconHtml?r=K1(e.iconHtml):e.icon==="success"?(r=SL(e),s=s.replace(/ style=".*?"/g,"")):e.icon==="error"?r=EL:e.icon&&(r=K1({question:"?",warning:"!",info:"i"}[e.icon])),s.trim()!==r.trim()&&Hr(t,r)},AL=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const s of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])G1(t,s,"background-color",e.iconColor);G1(t,".swal2-success-ring","border-color",e.iconColor)}},K1=t=>`<div class="${me["icon-content"]}">${t}</div>`,CL=(t,e)=>{const s=hS();if(s){if(!e.imageUrl){ar(s);return}Vs(s,""),s.setAttribute("src",e.imageUrl),s.setAttribute("alt",e.imageAlt||""),Kl(s,"width",e.imageWidth),Kl(s,"height",e.imageHeight),s.className=me.image,Br(s,e,"image")}};let yx=!1,bS=0,vS=0,wS=0,_S=0;const kL=t=>{t.addEventListener("mousedown",sm),document.body.addEventListener("mousemove",rm),t.addEventListener("mouseup",nm),t.addEventListener("touchstart",sm),document.body.addEventListener("touchmove",rm),t.addEventListener("touchend",nm)},TL=t=>{t.removeEventListener("mousedown",sm),document.body.removeEventListener("mousemove",rm),t.removeEventListener("mouseup",nm),t.removeEventListener("touchstart",sm),document.body.removeEventListener("touchmove",rm),t.removeEventListener("touchend",nm)},sm=t=>{const e=Nt();if(t.target===e||Zc().contains(t.target)){yx=!0;const s=jS(t);bS=s.clientX,vS=s.clientY,wS=parseInt(e.style.insetInlineStart)||0,_S=parseInt(e.style.insetBlockStart)||0,At(e,"swal2-dragging")}},rm=t=>{const e=Nt();if(yx){let{clientX:s,clientY:r}=jS(t);e.style.insetInlineStart=`${wS+(s-bS)}px`,e.style.insetBlockStart=`${_S+(r-vS)}px`}},nm=()=>{const t=Nt();yx=!1,dn(t,"swal2-dragging")},jS=t=>{let e=0,s=0;return t.type.startsWith("mouse")?(e=t.clientX,s=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,s=t.touches[0].clientY),{clientX:e,clientY:s}},OL=(t,e)=>{const s=fr(),r=Nt();if(!(!s||!r)){if(e.toast){Kl(s,"width",e.width),r.style.width="100%";const a=Kc();a&&r.insertBefore(a,Zc())}else Kl(r,"width",e.width);Kl(r,"padding",e.padding),e.color&&(r.style.color=e.color),e.background&&(r.style.background=e.background),ar(Rm()),RL(r,e),e.draggable&&!e.toast?(At(r,me.draggable),kL(r)):(dn(r,me.draggable),TL(r))}},RL=(t,e)=>{const s=e.showClass||{};t.className=`${me.popup} ${Nr(t)?s.popup:""}`,e.toast?(At([document.documentElement,document.body],me["toast-shown"]),At(t,me.toast)):At(t,me.modal),Br(t,e,"popup"),typeof e.customClass=="string"&&At(t,e.customClass),e.icon&&At(t,me[`icon-${e.icon}`])},ML=(t,e)=>{const s=cx();if(!s)return;const{progressSteps:r,currentProgressStep:a}=e;if(!r||r.length===0||a===void 0){ar(s);return}Vs(s),s.textContent="",a>=r.length&&hr("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((o,u)=>{const h=DL(o);if(s.appendChild(h),u===a&&At(h,me["active-progress-step"]),u!==r.length-1){const f=LL(e);s.appendChild(f)}})},DL=t=>{const e=document.createElement("li");return At(e,me["progress-step"]),Hr(e,t),e},LL=t=>{const e=document.createElement("li");return At(e,me["progress-step-line"]),t.progressStepsDistance&&Kl(e,"width",t.progressStepsDistance),e},qL=(t,e)=>{const s=dS();s&&(fx(s),Yd(s,e.title||e.titleText,"block"),e.title&&px(e.title,s),e.titleText&&(s.innerText=e.titleText),Br(s,e,"title"))},NS=(t,e)=>{OL(t,e),hL(t,e),ML(t,e),NL(t,e),CL(t,e),qL(t,e),dL(t,e),_L(t,e),oL(t,e),jL(t,e);const s=Nt();typeof e.didRender=="function"&&s&&e.didRender(s),Qe.eventEmitter.emit("didRender",s)},PL=()=>Nr(Nt()),SS=()=>{var t;return(t=pi())===null||t===void 0?void 0:t.click()},IL=()=>{var t;return(t=uo())===null||t===void 0?void 0:t.click()},$L=()=>{var t;return(t=Yc())===null||t===void 0?void 0:t.click()},Wc=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),ES=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},UL=(t,e,s)=>{ES(t),e.toast||(t.keydownHandler=r=>zL(e,r,s),t.keydownTarget=e.keydownListenerCapture?window:Nt(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},ay=(t,e)=>{var s;const r=dx();if(r.length){t=t+e,t===-2&&(t=r.length-1),t===r.length?t=0:t===-1&&(t=r.length-1),r[t].focus();return}(s=Nt())===null||s===void 0||s.focus()},AS=["ArrowRight","ArrowDown"],BL=["ArrowLeft","ArrowUp"],zL=(t,e,s)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?FL(e,t):e.key==="Tab"?HL(e):[...AS,...BL].includes(e.key)?VL(e.key):e.key==="Escape"&&GL(e,t,s)))},FL=(t,e)=>{if(!Om(e.allowEnterKey))return;const s=Lm(Nt(),e.input);if(t.target&&s&&t.target instanceof HTMLElement&&t.target.outerHTML===s.outerHTML){if(["textarea","file"].includes(e.input))return;SS(),t.preventDefault()}},HL=t=>{const e=t.target,s=dx();let r=-1;for(let a=0;a<s.length;a++)if(e===s[a]){r=a;break}t.shiftKey?ay(r,-1):ay(r,1),t.stopPropagation(),t.preventDefault()},VL=t=>{const e=Zd(),s=pi(),r=uo(),a=Yc();if(!e||!s||!r||!a)return;const o=[s,r,a];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const u=AS.includes(t)?"nextElementSibling":"previousElementSibling";let h=document.activeElement;if(h){for(let f=0;f<e.children.length;f++){if(h=h[u],!h)return;if(h instanceof HTMLButtonElement&&Nr(h))break}h instanceof HTMLButtonElement&&h.focus()}},GL=(t,e,s)=>{t.preventDefault(),Om(e.allowEscapeKey)&&s(Wc.esc)};var Mc={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const ZL=()=>{const t=fr();Array.from(document.body.children).forEach(s=>{s.contains(t)||(s.hasAttribute("aria-hidden")&&s.setAttribute("data-previous-aria-hidden",s.getAttribute("aria-hidden")||""),s.setAttribute("aria-hidden","true"))})},CS=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},kS=typeof window<"u"&&!!window.GestureEvent,YL=()=>{if(kS&&!Xi(document.body,me.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,At(document.body,me.iosfix),KL()}},KL=()=>{const t=fr();if(!t)return;let e;t.ontouchstart=s=>{e=WL(s)},t.ontouchmove=s=>{e&&(s.preventDefault(),s.stopPropagation())}},WL=t=>{const e=t.target,s=fr(),r=ox();return!s||!r||QL(t)||XL(t)?!1:e===s||!iy(s)&&e instanceof HTMLElement&&!WD(e,r)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(iy(r)&&r.contains(e))},QL=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",XL=t=>t.touches&&t.touches.length>1,JL=()=>{if(Xi(document.body,me.iosfix)){const t=parseInt(document.body.style.top,10);dn(document.body,me.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},eq=()=>{const t=document.createElement("div");t.className=me["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let Ac=null;const tq=t=>{Ac===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(Ac=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Ac+eq()}px`)},sq=()=>{Ac!==null&&(document.body.style.paddingRight=`${Ac}px`,Ac=null)};function TS(t,e,s,r){Dm()?W1(t,r):(UD(s).then(()=>W1(t,r)),ES(Qe)),kS?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),hx()&&(sq(),JL(),CS()),rq()}function rq(){dn([document.documentElement,document.body],[me.shown,me["height-auto"],me["no-backdrop"],me["toast-shown"]])}function Wa(t){t=iq(t);const e=Mc.swalPromiseResolve.get(this),s=nq(this);this.isAwaitingPromise?t.isDismissed||(Wd(this),e(t)):s&&e(t)}const nq=t=>{const e=Nt();if(!e)return!1;const s=Ht.innerParams.get(t);if(!s||Xi(e,s.hideClass.popup))return!1;dn(e,s.showClass.popup),At(e,s.hideClass.popup);const r=fr();return dn(r,s.showClass.backdrop),At(r,s.hideClass.backdrop),aq(t,e,s),!0};function OS(t){const e=Mc.swalPromiseReject.get(this);Wd(this),e&&e(t)}const Wd=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,Ht.innerParams.get(t)||t._destroy())},iq=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),aq=(t,e,s)=>{var r;const a=fr(),o=gS(e);typeof s.willClose=="function"&&s.willClose(e),(r=Qe.eventEmitter)===null||r===void 0||r.emit("willClose",e),o?lq(t,e,a,s.returnFocus,s.didClose):TS(t,a,s.returnFocus,s.didClose)},lq=(t,e,s,r,a)=>{Qe.swalCloseEventFinishedCallback=TS.bind(null,t,s,r,a);const o=function(u){if(u.target===e){var h;(h=Qe.swalCloseEventFinishedCallback)===null||h===void 0||h.call(Qe),delete Qe.swalCloseEventFinishedCallback,e.removeEventListener("animationend",o),e.removeEventListener("transitionend",o)}};e.addEventListener("animationend",o),e.addEventListener("transitionend",o)},W1=(t,e)=>{setTimeout(()=>{var s;typeof e=="function"&&e.bind(t.params)(),(s=Qe.eventEmitter)===null||s===void 0||s.emit("didClose"),t._destroy&&t._destroy()})},Dc=t=>{let e=Nt();if(e||new Et,e=Nt(),!e)return;const s=Kc();Dm()?ar(Zc()):oq(e,t),Vs(s),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},oq=(t,e)=>{const s=Zd(),r=Kc();!s||!r||(!e&&Nr(pi())&&(e=pi()),Vs(s),e&&(ar(e),r.setAttribute("data-button-to-replace",e.className),s.insertBefore(r,e)),At([t,s],me.loading))},cq=(t,e)=>{e.input==="select"||e.input==="radio"?mq(t,e):["text","email","number","tel","textarea"].some(s=>s===e.input)&&(ax(e.inputValue)||lx(e.inputValue))&&(Dc(pi()),pq(t,e))},uq=(t,e)=>{const s=t.getInput();if(!s)return null;switch(e.input){case"checkbox":return dq(s);case"radio":return hq(s);case"file":return fq(s);default:return e.inputAutoTrim?s.value.trim():s.value}},dq=t=>t.checked?1:0,hq=t=>t.checked?t.value:null,fq=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,mq=(t,e)=>{const s=Nt();if(!s)return;const r=a=>{e.input==="select"?gq(s,im(a),e):e.input==="radio"&&yq(s,im(a),e)};ax(e.inputOptions)||lx(e.inputOptions)?(Dc(pi()),Vd(e.inputOptions).then(a=>{t.hideLoading(),r(a)})):typeof e.inputOptions=="object"?r(e.inputOptions):co(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},pq=(t,e)=>{const s=t.getInput();s&&(ar(s),Vd(e.inputValue).then(r=>{s.value=e.input==="number"?`${parseFloat(r)||0}`:`${r}`,Vs(s),s.focus(),t.hideLoading()}).catch(r=>{co(`Error in inputValue promise: ${r}`),s.value="",Vs(s),s.focus(),t.hideLoading()}))};function gq(t,e,s){const r=Ka(t,me.select);if(!r)return;const a=(o,u,h)=>{const f=document.createElement("option");f.value=h,Hr(f,u),f.selected=RS(h,s.inputValue),o.appendChild(f)};e.forEach(o=>{const u=o[0],h=o[1];if(Array.isArray(h)){const f=document.createElement("optgroup");f.label=u,f.disabled=!1,r.appendChild(f),h.forEach(m=>a(f,m[1],m[0]))}else a(r,h,u)}),r.focus()}function yq(t,e,s){const r=Ka(t,me.radio);if(!r)return;e.forEach(o=>{const u=o[0],h=o[1],f=document.createElement("input"),m=document.createElement("label");f.type="radio",f.name=me.radio,f.value=u,RS(u,s.inputValue)&&(f.checked=!0);const g=document.createElement("span");Hr(g,h),g.className=me.label,m.appendChild(f),m.appendChild(g),r.appendChild(m)});const a=r.querySelectorAll("input");a.length&&a[0].focus()}const im=t=>{const e=[];return t instanceof Map?t.forEach((s,r)=>{let a=s;typeof a=="object"&&(a=im(a)),e.push([r,a])}):Object.keys(t).forEach(s=>{let r=t[s];typeof r=="object"&&(r=im(r)),e.push([s,r])}),e},RS=(t,e)=>!!e&&e.toString()===t.toString(),xq=t=>{const e=Ht.innerParams.get(t);t.disableButtons(),e.input?MS(t,"confirm"):bx(t,!0)},bq=t=>{const e=Ht.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?MS(t,"deny"):xx(t,!1)},vq=(t,e)=>{t.disableButtons(),e(Wc.cancel)},MS=(t,e)=>{const s=Ht.innerParams.get(t);if(!s.input){co(`The "input" parameter is needed to be set when using returnInputValueOn${ix(e)}`);return}const r=t.getInput(),a=uq(t,s);s.inputValidator?wq(t,a,e):r&&!r.checkValidity()?(t.enableButtons(),t.showValidationMessage(s.validationMessage||r.validationMessage)):e==="deny"?xx(t,a):bx(t,a)},wq=(t,e,s)=>{const r=Ht.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>Vd(r.inputValidator(e,r.validationMessage))).then(o=>{t.enableButtons(),t.enableInput(),o?t.showValidationMessage(o):s==="deny"?xx(t,e):bx(t,e)})},xx=(t,e)=>{const s=Ht.innerParams.get(t||void 0);s.showLoaderOnDeny&&Dc(uo()),s.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>Vd(s.preDeny(e,s.validationMessage))).then(a=>{a===!1?(t.hideLoading(),Wd(t)):t.close({isDenied:!0,value:typeof a>"u"?e:a})}).catch(a=>DS(t||void 0,a))):t.close({isDenied:!0,value:e})},Q1=(t,e)=>{t.close({isConfirmed:!0,value:e})},DS=(t,e)=>{t.rejectPromise(e)},bx=(t,e)=>{const s=Ht.innerParams.get(t||void 0);s.showLoaderOnConfirm&&Dc(),s.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>Vd(s.preConfirm(e,s.validationMessage))).then(a=>{Nr(Rm())||a===!1?(t.hideLoading(),Wd(t)):Q1(t,typeof a>"u"?e:a)}).catch(a=>DS(t||void 0,a))):Q1(t,e)};function am(){const t=Ht.innerParams.get(this);if(!t)return;const e=Ht.domCache.get(this);ar(e.loader),Dm()?t.icon&&Vs(Zc()):_q(e),dn([e.popup,e.actions],me.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const _q=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?Vs(e[0],"inline-block"):KD()&&ar(t.actions)};function LS(){const t=Ht.innerParams.get(this),e=Ht.domCache.get(this);return e?Lm(e.popup,t.input):null}function qS(t,e,s){const r=Ht.domCache.get(t);e.forEach(a=>{r[a].disabled=s})}function PS(t,e){const s=Nt();if(!(!s||!t))if(t.type==="radio"){const r=s.querySelectorAll(`[name="${me.radio}"]`);for(let a=0;a<r.length;a++)r[a].disabled=e}else t.disabled=e}function IS(){qS(this,["confirmButton","denyButton","cancelButton"],!1)}function $S(){qS(this,["confirmButton","denyButton","cancelButton"],!0)}function US(){PS(this.getInput(),!1)}function BS(){PS(this.getInput(),!0)}function zS(t){const e=Ht.domCache.get(this),s=Ht.innerParams.get(this);Hr(e.validationMessage,t),e.validationMessage.className=me["validation-message"],s.customClass&&s.customClass.validationMessage&&At(e.validationMessage,s.customClass.validationMessage),Vs(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",me["validation-message"]),mS(r),At(r,me.inputerror))}function FS(){const t=Ht.domCache.get(this);t.validationMessage&&ar(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),dn(e,me.inputerror))}const Cc={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},jq=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],Nq={allowEnterKey:void 0},Sq=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],HS=t=>Object.prototype.hasOwnProperty.call(Cc,t),VS=t=>jq.indexOf(t)!==-1,GS=t=>Nq[t],Eq=t=>{HS(t)||hr(`Unknown parameter "${t}"`)},Aq=t=>{Sq.includes(t)&&hr(`The parameter "${t}" is incompatible with toasts`)},Cq=t=>{const e=GS(t);e&&uS(t,e)},ZS=t=>{t.backdrop===!1&&t.allowOutsideClick&&hr('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&hr(`Invalid theme "${t.theme}"`);for(const e in t)Eq(e),t.toast&&Aq(e),Cq(e)};function YS(t){const e=fr(),s=Nt(),r=Ht.innerParams.get(this);if(!s||Xi(s,r.hideClass.popup)){hr("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const a=kq(t),o=Object.assign({},r,a);ZS(o),e.dataset.swal2Theme=o.theme,NS(this,o),Ht.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const kq=t=>{const e={};return Object.keys(t).forEach(s=>{VS(s)?e[s]=t[s]:hr(`Invalid parameter to update: ${s}`)}),e};function KS(){const t=Ht.domCache.get(this),e=Ht.innerParams.get(this);if(!e){WS(this);return}t.popup&&Qe.swalCloseEventFinishedCallback&&(Qe.swalCloseEventFinishedCallback(),delete Qe.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),Qe.eventEmitter.emit("didDestroy"),Tq(this)}const Tq=t=>{WS(t),delete t.params,delete Qe.keydownHandler,delete Qe.keydownTarget,delete Qe.currentInstance},WS=t=>{t.isAwaitingPromise?(h0(Ht,t),t.isAwaitingPromise=!0):(h0(Mc,t),h0(Ht,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},h0=(t,e)=>{for(const s in t)t[s].delete(e)};var Oq=Object.freeze({__proto__:null,_destroy:KS,close:Wa,closeModal:Wa,closePopup:Wa,closeToast:Wa,disableButtons:$S,disableInput:BS,disableLoading:am,enableButtons:IS,enableInput:US,getInput:LS,handleAwaitingPromise:Wd,hideLoading:am,rejectPromise:OS,resetValidationMessage:FS,showValidationMessage:zS,update:YS});const Rq=(t,e,s)=>{t.toast?Mq(t,e,s):(Lq(e),qq(e),Pq(t,e,s))},Mq=(t,e,s)=>{e.popup.onclick=()=>{t&&(Dq(t)||t.timer||t.input)||s(Wc.close)}},Dq=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let lm=!1;const Lq=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(lm=!0)}}},qq=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(s){t.popup.onmouseup=()=>{},(s.target===t.popup||s.target instanceof HTMLElement&&t.popup.contains(s.target))&&(lm=!0)}}},Pq=(t,e,s)=>{e.container.onclick=r=>{if(lm){lm=!1;return}r.target===e.container&&Om(t.allowOutsideClick)&&s(Wc.backdrop)}},Iq=t=>typeof t=="object"&&t.jquery,X1=t=>t instanceof Element||Iq(t),$q=t=>{const e={};return typeof t[0]=="object"&&!X1(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((s,r)=>{const a=t[r];typeof a=="string"||X1(a)?e[s]=a:a!==void 0&&co(`Unexpected type of ${s}! Expected "string" or "Element", got ${typeof a}`)}),e};function Uq(...t){return new this(...t)}function Bq(t){class e extends this{_main(r,a){return super._main(r,Object.assign({},t,a))}}return e}const zq=()=>Qe.timeout&&Qe.timeout.getTimerLeft(),QS=()=>{if(Qe.timeout)return QD(),Qe.timeout.stop()},XS=()=>{if(Qe.timeout){const t=Qe.timeout.start();return mx(t),t}},Fq=()=>{const t=Qe.timeout;return t&&(t.running?QS():XS())},Hq=t=>{if(Qe.timeout){const e=Qe.timeout.increase(t);return mx(e,!0),e}},Vq=()=>!!(Qe.timeout&&Qe.timeout.isRunning());let J1=!1;const ly={};function Gq(t="data-swal-template"){ly[t]=this,J1||(document.body.addEventListener("click",Zq),J1=!0)}const Zq=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const s in ly){const r=e.getAttribute(s);if(r){ly[s].fire({template:r});return}}};let Yq=class{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,s){const r=this._getHandlersByEventName(e);r.includes(s)||r.push(s)}once(e,s){const r=(...a)=>{this.removeListener(e,r),s.apply(this,a)};this.on(e,r)}emit(e,...s){this._getHandlersByEventName(e).forEach(r=>{try{r.apply(this,s)}catch(a){console.error(a)}})}removeListener(e,s){const r=this._getHandlersByEventName(e),a=r.indexOf(s);a>-1&&r.splice(a,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}};Qe.eventEmitter=new Yq;const Kq=(t,e)=>{Qe.eventEmitter.on(t,e)},Wq=(t,e)=>{Qe.eventEmitter.once(t,e)},Qq=(t,e)=>{if(!t){Qe.eventEmitter.reset();return}e?Qe.eventEmitter.removeListener(t,e):Qe.eventEmitter.removeAllListeners(t)};var Xq=Object.freeze({__proto__:null,argsToParams:$q,bindClickHandler:Gq,clickCancel:$L,clickConfirm:SS,clickDeny:IL,enableLoading:Dc,fire:Uq,getActions:Zd,getCancelButton:Yc,getCloseButton:ux,getConfirmButton:pi,getContainer:fr,getDenyButton:uo,getFocusableElements:dx,getFooter:fS,getHtmlContainer:ox,getIcon:Zc,getIconContent:HD,getImage:hS,getInputLabel:VD,getLoader:Kc,getPopup:Nt,getProgressSteps:cx,getTimerLeft:zq,getTimerProgressBar:Mm,getTitle:dS,getValidationMessage:Rm,increaseTimer:Hq,isDeprecatedParameter:GS,isLoading:ZD,isTimerRunning:Vq,isUpdatableParameter:VS,isValidParameter:HS,isVisible:PL,mixin:Bq,off:Qq,on:Kq,once:Wq,resumeTimer:XS,showLoading:Dc,stopTimer:QS,toggleTimer:Fq});class Jq{constructor(e,s){this.callback=e,this.remaining=s,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const s=this.running;return s&&this.stop(),this.remaining+=e,s&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const JS=["swal-title","swal-html","swal-footer"],e8=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const s=e.content;return o8(s),Object.assign(t8(s),s8(s),r8(s),n8(s),i8(s),a8(s),l8(s,JS))},t8=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(r=>{Jl(r,["name","value"]);const a=r.getAttribute("name"),o=r.getAttribute("value");!a||!o||(typeof Cc[a]=="boolean"?e[a]=o!=="false":typeof Cc[a]=="object"?e[a]=JSON.parse(o):e[a]=o)}),e},s8=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(r=>{const a=r.getAttribute("name"),o=r.getAttribute("value");!a||!o||(e[a]=new Function(`return ${o}`)())}),e},r8=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(r=>{Jl(r,["type","color","aria-label"]);const a=r.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(e[`${a}ButtonText`]=r.innerHTML,e[`show${ix(a)}Button`]=!0,r.hasAttribute("color")&&(e[`${a}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(e[`${a}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),e},n8=t=>{const e={},s=t.querySelector("swal-image");return s&&(Jl(s,["src","width","height","alt"]),s.hasAttribute("src")&&(e.imageUrl=s.getAttribute("src")||void 0),s.hasAttribute("width")&&(e.imageWidth=s.getAttribute("width")||void 0),s.hasAttribute("height")&&(e.imageHeight=s.getAttribute("height")||void 0),s.hasAttribute("alt")&&(e.imageAlt=s.getAttribute("alt")||void 0)),e},i8=t=>{const e={},s=t.querySelector("swal-icon");return s&&(Jl(s,["type","color"]),s.hasAttribute("type")&&(e.icon=s.getAttribute("type")),s.hasAttribute("color")&&(e.iconColor=s.getAttribute("color")),e.iconHtml=s.innerHTML),e},a8=t=>{const e={},s=t.querySelector("swal-input");s&&(Jl(s,["type","label","placeholder","value"]),e.input=s.getAttribute("type")||"text",s.hasAttribute("label")&&(e.inputLabel=s.getAttribute("label")),s.hasAttribute("placeholder")&&(e.inputPlaceholder=s.getAttribute("placeholder")),s.hasAttribute("value")&&(e.inputValue=s.getAttribute("value")));const r=Array.from(t.querySelectorAll("swal-input-option"));return r.length&&(e.inputOptions={},r.forEach(a=>{Jl(a,["value"]);const o=a.getAttribute("value");if(!o)return;const u=a.innerHTML;e.inputOptions[o]=u})),e},l8=(t,e)=>{const s={};for(const r in e){const a=e[r],o=t.querySelector(a);o&&(Jl(o,[]),s[a.replace(/^swal-/,"")]=o.innerHTML.trim())}return s},o8=t=>{const e=JS.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(s=>{const r=s.tagName.toLowerCase();e.includes(r)||hr(`Unrecognized element <${r}>`)})},Jl=(t,e)=>{Array.from(t.attributes).forEach(s=>{e.indexOf(s.name)===-1&&hr([`Unrecognized attribute "${s.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},eE=10,c8=t=>{const e=fr(),s=Nt();typeof t.willOpen=="function"&&t.willOpen(s),Qe.eventEmitter.emit("willOpen",s);const a=window.getComputedStyle(document.body).overflowY;h8(e,s,t),setTimeout(()=>{u8(e,s)},eE),hx()&&(d8(e,t.scrollbarPadding,a),ZL()),!Dm()&&!Qe.previousActiveElement&&(Qe.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(s)),Qe.eventEmitter.emit("didOpen",s),dn(e,me["no-transition"])},om=t=>{const e=Nt();if(t.target!==e)return;const s=fr();e.removeEventListener("animationend",om),e.removeEventListener("transitionend",om),s.style.overflowY="auto"},u8=(t,e)=>{gS(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",om),e.addEventListener("transitionend",om)):t.style.overflowY="auto"},d8=(t,e,s)=>{YL(),e&&s!=="hidden"&&tq(s),setTimeout(()=>{t.scrollTop=0})},h8=(t,e,s)=>{At(t,s.showClass.backdrop),s.animation?(e.style.setProperty("opacity","0","important"),Vs(e,"grid"),setTimeout(()=>{At(e,s.showClass.popup),e.style.removeProperty("opacity")},eE)):Vs(e,"grid"),At([document.documentElement,document.body],me.shown),s.heightAuto&&s.backdrop&&!s.toast&&At([document.documentElement,document.body],me["height-auto"])};var ej={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function f8(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=ej.email),t.input==="url"&&(t.inputValidator=ej.url))}function m8(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(hr('Target parameter is not valid, defaulting to "body"'),t.target="body")}function p8(t){f8(t),t.showLoaderOnConfirm&&!t.preConfirm&&hr(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),m8(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),iL(t)}let ci;var wf=new WeakMap;class ys{constructor(...e){if(qD(this,wf,void 0),typeof window>"u")return;ci=this;const s=Object.freeze(this.constructor.argsToParams(e));this.params=s,this.isAwaitingPromise=!1,PD(wf,this,this._main(ci.params))}_main(e,s={}){if(ZS(Object.assign({},s,e)),Qe.currentInstance){const o=Mc.swalPromiseResolve.get(Qe.currentInstance),{isAwaitingPromise:u}=Qe.currentInstance;Qe.currentInstance._destroy(),u||o({isDismissed:!0}),hx()&&CS()}Qe.currentInstance=ci;const r=y8(e,s);p8(r),Object.freeze(r),Qe.timeout&&(Qe.timeout.stop(),delete Qe.timeout),clearTimeout(Qe.restoreFocusTimeout);const a=x8(ci);return NS(ci,r),Ht.innerParams.set(ci,r),g8(ci,a,r)}then(e){return H1(wf,this).then(e)}finally(e){return H1(wf,this).finally(e)}}const g8=(t,e,s)=>new Promise((r,a)=>{const o=u=>{t.close({isDismissed:!0,dismiss:u})};Mc.swalPromiseResolve.set(t,r),Mc.swalPromiseReject.set(t,a),e.confirmButton.onclick=()=>{xq(t)},e.denyButton.onclick=()=>{bq(t)},e.cancelButton.onclick=()=>{vq(t,o)},e.closeButton.onclick=()=>{o(Wc.close)},Rq(s,e,o),UL(Qe,s,o),cq(t,s),c8(s),b8(Qe,s,o),v8(e,s),setTimeout(()=>{e.container.scrollTop=0})}),y8=(t,e)=>{const s=e8(t),r=Object.assign({},Cc,e,s,t);return r.showClass=Object.assign({},Cc.showClass,r.showClass),r.hideClass=Object.assign({},Cc.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},x8=t=>{const e={popup:Nt(),container:fr(),actions:Zd(),confirmButton:pi(),denyButton:uo(),cancelButton:Yc(),loader:Kc(),closeButton:ux(),validationMessage:Rm(),progressSteps:cx()};return Ht.domCache.set(t,e),e},b8=(t,e,s)=>{const r=Mm();ar(r),e.timer&&(t.timeout=new Jq(()=>{s("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(Vs(r),Br(r,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&mx(e.timer)})))},v8=(t,e)=>{if(!e.toast){if(!Om(e.allowEnterKey)){uS("allowEnterKey"),j8();return}w8(t)||_8(t,e)||ay(-1,1)}},w8=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const s of e)if(s instanceof HTMLElement&&Nr(s))return s.focus(),!0;return!1},_8=(t,e)=>e.focusDeny&&Nr(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&Nr(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&Nr(t.confirmButton)?(t.confirmButton.focus(),!0):!1,j8=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const t=new Date,e=localStorage.getItem("swal-initiation");e?(t.getTime()-Date.parse(e))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const s=document.createElement("audio");s.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",s.loop=!0,document.body.appendChild(s),setTimeout(()=>{s.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${t}`)}ys.prototype.disableButtons=$S;ys.prototype.enableButtons=IS;ys.prototype.getInput=LS;ys.prototype.disableInput=BS;ys.prototype.enableInput=US;ys.prototype.hideLoading=am;ys.prototype.disableLoading=am;ys.prototype.showValidationMessage=zS;ys.prototype.resetValidationMessage=FS;ys.prototype.close=Wa;ys.prototype.closePopup=Wa;ys.prototype.closeModal=Wa;ys.prototype.closeToast=Wa;ys.prototype.rejectPromise=OS;ys.prototype.update=YS;ys.prototype._destroy=KS;Object.assign(ys,Xq);Object.keys(Oq).forEach(t=>{ys[t]=function(...e){return ci&&ci[t]?ci[t](...e):null}});ys.DismissReason=Wc;ys.version="11.22.2";const Et=ys;Et.default=Et;typeof document<"u"&&function(t,e){var s=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(s),s.styleSheet)s.styleSheet.disabled||(s.styleSheet.cssText=e);else try{s.innerHTML=e}catch{s.innerText=e}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const Ba={customClass:{popup:"rounded-lg shadow-xl",title:"text-lg font-semibold text-gray-900",htmlContainer:"text-sm text-gray-600",confirmButton:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",cancelButton:"bg-gray-300 hover:bg-gray-400 text-gray-700 font-medium py-2 px-4 rounded-md transition-colors mr-2",denyButton:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition-colors mr-2"},buttonsStyling:!1},cm={success:(t,e)=>Et.fire({...Ba,icon:"success",title:t,text:e,timer:3e3,timerProgressBar:!0,showConfirmButton:!1}),error:(t,e)=>Et.fire({...Ba,icon:"error",title:t,text:e,confirmButtonText:"OK"}),warning:(t,e)=>Et.fire({...Ba,icon:"warning",title:t,text:e,confirmButtonText:"OK"}),info:(t,e)=>Et.fire({...Ba,icon:"info",title:t,text:e,confirmButtonText:"OK"}),confirm:(t,e,s="Yes",r="Cancel")=>Et.fire({...Ba,icon:"question",title:t,text:e,showCancelButton:!0,confirmButtonText:s,cancelButtonText:r}),confirmDelete:t=>Et.fire({...Ba,icon:"warning",title:"Are you sure?",text:`Do you want to delete ${t}? This action cannot be undone.`,showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",customClass:{...Ba.customClass,confirmButton:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}}),loading:(t="Processing...")=>Et.fire({...Ba,title:t,allowEscapeKey:!1,allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{Et.showLoading()}}),toast:{success:t=>Et.fire({toast:!0,position:"top-end",icon:"success",title:t,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}}),error:t=>Et.fire({toast:!0,position:"top-end",icon:"error",title:t,showConfirmButton:!1,timer:4e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}}),info:t=>Et.fire({toast:!0,position:"top-end",icon:"info",title:t,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}})},copyToClipboard:(t,e="Copied to clipboard!")=>{navigator.clipboard.writeText(t).then(()=>{cm.toast.success(e)}).catch(()=>{cm.toast.error("Failed to copy to clipboard")})}},ae=(t,e,s)=>cm[t](e,s),tE=[{id:25,name:"Learning Circle Interactive Course",points_per_hour:1},{id:24,name:"Mentor TESOL teacher",points_per_hour:1},{id:23,name:"Attend industry webinar",points_per_hour:1},{id:15,name:"Attend industry PD event",points_per_hour:1},{id:14,name:"Attend English Australia PD event",points_per_hour:1},{id:17,name:"Present at industry event (include preparation time)",points_per_hour:2},{id:21,name:"Attend in-house PD or Training event",points_per_hour:1},{id:22,name:"Present at in-house PD event (include preparation time)",points_per_hour:2},{id:9,name:"Attend English Australia webinar",points_per_hour:1},{id:12,name:"Watch recorded webinar",points_per_hour:1},{id:18,name:"Peer-observe someone's lesson",points_per_hour:1},{id:19,name:"Be observed teaching (including feedback)",points_per_hour:1},{id:20,name:"Complete professional course",points_per_hour:1},{id:10,name:"Attend Industry Training",points_per_hour:1},{id:13,name:"Read journal article",points_per_hour:.5},{id:11,name:"Read professional article",points_per_hour:.5}];let N8=class $f{static async getUserActivities(e){try{const s=localStorage.getItem("eau_impersonation_session");let r;if(s)try{r=JSON.parse(s).impersonatedUserId,console.log("Getting activities for impersonated member:",r)}catch(u){console.error("Error parsing impersonation session:",u);const{data:h,error:f}=await V.from("members").select("id").eq("user_id",e).single();if(f||!h)return console.error("Error fetching member data:",f),[];r=h.id}else{const{data:u,error:h}=await V.from("members").select("id").eq("user_id",e).single();if(h||!u)return console.error("Error fetching member data:",h),[];r=u.id}const{data:a,error:o}=await V.from("cpd_activities").select("*").eq("member_id",r).order("date_completed",{ascending:!1});if(o)throw o;return a||[]}catch(s){throw console.error("Error fetching CPD activities:",s),s}}static async createActivity(e,s,r){try{const a=localStorage.getItem("eau_impersonation_session");let o;if(a)try{o=JSON.parse(a).impersonatedUserId,console.log("Creating activity for impersonated member:",o)}catch(L){console.error("Error parsing impersonation session:",L);const{data:B,error:S}=await V.from("members").select("id").eq("user_id",s).single();if(S||!B)throw console.error("Error fetching member data:",S),new Error("Member record not found for this user");o=B.id}else{const{data:L,error:B}=await V.from("members").select("id").eq("user_id",s).single();if(B||!L)throw console.error("Error fetching member data:",B),new Error("Member record not found for this user");o=L.id}console.log("Using member_id:",o);const[u,h]=await Promise.all([$f.getCPDSettings(),$f.getCategorySettings()]),f=h.find(L=>L.category_id===e.category_id),m=tE.find(L=>L.id===e.category_id),g=f?.points_per_hour||m?.points_per_hour||1,x=f?.category_name||m?.name||"Unknown Category",_=(e.hours+e.minutes/60)*g,b="approved",N={approved_at:new Date().toISOString()};a||(N.approved_by=s);let w=null,E=null;if(e.evidence){console.log("Processing evidence file:",e.evidence.name);try{const L=new FileReader,B=new Promise((k,z)=>{L.onload=()=>{const R=L.result;k(R)},L.onerror=z});L.readAsDataURL(e.evidence),w=await B,E=e.evidence.name,console.log("Evidence processed as base64, filename:",E),e.evidence.size>2*1024*1024&&ae("warning","Certificate file is large and may not save properly. Consider using a smaller file.")}catch(L){console.error("Error processing evidence file:",L),ae("warning","Could not process certificate file, but activity will be created")}}const A={member_id:o,category_id:e.category_id,category_name:x,activity_title:e.activity_title,description:e.description||"",provider:e.provider||"",date_completed:e.date_completed,hours:e.hours,minutes:e.minutes,points:_,evidence_url:w,evidence_filename:E,status:b,...N};a||(A.user_id=s,A.created_by=s),console.log("Attempting to insert CPD activity with data:",A);const{data:O,error:F}=await V.from("cpd_activities").insert(A).select().single();if(F)throw console.error("Supabase error details:",F),console.error("Activity data that failed:",A),F;return ae("success","CPD activity added and automatically approved!"),O}catch(a){throw console.error("Error creating CPD activity:",a),ae("error","Failed to add CPD activity"),a}}static async updateActivity(e,s){try{const{data:r,error:a}=await V.from("cpd_activities").update(s).eq("id",e).select().single();if(a)throw a;return ae("success","CPD activity updated successfully!"),r}catch(r){throw console.error("Error updating CPD activity:",r),ae("error","Failed to update CPD activity"),r}}static async deleteActivity(e){try{const{error:s}=await V.from("cpd_activities").delete().eq("id",e);if(s)throw s;ae("success","CPD activity deleted successfully!")}catch(s){throw console.error("Error deleting CPD activity:",s),ae("error","Failed to delete CPD activity"),s}}static async getTotalPoints(e){try{const s=localStorage.getItem("eau_impersonation_session");let r;if(s)try{r=JSON.parse(s).impersonatedUserId}catch(u){console.error("Error parsing impersonation session:",u);const{data:h,error:f}=await V.from("members").select("id").eq("user_id",e).single();if(f||!h)return console.error("Error fetching member data:",f),0;r=h.id}else{const{data:u,error:h}=await V.from("members").select("id").eq("user_id",e).single();if(h||!u)return console.error("Error fetching member data:",h),0;r=u.id}const{data:a,error:o}=await V.from("cpd_activities").select("points").eq("member_id",r).eq("status","approved");if(o)throw o;return a?.reduce((u,h)=>u+(h.points||0),0)||0}catch(s){return console.error("Error calculating total points:",s),0}}static async getYearlyPoints(e,s){try{const r=localStorage.getItem("eau_impersonation_session");let a;if(r)try{a=JSON.parse(r).impersonatedUserId}catch(m){console.error("Error parsing impersonation session:",m);const{data:g,error:x}=await V.from("members").select("id").eq("user_id",e).single();if(x||!g)return console.error("Error fetching member data:",x),0;a=g.id}else{const{data:m,error:g}=await V.from("members").select("id").eq("user_id",e).single();if(g||!m)return console.error("Error fetching member data:",g),0;a=m.id}const o=`${s}-01-01`,u=`${s}-12-31`,{data:h,error:f}=await V.from("cpd_activities").select("points").eq("member_id",a).eq("status","approved").gte("date_completed",o).lte("date_completed",u);if(f)throw f;return h?.reduce((m,g)=>m+(g.points||0),0)||0}catch(r){return console.error("Error calculating yearly points:",r),0}}static async getAllActivities(e){try{let s=V.from("cpd_activities").select(`
          *,
          members(id, first_name, last_name, email)
        `).order("created_at",{ascending:!1});e?.status&&(s=s.eq("status",e.status)),e?.userId&&(s=s.eq("member_id",e.userId)),e?.search&&(s=s.ilike("activity_title",`%${e.search}%`));const{data:r,error:a}=await s;if(a)throw a;return r||[]}catch(s){return console.error("Error fetching all activities:",s),[]}}static async getAllPendingActivities(){try{const{data:e,error:s}=await V.from("cpd_activities").select(`
          *,
          members!inner(first_name, last_name, email)
        `).eq("status","pending").order("created_at",{ascending:!1});if(s)throw s;return e||[]}catch(e){throw console.error("Error fetching pending activities:",e),e}}static async getPendingActivitiesCount(){try{const{count:e,error:s}=await V.from("cpd_activities").select("*",{count:"exact",head:!0}).eq("status","pending");if(s)throw s;return e||0}catch(e){return console.error("Error counting pending activities:",e),0}}static async getAllActivitiesStats(){try{const[e,s,r,a]=await Promise.all([V.from("cpd_activities").select("*",{count:"exact",head:!0}),V.from("cpd_activities").select("*",{count:"exact",head:!0}).eq("status","pending"),V.from("cpd_activities").select("*",{count:"exact",head:!0}).eq("status","approved"),V.from("cpd_activities").select("*",{count:"exact",head:!0}).eq("status","rejected")]);return{total:e.count||0,pending:s.count||0,approved:r.count||0,rejected:a.count||0}}catch(e){return console.error("Error getting activities stats:",e),{total:0,pending:0,approved:0,rejected:0}}}static async getPointsStats(){try{const e=new Date,r=new Date(e.getFullYear(),e.getMonth(),1).toISOString(),{data:a,error:o}=await V.from("cpd_activities").select("points").eq("status","approved");if(o)throw o;const{data:u,error:h}=await V.from("cpd_activities").select("points").eq("status","approved").gte("created_at",r);if(h)throw h;const f=a?.reduce((g,x)=>g+(x.points||0),0)||0,m=u?.reduce((g,x)=>g+(x.points||0),0)||0;return{totalPoints:f,monthlyPoints:m}}catch(e){return console.error("Error getting points stats:",e),{totalPoints:0,monthlyPoints:0}}}static async approveActivity(e,s){try{const{data:r,error:a}=await V.from("cpd_activities").update({status:"approved",approved_by:s,approved_at:new Date().toISOString(),updated_by:s,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw a;return ae("success","CPD activity approved successfully!"),r}catch(r){throw console.error("Error approving activity:",r),ae("error","Failed to approve activity"),r}}static async rejectActivity(e,s,r){try{const{data:a,error:o}=await V.from("cpd_activities").update({status:"rejected",approved_by:s,approved_at:new Date().toISOString(),rejection_reason:r,updated_by:s,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(o)throw o;return ae("success","CPD activity rejected"),a}catch(a){throw console.error("Error rejecting activity:",a),ae("error","Failed to reject activity"),a}}static async getCPDSettings(){try{const{data:e,error:s}=await V.from("cpd_settings").select("*").single();if(s){if(s.code==="42P01"||s.message.includes("404")||s.message.includes("relation")||s.message.includes("does not exist"))return console.warn("CPD Settings table not found, using default settings. Please run the setup SQL."),{id:"default",auto_approval_enabled:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};throw s}return e}catch(e){return console.error("Error fetching CPD settings:",e),{id:"default",auto_approval_enabled:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}}static async updateCPDSettings(e){try{const s=await $f.getCPDSettings();if(!s||s.id==="default"){const{data:o,error:u}=await V.from("cpd_settings").insert({...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(u)throw u;return ae("success","CPD settings created successfully!"),o}const{data:r,error:a}=await V.from("cpd_settings").update({...e,updated_at:new Date().toISOString()}).eq("id",s.id).select().single();if(a)throw a.code==="42P01"||a.message.includes("404")||a.message.includes("relation")||a.message.includes("does not exist")?(ae("error","CPD Settings table not found. Please run the setup SQL first."),new Error("Tables not created. Please run the setup SQL in Supabase Studio.")):a;return ae("success","CPD settings updated successfully!"),r}catch(s){console.error("Error updating CPD settings:",s);const r=s.message?.includes("Tables not created")?"Please run the setup SQL first":"Failed to update CPD settings";throw ae("error",r),s}}static async getCategorySettings(){try{const{data:e,error:s}=await V.from("cpd_category_settings").select("*").eq("is_active",!0).order("category_name");if(s){if(s.code==="42P01"||s.message.includes("404")||s.message.includes("relation")||s.message.includes("does not exist"))return console.warn("CPD Category Settings table not found, using hardcoded categories. Please run the setup SQL."),[];throw s}return e||[]}catch(e){return console.error("Error fetching category settings:",e),[]}}static async updateCategorySettings(e,s){try{const{data:r,error:a}=await V.from("cpd_category_settings").update({...s,updated_at:new Date().toISOString()}).eq("category_id",e).select().single();if(a)throw a.code==="42P01"||a.message.includes("404")||a.message.includes("relation")||a.message.includes("does not exist")?(ae("error","CPD Category Settings table not found. Please run the setup SQL first."),new Error("Tables not created. Please run the setup SQL in Supabase Studio.")):a;return ae("success","Category settings updated successfully!"),r}catch(r){console.error("Error updating category settings:",r);const a=r.message?.includes("Tables not created")?"Please run the setup SQL first":"Failed to update category settings";throw ae("error",a),r}}};const ol={CPDService:N8,CPD_CATEGORIES:tE},S8=[{id:"1",created_at:"2025-01-01T00:00:00Z",updated_at:"2025-01-01T00:00:00Z",first_name:"Joo",last_name:"Silva",email:"joao.silva@example.com",phone:"+61 123 456 789",date_of_birth:"1985-05-15",address_line1:"123 Collins Street",address_line2:null,city:"Melbourne",state:"VIC",postal_code:"3000",country:"Australia",membership_status:"active",membership_type:"premium",membership_start_date:"2025-01-01",membership_end_date:null,profession:"English Teacher",experience_years:10,qualifications:"TESOL Certified, Masters in Education",receive_newsletters:!0,receive_event_notifications:!0,created_by:"demo-user",updated_by:"demo-user",member_roles:[{id:"1",created_at:"2025-01-01T00:00:00Z",member_id:"1",role:"member"}]},{id:"2",created_at:"2025-01-02T00:00:00Z",updated_at:"2025-01-02T00:00:00Z",first_name:"Maria",last_name:"Santos",email:"maria.santos@example.com",phone:"+61 987 654 321",date_of_birth:"1990-08-22",address_line1:"456 Queen Street",address_line2:"Apt 12",city:"Sydney",state:"NSW",postal_code:"2000",country:"Australia",membership_status:"active",membership_type:"standard",membership_start_date:"2025-01-02",membership_end_date:null,profession:"Language Coordinator",experience_years:7,qualifications:"CELTA Certified, Bachelor in Linguistics",receive_newsletters:!0,receive_event_notifications:!1,created_by:"demo-user",updated_by:"demo-user",member_roles:[{id:"2",created_at:"2025-01-02T00:00:00Z",member_id:"2",role:"member"},{id:"3",created_at:"2025-01-02T00:00:00Z",member_id:"2",role:"moderator"}]},{id:"3",created_at:"2025-01-15T00:00:00Z",updated_at:"2025-01-15T00:00:00Z",first_name:"Peter",last_name:"Johnson",email:"peter.johnson@example.com",phone:null,date_of_birth:null,address_line1:null,address_line2:null,city:null,state:null,postal_code:null,country:"Australia",membership_status:"inactive",membership_type:"student",membership_start_date:"2025-01-15",membership_end_date:"2025-12-31",profession:"Student",experience_years:2,qualifications:"Currently studying TESOL",receive_newsletters:!1,receive_event_notifications:!0,created_by:"demo-user",updated_by:"demo-user",member_roles:[{id:"4",created_at:"2025-01-15T00:00:00Z",member_id:"3",role:"member"}]}];class Bl{static members=[...S8];static nextId=4;static delay(e=300){return new Promise(s=>setTimeout(s,e))}static async getAllMembers(){return await this.delay(),[...this.members]}static async getMemberById(e){return await this.delay(),this.members.find(s=>s.id===e)||null}static async getMemberByEmail(e){return await this.delay(),this.members.find(s=>s.email===e)||null}static async createMember(e){await this.delay();const s={id:this.nextId.toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString(),first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,date_of_birth:e.date_of_birth,address_line1:e.address_line1,address_line2:e.address_line2,city:e.city,state:e.state,postal_code:e.postal_code,country:e.country||"Australia",membership_status:e.membership_status||"active",membership_type:e.membership_type||"standard",membership_start_date:e.membership_start_date||new Date().toISOString().split("T")[0],membership_end_date:e.membership_end_date,profession:e.profession,experience_years:e.experience_years,qualifications:e.qualifications,receive_newsletters:e.receive_newsletters??!0,receive_event_notifications:e.receive_event_notifications??!0,created_by:"demo-user",updated_by:"demo-user",member_roles:[{id:(this.nextId+100).toString(),created_at:new Date().toISOString(),member_id:this.nextId.toString(),role:"member"}]};return this.members.push(s),this.nextId++,{id:s.id,created_at:s.created_at,updated_at:s.updated_at,first_name:s.first_name,last_name:s.last_name,email:s.email,phone:s.phone,date_of_birth:s.date_of_birth,address_line1:s.address_line1,address_line2:s.address_line2,city:s.city,state:s.state,postal_code:s.postal_code,country:s.country,membership_status:s.membership_status,membership_type:s.membership_type,membership_start_date:s.membership_start_date,membership_end_date:s.membership_end_date,profession:s.profession,experience_years:s.experience_years,qualifications:s.qualifications,receive_newsletters:s.receive_newsletters,receive_event_notifications:s.receive_event_notifications,created_by:s.created_by,updated_by:s.updated_by}}static async updateMember(e,s){await this.delay();const r=this.members.findIndex(a=>a.id===e);if(r===-1)throw new Error("Membro no encontrado");return this.members[r]={...this.members[r],...s,updated_at:new Date().toISOString()},this.members[r]}static async deleteMember(e){await this.delay();const s=this.members.findIndex(r=>r.id===e);if(s===-1)throw new Error("Membro no encontrado");this.members.splice(s,1)}static async searchMembers(e){await this.delay();let s=[...this.members];if(e.search){const r=e.search.toLowerCase();s=s.filter(a=>a.first_name.toLowerCase().includes(r)||a.last_name.toLowerCase().includes(r)||a.email.toLowerCase().includes(r))}return e.status&&(s=s.filter(r=>r.membership_status===e.status)),e.type&&(s=s.filter(r=>r.membership_type===e.type)),e.offset&&(s=s.slice(e.offset)),e.limit&&(s=s.slice(0,e.limit)),s}static async addMemberRole(e,s){await this.delay();const r=this.members.find(o=>o.id===e);if(!r)throw new Error("Membro no encontrado");r.member_roles.some(o=>o.role===s)||r.member_roles.push({id:Date.now().toString(),created_at:new Date().toISOString(),member_id:e,role:s})}static async removeMemberRole(e,s){await this.delay();const r=this.members.find(a=>a.id===e);if(!r)throw new Error("Membro no encontrado");r.member_roles=r.member_roles.filter(a=>a.role!==s)}static async addMemberHistory(e,s,r){await this.delay()}static async getMemberHistory(e){return await this.delay(),[]}static async getMemberStats(){await this.delay();const e=this.members.length,s=this.members.filter(o=>o.membership_status==="active").length,r=new Date;r.setMonth(r.getMonth());const a=this.members.filter(o=>new Date(o.created_at)>=new Date(r.getFullYear(),r.getMonth(),1)).length;return{total:e,active:s,newThisMonth:a,inactive:e-s}}}class ui{static async isSupabaseAvailable(){try{const{error:e}=await V.from("members").select("id").limit(1);return!e}catch{return!1}}static async getAllMembers(){if(!await this.isSupabaseAvailable())return console.warn("Supabase no disponvel, usando modo demo"),Bl.getAllMembers();const{data:s,error:r}=await V.from("members").select(`
        *,
        member_roles (*)
      `).order("created_at",{ascending:!1});if(r)throw new Error(`Erro ao buscar membros: ${r.message}`);return s||[]}static async getMemberById(e){if(!await this.isSupabaseAvailable())return Bl.getMemberById(e);const{data:r,error:a}=await V.from("members").select(`
        *,
        member_roles (*)
      `).eq("id",e).single();if(a){if(a.code==="PGRST116")return null;throw new Error(`Erro ao buscar membro: ${a.message}`)}return r}static async getMemberByEmail(e){if(!await this.isSupabaseAvailable())return Bl.getMemberByEmail(e);const{data:r,error:a}=await V.from("members").select(`
        *,
        member_roles (*)
      `).eq("email",e).single();if(a){if(a.code==="PGRST116")return null;throw new Error(`Erro ao buscar membro: ${a.message}`)}return r}static async createMember(e){if(!await this.isSupabaseAvailable())return Bl.createMember(e);const{data:r}=await V.auth.getUser(),a={...e,created_by:r.user?.id,updated_by:r.user?.id},{data:o,error:u}=await V.from("members").insert(a).select().single();if(u)throw new Error(`Erro ao criar membro: ${u.message}`);return await this.addMemberHistory(o.id,"created",{member:e}),o}static async updateMember(e,s){const{data:r}=await V.auth.getUser(),a={...s,updated_by:r.user?.id},{data:o,error:u}=await V.from("members").update(a).eq("id",e).select().single();if(u)throw new Error(`Erro ao atualizar membro: ${u.message}`);return await this.addMemberHistory(e,"updated",{updates:s}),o}static async deleteMember(e){try{await this.addMemberHistory(e,"deleted",{})}catch(r){console.log("Could not add deletion to history:",r)}const{error:s}=await V.from("members").delete().eq("id",e);if(s)throw new Error(`Erro ao deletar membro: ${s.message}`)}static async deleteMultipleMembers(e){if(e.length===0)return{success:0,failed:0};const{error:s}=await V.from("members").delete().in("id",e);if(s){console.error("Bulk delete failed, falling back to individual deletes:",s);let r=0,a=0;for(const o of e)try{await this.deleteMember(o),r++}catch(u){console.error(`Failed to delete member ${o}:`,u),a++}return{success:r,failed:a}}return{success:e.length,failed:0}}static async searchMembers(e){if(!await this.isSupabaseAvailable())return Bl.searchMembers(e);let r=V.from("members").select(`
        *,
        member_roles (*)
      `);e.search&&(r=r.or(`first_name.ilike.%${e.search}%,last_name.ilike.%${e.search}%,email.ilike.%${e.search}%`)),e.status&&(r=r.eq("membership_status",e.status)),e.type&&(r=r.eq("membership_type",e.type)),e.limit&&(r=r.limit(e.limit)),e.offset&&(r=r.range(e.offset,e.offset+(e.limit||10)-1)),r=r.order("created_at",{ascending:!1});const{data:a,error:o}=await r;if(o)throw new Error(`Erro ao buscar membros: ${o.message}`);return a||[]}static async searchMembersPaginated(e){if(!await this.isSupabaseAvailable()){const m=await Bl.searchMembers(e),g=(e.page-1)*e.pageSize,x=g+e.pageSize;return{data:m.slice(g,x),count:m.length}}let r=V.from("members").select(`
        *,
        member_roles (*)
      `,{count:"exact"});e.search&&(r=r.or(`first_name.ilike.%${e.search}%,last_name.ilike.%${e.search}%,email.ilike.%${e.search}%`)),e.status&&(r=r.eq("membership_status",e.status)),e.type&&(r=r.eq("membership_type",e.type));const a=(e.page-1)*e.pageSize,o=a+e.pageSize-1;r=r.range(a,o).order("created_at",{ascending:!1});const{data:u,error:h,count:f}=await r;if(h)throw new Error(`Erro ao pesquisar membros: ${h.message}`);return{data:u||[],count:f||0}}static async addMemberRole(e,s){const{error:r}=await V.from("member_roles").insert({member_id:e,role:s});if(r)throw new Error(`Erro ao adicionar role: ${r.message}`);await this.addMemberHistory(e,"role_added",{role:s})}static async removeMemberRole(e,s){const{error:r}=await V.from("member_roles").delete().eq("member_id",e).eq("role",s);if(r)throw new Error(`Erro ao remover role: ${r.message}`);await this.addMemberHistory(e,"role_removed",{role:s})}static async addMemberHistory(e,s,r){const{data:a}=await V.auth.getUser(),{error:o}=await V.from("member_history").insert({member_id:e,action:s,details:r,performed_by:a.user?.id});o&&console.error("Erro ao adicionar histrico:",o.message)}static async getMemberHistory(e){const{data:s,error:r}=await V.from("member_history").select("*").eq("member_id",e).order("created_at",{ascending:!1});if(r)throw new Error(`Erro ao buscar histrico: ${r.message}`);return s||[]}static async getMemberStats(){if(!await this.isSupabaseAvailable())return Bl.getMemberStats();const{count:s}=await V.from("members").select("*",{count:"exact",head:!0}),{count:r}=await V.from("members").select("*",{count:"exact",head:!0}).eq("membership_status","active"),{count:a}=await V.from("members").select("*",{count:"exact",head:!0}).gte("created_at",new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString());return{total:s||0,active:r||0,newThisMonth:a||0,inactive:(s||0)-(r||0)}}}class Xt{static async getCategories(e=!0){let s=V.from("event_categories").select("*").order("sort_order");e&&(s=s.eq("is_active",!0));const{data:r,error:a}=await s;if(a)throw console.error("Error fetching categories:",a),a;return r||[]}static async getEvents(e){let s=V.from("events").select(`
        *,
        category:event_categories(*)
      `).order("start_date",{ascending:!0});e&&(e.status?.length&&(s=s.in("status",e.status)),e.category?.length&&(s=s.in("category_id",e.category)),e.location_type?.length&&(s=s.in("location_type",e.location_type)),e.date_from&&(s=s.gte("start_date",e.date_from)),e.date_to&&(s=s.lte("start_date",e.date_to)),e.has_cpd!==void 0&&(s=e.has_cpd?s.gt("cpd_points",0):s.eq("cpd_points",0)),e.featured_only&&(s=s.eq("featured",!0)),e.search&&(s=s.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%`)));const{data:r,error:a}=await s;if(a)throw console.error("Error fetching events:",a),a;return r||[]}static async getPublicEvents(){return this.getEvents({status:["published"]})}static async getUpcomingEvents(e=10){const{data:s,error:r}=await V.from("events").select(`
        *,
        category:event_categories(*)
      `).eq("status","published").gte("start_date",new Date().toISOString()).order("start_date",{ascending:!0}).limit(e);if(r)throw console.error("Error fetching upcoming events:",r),r;return s||[]}static async getEventById(e){const{data:s,error:r}=await V.from("events").select(`
        *,
        category:event_categories(*)
      `).eq("id",e).single();if(r)throw console.error("Error fetching event:",r),r;return s}static async getEventBySlug(e){const{data:s,error:r}=await V.from("events").select(`
        *,
        category:event_categories(*)
      `).eq("slug",e).single();if(r)throw console.error("Error fetching event by slug:",r),r;return s}static async createEvent(e){const{data:{session:s}}=await V.auth.getSession();if(!s?.user)throw new Error("User not authenticated");const r={title:e.title,description:e.description||null,short_description:e.short_description||null,category_id:e.category_id||null,start_date:e.start_date,end_date:e.end_date,timezone:e.timezone,location_type:e.location_type,venue_name:e.venue_name||null,address_line1:e.address_line1||null,city:e.city||null,state:e.state||null,postal_code:e.postal_code||null,country:e.country,virtual_link:e.virtual_link||null,capacity:Number(e.capacity)||50,member_price_cents:Math.round((Number(e.member_price)||0)*100),non_member_price_cents:Math.round((Number(e.non_member_price)||0)*100),early_bird_price_cents:e.early_bird_price?Math.round(Number(e.early_bird_price)*100):null,early_bird_end_date:e.early_bird_end_date||null,cpd_points:Number(e.cpd_points)||0,cpd_category:e.cpd_category||null,visibility:e.visibility,featured:!!e.featured,allow_guests:!!e.allow_guests,max_guests_per_registration:Number(e.max_guests_per_registration)||0,requires_approval:!!e.requires_approval,image_url:e.image_url||null,created_by:s.user.id,status:"published"};console.log("Creating event with data:",r);const{data:a,error:o}=await V.from("events").insert(r).select().single();if(o)throw console.error("Error creating event:",o),console.error("Error details:",{message:o.message,details:o.details,hint:o.hint,code:o.code}),o;return a}static async updateEvent(e,s){console.log(" [EventService.updateEvent] Input data:",{id:e,description_length:s.description?.length,description_preview:s.description?.substring(0,100),hasDescription:"description"in s,eventData_keys:Object.keys(s),full_eventData:s});const r={...s};Object.keys(r).forEach(a=>{r[a]===void 0&&delete r[a]}),"image_url"in s&&(r.image_url=s.image_url||null),s.member_price!==void 0&&(r.member_price_cents=Math.round(s.member_price*100),delete r.member_price),s.non_member_price!==void 0&&(r.non_member_price_cents=Math.round(s.non_member_price*100),delete r.non_member_price),s.early_bird_price!==void 0&&(r.early_bird_price_cents=s.early_bird_price?Math.round(s.early_bird_price*100):null,delete r.early_bird_price),console.log(" [EventService.updateEvent] Data for DB:",{id:e,description_length:r.description?.length,description_preview:r.description?.substring(0,100),hasDescription:"description"in r,dataForDb_keys:Object.keys(r),dataForDb_types:Object.fromEntries(Object.entries(r).map(([a,o])=>[a,typeof o])),full_dataForDb:r});try{const{data:a,error:o}=await V.from("events").update(r).eq("id",e).select().single();if(o)throw console.error(" [EventService.updateEvent] Supabase error details:",{error:o,errorMessage:o.message,errorCode:o.code,errorDetails:o.details,errorHint:o.hint}),o;return console.log(" [EventService.updateEvent] Response from Supabase:",{id:a.id,description_length:a.description?.length,description_preview:a.description?.substring(0,100)}),a}catch(a){throw console.error(" [EventService.updateEvent] Network/Request error:",a),a}}static async publishEvent(e){const{data:s,error:r}=await V.from("events").update({status:"published",published_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw console.error("Error publishing event:",r),r;return s}static async cancelEvent(e,s){const{data:r,error:a}=await V.from("events").update({status:"cancelled",cancelled_at:new Date().toISOString(),cancellation_reason:s}).eq("id",e).select().single();if(a)throw console.error("Error cancelling event:",a),a;return r}static async deleteEvent(e){const{error:s}=await V.from("events").delete().eq("id",e);if(s)throw console.error("Error deleting event:",s),s}static async getRegistrations(e){let s=V.from("event_registrations").select(`
        *,
        event:events(*)
      `).order("created_at",{ascending:!1});e&&(e.event_id&&(s=s.eq("event_id",e.event_id)),e.status?.length&&(s=s.in("status",e.status)),e.payment_status?.length&&(s=s.in("payment_status",e.payment_status)),e.attended!==void 0&&(s=s.eq("attended",e.attended)),e.date_from&&(s=s.gte("created_at",e.date_from)),e.date_to&&(s=s.lte("created_at",e.date_to)),e.search&&(s=s.or(`first_name.ilike.%${e.search}%,last_name.ilike.%${e.search}%,email.ilike.%${e.search}%,registration_number.ilike.%${e.search}%`)));const{data:r,error:a}=await s;if(a)throw console.error("Error fetching registrations:",a),a;return r||[]}static async getEventRegistrations(e){return this.getRegistrations({event_id:e})}static async getUserRegistrations(e){const{data:s,error:r}=await V.from("event_registrations").select(`
        *,
        event:events(*)
      `).eq("user_id",e).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching user registrations:",r),r;return s||[]}static async getRegistrationById(e){const{data:s,error:r}=await V.from("event_registrations").select(`
        *,
        event:events(*)
      `).eq("id",e).single();if(r)throw console.error("Error fetching registration:",r),r;return s}static async registerForEvent(e){const s=await this.getEventById(e.event_id);if(!s)throw new Error("Event not found");const a=(await this.getEventRegistrations(e.event_id)).filter(g=>g.status==="confirmed").length;let o="confirmed";if(a>=s.capacity)if(s.waitlist_enabled)o="waitlisted";else throw new Error("Event is full and waitlist is not enabled");let h=s.non_member_price_cents;s.early_bird_price_cents&&s.early_bird_end_date&&new Date<new Date(s.early_bird_end_date)&&(h=s.early_bird_price_cents);const{data:f,error:m}=await V.from("event_registrations").insert({...e,status:o,registration_type:"non_member",amount_paid_cents:h,payment_status:h===0?"exempt":"pending"}).select().single();if(m)throw console.error("Error creating registration:",m),m;return f}static async updateRegistration(e,s){const{data:r,error:a}=await V.from("event_registrations").update(s).eq("id",e).select().single();if(a)throw console.error("Error updating registration:",a),a;return r}static async cancelRegistration(e,s){const{data:r,error:a}=await V.from("event_registrations").update({status:"cancelled",cancelled_at:new Date().toISOString(),cancellation_reason:s}).eq("id",e).select().single();if(a)throw console.error("Error cancelling registration:",a),a;return r}static async checkInRegistration(e,s="manual"){const{data:r,error:a}=await V.from("event_registrations").update({attended:!0,check_in_time:new Date().toISOString(),check_in_method:s}).eq("id",e).select().single();if(a)throw console.error("Error checking in registration:",a),a;return r}static async checkInByQRCode(e){const{data:s,error:r}=await V.from("event_registrations").select("*").eq("qr_code_token",e).single();if(r||!s)throw new Error("Invalid QR code");if(s.attended)throw new Error("Already checked in");return this.checkInRegistration(s.id,"qr_code")}static async getEventStatistics(e){const{data:s,error:r}=await V.from("event_statistics").select("*").eq("id",e).single();if(r)throw console.error("Error fetching event statistics:",r),r;return s}static async getDashboardStatistics(){const{count:e}=await V.from("events").select("*",{count:"exact",head:!0}),{count:s}=await V.from("events").select("*",{count:"exact",head:!0}).eq("status","published").gte("start_date",new Date().toISOString()),{count:r}=await V.from("event_registrations").select("*",{count:"exact",head:!0}).eq("status","confirmed"),{data:a}=await V.from("event_registrations").select("amount_paid_cents").eq("payment_status","paid"),o=a?.reduce((f,m)=>f+(m.amount_paid_cents||0),0)||0,u=await this.getUpcomingEvents(5),{data:h}=await V.from("event_registrations").select(`
        *,
        event:events(title, start_date)
      `).order("created_at",{ascending:!1}).limit(10);return{total_events:e||0,upcoming_events:s||0,total_registrations:r||0,total_revenue:o/100,average_attendance_rate:0,popular_categories:[],recent_registrations:h||[],upcoming_events_list:u}}static async getEventEmails(e){const{data:s,error:r}=await V.from("event_emails").select("*").eq("event_id",e).order("type");if(r)throw console.error("Error fetching event emails:",r),r;return s||[]}static async updateEmailTemplate(e,s){const{data:r,error:a}=await V.from("event_emails").update(s).eq("id",e).select().single();if(a)throw console.error("Error updating email template:",a),a;return r}static formatPrice(e){return new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"}).format(e/100)}static getEventStatus(e){const s=new Date,r=new Date(e.start_date),a=new Date(e.end_date);return e.status==="cancelled"?"Cancelled":e.status==="draft"?"Draft":s<r?"Upcoming":s>=r&&s<=a?"In Progress":"Completed"}static getAvailableSpots(e,s){const r=s.filter(a=>a.status==="confirmed").length;return Math.max(0,e.capacity-r)}static isRegistrationOpen(e){const s=new Date;return!(e.status!=="published"||e.registration_start_date&&s<new Date(e.registration_start_date)||e.registration_end_date&&s>new Date(e.registration_end_date))}}const{CPDService:_f}=ol,E8=()=>{const{user:t,roles:e,getEffectiveRoles:s}=jt(),r=Ns(),[a,o]=M.useState({total:0,pending:0,approved:0,rejected:0}),[u,h]=M.useState([]),[f,m]=M.useState({total:0,active:0,newThisMonth:0,inactive:0}),[g,x]=M.useState({active:0,upcoming:0,past:0}),[v,_]=M.useState(null),[b,N]=M.useState({totalPoints:0,monthlyPoints:0}),[w,E]=M.useState(!0);M.useEffect(()=>{A()},[]);const A=async()=>{try{E(!0);const[O,F,C,L,B,S]=await Promise.all([_f.getAllActivitiesStats(),_f.getAllPendingActivities(),ui.getMemberStats(),Xt.getEvents(),_f.getCPDSettings(),_f.getPointsStats()]);o(O),h(F),m(C),_(B),N(S);const k=new Date,z=L.filter(P=>P.status==="published"),R=z.filter(P=>new Date(P.start_date)>k),D=z.filter(P=>new Date(P.end_date)<k);x({active:z.length,upcoming:R.length,past:D.length})}catch(O){console.error("Error loading dashboard data:",O)}finally{E(!1)}};return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm border-b",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),n.jsxs("p",{className:"text-gray-600",children:["Welcome, ",t?.user_metadata?.full_name||t?.email," | Roles: ",e.join(", ")]})]})})})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx(de,{children:n.jsxs(cr,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Members"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:w?"...":f.total})]}),n.jsx("div",{className:"text-3xl",children:""})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Active: ",w?"...":f.active]})]})}),n.jsx(de,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>r("/cpd/management"),children:n.jsxs(cr,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"CPD Activities"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:w?"...":a.total})]}),n.jsx("div",{className:"text-3xl",children:""})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Pending approval: ",w?"...":a.pending]})]})}),n.jsx(de,{children:n.jsxs(cr,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Events"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:w?"...":g.active})]}),n.jsx("div",{className:"text-3xl",children:""})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Upcoming: ",w?"...":g.upcoming]})]})}),n.jsx(de,{children:n.jsxs(cr,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Points Awarded"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:w?"...":b.totalPoints})]}),n.jsx("div",{className:"text-3xl",children:""})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["This month: ",w?"...":b.monthlyPoints]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(de,{children:[n.jsxs(Rn,{children:[n.jsx(Mn,{className:"flex items-center gap-2",children:" Admin Actions"}),n.jsx(Dn,{children:"Common administrative tasks"})]}),n.jsx(cr,{children:n.jsxs("div",{className:"space-y-3",children:[(s().includes("AdminSuper")||v&&!v.auto_approval_enabled)&&n.jsx(Qt,{permission:"APPROVE_CPD",children:n.jsxs(re,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/cpd/review"),children:[" Review CPD Submissions (",w?"...":`${a.pending} pending`,")"]})}),n.jsx(Qt,{roles:["Admin","AdminSuper"],children:n.jsx(re,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/cpd/management"),children:" Manage All CPD Activities"})}),n.jsx(Qt,{roles:["AdminSuper"],children:n.jsx(re,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/cpd/settings"),children:" CPD Settings & Configuration"})}),n.jsx(Qt,{permission:"CREATE_EVENT",children:n.jsx(re,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/events"),children:" Create New Event"})}),n.jsx(Qt,{permission:"MANAGE_USERS",children:n.jsx(re,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin/members"),children:" Manage Users"})}),n.jsx(Qt,{permission:"VIEW_USER_REPORTS",children:n.jsx(re,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin"),children:" Generate Reports"})}),n.jsx(Qt,{permission:"ASSIGN_ROLES",children:n.jsx(re,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin/members"),children:" Assign User Roles"})}),n.jsx(Qt,{roles:["AdminSuper"],children:n.jsx(re,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin/smtp-settings"),children:" SMTP Settings"})}),n.jsx(Qt,{roles:["AdminSuper"],children:n.jsx(re,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin/email-templates"),children:" Email Templates"})}),n.jsx(Qt,{roles:["AdminSuper"],children:n.jsx(re,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin/event-reminders"),children:" Event Reminders"})}),n.jsx(Qt,{roles:["AdminSuper"],children:n.jsx(re,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin/import-system"),children:" Import System (CSV)"})}),n.jsx(Qt,{roles:["Admin","AdminSuper"],children:n.jsx(re,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin/duplicates"),children:" Review Member Duplicates"})}),n.jsx(Qt,{roles:["AdminSuper"],children:n.jsx(re,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-700 border-red-300 hover:border-red-400",onClick:()=>r("/admin/bulk-management"),children:" Bulk Member Management"})})]})})]}),n.jsxs(de,{children:[n.jsxs(Rn,{children:[n.jsx(Mn,{className:"flex items-center gap-2",children:" Recent System Activity"}),n.jsx(Dn,{children:"Latest platform activities and submissions"})]}),n.jsx(cr,{children:n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx("div",{className:"text-4xl mb-2",children:""}),n.jsx("p",{children:"No recent activity"}),n.jsx("p",{className:"text-sm",children:"System activities will appear here"})]})})]})]}),n.jsxs(de,{className:"mt-6",children:[n.jsxs(Rn,{children:[n.jsxs(Mn,{className:"flex items-center gap-2",children:[" Pending Actions (",w?"...":u.length,")"]}),n.jsx(Dn,{children:"Items requiring your attention"})]}),n.jsx(cr,{children:w?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):u.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"All caught up!"}),n.jsx("p",{className:"text-sm",children:"No pending actions require your attention."})]}):n.jsxs("div",{className:"space-y-4",children:[u.slice(0,5).map(O=>n.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:n.jsx("span",{className:"text-orange-600 font-medium text-sm",children:""})}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["CPD Submission: ",O.activity_title]}),n.jsxs("p",{className:"text-xs text-gray-600",children:["From: ",O.members?.first_name," ",O.members?.last_name," ",O.points," points ",new Date(O.created_at).toLocaleDateString()]})]})]}),n.jsx(re,{size:"sm",onClick:()=>r("/cpd/review"),className:"text-xs",children:"Review"})]},O.id)),u.length>5&&n.jsx("div",{className:"text-center pt-4 border-t border-gray-200",children:n.jsxs(re,{variant:"outline",onClick:()=>r("/cpd/review"),className:"text-sm",children:["View All ",u.length," Pending Items"]})})]})})]})]})]})},A8=()=>{const{isAdmin:t}=Tm(),{user:e,isLoading:s}=jt();return s?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading your dashboard..."})]})}):e?t()?n.jsx(E8,{}):n.jsx(DD,{}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-gray-600",children:"Please log in to access your dashboard."})})})},C8=()=>{const t=Ns(),{reset:e}=jt(),s=async()=>{try{await V.auth.signOut(),e(),t("/login")}catch(r){console.error("Erro ao fazer logout:",r),e(),t("/login")}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:n.jsxs(de,{className:"w-full max-w-md text-center",children:[n.jsxs(Rn,{children:[n.jsx("div",{className:"mx-auto mb-4 text-6xl",children:""}),n.jsx(Mn,{className:"text-2xl font-bold text-gray-900",children:"Access Denied"}),n.jsx(Dn,{children:"You don't have permission to access this page. Please contact your administrator if you believe this is an error."})]}),n.jsxs(cr,{className:"space-y-4",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("p",{children:"Required permissions not found in your account."}),n.jsx("p",{className:"mt-2",children:"Your current roles may not include access to this resource."})]}),n.jsxs("div",{className:"flex flex-col gap-3 pt-4",children:[n.jsx(re,{onClick:s,className:"w-full",children:"Logout and Try Again"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(re,{variant:"outline",onClick:()=>t(-1),className:"flex-1",children:"Go Back"}),n.jsx(re,{variant:"outline",onClick:()=>t("/dashboard"),className:"flex-1",children:"Dashboard"})]})]})]})]})})},Lt=({children:t,permission:e,roles:s,requireAll:r=!1,redirectTo:a="/unauthorized"})=>{const{hasPermission:o,hasAnyRole:u,hasAllRoles:h}=Tm(),{rolesLoaded:f,isLoading:m}=jt();return m||!f?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Verifying permissions..."})]})}):(e?o(e):s?r?h(s):u(s):!0)?n.jsx(n.Fragment,{children:t}):n.jsx(_d,{to:a,replace:!0})};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),T8=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),tj=t=>{const e=T8(t);return e.charAt(0).toUpperCase()+e.slice(1)},sE=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim(),O8=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var R8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:a="",children:o,iconNode:u,...h},f)=>M.createElement("svg",{ref:f,...R8,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:sE("lucide",a),...!o&&!O8(h)&&{"aria-hidden":"true"},...h},[...u.map(([m,g])=>M.createElement(m,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(t,e)=>{const s=M.forwardRef(({className:r,...a},o)=>M.createElement(M8,{ref:o,iconNode:e,className:sE(`lucide-${k8(tj(t))}`,`lucide-${t}`,r),...a}));return s.displayName=tj(t),s};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],un=Le("award",D8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],rE=Le("bell",L8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],um=Le("book-open",q8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],I8=Le("building-2",P8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Ed=Le("building",$8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],js=Le("calendar",U8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],sj=Le("camera",B8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Zl=Le("check",z8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],H8=Le("chevron-down",F8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],nE=Le("chevron-left",V8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Z8=Le("chevron-right",G8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ta=Le("circle-alert",Y8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fs=Le("circle-check-big",K8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Lc=Le("circle-x",W8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sa=Le("clock",Q8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],J8=Le("code",X8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],iE=Le("copy",eP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],aE=Le("credit-card",tP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],rP=Le("database",sP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],lE=Le("dollar-sign",nP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],qc=Le("download",iP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],lP=Le("ellipsis-vertical",aP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],oy=Le("external-link",oP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Uf=Le("eye-off",cP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ln=Le("eye",uP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ra=Le("file-text",dP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],fP=Le("funnel",hP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],oE=Le("globe",mP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],dm=Le("graduation-cap",pP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],yP=Le("grid-3x3",gP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],bP=Le("heart",xP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],wP=Le("house",vP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],jP=Le("info",_P);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],SP=Le("key",NP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],AP=Le("list",EP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],hn=Le("loader-circle",CP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],TP=Le("loader",kP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],cE=Le("log-out",OP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],qm=Le("mail",RP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],fi=Le("map-pin",MP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],LP=Le("menu",DP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],rj=Le("phone",qP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Pc=Le("plus",PP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ad=Le("refresh-cw",IP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Qd=Le("save",$P);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],tl=Le("search",UP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],vx=Le("send",BP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],eo=Le("settings",zP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],HP=Le("share-2",FP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],uE=Le("shield",VP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],ZP=Le("skip-forward",GP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],nj=Le("square-check-big",YP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],hm=Le("square-pen",KP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ij=Le("square",WP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],XP=Le("test-tube",QP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],eI=Le("ticket",JP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Qc=Le("trash-2",tI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],rI=Le("trending-up",sI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Xa=Le("triangle-alert",nI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],sl=Le("upload",iI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ho=Le("user-check",aI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],oI=Le("user-plus",lI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],uI=Le("user-x",cI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ji=Le("user",dI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],zr=Le("users",hI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],dE=Le("video",fI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fn=Le("x",mI),za={customClass:{popup:"rounded-lg shadow-xl",title:"text-lg font-semibold text-gray-900",htmlContainer:"text-sm text-gray-600",confirmButton:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",cancelButton:"bg-gray-300 hover:bg-gray-400 text-gray-700 font-medium py-2 px-4 rounded-md transition-colors mr-2",denyButton:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition-colors mr-2"},buttonsStyling:!1},cy={success:(t,e)=>Et.fire({...za,icon:"success",title:t,text:e,timer:3e3,timerProgressBar:!0,showConfirmButton:!1}),error:(t,e)=>Et.fire({...za,icon:"error",title:t,text:e,confirmButtonText:"OK"}),warning:(t,e)=>Et.fire({...za,icon:"warning",title:t,text:e,confirmButtonText:"OK"}),info:(t,e)=>Et.fire({...za,icon:"info",title:t,text:e,confirmButtonText:"OK"}),confirm:(t,e,s="Yes",r="Cancel")=>Et.fire({...za,icon:"question",title:t,text:e,showCancelButton:!0,confirmButtonText:s,cancelButtonText:r}),confirmDelete:t=>Et.fire({...za,icon:"warning",title:"Are you sure?",text:`Do you want to delete ${t}? This action cannot be undone.`,showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",customClass:{...za.customClass,confirmButton:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}}),loading:(t="Processing...")=>Et.fire({...za,title:t,allowEscapeKey:!1,allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{Et.showLoading()}}),toast:{success:t=>Et.fire({toast:!0,position:"top-end",icon:"success",title:t,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}}),error:t=>Et.fire({toast:!0,position:"top-end",icon:"error",title:t,showConfirmButton:!1,timer:4e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}}),info:t=>Et.fire({toast:!0,position:"top-end",icon:"info",title:t,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}})},copyToClipboard:(t,e="Copied to clipboard!")=>{navigator.clipboard.writeText(t).then(()=>{cy.toast.success(e)}).catch(()=>{cy.toast.error("Failed to copy to clipboard")})}},Os=(t,e,s)=>cy[t](e,s),pI=()=>{const t=Ns(),[e,s]=M.useState(Qi.getDisplayInfo()),[r,a]=M.useState(!1);M.useEffect(()=>{const u=()=>{s(Qi.getDisplayInfo())};u(),window.addEventListener("storage",u);const h=setInterval(u,1e3);return()=>{window.removeEventListener("storage",u),clearInterval(h)}},[]);const o=async()=>{a(!0);try{const u=await Qi.stopImpersonation();u.success?(Os("success","Exited impersonation mode"),t("/dashboard"),window.location.reload()):Os("error",u.error||"Failed to exit impersonation")}catch{Os("error","Error exiting impersonation")}finally{a(!1)}};return e.isImpersonating?n.jsx("div",{className:"fixed top-0 left-0 right-0 z-[60] bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-lg",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex items-center justify-between py-3",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xa,{className:"h-5 w-5 animate-pulse"}),n.jsx("span",{className:"font-semibold",children:"IMPERSONATION MODE"})]}),n.jsxs("div",{className:"hidden sm:flex items-center space-x-4 text-sm",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ji,{className:"h-4 w-4"}),n.jsxs("span",{children:["Original: ",n.jsx("strong",{children:e.originalEmail})]})]}),n.jsx("span",{children:""}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ji,{className:"h-4 w-4"}),n.jsxs("span",{children:["Viewing as: ",n.jsx("strong",{children:e.targetEmail})]})]})]})]}),n.jsxs("button",{onClick:o,disabled:r,className:"flex items-center space-x-2 bg-white text-orange-600 px-4 py-2 rounded-md font-medium hover:bg-orange-50 transition-colors disabled:opacity-50",children:[n.jsx(cE,{className:"h-4 w-4"}),n.jsx("span",{children:r?"Exiting...":"Exit Impersonation"})]})]}),n.jsx("div",{className:"sm:hidden pb-3 text-sm",children:n.jsxs("div",{className:"flex flex-col space-y-1",children:[n.jsxs("span",{children:["From: ",n.jsx("strong",{children:e.originalEmail})]}),n.jsxs("span",{children:["As: ",n.jsx("strong",{children:e.targetEmail})]})]})})]})}):null},gI=({children:t})=>{const e=Ns(),{user:s,roles:r,reset:a,getEffectiveRoles:o,simulatedRole:u}=jt(),[h,f]=M.useState(!1),[m,g]=M.useState(!1);o();const x=async()=>{f(!0);try{await V.auth.signOut(),a(),e("/login")}catch(E){console.error("Error signing out:",E)}finally{f(!1)}},v=Qi.isImpersonating(),_=Qi.getDisplayInfo(),b=v?{email:_.targetEmail}:s;o();const N=()=>{g(!m)},w=E=>{e(E),g(!1)};return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx(pI,{}),n.jsxs("nav",{className:`bg-white shadow-sm border-b sticky z-50 ${v?"top-16":"top-0"}`,children:[n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsx("div",{className:"flex items-center",children:n.jsx("button",{onClick:()=>w("/dashboard"),className:"flex items-center focus:outline-none",children:n.jsx("img",{src:"/logo-500.png",alt:"English Australia",className:"h-12 w-auto"})})}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"hidden sm:flex items-center space-x-2 text-sm text-gray-600",children:[n.jsx(Ji,{className:"h-4 w-4"}),n.jsx("span",{children:b?.email})]}),n.jsx("button",{onClick:N,className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",children:m?n.jsx(fn,{className:"h-6 w-6"}):n.jsx(LP,{className:"h-6 w-6"})})]})]})}),m&&n.jsx("div",{className:"absolute left-0 right-0 bg-white shadow-lg border-b z-40 animate-in slide-in-from-top duration-200 top-16",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 space-y-1",children:[n.jsxs("div",{className:"border-b pb-4 mb-4",children:[n.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Navigation"}),n.jsxs("button",{onClick:()=>w("/dashboard"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(wP,{className:"h-4 w-4 mr-3 text-blue-500"}),"Dashboard"]}),n.jsx(Qt,{permission:"CREATE_CPD",children:n.jsxs("button",{onClick:()=>w("/cpd"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(um,{className:"h-4 w-4 mr-3 text-green-500"}),"My CPDs"]})}),n.jsx(Qt,{permission:"REGISTER_EVENT",children:n.jsxs("button",{onClick:()=>w("/events"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(js,{className:"h-4 w-4 mr-3 text-purple-500"}),"Events"]})}),n.jsx(Qt,{permission:"REGISTER_EVENT",children:n.jsxs("button",{onClick:()=>w("/my-registrations"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(js,{className:"h-4 w-4 mr-3 text-orange-500"}),"My Registrations"]})})]}),n.jsxs("div",{className:"border-b pb-4 mb-4",children:[n.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Learning Platform"}),n.jsxs("button",{onClick:()=>{al(async()=>{const{openLearningService:E}=await Promise.resolve().then(()=>fZ);return{openLearningService:E}},void 0).then(({openLearningService:E})=>{E.launchSSO(void 0,!0).catch(console.error)})},className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(dm,{className:"h-4 w-4 mr-3 text-indigo-500"}),"OpenLearning"]})]}),n.jsx(Qt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsxs("div",{className:"border-b pb-4 mb-4",children:[n.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Administration"}),n.jsxs("button",{onClick:()=>w("/admin"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(uE,{className:"h-4 w-4 mr-3 text-red-500"}),"Admin Dashboard"]}),n.jsxs("button",{onClick:()=>w("/admin/members"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(zr,{className:"h-4 w-4 mr-3 text-blue-500"}),"Members"]}),n.jsxs("button",{onClick:()=>w("/admin/membership"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(eo,{className:"h-4 w-4 mr-3 text-gray-500"}),"Membership"]}),n.jsxs("button",{onClick:()=>w("/admin/openlearning"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(dm,{className:"h-4 w-4 mr-3 text-indigo-500"}),"OpenLearning Integration"]})]})}),n.jsxs("div",{className:"pt-2",children:[n.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Account"}),n.jsxs("button",{onClick:()=>w("/profile"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(Ji,{className:"h-4 w-4 mr-3 text-gray-500"}),"Profile"]}),n.jsxs("button",{onClick:x,disabled:h,className:"flex items-center w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md transition-colors disabled:opacity-50",children:[n.jsx(cE,{className:"h-4 w-4 mr-3"}),h?"Logging out...":"Logout"]})]}),n.jsx("div",{className:"sm:hidden pt-4 mt-4 border-t",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 px-3",children:[n.jsx(Ji,{className:"h-4 w-4"}),n.jsx("span",{children:b?.email})]})})]})})]}),n.jsx("main",{className:"flex-1",children:t}),n.jsx("footer",{className:"bg-white border-t mt-auto",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-2 sm:space-y-0",children:[n.jsxs("div",{className:"text-sm text-gray-500",children:[" ",new Date().getFullYear()," English Australia. All rights reserved."]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"text-xs text-gray-400",children:Sc.simple}),!1,u&&!Qi.isImpersonating()&&n.jsxs("div",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:["Simulating: ",u]})]})]})})}),m&&n.jsx("div",{className:"fixed inset-0 z-30 bg-black bg-opacity-50 lg:hidden",onClick:()=>g(!1)})]})},hE=()=>{const[t,e]=M.useState({total:0,active:0,newThisMonth:0,inactive:0}),[s,r]=M.useState(!0);M.useEffect(()=>{(async()=>{try{const u=await ui.getMemberStats();e(u)}catch(u){console.error("Error loading statistics:",u)}finally{r(!1)}})()},[]);const a=[{title:"Total Members",value:t.total,icon:zr,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Active Members",value:t.active,icon:ho,color:"text-green-600",bgColor:"bg-green-100"},{title:"New This Month",value:t.newThisMonth,icon:oI,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Inactive Members",value:t.inactive,icon:uI,color:"text-red-600",bgColor:"bg-red-100"}];return s?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(o=>n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})},o))}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map(o=>{const u=o.icon;return n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`p-3 rounded-lg ${o.bgColor}`,children:n.jsx(u,{className:`h-6 w-6 ${o.color}`})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:o.title}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.value})]})]})},o.title)})})},yI=()=>{const t=Ns(),{user:e}=jt(),s=e?.user_metadata?.role==="AdminSuper",r=[{title:"Manage Members",description:"View, create and edit members",icon:zr,color:"text-blue-600",bgColor:"bg-blue-100",onClick:()=>t("/admin/members")},{title:"CPDs",description:"Approve and manage CPD activities",icon:um,color:"text-purple-600",bgColor:"bg-purple-100",onClick:()=>t("/admin/cpds")},{title:"Approvals",description:"Pending approval items",icon:ho,color:"text-orange-600",bgColor:"bg-orange-100",onClick:()=>t("/admin/approvals")},{title:"Reports",description:"View reports and statistics",icon:ra,color:"text-indigo-600",bgColor:"bg-indigo-100",onClick:()=>t("/admin/reports")},{title:"Import Activities",description:"Import CPD activities from CSV",icon:sl,color:"text-teal-600",bgColor:"bg-teal-100",onClick:()=>t("/admin/import-activities")},{title:"Import System",description:"Import members, companies & memberships",icon:rP,color:"text-rose-600",bgColor:"bg-rose-100",onClick:()=>t("/admin/import-system")},{title:"OpenLearning",description:"Manage OpenLearning integration",icon:dm,color:"text-green-600",bgColor:"bg-green-100",onClick:()=>t("/admin/openlearning")},{title:"Bulk Management",description:"Mass delete and manage members",icon:Qc,color:"text-red-600",bgColor:"bg-red-100",onClick:()=>t("/admin/bulk-management"),requireSuperAdmin:!0},{title:"Settings",description:"System settings",icon:eo,color:"text-gray-600",bgColor:"bg-gray-100",onClick:()=>t("/admin/settings")}];return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Administrative Panel"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Manage members, events and system settings"})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Member Statistics"}),n.jsx(hE,{})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Administrative Tools"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.filter(a=>!a.requireSuperAdmin||s).map(a=>{const o=a.icon;return n.jsx(de,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:a.onClick,children:n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:`p-3 rounded-lg ${a.bgColor}`,children:n.jsx(o,{className:`h-6 w-6 ${a.color}`})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a.title}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:a.description}),n.jsx(re,{variant:"outline",size:"sm",onClick:u=>{u.stopPropagation(),a.onClick()},children:"Access"})]})]})},a.title)})})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(re,{className:"h-16 text-left justify-start",onClick:()=>t("/admin/members"),children:[n.jsx(zr,{className:"mr-3 h-5 w-5"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"New Member"}),n.jsx("div",{className:"text-xs opacity-75",children:"Register member"})]})]}),n.jsxs(re,{variant:"outline",className:"h-16 text-left justify-start",onClick:()=>t("/admin/events"),children:[n.jsx(js,{className:"mr-3 h-5 w-5"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"New Event"}),n.jsx("div",{className:"text-xs opacity-75",children:"Create event"})]})]}),n.jsxs(re,{variant:"outline",className:"h-16 text-left justify-start",onClick:()=>t("/admin/cpds"),children:[n.jsx(um,{className:"mr-3 h-5 w-5"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Approve CPDs"}),n.jsx("div",{className:"text-xs opacity-75",children:"Review pending"})]})]}),n.jsxs(re,{variant:"outline",className:"h-16 text-left justify-start",onClick:()=>t("/admin/reports"),children:[n.jsx(ra,{className:"mr-3 h-5 w-5"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"View Reports"}),n.jsx("div",{className:"text-xs opacity-75",children:"Analytics and metrics"})]})]})]})]})]})};function xI(t,e={}){const{filename:s=`export-${new Date().toISOString().split("T")[0]}.csv`,headers:r,includeHeaders:a=!0}=e;if(!t||t.length===0){console.warn("No data to export");return}const o=r||Array.from(new Set(t.flatMap(x=>Object.keys(x)))),u=[];a&&u.push(o.map(x=>aj(x)).join(",")),t.forEach(x=>{const v=o.map(_=>{const b=x[_];return aj(bI(b))});u.push(v.join(","))});const h=u.join(`
`),f=new Blob(["\uFEFF"+h],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a"),g=URL.createObjectURL(f);m.setAttribute("href",g),m.setAttribute("download",s),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(g)}function aj(t){if(t==null)return"";const e=String(t);return e.includes(",")||e.includes('"')||e.includes(`
`)||e.includes("\r")?`"${e.replace(/"/g,'""')}"`:e}function bI(t){return t==null?"":t instanceof Date?t.toISOString():typeof t=="boolean"?t?"Yes":"No":typeof t=="object"?JSON.stringify(t):String(t)}function fE(t,e){const s=t.map(r=>({"First Name":r.first_name,"Last Name":r.last_name,Email:r.email,Phone:r.phone||"","Membership Status":r.membership_status,"Membership Type":r.membership_type,"Interest Group":r.interest_group||"",City:r.city||"",State:r.state||"",Country:r.country||"Australia",Profession:r.profession||"","Experience Years":r.experience_years||"",Qualifications:r.qualifications||"",Roles:r.member_roles?.map(a=>a.role).join(", ")||"","Member Since":r.membership_start_date?new Date(r.membership_start_date).toLocaleDateString():"",Newsletter:r.receive_newsletters?"Yes":"No","Event Notifications":r.receive_event_notifications?"Yes":"No"}));xI(s,{filename:e||`members-export-${new Date().toISOString().split("T")[0]}.csv`})}const vI=["Full Provider","Associate Provider","Corporate Affiliate","Professional Affiliate"],wI=({onMemberSelect:t,onAddMember:e,onEditMember:s})=>{const[r,a]=M.useState([]),[o,u]=M.useState(!0),[h,f]=M.useState(!1),[m,g]=M.useState({search:"",status:"",type:"",interestGroup:"",city:"",state:"",hasRoles:!1}),x=Ns(),{roles:v}=jt(),_=v.includes("AdminSuper"),[b,N]=M.useState(1),[w,E]=M.useState(0),[A]=M.useState(20),O=async()=>{try{u(!0);const k={search:m.search||void 0,status:m.status||void 0,type:m.type||void 0,page:b,pageSize:A},{data:z,count:R}=await ui.searchMembersPaginated(k);let D=z;m.interestGroup&&(D=D.filter(P=>P.interest_group===m.interestGroup)),m.city&&(D=D.filter(P=>P.city?.toLowerCase().includes(m.city.toLowerCase()))),m.state&&(D=D.filter(P=>P.state?.toLowerCase().includes(m.state.toLowerCase()))),m.hasRoles&&(D=D.filter(P=>P.member_roles&&P.member_roles.length>0)),a(D),E(R)}catch(k){console.error("Error loading members:",k),ae("error","Failed to load members")}finally{u(!1)}};M.useEffect(()=>{O()},[b,m]);const F=async()=>{try{const{data:k}=await ui.searchMembersPaginated({search:m.search||void 0,status:m.status||void 0,type:m.type||void 0,pageSize:1e4});if(k.length===0){ae("warning","No members to export");return}fE(k),ae("success",`Exported ${k.length} members to CSV`)}catch(k){console.error("Error exporting members:",k),ae("error","Failed to export members")}},C=async k=>{if(!_){ae("error","Only SuperAdmin can impersonate users");return}const z=await Qi.startImpersonation(k.id);z.success?(ae("success",`Now viewing as ${k.first_name} ${k.last_name}`),x("/dashboard"),window.location.reload()):ae("error",z.error||"Failed to start impersonation")},L=()=>{g({search:"",status:"",type:"",interestGroup:"",city:"",state:"",hasRoles:!1}),N(1)},B=Object.values(m).filter(k=>k&&k!=="").length,S=Math.ceil(w/A);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Members Management"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Manage member accounts, roles, and groups"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(re,{onClick:F,variant:"outline",className:"flex items-center gap-2",children:[n.jsx(qc,{className:"w-4 h-4"}),"Export CSV"]}),e&&n.jsxs(re,{onClick:e,children:[n.jsx(Pc,{className:"w-4 h-4 mr-2"}),"Add Member"]})]})]}),n.jsxs(de,{className:"p-4",children:[n.jsxs("div",{className:"flex gap-4 items-center",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(tl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx(Ae,{type:"text",placeholder:"Search by name, email, or phone...",value:m.search,onChange:k=>{g(z=>({...z,search:k.target.value})),N(1)},className:"pl-10"})]}),n.jsxs(re,{variant:"outline",onClick:()=>f(!h),className:`flex items-center gap-2 ${B>0?"border-blue-500":""}`,children:[n.jsx(fP,{className:"w-4 h-4"}),"Filters",B>0&&n.jsx("span",{className:"bg-blue-500 text-white text-xs rounded-full px-2 py-0.5",children:B})]})]}),h&&n.jsxs("div",{className:"mt-4 pt-4 border-t grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"status-filter",children:"Membership Status"}),n.jsxs("select",{id:"status-filter",value:m.status,onChange:k=>g(z=>({...z,status:k.target.value})),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"suspended",children:"Suspended"}),n.jsx("option",{value:"expired",children:"Expired"})]})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"type-filter",children:"Membership Type"}),n.jsxs("select",{id:"type-filter",value:m.type,onChange:k=>g(z=>({...z,type:k.target.value})),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"All Types"}),n.jsx("option",{value:"standard",children:"Standard"}),n.jsx("option",{value:"premium",children:"Premium"}),n.jsx("option",{value:"student",children:"Student"}),n.jsx("option",{value:"corporate",children:"Corporate"})]})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"group-filter",children:"Interest Group"}),n.jsxs("select",{id:"group-filter",value:m.interestGroup,onChange:k=>g(z=>({...z,interestGroup:k.target.value})),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"All Groups"}),vI.map(k=>n.jsx("option",{value:k,children:k},k))]})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"city-filter",children:"City"}),n.jsx(Ae,{id:"city-filter",type:"text",placeholder:"Filter by city...",value:m.city,onChange:k=>g(z=>({...z,city:k.target.value}))})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"state-filter",children:"State"}),n.jsx(Ae,{id:"state-filter",type:"text",placeholder:"Filter by state...",value:m.state,onChange:k=>g(z=>({...z,state:k.target.value}))})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:m.hasRoles,onChange:k=>g(z=>({...z,hasRoles:k.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsx("span",{className:"text-sm",children:"Has special roles"})]})}),n.jsx("div",{className:"md:col-span-3 flex justify-end gap-2",children:n.jsxs(re,{variant:"outline",size:"sm",onClick:L,className:"flex items-center gap-2",children:[n.jsx(fn,{className:"w-3 h-3"}),"Clear Filters"]})})]})]}),n.jsx(de,{children:o?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading members..."})]}):r.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(zr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No members found"}),n.jsx("p",{className:"text-gray-600",children:B>0?"Try adjusting your filters":"Start by adding your first member"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Membership"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Interest Group"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roles"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(k=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[k.first_name," ",k.last_name]}),k.profession&&n.jsx("div",{className:"text-sm text-gray-500",children:k.profession})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"text-sm",children:[n.jsx("div",{className:"text-gray-900",children:k.email}),k.phone&&n.jsx("div",{className:"text-gray-500",children:k.phone})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:`inline-flex text-xs font-medium px-2 py-1 rounded-full ${k.membership_status==="active"?"bg-green-100 text-green-800":k.membership_status==="inactive"?"bg-gray-100 text-gray-800":k.membership_status==="suspended"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:k.membership_status}),n.jsx("span",{className:"text-xs text-gray-500 capitalize",children:k.membership_type})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"text-sm text-gray-900",children:k.interest_group||"-"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("div",{className:"text-sm text-gray-900",children:[k.city,k.state].filter(Boolean).join(", ")||"-"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:k.member_roles?.map(z=>n.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-purple-100 text-purple-800",children:z.role},z.id))||"-"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex justify-center gap-2",children:[t&&n.jsx("button",{onClick:()=>t(k),className:"text-gray-400 hover:text-gray-600",title:"View details",children:n.jsx(Ln,{className:"w-4 h-4"})}),s&&n.jsx("button",{onClick:()=>s(k),className:"text-blue-400 hover:text-blue-600",title:"Edit member",children:n.jsx(hm,{className:"w-4 h-4"})}),_&&n.jsx("button",{onClick:()=>C(k),className:"text-purple-400 hover:text-purple-600",title:"View as this user",children:n.jsx(ho,{className:"w-4 h-4"})})]})})]},k.id))})]})}),S>1&&n.jsxs("div",{className:"px-6 py-4 border-t flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(b-1)*A+1," to"," ",Math.min(b*A,w)," of ",w," members"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(re,{variant:"outline",size:"sm",onClick:()=>N(k=>Math.max(1,k-1)),disabled:b===1,children:n.jsx(nE,{className:"w-4 h-4"})}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,S)},(k,z)=>{let R;return S<=5||b<=3?R=z+1:b>=S-2?R=S-4+z:R=b-2+z,n.jsx(re,{variant:b===R?"primary":"outline",size:"sm",onClick:()=>N(R),children:R},R)})}),n.jsx(re,{variant:"outline",size:"sm",onClick:()=>N(k=>Math.min(S,k+1)),disabled:b===S,children:n.jsx(Z8,{className:"w-4 h-4"})})]})]})]})})]})},jf=[{code:"AU",name:"Australia",flag:"",dialCode:"+61",format:"### ### ###",maxLength:9},{code:"US",name:"United States",flag:"",dialCode:"+1",format:"(###) ###-####",maxLength:10},{code:"BR",name:"Brazil",flag:"",dialCode:"+55",format:"(##) #####-####",maxLength:11},{code:"GB",name:"United Kingdom",flag:"",dialCode:"+44",format:"#### ### ###",maxLength:10},{code:"CA",name:"Canada",flag:"",dialCode:"+1",format:"(###) ###-####",maxLength:10},{code:"DE",name:"Germany",flag:"",dialCode:"+49",format:"### ########",maxLength:11},{code:"FR",name:"France",flag:"",dialCode:"+33",format:"## ## ## ## ##",maxLength:10},{code:"JP",name:"Japan",flag:"",dialCode:"+81",format:"##-####-####",maxLength:11},{code:"CN",name:"China",flag:"",dialCode:"+86",format:"### #### ####",maxLength:11}];function mE({value:t="",onChange:e,placeholder:s,disabled:r,className:a=""}){const[o,u]=M.useState(!1),h=_=>{if(!_)return{country:jf[0],number:""};const b=jf.find(w=>_.startsWith(w.dialCode))||jf[0],N=_.replace(b.dialCode,"").replace(/\s/g,"");return{country:b,number:N}},{country:f,number:m}=h(t),g=(_,b,N)=>{const E=_.replace(/\D/g,"").slice(0,N);let A="",O=0;for(let F=0;F<b.length&&O<E.length;F++)b[F]==="#"?(A+=E[O],O++):A+=b[F];return A},x=_=>{const b=g(m,_.format,_.maxLength);e(`${_.dialCode} ${b}`.trim()),u(!1)},v=_=>{const b=_.target.value,N=g(b,f.format,f.maxLength);e(`${f.dialCode} ${N}`.trim())};return n.jsxs("div",{className:`relative ${a}`,children:[n.jsxs("div",{className:"flex",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",disabled:r,className:"flex items-center gap-2 px-3 py-2 border border-r-0 border-gray-300 rounded-l-md bg-gray-50 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed min-w-[120px]",onClick:()=>u(!o),children:[n.jsx("span",{className:"text-lg",children:f.flag}),n.jsx("span",{className:"text-sm font-medium",children:f.dialCode}),n.jsx(H8,{className:"w-4 h-4"})]}),o&&n.jsx("div",{className:"absolute z-50 top-full left-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto min-w-[280px]",children:jf.map(_=>n.jsxs("button",{type:"button",className:"flex items-center gap-3 w-full px-3 py-2 text-left hover:bg-gray-100 text-sm",onClick:()=>x(_),children:[n.jsx("span",{className:"text-lg",children:_.flag}),n.jsx("span",{className:"font-medium",children:_.dialCode}),n.jsx("span",{className:"text-gray-600",children:_.name})]},_.code))})]}),n.jsx("input",{type:"tel",value:g(m,f.format,f.maxLength),onChange:v,placeholder:s||f.format.replace(/#/g,"0"),disabled:r,className:"flex-1 px-3 py-2 border border-gray-300 rounded-r-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"})]}),o&&n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)})]})}const _I=({memberEmail:t,onClose:e,onSuccess:s})=>{const[r,a]=M.useState(""),[o,u]=M.useState(!1),[h,f]=M.useState(""),[m,g]=M.useState(""),x=()=>{const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let N="";for(let w=0;w<12;w++)N+=b.charAt(Math.floor(Math.random()*b.length));a(N)},v=async()=>{if(!r){f("Please generate a temporary password");return}u(!0),f("");try{const{error:b}=await V.auth.admin.createUser({email:t,password:r,email_confirm:!0});if(b)f(`Unable to create automatically. Please create manually in Supabase Studio:
        
1. Go to Authentication > Users
2. Click "Add user" > "Create new user"  
3. Email: ${t}
4. Password: ${r}
5. Check "Auto Confirm User"`);else{f(` User created successfully!
        
Temporary credentials:
Email: ${t}
Password: ${r}

 User must change password on first login.`);const N=`${window.location.origin}/login?email=${encodeURIComponent(t)}`;g(N)}}catch(b){f(`Error: ${b instanceof Error?b.message:"Unknown error"}`)}finally{u(!1)}},_=b=>{cm.copyToClipboard(b,"Copied to clipboard!")};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs(de,{className:"w-full max-w-md p-6 m-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-bold",children:"Invite User"}),n.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-xl",children:""})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(xe,{children:"Member Email"}),n.jsx(Ae,{value:t,disabled:!0,className:"bg-gray-100"})]}),n.jsxs("div",{children:[n.jsx(xe,{children:"Temporary Password"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ae,{type:"text",value:r,onChange:b=>a(b.target.value),placeholder:"Click 'Generate' to create a password"}),n.jsx(re,{type:"button",onClick:x,variant:"outline",children:"Generate"})]})]}),h&&n.jsx("div",{className:`p-3 rounded-md text-sm whitespace-pre-line ${h.includes("")?"bg-green-50 text-green-800":h.includes("Unable to create")?"bg-yellow-50 text-yellow-800":"bg-red-50 text-red-800"}`,children:h}),m&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(xe,{children:"Login Link"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ae,{value:m,readOnly:!0,className:"text-xs"}),n.jsx(re,{type:"button",onClick:()=>_(m),variant:"outline",size:"sm",children:"Copy"})]})]}),r&&n.jsx("div",{className:"space-y-2",children:n.jsx(re,{type:"button",onClick:()=>_(`Email: ${t}
Password: ${r}`),variant:"outline",className:"w-full",children:"Copy Credentials"})}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(re,{onClick:e,variant:"outline",className:"flex-1",children:"Close"}),n.jsx(re,{onClick:v,disabled:o||!r,className:"flex-1",children:o?"Creating...":"Create Account"})]})]})]})})},jI=({member:t,onSave:e,onCancel:s})=>{const r=!!t,[a,o]=M.useState({first_name:t?.first_name||"",last_name:t?.last_name||"",email:t?.email||"",phone:t?.phone||"",date_of_birth:t?.date_of_birth||"",address_line1:t?.address_line1||"",address_line2:t?.address_line2||"",city:t?.city||"",state:t?.state||"",postal_code:t?.postal_code||"",country:t?.country||"Australia",membership_status:t?.membership_status||"active",membership_type:t?.membership_type||"standard",membership_start_date:t?.membership_start_date||new Date().toISOString().split("T")[0],membership_end_date:t?.membership_end_date||"",profession:t?.profession||"",experience_years:t?.experience_years?.toString()||"",qualifications:t?.qualifications||"",receive_newsletters:t?.receive_newsletters??!0,receive_event_notifications:t?.receive_event_notifications??!0,roles:t?.member_roles?.map(E=>E.role)||["member"]}),[u,h]=M.useState(!1),[f,m]=M.useState(null),[g,x]=M.useState(!1),[v,_]=M.useState(""),b=async E=>{if(!(!E||E.length<4))try{if(/^\d{4}$/.test(E)){const F={1:"NSW",2:"NSW",3:"VIC",4:"QLD",5:"SA",6:"WA",7:"TAS",0:"NT"}[E[0]]||"NSW";o(C=>({...C,state:F,country:"Australia"}));return}if(/^\d{5}$/.test(E)){o(O=>({...O,country:"United States"}));return}if(/^[A-Z]{1,2}\d{1,2}[A-Z]?\s?\d[A-Z]{2}$/i.test(E)){o(O=>({...O,country:"United Kingdom"}));return}const A=E.replace(/\D/g,"");if(/^\d{8}$/.test(A)){o(O=>({...O,country:"Brazil"}));return}o(O=>({...O,country:"Australia"}))}catch(A){console.error("Error fetching address data:",A)}},N=async E=>{E.preventDefault(),h(!0),m(null);try{const A={first_name:a.first_name,last_name:a.last_name,email:a.email,phone:a.phone||null,date_of_birth:a.date_of_birth||null,address_line1:a.address_line1||null,address_line2:a.address_line2||null,city:a.city||null,state:a.state||null,postal_code:a.postal_code||null,country:a.country||null,membership_status:a.membership_status,membership_type:a.membership_type,membership_start_date:a.membership_start_date||null,membership_end_date:a.membership_end_date||null,profession:a.profession||null,experience_years:a.experience_years?parseInt(a.experience_years):null,qualifications:a.qualifications||null,receive_newsletters:a.receive_newsletters,receive_event_notifications:a.receive_event_notifications};let O;if(r&&t?O=await ui.updateMember(t.id,A):O=await ui.createMember(A),r&&t){const C=t.member_roles.map(S=>S.role),L=C.filter(S=>!a.roles.includes(S)),B=a.roles.filter(S=>!C.includes(S));for(const S of L)await ui.removeMemberRole(t.id,S);for(const S of B)await ui.addMemberRole(t.id,S)}else for(const C of a.roles)await ui.addMemberRole(O.id,C);const F=await ui.getMemberById(O.id);F&&(e?.(F),r||(_(a.email),x(!0)))}catch(A){m(A instanceof Error?A.message:"Error saving member"),console.error("Erro ao salvar membro:",A)}finally{h(!1)}},w=(E,A)=>{o(A?O=>({...O,roles:[...O.roles,E]}):O=>({...O,roles:O.roles.filter(F=>F!==E)}))};return n.jsxs(de,{className:"p-6",children:[n.jsx("div",{className:"flex justify-between items-center mb-6",children:n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r?"Edit Member":"New Member"})}),f&&n.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:n.jsx("p",{className:"text-red-800",children:f})}),n.jsxs("form",{onSubmit:N,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"first_name",children:"First Name *"}),n.jsx(Ae,{id:"first_name",required:!0,value:a.first_name,onChange:E=>o(A=>({...A,first_name:E.target.value}))})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"last_name",children:"Last Name *"}),n.jsx(Ae,{id:"last_name",required:!0,value:a.last_name,onChange:E=>o(A=>({...A,last_name:E.target.value}))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"email",children:"Email *"}),n.jsx(Ae,{id:"email",type:"email",required:!0,value:a.email,onChange:E=>o(A=>({...A,email:E.target.value}))})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"phone",children:"Phone"}),n.jsx(mE,{value:a.phone,onChange:E=>o(A=>({...A,phone:E})),placeholder:"Enter phone number"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"date_of_birth",children:"Date of Birth"}),n.jsx(Ae,{id:"date_of_birth",type:"date",value:a.date_of_birth,onChange:E=>o(A=>({...A,date_of_birth:E.target.value}))})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"profession",children:"Profession"}),n.jsx(Ae,{id:"profession",value:a.profession,onChange:E=>o(A=>({...A,profession:E.target.value}))})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Address"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(xe,{htmlFor:"address_line1",children:"Address Line 1"}),n.jsx(Ae,{id:"address_line1",value:a.address_line1,onChange:E=>o(A=>({...A,address_line1:E.target.value})),placeholder:"123 Main Street"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(xe,{htmlFor:"address_line2",children:"Address Line 2"}),n.jsx(Ae,{id:"address_line2",value:a.address_line2,onChange:E=>o(A=>({...A,address_line2:E.target.value})),placeholder:"Apartment 4B"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"city",children:"City"}),n.jsx(Ae,{id:"city",value:a.city,onChange:E=>o(A=>({...A,city:E.target.value})),placeholder:"Sydney"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"state",children:"State"}),n.jsx(Ae,{id:"state",value:a.state,onChange:E=>o(A=>({...A,state:E.target.value})),placeholder:"NSW"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"postal_code",children:"Postal Code *"}),n.jsx(Ae,{id:"postal_code",value:a.postal_code,onChange:E=>{const A=E.target.value;o(O=>({...O,postal_code:A})),A&&A.length>=4&&b(A)},placeholder:"2000"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"country",children:"Country"}),n.jsx(Ae,{id:"country",value:a.country,onChange:E=>o(A=>({...A,country:E.target.value})),placeholder:"Australia"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Membership"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"membership_status",children:"Status"}),n.jsxs("select",{id:"membership_status",value:a.membership_status,onChange:E=>o(A=>({...A,membership_status:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"suspended",children:"Suspended"}),n.jsx("option",{value:"expired",children:"Expired"})]})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"membership_type",children:"Type"}),n.jsxs("select",{id:"membership_type",value:a.membership_type,onChange:E=>o(A=>({...A,membership_type:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"standard",children:"Standard"}),n.jsx("option",{value:"premium",children:"Premium"}),n.jsx("option",{value:"student",children:"Student"}),n.jsx("option",{value:"corporate",children:"Corporate"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"membership_start_date",children:"Start Date"}),n.jsx(Ae,{id:"membership_start_date",type:"date",value:a.membership_start_date,onChange:E=>o(A=>({...A,membership_start_date:E.target.value}))})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"membership_end_date",children:"End Date"}),n.jsx(Ae,{id:"membership_end_date",type:"date",value:a.membership_end_date,onChange:E=>o(A=>({...A,membership_end_date:E.target.value}))})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Roles"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:["member","admin","super_admin","moderator","instructor"].map(E=>n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:a.roles.includes(E),onChange:A=>w(E,A.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-700 capitalize",children:E.replace("_"," ")})]},E))})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Settings"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:a.receive_newsletters,onChange:E=>o(A=>({...A,receive_newsletters:E.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Receive newsletters"})]}),n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:a.receive_event_notifications,onChange:E=>o(A=>({...A,receive_event_notifications:E.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Receive event notifications"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Professional Information"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"experience_years",children:"Years of Experience"}),n.jsx(Ae,{id:"experience_years",type:"number",min:"0",value:a.experience_years,onChange:E=>o(A=>({...A,experience_years:E.target.value}))})]})}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"qualifications",children:"Qualifications"}),n.jsx("textarea",{id:"qualifications",rows:3,value:a.qualifications,onChange:E=>o(A=>({...A,qualifications:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the member's qualifications..."})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6",children:[n.jsx(re,{type:"button",variant:"outline",onClick:s,disabled:u,children:"Cancel"}),n.jsxs(re,{type:"submit",disabled:u,children:[u?"Saving...":r?"Update":"Create"," Member"]})]})]}),g&&n.jsx(_I,{memberEmail:v,onClose:()=>x(!1),onSuccess:()=>x(!1)})]})},NI=()=>{const[t,e]=M.useState("list"),[s,r]=M.useState(null),a=()=>{r(null),e("form")},o=m=>{r(m),e("form")},u=m=>{r(m),e("view")},h=m=>{r(m),e("list")},f=()=>{r(null),e("list")};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t==="list"&&n.jsxs("div",{className:"space-y-8",children:[n.jsx(hE,{}),n.jsx(wI,{onAddMember:a,onEditMember:o,onMemberSelect:u})]}),t==="form"&&n.jsx(jI,{member:s,onSave:h,onCancel:f}),t==="view"&&s&&n.jsx(SI,{member:s,onEdit:()=>o(s),onBack:f})]})},SI=({member:t,onEdit:e,onBack:s})=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[t.first_name," ",t.last_name]}),n.jsxs("div",{className:"space-x-4",children:[n.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Back"}),n.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Edit"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personal Information"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Email:"}),n.jsx("p",{className:"text-sm text-gray-900",children:t.email})]}),t.phone&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Phone:"}),n.jsx("p",{className:"text-sm text-gray-900",children:t.phone})]}),t.date_of_birth&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Date of Birth:"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.date_of_birth).toLocaleDateString("en-AU")})]}),t.profession&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Profession:"}),n.jsx("p",{className:"text-sm text-gray-900",children:t.profession})]})]})]}),n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Membership Status"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Status:"}),n.jsx("p",{className:"text-sm text-gray-900 capitalize",children:t.membership_status})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Type:"}),n.jsx("p",{className:"text-sm text-gray-900 capitalize",children:t.membership_type})]}),t.membership_start_date&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Start Date:"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.membership_start_date).toLocaleDateString("en-AU")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Roles:"}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:t.member_roles.map(r=>n.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-purple-100 text-purple-800",children:r.role},r.id))})]})]})]}),(t.address_line1||t.city||t.state)&&n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address"}),n.jsxs("div",{className:"space-y-2",children:[t.address_line1&&n.jsx("p",{className:"text-sm text-gray-900",children:t.address_line1}),t.address_line2&&n.jsx("p",{className:"text-sm text-gray-900",children:t.address_line2}),n.jsx("p",{className:"text-sm text-gray-900",children:[t.city,t.state,t.postal_code].filter(Boolean).join(", ")}),t.country&&n.jsx("p",{className:"text-sm text-gray-900",children:t.country})]})]}),(t.experience_years||t.qualifications)&&n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Professional Information"}),n.jsxs("div",{className:"space-y-3",children:[t.experience_years&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Years of Experience:"}),n.jsx("p",{className:"text-sm text-gray-900",children:t.experience_years})]}),t.qualifications&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Qualifications:"}),n.jsx("p",{className:"text-sm text-gray-900",children:t.qualifications})]})]})]})]}),n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"System Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Created on:"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.created_at).toLocaleString("en-AU")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Last updated:"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.updated_at).toLocaleString("en-AU")})]})]})]})]});function EI(){const[t,e]=M.useState({total:0,byStatus:{active:0,inactive:0,suspended:0,expired:0},byType:{standard:0,premium:0,student:0,corporate:0},byGroup:{}}),[s,r]=M.useState([]),[a,o]=M.useState(!0),[u,h]=M.useState({status:"",type:"",group:""});M.useEffect(()=>{f(),m()},[]);const f=async()=>{try{const{count:b}=await V.from("members").select("*",{count:"exact",head:!0}),N=["active","inactive","suspended","expired"],w={active:0,inactive:0,suspended:0,expired:0};for(const C of N){const{count:L}=await V.from("members").select("*",{count:"exact",head:!0}).eq("membership_status",C);w[C]=L||0}const E=["standard","premium","student","corporate"],A={standard:0,premium:0,student:0,corporate:0};for(const C of E){const{count:L}=await V.from("members").select("*",{count:"exact",head:!0}).eq("membership_type",C);A[C]=L||0}const{data:O}=await V.from("members").select("interest_group").not("interest_group","is",null),F={};O?.forEach(C=>{const L=C.interest_group||"Unknown";F[L]=(F[L]||0)+1}),e({total:b||0,byStatus:w,byType:A,byGroup:F})}catch(b){console.error("Error loading stats:",b)}},m=async()=>{try{o(!0);const{data:b,error:N}=await V.from("members").select("*").order("created_at",{ascending:!1}).limit(10);if(N)throw N;r(b||[])}catch(b){console.error("Error loading members:",b),ae("error","Failed to load members")}finally{o(!1)}},g=async()=>{if(s.length===0){ae("warning","No members selected");return}try{const b={};if(u.status&&(b.membership_status=u.status),u.type&&(b.membership_type=u.type),u.group&&(b.interest_group=u.group),Object.keys(b).length===0){ae("warning","No changes selected");return}for(const N of s)await V.from("members").update(b).eq("id",N.id);ae("success",`Updated ${s.length} members`),m(),f(),h({status:"",type:"",group:""})}catch(b){console.error("Error updating members:",b),ae("error","Failed to update members")}},x=async()=>{try{const{data:b}=await V.from("members").select("*");b&&b.length>0&&(fE(b,"all-members-export.csv"),ae("success",`Exported ${b.length} members`))}catch(b){console.error("Error exporting:",b),ae("error","Failed to export members")}},v=b=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800",expired:"bg-yellow-100 text-yellow-800"})[b],_=b=>{switch(b){case"premium":return n.jsx(un,{className:"w-4 h-4"});case"corporate":return n.jsx(Ed,{className:"w-4 h-4"});case"student":return n.jsx(dm,{className:"w-4 h-4"});default:return n.jsx(zr,{className:"w-4 h-4"})}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Membership Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage membership types, statuses, and interest groups"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Members"}),n.jsx("p",{className:"text-2xl font-bold",children:t.total})]}),n.jsx(zr,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Active Members"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.byStatus.active})]}),n.jsx(ho,{className:"w-8 h-8 text-green-500"})]})}),n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Premium Members"}),n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:t.byType.premium})]}),n.jsx(un,{className:"w-8 h-8 text-purple-500"})]})}),n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Interest Groups"}),n.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:Object.keys(t.byGroup).length})]}),n.jsx(rI,{className:"w-8 h-8 text-indigo-500"})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[n.jsxs(de,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Membership Status Distribution"}),n.jsx("div",{className:"space-y-3",children:Object.entries(t.byStatus).map(([b,N])=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v(b)}`,children:b})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-semibold",children:N}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.total>0?(N/t.total*100).toFixed(1):0,"%)"]})]})]},b))})]}),n.jsxs(de,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Membership Type Distribution"}),n.jsx("div",{className:"space-y-3",children:Object.entries(t.byType).map(([b,N])=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[_(b),n.jsx("span",{className:"capitalize",children:b})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-semibold",children:N}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.total>0?(N/t.total*100).toFixed(1):0,"%)"]})]})]},b))})]})]}),n.jsxs(de,{className:"p-6 mb-8",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Interest Groups Distribution"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(t.byGroup).map(([b,N])=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:b}),n.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:N}),n.jsx("p",{className:"text-sm text-gray-500",children:"members"})]},b))})]}),n.jsxs(de,{className:"p-6 mb-8",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Bulk Membership Update"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"bulk-status",children:"Update Status"}),n.jsxs("select",{id:"bulk-status",value:u.status,onChange:b=>h({...u,status:b.target.value}),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"No change"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"suspended",children:"Suspended"}),n.jsx("option",{value:"expired",children:"Expired"})]})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"bulk-type",children:"Update Type"}),n.jsxs("select",{id:"bulk-type",value:u.type,onChange:b=>h({...u,type:b.target.value}),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"No change"}),n.jsx("option",{value:"standard",children:"Standard"}),n.jsx("option",{value:"premium",children:"Premium"}),n.jsx("option",{value:"student",children:"Student"}),n.jsx("option",{value:"corporate",children:"Corporate"})]})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"bulk-group",children:"Update Interest Group"}),n.jsxs("select",{id:"bulk-group",value:u.group,onChange:b=>h({...u,group:b.target.value}),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"No change"}),n.jsx("option",{value:"Full Provider",children:"Full Provider"}),n.jsx("option",{value:"Associate Provider",children:"Associate Provider"}),n.jsx("option",{value:"Corporate Affiliate",children:"Corporate Affiliate"}),n.jsx("option",{value:"Professional Affiliate",children:"Professional Affiliate"})]})]}),n.jsxs("div",{className:"flex items-end gap-2",children:[n.jsxs(re,{onClick:g,className:"flex items-center gap-2",children:[n.jsx(Ad,{className:"w-4 h-4"}),"Update Selected"]}),n.jsxs(re,{onClick:x,variant:"outline",className:"flex items-center gap-2",children:[n.jsx(qc,{className:"w-4 h-4"}),"Export All"]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Recent Members (Select for bulk update)"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:n.jsx("input",{type:"checkbox",onChange:b=>{b.target.checked?r(s):r([])}})}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Member"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Interest Group"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Member Since"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(b=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"checkbox",checked:!0,onChange:()=>{}})}),n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-gray-900",children:[b.first_name," ",b.last_name]}),n.jsx("div",{className:"text-sm text-gray-500",children:b.email})]})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v(b.membership_status)}`,children:b.membership_status})}),n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[_(b.membership_type),n.jsx("span",{className:"text-sm capitalize",children:b.membership_type})]})}),n.jsx("td",{className:"px-4 py-2 text-sm",children:b.interest_group||"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:b.membership_start_date?new Date(b.membership_start_date).toLocaleDateString():"-"})]},b.id))})]})})]})]}),n.jsxs(de,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(re,{onClick:()=>window.location.href="/admin/members",variant:"outline",children:"View All Members"}),n.jsx(re,{onClick:()=>window.location.href="/admin/user-import",variant:"outline",children:"Import Members"}),n.jsxs(re,{onClick:f,variant:"outline",className:"flex items-center justify-center gap-2",children:[n.jsx(Ad,{className:"w-4 h-4"}),"Refresh Stats"]})]})]})]})}var Bf={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var AI=Bf.exports,lj;function CI(){return lj||(lj=1,function(t,e){((s,r)=>{t.exports=r()})(AI,function s(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},a,o=!r.document&&!!r.postMessage,u=r.IS_PAPA_WORKER||!1,h={},f=0,m={};function g(S){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(k){var z=C(k);z.chunkSize=parseInt(z.chunkSize),k.step||k.chunk||(z.chunkSize=null),this._handle=new N(z),(this._handle.streamer=this)._config=z}).call(this,S),this.parseChunk=function(k,z){var R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<R){let P=this._config.newline;P||(D=this._config.quoteChar||'"',P=this._handle.guessLineEndings(k,D)),k=[...k.split(P).slice(R)].join(P)}this.isFirstChunk&&B(this._config.beforeFirstChunk)&&(D=this._config.beforeFirstChunk(k))!==void 0&&(k=D),this.isFirstChunk=!1,this._halted=!1;var R=this._partialLine+k,D=(this._partialLine="",this._handle.parse(R,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(k=D.meta.cursor,R=(this._finished||(this._partialLine=R.substring(k-this._baseIndex),this._baseIndex=k),D&&D.data&&(this._rowCount+=D.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),u)r.postMessage({results:D,workerId:m.WORKER_ID,finished:R});else if(B(this._config.chunk)&&!z){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=D=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!R||!B(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),R||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(k){B(this._config.error)?this._config.error(k):u&&this._config.error&&r.postMessage({workerId:m.WORKER_ID,error:k,finished:!1})}}function x(S){var k;(S=S||{}).chunkSize||(S.chunkSize=m.RemoteChunkSize),g.call(this,S),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(z){this._input=z,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(k=new XMLHttpRequest,this._config.withCredentials&&(k.withCredentials=this._config.withCredentials),o||(k.onload=L(this._chunkLoaded,this),k.onerror=L(this._chunkError,this)),k.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var z,R=this._config.downloadRequestHeaders;for(z in R)k.setRequestHeader(z,R[z])}var D;this._config.chunkSize&&(D=this._start+this._config.chunkSize-1,k.setRequestHeader("Range","bytes="+this._start+"-"+D));try{k.send(this._config.downloadRequestBody)}catch(P){this._chunkError(P.message)}o&&k.status===0&&this._chunkError()}},this._chunkLoaded=function(){k.readyState===4&&(k.status<200||400<=k.status?this._chunkError():(this._start+=this._config.chunkSize||k.responseText.length,this._finished=!this._config.chunkSize||this._start>=(z=>(z=z.getResponseHeader("Content-Range"))!==null?parseInt(z.substring(z.lastIndexOf("/")+1)):-1)(k),this.parseChunk(k.responseText)))},this._chunkError=function(z){z=k.statusText||z,this._sendError(new Error(z))}}function v(S){(S=S||{}).chunkSize||(S.chunkSize=m.LocalChunkSize),g.call(this,S);var k,z,R=typeof FileReader<"u";this.stream=function(D){this._input=D,z=D.slice||D.webkitSlice||D.mozSlice,R?((k=new FileReader).onload=L(this._chunkLoaded,this),k.onerror=L(this._chunkError,this)):k=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var D=this._input,P=(this._config.chunkSize&&(P=Math.min(this._start+this._config.chunkSize,this._input.size),D=z.call(D,this._start,P)),k.readAsText(D,this._config.encoding));R||this._chunkLoaded({target:{result:P}})},this._chunkLoaded=function(D){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(D.target.result)},this._chunkError=function(){this._sendError(k.error)}}function _(S){var k;g.call(this,S=S||{}),this.stream=function(z){return k=z,this._nextChunk()},this._nextChunk=function(){var z,R;if(!this._finished)return z=this._config.chunkSize,k=z?(R=k.substring(0,z),k.substring(z)):(R=k,""),this._finished=!k,this.parseChunk(R)}}function b(S){g.call(this,S=S||{});var k=[],z=!0,R=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(D){this._input=D,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&k.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),k.length?this.parseChunk(k.shift()):z=!0},this._streamData=L(function(D){try{k.push(typeof D=="string"?D:D.toString(this._config.encoding)),z&&(z=!1,this._checkIsFinished(),this.parseChunk(k.shift()))}catch(P){this._streamError(P)}},this),this._streamError=L(function(D){this._streamCleanUp(),this._sendError(D)},this),this._streamEnd=L(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=L(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function N(S){var k,z,R,D,P=Math.pow(2,53),H=-P,J=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Z=this,Q=0,ue=0,U=!1,X=!1,le=[],ee={data:[],errors:[],meta:{}};function ge(Ne){return S.skipEmptyLines==="greedy"?Ne.join("").trim()==="":Ne.length===1&&Ne[0].length===0}function we(){if(ee&&R&&(Me("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+m.DefaultDelimiter+"'"),R=!1),S.skipEmptyLines&&(ee.data=ee.data.filter(function(qe){return!ge(qe)})),Ce()){let qe=function(Ze,Ke){B(S.transformHeader)&&(Ze=S.transformHeader(Ze,Ke)),le.push(Ze)};var Re=qe;if(ee)if(Array.isArray(ee.data[0])){for(var Ne=0;Ce()&&Ne<ee.data.length;Ne++)ee.data[Ne].forEach(qe);ee.data.splice(0,1)}else ee.data.forEach(qe)}function Oe(qe,Ze){for(var Ke=S.header?{}:[],Je=0;Je<qe.length;Je++){var rt=Je,bt=qe[Je],bt=((ut,vt)=>(G=>(S.dynamicTypingFunction&&S.dynamicTyping[G]===void 0&&(S.dynamicTyping[G]=S.dynamicTypingFunction(G)),(S.dynamicTyping[G]||S.dynamicTyping)===!0))(ut)?vt==="true"||vt==="TRUE"||vt!=="false"&&vt!=="FALSE"&&((G=>{if(J.test(G)&&(G=parseFloat(G),H<G&&G<P))return 1})(vt)?parseFloat(vt):q.test(vt)?new Date(vt):vt===""?null:vt):vt)(rt=S.header?Je>=le.length?"__parsed_extra":le[Je]:rt,bt=S.transform?S.transform(bt,rt):bt);rt==="__parsed_extra"?(Ke[rt]=Ke[rt]||[],Ke[rt].push(bt)):Ke[rt]=bt}return S.header&&(Je>le.length?Me("FieldMismatch","TooManyFields","Too many fields: expected "+le.length+" fields but parsed "+Je,ue+Ze):Je<le.length&&Me("FieldMismatch","TooFewFields","Too few fields: expected "+le.length+" fields but parsed "+Je,ue+Ze)),Ke}var De;ee&&(S.header||S.dynamicTyping||S.transform)&&(De=1,!ee.data.length||Array.isArray(ee.data[0])?(ee.data=ee.data.map(Oe),De=ee.data.length):ee.data=Oe(ee.data,0),S.header&&ee.meta&&(ee.meta.fields=le),ue+=De)}function Ce(){return S.header&&le.length===0}function Me(Ne,Oe,De,Re){Ne={type:Ne,code:Oe,message:De},Re!==void 0&&(Ne.row=Re),ee.errors.push(Ne)}B(S.step)&&(D=S.step,S.step=function(Ne){ee=Ne,Ce()?we():(we(),ee.data.length!==0&&(Q+=Ne.data.length,S.preview&&Q>S.preview?z.abort():(ee.data=ee.data[0],D(ee,Z))))}),this.parse=function(Ne,Oe,De){var Re=S.quoteChar||'"',Re=(S.newline||(S.newline=this.guessLineEndings(Ne,Re)),R=!1,S.delimiter?B(S.delimiter)&&(S.delimiter=S.delimiter(Ne),ee.meta.delimiter=S.delimiter):((Re=((qe,Ze,Ke,Je,rt)=>{var bt,ut,vt,G;rt=rt||[",","	","|",";",m.RECORD_SEP,m.UNIT_SEP];for(var se=0;se<rt.length;se++){for(var he,ke=rt[se],Se=0,Ee=0,Te=0,Pe=(vt=void 0,new E({comments:Je,delimiter:ke,newline:Ze,preview:10}).parse(qe)),We=0;We<Pe.data.length;We++)Ke&&ge(Pe.data[We])?Te++:(he=Pe.data[We].length,Ee+=he,vt===void 0?vt=he:0<he&&(Se+=Math.abs(he-vt),vt=he));0<Pe.data.length&&(Ee/=Pe.data.length-Te),(ut===void 0||Se<=ut)&&(G===void 0||G<Ee)&&1.99<Ee&&(ut=Se,bt=ke,G=Ee)}return{successful:!!(S.delimiter=bt),bestDelimiter:bt}})(Ne,S.newline,S.skipEmptyLines,S.comments,S.delimitersToGuess)).successful?S.delimiter=Re.bestDelimiter:(R=!0,S.delimiter=m.DefaultDelimiter),ee.meta.delimiter=S.delimiter),C(S));return S.preview&&S.header&&Re.preview++,k=Ne,z=new E(Re),ee=z.parse(k,Oe,De),we(),U?{meta:{paused:!0}}:ee||{meta:{paused:!1}}},this.paused=function(){return U},this.pause=function(){U=!0,z.abort(),k=B(S.chunk)?"":k.substring(z.getCharIndex())},this.resume=function(){Z.streamer._halted?(U=!1,Z.streamer.parseChunk(k,!0)):setTimeout(Z.resume,3)},this.aborted=function(){return X},this.abort=function(){X=!0,z.abort(),ee.meta.aborted=!0,B(S.complete)&&S.complete(ee),k=""},this.guessLineEndings=function(qe,Re){qe=qe.substring(0,1048576);var Re=new RegExp(w(Re)+"([^]*?)"+w(Re),"gm"),De=(qe=qe.replace(Re,"")).split("\r"),Re=qe.split(`
`),qe=1<Re.length&&Re[0].length<De[0].length;if(De.length===1||qe)return`
`;for(var Ze=0,Ke=0;Ke<De.length;Ke++)De[Ke][0]===`
`&&Ze++;return Ze>=De.length/2?`\r
`:"\r"}}function w(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(S){var k=(S=S||{}).delimiter,z=S.newline,R=S.comments,D=S.step,P=S.preview,H=S.fastMode,J=null,q=!1,Z=S.quoteChar==null?'"':S.quoteChar,Q=Z;if(S.escapeChar!==void 0&&(Q=S.escapeChar),(typeof k!="string"||-1<m.BAD_DELIMITERS.indexOf(k))&&(k=","),R===k)throw new Error("Comment character same as delimiter");R===!0?R="#":(typeof R!="string"||-1<m.BAD_DELIMITERS.indexOf(R))&&(R=!1),z!==`
`&&z!=="\r"&&z!==`\r
`&&(z=`
`);var ue=0,U=!1;this.parse=function(X,le,ee){if(typeof X!="string")throw new Error("Input must be a string");var ge=X.length,we=k.length,Ce=z.length,Me=R.length,Ne=B(D),Oe=[],De=[],Re=[],qe=ue=0;if(!X)return Se();if(H||H!==!1&&X.indexOf(Z)===-1){for(var Ze=X.split(z),Ke=0;Ke<Ze.length;Ke++){if(Re=Ze[Ke],ue+=Re.length,Ke!==Ze.length-1)ue+=z.length;else if(ee)return Se();if(!R||Re.substring(0,Me)!==R){if(Ne){if(Oe=[],G(Re.split(k)),Ee(),U)return Se()}else G(Re.split(k));if(P&&P<=Ke)return Oe=Oe.slice(0,P),Se(!0)}}return Se()}for(var Je=X.indexOf(k,ue),rt=X.indexOf(z,ue),bt=new RegExp(w(Q)+w(Z),"g"),ut=X.indexOf(Z,ue);;)if(X[ue]===Z)for(ut=ue,ue++;;){if((ut=X.indexOf(Z,ut+1))===-1)return ee||De.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Oe.length,index:ue}),he();if(ut===ge-1)return he(X.substring(ue,ut).replace(bt,Z));if(Z===Q&&X[ut+1]===Q)ut++;else if(Z===Q||ut===0||X[ut-1]!==Q){Je!==-1&&Je<ut+1&&(Je=X.indexOf(k,ut+1));var vt=se((rt=rt!==-1&&rt<ut+1?X.indexOf(z,ut+1):rt)===-1?Je:Math.min(Je,rt));if(X.substr(ut+1+vt,we)===k){Re.push(X.substring(ue,ut).replace(bt,Z)),X[ue=ut+1+vt+we]!==Z&&(ut=X.indexOf(Z,ue)),Je=X.indexOf(k,ue),rt=X.indexOf(z,ue);break}if(vt=se(rt),X.substring(ut+1+vt,ut+1+vt+Ce)===z){if(Re.push(X.substring(ue,ut).replace(bt,Z)),ke(ut+1+vt+Ce),Je=X.indexOf(k,ue),ut=X.indexOf(Z,ue),Ne&&(Ee(),U))return Se();if(P&&Oe.length>=P)return Se(!0);break}De.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Oe.length,index:ue}),ut++}}else if(R&&Re.length===0&&X.substring(ue,ue+Me)===R){if(rt===-1)return Se();ue=rt+Ce,rt=X.indexOf(z,ue),Je=X.indexOf(k,ue)}else if(Je!==-1&&(Je<rt||rt===-1))Re.push(X.substring(ue,Je)),ue=Je+we,Je=X.indexOf(k,ue);else{if(rt===-1)break;if(Re.push(X.substring(ue,rt)),ke(rt+Ce),Ne&&(Ee(),U))return Se();if(P&&Oe.length>=P)return Se(!0)}return he();function G(Te){Oe.push(Te),qe=ue}function se(Te){var Pe=0;return Pe=Te!==-1&&(Te=X.substring(ut+1,Te))&&Te.trim()===""?Te.length:Pe}function he(Te){return ee||(Te===void 0&&(Te=X.substring(ue)),Re.push(Te),ue=ge,G(Re),Ne&&Ee()),Se()}function ke(Te){ue=Te,G(Re),Re=[],rt=X.indexOf(z,ue)}function Se(Te){if(S.header&&!le&&Oe.length&&!q){var Pe=Oe[0],We=Object.create(null),pt=new Set(Pe);let es=!1;for(let ts=0;ts<Pe.length;ts++){let Ss=Pe[ts];if(We[Ss=B(S.transformHeader)?S.transformHeader(Ss,ts):Ss]){let Ms,Gs=We[Ss];for(;Ms=Ss+"_"+Gs,Gs++,pt.has(Ms););pt.add(Ms),Pe[ts]=Ms,We[Ss]++,es=!0,(J=J===null?{}:J)[Ms]=Ss}else We[Ss]=1,Pe[ts]=Ss;pt.add(Ss)}es&&console.warn("Duplicate headers found and renamed."),q=!0}return{data:Oe,errors:De,meta:{delimiter:k,linebreak:z,aborted:U,truncated:!!Te,cursor:qe+(le||0),renamedHeaders:J}}}function Ee(){D(Se()),Oe=[],De=[]}},this.abort=function(){U=!0},this.getCharIndex=function(){return ue}}function A(S){var k=S.data,z=h[k.workerId],R=!1;if(k.error)z.userError(k.error,k.file);else if(k.results&&k.results.data){var D={abort:function(){R=!0,O(k.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:F,resume:F};if(B(z.userStep)){for(var P=0;P<k.results.data.length&&(z.userStep({data:k.results.data[P],errors:k.results.errors,meta:k.results.meta},D),!R);P++);delete k.results}else B(z.userChunk)&&(z.userChunk(k.results,D,k.file),delete k.results)}k.finished&&!R&&O(k.workerId,k.results)}function O(S,k){var z=h[S];B(z.userComplete)&&z.userComplete(k),z.terminate(),delete h[S]}function F(){throw new Error("Not implemented.")}function C(S){if(typeof S!="object"||S===null)return S;var k,z=Array.isArray(S)?[]:{};for(k in S)z[k]=C(S[k]);return z}function L(S,k){return function(){S.apply(k,arguments)}}function B(S){return typeof S=="function"}return m.parse=function(S,k){var z=(k=k||{}).dynamicTyping||!1;if(B(z)&&(k.dynamicTypingFunction=z,z={}),k.dynamicTyping=z,k.transform=!!B(k.transform)&&k.transform,!k.worker||!m.WORKERS_SUPPORTED)return z=null,m.NODE_STREAM_INPUT,typeof S=="string"?(S=(R=>R.charCodeAt(0)!==65279?R:R.slice(1))(S),z=new(k.download?x:_)(k)):S.readable===!0&&B(S.read)&&B(S.on)?z=new b(k):(r.File&&S instanceof File||S instanceof Object)&&(z=new v(k)),z.stream(S);(z=(()=>{var R;return!!m.WORKERS_SUPPORTED&&(R=(()=>{var D=r.URL||r.webkitURL||null,P=s.toString();return m.BLOB_URL||(m.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",P,")();"],{type:"text/javascript"})))})(),(R=new r.Worker(R)).onmessage=A,R.id=f++,h[R.id]=R)})()).userStep=k.step,z.userChunk=k.chunk,z.userComplete=k.complete,z.userError=k.error,k.step=B(k.step),k.chunk=B(k.chunk),k.complete=B(k.complete),k.error=B(k.error),delete k.worker,z.postMessage({input:S,config:k,workerId:z.id})},m.unparse=function(S,k){var z=!1,R=!0,D=",",P=`\r
`,H='"',J=H+H,q=!1,Z=null,Q=!1,ue=((()=>{if(typeof k=="object"){if(typeof k.delimiter!="string"||m.BAD_DELIMITERS.filter(function(le){return k.delimiter.indexOf(le)!==-1}).length||(D=k.delimiter),typeof k.quotes!="boolean"&&typeof k.quotes!="function"&&!Array.isArray(k.quotes)||(z=k.quotes),typeof k.skipEmptyLines!="boolean"&&typeof k.skipEmptyLines!="string"||(q=k.skipEmptyLines),typeof k.newline=="string"&&(P=k.newline),typeof k.quoteChar=="string"&&(H=k.quoteChar),typeof k.header=="boolean"&&(R=k.header),Array.isArray(k.columns)){if(k.columns.length===0)throw new Error("Option columns is empty");Z=k.columns}k.escapeChar!==void 0&&(J=k.escapeChar+H),k.escapeFormulae instanceof RegExp?Q=k.escapeFormulae:typeof k.escapeFormulae=="boolean"&&k.escapeFormulae&&(Q=/^[=+\-@\t\r].*$/)}})(),new RegExp(w(H),"g"));if(typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(S)){if(!S.length||Array.isArray(S[0]))return U(null,S,q);if(typeof S[0]=="object")return U(Z||Object.keys(S[0]),S,q)}else if(typeof S=="object")return typeof S.data=="string"&&(S.data=JSON.parse(S.data)),Array.isArray(S.data)&&(S.fields||(S.fields=S.meta&&S.meta.fields||Z),S.fields||(S.fields=Array.isArray(S.data[0])?S.fields:typeof S.data[0]=="object"?Object.keys(S.data[0]):[]),Array.isArray(S.data[0])||typeof S.data[0]=="object"||(S.data=[S.data])),U(S.fields||[],S.data||[],q);throw new Error("Unable to serialize unrecognized input");function U(le,ee,ge){var we="",Ce=(typeof le=="string"&&(le=JSON.parse(le)),typeof ee=="string"&&(ee=JSON.parse(ee)),Array.isArray(le)&&0<le.length),Me=!Array.isArray(ee[0]);if(Ce&&R){for(var Ne=0;Ne<le.length;Ne++)0<Ne&&(we+=D),we+=X(le[Ne],Ne);0<ee.length&&(we+=P)}for(var Oe=0;Oe<ee.length;Oe++){var De=(Ce?le:ee[Oe]).length,Re=!1,qe=Ce?Object.keys(ee[Oe]).length===0:ee[Oe].length===0;if(ge&&!Ce&&(Re=ge==="greedy"?ee[Oe].join("").trim()==="":ee[Oe].length===1&&ee[Oe][0].length===0),ge==="greedy"&&Ce){for(var Ze=[],Ke=0;Ke<De;Ke++){var Je=Me?le[Ke]:Ke;Ze.push(ee[Oe][Je])}Re=Ze.join("").trim()===""}if(!Re){for(var rt=0;rt<De;rt++){0<rt&&!qe&&(we+=D);var bt=Ce&&Me?le[rt]:rt;we+=X(ee[Oe][bt],rt)}Oe<ee.length-1&&(!ge||0<De&&!qe)&&(we+=P)}}return we}function X(le,ee){var ge,we;return le==null?"":le.constructor===Date?JSON.stringify(le).slice(1,25):(we=!1,Q&&typeof le=="string"&&Q.test(le)&&(le="'"+le,we=!0),ge=le.toString().replace(ue,J),(we=we||z===!0||typeof z=="function"&&z(le,ee)||Array.isArray(z)&&z[ee]||((Ce,Me)=>{for(var Ne=0;Ne<Me.length;Ne++)if(-1<Ce.indexOf(Me[Ne]))return!0;return!1})(ge,m.BAD_DELIMITERS)||-1<ge.indexOf(D)||ge.charAt(0)===" "||ge.charAt(ge.length-1)===" ")?H+ge+H:ge)}},m.RECORD_SEP="",m.UNIT_SEP="",m.BYTE_ORDER_MARK="\uFEFF",m.BAD_DELIMITERS=["\r",`
`,'"',m.BYTE_ORDER_MARK],m.WORKERS_SUPPORTED=!o&&!!r.Worker,m.NODE_STREAM_INPUT=1,m.LocalChunkSize=10485760,m.RemoteChunkSize=5242880,m.DefaultDelimiter=",",m.Parser=E,m.ParserHandle=N,m.NetworkStreamer=x,m.FileStreamer=v,m.StringStreamer=_,m.ReadableStreamStreamer=b,r.jQuery&&((a=r.jQuery).fn.parse=function(S){var k=S.config||{},z=[];return this.each(function(P){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var H=0;H<this.files.length;H++)z.push({file:this.files[H],inputElem:this,instanceConfig:a.extend({},k)})}),R(),this;function R(){if(z.length===0)B(S.complete)&&S.complete();else{var P,H,J,q,Z=z[0];if(B(S.before)){var Q=S.before(Z.file,Z.inputElem);if(typeof Q=="object"){if(Q.action==="abort")return P="AbortError",H=Z.file,J=Z.inputElem,q=Q.reason,void(B(S.error)&&S.error({name:P},H,J,q));if(Q.action==="skip")return void D();typeof Q.config=="object"&&(Z.instanceConfig=a.extend(Z.instanceConfig,Q.config))}else if(Q==="skip")return void D()}var ue=Z.instanceConfig.complete;Z.instanceConfig.complete=function(U){B(ue)&&ue(U,Z.file,Z.inputElem),D()},m.parse(Z.file,Z.instanceConfig)}}function D(){z.splice(0,1),R()}}),u&&(r.onmessage=function(S){S=S.data,m.WORKER_ID===void 0&&S&&(m.WORKER_ID=S.workerId),typeof S.input=="string"?r.postMessage({workerId:m.WORKER_ID,results:m.parse(S.input,S.config),finished:!0}):(r.File&&S.input instanceof File||S.input instanceof Object)&&(S=m.parse(S.input,S.config))&&r.postMessage({workerId:m.WORKER_ID,results:S,finished:!0})}),(x.prototype=Object.create(g.prototype)).constructor=x,(v.prototype=Object.create(g.prototype)).constructor=v,(_.prototype=Object.create(_.prototype)).constructor=_,(b.prototype=Object.create(g.prototype)).constructor=b,m})}(Bf)),Bf.exports}var kI=CI();const pE=qd(kI),TI=()=>{const[t,e]=M.useState(null),[s,r]=M.useState(!1),[a,o]=M.useState([]),[u,h]=M.useState(null),[f,m]=M.useState([]),[g,x]=M.useState(!1),[v,_]=M.useState(null),b=C=>{const L=C.target.files?.[0];if(L){if(L.type!=="text/csv"&&!L.name.endsWith(".csv")){ae("error","Please select a valid CSV file.");return}e(L),o([]),h(null),m([]),x(!1),_(null)}},N=(C,L)=>{const B=[];if((!C.userId||C.userId.trim()==="")&&B.push({row:L,field:"User Id",message:"User ID is required",data:C}),(!C.email||C.email.trim()==="")&&B.push({row:L,field:"Email",message:"Email is required",data:C}),(!C.categorySerial||C.categorySerial.trim()==="")&&B.push({row:L,field:"Category Serial",message:"Category Serial is required",data:C}),(!C.category||C.category.trim()==="")&&B.push({row:L,field:"Category",message:"Category is required",data:C}),(!C.activityName||C.activityName.trim()==="")&&B.push({row:L,field:"PD activity name",message:"Activity name is required",data:C}),(!C.completedDate||C.completedDate.trim()==="")&&B.push({row:L,field:"Completed Date",message:"Completed date is required",data:C}),(!C.hours||C.hours.trim()==="")&&B.push({row:L,field:"Hours",message:"Hours is required",data:C}),C.email&&C.email.trim()){const S=C.email.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S)||B.push({row:L,field:"Email",message:"Invalid email format",data:C})}if(C.completedDate&&C.completedDate.trim()){const S=C.completedDate.trim();isNaN(Date.parse(S))&&B.push({row:L,field:"Completed Date",message:"Invalid date format (expected YYYY-MM-DD)",data:C})}if(C.hours&&C.hours.trim()){const S=C.hours.trim(),k=parseFloat(S);(isNaN(k)||k<0)&&B.push({row:L,field:"Hours",message:"Hours must be a valid positive number",data:C})}return B},w=C=>new Promise((L,B)=>{pE.parse(C,{header:!0,complete:S=>{try{const k=S.data.filter(z=>z&&Object.keys(z).length>1).map(z=>({activitySerial:z["Activity Serial"]?.toString()||"",userId:z["User Id"]?.toString()||"",user:z.User?.toString()||"",firstName:z["First Name"]?.toString()||"",lastName:z["Last Name"]?.toString()||"",email:(z.Email?.toString()||"").toLowerCase(),categorySerial:z["Category Serial"]?.toString()||"",category:z.Category?.toString()||"",activityName:z["PD activity name"]?.toString()||"",developmentAreas:z["Development areas"]?.toString()||"",completedDate:z["Completed Date"]?.toString()||"",eventWebsite:z["Event website (where possible)"]?.toString()||"",hours:z["Hours of PD (anything below 60 minutes can be entered as a decimal, e.g. 30 mins = 0.5)"]?.toString()||"",supplyEvidence:z["Supply Evidence (e.g. attendance statement)"]?.toString()||"",verified:z.Verified?.toString()||"",personalGoal:z["Personal development goal this activity addresses"]?.toString()||"",keyTakeaways:z["Key take-aways/reflections"]?.toString()||"",howToUse:z["How can I use this in my own teaching?"]?.toString()||"",actionIntended:z["Action I intend to take to experiment with this idea"]?.toString()||""}));L(k)}catch{B(new Error("Failed to parse CSV file"))}},error:S=>{B(new Error(`CSV parsing error: ${S.message}`))}})}),E=async()=>{if(t)try{r(!0);const C=await w(t),L=[];C.slice(0,10).forEach((B,S)=>{const k=N(B,S+1);L.push(...k)}),o(L),m(C.slice(0,10)),x(!0)}catch(C){console.error("Preview error:",C),ae("error","Preview failed",C instanceof Error?C.message:"Unknown error")}finally{r(!1)}},A=async C=>{const{data:L,error:B}=await V.from("members").select("id, user_id").eq("email",C.toLowerCase()).single();return B?null:L},O=async()=>{if(t)try{r(!0),_({phase:"parsing",current:0,total:100,message:"Reading CSV file..."});const C=await w(t);_({phase:"validating",current:0,total:C.length,message:"Validating data..."});const L={total:C.length,successful:0,failed:0,skipped:0},B=[];for(let k=0;k<C.length;k++){_({phase:"validating",current:k+1,total:C.length,message:`Validating row ${k+1} of ${C.length}...`}),await new Promise(P=>setTimeout(P,1));const z=C[k],R=k+1,D=N(z,R);D.length>0&&(B.push(...D),L.failed++)}_({phase:"importing",current:0,total:C.length-L.failed,message:"Importing activities..."});let S=0;for(let k=0;k<C.length;k++){const z=C[k],R=k+1;if(!B.some(P=>P.row===R)){_({phase:"importing",current:S+1,total:C.length-L.failed,message:`Importing activity ${S+1} of ${C.length-L.failed}...`});try{const P=await A(z.email);if(!P){B.push({row:R,field:"Email",message:`User not found with email: ${z.email}`,data:z}),L.failed++,S++;continue}const H=new Date(z.completedDate);if(isNaN(H.getTime())){B.push({row:R,field:"Completed Date",message:"Invalid date format",data:z}),L.failed++,S++;continue}const J=parseFloat(z.hours);if(isNaN(J)||J<0){B.push({row:R,field:"Hours",message:"Invalid hours value",data:z}),L.failed++,S++;continue}const q=[z.developmentAreas&&`Development Areas: ${z.developmentAreas}`,z.personalGoal&&`Personal Goal: ${z.personalGoal}`,z.keyTakeaways&&`Key Takeaways: ${z.keyTakeaways}`,z.howToUse&&`How to Use: ${z.howToUse}`,z.actionIntended&&`Action Intended: ${z.actionIntended}`].filter(Boolean).join(`

`),{error:Z}=await V.from("cpd_activities").insert({member_id:P.id,user_id:P.user_id,category_id:parseInt(z.categorySerial),category_name:z.category,activity_title:z.activityName,description:q||null,date_completed:H.toISOString().split("T")[0],hours:J,evidence_url:z.eventWebsite||null,status:z.verified==="1"?"approved":"pending"});Z?(console.error("Insert error:",Z),B.push({row:R,field:"Database",message:Z.message,data:z}),L.failed++):L.successful++}catch(P){console.error(`Error processing row ${R}:`,P),B.push({row:R,field:"Processing",message:P instanceof Error?P.message:"Unknown error",data:z}),L.failed++}S++}}_({phase:"complete",current:C.length,total:C.length,message:"Import completed!"}),o(B),h(L),L.successful>0&&ae("success",`Successfully imported ${L.successful} activities!`),L.failed>0&&ae("error",`${L.failed} activities failed to import. Check the errors below.`)}catch(C){console.error("Import error:",C),ae("error","Import failed",C instanceof Error?C.message:"Unknown error")}finally{r(!1),setTimeout(()=>{_(null)},3e3)}},F=()=>{e(null),o([]),h(null),m([]),x(!1),_(null)};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Import Activities"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Import CPD activities from CSV files exported from the legacy system"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(de,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(ra,{className:"h-6 w-6 text-blue-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload CSV File"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Activities CSV File"}),n.jsx("input",{type:"file",accept:".csv",onChange:b,className:`block w-full text-sm text-gray-500
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-full file:border-0
                  file:text-sm file:font-semibold
                  file:bg-blue-50 file:text-blue-700
                  hover:file:bg-blue-100`,disabled:s})]}),t&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("p",{className:"text-sm text-gray-700",children:[n.jsx("strong",{children:"Selected File:"})," ",t.name]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Size: ",(t.size/1024/1024).toFixed(2)," MB"]})]}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx(re,{onClick:E,disabled:!t||s,variant:"outline",children:s?"Processing...":"Preview Data"}),n.jsxs(re,{onClick:O,disabled:!t||s,className:"bg-green-600 hover:bg-green-700",children:[n.jsx(sl,{className:"mr-2 h-4 w-4"}),s?"Importing...":"Import Activities"]}),(a.length>0||u)&&n.jsx(re,{onClick:F,variant:"outline",disabled:s,children:"Reset"})]})]})]}),n.jsxs(de,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Expected CSV Format"}),n.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[n.jsx("p",{children:n.jsx("strong",{children:"Required Columns:"})}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[n.jsx("li",{children:"Activity Serial"}),n.jsx("li",{children:"User Id"}),n.jsx("li",{children:"User, First Name, Last Name"}),n.jsx("li",{children:"Email (used to match existing members)"}),n.jsx("li",{children:"Category Serial, Category"}),n.jsx("li",{children:"PD activity name"}),n.jsx("li",{children:"Development areas"}),n.jsx("li",{children:"Completed Date (YYYY-MM-DD format)"}),n.jsx("li",{children:"Hours of PD (decimal number)"}),n.jsx("li",{children:"Event website (optional)"}),n.jsx("li",{children:"Supply Evidence, Verified"}),n.jsx("li",{children:"Personal development goal, Key take-aways, How can I use this, Action I intend to take"})]})]})]}),g&&f.length>0&&n.jsxs(de,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Data Preview (First 10 rows)"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("th",{className:"border px-4 py-2 text-left",children:"Email"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Category"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Activity Name"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Date"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Hours"})]})}),n.jsx("tbody",{children:f.map((C,L)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"border px-4 py-2 text-sm",children:C.email}),n.jsx("td",{className:"border px-4 py-2 text-sm",children:C.category}),n.jsx("td",{className:"border px-4 py-2 text-sm",children:C.activityName}),n.jsx("td",{className:"border px-4 py-2 text-sm",children:C.completedDate}),n.jsx("td",{className:"border px-4 py-2 text-sm",children:C.hours})]},L))})]})})]}),v&&n.jsxs(de,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(sl,{className:"h-6 w-6 text-blue-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Import Progress"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:v.message}),n.jsxs("span",{className:"text-sm text-gray-500",children:[v.current," / ",v.total]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:n.jsx("div",{className:`h-3 rounded-full transition-all duration-300 ${v.phase==="complete"?"bg-green-600":v.phase==="importing"?"bg-blue-600":"bg-yellow-600"}`,style:{width:`${Math.min(100,v.current/v.total*100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[n.jsx("span",{className:`font-medium ${v.phase==="parsing"?"text-blue-600":v.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Parsing"}),n.jsx("span",{className:`font-medium ${v.phase==="validating"?"text-yellow-600":v.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Validating"}),n.jsx("span",{className:`font-medium ${v.phase==="importing"?"text-blue-600":v.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Importing"}),n.jsx("span",{className:`font-medium ${v.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Complete"})]}),v.phase==="complete"&&n.jsxs("div",{className:"text-center",children:[n.jsx(fs,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),n.jsx("p",{className:"text-green-700 font-medium",children:"Import completed successfully!"})]})]})]}),u&&n.jsxs(de,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(fs,{className:"h-6 w-6 text-green-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Import Results"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:u.total}),n.jsx("div",{className:"text-sm text-blue-700",children:"Total Records"})]}),n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.successful}),n.jsx("div",{className:"text-sm text-green-700",children:"Successful"})]}),n.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:u.failed}),n.jsx("div",{className:"text-sm text-red-700",children:"Failed"})]}),n.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:u.skipped}),n.jsx("div",{className:"text-sm text-yellow-700",children:"Skipped"})]})]})]}),a.length>0&&n.jsxs(de,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(Xa,{className:"h-6 w-6 text-red-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Validation Errors"})]}),n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.map((C,L)=>n.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(fn,{className:"h-5 w-5 text-red-500 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-sm font-medium text-red-800",children:["Row ",C.row,": ",C.field]}),n.jsx("p",{className:"text-sm text-red-700",children:C.message}),C.data.email&&n.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Email: ",C.data.email]})]})]})},L))})]})]})]})},OI="https://english-australia-eau-supabase.lkobs5.easypanel.host",RI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJzZXJ2aWNlX3JvbGUiLAogICAgImlzcyI6ICJzdXBhYmFzZS1kZW1vIiwKICAgICJpYXQiOiAxNjQxNzY5MjAwLAogICAgImV4cCI6IDE3OTk1MzU2MDAKfQ.DaYlNEoUrrEn2Ig7tqibS-PHK5vgusbcbo7X36XVt4Q",ai=GN(OI,RI,{auth:{autoRefreshToken:!1,persistSession:!1}});class MI{levenshteinDistance(e,s){const r=[];for(let a=0;a<=s.length;a++)r[a]=[a];for(let a=0;a<=e.length;a++)r[0][a]=a;for(let a=1;a<=s.length;a++)for(let o=1;o<=e.length;o++)s.charAt(a-1)===e.charAt(o-1)?r[a][o]=r[a-1][o-1]:r[a][o]=Math.min(r[a-1][o-1]+1,r[a][o-1]+1,r[a-1][o]+1);return r[s.length][e.length]}calculateNameSimilarity(e,s){const r=e.toLowerCase().trim(),a=s.toLowerCase().trim();if(r===a)return 100;const o=this.levenshteinDistance(r,a),u=Math.max(r.length,a.length);return u===0?0:Math.max(0,100-o*100/u)}areEmailsSimilar(e,s){const r=e.toLowerCase().trim(),a=s.toLowerCase().trim();if(r===a)return{similar:!0,domain_match:!0};const o=r.split("@")[1],u=a.split("@")[1],h=o===u,f=r.split("@")[0],m=a.split("@")[0],g=this.calculateNameSimilarity(f,m);return{similar:h&&g>70,domain_match:h}}calculateDuplicateScore(e,s){let r=0;const a={exact_name:!1,similar_name:!1,same_company:!1,similar_email:!1,same_phone:!1,same_address:!1},o=`${e.first_name||""} ${e.last_name||""}`.trim(),u=`${s.first_name||""} ${s.last_name||""}`.trim(),h=this.calculateNameSimilarity(o,u);if(a.name_similarity_score=h,h===100?(a.exact_name=!0,r+=40):h>80?(a.similar_name=!0,r+=30):h>60&&(a.similar_name=!0,r+=20),e.company_id&&s.company_id&&e.company_id===s.company_id?(a.same_company=!0,r+=20):e.company_name&&s.company_name&&this.calculateNameSimilarity(e.company_name,s.company_name)>80&&(a.same_company=!0,r+=15),e.email&&s.email){const v=this.areEmailsSimilar(e.email,s.email);a.similar_email=v.similar,a.email_domain_match=v.domain_match,v.similar?r+=15:v.domain_match&&(r+=10)}const f=(e.phone||e.mobile||"").replace(/\D/g,""),m=(s.phone||s.mobile||"").replace(/\D/g,"");f&&m&&f===m&&(a.same_phone=!0,r+=10);const g={street:!1,suburb:!1,postcode:!1,state:!1};if(e.street_address&&s.street_address){const v=this.calculateNameSimilarity(e.street_address,s.street_address);g.street=v>80,g.street&&(r+=5)}return e.suburb&&s.suburb&&e.suburb.toLowerCase()===s.suburb.toLowerCase()&&(g.suburb=!0,r+=3),e.postcode&&s.postcode&&e.postcode===s.postcode&&(g.postcode=!0,r+=4),e.state&&s.state&&e.state.toLowerCase()===s.state.toLowerCase()&&(g.state=!0,r+=3),Object.values(g).some(v=>v)&&(a.same_address=!0,a.address_components_match=g),{member1:e,member2:s,similarity_score:Math.min(100,r),match_details:a}}async findDuplicatesForMember(e,s=50){try{const{data:r,error:a}=await V.from("members").select("*").eq("id",e).single();if(a||!r)throw new Error("Member not found");const{data:o,error:u}=await V.from("members").select("*").neq("id",e);if(u)throw u;const h=[];for(const f of o||[]){const m=this.calculateDuplicateScore(r,f);m.similarity_score>=s&&h.push(m)}return h.sort((f,m)=>m.similarity_score-f.similarity_score)}catch(r){throw console.error("Error finding duplicates:",r),r}}async findAllDuplicates(e=50){try{const{data:s,error:r}=await V.from("members").select("*").order("last_name",{ascending:!0});if(r)throw r;const a=[],o=new Set;for(let u=0;u<(s?.length||0);u++)for(let h=u+1;h<(s?.length||0);h++){const f=s[u],m=s[h],g=[f.id,m.id].sort().join("-");if(o.has(g))continue;o.add(g);const x=this.calculateDuplicateScore(f,m);x.similarity_score>=e&&a.push(x)}return a.sort((u,h)=>h.similarity_score-u.similarity_score)}catch(s){throw console.error("Error finding all duplicates:",s),s}}async saveDuplicate(e){try{const{error:s}=await V.from("member_duplicates").upsert({member1_id:e.member1.id,member2_id:e.member2.id,similarity_score:e.similarity_score,match_details:e.match_details,status:"pending"},{onConflict:"member1_id,member2_id"});if(s)throw s}catch(s){throw console.error("Error saving duplicate:",s),s}}async getPendingDuplicates(){try{const{data:e,error:s}=await V.from("pending_duplicates_view").select("*");if(s)throw s;return e||[]}catch(e){throw console.error("Error fetching pending duplicates:",e),e}}async reviewDuplicate(e,s,r){try{const{data:{user:a}}=await V.auth.getUser(),{error:o}=await V.from("member_duplicates").update({status:s,reviewed_by:a?.id,reviewed_at:new Date().toISOString(),review_notes:r}).eq("id",e);if(o)throw o;ae("success",`Duplicate marked as ${s.replace("_"," ")}`)}catch(a){throw console.error("Error reviewing duplicate:",a),ae("error","Failed to review duplicate"),a}}async mergeMembers(e,s){try{const{data:{user:r}}=await V.auth.getUser(),{data:a,error:o}=await V.from("member_duplicates").select("*").eq("id",e).single();if(o)throw o;const u=s.primary_member_id,h=u===a.member1_id?a.member2_id:a.member1_id,{data:f,error:m}=await V.from("members").select("*").in("id",[u,h]);if(m)throw m;const g=f.find(N=>N.id===u),x=f.find(N=>N.id===h);if(!g||!x)throw new Error("Members not found");const v={};for(const[N,w]of Object.entries(s.fields_to_keep))!w&&x[N]&&(v[N]=x[N]);if(Object.keys(v).length>0){const{error:N}=await V.from("members").update(v).eq("id",u);if(N)throw N}if(s.relationships.merge_cpd_activities){const{error:N}=await V.from("cpd_activities").update({member_id:u}).eq("member_id",h);N&&console.error("Error transferring CPD activities:",N)}if(s.relationships.merge_event_registrations)try{const{data:N}=await V.from("members").select("user_id").eq("id",u).single(),{data:w}=await V.from("members").select("user_id").eq("id",h).single();if(N?.user_id&&w?.user_id){const{data:E,error:A}=await V.from("event_registrations").select("id").eq("user_id",w.user_id).limit(1);if(!A&&E&&E.length>0){const{data:O}=await V.from("event_registrations").select("count",{count:"exact",head:!0}).eq("user_id",w.user_id),{error:F}=await V.from("event_registrations").update({user_id:N.user_id}).eq("user_id",w.user_id);F?console.log("Event registrations transfer warning:",F.message||"Unknown error"):console.log(`Transferred ${O?.count||0} event registrations`)}else A||console.log("No event registrations to transfer")}else console.log("Members do not have associated user accounts, skipping event transfer")}catch(N){console.log("Event registrations transfer error:",N)}if(s.relationships.merge_payments)try{const{data:N,error:w}=await V.from("payments").select("id").eq("member_id",h).limit(1);if(!w&&N&&N.length>0){const{error:E}=await V.from("payments").update({member_id:u}).eq("member_id",h);E?console.log("Payments transfer warning:",E.message||"Unknown error"):console.log(`Transferred ${N.length} payments`)}else w&&(w.code==="42P01"||w.message?.includes("does not exist"))&&console.log("Payments table not configured, skipping transfer")}catch{console.log("Payments transfer skipped")}const{error:_}=await V.from("member_merge_history").insert({kept_member_id:u,deleted_member_id:h,deleted_member_data:x,merge_data:s,relationships_transferred:s.relationships,performed_by:r?.id});_&&console.error("Error saving merge history:",_);const{error:b}=await V.from("members").delete().eq("id",h);if(b)throw b;await this.reviewDuplicate(e,"merged","Members successfully merged"),ae("success","Members merged successfully")}catch(r){throw console.error("Error merging members:",r),ae("error","Failed to merge members"),r}}async undoMerge(e){try{const{data:{user:s}}=await V.auth.getUser(),{data:r,error:a}=await V.from("member_merge_history").select("*").eq("id",e).single();if(a)throw a;if(!r.can_undo||r.undone)throw new Error("This merge cannot be undone");if(new Date(r.undo_deadline)<new Date)throw new Error("Undo deadline has passed");const{error:o}=await V.from("members").insert(r.deleted_member_data);if(o)throw o;const{error:u}=await V.from("member_merge_history").update({undone:!0,undone_by:s?.id,undone_at:new Date().toISOString()}).eq("id",e);if(u)throw u;ae("success","Merge undone successfully")}catch(s){throw console.error("Error undoing merge:",s),ae("error","Failed to undo merge"),s}}}const Ec=new MI,DI=()=>{const t=Ns(),[e,s]=M.useState(null),[r,a]=M.useState(!1),[o,u]=M.useState(null),[h,f]=M.useState([]),[m,g]=M.useState({phase:"",message:"",current:0,total:0}),[x,v]=M.useState(0),_=w=>{const E=w.target.files?.[0];E&&(s(E),u(null),f([]))},b=w=>new Promise((E,A)=>{pE.parse(w,{header:!0,complete:O=>{try{const F=O.data.filter(C=>C&&Object.keys(C).length>1).map(C=>({membershipId:C.ID||"",startDate:C["Start Date"]||"",expiryDate:C["Expiry Date"]||"",lastRenewedDate:C["Last Renewed Date"]||"",status:C.Status||"",previousExpiryDate:C["Previous Expiry Date"]||"",pendingStatus:C["Pending Status"]||"",userId:C.UserId||"",memberTest:C["Member Test"]||"",memberEditableAddress:C["Member Editable Address"]||"",memberTitle:C["Member Title"]||"",memberFirstName:C["Member First Name"]||"",memberLastName:C["Member Last Name"]||"",memberEmail:C["Member Email Address"]||"",memberCompanyName:C["Member Company Name"]||"",memberCompanyNameActual:C["Member Company Name (Actual name)"]||"",memberPosition:C["Member Position"]||"",memberStreetAddress:C["Member Street Address"]||"",memberStreetAddressLine2:C["Member Street Address Line 2"]||"",memberSuburb:C["Member Suburb"]||"",memberPostcode:C["Member Postcode"]||"",memberState:C["Member State"]||"",memberCountry:C["Member Country"]||"",memberMobile:C["Member Mobile"]||"",memberSubscriptions:C["Member Subscriptions"]||"",memberBio:C["Member Bio"]||"",memberBoardRole:C["Member Board Member Role"]||"",memberAreaExpertise:C["Member Area of Expertise"]||"",memberUnsubscribeNotes:C["Member Unsubscribe Notes"]||"",memberTeacherSince:C["Member Teacher Since"]||"",memberCoursesTaught:C["Member Courses Taught"]||"",memberInterestTags:C["Member Interest Tags"]||"",memberEmailSubscriptions:C["Member Email Subscriptions"]||"",memberUsername:C["Member Username"]||"",memberGroups:C["Member Groups"]||"",memberCreated:C["Member Created"]||"",memberLastEdited:C["Member Last Edited"]||"",totalMembers:C["Total Members"]||"1",category:C.Category||"",type:C.Type||"",pricingOption:C["Pricing Option"]||"",pricingOptionCost:C["Pricing Option Cost"]||"0",targetType:C["Target (Individual/Organisation)"]||"",primaryContactUserId:C["Primary Contact's User ID"]||"",primaryContactFirstName:C["Primary Contact's First Name"]||"",primaryContactLastName:C["Primary Contact's Last Name"]||"",primaryContactEmail:C["Primary Contact's Email"]||"",companyId:C["Company ID"]||"",companyName:C["Company Name"]||"",companyEmail:C["Company Email"]||"",companyCompanyName:C["Company Company Name"]||"",companyParentCompany:C["Company Parent Company"]||"",companyABN:C["Company ABN"]||"",companyCompanyEmail:C["Company Company Email Address"]||"",companyCompanyType:C["Company Company Type"]||"",companyCRICOSCode:C["Company CRICOS Code"]||"",companyAddressLine1:C["Company Company Address Line 1"]||"",companyAddressLine2:C["Company Company Address Line 2"]||"",companyAddressLine3:C["Company Company Address Line 3"]||"",companySuburb:C["Company Company Suburb"]||"",companyPostcode:C["Company Company Postcode"]||"",companyState:C["Company Company State"]||"",companyCountry:C["Company Company Country"]||"",companyPhone:C["Company Company Phone"]||"",companyPrimaryContact:C["Company Primary Contact"]||"",companyCoursesOffered:C["Company Courses Offered"]||"",companyLogo:C["Company Logo"]||"",companyWebsite:C["Company Website"]||"",companyMemberSince:C["Company Member Since: (Date)"]||"",companyCancellationDetails:C["Company Membership Cancellation Details"]||""}));E(F)}catch{A(new Error("Failed to parse CSV file"))}},error:O=>{A(new Error(`CSV parsing error: ${O.message}`))}})}),N=async()=>{if(e)try{a(!0),f([]);const w={companies:{total:0,created:0,existing:0,failed:0},memberships:{total:0,created:0,existing:0,failed:0},members:{total:0,created:0,existing:0,failed:0}},E=C=>{if(!C||C===""||C==="0000-00-00"||C==="0000-00-00 00:00:00")return null;const L=new Date(C);return isNaN(L.getTime())?null:C.split(" ")[0]};g({phase:"parsing",message:"Reading CSV file...",current:0,total:100});const A=await b(e),O=new Map,F=new Map;g({phase:"companies",message:"Processing companies...",current:0,total:A.length});for(const C of A)C.companyId&&!O.has(C.companyId)&&O.set(C.companyId,{legacy_company_id:parseInt(C.companyId),company_name:C.companyCompanyName||C.companyName,parent_company:C.companyParentCompany,abn:C.companyABN,company_email:C.companyCompanyEmail||C.companyEmail,company_type:C.companyCompanyType,cricos_code:C.companyCRICOSCode,address_line_1:C.companyAddressLine1,address_line_2:C.companyAddressLine2,address_line_3:C.companyAddressLine3,suburb:C.companySuburb,postcode:C.companyPostcode,state:C.companyState,country:C.companyCountry||"Australia",phone:C.companyPhone,website:C.companyWebsite,courses_offered:C.companyCoursesOffered,member_since:E(C.companyMemberSince),membership_cancellation_details:C.companyCancellationDetails});w.companies.total=O.size;for(const[C,L]of O)try{const{data:B}=await ai.from("companies").select("id").eq("legacy_company_id",L.legacy_company_id).maybeSingle();if(B)w.companies.existing++;else{const{error:S}=await ai.from("companies").insert(L);S?(w.companies.failed++,f(k=>[...k,`Company ${C}: ${S.message}`])):w.companies.created++}}catch(B){w.companies.failed++,f(S=>[...S,`Company ${C}: ${B}`])}g({phase:"memberships",message:"Processing memberships...",current:0,total:A.length});for(const C of A)if(C.membershipId&&!F.has(C.membershipId)){let L=null;if(C.companyId){const{data:B}=await ai.from("companies").select("id").eq("legacy_company_id",parseInt(C.companyId)).maybeSingle();L=B?.id}F.set(C.membershipId,{legacy_membership_id:parseInt(C.membershipId),start_date:E(C.startDate),expiry_date:E(C.expiryDate),last_renewed_date:E(C.lastRenewedDate),previous_expiry_date:E(C.previousExpiryDate),status:C.status||"Active",pending_status:C.pendingStatus,category:C.category,membership_type:C.type,pricing_option:C.pricingOption,pricing_option_cost:parseFloat(C.pricingOptionCost)||0,target_type:C.targetType,total_members:parseInt(C.totalMembers)||1,company_id:L,primary_contact_user_id:C.primaryContactUserId?parseInt(C.primaryContactUserId):null})}w.memberships.total=F.size;for(const[C,L]of F)try{const{data:B}=await ai.from("memberships").select("id").eq("legacy_membership_id",L.legacy_membership_id).maybeSingle();if(B)w.memberships.existing++;else{const{error:S}=await ai.from("memberships").insert(L);S?(w.memberships.failed++,f(k=>[...k,`Membership ${C}: ${S.message}`])):w.memberships.created++}}catch(B){w.memberships.failed++,f(S=>[...S,`Membership ${C}: ${B}`])}g({phase:"members",message:"Processing members...",current:0,total:A.length}),w.members.total=A.length;for(let C=0;C<A.length;C++){const L=A[C];g({phase:"members",message:`Processing member ${C+1} of ${A.length}...`,current:C+1,total:A.length});try{const{data:B}=await ai.from("members").select("id").eq("legacy_user_id",parseInt(L.userId)).maybeSingle();if(B){w.members.existing++;continue}let S=null;if(L.membershipId){const{data:P}=await ai.from("memberships").select("id").eq("legacy_membership_id",parseInt(L.membershipId)).maybeSingle();S=P?.id}let k=null;if(L.companyId){const{data:P}=await ai.from("companies").select("id").eq("legacy_company_id",parseInt(L.companyId)).maybeSingle();k=P?.id}const z={legacy_user_id:parseInt(L.userId),membership_id:S,company_id:k,title:L.memberTitle,first_name:L.memberFirstName?.trim()||"",last_name:L.memberLastName?.trim()||"",email:L.memberEmail?.toLowerCase()||"",position:L.memberPosition,street_address:L.memberStreetAddress,street_address_line_2:L.memberStreetAddressLine2,suburb:L.memberSuburb,postcode:L.memberPostcode,state:L.memberState,country:L.memberCountry||"Australia",mobile:L.memberMobile,bio:L.memberBio,board_member_role:L.memberBoardRole,area_of_expertise:L.memberAreaExpertise,teacher_since:E(L.memberTeacherSince),courses_taught:L.memberCoursesTaught,interest_tags:L.memberInterestTags,subscriptions:L.memberSubscriptions,email_subscriptions:L.memberEmailSubscriptions,unsubscribe_notes:L.memberUnsubscribeNotes,username:L.memberUsername||L.memberEmail,groups:L.memberGroups,is_test_member:L.memberTest==="1",is_editable_address:L.memberEditableAddress==="1",member_created_date:E(L.memberCreated),member_last_edited:E(L.memberLastEdited),company_name:L.memberCompanyName,company_name_actual:L.memberCompanyNameActual,display_name:`${L.memberFirstName} ${L.memberLastName}`.trim(),membership_status:(L.status||"active").toLowerCase()},{data:R,error:D}=await ai.from("members").insert(z).select("id").single();D?(w.members.failed++,f(P=>[...P,`Member ${L.memberEmail}: ${D.message}`])):(w.members.created++,R?.id&&await ai.from("member_roles").insert({member_id:R.id,role:"member"}).select().single())}catch(B){w.members.failed++,f(S=>[...S,`Member ${L.memberEmail}: ${B}`])}await new Promise(B=>setTimeout(B,10))}if(u(w),w.members.created>0){g({phase:"complete",message:"Scanning for duplicates...",current:95,total:100});try{const C=await Ec.scanForDuplicates();v(C),C>0&&ae("info",`Found ${C} potential duplicate members`,"Review them in the Duplicates Management page")}catch(C){console.warn("Duplicate scan failed:",C)}}g({phase:"complete",message:"Import completed!",current:100,total:100}),w.companies.created>0&&ae("success",`Created ${w.companies.created} companies`),w.memberships.created>0&&ae("success",`Created ${w.memberships.created} memberships`),w.members.created>0&&ae("success",`Created ${w.members.created} members`)}catch(w){console.error("Import error:",w),ae("error","Import failed",w instanceof Error?w.message:"Unknown error")}finally{a(!1)}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Import System"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Import members, companies, and memberships from the complete CSV export"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(de,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Upload Complete CSV"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("input",{type:"file",accept:".csv",onChange:_,className:`block w-full text-sm text-gray-500
                file:mr-4 file:py-2 file:px-4
                file:rounded-full file:border-0
                file:text-sm file:font-semibold
                file:bg-blue-50 file:text-blue-700
                hover:file:bg-blue-100`,disabled:r}),e&&n.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:n.jsxs("p",{className:"text-sm text-gray-700",children:[n.jsx("strong",{children:"Selected File:"})," ",e.name]})}),n.jsxs(re,{onClick:N,disabled:!e||r,className:"bg-green-600 hover:bg-green-700",children:[n.jsx(sl,{className:"mr-2 h-4 w-4"}),r?"Importing...":"Start Import"]})]})]}),m.phase&&n.jsxs(de,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Import Progress"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm text-gray-600",children:m.message}),m.total>0&&n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${m.current/m.total*100}%`}})})]})]}),o&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(de,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(I8,{className:"h-6 w-6 text-blue-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Companies"})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("p",{children:["Total: ",o.companies.total]}),n.jsxs("p",{className:"text-green-600",children:["Created: ",o.companies.created]}),n.jsxs("p",{className:"text-yellow-600",children:["Existing: ",o.companies.existing]}),n.jsxs("p",{className:"text-red-600",children:["Failed: ",o.companies.failed]})]})]}),n.jsxs(de,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(aE,{className:"h-6 w-6 text-purple-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Memberships"})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("p",{children:["Total: ",o.memberships.total]}),n.jsxs("p",{className:"text-green-600",children:["Created: ",o.memberships.created]}),n.jsxs("p",{className:"text-yellow-600",children:["Existing: ",o.memberships.existing]}),n.jsxs("p",{className:"text-red-600",children:["Failed: ",o.memberships.failed]})]})]}),n.jsxs(de,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(zr,{className:"h-6 w-6 text-green-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Members"})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("p",{children:["Total: ",o.members.total]}),n.jsxs("p",{className:"text-green-600",children:["Created: ",o.members.created]}),n.jsxs("p",{className:"text-yellow-600",children:["Existing: ",o.members.existing]}),n.jsxs("p",{className:"text-red-600",children:["Failed: ",o.members.failed]})]})]})]}),x>0&&n.jsx(de,{className:"p-6 border-2 border-yellow-400 bg-yellow-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx(tl,{className:"h-6 w-6 text-yellow-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Duplicates Detected"})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Found ",x," potential duplicate members that need review"]})]}),n.jsx(re,{onClick:()=>t("/admin/duplicates"),className:"bg-yellow-600 hover:bg-yellow-700",children:"Review Duplicates"})]})}),h.length>0&&n.jsxs(de,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(Xa,{className:"h-6 w-6 text-red-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Import Errors"})]}),n.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:h.map((w,E)=>n.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:w},E))})]})]})]})};function LI({postalCode:t,onAddressChange:e,register:s}){const[r,a]=M.useState(!1),[,o]=M.useState({});M.useEffect(()=>{t&&t.length>=4&&u(t)},[t]);const u=async h=>{if(!(!h||h.length<4)){a(!0);try{let f="",m,g;if(/^\d{4}$/.test(h)){f=`https://api.postcodes.io/postcodes/${h}`;try{if(m=await fetch(f),m.ok&&(g=await m.json(),g.result)){const E={city:g.result.admin_district||g.result.parish||"",state:g.result.country||g.result.region||"",country:"Australia"};o(E),e(E);return}}catch{console.warn("UK postcode API failed, trying alternative")}const w={state:{1:"NSW",2:"NSW",3:"VIC",4:"QLD",5:"SA",6:"WA",7:"TAS",0:"NT"}[h[0]]||"NSW",country:"Australia"};o(w),e(w);return}if(/^\d{5}$/.test(h)){f=`http://api.zippopotam.us/us/${h}`;try{if(m=await fetch(f),m.ok){g=await m.json();const b={city:g.places?.[0]?.["place name"]||"",state:g.places?.[0]?.["state abbreviation"]||"",country:"United States"};o(b),e(b);return}}catch{console.warn("US ZIP API failed")}}if(/^[A-Z]{1,2}\d{1,2}[A-Z]?\s?\d[A-Z]{2}$/i.test(h)){f=`https://api.postcodes.io/postcodes/${h.toUpperCase()}`;try{if(m=await fetch(f),m.ok&&(g=await m.json(),g.result)){const b={city:g.result.admin_district||"",state:g.result.region||"",country:"United Kingdom"};o(b),e(b);return}}catch{console.warn("UK postcode API failed")}}const x=h.replace(/\D/g,"");if(/^\d{8}$/.test(x)){f=`https://viacep.com.br/ws/${x}/json/`;try{if(m=await fetch(f),m.ok&&(g=await m.json(),!g.erro)){const b={address_line1:`${g.logradouro||""}`.trim(),city:g.localidade||"",state:g.uf||"",country:"Brazil"};o(b),e(b);return}}catch{console.warn("Brazil CEP API failed")}}let v="Australia";/^\d{5}$/.test(h)?v="United States":/^[A-Z]{1,2}\d{1,2}[A-Z]?\s?\d[A-Z]{2}$/i.test(h)?v="United Kingdom":/^\d{8}$/.test(x)&&(v="Brazil");const _={country:v};o(_),e(_)}catch(f){console.error("Error fetching address data:",f)}finally{a(!1)}}};return n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(xe,{htmlFor:"address_line1",children:"Address Line 1"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ae,{id:"address_line1",...s("address_line1"),placeholder:"123 Main Street"}),r&&n.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:n.jsx(hn,{className:"w-4 h-4 animate-spin text-blue-600"})})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(xe,{htmlFor:"address_line2",children:"Address Line 2"}),n.jsx(Ae,{id:"address_line2",...s("address_line2"),placeholder:"Apartment 4B"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"city",children:"City"}),n.jsx(Ae,{id:"city",...s("city"),placeholder:"Sydney"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"state",children:"State"}),n.jsx(Ae,{id:"state",...s("state"),placeholder:"NSW"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"postal_code",children:"Postal Code"}),n.jsx(Ae,{id:"postal_code",...s("postal_code"),placeholder:"2000"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"country",children:"Country"}),n.jsx(Ae,{id:"country",...s("country"),placeholder:"Australia"})]})]})})}const qI=Fd({first_name:Wt().min(1,"First name is required"),last_name:Wt().min(1,"Last name is required"),email:Wt().email("Invalid email"),phone:Wt().optional(),date_of_birth:Wt().optional(),address_line1:Wt().optional(),address_line2:Wt().optional(),city:Wt().optional(),state:Wt().optional(),postal_code:Wt().optional(),country:Wt().optional(),profession:Wt().optional(),experience_years:If().min(0).optional(),qualifications:Wt().optional()});function PI(){const[t,e]=M.useState(!1),[s,r]=M.useState(!0),{user:a,getEffectiveUserId:o}=jt(),u=o(),{register:h,handleSubmit:f,reset:m,watch:g,setValue:x,formState:{errors:v}}=Ud({resolver:zd(qI)}),_=g("postal_code")||"";M.useEffect(()=>{b()},[u]);const b=async()=>{if(u)try{r(!0);const w=new Promise((C,L)=>setTimeout(()=>L(new Error("Load timeout")),3e3)),E=V.from("members").select("*").eq("id",u).single();let A=null,O=null;try{const C=await Promise.race([E,w]);A=C.data,O=C.error}catch{console.warn("Profile load timed out, using defaults")}O&&O.code!=="PGRST116"&&console.error("Error loading member data:",O);const F={email:A?.email||a.email||"",first_name:A?.first_name||"",last_name:A?.last_name||"",phone:A?.phone||"",date_of_birth:A?.date_of_birth||"",address_line1:A?.address_line1||"",address_line2:A?.address_line2||"",city:A?.city||"",state:A?.state||"",postal_code:A?.postal_code||"",country:A?.country||"Australia",profession:A?.profession||"",experience_years:A?.experience_years||0,qualifications:A?.qualifications||""};m(F),A?.phone&&x("phone",A.phone),A?.address_line1&&x("address_line1",A.address_line1),A?.city&&x("city",A.city),A?.state&&x("state",A.state),A?.country&&x("country",A.country),A?.postal_code&&x("postal_code",A.postal_code)}catch(w){console.error("Error loading profile:",w),ae("error","Error loading profile data")}finally{r(!1)}},N=async w=>{if(u)try{e(!0);const{data:E}=await V.from("members").select("id").eq("id",u).single(),A={first_name:w.first_name,last_name:w.last_name,email:w.email,phone:w.phone||null,date_of_birth:w.date_of_birth&&w.date_of_birth!==""?w.date_of_birth:null,address_line1:w.address_line1||null,address_line2:w.address_line2||null,city:w.city||null,state:w.state||null,postal_code:w.postal_code||null,country:w.country||"Australia",profession:w.profession||null,experience_years:w.experience_years?Number(w.experience_years):null,qualifications:w.qualifications||null,updated_at:new Date().toISOString(),updated_by:u};if(E){const{error:O}=await V.from("members").update(A).eq("id",E.id);if(O)throw O}else{const{error:O}=await V.from("members").insert({...A,membership_status:"active",membership_type:"standard",receive_newsletters:!0,receive_event_notifications:!0,created_by:u});if(O)throw O}ae("success","Profile updated successfully!")}catch(E){console.error("Error updating profile:",E),ae("error","Error updating profile")}finally{e(!1)}};return s?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx(hn,{className:"w-8 h-8 animate-spin text-blue-600"})}):n.jsxs("form",{onSubmit:f(N),className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"first_name",children:"First Name *"}),n.jsx(Ae,{id:"first_name",...h("first_name"),placeholder:"Your first name"}),v.first_name&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.first_name.message})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"last_name",children:"Last Name *"}),n.jsx(Ae,{id:"last_name",...h("last_name"),placeholder:"Your last name"}),v.last_name&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.last_name.message})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"email",children:"Email *"}),n.jsx(Ae,{id:"email",type:"email",...h("email"),placeholder:"your@email.com",disabled:!0}),v.email&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.email.message})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"phone",children:"Phone"}),n.jsx(mE,{value:g("phone")||"",onChange:w=>x("phone",w),placeholder:"Enter phone number"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"date_of_birth",children:"Date of Birth"}),n.jsx(Ae,{id:"date_of_birth",type:"date",...h("date_of_birth")})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"profession",children:"Profession"}),n.jsx(Ae,{id:"profession",...h("profession"),placeholder:"English Teacher"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"experience_years",children:"Years of Experience"}),n.jsx(Ae,{id:"experience_years",type:"number",min:"0",...h("experience_years",{valueAsNumber:!0}),placeholder:"5"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"qualifications",children:"Qualifications"}),n.jsx(Ae,{id:"qualifications",...h("qualifications"),placeholder:"CELTA, DELTA, MA TESOL"})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Address"}),n.jsx(LI,{postalCode:_,onAddressChange:w=>{w.address_line1&&x("address_line1",w.address_line1),w.city&&x("city",w.city),w.state&&x("state",w.state),w.country&&x("country",w.country)},register:h,errors:v})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx(re,{type:"button",variant:"outline",onClick:()=>b(),disabled:t,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:t,children:t?n.jsxs(n.Fragment,{children:[n.jsx(hn,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})}const II=Fd({currentPassword:Wt().min(6,"Current password is required"),newPassword:Wt().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),confirmPassword:Wt()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function $I(){const[t,e]=M.useState(!1),[s,r]=M.useState(!1),[a,o]=M.useState(!1),[u,h]=M.useState(!1),{register:f,handleSubmit:m,reset:g,formState:{errors:x}}=Ud({resolver:zd(II)}),v=async _=>{try{e(!0);const{data:{user:b}}=await V.auth.getUser();if(!b?.email)throw new Error("User not found");const{error:N}=await V.auth.signInWithPassword({email:b.email,password:_.currentPassword});if(N){ae("error","Current password is incorrect");return}const{error:w}=await V.auth.updateUser({password:_.newPassword});if(w)throw w;ae("success","Password changed successfully!"),g()}catch(b){console.error("Error updating password:",b),b.message==="New password should be different from the old password."?ae("error","New password must be different from current password"):ae("error","Error changing password. Please try again.")}finally{e(!1)}};return n.jsxs("form",{onSubmit:m(v),className:"space-y-6 max-w-md",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"currentPassword",children:"Current Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ae,{id:"currentPassword",type:s?"text":"password",...f("currentPassword"),placeholder:"Enter your current password"}),n.jsx("button",{type:"button",onClick:()=>r(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:s?n.jsx(Uf,{className:"w-4 h-4"}):n.jsx(Ln,{className:"w-4 h-4"})})]}),x.currentPassword&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.currentPassword.message})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"newPassword",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ae,{id:"newPassword",type:a?"text":"password",...f("newPassword"),placeholder:"Enter your new password"}),n.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:a?n.jsx(Uf,{className:"w-4 h-4"}):n.jsx(Ln,{className:"w-4 h-4"})})]}),x.newPassword&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.newPassword.message}),n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[n.jsx("p",{children:"Password must contain:"}),n.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[n.jsx("li",{children:"At least 8 characters"}),n.jsx("li",{children:"One uppercase letter (A-Z)"}),n.jsx("li",{children:"One lowercase letter (a-z)"}),n.jsx("li",{children:"One number (0-9)"}),n.jsx("li",{children:"One special character (!@#$%^&*)"})]})]})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"confirmPassword",children:"Confirm New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ae,{id:"confirmPassword",type:u?"text":"password",...f("confirmPassword"),placeholder:"Confirm your new password"}),n.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u?n.jsx(Uf,{className:"w-4 h-4"}):n.jsx(Ln,{className:"w-4 h-4"})})]}),x.confirmPassword&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.confirmPassword.message})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx(re,{type:"button",variant:"outline",onClick:()=>g(),disabled:t,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:t,children:t?n.jsxs(n.Fragment,{children:[n.jsx(hn,{className:"w-4 h-4 mr-2 animate-spin"}),"Changing..."]}):"Change Password"})]})]})}class UI{static async initializeBuckets(){try{const{data:e,error:s}=await V.storage.listBuckets();if(s&&console.warn("Error listing buckets:",s),e?.some(a=>a.name==="profiles"))console.log(" Profiles bucket already exists");else{const{data:a,error:o}=await V.storage.createBucket("profiles",{public:!0,fileSizeLimit:5242880,allowedMimeTypes:["image/jpeg","image/png","image/webp","image/gif"]});o?o.message?.includes("already exists")?console.log(" Profiles bucket already exists"):console.warn("Error creating profiles bucket:",o):console.log(" Profiles bucket created successfully",a)}}catch(e){console.warn("Error initializing storage buckets:",e)}}static async uploadAvatar(e,s){const r=s.name.split(".").pop()?.toLowerCase()||"jpg",o=`avatars/${`avatar-${e}-${Date.now()}.${r}`}`;console.log("Uploading file:",{name:s.name,type:s.type,size:s.size,path:o});const{data:u,error:h}=await V.storage.from("profiles").upload(o,s,{cacheControl:"3600",upsert:!0});if(h)throw console.error("Upload error details:",h),h;console.log("Upload successful:",u);const{data:{publicUrl:f}}=V.storage.from("profiles").getPublicUrl(o);return f}static async deleteAvatar(e){try{const r=new URL(e).pathname.match(/\/profiles\/(.+)$/);if(r&&r[1]){const a=r[1],{error:o}=await V.storage.from("profiles").remove([a]);o&&console.warn("Error deleting avatar file:",o)}}catch(s){console.warn("Error parsing avatar URL for deletion:",s)}}}function BI({currentAvatar:t,onAvatarChange:e,size:s="lg"}){const[r,a]=M.useState(!1),o=M.useRef(null),{user:u}=jt(),f={sm:{wrapper:"w-16 h-16",text:"text-xs"},md:{wrapper:"w-24 h-24",text:"text-sm"},lg:{wrapper:"w-32 h-32",text:"text-base"}}[s],m=_=>{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(_.type))return"Only JPEG, PNG, and WebP images are allowed";const N=5*1024*1024;return _.size>N?"Image must be smaller than 5MB":null},g=M.useCallback(async _=>{if(_.target.files&&_.target.files.length>0){const b=_.target.files[0],N=m(b);if(N){ae("error",N);return}await x(b)}},[]),x=async _=>{if(u)try{a(!0);const b=await UI.uploadAvatar(u.id,_);if(u.email){const{error:N}=await V.from("members").update({avatar_url:b}).eq("email",u.email);if(N)if(N.code==="PGRST116")await V.from("members").insert({email:u.email,avatar_url:b,created_by:u.id,membership_status:"active",membership_type:"standard"});else throw N}e(b),ae("success","Profile photo updated successfully!")}catch(b){console.error("Error uploading avatar:",b),ae("error","Failed to upload profile photo")}finally{a(!1)}},v=async()=>{if(u?.email)try{a(!0);const{error:_}=await V.from("members").update({avatar_url:null}).eq("email",u.email);if(_&&_.code!=="PGRST116")throw _;e(null),ae("success","Profile photo removed")}catch(_){console.error("Error removing avatar:",_),ae("error","Failed to remove profile photo")}finally{a(!1)}};return n.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[n.jsxs("div",{className:`relative ${f.wrapper} rounded-full overflow-hidden bg-gray-100 border-4 border-white shadow-lg group cursor-pointer`,children:[t?n.jsx("img",{src:t,alt:"Profile",className:"w-full h-full object-cover",onClick:()=>o.current?.click()}):n.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-blue-600 text-white",onClick:()=>o.current?.click(),children:n.jsx(sj,{className:"w-10 h-10"})}),n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:()=>o.current?.click(),children:n.jsx(sj,{className:"w-8 h-8 text-white"})}),!r&&n.jsx("div",{className:"absolute bottom-0 right-0 bg-blue-600 text-white rounded-full p-2 shadow-lg cursor-pointer hover:bg-blue-700 transition-colors",onClick:()=>o.current?.click(),children:n.jsx(sl,{className:"w-4 h-4"})}),r&&n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})]}),t&&!r&&n.jsx("button",{type:"button",onClick:v,className:"text-xs text-gray-500 hover:text-red-600 transition-colors",children:"Remove photo"}),n.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:g,className:"hidden"})]})}function zI(){const[t,e]=M.useState("profile"),[s,r]=M.useState(null),[a,o]=M.useState(0),{user:u}=jt(),h=Ns();M.useEffect(()=>{f()},[u]);const f=async()=>{if(u?.email)try{const{data:g}=await V.from("members").select("avatar_url").eq("email",u.email).single();g?.avatar_url&&r(g.avatar_url)}catch(g){console.error("Error loading avatar:",g)}},m=async g=>{r(g),o(x=>x+1)};return u?n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-8",children:"My Profile"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsxs(de,{className:"p-4",children:[n.jsxs("div",{className:"flex flex-col items-center mb-6",children:[n.jsx(BI,{currentAvatar:s,onAvatarChange:m,size:"lg"}),n.jsx("h2",{className:"font-semibold mt-4",children:u.email}),n.jsx("p",{className:"text-sm text-gray-500 capitalize",children:"Member"})]}),n.jsxs("nav",{className:"space-y-2",children:[n.jsxs("button",{onClick:()=>e("profile"),className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${t==="profile"?"bg-blue-50 text-blue-600":"hover:bg-gray-50"}`,children:[n.jsx(Ji,{className:"w-4 h-4"}),"Personal Information"]}),n.jsxs("button",{onClick:()=>e("password"),className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${t==="password"?"bg-blue-50 text-blue-600":"hover:bg-gray-50"}`,children:[n.jsx(uE,{className:"w-4 h-4"}),"Change Password"]}),n.jsxs("button",{onClick:()=>e("notifications"),className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${t==="notifications"?"bg-blue-50 text-blue-600":"hover:bg-gray-50"}`,children:[n.jsx(rE,{className:"w-4 h-4"}),"Notifications"]})]})]})}),n.jsx("div",{className:"lg:col-span-3",children:n.jsxs(de,{className:"p-6",children:[t==="profile"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Personal Information"}),n.jsx(PI,{},a)]}),t==="password"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Change Password"}),n.jsx($I,{})]}),t==="notifications"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Notification Preferences"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",className:"w-4 h-4",defaultChecked:!0}),n.jsx("span",{children:"Receive email newsletters"})]}),n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",className:"w-4 h-4",defaultChecked:!0}),n.jsx("span",{children:"Event notifications"})]}),n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",className:"w-4 h-4"}),n.jsx("span",{children:"CPD reminders"})]}),n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",className:"w-4 h-4",defaultChecked:!0}),n.jsx("span",{children:"Important system updates"})]})]}),n.jsx(re,{className:"mt-6",children:"Save Preferences"})]})]})})]})]}):(h("/login"),null)}const{CPDService:oj,CPD_CATEGORIES:cj}=ol,FI=Fd({category_id:If().min(1,"Please select a category"),activity_title:Wt().min(1,"Activity title is required"),description:Wt().optional(),provider:Wt().optional(),date_completed:Wt().min(1,"Date is required"),hours:If().min(0).max(99),minutes:If().min(0).max(59)});function HI({isOpen:t,onClose:e,onSuccess:s}){const[r,a]=M.useState(!1),[o,u]=M.useState(null),[h,f]=M.useState([]),{user:m,getEffectiveUserId:g}=jt(),x=g(),{register:v,handleSubmit:_,watch:b,reset:N,formState:{errors:w}}=Ud({resolver:zd(FI),defaultValues:{hours:0,minutes:0,date_completed:new Date().toISOString().split("T")[0]}}),E=b("category_id"),A=Number(b("hours"))||0,O=Number(b("minutes"))||0;M.useEffect(()=>{t&&F()},[t]);const F=async()=>{try{const S=await oj.getCategorySettings();f(S)}catch(S){console.error("Error loading category settings:",S),f([])}},C=()=>{const S=h.find(H=>H.category_id===Number(E)),k=cj.find(H=>H.id===Number(E)),z=S?.points_per_hour||k?.points_per_hour||1,R=isNaN(A)?0:A,D=isNaN(O)?0:O;return((R+D/60)*z).toFixed(2)},L=async S=>{if(x)try{a(!0);const{supabase:k}=await al(async()=>{const{supabase:P}=await Promise.resolve().then(()=>PM);return{supabase:P}},void 0),{data:z}=await k.from("members").select("email").eq("id",x).single(),R=z?.email||m?.email||"",D={...S,evidence:o||void 0};await oj.createActivity(D,x,R),N(),u(null),s(),e()}catch(k){console.error("Error submitting CPD activity:",k)}finally{a(!1)}},B=S=>{if(S.target.files&&S.target.files[0]){const k=S.target.files[0];if(k.size>10*1024*1024){alert("File size must be less than 10MB");return}u(k)}};return t?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Add New CPD Activity"}),n.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:n.jsx(fn,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:_(L),className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"category_id",children:"Category *"}),n.jsxs("select",{id:"category_id",...v("category_id",{valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"-- Select a Category --"}),cj.map(S=>n.jsx("option",{value:S.id,children:S.name},S.id))]}),w.category_id&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.category_id.message})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"activity_title",children:"Activity Title *"}),n.jsx(Ae,{id:"activity_title",...v("activity_title"),placeholder:"e.g., Annual TESOL Conference"}),w.activity_title&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.activity_title.message})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"description",children:"Description"}),n.jsx("textarea",{id:"description",...v("description"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Brief description of the activity..."})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"provider",children:"Provider/Organizer"}),n.jsx(Ae,{id:"provider",...v("provider"),placeholder:"e.g., English Australia"})]}),n.jsxs("div",{children:[n.jsxs(xe,{htmlFor:"date_completed",children:[n.jsx(js,{className:"w-4 h-4 inline mr-1"}),"Date Completed *"]}),n.jsx(Ae,{id:"date_completed",type:"date",...v("date_completed"),max:new Date().toISOString().split("T")[0]}),w.date_completed&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:w.date_completed.message})]}),n.jsxs("div",{children:[n.jsxs(xe,{children:[n.jsx(sa,{className:"w-4 h-4 inline mr-1"}),"Duration *"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx("div",{children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ae,{type:"number",...v("hours",{valueAsNumber:!0}),min:"0",max:"99",className:"w-20"}),n.jsx("span",{className:"text-sm text-gray-600",children:"hours"})]})}),n.jsx("div",{children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ae,{type:"number",...v("minutes",{valueAsNumber:!0}),min:"0",max:"59",className:"w-20"}),n.jsx("span",{className:"text-sm text-gray-600",children:"minutes"})]})})]})]}),E&&(A>0||O>0)&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Estimated Points:"}),n.jsx("span",{className:"text-2xl font-bold text-blue-600",children:C()})]})}),n.jsxs("div",{children:[n.jsxs(xe,{htmlFor:"evidence",children:[n.jsx(ra,{className:"w-4 h-4 inline mr-1"}),"Evidence (Optional)"]}),n.jsxs("div",{className:"mt-1",children:[n.jsxs("label",{className:"flex items-center justify-center w-full px-4 py-2 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer hover:border-blue-400 transition-colors",children:[n.jsx(sl,{className:"w-5 h-5 mr-2 text-gray-400"}),n.jsx("span",{className:"text-sm text-gray-600",children:o?o.name:"Click to upload certificate or evidence"}),n.jsx("input",{type:"file",onChange:B,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",className:"hidden"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Accepted formats: PDF, JPG, PNG, DOC, DOCX (Max 10MB)"})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[n.jsx(re,{type:"button",variant:"outline",onClick:e,disabled:r,className:"flex-1",children:"Cancel"}),n.jsx(re,{type:"submit",disabled:r,className:"flex-1",children:r?"Adding...":"Add Activity"})]})]})]})}):null}const gE=6048e5,VI=864e5,uj=Symbol.for("constructDateFrom");function rl(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&uj in t?t[uj](e):t instanceof Date?new t.constructor(e):new Date(e)}function Bn(t,e){return rl(e||t,t)}let GI={};function Pm(){return GI}function Cd(t,e){const s=Pm(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,a=Bn(t,e?.in),o=a.getDay(),u=(o<r?7:0)+o-r;return a.setDate(a.getDate()-u),a.setHours(0,0,0,0),a}function fm(t,e){return Cd(t,{...e,weekStartsOn:1})}function yE(t,e){const s=Bn(t,e?.in),r=s.getFullYear(),a=rl(s,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const o=fm(a),u=rl(s,0);u.setFullYear(r,0,4),u.setHours(0,0,0,0);const h=fm(u);return s.getTime()>=o.getTime()?r+1:s.getTime()>=h.getTime()?r:r-1}function dj(t){const e=Bn(t),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return s.setUTCFullYear(e.getFullYear()),+t-+s}function ZI(t,...e){const s=rl.bind(null,e.find(r=>typeof r=="object"));return e.map(s)}function hj(t,e){const s=Bn(t,e?.in);return s.setHours(0,0,0,0),s}function YI(t,e,s){const[r,a]=ZI(s?.in,t,e),o=hj(r),u=hj(a),h=+o-dj(o),f=+u-dj(u);return Math.round((h-f)/VI)}function KI(t,e){const s=yE(t,e),r=rl(t,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),fm(r)}function WI(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function QI(t){return!(!WI(t)&&typeof t!="number"||isNaN(+Bn(t)))}function XI(t,e){const s=Bn(t,e?.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}const JI={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},e7=(t,e,s)=>{let r;const a=JI[t];return typeof a=="string"?r=a:e===1?r=a.one:r=a.other.replace("{{count}}",e.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r};function f0(t){return(e={})=>{const s=e.width?String(e.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const t7={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},s7={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},r7={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},n7={date:f0({formats:t7,defaultWidth:"full"}),time:f0({formats:s7,defaultWidth:"full"}),dateTime:f0({formats:r7,defaultWidth:"full"})},i7={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},a7=(t,e,s,r)=>i7[t];function nd(t){return(e,s)=>{const r=s?.context?String(s.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const u=t.defaultFormattingWidth||t.defaultWidth,h=s?.width?String(s.width):u;a=t.formattingValues[h]||t.formattingValues[u]}else{const u=t.defaultWidth,h=s?.width?String(s.width):t.defaultWidth;a=t.values[h]||t.values[u]}const o=t.argumentCallback?t.argumentCallback(e):e;return a[o]}}const l7={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},o7={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},c7={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},u7={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},d7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},h7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},f7=(t,e)=>{const s=Number(t),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},m7={ordinalNumber:f7,era:nd({values:l7,defaultWidth:"wide"}),quarter:nd({values:o7,defaultWidth:"wide",argumentCallback:t=>t-1}),month:nd({values:c7,defaultWidth:"wide"}),day:nd({values:u7,defaultWidth:"wide"}),dayPeriod:nd({values:d7,defaultWidth:"wide",formattingValues:h7,defaultFormattingWidth:"wide"})};function id(t){return(e,s={})=>{const r=s.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(a);if(!o)return null;const u=o[0],h=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],f=Array.isArray(h)?g7(h,x=>x.test(u)):p7(h,x=>x.test(u));let m;m=t.valueCallback?t.valueCallback(f):f,m=s.valueCallback?s.valueCallback(m):m;const g=e.slice(u.length);return{value:m,rest:g}}}function p7(t,e){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return s}function g7(t,e){for(let s=0;s<t.length;s++)if(e(t[s]))return s}function y7(t){return(e,s={})=>{const r=e.match(t.matchPattern);if(!r)return null;const a=r[0],o=e.match(t.parsePattern);if(!o)return null;let u=t.valueCallback?t.valueCallback(o[0]):o[0];u=s.valueCallback?s.valueCallback(u):u;const h=e.slice(a.length);return{value:u,rest:h}}}const x7=/^(\d+)(th|st|nd|rd)?/i,b7=/\d+/i,v7={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},w7={any:[/^b/i,/^(a|c)/i]},_7={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},j7={any:[/1/i,/2/i,/3/i,/4/i]},N7={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},S7={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},E7={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},A7={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},C7={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},k7={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},T7={ordinalNumber:y7({matchPattern:x7,parsePattern:b7,valueCallback:t=>parseInt(t,10)}),era:id({matchPatterns:v7,defaultMatchWidth:"wide",parsePatterns:w7,defaultParseWidth:"any"}),quarter:id({matchPatterns:_7,defaultMatchWidth:"wide",parsePatterns:j7,defaultParseWidth:"any",valueCallback:t=>t+1}),month:id({matchPatterns:N7,defaultMatchWidth:"wide",parsePatterns:S7,defaultParseWidth:"any"}),day:id({matchPatterns:E7,defaultMatchWidth:"wide",parsePatterns:A7,defaultParseWidth:"any"}),dayPeriod:id({matchPatterns:C7,defaultMatchWidth:"any",parsePatterns:k7,defaultParseWidth:"any"})},O7={code:"en-US",formatDistance:e7,formatLong:n7,formatRelative:a7,localize:m7,match:T7,options:{weekStartsOn:0,firstWeekContainsDate:1}};function R7(t,e){const s=Bn(t,e?.in);return YI(s,XI(s))+1}function M7(t,e){const s=Bn(t,e?.in),r=+fm(s)-+KI(s);return Math.round(r/gE)+1}function xE(t,e){const s=Bn(t,e?.in),r=s.getFullYear(),a=Pm(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,u=rl(e?.in||t,0);u.setFullYear(r+1,0,o),u.setHours(0,0,0,0);const h=Cd(u,e),f=rl(e?.in||t,0);f.setFullYear(r,0,o),f.setHours(0,0,0,0);const m=Cd(f,e);return+s>=+h?r+1:+s>=+m?r:r-1}function D7(t,e){const s=Pm(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=xE(t,e),o=rl(e?.in||t,0);return o.setFullYear(a,0,r),o.setHours(0,0,0,0),Cd(o,e)}function L7(t,e){const s=Bn(t,e?.in),r=+Cd(s,e)-+D7(s,e);return Math.round(r/gE)+1}function Ot(t,e){const s=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return s+r}const Fa={y(t,e){const s=t.getFullYear(),r=s>0?s:1-s;return Ot(e==="yy"?r%100:r,e.length)},M(t,e){const s=t.getMonth();return e==="M"?String(s+1):Ot(s+1,2)},d(t,e){return Ot(t.getDate(),e.length)},a(t,e){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(t,e){return Ot(t.getHours()%12||12,e.length)},H(t,e){return Ot(t.getHours(),e.length)},m(t,e){return Ot(t.getMinutes(),e.length)},s(t,e){return Ot(t.getSeconds(),e.length)},S(t,e){const s=e.length,r=t.getMilliseconds(),a=Math.trunc(r*Math.pow(10,s-3));return Ot(a,e.length)}},yc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},fj={G:function(t,e,s){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})}},y:function(t,e,s){if(e==="yo"){const r=t.getFullYear(),a=r>0?r:1-r;return s.ordinalNumber(a,{unit:"year"})}return Fa.y(t,e)},Y:function(t,e,s,r){const a=xE(t,r),o=a>0?a:1-a;if(e==="YY"){const u=o%100;return Ot(u,2)}return e==="Yo"?s.ordinalNumber(o,{unit:"year"}):Ot(o,e.length)},R:function(t,e){const s=yE(t);return Ot(s,e.length)},u:function(t,e){const s=t.getFullYear();return Ot(s,e.length)},Q:function(t,e,s){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ot(r,2);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,s){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ot(r,2);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,s){const r=t.getMonth();switch(e){case"M":case"MM":return Fa.M(t,e);case"Mo":return s.ordinalNumber(r+1,{unit:"month"});case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,s){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ot(r+1,2);case"Lo":return s.ordinalNumber(r+1,{unit:"month"});case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,s,r){const a=L7(t,r);return e==="wo"?s.ordinalNumber(a,{unit:"week"}):Ot(a,e.length)},I:function(t,e,s){const r=M7(t);return e==="Io"?s.ordinalNumber(r,{unit:"week"}):Ot(r,e.length)},d:function(t,e,s){return e==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):Fa.d(t,e)},D:function(t,e,s){const r=R7(t);return e==="Do"?s.ordinalNumber(r,{unit:"dayOfYear"}):Ot(r,e.length)},E:function(t,e,s){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,s,r){const a=t.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Ot(o,2);case"eo":return s.ordinalNumber(o,{unit:"day"});case"eee":return s.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(a,{width:"short",context:"formatting"});case"eeee":default:return s.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,s,r){const a=t.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Ot(o,e.length);case"co":return s.ordinalNumber(o,{unit:"day"});case"ccc":return s.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(a,{width:"narrow",context:"standalone"});case"cccccc":return s.day(a,{width:"short",context:"standalone"});case"cccc":default:return s.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,s){const r=t.getDay(),a=r===0?7:r;switch(e){case"i":return String(a);case"ii":return Ot(a,e.length);case"io":return s.ordinalNumber(a,{unit:"day"});case"iii":return s.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(r,{width:"short",context:"formatting"});case"iiii":default:return s.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,s){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,s){const r=t.getHours();let a;switch(r===12?a=yc.noon:r===0?a=yc.midnight:a=r/12>=1?"pm":"am",e){case"b":case"bb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,s){const r=t.getHours();let a;switch(r>=17?a=yc.evening:r>=12?a=yc.afternoon:r>=4?a=yc.morning:a=yc.night,e){case"B":case"BB":case"BBB":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,s){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),s.ordinalNumber(r,{unit:"hour"})}return Fa.h(t,e)},H:function(t,e,s){return e==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):Fa.H(t,e)},K:function(t,e,s){const r=t.getHours()%12;return e==="Ko"?s.ordinalNumber(r,{unit:"hour"}):Ot(r,e.length)},k:function(t,e,s){let r=t.getHours();return r===0&&(r=24),e==="ko"?s.ordinalNumber(r,{unit:"hour"}):Ot(r,e.length)},m:function(t,e,s){return e==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):Fa.m(t,e)},s:function(t,e,s){return e==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):Fa.s(t,e)},S:function(t,e){return Fa.S(t,e)},X:function(t,e,s){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return pj(r);case"XXXX":case"XX":return Hl(r);case"XXXXX":case"XXX":default:return Hl(r,":")}},x:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"x":return pj(r);case"xxxx":case"xx":return Hl(r);case"xxxxx":case"xxx":default:return Hl(r,":")}},O:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+mj(r,":");case"OOOO":default:return"GMT"+Hl(r,":")}},z:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+mj(r,":");case"zzzz":default:return"GMT"+Hl(r,":")}},t:function(t,e,s){const r=Math.trunc(+t/1e3);return Ot(r,e.length)},T:function(t,e,s){return Ot(+t,e.length)}};function mj(t,e=""){const s=t>0?"-":"+",r=Math.abs(t),a=Math.trunc(r/60),o=r%60;return o===0?s+String(a):s+String(a)+e+Ot(o,2)}function pj(t,e){return t%60===0?(t>0?"-":"+")+Ot(Math.abs(t)/60,2):Hl(t,e)}function Hl(t,e=""){const s=t>0?"-":"+",r=Math.abs(t),a=Ot(Math.trunc(r/60),2),o=Ot(r%60,2);return s+a+e+o}const gj=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},bE=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},q7=(t,e)=>{const s=t.match(/(P+)(p+)?/)||[],r=s[1],a=s[2];if(!a)return gj(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",gj(r,e)).replace("{{time}}",bE(a,e))},P7={p:bE,P:q7},I7=/^D+$/,$7=/^Y+$/,U7=["D","DD","YY","YYYY"];function B7(t){return I7.test(t)}function z7(t){return $7.test(t)}function F7(t,e,s){const r=H7(t,e,s);if(console.warn(r),U7.includes(t))throw new RangeError(r)}function H7(t,e,s){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const V7=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,G7=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Z7=/^'([^]*?)'?$/,Y7=/''/g,K7=/[a-zA-Z]/;function Ft(t,e,s){const r=Pm(),a=r.locale??O7,o=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,u=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,h=Bn(t,s?.in);if(!QI(h))throw new RangeError("Invalid time value");let f=e.match(G7).map(g=>{const x=g[0];if(x==="p"||x==="P"){const v=P7[x];return v(g,a.formatLong)}return g}).join("").match(V7).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const x=g[0];if(x==="'")return{isToken:!1,value:W7(g)};if(fj[x])return{isToken:!0,value:g};if(x.match(K7))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:g}});a.localize.preprocessor&&(f=a.localize.preprocessor(h,f));const m={firstWeekContainsDate:o,weekStartsOn:u,locale:a};return f.map(g=>{if(!g.isToken)return g.value;const x=g.value;(z7(x)||B7(x))&&F7(x,e,String(t));const v=fj[x[0]];return v(h,x,a.localize,m)}).join("")}function W7(t){const e=t.match(Z7);return e?e[1].replace(Y7,"'"):t}const{CPDService:m0}=ol;function Q7(){const[t,e]=M.useState([]),[s,r]=M.useState(!0),[a,o]=M.useState(!1),[u,h]=M.useState(""),[f,m]=M.useState("all"),[g,x]=M.useState(new Date().getFullYear()),[v,_]=M.useState(0),[b,N]=M.useState(0),{user:w,getEffectiveUserId:E}=jt(),A=E(),O=20;M.useEffect(()=>{A&&(F(),C())},[A,g]);const F=async()=>{if(A)try{r(!0);const R=await m0.getUserActivities(A);e(R)}catch(R){console.error("Error loading activities:",R)}finally{r(!1)}},C=async()=>{if(A)try{const[R,D]=await Promise.all([m0.getTotalPoints(A),m0.getYearlyPoints(A,g)]);_(R),N(D)}catch(R){console.error("Error loading points:",R)}},L=()=>{F(),C()},B=t.filter(R=>{const D=R.activity_title.toLowerCase().includes(u.toLowerCase())||R.category_name.toLowerCase().includes(u.toLowerCase())||R.provider?.toLowerCase().includes(u.toLowerCase()),P=f==="all"||R.status===f,J=new Date(R.date_completed).getFullYear()===g;return D&&P&&J}),S=Math.min(b/O*100,100),k=Array.from({length:5},(R,D)=>new Date().getFullYear()-D),z=R=>{const D={approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${D[R]}`,children:R.charAt(0).toUpperCase()+R.slice(1)})};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"My CPD Activities"}),n.jsx("p",{className:"text-gray-600",children:"Track and manage your Continuing Professional Development"})]}),n.jsx(de,{className:"p-6 mb-8 bg-gradient-to-r from-blue-50 to-indigo-50",children:n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[g," Annual Progress"]}),n.jsx("select",{value:g,onChange:R=>x(Number(R.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:k.map(R=>n.jsx("option",{value:R,children:R},R))})]}),n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[n.jsxs("span",{children:[b.toFixed(1)," points earned"]}),n.jsxs("span",{children:["Goal: ",O," points"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full transition-all duration-500 flex items-center justify-end pr-2",style:{width:`${S}%`},children:S>15&&n.jsxs("span",{className:"text-xs text-white font-semibold",children:[S.toFixed(0),"%"]})})}),b>=O&&n.jsx("div",{className:"mt-3 text-center",children:n.jsxs("span",{className:"text-green-600 font-semibold flex items-center justify-center",children:[n.jsx(un,{className:"w-5 h-5 mr-2"}),"Congratulations! You've reached your annual CPD goal!"]})})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Points"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.toFixed(1)})]}),n.jsx(un,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-gray-600",children:[g," Points"]}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:b.toFixed(1)})]}),n.jsx(js,{className:"w-8 h-8 text-green-500"})]})}),n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Activities"}),n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:t.length})]}),n.jsx(ra,{className:"w-8 h-8 text-purple-500"})]})}),n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Goal Progress"}),n.jsxs("p",{className:"text-2xl font-bold text-indigo-600",children:[S.toFixed(0),"%"]})]}),n.jsx(un,{className:"w-8 h-8 text-indigo-500"})]})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[n.jsxs(re,{onClick:()=>o(!0),className:"md:w-auto",children:[n.jsx(Pc,{className:"w-4 h-4 mr-2"}),"Add New Activity"]}),n.jsxs("div",{className:"flex-1 flex gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(tl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx(Ae,{type:"text",placeholder:"Search activities...",value:u,onChange:R=>h(R.target.value),className:"pl-10"})]}),n.jsxs("select",{value:f,onChange:R=>m(R.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"approved",children:"Approved"}),n.jsx("option",{value:"rejected",children:"Rejected"})]})]})]}),n.jsx(de,{children:s?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading activities..."})]}):B.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(ra,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:u||f!=="all"?"No activities found":"No CPD activities yet"}),n.jsx("p",{className:"text-gray-600 mb-4",children:u||f!=="all"?"Try adjusting your search or filters":"Start tracking your professional development by adding your first activity"}),!u&&f==="all"&&n.jsxs(re,{onClick:()=>o(!0),children:[n.jsx(Pc,{className:"w-4 h-4 mr-2"}),"Add Your First Activity"]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activity"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Evidence"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(R=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ft(new Date(R.date_completed),"dd MMM yyyy")}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.activity_title}),R.provider&&n.jsx("div",{className:"text-sm text-gray-500",children:R.provider})]})}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:R.category_name}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[R.hours,"h ",R.minutes,"m"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"text-sm font-semibold text-blue-600",children:R.points.toFixed(1)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:z(R.status)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:R.evidence_url?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>{if(R.evidence_url.startsWith("data:")){const D=window.open();D&&(R.evidence_url.includes("image/")||R.evidence_url.includes("application/pdf")?(D.document.write(`
                                      <html>
                                        <head>
                                          <title>${R.evidence_filename||"Certificate"}</title>
                                          <style>
                                            body { 
                                              margin: 0; 
                                              display: flex; 
                                              justify-content: center; 
                                              align-items: center; 
                                              min-height: 100vh; 
                                              background: #f3f4f6; 
                                            }
                                            img { max-width: 90%; max-height: 90vh; }
                                            embed { width: 100vw; height: 100vh; }
                                          </style>
                                        </head>
                                        <body>
                                          ${R.evidence_url.includes("application/pdf")?`<embed src="${R.evidence_url}" type="application/pdf" />`:`<img src="${R.evidence_url}" alt="${R.evidence_filename||"Certificate"}" />`}
                                        </body>
                                      </html>
                                    `),D.document.close()):D.location.href=R.evidence_url)}else window.open(R.evidence_url,"_blank")},className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",title:"View certificate",children:[n.jsx(Ln,{className:"w-4 h-4"}),"View"]}),R.evidence_url.startsWith("data:")&&n.jsx("a",{href:R.evidence_url,download:R.evidence_filename||"certificate",className:"text-green-600 hover:text-green-800 flex items-center gap-1",title:"Download certificate",children:n.jsx(qc,{className:"w-4 h-4"})})]}):n.jsx("span",{className:"text-gray-400",children:"-"})})]},R.id))})]})})}),n.jsx(HI,{isOpen:a,onClose:()=>o(!1),onSuccess:L})]})}const{CPDService:p0}=ol;function X7(){const[t,e]=M.useState([]),[s,r]=M.useState(!0),[a,o]=M.useState(null),[u,h]=M.useState(""),[f,m]=M.useState(!1),{user:g}=jt();M.useEffect(()=>{x()},[]);const x=async()=>{try{r(!0);const w=await p0.getAllPendingActivities();e(w)}catch(w){console.error("Error loading pending activities:",w)}finally{r(!1)}},v=async w=>{if(g)try{await p0.approveActivity(w,g.id),await x()}catch(E){console.error("Error approving activity:",E)}},_=async()=>{if(!(!g||!a))try{await p0.rejectActivity(a.id,g.id,u),await x(),m(!1),o(null),h("")}catch(w){console.error("Error rejecting activity:",w)}},b=w=>{o(w),m(!0)},N=()=>{m(!1),o(null),h("")};return s?n.jsx("div",{className:"flex justify-center items-center min-h-96",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Review CPD Submissions"}),n.jsx("p",{className:"text-gray-600",children:"Review and approve or reject pending CPD activity submissions from members."})]}),t.length===0?n.jsxs(de,{className:"p-8 text-center",children:[n.jsx(sa,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No pending submissions"}),n.jsx("p",{className:"text-gray-600",children:"All CPD submissions have been reviewed. Check back later for new submissions."})]}):n.jsx("div",{className:"space-y-6",children:t.map(w=>n.jsxs(de,{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ji,{className:"h-5 w-5 text-blue-600"}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[w.members?.first_name," ",w.members?.last_name]}),n.jsx("p",{className:"text-sm text-gray-600",children:w.members?.email})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sa,{className:"h-4 w-4 text-orange-500"}),n.jsx("span",{className:"text-sm text-orange-600 font-medium",children:"Pending Review"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Activity Title"}),n.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:w.activity_title})]}),n.jsxs("div",{children:[n.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Category"}),n.jsx("p",{className:"text-sm text-gray-900",children:w.category_name})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{children:[n.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Duration"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[w.hours,"h ",w.minutes,"m"]})]}),n.jsxs("div",{children:[n.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Points"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(un,{className:"h-4 w-4 text-yellow-500"}),n.jsx("span",{className:"text-sm font-semibold text-gray-900",children:w.points})]})]})]}),n.jsxs("div",{children:[n.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Date Completed"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(js,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm text-gray-900",children:Ft(new Date(w.date_completed),"MMM dd, yyyy")})]})]}),n.jsxs("div",{children:[n.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Provider"}),n.jsx("p",{className:"text-sm text-gray-900",children:w.provider||"N/A"})]}),n.jsxs("div",{children:[n.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Submitted"}),n.jsx("p",{className:"text-sm text-gray-900",children:Ft(new Date(w.created_at),"MMM dd, yyyy")})]})]}),w.description&&n.jsxs("div",{className:"mb-4",children:[n.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Description"}),n.jsx("p",{className:"text-sm text-gray-900 mt-1",children:w.description})]}),w.evidence_url&&n.jsxs("div",{className:"mb-6",children:[n.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Evidence"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(ra,{className:"h-4 w-4 text-blue-600"}),n.jsx("a",{href:w.evidence_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm underline",children:w.evidence_filename||"View Evidence"})]})]}),n.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[n.jsxs(re,{onClick:()=>v(w.id),className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 text-white",children:[n.jsx(fs,{className:"h-4 w-4"}),n.jsx("span",{children:"Approve"})]}),n.jsxs(re,{onClick:()=>b(w),variant:"outline",className:"flex items-center space-x-2 text-red-600 border-red-600 hover:bg-red-50",children:[n.jsx(Lc,{className:"h-4 w-4"}),n.jsx("span",{children:"Reject"})]})]})]},w.id))}),f&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reject CPD Submission"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please provide a reason for rejecting this submission. This will be visible to the member."}),n.jsxs("div",{className:"mb-6",children:[n.jsx(xe,{htmlFor:"rejectReason",className:"text-sm font-medium text-gray-700",children:"Rejection Reason"}),n.jsx("textarea",{id:"rejectReason",value:u,onChange:w=>h(w.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",rows:4,placeholder:"Explain why this submission is being rejected...",required:!0})]}),n.jsxs("div",{className:"flex space-x-3 justify-end",children:[n.jsx(re,{onClick:N,variant:"outline",className:"text-gray-600",children:"Cancel"}),n.jsx(re,{onClick:_,className:"bg-red-600 hover:bg-red-700 text-white",disabled:!u.trim(),children:"Reject Submission"})]})]})})]})}const{CPDService:Nf}=ol;function J7(){const[t,e]=M.useState(null),[s,r]=M.useState([]),[a,o]=M.useState(!0),[u,h]=M.useState(!1),[f,m]=M.useState({}),{user:g}=jt();M.useEffect(()=>{x()},[]);const x=async()=>{try{o(!0);const[w,E]=await Promise.all([Nf.getCPDSettings(),Nf.getCategorySettings()]);e(w),r(E)}catch(w){console.error("Error loading settings:",w)}finally{o(!1)}},v=async()=>{if(!(!t||!g))try{h(!0);const w=await Nf.updateCPDSettings({auto_approval_enabled:!t.auto_approval_enabled});e(w)}catch(w){console.error("Error updating auto approval:",w)}finally{h(!1)}},_=(w,E)=>{m(A=>({...A,[w]:E}))},b=async w=>{if(!g)return;const E=f[w];if(!(E===void 0||E<0))try{h(!0),await Nf.updateCategorySettings(w,{points_per_hour:E}),r(A=>A.map(O=>O.category_id===w?{...O,points_per_hour:E}:O)),m(A=>{const O={...A};return delete O[w],O})}catch(A){console.error("Error saving category points:",A)}finally{h(!1)}},N=w=>{m(E=>{const A={...E};return delete A[w],A})};return a?n.jsx("div",{className:"flex justify-center items-center min-h-96",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center gap-3",children:[n.jsx(eo,{className:"h-8 w-8 text-blue-600"}),"CPD System Configuration"]}),n.jsx("p",{className:"text-gray-600",children:"Configure CPD activity settings, points per hour by category, and approval workflow."})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(de,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(ta,{className:"h-6 w-6 text-orange-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Global Settings"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Automatic Approval"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"When enabled, all CPD activities submitted by members will be automatically approved without requiring admin review."})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:`text-sm font-medium ${t?.auto_approval_enabled?"text-green-600":"text-red-600"}`,children:t?.auto_approval_enabled?"Enabled":"Disabled"}),n.jsx(re,{onClick:v,disabled:u,className:`${t?.auto_approval_enabled?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"} text-white`,children:t?.auto_approval_enabled?n.jsxs(n.Fragment,{children:[n.jsx(Lc,{className:"h-4 w-4 mr-2"}),"Disable"]}):n.jsxs(n.Fragment,{children:[n.jsx(fs,{className:"h-4 w-4 mr-2"}),"Enable"]})})]})]}),t?.auto_approval_enabled&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(fs,{className:"h-5 w-5 text-green-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-green-800",children:"Auto-Approval Active"}),n.jsx("p",{className:"text-sm text-green-700 mt-1",children:"All new CPD submissions will be automatically approved and members will receive points immediately. You can still access the Review page to see all activities, but no manual approval is required."})]})]})})]})]}),n.jsxs(de,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(un,{className:"h-6 w-6 text-yellow-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Points per Hour by Category"})]}),n.jsx("div",{className:"space-y-3",children:s.map(w=>n.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:w.category_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Category ID: ",w.category_id]})]}),n.jsx("div",{className:"flex items-center space-x-3",children:f[w.category_id]!==void 0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ae,{type:"number",step:"0.1",min:"0",value:f[w.category_id],onChange:E=>_(w.category_id,parseFloat(E.target.value)||0),className:"w-20 text-center"}),n.jsx("span",{className:"text-sm text-gray-600",children:"pts/hr"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(re,{size:"sm",onClick:()=>b(w.category_id),disabled:u,className:"bg-green-600 hover:bg-green-700 text-white",children:n.jsx(Qd,{className:"h-3 w-3"})}),n.jsx(re,{size:"sm",variant:"outline",onClick:()=>N(w.category_id),disabled:u,children:"Cancel"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-lg font-bold text-blue-600",children:w.points_per_hour}),n.jsx("br",{}),n.jsx("span",{className:"text-xs text-gray-500",children:"points/hour"})]}),n.jsx(re,{size:"sm",variant:"outline",onClick:()=>m(E=>({...E,[w.category_id]:w.points_per_hour})),className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:"Edit"})]})})]},w.category_id))}),n.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(ta,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Points Calculation"}),n.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Points are calculated automatically when members submit activities. The formula is: ",n.jsx("strong",{children:"(Hours + Minutes/60)  Points per Hour"}),". Changes to points per hour only apply to new submissions."]})]})]})})]}),n.jsxs(de,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Current Configuration Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t?.auto_approval_enabled?n.jsx(fs,{className:"h-5 w-5 text-green-600"}):n.jsx(Lc,{className:"h-5 w-5 text-red-600"}),n.jsx("span",{className:"font-medium",children:"Auto-Approval"})]}),n.jsx("p",{className:"text-sm text-gray-600",children:t?.auto_approval_enabled?"Activities are automatically approved":"Activities require manual review"})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(un,{className:"h-5 w-5 text-yellow-600"}),n.jsx("span",{className:"font-medium",children:"Categories"})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[s.length," active categories configured"]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(eo,{className:"h-5 w-5 text-blue-600"}),n.jsx("span",{className:"font-medium",children:"Points Range"})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[Math.min(...s.map(w=>w.points_per_hour))," - ",Math.max(...s.map(w=>w.points_per_hour))," pts/hour"]})]})]})]})]})]})}const{CPDService:ad}=ol;function e9(){const[t,e]=M.useState([]),[s,r]=M.useState([]),[a,o]=M.useState(!0),[u,h]=M.useState(""),[f,m]=M.useState("all"),[g,x]=M.useState(null),[v,_]=M.useState(!1),[b,N]=M.useState({}),[w,E]=M.useState(!1),[A,O]=M.useState(null),{user:F,getEffectiveRoles:C}=jt();M.useEffect(()=>{L()},[]),M.useEffect(()=>{B()},[t,u,f]);const L=async()=>{try{o(!0);const q=await ad.getAllActivities();e(q)}catch(q){console.error("Error loading activities:",q),ae("error","Failed to load CPD activities")}finally{o(!1)}},B=()=>{let q=[...t];if(f!=="all"&&(q=q.filter(Z=>Z.status===f)),u){const Z=u.toLowerCase();q=q.filter(Q=>Q.activity_title.toLowerCase().includes(Z)||Q.members?.first_name?.toLowerCase().includes(Z)||Q.members?.last_name?.toLowerCase().includes(Z)||Q.members?.email?.toLowerCase().includes(Z))}r(q)},S=q=>{x(q),N({activity_title:q.activity_title,hours:q.hours,minutes:q.minutes,points:q.points,status:q.status}),_(!0)},k=async()=>{if(g)try{await ad.updateActivity(g.id,b),ae("success","CPD activity updated successfully"),_(!1),await L()}catch(q){console.error("Error updating activity:",q),ae("error","Failed to update activity")}},z=async q=>{if((await Et.fire({title:"Delete CPD Activity?",html:`
        <p>Are you sure you want to delete this activity?</p>
        <p class="mt-2"><strong>${q.activity_title}</strong></p>
        <p class="text-sm text-gray-600">Member: ${q.members?.first_name} ${q.members?.last_name}</p>
        <p class="text-sm text-gray-600">Points: ${q.points}</p>
      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"})).isConfirmed)try{await ad.deleteActivity(q.id),ae("success","CPD activity deleted successfully"),await L()}catch(Q){console.error("Error deleting activity:",Q),ae("error","Failed to delete activity")}},R=async q=>{if(F)try{await ad.approveActivity(q,F.id),ae("success","CPD activity approved"),await L()}catch(Z){console.error("Error approving activity:",Z),ae("error","Failed to approve activity")}},D=async q=>{const{value:Z}=await Et.fire({title:"Reject CPD Activity",input:"textarea",inputLabel:"Rejection reason",inputPlaceholder:"Enter the reason for rejection...",inputAttributes:{"aria-label":"Rejection reason"},showCancelButton:!0,confirmButtonText:"Reject",confirmButtonColor:"#dc2626",cancelButtonText:"Cancel"});if(Z&&F)try{await ad.rejectActivity(q.id,F.id,Z),ae("success","CPD activity rejected"),await L()}catch(Q){console.error("Error rejecting activity:",Q),ae("error","Failed to reject activity")}},P=q=>{q.evidence_url||q.evidence_filename?(O({url:q.evidence_url,filename:q.evidence_filename}),E(!0)):ae("info","No evidence uploaded for this activity")},H=q=>{switch(q){case"approved":return n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(fs,{className:"w-3 h-3"})," Approved"]});case"rejected":return n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[n.jsx(Lc,{className:"w-3 h-3"})," Rejected"]});default:return n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[n.jsx(sa,{className:"w-3 h-3"})," Pending"]})}},J=()=>{const q=[["Member Name","Email","Activity","Date","Hours","Points","Status","Category"],...s.map(U=>[`${U.members?.first_name||""} ${U.members?.last_name||""}`,U.members?.email||"",U.activity_title,Ft(new Date(U.date_completed),"yyyy-MM-dd"),`${U.hours}h ${U.minutes}m`,U.points.toString(),U.status,U.category_name||""])].map(U=>U.map(X=>`"${X}"`).join(",")).join(`
`),Z=new Blob([q],{type:"text/csv"}),Q=URL.createObjectURL(Z),ue=document.createElement("a");ue.href=Q,ue.download=`cpd-activities-${Ft(new Date,"yyyy-MM-dd")}.csv`,ue.click()};return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"CPD Management"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Manage all CPD activities across the platform"})]}),n.jsxs(re,{onClick:J,variant:"outline",children:[n.jsx(qc,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs(de,{className:"p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Total Activities"}),n.jsx("div",{className:"text-2xl font-bold",children:t.length})]}),n.jsxs(de,{className:"p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Pending"}),n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.filter(q=>q.status==="pending").length})]}),n.jsxs(de,{className:"p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Approved"}),n.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(q=>q.status==="approved").length})]}),n.jsxs(de,{className:"p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Total Points"}),n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.reduce((q,Z)=>q+(Z.points||0),0)})]})]}),n.jsxs(de,{children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(tl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx(Ae,{placeholder:"Search by title, member name or email...",value:u,onChange:q=>h(q.target.value),className:"pl-10"})]})}),n.jsx("div",{className:"w-48",children:n.jsxs("select",{value:f,onChange:q=>m(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"approved",children:"Approved"}),n.jsx("option",{value:"rejected",children:"Rejected"})]})})]})}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(q=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{children:q.members?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[q.members.first_name," ",q.members.last_name]}),n.jsx("div",{className:"text-xs text-gray-500",children:q.members.email})]}):n.jsx("div",{className:"text-sm text-gray-400 italic",children:"Member data not available"})})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:q.activity_title}),n.jsx("div",{className:"text-xs text-gray-500",children:q.category_name})]})}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:Ft(new Date(q.date_completed),"dd/MM/yyyy")}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[q.hours,"h ",q.minutes,"m"]}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-sm font-semibold text-blue-600",children:q.points})}),n.jsx("td",{className:"px-4 py-3",children:H(q.status)}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(re,{size:"sm",variant:"ghost",onClick:()=>P(q),className:q.evidence_url?"text-blue-600 hover:text-blue-700":"text-gray-400",title:q.evidence_url?"View evidence":"No evidence uploaded",children:n.jsx(ra,{className:"w-4 h-4"})}),q.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx(re,{size:"sm",variant:"ghost",onClick:()=>R(q.id),className:"text-green-600 hover:text-green-700",children:n.jsx(fs,{className:"w-4 h-4"})}),n.jsx(re,{size:"sm",variant:"ghost",onClick:()=>D(q),className:"text-red-600 hover:text-red-700",children:n.jsx(Lc,{className:"w-4 h-4"})})]}),n.jsx(re,{size:"sm",variant:"ghost",onClick:()=>S(q),children:n.jsx(hm,{className:"w-4 h-4"})}),n.jsx(re,{size:"sm",variant:"ghost",onClick:()=>z(q),className:"text-red-600 hover:text-red-700",children:n.jsx(Qc,{className:"w-4 h-4"})})]})})]},q.id))})]}),s.length===0&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No CPD activities found"})})]})]}),v&&g&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsx(de,{className:"w-full max-w-lg mx-4",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit CPD Activity"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(xe,{children:"Activity Title"}),n.jsx(Ae,{value:b.activity_title||"",onChange:q=>N({...b,activity_title:q.target.value})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{children:"Hours"}),n.jsx(Ae,{type:"number",value:b.hours||0,onChange:q=>N({...b,hours:parseInt(q.target.value)||0})})]}),n.jsxs("div",{children:[n.jsx(xe,{children:"Minutes"}),n.jsx(Ae,{type:"number",value:b.minutes||0,onChange:q=>N({...b,minutes:parseInt(q.target.value)||0})})]})]}),n.jsxs("div",{children:[n.jsx(xe,{children:"Points"}),n.jsx(Ae,{type:"number",step:"0.5",value:b.points||0,onChange:q=>N({...b,points:parseFloat(q.target.value)||0})})]}),n.jsxs("div",{children:[n.jsx(xe,{children:"Status"}),n.jsxs("select",{value:b.status||"pending",onChange:q=>N({...b,status:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"approved",children:"Approved"}),n.jsx("option",{value:"rejected",children:"Rejected"})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[n.jsx(re,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),n.jsx(re,{onClick:k,children:"Save Changes"})]})]})})}),w&&A&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx(de,{className:"w-full max-w-4xl max-h-[90vh] overflow-auto",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Evidence Document"}),n.jsx(re,{size:"sm",variant:"ghost",onClick:()=>{E(!1),O(null)},children:n.jsx(fn,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[A.filename&&n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["File: ",n.jsx("span",{className:"font-medium",children:A.filename})]}),A.url?n.jsxs("div",{className:"space-y-4",children:[A.url.startsWith("data:image")?n.jsx("img",{src:A.url,alt:"Evidence",className:"max-w-full h-auto rounded-lg"}):A.url.startsWith("data:application/pdf")?n.jsx("iframe",{src:A.url,className:"w-full h-[600px] rounded-lg",title:"Evidence PDF"}):A.url.startsWith("http")?n.jsxs("div",{children:[n.jsx("a",{href:A.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Open evidence in new tab"}),n.jsx("iframe",{src:A.url,className:"w-full h-[600px] rounded-lg mt-4",title:"Evidence Document"})]}):n.jsxs("div",{className:"text-gray-600",children:[n.jsx("p",{children:"Evidence format not supported for preview."}),A.url.substring(0,100),"..."]}),A.url.startsWith("data:")&&n.jsx("div",{className:"mt-4",children:n.jsxs(re,{onClick:()=>{const q=document.createElement("a");q.href=A.url,q.download=A.filename||"evidence",q.click()},children:[n.jsx(qc,{className:"w-4 h-4 mr-2"}),"Download Evidence"]})})]}):n.jsx("p",{className:"text-gray-500",children:"No evidence file available"})]}),n.jsx("div",{className:"flex justify-end mt-6",children:n.jsx(re,{variant:"outline",onClick:()=>{E(!1),O(null)},children:"Close"})})]})})})]})})}function t9(){const t=Ns(),{user:e}=jt(),{hasPermission:s}=Tm(),r=s("ACCESS_ADMIN_DASHBOARD"),[a,o]=M.useState([]),[u,h]=M.useState([]),[f,m]=M.useState(!0),[g,x]=M.useState(""),[v,_]=M.useState("all"),[b,N]=M.useState("all");M.useEffect(()=>{w()},[]);const w=async()=>{try{m(!0);const[L,B]=await Promise.all([Xt.getPublicEvents(),Xt.getCategories()]);o(L),h(B)}catch(L){console.error("Error loading events:",L)}finally{m(!1)}},E=a.filter(L=>!(g&&!L.title.toLowerCase().includes(g.toLowerCase())&&!L.description?.toLowerCase().includes(g.toLowerCase())||v!=="all"&&L.category_id!==v||b!=="all"&&L.location_type!==b)),A=E.filter(L=>new Date(L.start_date)>=new Date),O=E.filter(L=>new Date(L.start_date)<new Date),F=L=>{const S=!!e?L.member_price_cents:L.non_member_price_cents;return S===0?"Free":Xt.formatPrice(S)},C=L=>{const B=new Date,S=new Date(L.start_date),k=L.registration_end_date?new Date(L.registration_end_date):S;if(B>k)return{text:"Registration Closed",color:"text-gray-500"};if(L.capacity>0){const z=L.capacity;if(z===0)return{text:"Sold Out",color:"text-red-500"};if(z<10)return{text:`${z} spots left`,color:"text-orange-500"}}return{text:"Open",color:"text-green-500"}};return f?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Events"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Discover and register for upcoming events"})]}),r&&n.jsx("div",{className:"flex gap-2",children:n.jsxs(re,{onClick:()=>t("/admin/events"),children:[n.jsx(eo,{className:"h-4 w-4 mr-2"}),"Manage Events"]})})]}),n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(Ae,{placeholder:"Search events...",value:g,onChange:L=>x(L.target.value),className:"md:col-span-2"}),n.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:v,onChange:L=>_(L.target.value),children:[n.jsx("option",{value:"all",children:"All Categories"}),u.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}),n.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:b,onChange:L=>N(L.target.value),children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"physical",children:"In-Person"}),n.jsx("option",{value:"virtual",children:"Virtual"}),n.jsx("option",{value:"hybrid",children:"Hybrid"})]})]})}),A.length>0&&n.jsxs("div",{className:"mt-8",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Upcoming Events"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map(L=>{const B=C(L);return n.jsxs(de,{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>t(`/events/${L.slug}`),children:[L.image_url?n.jsx("img",{src:L.image_url,alt:L.title,className:"w-full h-48 object-cover",onError:S=>{const k=S.target;k.onerror=null,k.src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800&h=400&fit=crop"}}):n.jsx("img",{src:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800&h=400&fit=crop",alt:L.title,className:"w-full h-48 object-cover"}),n.jsxs("div",{className:"p-6",children:[L.category&&n.jsx("span",{className:"inline-block px-2 py-1 text-xs font-semibold rounded-full mb-2",style:{backgroundColor:`${L.category.color}20`,color:L.category.color},children:L.category.name}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:L.title}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[n.jsx(js,{className:"h-4 w-4 mr-2"}),Ft(new Date(L.start_date),"MMM d, yyyy"),n.jsx(sa,{className:"h-4 w-4 ml-3 mr-2"}),Ft(new Date(L.start_date),"h:mm a")]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-3",children:[n.jsx(fi,{className:"h-4 w-4 mr-2"}),L.location_type==="virtual"?"Online Event":L.venue_name||L.city||"Location TBA"]}),n.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(lE,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"font-semibold",children:F(L)})]}),L.cpd_points>0&&n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(un,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:[L.cpd_points," CPD"]})]})]}),n.jsx("span",{className:`text-xs font-semibold ${B.color}`,children:B.text})]})]})]},L.id)})})]}),O.length>0&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Past Events"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 opacity-75",children:O.map(L=>n.jsx(de,{className:"overflow-hidden",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:L.title}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[n.jsx(js,{className:"h-4 w-4 mr-2"}),Ft(new Date(L.start_date),"MMM d, yyyy")]}),n.jsx("span",{className:"text-xs text-gray-500",children:"Event Completed"})]})},L.id))})]}),E.length===0&&n.jsxs(de,{className:"p-12 text-center",children:[n.jsx(js,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No events found"}),n.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters or check back later for new events."})]})]})}const yj={BASE_URL:"http://localhost:3001",API_PREFIX:"/api/v1"},zl=t=>`${yj.BASE_URL}${yj.API_PREFIX}${t}`;class Ki{static async checkDatabaseAvailable(){try{const{error:e}=await V.from("smtp_settings").select("id").limit(1);if(!e)return!0;const s=e.message?.toLowerCase()||"";return!(s.includes("relation")||s.includes("does not exist")||s.includes("not found"))}catch{return!1}}static async getSMTPSettings(){try{const{data:{session:e}}=await V.auth.getSession();if(!e)return{data:null,isLocal:!1};const r=await(await fetch(zl("/email/settings"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`}})).json();if(r.success)return{data:r.data,isLocal:r.isLocal||!1}}catch(e){console.error("Error getting SMTP settings:",e)}return{data:null,isLocal:!1}}static async saveSMTPSettings(e){try{const{data:{session:s}}=await V.auth.getSession();if(!s)return{success:!1,message:"You must be logged in to save SMTP settings"};const a=await(await fetch(zl("/email/settings"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify(e)})).json();return{success:a.success,message:a.message||(a.success?"SMTP settings saved successfully":"Failed to save SMTP settings")}}catch(s){return{success:!1,message:s.message||"Failed to save SMTP settings"}}}static async testSMTPConnection(){try{const{data:{session:e}}=await V.auth.getSession();if(!e)return{success:!1,message:"You must be logged in to test SMTP connection"};const r=await(await fetch(zl("/email/test-connection"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`}})).json();return{success:r.success,message:r.message}}catch(e){return{success:!1,message:e.message||"Failed to test SMTP connection"}}}static async sendTestEmail(e){try{const{data:{session:s}}=await V.auth.getSession();if(!s)return{success:!1,message:"You must be logged in to send test emails"};const a=await(await fetch(zl("/email/test"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify({to:e})})).json();return{success:a.success,message:a.message||(a.success?`Test email sent to ${e}`:"Failed to send test email")}}catch(s){return console.error("Error sending test email:",s),{success:!1,message:s.message||"Failed to send test email"}}}static async sendEmail(e){try{const{data:{session:s}}=await V.auth.getSession();if(!s)return{success:!1,message:"You must be logged in to send emails"};const a=await(await fetch(zl("/email/send"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify(e)})).json();return{success:a.success,message:a.message}}catch(s){return console.error("Error sending email:",s),{success:!1,message:s.message||"Failed to send email"}}}static async sendEventRegistrationConfirmation(e){try{const{data:{session:s}}=await V.auth.getSession();if(!s)return{success:!1,message:"You must be logged in to send emails"};const a=await(await fetch(zl("/email/event-registration"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify(e)})).json();return{success:a.success,message:a.message}}catch(s){return console.error("Error sending event registration email:",s),{success:!1,message:s.message||"Failed to send event registration email"}}}static async sendCPDNotification(e){try{const{data:{session:s}}=await V.auth.getSession();if(!s)return{success:!1,message:"You must be logged in to send emails"};const a=await(await fetch(zl("/email/cpd-notification"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify(e)})).json();return{success:a.success,message:a.message}}catch(s){return console.error("Error sending CPD notification:",s),{success:!1,message:s.message||"Failed to send CPD notification"}}}static async getEmailTemplates(){try{const{data:e,error:s}=await V.from("email_templates").select("*").order("category",{ascending:!0}).order("name",{ascending:!0});if(s)throw s;return e||[]}catch(e){return console.error("Error fetching email templates:",e),[]}}static async saveEmailTemplate(e){try{if(e.id){const{error:s}=await V.from("email_templates").update({...e,updated_at:new Date().toISOString()}).eq("id",e.id);if(s)throw s}else{const{error:s}=await V.from("email_templates").insert({...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(s)throw s}return{success:!0,message:"Email template saved successfully"}}catch(s){return{success:!1,message:s.message||"Failed to save email template"}}}static async deleteEmailTemplate(e){try{const{error:s}=await V.from("email_templates").delete().eq("id",e);if(s)throw s;return{success:!0,message:"Email template deleted successfully"}}catch(s){return{success:!1,message:s.message||"Failed to delete email template"}}}static async getEmailLogs(e=100){try{const{data:s,error:r}=await V.from("email_logs").select("*").order("created_at",{ascending:!1}).limit(e);if(r)throw r;return s||[]}catch(s){return console.error("Error fetching email logs:",s),[]}}}const s9=ol;class di{static async registerForEvent(e,s,r){try{const{data:a,error:o}=await V.from("event_registrations").select("*").eq("event_id",e).eq("user_id",s).single();if(a)throw new Error("You are already registered for this event");const u=await Xt.getEventById(e);if(!u)throw new Error("Event not found");if((await this.getEventRegistrations(e)).length>=u.capacity)throw new Error("Event is full");let m=!1?u.member_price_cents:u.non_member_price_cents;u.early_bird_price_cents&&u.early_bird_end_date&&new Date<new Date(u.early_bird_end_date)&&(m=u.early_bird_price_cents);const{data:g,error:x}=await V.from("event_registrations").insert({event_id:e,user_id:s,status:"registered",registration_type:"participant",payment_status:m===0?"waived":"pending",payment_amount:m,...r}).select().single();if(x)throw x;try{const{data:{user:v}}=await V.auth.getUser(),_=v?.email||"",b=v?.user_metadata?.full_name||v?.email?.split("@")[0]||"Member",N=Ft(new Date(u.start_date),"EEEE, MMMM d, yyyy"),w=Ft(new Date(u.start_date),"h:mm a"),E=u.location_type==="virtual"?"Online Event":u.venue_name||"TBA";await Ki.sendEventRegistrationConfirmation({to:_,userName:b,eventTitle:u.title,eventDate:N,eventTime:w,eventLocation:E,eventLink:`${window.location.origin}/events/${u.slug}`,registrationId:g.id}),console.log("Registration confirmation email sent to:",_)}catch(v){console.error("Failed to send confirmation email:",v)}return console.log(" ABOUT TO CALL scheduleConfigurableReminders"),await this.scheduleConfigurableReminders(g.id,e,s,u),console.log(" FINISHED CALLING scheduleConfigurableReminders"),g}catch(a){throw console.error("Error registering for event:",a),new Error(a.message||"Failed to register for event")}}static async cancelRegistration(e){try{const{error:s}=await V.from("event_registrations").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",e);if(s)throw s}catch(s){throw console.error("Error cancelling registration:",s),new Error(s.message||"Failed to cancel registration")}}static async checkInUser(e,s="manual"){try{const r={status:"attended",attended:!0,attendance_date:new Date().toISOString()};s&&(r.check_in_date=new Date().toISOString(),r.check_in_method=s,r.checked_in=!0),"updated_at"in r&&(r.updated_at=new Date().toISOString());const{error:a}=await V.from("event_registrations").update(r).eq("id",e);if(a){console.error("Check-in error:",a);const{error:o}=await V.from("event_registrations").update({status:"attended",attended:!0,attendance_date:new Date().toISOString()}).eq("id",e);if(o)throw o}try{const{data:o}=await V.from("event_registrations").select("*").eq("id",e).single();if(o&&!o.cpd_activity_created){const u=await Xt.getEventById(o.event_id);if(u&&u.cpd_points>0){const{data:{user:h}}=await V.auth.getUser(),f=h?.email||"",m=h?.user_metadata?.full_name||h?.email?.split("@")[0]||"Member",g=new Date(u.start_date),v=new Date(u.end_date).getTime()-g.getTime(),_=Math.floor(v/(1e3*60*60)),b=Math.floor(v%(1e3*60*60)/(1e3*60)),N=await s9.createActivity({category_id:14,activity_title:`Event: ${u.title}`,description:`Attended ${u.title} on ${Ft(g,"MMMM d, yyyy")}`,provider:"English Australia",date_completed:Ft(new Date,"yyyy-MM-dd"),hours:_,minutes:b},o.user_id,f);await V.from("event_registrations").update({cpd_activity_created:!0,cpd_activity_id:N.id}).eq("id",e),await Ki.sendCPDPointsNotification({to:f,userName:m,eventTitle:u.title,cpdPoints:u.cpd_points,cpdCategory:u.cpd_category||"Event Attendance",certificateLink:`/certificates/${e}`}),console.log(`CPD activity created for registration ${e}: ${u.cpd_points} points`)}}}catch(o){console.error("Error creating CPD activity:",o)}}catch(r){throw console.error("Error checking in user:",r),new Error(r.message||"Failed to check in")}}static async autoCheckIn(e,s){try{const{data:r,error:a}=await V.from("event_registrations").select("*").eq("event_id",e).eq("user_id",s).single();if(a||!r){console.log("No registration found for auto check-in");return}if(r.checked_in||r.attended){console.log("User already checked in");return}const o=await Xt.getEventById(e);if(!o)return;const u=new Date,h=new Date(o.start_date),f=new Date(o.end_date),m=new Date(h.getTime()-1800*1e3);u>=m&&u<=f&&(await this.checkInUser(r.id,"auto"),console.log("Auto check-in successful"))}catch(r){console.error("Error in auto check-in:",r)}}static async logAttendance(e,s,r,a,o){try{const{error:u}=await V.from("event_attendance_log").insert({registration_id:e,event_id:s,user_id:r,access_type:a,...o});if(u)throw u}catch(u){console.error("Error logging attendance:",u)}}static async generateCertificate(e){try{const{data:s,error:r}=await V.from("event_registrations").select("*").eq("id",e).single();if(r||!s)throw new Error("Registration not found");if(!s.checked_in&&!s.attended)throw new Error("Certificate can only be issued for attended events");const a=await Xt.getEventById(s.event_id);if(!a)throw new Error("Event not found");const{data:{user:o}}=await V.auth.getUser(),u=o?.email?.split("@")[0]||"Member";try{const{data:f}=await V.from("event_certificates").select("*").eq("registration_id",e).single();if(f)return f}catch{console.log("Certificate table might not exist yet")}const h={id:`cert-${Date.now()}`,registration_id:e,event_id:s.event_id,user_id:s.user_id,certificate_number:`CERT-${Date.now()}`,issue_date:new Date().toISOString(),recipient_name:u,event_title:a.title,event_date:new Date(a.start_date).toLocaleDateString("en-AU"),cpd_points:a.cpd_points,cpd_category:a.cpd_category,pdf_generated:!1,is_valid:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};try{await V.from("event_registrations").update({certificate_issued:!0,certificate_issued_date:new Date().toISOString(),certificate_number:h.certificate_number}).eq("id",e)}catch{console.log("Could not update registration with certificate info")}return h}catch(s){throw console.error("Error generating certificate:",s),new Error(s.message||"Failed to generate certificate")}}static async scheduleConfigurableReminders(e,s,r,a){try{console.log(" DEBUG: Starting scheduleConfigurableReminders"),console.log(" Event start date:",a.start_date),console.log(" Current time:",new Date().toISOString());const{data:{user:o}}=await V.auth.getUser(),u=o?.email;if(console.log(" Using email server API to create reminders..."),console.log(" User email:",u),!u){console.log(" No email found, skipping reminders");return}try{const f=await(await fetch("http://localhost:3001/api/create-reminders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({registrationId:e,eventId:s,userId:r,event:a})})).json();f.success?(console.log(` Successfully created ${f.created} reminders via email server`),console.log(" Reminders created:",f.reminders)):console.error(" Email server API error:",f.error)}catch(h){console.error(" Failed to call email server API:",h.message)}}catch(o){console.error("Error scheduling reminders:",o)}}static async scheduleReminders(e,s,r,a){try{const{data:{user:o}}=await V.auth.getUser(),u=o?.email;if(!u)return;const h=new Date(a),f=[{reminder_type:"1_week",scheduled_date:new Date(h.getTime()-10080*60*1e3)},{reminder_type:"1_day",scheduled_date:new Date(h.getTime()-1440*60*1e3)},{reminder_type:"1_hour",scheduled_date:new Date(h.getTime()-3600*1e3)}];for(const m of f)m.scheduled_date>new Date&&await V.from("event_reminders").insert({event_id:s,registration_id:e,user_id:r,reminder_type:m.reminder_type,scheduled_date:m.scheduled_date.toISOString(),email_to:u})}catch(o){console.error("Error scheduling reminders:",o)}}static async getUserRegistrations(e){try{const{data:s,error:r}=await V.from("event_registrations").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(r)throw r;return s||[]}catch(s){return console.error("Error fetching user registrations:",s),[]}}static async getEventRegistrations(e){try{const{data:s,error:r}=await V.from("event_registrations").select("*").eq("event_id",e).order("created_at",{ascending:!1});if(r)throw r;return s||[]}catch(s){return console.error("Error fetching event registrations:",s),[]}}static async getRegistration(e){try{const{data:s,error:r}=await V.from("event_registrations").select("*").eq("id",e).single();if(r)throw r;return s}catch(s){return console.error("Error fetching registration:",s),null}}static async isUserRegistered(e,s){try{const{data:r,error:a}=await V.from("event_registrations").select("id").eq("event_id",e).eq("user_id",s).single();return!!r&&!a}catch{return!1}}}function r9({event:t,onClose:e,onSuccess:s}){const{user:r}=jt(),[a,o]=M.useState(!1),[u,h]=M.useState("details"),[f,m]=M.useState({dietary_requirements:"",accessibility_requirements:"",notes:"",agree_terms:!1});if(!r)return null;const g=r.membership_status==="active";let x=g?t.member_price_cents:t.non_member_price_cents,v=g?"Member Price":"Non-Member Price";const _=t.early_bird_price_cents&&t.early_bird_end_date&&new Date<new Date(t.early_bird_end_date);_&&t.early_bird_price_cents&&(x=t.early_bird_price_cents,v="Early Bird Price");const b=async()=>{if(!f.agree_terms){ae("error","Please agree to the terms and conditions");return}o(!0);try{await di.registerForEvent(t.id,r.id,{dietary_requirements:f.dietary_requirements,accessibility_requirements:f.accessibility_requirements,notes:f.notes}),h("confirmation"),ae("success","Successfully registered for the event!"),setTimeout(()=>{s()},3e3)}catch(N){console.error("Registration error:",N),ae("error",N.message||"Failed to register for event")}finally{o(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:u==="confirmation"?"Registration Complete!":"Register for Event"}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(fn,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[u==="details"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:t.title}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(js,{className:"h-4 w-4"}),n.jsx("span",{children:Ft(new Date(t.start_date),"PPP")})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(sa,{className:"h-4 w-4"}),n.jsxs("span",{children:[Ft(new Date(t.start_date),"p")," -",Ft(new Date(t.end_date),"p")]})]}),t.venue_name&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fi,{className:"h-4 w-4"}),n.jsx("span",{children:t.venue_name})]})]})]}),n.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:v}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x===0?"Free":Xt.formatPrice(x)}),_&&n.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Early bird discount applied!"})]}),n.jsx(aE,{className:"h-8 w-8 text-primary-600"})]})}),t.cpd_points>0&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fs,{className:"h-5 w-5 text-blue-600"}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium text-gray-900",children:["Earn ",t.cpd_points," CPD Points"]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Certificate will be issued upon attendance"})]})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Additional Information (Optional)"}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"dietary",children:"Dietary Requirements"}),n.jsx(Ae,{id:"dietary",value:f.dietary_requirements,onChange:N=>m({...f,dietary_requirements:N.target.value}),placeholder:"e.g., Vegetarian, Gluten-free, Halal"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"accessibility",children:"Accessibility Requirements"}),n.jsx(Ae,{id:"accessibility",value:f.accessibility_requirements,onChange:N=>m({...f,accessibility_requirements:N.target.value}),placeholder:"e.g., Wheelchair access, Hearing loop"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"notes",children:"Additional Notes"}),n.jsx("textarea",{id:"notes",value:f.notes,onChange:N=>m({...f,notes:N.target.value}),placeholder:"Any other information we should know?",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3})]})]}),n.jsx("div",{className:"border-t pt-4",children:n.jsxs("label",{className:"flex items-start gap-3",children:[n.jsx("input",{type:"checkbox",checked:f.agree_terms,onChange:N=>m({...f,agree_terms:N.target.checked}),className:"mt-1"}),n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("p",{children:"I agree to the terms and conditions and understand that:"}),n.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[n.jsx("li",{children:"Registration is subject to availability"}),n.jsx("li",{children:"Cancellations must be made 48 hours in advance"}),n.jsx("li",{children:"CPD points will be awarded upon attendance"}),n.jsx("li",{children:"I will receive email reminders about this event"})]})]})]})})]}),u==="confirmation"&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(fs,{className:"h-8 w-8 text-green-600"})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"You're all set!"}),n.jsxs("p",{className:"text-gray-600 mb-6",children:['Your registration for "',t.title,'" has been confirmed.']}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-left max-w-md mx-auto",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"What's next?"}),n.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(fs,{className:"h-4 w-4 text-green-500 mt-0.5"}),n.jsx("span",{children:"You'll receive a confirmation email shortly"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(fs,{className:"h-4 w-4 text-green-500 mt-0.5"}),n.jsx("span",{children:"We'll send you reminders before the event"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(fs,{className:"h-4 w-4 text-green-500 mt-0.5"}),n.jsx("span",{children:"Your CPD activity will be created automatically when you attend"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(fs,{className:"h-4 w-4 text-green-500 mt-0.5"}),n.jsx("span",{children:"Certificate will be available after the event"})]})]})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50",children:[u==="details"&&n.jsxs(n.Fragment,{children:[n.jsx(re,{variant:"outline",onClick:e,disabled:a,children:"Cancel"}),n.jsx(re,{onClick:b,disabled:a||!f.agree_terms,children:a?"Registering...":x===0?"Register for Free":`Register & Pay ${Xt.formatPrice(x)}`})]}),u==="confirmation"&&n.jsx(re,{onClick:e,children:"Close"})]})]})})}function vE({content:t,className:e=""}){const s=t;return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`ql-container ql-snow ${e}`,style:{border:"none"},children:n.jsx("div",{className:"ql-editor",style:{padding:0,minHeight:"auto",fontSize:"16px",lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:s}})}),n.jsx("style",{children:`
        /* FIX FOR FRONT-END DISPLAY - Same logic as editor */
        
        /* BULLETS - Use native ::marker */
        .ql-editor ul {
          list-style-type: disc !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
        }
        
        .ql-editor ul li {
          list-style-type: disc !important;
          display: list-item !important;
        }
        
        .ql-editor li[data-list="bullet"] {
          list-style-type: disc !important;
          display: list-item !important;
        }
        
        /* Hide Quill's UI elements in rendered content */
        .ql-editor li > .ql-ui {
          display: none !important;
        }
        
        .ql-editor li > .ql-ui::before {
          content: none !important;
          display: none !important;
        }
        
        /* ORDERED LISTS - Use native numbering */
        .ql-editor ol {
          list-style-type: decimal !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
          counter-reset: none !important;
        }
        
        .ql-editor ol li {
          list-style-type: decimal !important;
          display: list-item !important;
        }
        
        .ql-editor li[data-list="ordered"] {
          list-style-type: decimal !important;
          display: list-item !important;
        }
        
        /* Remove any Quill counter increments */
        .ql-editor li[data-list] {
          counter-increment: none !important;
        }
        
        /* Spacing adjustments */
        .ql-editor h1 {
          margin: 0.5em 0 !important;
          font-size: 2em !important;
        }
        
        .ql-editor h2 {
          margin: 0.5em 0 !important;
          font-size: 1.5em !important;
        }
        
        .ql-editor h3 {
          margin: 0.5em 0 !important;
          font-size: 1.17em !important;
        }
        
        .ql-editor p {
          margin: 0.5em 0 !important;
        }
        
        .ql-editor p:first-child {
          margin-top: 0 !important;
        }
        
        .ql-editor p:last-child {
          margin-bottom: 0 !important;
        }
        
        .ql-editor blockquote {
          margin: 0.5em 0 !important;
          padding-left: 1em !important;
        }
        
        /* Keep numbered lists as normal */
        .ql-editor ol {
          list-style-type: decimal !important;
          display: block !important;
          margin: 0.5em 0 !important;
          padding-left: 1.5em !important;
        }
        
        .ql-editor ol > li {
          list-style-type: decimal !important;
          display: list-item !important;
          margin: 0.25em 0 !important;
        }
      `})]})}function n9({startDate:t,eventTitle:e,locationName:s,virtualLink:r,locationType:a="physical"}){const[o,u]=M.useState({days:0,hours:0,minutes:0,seconds:0,isLive:!1,isPast:!1});return M.useEffect(()=>{const h=()=>{const m=new Date().getTime(),x=new Date(t).getTime()-m;if(x<0)Math.abs(x)/36e5<2?u({days:0,hours:0,minutes:0,seconds:0,isLive:!0,isPast:!1}):u({days:0,hours:0,minutes:0,seconds:0,isLive:!1,isPast:!0});else{const v=Math.floor(x/864e5),_=Math.floor(x%(1e3*60*60*24)/(1e3*60*60)),b=Math.floor(x%(1e3*60*60)/(1e3*60)),N=Math.floor(x%(1e3*60)/1e3);u({days:v,hours:_,minutes:b,seconds:N,isLive:!1,isPast:!1})}};h();const f=setInterval(h,1e3);return()=>clearInterval(f)},[t]),o.isPast?n.jsx("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[n.jsx(js,{className:"h-5 w-5"}),n.jsx("p",{className:"text-lg font-medium",children:"This event has ended"})]})}):o.isLive?n.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 rounded-lg p-6 text-white animate-pulse",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[n.jsx("div",{className:"h-3 w-3 bg-white rounded-full animate-pulse"}),n.jsx("p",{className:"text-2xl font-bold",children:"EVENT IS LIVE NOW!"}),n.jsx("div",{className:"h-3 w-3 bg-white rounded-full animate-pulse"})]}),r&&(a==="virtual"||a==="hybrid")&&n.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 bg-white text-red-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition",children:[n.jsx(dE,{className:"h-5 w-5"}),n.jsx("span",{children:"Join Virtual Event"})]}),s&&(a==="physical"||a==="hybrid")&&n.jsxs("div",{className:"mt-4 flex items-center justify-center space-x-2",children:[n.jsx(fi,{className:"h-5 w-5"}),n.jsx("span",{className:"text-lg",children:s})]})]})}):n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-teal-500 rounded-lg p-6 text-white",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[n.jsx(sa,{className:"h-5 w-5"}),n.jsx("p",{className:"text-lg font-semibold",children:"Event Starts In"})]}),n.jsx("p",{className:"text-sm opacity-90",children:e})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[n.jsx("div",{className:"text-center",children:n.jsxs("div",{className:"bg-white/20 rounded-lg p-3 backdrop-blur",children:[n.jsx("div",{className:"text-3xl font-bold",children:String(o.days).padStart(2,"0")}),n.jsx("div",{className:"text-xs uppercase opacity-90 mt-1",children:"Days"})]})}),n.jsx("div",{className:"text-center",children:n.jsxs("div",{className:"bg-white/20 rounded-lg p-3 backdrop-blur",children:[n.jsx("div",{className:"text-3xl font-bold",children:String(o.hours).padStart(2,"0")}),n.jsx("div",{className:"text-xs uppercase opacity-90 mt-1",children:"Hours"})]})}),n.jsx("div",{className:"text-center",children:n.jsxs("div",{className:"bg-white/20 rounded-lg p-3 backdrop-blur",children:[n.jsx("div",{className:"text-3xl font-bold",children:String(o.minutes).padStart(2,"0")}),n.jsx("div",{className:"text-xs uppercase opacity-90 mt-1",children:"Minutes"})]})}),n.jsx("div",{className:"text-center",children:n.jsxs("div",{className:"bg-white/20 rounded-lg p-3 backdrop-blur",children:[n.jsx("div",{className:"text-3xl font-bold",children:String(o.seconds).padStart(2,"0")}),n.jsx("div",{className:"text-xs uppercase opacity-90 mt-1",children:"Seconds"})]})})]}),n.jsx("div",{className:"mt-4 text-center",children:n.jsx("p",{className:"text-sm opacity-90",children:new Date(t).toLocaleDateString("en-AU",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})})]})}function i9(){const{slug:t}=ET(),e=Ns(),{user:s,getEffectiveUserId:r}=jt(),a=r(),[o,u]=M.useState(null),[h,f]=M.useState(!0),[m,g]=M.useState(null),[x,v]=M.useState(!1),[_,b]=M.useState(0);M.useEffect(()=>{t&&N()},[t]);const N=async()=>{if(t)try{f(!0);const R=await Xt.getEventBySlug(t);if(!R){ae("error","Event not found"),e("/events");return}u(R);const D=await di.getEventRegistrations(R.id);if(b(D.length),a&&await di.isUserRegistered(R.id,a)){const J=(await di.getUserRegistrations(a)).find(q=>q.event_id===R.id);g(J||null),await di.autoCheckIn(R.id,a)}}catch(R){console.error("Error loading event:",R),ae("error","Failed to load event details")}finally{f(!1)}},w=()=>{if(!s){e("/login");return}v(!0)},E=()=>{v(!1),N()},A=()=>{navigator.share?navigator.share({title:o?.title,text:o?.short_description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),ae("success","Link copied to clipboard"))},O=()=>{if(!o)return!1;const R=new Date,D=new Date(o.start_date),P=new Date(o.end_date),H=10,J=new Date(D.getTime()-H*60*1e3);return R>=J&&R<=P},F=async()=>{if(!(!o||!m))try{await di.checkInUser(m.id,"auto"),await di.logAttendance(m.id,o.id,a,"video_start"),o.virtual_link&&window.open(o.virtual_link,"_blank"),ae("success","Check-in successful! Opening event...");const R=new Date(o.end_date);if(R>new Date){const P={eventId:o.id,registrationId:m.id,eventTitle:o.title,eventEndTime:R.toISOString(),cpdPoints:o.cpd_points,cpdCategory:o.cpd_category||"Event Attendance"};localStorage.setItem(`cpd_pending_${o.id}`,JSON.stringify(P))}await N()}catch(R){console.error("Error joining event:",R),ae("error","Failed to join event. Please try again.")}};if(h)return n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!o)return null;const C=s?.membership_status==="active",L=C?o.member_price_cents:o.non_member_price_cents,B=o.capacity-_,S=Xt.isRegistrationOpen(o);Xt.getEventStatus(o);const k=new Date(o.end_date)<new Date,z=B<=0;return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs(re,{variant:"ghost",onClick:()=>e("/events"),className:"mb-6",children:[n.jsx(nE,{className:"h-4 w-4 mr-2"}),"Back to Events"]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsx("img",{src:o.image_url||"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=1200&h=600&fit=crop",alt:o.title,className:"w-full h-64 lg:h-96 object-cover rounded-lg",onError:R=>{const D=R.target;D.onerror=null,D.src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=1200&h=600&fit=crop"}}),n.jsxs("div",{children:[o.category&&n.jsx("span",{className:"inline-block px-3 py-1 text-sm font-semibold rounded-full mb-3",style:{backgroundColor:`${o.category.color}20`,color:o.category.color},children:o.category.name}),n.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:o.title}),o.short_description&&n.jsx("p",{className:"text-lg text-gray-600",children:o.short_description})]}),n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(js,{className:"h-5 w-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Date & Time"}),n.jsx("p",{className:"text-gray-600",children:Ft(new Date(o.start_date),"EEEE, MMMM d, yyyy")}),n.jsxs("p",{className:"text-gray-600",children:[Ft(new Date(o.start_date),"h:mm a")," -",Ft(new Date(o.end_date),"h:mm a")]})]})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(fi,{className:"h-5 w-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Location"}),o.location_type==="virtual"?n.jsxs("div",{children:[n.jsxs("p",{className:"text-gray-600 flex items-center",children:[n.jsx(oE,{className:"h-4 w-4 mr-1"}),"Online Event"]}),m&&o.virtual_link&&n.jsx("div",{className:"mt-2",children:O()?n.jsxs(re,{onClick:F,className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:[n.jsx(dE,{className:"h-4 w-4 mr-2"}),"Join Live Event"]}):n.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-1"}),"Join button available 10 min before start"]})})]}):n.jsxs("div",{children:[o.venue_name&&n.jsxs("p",{className:"text-gray-600 flex items-center",children:[n.jsx(Ed,{className:"h-4 w-4 mr-1"}),o.venue_name]}),n.jsxs("p",{className:"text-gray-600",children:[o.address_line1,o.address_line2&&`, ${o.address_line2}`]}),n.jsxs("p",{className:"text-gray-600",children:[o.city,", ",o.state," ",o.postal_code]})]}),o.location_instructions&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:o.location_instructions})]})]})]})}),n.jsxs(de,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"About This Event"}),o.description?n.jsx(vE,{content:o.description}):n.jsx("p",{className:"text-gray-600",children:"No description available"})]}),o.cpd_points>0&&n.jsxs(de,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(un,{className:"h-6 w-6 text-primary-600 mr-2"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"CPD Points"})]}),n.jsxs("p",{className:"text-gray-600",children:["Earn ",n.jsxs("span",{className:"font-semibold",children:[o.cpd_points," CPD points"]})," by attending this event."]}),o.cpd_category&&n.jsxs("p",{className:"text-gray-600 mt-1",children:["Category: ",n.jsx("span",{className:"font-semibold",children:o.cpd_category})]})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(de,{className:"p-6 sticky top-4 bg-white",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:C?"Member Price":"Non-Member Price"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:L===0?"Free":Xt.formatPrice(L)}),o.early_bird_price_cents&&o.early_bird_end_date&&new Date<new Date(o.early_bird_end_date)&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Early bird pricing available until ",Ft(new Date(o.early_bird_end_date),"MMM d")]})]}),n.jsxs("div",{className:"flex items-center justify-between py-3 border-y",children:[n.jsxs("div",{className:"flex items-center text-gray-600",children:[n.jsx(zr,{className:"h-5 w-5 mr-2"}),n.jsx("span",{children:"Capacity"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"font-semibold text-gray-900",children:o.capacity}),B>0&&B<10&&n.jsxs("p",{className:"text-sm text-orange-600",children:["Only ",B," spots left!"]})]})]}),!k&&n.jsx(n.Fragment,{children:m?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fs,{className:"h-5 w-5 text-green-600"}),n.jsx("p",{className:"text-green-800 font-semibold",children:"You're registered!"})]}),(m.checked_in||m.attended)&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(ho,{className:"h-4 w-4 text-green-600"}),n.jsx("p",{className:"text-sm text-green-600",children:"Checked in"})]}),m.certificate_issued&&n.jsx(re,{variant:"link",className:"text-sm text-primary-600 p-0 h-auto mt-2",onClick:()=>e(`/certificates/${m.certificate_number}`),children:"View Certificate "})]}),n.jsx(n9,{startDate:o.start_date,eventTitle:o.title,locationName:o.venue_name,virtualLink:o.virtual_link,locationType:o.location_type}),n.jsx(re,{variant:"outline",className:"w-full",onClick:()=>e("/cpd/activities"),children:"View in My CPD"})]}):n.jsxs(n.Fragment,{children:[S&&!z?n.jsx(re,{className:"w-full",size:"lg",onClick:w,children:"Register Now"}):n.jsx(re,{className:"w-full",size:"lg",disabled:!0,children:z?"Event Full":"Registration Closed"}),o.waitlist_enabled&&z&&n.jsx(re,{variant:"outline",className:"w-full mt-2",onClick:()=>ae("info","Waitlist feature coming soon"),children:"Join Waitlist"})]})}),k&&n.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:n.jsx("p",{className:"text-gray-600 text-center",children:"This event has ended"})}),n.jsxs("div",{className:"flex gap-2 pt-3",children:[n.jsxs(re,{variant:"outline",className:"flex-1",onClick:A,children:[n.jsx(HP,{className:"h-4 w-4 mr-2"}),"Share"]}),n.jsxs(re,{variant:"outline",className:"flex-1",onClick:()=>{},children:[n.jsx(bP,{className:"h-4 w-4 mr-2"}),"Save"]})]})]})}),n.jsxs(de,{className:"p-6",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Organized by"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"h-12 w-12 bg-primary-100 rounded-full flex items-center justify-center",children:n.jsx(Ed,{className:"h-6 w-6 text-primary-600"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"English Australia"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Professional Development Team"})]})]})]}),o.tags&&o.tags.length>0&&n.jsxs(de,{className:"p-6",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Tags"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:o.tags.map((R,D)=>n.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full",children:R},D))})]})]})]}),x&&o&&n.jsx(r9,{event:o,onClose:()=>v(!1),onSuccess:E})]})}function a9(){const t=Ns(),{user:e,getEffectiveUserId:s}=jt(),r=s(),[a,o]=M.useState([]),[u,h]=M.useState(!0),[f,m]=M.useState("upcoming");M.useEffect(()=>{r&&g()},[r]);const g=async()=>{if(r)try{h(!0);const E=await di.getUserRegistrations(r),A=await Promise.all(E.map(async O=>{try{const F=await Xt.getEventById(O.event_id);return{registration:O,event:F}}catch(F){return console.error(`Failed to load event ${O.event_id}:`,F),{registration:O,event:null}}}));o(A)}catch(E){console.error("Error loading registrations:",E),ae("error","Failed to load your registrations")}finally{h(!1)}},x=async E=>{try{await di.cancelRegistration(E),ae("success","Registration cancelled successfully"),g()}catch(A){console.error("Error cancelling registration:",A),ae("error","Failed to cancel registration")}},v=async E=>{try{const A=await di.generateCertificate(E.id);A&&(ae("success","Certificate generated successfully"),console.log("Certificate:",A))}catch(A){console.error("Error generating certificate:",A),ae("error",A.message||"Failed to generate certificate")}},_=new Date,b=a.filter(E=>E.event&&new Date(E.event.end_date)>=_),N=a.filter(E=>E.event&&new Date(E.event.end_date)<_),w=f==="upcoming"?b:N;return u?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Event Registrations"}),n.jsx("p",{className:"text-gray-600",children:"Manage your event registrations and access certificates"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Registrations"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.length})]}),n.jsx(eI,{className:"h-8 w-8 text-primary-600"})]})}),n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Upcoming Events"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.length})]}),n.jsx(js,{className:"h-8 w-8 text-blue-600"})]})}),n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Events Attended"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(E=>E.registration.attended||E.registration.checked_in).length})]}),n.jsx(fs,{className:"h-8 w-8 text-green-600"})]})})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6",children:n.jsxs("nav",{className:"-mb-px flex space-x-8",children:[n.jsxs("button",{onClick:()=>m("upcoming"),className:`py-2 px-1 border-b-2 font-medium text-sm ${f==="upcoming"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Upcoming Events (",b.length,")"]}),n.jsxs("button",{onClick:()=>m("past"),className:`py-2 px-1 border-b-2 font-medium text-sm ${f==="past"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Past Events (",N.length,")"]})]})}),w.length>0?n.jsx("div",{className:"space-y-4",children:w.map(({registration:E,event:A})=>{if(!A)return null;const O=new Date(A.end_date)<_,F=!O&&E.status==="registered",C=O&&(E.attended||E.checked_in);return n.jsx(de,{className:"p-6",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("img",{src:A.image_url||"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=200&h=150&fit=crop",alt:A.title,className:"w-24 h-24 object-cover rounded-lg"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 cursor-pointer hover:text-primary-600",onClick:()=>t(`/events/${A.slug}`),children:A.title}),n.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(js,{className:"h-4 w-4"}),n.jsx("span",{children:Ft(new Date(A.start_date),"PPP")})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(sa,{className:"h-4 w-4"}),n.jsxs("span",{children:[Ft(new Date(A.start_date),"p")," -",Ft(new Date(A.end_date),"p")]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fi,{className:"h-4 w-4"}),n.jsx("span",{children:A.location_type==="virtual"?"Online Event":A.venue_name||A.city||"Location TBA"})]})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${E.status==="cancelled"?"bg-gray-100 text-gray-800":E.status==="attended"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:E.status==="attended"?"Attended":E.status==="cancelled"?"Cancelled":"Registered"}),(E.checked_in||E.attended)&&n.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-green-600",children:[n.jsx(ho,{className:"h-3 w-3"}),"Checked In"]}),E.payment_amount&&E.payment_amount>0&&n.jsxs("span",{className:`inline-flex items-center gap-1 text-xs ${E.payment_status==="completed"?"text-green-600":E.payment_status==="pending"?"text-orange-600":"text-gray-600"}`,children:[n.jsx(lE,{className:"h-3 w-3"}),E.payment_status==="completed"?"Paid":E.payment_status==="pending"?"Payment Pending":E.payment_status]}),A.cpd_points>0&&n.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-purple-600",children:[n.jsx(un,{className:"h-3 w-3"}),A.cpd_points," CPD Points"]})]})]})]})}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(re,{variant:"outline",size:"sm",onClick:()=>t(`/events/${A.slug}`),children:"View Event"}),C&&n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>v(E),children:[n.jsx(qc,{className:"h-4 w-4 mr-2"}),"Certificate"]}),F&&n.jsx(re,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to cancel this registration?")&&x(E.id)},className:"text-red-600 hover:text-red-700 hover:border-red-300",children:"Cancel Registration"}),E.cpd_activity_id&&n.jsx(re,{variant:"outline",size:"sm",onClick:()=>t("/cpd/activities"),children:"View in CPD"})]})]})},E.id)})}):n.jsxs(de,{className:"p-12 text-center",children:[n.jsx(ta,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:f==="upcoming"?"No upcoming events":"No past events"}),n.jsx("p",{className:"text-gray-600 mb-4",children:f==="upcoming"?"You are not registered for any upcoming events.":"You have not attended any past events."}),f==="upcoming"&&n.jsx(re,{onClick:()=>t("/events"),children:"Browse Events"})]})]})}var wE=typeof global=="object"&&global&&global.Object===Object&&global,l9=typeof self=="object"&&self&&self.Object===Object&&self,xi=wE||l9||Function("return this")(),nl=xi.Symbol,_E=Object.prototype,o9=_E.hasOwnProperty,c9=_E.toString,ld=nl?nl.toStringTag:void 0;function u9(t){var e=o9.call(t,ld),s=t[ld];try{t[ld]=void 0;var r=!0}catch{}var a=c9.call(t);return r&&(e?t[ld]=s:delete t[ld]),a}var d9=Object.prototype,h9=d9.toString;function f9(t){return h9.call(t)}var m9="[object Null]",p9="[object Undefined]",xj=nl?nl.toStringTag:void 0;function Xc(t){return t==null?t===void 0?p9:m9:xj&&xj in Object(t)?u9(t):f9(t)}function na(t){return t!=null&&typeof t=="object"}var to=Array.isArray;function cl(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function jE(t){return t}var g9="[object AsyncFunction]",y9="[object Function]",x9="[object GeneratorFunction]",b9="[object Proxy]";function wx(t){if(!cl(t))return!1;var e=Xc(t);return e==y9||e==x9||e==g9||e==b9}var g0=xi["__core-js_shared__"],bj=function(){var t=/[^.]+$/.exec(g0&&g0.keys&&g0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function v9(t){return!!bj&&bj in t}var w9=Function.prototype,_9=w9.toString;function fo(t){if(t!=null){try{return _9.call(t)}catch{}try{return t+""}catch{}}return""}var j9=/[\\^$.*+?()[\]{}|]/g,N9=/^\[object .+?Constructor\]$/,S9=Function.prototype,E9=Object.prototype,A9=S9.toString,C9=E9.hasOwnProperty,k9=RegExp("^"+A9.call(C9).replace(j9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function T9(t){if(!cl(t)||v9(t))return!1;var e=wx(t)?k9:N9;return e.test(fo(t))}function O9(t,e){return t?.[e]}function mo(t,e){var s=O9(t,e);return T9(s)?s:void 0}var uy=mo(xi,"WeakMap"),vj=Object.create,R9=function(){function t(){}return function(e){if(!cl(e))return{};if(vj)return vj(e);t.prototype=e;var s=new t;return t.prototype=void 0,s}}();function M9(t,e,s){switch(s.length){case 0:return t.call(e);case 1:return t.call(e,s[0]);case 2:return t.call(e,s[0],s[1]);case 3:return t.call(e,s[0],s[1],s[2])}return t.apply(e,s)}function D9(t,e){var s=-1,r=t.length;for(e||(e=Array(r));++s<r;)e[s]=t[s];return e}var L9=800,q9=16,P9=Date.now;function I9(t){var e=0,s=0;return function(){var r=P9(),a=q9-(r-s);if(s=r,a>0){if(++e>=L9)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function $9(t){return function(){return t}}var mm=function(){try{var t=mo(Object,"defineProperty");return t({},"",{}),t}catch{}}(),U9=mm?function(t,e){return mm(t,"toString",{configurable:!0,enumerable:!1,value:$9(e),writable:!0})}:jE,B9=I9(U9);function z9(t,e){for(var s=-1,r=t==null?0:t.length;++s<r&&e(t[s],s,t)!==!1;);return t}var F9=9007199254740991,H9=/^(?:0|[1-9]\d*)$/;function NE(t,e){var s=typeof t;return e=e??F9,!!e&&(s=="number"||s!="symbol"&&H9.test(t))&&t>-1&&t%1==0&&t<e}function _x(t,e,s){e=="__proto__"&&mm?mm(t,e,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[e]=s}function Xd(t,e){return t===e||t!==t&&e!==e}var V9=Object.prototype,G9=V9.hasOwnProperty;function SE(t,e,s){var r=t[e];(!(G9.call(t,e)&&Xd(r,s))||s===void 0&&!(e in t))&&_x(t,e,s)}function Z9(t,e,s,r){var a=!s;s||(s={});for(var o=-1,u=e.length;++o<u;){var h=e[o],f=void 0;f===void 0&&(f=t[h]),a?_x(s,h,f):SE(s,h,f)}return s}var wj=Math.max;function Y9(t,e,s){return e=wj(e===void 0?t.length-1:e,0),function(){for(var r=arguments,a=-1,o=wj(r.length-e,0),u=Array(o);++a<o;)u[a]=r[e+a];a=-1;for(var h=Array(e+1);++a<e;)h[a]=r[a];return h[e]=s(u),M9(t,this,h)}}function K9(t,e){return B9(Y9(t,e,jE),t+"")}var W9=9007199254740991;function EE(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=W9}function Im(t){return t!=null&&EE(t.length)&&!wx(t)}function Q9(t,e,s){if(!cl(s))return!1;var r=typeof e;return(r=="number"?Im(s)&&NE(e,s.length):r=="string"&&e in s)?Xd(s[e],t):!1}function X9(t){return K9(function(e,s){var r=-1,a=s.length,o=a>1?s[a-1]:void 0,u=a>2?s[2]:void 0;for(o=t.length>3&&typeof o=="function"?(a--,o):void 0,u&&Q9(s[0],s[1],u)&&(o=a<3?void 0:o,a=1),e=Object(e);++r<a;){var h=s[r];h&&t(e,h,r,o)}return e})}var J9=Object.prototype;function jx(t){var e=t&&t.constructor,s=typeof e=="function"&&e.prototype||J9;return t===s}function e$(t,e){for(var s=-1,r=Array(t);++s<t;)r[s]=e(s);return r}var t$="[object Arguments]";function _j(t){return na(t)&&Xc(t)==t$}var AE=Object.prototype,s$=AE.hasOwnProperty,r$=AE.propertyIsEnumerable,dy=_j(function(){return arguments}())?_j:function(t){return na(t)&&s$.call(t,"callee")&&!r$.call(t,"callee")};function n$(){return!1}var CE=typeof $r=="object"&&$r&&!$r.nodeType&&$r,jj=CE&&typeof Ur=="object"&&Ur&&!Ur.nodeType&&Ur,i$=jj&&jj.exports===CE,Nj=i$?xi.Buffer:void 0,a$=Nj?Nj.isBuffer:void 0,kd=a$||n$,l$="[object Arguments]",o$="[object Array]",c$="[object Boolean]",u$="[object Date]",d$="[object Error]",h$="[object Function]",f$="[object Map]",m$="[object Number]",p$="[object Object]",g$="[object RegExp]",y$="[object Set]",x$="[object String]",b$="[object WeakMap]",v$="[object ArrayBuffer]",w$="[object DataView]",_$="[object Float32Array]",j$="[object Float64Array]",N$="[object Int8Array]",S$="[object Int16Array]",E$="[object Int32Array]",A$="[object Uint8Array]",C$="[object Uint8ClampedArray]",k$="[object Uint16Array]",T$="[object Uint32Array]",Vt={};Vt[_$]=Vt[j$]=Vt[N$]=Vt[S$]=Vt[E$]=Vt[A$]=Vt[C$]=Vt[k$]=Vt[T$]=!0;Vt[l$]=Vt[o$]=Vt[v$]=Vt[c$]=Vt[w$]=Vt[u$]=Vt[d$]=Vt[h$]=Vt[f$]=Vt[m$]=Vt[p$]=Vt[g$]=Vt[y$]=Vt[x$]=Vt[b$]=!1;function O$(t){return na(t)&&EE(t.length)&&!!Vt[Xc(t)]}function Nx(t){return function(e){return t(e)}}var kE=typeof $r=="object"&&$r&&!$r.nodeType&&$r,bd=kE&&typeof Ur=="object"&&Ur&&!Ur.nodeType&&Ur,R$=bd&&bd.exports===kE,y0=R$&&wE.process,Ic=function(){try{var t=bd&&bd.require&&bd.require("util").types;return t||y0&&y0.binding&&y0.binding("util")}catch{}}(),Sj=Ic&&Ic.isTypedArray,Sx=Sj?Nx(Sj):O$,M$=Object.prototype,D$=M$.hasOwnProperty;function TE(t,e){var s=to(t),r=!s&&dy(t),a=!s&&!r&&kd(t),o=!s&&!r&&!a&&Sx(t),u=s||r||a||o,h=u?e$(t.length,String):[],f=h.length;for(var m in t)(e||D$.call(t,m))&&!(u&&(m=="length"||a&&(m=="offset"||m=="parent")||o&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||NE(m,f)))&&h.push(m);return h}function OE(t,e){return function(s){return t(e(s))}}var L$=OE(Object.keys,Object),q$=Object.prototype,P$=q$.hasOwnProperty;function I$(t){if(!jx(t))return L$(t);var e=[];for(var s in Object(t))P$.call(t,s)&&s!="constructor"&&e.push(s);return e}function $$(t){return Im(t)?TE(t):I$(t)}function U$(t){var e=[];if(t!=null)for(var s in Object(t))e.push(s);return e}var B$=Object.prototype,z$=B$.hasOwnProperty;function F$(t){if(!cl(t))return U$(t);var e=jx(t),s=[];for(var r in t)r=="constructor"&&(e||!z$.call(t,r))||s.push(r);return s}function RE(t){return Im(t)?TE(t,!0):F$(t)}var Td=mo(Object,"create");function H$(){this.__data__=Td?Td(null):{},this.size=0}function V$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var G$="__lodash_hash_undefined__",Z$=Object.prototype,Y$=Z$.hasOwnProperty;function K$(t){var e=this.__data__;if(Td){var s=e[t];return s===G$?void 0:s}return Y$.call(e,t)?e[t]:void 0}var W$=Object.prototype,Q$=W$.hasOwnProperty;function X$(t){var e=this.__data__;return Td?e[t]!==void 0:Q$.call(e,t)}var J$="__lodash_hash_undefined__";function eU(t,e){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=Td&&e===void 0?J$:e,this}function so(t){var e=-1,s=t==null?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}so.prototype.clear=H$;so.prototype.delete=V$;so.prototype.get=K$;so.prototype.has=X$;so.prototype.set=eU;function tU(){this.__data__=[],this.size=0}function $m(t,e){for(var s=t.length;s--;)if(Xd(t[s][0],e))return s;return-1}var sU=Array.prototype,rU=sU.splice;function nU(t){var e=this.__data__,s=$m(e,t);if(s<0)return!1;var r=e.length-1;return s==r?e.pop():rU.call(e,s,1),--this.size,!0}function iU(t){var e=this.__data__,s=$m(e,t);return s<0?void 0:e[s][1]}function aU(t){return $m(this.__data__,t)>-1}function lU(t,e){var s=this.__data__,r=$m(s,t);return r<0?(++this.size,s.push([t,e])):s[r][1]=e,this}function aa(t){var e=-1,s=t==null?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}aa.prototype.clear=tU;aa.prototype.delete=nU;aa.prototype.get=iU;aa.prototype.has=aU;aa.prototype.set=lU;var Od=mo(xi,"Map");function oU(){this.size=0,this.__data__={hash:new so,map:new(Od||aa),string:new so}}function cU(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Um(t,e){var s=t.__data__;return cU(e)?s[typeof e=="string"?"string":"hash"]:s.map}function uU(t){var e=Um(this,t).delete(t);return this.size-=e?1:0,e}function dU(t){return Um(this,t).get(t)}function hU(t){return Um(this,t).has(t)}function fU(t,e){var s=Um(this,t),r=s.size;return s.set(t,e),this.size+=s.size==r?0:1,this}function po(t){var e=-1,s=t==null?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}po.prototype.clear=oU;po.prototype.delete=uU;po.prototype.get=dU;po.prototype.has=hU;po.prototype.set=fU;function mU(t,e){for(var s=-1,r=e.length,a=t.length;++s<r;)t[a+s]=e[s];return t}var ME=OE(Object.getPrototypeOf,Object),pU="[object Object]",gU=Function.prototype,yU=Object.prototype,DE=gU.toString,xU=yU.hasOwnProperty,bU=DE.call(Object);function vU(t){if(!na(t)||Xc(t)!=pU)return!1;var e=ME(t);if(e===null)return!0;var s=xU.call(e,"constructor")&&e.constructor;return typeof s=="function"&&s instanceof s&&DE.call(s)==bU}function wU(){this.__data__=new aa,this.size=0}function _U(t){var e=this.__data__,s=e.delete(t);return this.size=e.size,s}function jU(t){return this.__data__.get(t)}function NU(t){return this.__data__.has(t)}var SU=200;function EU(t,e){var s=this.__data__;if(s instanceof aa){var r=s.__data__;if(!Od||r.length<SU-1)return r.push([t,e]),this.size=++s.size,this;s=this.__data__=new po(r)}return s.set(t,e),this.size=s.size,this}function mi(t){var e=this.__data__=new aa(t);this.size=e.size}mi.prototype.clear=wU;mi.prototype.delete=_U;mi.prototype.get=jU;mi.prototype.has=NU;mi.prototype.set=EU;var LE=typeof $r=="object"&&$r&&!$r.nodeType&&$r,Ej=LE&&typeof Ur=="object"&&Ur&&!Ur.nodeType&&Ur,AU=Ej&&Ej.exports===LE,Aj=AU?xi.Buffer:void 0,Cj=Aj?Aj.allocUnsafe:void 0;function qE(t,e){if(e)return t.slice();var s=t.length,r=Cj?Cj(s):new t.constructor(s);return t.copy(r),r}function CU(t,e){for(var s=-1,r=t==null?0:t.length,a=0,o=[];++s<r;){var u=t[s];e(u,s,t)&&(o[a++]=u)}return o}function kU(){return[]}var TU=Object.prototype,OU=TU.propertyIsEnumerable,kj=Object.getOwnPropertySymbols,RU=kj?function(t){return t==null?[]:(t=Object(t),CU(kj(t),function(e){return OU.call(t,e)}))}:kU;function MU(t,e,s){var r=e(t);return to(t)?r:mU(r,s(t))}function hy(t){return MU(t,$$,RU)}var fy=mo(xi,"DataView"),my=mo(xi,"Promise"),py=mo(xi,"Set"),Tj="[object Map]",DU="[object Object]",Oj="[object Promise]",Rj="[object Set]",Mj="[object WeakMap]",Dj="[object DataView]",LU=fo(fy),qU=fo(Od),PU=fo(my),IU=fo(py),$U=fo(uy),An=Xc;(fy&&An(new fy(new ArrayBuffer(1)))!=Dj||Od&&An(new Od)!=Tj||my&&An(my.resolve())!=Oj||py&&An(new py)!=Rj||uy&&An(new uy)!=Mj)&&(An=function(t){var e=Xc(t),s=e==DU?t.constructor:void 0,r=s?fo(s):"";if(r)switch(r){case LU:return Dj;case qU:return Tj;case PU:return Oj;case IU:return Rj;case $U:return Mj}return e});var UU=Object.prototype,BU=UU.hasOwnProperty;function zU(t){var e=t.length,s=new t.constructor(e);return e&&typeof t[0]=="string"&&BU.call(t,"index")&&(s.index=t.index,s.input=t.input),s}var pm=xi.Uint8Array;function Ex(t){var e=new t.constructor(t.byteLength);return new pm(e).set(new pm(t)),e}function FU(t,e){var s=Ex(t.buffer);return new t.constructor(s,t.byteOffset,t.byteLength)}var HU=/\w*$/;function VU(t){var e=new t.constructor(t.source,HU.exec(t));return e.lastIndex=t.lastIndex,e}var Lj=nl?nl.prototype:void 0,qj=Lj?Lj.valueOf:void 0;function GU(t){return qj?Object(qj.call(t)):{}}function PE(t,e){var s=e?Ex(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.length)}var ZU="[object Boolean]",YU="[object Date]",KU="[object Map]",WU="[object Number]",QU="[object RegExp]",XU="[object Set]",JU="[object String]",eB="[object Symbol]",tB="[object ArrayBuffer]",sB="[object DataView]",rB="[object Float32Array]",nB="[object Float64Array]",iB="[object Int8Array]",aB="[object Int16Array]",lB="[object Int32Array]",oB="[object Uint8Array]",cB="[object Uint8ClampedArray]",uB="[object Uint16Array]",dB="[object Uint32Array]";function hB(t,e,s){var r=t.constructor;switch(e){case tB:return Ex(t);case ZU:case YU:return new r(+t);case sB:return FU(t);case rB:case nB:case iB:case aB:case lB:case oB:case cB:case uB:case dB:return PE(t,s);case KU:return new r;case WU:case JU:return new r(t);case QU:return VU(t);case XU:return new r;case eB:return GU(t)}}function IE(t){return typeof t.constructor=="function"&&!jx(t)?R9(ME(t)):{}}var fB="[object Map]";function mB(t){return na(t)&&An(t)==fB}var Pj=Ic&&Ic.isMap,pB=Pj?Nx(Pj):mB,gB="[object Set]";function yB(t){return na(t)&&An(t)==gB}var Ij=Ic&&Ic.isSet,xB=Ij?Nx(Ij):yB,bB=1,$E="[object Arguments]",vB="[object Array]",wB="[object Boolean]",_B="[object Date]",jB="[object Error]",UE="[object Function]",NB="[object GeneratorFunction]",SB="[object Map]",EB="[object Number]",BE="[object Object]",AB="[object RegExp]",CB="[object Set]",kB="[object String]",TB="[object Symbol]",OB="[object WeakMap]",RB="[object ArrayBuffer]",MB="[object DataView]",DB="[object Float32Array]",LB="[object Float64Array]",qB="[object Int8Array]",PB="[object Int16Array]",IB="[object Int32Array]",$B="[object Uint8Array]",UB="[object Uint8ClampedArray]",BB="[object Uint16Array]",zB="[object Uint32Array]",Bt={};Bt[$E]=Bt[vB]=Bt[RB]=Bt[MB]=Bt[wB]=Bt[_B]=Bt[DB]=Bt[LB]=Bt[qB]=Bt[PB]=Bt[IB]=Bt[SB]=Bt[EB]=Bt[BE]=Bt[AB]=Bt[CB]=Bt[kB]=Bt[TB]=Bt[$B]=Bt[UB]=Bt[BB]=Bt[zB]=!0;Bt[jB]=Bt[UE]=Bt[OB]=!1;function zf(t,e,s,r,a,o){var u,h=e&bB;if(u!==void 0)return u;if(!cl(t))return t;var f=to(t);if(f)u=zU(t);else{var m=An(t),g=m==UE||m==NB;if(kd(t))return qE(t,h);if(m==BE||m==$E||g&&!a)u=g?{}:IE(t);else{if(!Bt[m])return a?t:{};u=hB(t,m,h)}}o||(o=new mi);var x=o.get(t);if(x)return x;o.set(t,u),xB(t)?t.forEach(function(b){u.add(zf(b,e,s,b,t,o))}):pB(t)&&t.forEach(function(b,N){u.set(N,zf(b,e,s,N,t,o))});var v=hy,_=f?void 0:v(t);return z9(_||t,function(b,N){_&&(N=b,b=t[N]),SE(u,N,zf(b,e,s,N,t,o))}),u}var FB=1,HB=4;function kc(t){return zf(t,FB|HB)}var VB="__lodash_hash_undefined__";function GB(t){return this.__data__.set(t,VB),this}function ZB(t){return this.__data__.has(t)}function gm(t){var e=-1,s=t==null?0:t.length;for(this.__data__=new po;++e<s;)this.add(t[e])}gm.prototype.add=gm.prototype.push=GB;gm.prototype.has=ZB;function YB(t,e){for(var s=-1,r=t==null?0:t.length;++s<r;)if(e(t[s],s,t))return!0;return!1}function KB(t,e){return t.has(e)}var WB=1,QB=2;function zE(t,e,s,r,a,o){var u=s&WB,h=t.length,f=e.length;if(h!=f&&!(u&&f>h))return!1;var m=o.get(t),g=o.get(e);if(m&&g)return m==e&&g==t;var x=-1,v=!0,_=s&QB?new gm:void 0;for(o.set(t,e),o.set(e,t);++x<h;){var b=t[x],N=e[x];if(r)var w=u?r(N,b,x,e,t,o):r(b,N,x,t,e,o);if(w!==void 0){if(w)continue;v=!1;break}if(_){if(!YB(e,function(E,A){if(!KB(_,A)&&(b===E||a(b,E,s,r,o)))return _.push(A)})){v=!1;break}}else if(!(b===N||a(b,N,s,r,o))){v=!1;break}}return o.delete(t),o.delete(e),v}function XB(t){var e=-1,s=Array(t.size);return t.forEach(function(r,a){s[++e]=[a,r]}),s}function JB(t){var e=-1,s=Array(t.size);return t.forEach(function(r){s[++e]=r}),s}var ez=1,tz=2,sz="[object Boolean]",rz="[object Date]",nz="[object Error]",iz="[object Map]",az="[object Number]",lz="[object RegExp]",oz="[object Set]",cz="[object String]",uz="[object Symbol]",dz="[object ArrayBuffer]",hz="[object DataView]",$j=nl?nl.prototype:void 0,x0=$j?$j.valueOf:void 0;function fz(t,e,s,r,a,o,u){switch(s){case hz:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case dz:return!(t.byteLength!=e.byteLength||!o(new pm(t),new pm(e)));case sz:case rz:case az:return Xd(+t,+e);case nz:return t.name==e.name&&t.message==e.message;case lz:case cz:return t==e+"";case iz:var h=XB;case oz:var f=r&ez;if(h||(h=JB),t.size!=e.size&&!f)return!1;var m=u.get(t);if(m)return m==e;r|=tz,u.set(t,e);var g=zE(h(t),h(e),r,a,o,u);return u.delete(t),g;case uz:if(x0)return x0.call(t)==x0.call(e)}return!1}var mz=1,pz=Object.prototype,gz=pz.hasOwnProperty;function yz(t,e,s,r,a,o){var u=s&mz,h=hy(t),f=h.length,m=hy(e),g=m.length;if(f!=g&&!u)return!1;for(var x=f;x--;){var v=h[x];if(!(u?v in e:gz.call(e,v)))return!1}var _=o.get(t),b=o.get(e);if(_&&b)return _==e&&b==t;var N=!0;o.set(t,e),o.set(e,t);for(var w=u;++x<f;){v=h[x];var E=t[v],A=e[v];if(r)var O=u?r(A,E,v,e,t,o):r(E,A,v,t,e,o);if(!(O===void 0?E===A||a(E,A,s,r,o):O)){N=!1;break}w||(w=v=="constructor")}if(N&&!w){var F=t.constructor,C=e.constructor;F!=C&&"constructor"in t&&"constructor"in e&&!(typeof F=="function"&&F instanceof F&&typeof C=="function"&&C instanceof C)&&(N=!1)}return o.delete(t),o.delete(e),N}var xz=1,Uj="[object Arguments]",Bj="[object Array]",Sf="[object Object]",bz=Object.prototype,zj=bz.hasOwnProperty;function vz(t,e,s,r,a,o){var u=to(t),h=to(e),f=u?Bj:An(t),m=h?Bj:An(e);f=f==Uj?Sf:f,m=m==Uj?Sf:m;var g=f==Sf,x=m==Sf,v=f==m;if(v&&kd(t)){if(!kd(e))return!1;u=!0,g=!1}if(v&&!g)return o||(o=new mi),u||Sx(t)?zE(t,e,s,r,a,o):fz(t,e,f,s,r,a,o);if(!(s&xz)){var _=g&&zj.call(t,"__wrapped__"),b=x&&zj.call(e,"__wrapped__");if(_||b){var N=_?t.value():t,w=b?e.value():e;return o||(o=new mi),a(N,w,s,r,o)}}return v?(o||(o=new mi),yz(t,e,s,r,a,o)):!1}function FE(t,e,s,r,a){return t===e?!0:t==null||e==null||!na(t)&&!na(e)?t!==t&&e!==e:vz(t,e,s,r,FE,a)}function wz(t){return function(e,s,r){for(var a=-1,o=Object(e),u=r(e),h=u.length;h--;){var f=u[++a];if(s(o[f],f,o)===!1)break}return e}}var _z=wz();function gy(t,e,s){(s!==void 0&&!Xd(t[e],s)||s===void 0&&!(e in t))&&_x(t,e,s)}function jz(t){return na(t)&&Im(t)}function yy(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function Nz(t){return Z9(t,RE(t))}function Sz(t,e,s,r,a,o,u){var h=yy(t,s),f=yy(e,s),m=u.get(f);if(m){gy(t,s,m);return}var g=o?o(h,f,s+"",t,e,u):void 0,x=g===void 0;if(x){var v=to(f),_=!v&&kd(f),b=!v&&!_&&Sx(f);g=f,v||_||b?to(h)?g=h:jz(h)?g=D9(h):_?(x=!1,g=qE(f,!0)):b?(x=!1,g=PE(f,!0)):g=[]:vU(f)||dy(f)?(g=h,dy(h)?g=Nz(h):(!cl(h)||wx(h))&&(g=IE(f))):x=!1}x&&(u.set(f,g),a(g,f,r,o,u),u.delete(f)),gy(t,s,g)}function HE(t,e,s,r,a){t!==e&&_z(e,function(o,u){if(a||(a=new mi),cl(o))Sz(t,e,u,s,HE,r,a);else{var h=r?r(yy(t,u),o,u+"",t,e,a):void 0;h===void 0&&(h=o),gy(t,u,h)}},RE)}function Ax(t,e){return FE(t,e)}var Ja=X9(function(t,e,s){HE(t,e,s)}),He=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(He||{});class gi{constructor(e,s,r={}){this.attrName=e,this.keyName=s;const a=He.TYPE&He.ATTRIBUTE;this.scope=r.scope!=null?r.scope&He.LEVEL|a:He.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(s=>s.name)}add(e,s){return this.canAdd(e,s)?(e.setAttribute(this.keyName,s),!0):!1}canAdd(e,s){return this.whitelist==null?!0:typeof s=="string"?this.whitelist.indexOf(s.replace(/["']/g,""))>-1:this.whitelist.indexOf(s)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const s=e.getAttribute(this.keyName);return this.canAdd(e,s)&&s?s:""}}class Tc extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const VE=class xy{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,s=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(s){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,s)}return null}create(e,s,r){const a=this.query(s);if(a==null)throw new Tc(`Unable to create ${s} blot`);const o=a,u=s instanceof Node||s.nodeType===Node.TEXT_NODE?s:o.create(r),h=new o(e,u,r);return xy.blots.set(h.domNode,h),h}find(e,s=!1){return xy.find(e,s)}query(e,s=He.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&He.LEVEL&He.BLOCK?r=this.types.block:e&He.LEVEL&He.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(a=>(r=this.classes[a],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&s&He.LEVEL&r.scope&&s&He.TYPE&r.scope?r:null}register(...e){return e.map(s=>{const r="blotName"in s,a="attrName"in s;if(!r&&!a)throw new Tc("Invalid definition");if(r&&s.blotName==="abstract")throw new Tc("Cannot register abstract class");const o=r?s.blotName:a?s.attrName:void 0;return this.types[o]=s,a?typeof s.keyName=="string"&&(this.attributes[s.keyName]=s):r&&(s.className&&(this.classes[s.className]=s),s.tagName&&(Array.isArray(s.tagName)?s.tagName=s.tagName.map(u=>u.toUpperCase()):s.tagName=s.tagName.toUpperCase(),(Array.isArray(s.tagName)?s.tagName:[s.tagName]).forEach(u=>{(this.tags[u]==null||s.className==null)&&(this.tags[u]=s)}))),s})}};VE.blots=new WeakMap;let $c=VE;function Fj(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(s=>s.indexOf(`${e}-`)===0)}class Ez extends gi{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(s=>s.split("-").slice(0,-1).join("-"))}add(e,s){return this.canAdd(e,s)?(this.remove(e),e.classList.add(`${this.keyName}-${s}`),!0):!1}remove(e){Fj(e,this.keyName).forEach(s=>{e.classList.remove(s)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const s=(Fj(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,s)?s:""}}const zn=Ez;function b0(t){const e=t.split("-"),s=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+s}class Az extends gi{static keys(e){return(e.getAttribute("style")||"").split(";").map(s=>s.split(":")[0].trim())}add(e,s){return this.canAdd(e,s)?(e.style[b0(this.keyName)]=s,!0):!1}remove(e){e.style[b0(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const s=e.style[b0(this.keyName)];return this.canAdd(e,s)?s:""}}const ul=Az;class Cz{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,s){s?e.add(this.domNode,s)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=$c.find(this.domNode);if(e==null)return;const s=gi.keys(this.domNode),r=zn.keys(this.domNode),a=ul.keys(this.domNode);s.concat(r).concat(a).forEach(o=>{const u=e.scroll.query(o,He.ATTRIBUTE);u instanceof gi&&(this.attributes[u.attrName]=u)})}copy(e){Object.keys(this.attributes).forEach(s=>{const r=this.attributes[s].value(this.domNode);e.format(s,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(s=>{this.attributes[s].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,s)=>(e[s]=this.attributes[s].value(this.domNode),e),{})}}const Bm=Cz,GE=class{constructor(e,s){this.scroll=e,this.domNode=s,$c.blots.set(s,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Tc("Blot definition missing tagName");let s,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?s=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?s=document.createElement(r):s=document.createElement(this.tagName[0])):s=document.createElement(this.tagName),this.className&&s.classList.add(this.className),s}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),$c.blots.delete(this.domNode)}deleteAt(e,s){this.isolate(e,s).remove()}formatAt(e,s,r,a){const o=this.isolate(e,s);if(this.scroll.query(r,He.BLOT)!=null&&a)o.wrap(r,a);else if(this.scroll.query(r,He.ATTRIBUTE)!=null){const u=this.scroll.create(this.statics.scope);o.wrap(u),u.format(r,a)}}insertAt(e,s,r){const a=r==null?this.scroll.create("text",s):this.scroll.create(s,r),o=this.split(e);this.parent.insertBefore(a,o||void 0)}isolate(e,s){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(s),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,s){const r=typeof e=="string"?this.scroll.create(e,s):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,s){return e===0?this:this.next}update(e,s){}wrap(e,s){const r=typeof e=="string"?this.scroll.create(e,s):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new Tc(`Cannot wrap ${e}`);return r.appendChild(this),r}};GE.blotName="abstract";let ZE=GE;const YE=class extends ZE{static value(e){return!0}index(e,s){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(s,1):-1}position(e,s){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};YE.scope=He.INLINE_BLOT;let kz=YE;const nr=kz;class Tz{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const s=e.slice(1);this.append(...s)}}at(e){const s=this.iterator();let r=s();for(;r&&e>0;)e-=1,r=s();return r}contains(e){const s=this.iterator();let r=s();for(;r;){if(r===e)return!0;r=s()}return!1}indexOf(e){const s=this.iterator();let r=s(),a=0;for(;r;){if(r===e)return a;a+=1,r=s()}return-1}insertBefore(e,s){e!=null&&(this.remove(e),e.next=s,s!=null?(e.prev=s.prev,s.prev!=null&&(s.prev.next=e),s.prev=e,s===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let s=0,r=this.head;for(;r!=null;){if(r===e)return s;s+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const s=e;return e!=null&&(e=e.next),s}}find(e,s=!1){const r=this.iterator();let a=r();for(;a;){const o=a.length();if(e<o||s&&e===o&&(a.next==null||a.next.length()!==0))return[a,e];e-=o,a=r()}return[null,0]}forEach(e){const s=this.iterator();let r=s();for(;r;)e(r),r=s()}forEachAt(e,s,r){if(s<=0)return;const[a,o]=this.find(e);let u=e-o;const h=this.iterator(a);let f=h();for(;f&&u<e+s;){const m=f.length();e>u?r(f,e-u,Math.min(s,u+m-e)):r(f,0,Math.min(m,e+s-u)),u+=m,f=h()}}map(e){return this.reduce((s,r)=>(s.push(e(r)),s),[])}reduce(e,s){const r=this.iterator();let a=r();for(;a;)s=e(s,a),a=r();return s}}function Hj(t,e){const s=e.find(t);if(s)return s;try{return e.create(t)}catch{const r=e.create(He.INLINE);return Array.from(t.childNodes).forEach(a=>{r.domNode.appendChild(a)}),t.parentNode&&t.parentNode.replaceChild(r.domNode,t),r.attach(),r}}const KE=class Va extends ZE{constructor(e,s){super(e,s),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,Va.uiClass&&this.uiNode.classList.add(Va.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Tz,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const s=Hj(e,this.scroll);this.insertBefore(s,this.children.head||void 0)}catch(s){if(s instanceof Tc)return;throw s}})}deleteAt(e,s){if(e===0&&s===this.length())return this.remove();this.children.forEachAt(e,s,(r,a,o)=>{r.deleteAt(a,o)})}descendant(e,s=0){const[r,a]=this.children.find(s);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,a]:r instanceof Va?r.descendant(e,a):[null,-1]}descendants(e,s=0,r=Number.MAX_VALUE){let a=[],o=r;return this.children.forEachAt(s,r,(u,h,f)=>{(e.blotName==null&&e(u)||e.blotName!=null&&u instanceof e)&&a.push(u),u instanceof Va&&(a=a.concat(u.descendants(e,h,o))),o-=f}),a}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(s=>{e||this.statics.allowedChildren.some(r=>s instanceof r)||(s.statics.scope===He.BLOCK_BLOT?(s.next!=null&&this.splitAfter(s),s.prev!=null&&this.splitAfter(s.prev),s.parent.unwrap(),e=!0):s instanceof Va?s.unwrap():s.remove())})}formatAt(e,s,r,a){this.children.forEachAt(e,s,(o,u,h)=>{o.formatAt(u,h,r,a)})}insertAt(e,s,r){const[a,o]=this.children.find(e);if(a)a.insertAt(o,s,r);else{const u=r==null?this.scroll.create("text",s):this.scroll.create(s,r);this.appendChild(u)}}insertBefore(e,s){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,s||null),e.parent=this,s!=null&&(r=s.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,s)=>e+s.length(),0)}moveChildren(e,s){this.children.forEach(r=>{e.insertBefore(r,s)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s)}else this.remove()}path(e,s=!1){const[r,a]=this.children.find(e,s),o=[[this,e]];return r instanceof Va?o.concat(r.path(a,s)):(r!=null&&o.push([r,a]),o)}removeChild(e){this.children.remove(e)}replaceWith(e,s){const r=typeof e=="string"?this.scroll.create(e,s):e;return r instanceof Va&&this.moveChildren(r),super.replaceWith(r)}split(e,s=!1){if(!s){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(a,o,u)=>{const h=a.split(o,s);h!=null&&r.appendChild(h)}),r}splitAfter(e){const s=this.clone();for(;e.next!=null;)s.appendChild(e.next);return this.parent&&this.parent.insertBefore(s,this.next||void 0),s}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,s){const r=[],a=[];e.forEach(o=>{o.target===this.domNode&&o.type==="childList"&&(r.push(...o.addedNodes),a.push(...o.removedNodes))}),a.forEach(o=>{if(o.parentNode!=null&&o.tagName!=="IFRAME"&&document.body.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const u=this.scroll.find(o);u!=null&&(u.domNode.parentNode==null||u.domNode.parentNode===this.domNode)&&u.detach()}),r.filter(o=>o.parentNode===this.domNode&&o!==this.uiNode).sort((o,u)=>o===u?0:o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(o=>{let u=null;o.nextSibling!=null&&(u=this.scroll.find(o.nextSibling));const h=Hj(o,this.scroll);(h.next!==u||h.next==null)&&(h.parent!=null&&h.parent.removeChild(this),this.insertBefore(h,u||void 0))}),this.enforceAllowedChildren()}};KE.uiClass="";let Oz=KE;const qn=Oz;function Rz(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}const vc=class wc extends qn{static create(e){return super.create(e)}static formats(e,s){const r=s.query(wc.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,s){super(e,s),this.attributes=new Bm(this.domNode)}format(e,s){if(e===this.statics.blotName&&!s)this.children.forEach(r=>{r instanceof wc||(r=r.wrap(wc.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,He.INLINE);if(r==null)return;r instanceof gi?this.attributes.attribute(r,s):s&&(e!==this.statics.blotName||this.formats()[e]!==s)&&this.replaceWith(e,s)}}formats(){const e=this.attributes.values(),s=this.statics.formats(this.domNode,this.scroll);return s!=null&&(e[this.statics.blotName]=s),e}formatAt(e,s,r,a){this.formats()[r]!=null||this.scroll.query(r,He.ATTRIBUTE)?this.isolate(e,s).format(r,a):super.formatAt(e,s,r,a)}optimize(e){super.optimize(e);const s=this.formats();if(Object.keys(s).length===0)return this.unwrap();const r=this.next;r instanceof wc&&r.prev===this&&Rz(s,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,s){const r=super.replaceWith(e,s);return this.attributes.copy(r),r}update(e,s){super.update(e,s),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,s){const r=super.wrap(e,s);return r instanceof wc&&this.attributes.move(r),r}};vc.allowedChildren=[vc,nr],vc.blotName="inline",vc.scope=He.INLINE_BLOT,vc.tagName="SPAN";let Mz=vc;const Cx=Mz,_c=class by extends qn{static create(e){return super.create(e)}static formats(e,s){const r=s.query(by.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,s){super(e,s),this.attributes=new Bm(this.domNode)}format(e,s){const r=this.scroll.query(e,He.BLOCK);r!=null&&(r instanceof gi?this.attributes.attribute(r,s):e===this.statics.blotName&&!s?this.replaceWith(by.blotName):s&&(e!==this.statics.blotName||this.formats()[e]!==s)&&this.replaceWith(e,s))}formats(){const e=this.attributes.values(),s=this.statics.formats(this.domNode,this.scroll);return s!=null&&(e[this.statics.blotName]=s),e}formatAt(e,s,r,a){this.scroll.query(r,He.BLOCK)!=null?this.format(r,a):super.formatAt(e,s,r,a)}insertAt(e,s,r){if(r==null||this.scroll.query(s,He.INLINE)!=null)super.insertAt(e,s,r);else{const a=this.split(e);if(a!=null){const o=this.scroll.create(s,r);a.parent.insertBefore(o,a)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,s){const r=super.replaceWith(e,s);return this.attributes.copy(r),r}update(e,s){super.update(e,s),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};_c.blotName="block",_c.scope=He.BLOCK_BLOT,_c.tagName="P",_c.allowedChildren=[Cx,_c,nr];let Dz=_c;const Rd=Dz,vy=class extends qn{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,s){super.deleteAt(e,s),this.enforceAllowedChildren()}formatAt(e,s,r,a){super.formatAt(e,s,r,a),this.enforceAllowedChildren()}insertAt(e,s,r){super.insertAt(e,s,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};vy.blotName="container",vy.scope=He.BLOCK_BLOT;let Lz=vy;const zm=Lz;class qz extends nr{static formats(e,s){}format(e,s){super.formatAt(0,this.length(),e,s)}formatAt(e,s,r,a){e===0&&s===this.length()?this.format(r,a):super.formatAt(e,s,r,a)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Vr=qz,Pz={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Iz=100,jc=class extends qn{constructor(e,s){super(null,s),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,Pz),this.attach()}create(e,s){return this.registry.create(this,e,s)}find(e,s=!1){const r=this.registry.find(e,s);return r?r.scroll===this?r:s?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,s=He.ANY){return this.registry.query(e,s)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,s){this.update(),e===0&&s===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,s)}formatAt(e,s,r,a){this.update(),super.formatAt(e,s,r,a)}insertAt(e,s,r){this.update(),super.insertAt(e,s,r)}optimize(e=[],s={}){super.optimize(s);const r=s.mutationsMap||new WeakMap;let a=Array.from(this.observer.takeRecords());for(;a.length>0;)e.push(a.pop());const o=(f,m=!0)=>{f==null||f===this||f.domNode.parentNode!=null&&(r.has(f.domNode)||r.set(f.domNode,[]),m&&o(f.parent))},u=f=>{r.has(f.domNode)&&(f instanceof qn&&f.children.forEach(u),r.delete(f.domNode),f.optimize(s))};let h=e;for(let f=0;h.length>0;f+=1){if(f>=Iz)throw new Error("[Parchment] Maximum optimize iterations reached");for(h.forEach(m=>{const g=this.find(m.target,!0);g!=null&&(g.domNode===m.target&&(m.type==="childList"?(o(this.find(m.previousSibling,!1)),Array.from(m.addedNodes).forEach(x=>{const v=this.find(x,!1);o(v,!1),v instanceof qn&&v.children.forEach(_=>{o(_,!1)})})):m.type==="attributes"&&o(g.prev)),o(g))}),this.children.forEach(u),h=Array.from(this.observer.takeRecords()),a=h.slice();a.length>0;)e.push(a.pop())}}update(e,s={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(a=>{const o=this.find(a.target,!0);return o==null?null:r.has(o.domNode)?(r.get(o.domNode).push(a),null):(r.set(o.domNode,[a]),o)}).forEach(a=>{a!=null&&a!==this&&r.has(a.domNode)&&a.update(r.get(a.domNode)||[],s)}),s.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),s),this.optimize(e,s)}};jc.blotName="scroll",jc.defaultChild=Rd,jc.allowedChildren=[Rd,zm],jc.scope=He.BLOCK_BLOT,jc.tagName="DIV";let $z=jc;const kx=$z,wy=class WE extends nr{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,s){super(e,s),this.text=this.statics.value(this.domNode)}deleteAt(e,s){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+s)}index(e,s){return this.domNode===e?s:-1}insertAt(e,s,r){r==null?(this.text=this.text.slice(0,e)+s+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,s,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof WE&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,s=!1){return[this.domNode,e]}split(e,s=!1){if(!s){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,s){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};wy.blotName="text",wy.scope=He.INLINE_BLOT;let Uz=wy;const ym=Uz,Bz=Object.freeze(Object.defineProperty({__proto__:null,Attributor:gi,AttributorStore:Bm,BlockBlot:Rd,ClassAttributor:zn,ContainerBlot:zm,EmbedBlot:Vr,InlineBlot:Cx,LeafBlot:nr,ParentBlot:qn,Registry:$c,Scope:He,ScrollBlot:kx,StyleAttributor:ul,TextBlot:ym},Symbol.toStringTag,{value:"Module"}));var Ef={exports:{}},v0,Vj;function zz(){if(Vj)return v0;Vj=1;var t=-1,e=1,s=0;function r(R,D,P,H,J){if(R===D)return R?[[s,R]]:[];if(P!=null){var q=k(R,D,P);if(q)return q}var Z=h(R,D),Q=R.substring(0,Z);R=R.substring(Z),D=D.substring(Z),Z=m(R,D);var ue=R.substring(R.length-Z);R=R.substring(0,R.length-Z),D=D.substring(0,D.length-Z);var U=a(R,D);return Q&&U.unshift([s,Q]),ue&&U.push([s,ue]),A(U,J),H&&x(U),U}function a(R,D){var P;if(!R)return[[e,D]];if(!D)return[[t,R]];var H=R.length>D.length?R:D,J=R.length>D.length?D:R,q=H.indexOf(J);if(q!==-1)return P=[[e,H.substring(0,q)],[s,J],[e,H.substring(q+J.length)]],R.length>D.length&&(P[0][0]=P[2][0]=t),P;if(J.length===1)return[[t,R],[e,D]];var Z=g(R,D);if(Z){var Q=Z[0],ue=Z[1],U=Z[2],X=Z[3],le=Z[4],ee=r(Q,U),ge=r(ue,X);return ee.concat([[s,le]],ge)}return o(R,D)}function o(R,D){for(var P=R.length,H=D.length,J=Math.ceil((P+H)/2),q=J,Z=2*J,Q=new Array(Z),ue=new Array(Z),U=0;U<Z;U++)Q[U]=-1,ue[U]=-1;Q[q+1]=0,ue[q+1]=0;for(var X=P-H,le=X%2!==0,ee=0,ge=0,we=0,Ce=0,Me=0;Me<J;Me++){for(var Ne=-Me+ee;Ne<=Me-ge;Ne+=2){var Oe=q+Ne,De;Ne===-Me||Ne!==Me&&Q[Oe-1]<Q[Oe+1]?De=Q[Oe+1]:De=Q[Oe-1]+1;for(var Re=De-Ne;De<P&&Re<H&&R.charAt(De)===D.charAt(Re);)De++,Re++;if(Q[Oe]=De,De>P)ge+=2;else if(Re>H)ee+=2;else if(le){var qe=q+X-Ne;if(qe>=0&&qe<Z&&ue[qe]!==-1){var Ze=P-ue[qe];if(De>=Ze)return u(R,D,De,Re)}}}for(var Ke=-Me+we;Ke<=Me-Ce;Ke+=2){var qe=q+Ke,Ze;Ke===-Me||Ke!==Me&&ue[qe-1]<ue[qe+1]?Ze=ue[qe+1]:Ze=ue[qe-1]+1;for(var Je=Ze-Ke;Ze<P&&Je<H&&R.charAt(P-Ze-1)===D.charAt(H-Je-1);)Ze++,Je++;if(ue[qe]=Ze,Ze>P)Ce+=2;else if(Je>H)we+=2;else if(!le){var Oe=q+X-Ke;if(Oe>=0&&Oe<Z&&Q[Oe]!==-1){var De=Q[Oe],Re=q+De-Oe;if(Ze=P-Ze,De>=Ze)return u(R,D,De,Re)}}}}return[[t,R],[e,D]]}function u(R,D,P,H){var J=R.substring(0,P),q=D.substring(0,H),Z=R.substring(P),Q=D.substring(H),ue=r(J,q),U=r(Z,Q);return ue.concat(U)}function h(R,D){if(!R||!D||R.charAt(0)!==D.charAt(0))return 0;for(var P=0,H=Math.min(R.length,D.length),J=H,q=0;P<J;)R.substring(q,J)==D.substring(q,J)?(P=J,q=P):H=J,J=Math.floor((H-P)/2+P);return O(R.charCodeAt(J-1))&&J--,J}function f(R,D){var P=R.length,H=D.length;if(P==0||H==0)return 0;P>H?R=R.substring(P-H):P<H&&(D=D.substring(0,P));var J=Math.min(P,H);if(R==D)return J;for(var q=0,Z=1;;){var Q=R.substring(J-Z),ue=D.indexOf(Q);if(ue==-1)return q;Z+=ue,(ue==0||R.substring(J-Z)==D.substring(0,Z))&&(q=Z,Z++)}}function m(R,D){if(!R||!D||R.slice(-1)!==D.slice(-1))return 0;for(var P=0,H=Math.min(R.length,D.length),J=H,q=0;P<J;)R.substring(R.length-J,R.length-q)==D.substring(D.length-J,D.length-q)?(P=J,q=P):H=J,J=Math.floor((H-P)/2+P);return F(R.charCodeAt(R.length-J))&&J--,J}function g(R,D){var P=R.length>D.length?R:D,H=R.length>D.length?D:R;if(P.length<4||H.length*2<P.length)return null;function J(ge,we,Ce){for(var Me=ge.substring(Ce,Ce+Math.floor(ge.length/4)),Ne=-1,Oe="",De,Re,qe,Ze;(Ne=we.indexOf(Me,Ne+1))!==-1;){var Ke=h(ge.substring(Ce),we.substring(Ne)),Je=m(ge.substring(0,Ce),we.substring(0,Ne));Oe.length<Je+Ke&&(Oe=we.substring(Ne-Je,Ne)+we.substring(Ne,Ne+Ke),De=ge.substring(0,Ce-Je),Re=ge.substring(Ce+Ke),qe=we.substring(0,Ne-Je),Ze=we.substring(Ne+Ke))}return Oe.length*2>=ge.length?[De,Re,qe,Ze,Oe]:null}var q=J(P,H,Math.ceil(P.length/4)),Z=J(P,H,Math.ceil(P.length/2)),Q;if(!q&&!Z)return null;Z?q?Q=q[4].length>Z[4].length?q:Z:Q=Z:Q=q;var ue,U,X,le;R.length>D.length?(ue=Q[0],U=Q[1],X=Q[2],le=Q[3]):(X=Q[0],le=Q[1],ue=Q[2],U=Q[3]);var ee=Q[4];return[ue,U,X,le,ee]}function x(R){for(var D=!1,P=[],H=0,J=null,q=0,Z=0,Q=0,ue=0,U=0;q<R.length;)R[q][0]==s?(P[H++]=q,Z=ue,Q=U,ue=0,U=0,J=R[q][1]):(R[q][0]==e?ue+=R[q][1].length:U+=R[q][1].length,J&&J.length<=Math.max(Z,Q)&&J.length<=Math.max(ue,U)&&(R.splice(P[H-1],0,[t,J]),R[P[H-1]+1][0]=e,H--,H--,q=H>0?P[H-1]:-1,Z=0,Q=0,ue=0,U=0,J=null,D=!0)),q++;for(D&&A(R),E(R),q=1;q<R.length;){if(R[q-1][0]==t&&R[q][0]==e){var X=R[q-1][1],le=R[q][1],ee=f(X,le),ge=f(le,X);ee>=ge?(ee>=X.length/2||ee>=le.length/2)&&(R.splice(q,0,[s,le.substring(0,ee)]),R[q-1][1]=X.substring(0,X.length-ee),R[q+1][1]=le.substring(ee),q++):(ge>=X.length/2||ge>=le.length/2)&&(R.splice(q,0,[s,X.substring(0,ge)]),R[q-1][0]=e,R[q-1][1]=le.substring(0,le.length-ge),R[q+1][0]=t,R[q+1][1]=X.substring(ge),q++),q++}q++}}var v=/[^a-zA-Z0-9]/,_=/\s/,b=/[\r\n]/,N=/\n\r?\n$/,w=/^\r?\n\r?\n/;function E(R){function D(ge,we){if(!ge||!we)return 6;var Ce=ge.charAt(ge.length-1),Me=we.charAt(0),Ne=Ce.match(v),Oe=Me.match(v),De=Ne&&Ce.match(_),Re=Oe&&Me.match(_),qe=De&&Ce.match(b),Ze=Re&&Me.match(b),Ke=qe&&ge.match(N),Je=Ze&&we.match(w);return Ke||Je?5:qe||Ze?4:Ne&&!De&&Re?3:De||Re?2:Ne||Oe?1:0}for(var P=1;P<R.length-1;){if(R[P-1][0]==s&&R[P+1][0]==s){var H=R[P-1][1],J=R[P][1],q=R[P+1][1],Z=m(H,J);if(Z){var Q=J.substring(J.length-Z);H=H.substring(0,H.length-Z),J=Q+J.substring(0,J.length-Z),q=Q+q}for(var ue=H,U=J,X=q,le=D(H,J)+D(J,q);J.charAt(0)===q.charAt(0);){H+=J.charAt(0),J=J.substring(1)+q.charAt(0),q=q.substring(1);var ee=D(H,J)+D(J,q);ee>=le&&(le=ee,ue=H,U=J,X=q)}R[P-1][1]!=ue&&(ue?R[P-1][1]=ue:(R.splice(P-1,1),P--),R[P][1]=U,X?R[P+1][1]=X:(R.splice(P+1,1),P--))}P++}}function A(R,D){R.push([s,""]);for(var P=0,H=0,J=0,q="",Z="",Q;P<R.length;){if(P<R.length-1&&!R[P][1]){R.splice(P,1);continue}switch(R[P][0]){case e:J++,Z+=R[P][1],P++;break;case t:H++,q+=R[P][1],P++;break;case s:var ue=P-J-H-1;if(D){if(ue>=0&&L(R[ue][1])){var U=R[ue][1].slice(-1);if(R[ue][1]=R[ue][1].slice(0,-1),q=U+q,Z=U+Z,!R[ue][1]){R.splice(ue,1),P--;var X=ue-1;R[X]&&R[X][0]===e&&(J++,Z=R[X][1]+Z,X--),R[X]&&R[X][0]===t&&(H++,q=R[X][1]+q,X--),ue=X}}if(C(R[P][1])){var U=R[P][1].charAt(0);R[P][1]=R[P][1].slice(1),q+=U,Z+=U}}if(P<R.length-1&&!R[P][1]){R.splice(P,1);break}if(q.length>0||Z.length>0){q.length>0&&Z.length>0&&(Q=h(Z,q),Q!==0&&(ue>=0?R[ue][1]+=Z.substring(0,Q):(R.splice(0,0,[s,Z.substring(0,Q)]),P++),Z=Z.substring(Q),q=q.substring(Q)),Q=m(Z,q),Q!==0&&(R[P][1]=Z.substring(Z.length-Q)+R[P][1],Z=Z.substring(0,Z.length-Q),q=q.substring(0,q.length-Q)));var le=J+H;q.length===0&&Z.length===0?(R.splice(P-le,le),P=P-le):q.length===0?(R.splice(P-le,le,[e,Z]),P=P-le+1):Z.length===0?(R.splice(P-le,le,[t,q]),P=P-le+1):(R.splice(P-le,le,[t,q],[e,Z]),P=P-le+2)}P!==0&&R[P-1][0]===s?(R[P-1][1]+=R[P][1],R.splice(P,1)):P++,J=0,H=0,q="",Z="";break}}R[R.length-1][1]===""&&R.pop();var ee=!1;for(P=1;P<R.length-1;)R[P-1][0]===s&&R[P+1][0]===s&&(R[P][1].substring(R[P][1].length-R[P-1][1].length)===R[P-1][1]?(R[P][1]=R[P-1][1]+R[P][1].substring(0,R[P][1].length-R[P-1][1].length),R[P+1][1]=R[P-1][1]+R[P+1][1],R.splice(P-1,1),ee=!0):R[P][1].substring(0,R[P+1][1].length)==R[P+1][1]&&(R[P-1][1]+=R[P+1][1],R[P][1]=R[P][1].substring(R[P+1][1].length)+R[P+1][1],R.splice(P+1,1),ee=!0)),P++;ee&&A(R,D)}function O(R){return R>=55296&&R<=56319}function F(R){return R>=56320&&R<=57343}function C(R){return F(R.charCodeAt(0))}function L(R){return O(R.charCodeAt(R.length-1))}function B(R){for(var D=[],P=0;P<R.length;P++)R[P][1].length>0&&D.push(R[P]);return D}function S(R,D,P,H){return L(R)||C(H)?null:B([[s,R],[t,D],[e,P],[s,H]])}function k(R,D,P){var H=typeof P=="number"?{index:P,length:0}:P.oldRange,J=typeof P=="number"?null:P.newRange,q=R.length,Z=D.length;if(H.length===0&&(J===null||J.length===0)){var Q=H.index,ue=R.slice(0,Q),U=R.slice(Q),X=J?J.index:null;e:{var le=Q+Z-q;if(X!==null&&X!==le||le<0||le>Z)break e;var ee=D.slice(0,le),ge=D.slice(le);if(ge!==U)break e;var we=Math.min(Q,le),Ce=ue.slice(0,we),Me=ee.slice(0,we);if(Ce!==Me)break e;var Ne=ue.slice(we),Oe=ee.slice(we);return S(Ce,Ne,Oe,U)}e:{if(X!==null&&X!==Q)break e;var De=Q,ee=D.slice(0,De),ge=D.slice(De);if(ee!==ue)break e;var Re=Math.min(q-De,Z-De),qe=U.slice(U.length-Re),Ze=ge.slice(ge.length-Re);if(qe!==Ze)break e;var Ne=U.slice(0,U.length-Re),Oe=ge.slice(0,ge.length-Re);return S(ue,Ne,Oe,qe)}}if(H.length>0&&J&&J.length===0)e:{var Ce=R.slice(0,H.index),qe=R.slice(H.index+H.length),we=Ce.length,Re=qe.length;if(Z<we+Re)break e;var Me=D.slice(0,we),Ze=D.slice(Z-Re);if(Ce!==Me||qe!==Ze)break e;var Ne=R.slice(we,q-Re),Oe=D.slice(we,Z-Re);return S(Ce,Ne,Oe,qe)}return null}function z(R,D,P,H){return r(R,D,P,H,!0)}return z.INSERT=e,z.DELETE=t,z.EQUAL=s,v0=z,v0}var dd={exports:{}};dd.exports;var Gj;function QE(){return Gj||(Gj=1,function(t,e){var s=200,r="__lodash_hash_undefined__",a=9007199254740991,o="[object Arguments]",u="[object Array]",h="[object Boolean]",f="[object Date]",m="[object Error]",g="[object Function]",x="[object GeneratorFunction]",v="[object Map]",_="[object Number]",b="[object Object]",N="[object Promise]",w="[object RegExp]",E="[object Set]",A="[object String]",O="[object Symbol]",F="[object WeakMap]",C="[object ArrayBuffer]",L="[object DataView]",B="[object Float32Array]",S="[object Float64Array]",k="[object Int8Array]",z="[object Int16Array]",R="[object Int32Array]",D="[object Uint8Array]",P="[object Uint8ClampedArray]",H="[object Uint16Array]",J="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,Z=/\w*$/,Q=/^\[object .+?Constructor\]$/,ue=/^(?:0|[1-9]\d*)$/,U={};U[o]=U[u]=U[C]=U[L]=U[h]=U[f]=U[B]=U[S]=U[k]=U[z]=U[R]=U[v]=U[_]=U[b]=U[w]=U[E]=U[A]=U[O]=U[D]=U[P]=U[H]=U[J]=!0,U[m]=U[g]=U[F]=!1;var X=typeof Ya=="object"&&Ya&&Ya.Object===Object&&Ya,le=typeof self=="object"&&self&&self.Object===Object&&self,ee=X||le||Function("return this")(),ge=e&&!e.nodeType&&e,we=ge&&!0&&t&&!t.nodeType&&t,Ce=we&&we.exports===ge;function Me(j,$){return j.set($[0],$[1]),j}function Ne(j,$){return j.add($),j}function Oe(j,$){for(var K=-1,pe=j?j.length:0;++K<pe&&$(j[K],K,j)!==!1;);return j}function De(j,$){for(var K=-1,pe=$.length,tt=j.length;++K<pe;)j[tt+K]=$[K];return j}function Re(j,$,K,pe){for(var tt=-1,Ve=j?j.length:0;++tt<Ve;)K=$(K,j[tt],tt,j);return K}function qe(j,$){for(var K=-1,pe=Array(j);++K<j;)pe[K]=$(K);return pe}function Ze(j,$){return j?.[$]}function Ke(j){var $=!1;if(j!=null&&typeof j.toString!="function")try{$=!!(j+"")}catch{}return $}function Je(j){var $=-1,K=Array(j.size);return j.forEach(function(pe,tt){K[++$]=[tt,pe]}),K}function rt(j,$){return function(K){return j($(K))}}function bt(j){var $=-1,K=Array(j.size);return j.forEach(function(pe){K[++$]=pe}),K}var ut=Array.prototype,vt=Function.prototype,G=Object.prototype,se=ee["__core-js_shared__"],he=function(){var j=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return j?"Symbol(src)_1."+j:""}(),ke=vt.toString,Se=G.hasOwnProperty,Ee=G.toString,Te=RegExp("^"+ke.call(Se).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pe=Ce?ee.Buffer:void 0,We=ee.Symbol,pt=ee.Uint8Array,es=rt(Object.getPrototypeOf,Object),ts=Object.create,Ss=G.propertyIsEnumerable,Ms=ut.splice,Gs=Object.getOwnPropertySymbols,Qs=Pe?Pe.isBuffer:void 0,Gr=rt(Object.keys,Object),mr=qs(ee,"DataView"),Zr=qs(ee,"Map"),pr=qs(ee,"Promise"),vi=qs(ee,"Set"),wi=qs(ee,"WeakMap"),Cr=qs(Object,"create"),dl=ns(mr),Vn=ns(Zr),oa=ns(pr),_i=ns(vi),ji=ns(wi),mn=We?We.prototype:void 0,bo=mn?mn.valueOf:void 0;function Ds(j){var $=-1,K=j?j.length:0;for(this.clear();++$<K;){var pe=j[$];this.set(pe[0],pe[1])}}function xs(){this.__data__=Cr?Cr(null):{}}function Ls(j){return this.has(j)&&delete this.__data__[j]}function Gn(j){var $=this.__data__;if(Cr){var K=$[j];return K===r?void 0:K}return Se.call($,j)?$[j]:void 0}function ca(j){var $=this.__data__;return Cr?$[j]!==void 0:Se.call($,j)}function hl(j,$){var K=this.__data__;return K[j]=Cr&&$===void 0?r:$,this}Ds.prototype.clear=xs,Ds.prototype.delete=Ls,Ds.prototype.get=Gn,Ds.prototype.has=ca,Ds.prototype.set=hl;function Es(j){var $=-1,K=j?j.length:0;for(this.clear();++$<K;){var pe=j[$];this.set(pe[0],pe[1])}}function vo(){this.__data__=[]}function Ni(j){var $=this.__data__,K=Wn($,j);if(K<0)return!1;var pe=$.length-1;return K==pe?$.pop():Ms.call($,K,1),!0}function fl(j){var $=this.__data__,K=Wn($,j);return K<0?void 0:$[K][1]}function Zn(j){return Wn(this.__data__,j)>-1}function Yn(j,$){var K=this.__data__,pe=Wn(K,j);return pe<0?K.push([j,$]):K[pe][1]=$,this}Es.prototype.clear=vo,Es.prototype.delete=Ni,Es.prototype.get=fl,Es.prototype.has=Zn,Es.prototype.set=Yn;function ss(j){var $=-1,K=j?j.length:0;for(this.clear();++$<K;){var pe=j[$];this.set(pe[0],pe[1])}}function Kn(){this.__data__={hash:new Ds,map:new(Zr||Es),string:new Ds}}function rs(j){return Xn(this,j).delete(j)}function wo(j){return Xn(this,j).get(j)}function _o(j){return Xn(this,j).has(j)}function pn(j,$){return Xn(this,j).set(j,$),this}ss.prototype.clear=Kn,ss.prototype.delete=rs,ss.prototype.get=wo,ss.prototype.has=_o,ss.prototype.set=pn;function ls(j){this.__data__=new Es(j)}function su(){this.__data__=new Es}function jo(j){return this.__data__.delete(j)}function No(j){return this.__data__.get(j)}function ru(j){return this.__data__.has(j)}function ua(j,$){var K=this.__data__;if(K instanceof Es){var pe=K.__data__;if(!Zr||pe.length<s-1)return pe.push([j,$]),this;K=this.__data__=new ss(pe)}return K.set(j,$),this}ls.prototype.clear=su,ls.prototype.delete=jo,ls.prototype.get=No,ls.prototype.has=ru,ls.prototype.set=ua;function gn(j,$){var K=fa(j)||Jn(j)?qe(j.length,String):[],pe=K.length,tt=!!pe;for(var Ve in j)Se.call(j,Ve)&&!(tt&&(Ve=="length"||lu(Ve,pe)))&&K.push(Ve);return K}function gr(j,$,K){var pe=j[$];(!(Se.call(j,$)&&vl(pe,K))||K===void 0&&!($ in j))&&(j[$]=K)}function Wn(j,$){for(var K=j.length;K--;)if(vl(j[K][0],$))return K;return-1}function kr(j,$){return j&&Ai($,pa($),j)}function Yr(j,$,K,pe,tt,Ve,gt){var dt;if(pe&&(dt=Ve?pe(j,tt,Ve,gt):pe(j)),dt!==void 0)return dt;if(!xr(j))return j;var It=fa(j);if(It){if(dt=Co(j),!$)return Eo(j,dt)}else{var xt=Wr(j),As=xt==g||xt==x;if(ma(j))return Si(j,$);if(xt==b||xt==o||As&&!Ve){if(Ke(j))return Ve?j:{};if(dt=yr(As?{}:j),!$)return Qn(j,kr(dt,j))}else{if(!U[xt])return Ve?j:{};dt=au(j,xt,Yr,$)}}gt||(gt=new ls);var er=gt.get(j);if(er)return er;if(gt.set(j,dt),!It)var os=K?Ao(j):pa(j);return Oe(os||j,function(Ps,cs){os&&(cs=Ps,Ps=j[cs]),gr(dt,cs,Yr(Ps,$,K,pe,cs,j,gt))}),dt}function ml(j){return xr(j)?ts(j):{}}function pl(j,$,K){var pe=$(j);return fa(j)?pe:De(pe,K(j))}function nu(j){return Ee.call(j)}function So(j){if(!xr(j)||bl(j))return!1;var $=bn(j)||Ke(j)?Te:Q;return $.test(ns(j))}function Xs(j){if(!ha(j))return Gr(j);var $=[];for(var K in Object(j))Se.call(j,K)&&K!="constructor"&&$.push(K);return $}function Si(j,$){if($)return j.slice();var K=new j.constructor(j.length);return j.copy(K),K}function gl(j){var $=new j.constructor(j.byteLength);return new pt($).set(new pt(j)),$}function Kr(j,$){var K=$?gl(j.buffer):j.buffer;return new j.constructor(K,j.byteOffset,j.byteLength)}function yl(j,$,K){var pe=$?K(Je(j),!0):Je(j);return Re(pe,Me,new j.constructor)}function Ei(j){var $=new j.constructor(j.source,Z.exec(j));return $.lastIndex=j.lastIndex,$}function iu(j,$,K){var pe=$?K(bt(j),!0):bt(j);return Re(pe,Ne,new j.constructor)}function Js(j){return bo?Object(bo.call(j)):{}}function xl(j,$){var K=$?gl(j.buffer):j.buffer;return new j.constructor(K,j.byteOffset,j.length)}function Eo(j,$){var K=-1,pe=j.length;for($||($=Array(pe));++K<pe;)$[K]=j[K];return $}function Ai(j,$,K,pe){K||(K={});for(var tt=-1,Ve=$.length;++tt<Ve;){var gt=$[tt],dt=void 0;gr(K,gt,dt===void 0?j[gt]:dt)}return K}function Qn(j,$){return Ai(j,yn(j),$)}function Ao(j){return pl(j,pa,yn)}function Xn(j,$){var K=j.__data__;return da($)?K[typeof $=="string"?"string":"hash"]:K.map}function qs(j,$){var K=Ze(j,$);return So(K)?K:void 0}var yn=Gs?rt(Gs,Object):ga,Wr=nu;(mr&&Wr(new mr(new ArrayBuffer(1)))!=L||Zr&&Wr(new Zr)!=v||pr&&Wr(pr.resolve())!=N||vi&&Wr(new vi)!=E||wi&&Wr(new wi)!=F)&&(Wr=function(j){var $=Ee.call(j),K=$==b?j.constructor:void 0,pe=K?ns(K):void 0;if(pe)switch(pe){case dl:return L;case Vn:return v;case oa:return N;case _i:return E;case ji:return F}return $});function Co(j){var $=j.length,K=j.constructor($);return $&&typeof j[0]=="string"&&Se.call(j,"index")&&(K.index=j.index,K.input=j.input),K}function yr(j){return typeof j.constructor=="function"&&!ha(j)?ml(es(j)):{}}function au(j,$,K,pe){var tt=j.constructor;switch($){case C:return gl(j);case h:case f:return new tt(+j);case L:return Kr(j,pe);case B:case S:case k:case z:case R:case D:case P:case H:case J:return xl(j,pe);case v:return yl(j,pe,K);case _:case A:return new tt(j);case w:return Ei(j);case E:return iu(j,pe,K);case O:return Js(j)}}function lu(j,$){return $=$??a,!!$&&(typeof j=="number"||ue.test(j))&&j>-1&&j%1==0&&j<$}function da(j){var $=typeof j;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?j!=="__proto__":j===null}function bl(j){return!!he&&he in j}function ha(j){var $=j&&j.constructor,K=typeof $=="function"&&$.prototype||G;return j===K}function ns(j){if(j!=null){try{return ke.call(j)}catch{}try{return j+""}catch{}}return""}function xn(j){return Yr(j,!0,!0)}function vl(j,$){return j===$||j!==j&&$!==$}function Jn(j){return Tr(j)&&Se.call(j,"callee")&&(!Ss.call(j,"callee")||Ee.call(j)==o)}var fa=Array.isArray;function Qr(j){return j!=null&&Or(j.length)&&!bn(j)}function Tr(j){return Ci(j)&&Qr(j)}var ma=Qs||ya;function bn(j){var $=xr(j)?Ee.call(j):"";return $==g||$==x}function Or(j){return typeof j=="number"&&j>-1&&j%1==0&&j<=a}function xr(j){var $=typeof j;return!!j&&($=="object"||$=="function")}function Ci(j){return!!j&&typeof j=="object"}function pa(j){return Qr(j)?gn(j):Xs(j)}function ga(){return[]}function ya(){return!1}t.exports=xn}(dd,dd.exports)),dd.exports}var hd={exports:{}};hd.exports;var Zj;function XE(){return Zj||(Zj=1,function(t,e){var s=200,r="__lodash_hash_undefined__",a=1,o=2,u=9007199254740991,h="[object Arguments]",f="[object Array]",m="[object AsyncFunction]",g="[object Boolean]",x="[object Date]",v="[object Error]",_="[object Function]",b="[object GeneratorFunction]",N="[object Map]",w="[object Number]",E="[object Null]",A="[object Object]",O="[object Promise]",F="[object Proxy]",C="[object RegExp]",L="[object Set]",B="[object String]",S="[object Symbol]",k="[object Undefined]",z="[object WeakMap]",R="[object ArrayBuffer]",D="[object DataView]",P="[object Float32Array]",H="[object Float64Array]",J="[object Int8Array]",q="[object Int16Array]",Z="[object Int32Array]",Q="[object Uint8Array]",ue="[object Uint8ClampedArray]",U="[object Uint16Array]",X="[object Uint32Array]",le=/[\\^$.*+?()[\]{}|]/g,ee=/^\[object .+?Constructor\]$/,ge=/^(?:0|[1-9]\d*)$/,we={};we[P]=we[H]=we[J]=we[q]=we[Z]=we[Q]=we[ue]=we[U]=we[X]=!0,we[h]=we[f]=we[R]=we[g]=we[D]=we[x]=we[v]=we[_]=we[N]=we[w]=we[A]=we[C]=we[L]=we[B]=we[z]=!1;var Ce=typeof Ya=="object"&&Ya&&Ya.Object===Object&&Ya,Me=typeof self=="object"&&self&&self.Object===Object&&self,Ne=Ce||Me||Function("return this")(),Oe=e&&!e.nodeType&&e,De=Oe&&!0&&t&&!t.nodeType&&t,Re=De&&De.exports===Oe,qe=Re&&Ce.process,Ze=function(){try{return qe&&qe.binding&&qe.binding("util")}catch{}}(),Ke=Ze&&Ze.isTypedArray;function Je(j,$){for(var K=-1,pe=j==null?0:j.length,tt=0,Ve=[];++K<pe;){var gt=j[K];$(gt,K,j)&&(Ve[tt++]=gt)}return Ve}function rt(j,$){for(var K=-1,pe=$.length,tt=j.length;++K<pe;)j[tt+K]=$[K];return j}function bt(j,$){for(var K=-1,pe=j==null?0:j.length;++K<pe;)if($(j[K],K,j))return!0;return!1}function ut(j,$){for(var K=-1,pe=Array(j);++K<j;)pe[K]=$(K);return pe}function vt(j){return function($){return j($)}}function G(j,$){return j.has($)}function se(j,$){return j?.[$]}function he(j){var $=-1,K=Array(j.size);return j.forEach(function(pe,tt){K[++$]=[tt,pe]}),K}function ke(j,$){return function(K){return j($(K))}}function Se(j){var $=-1,K=Array(j.size);return j.forEach(function(pe){K[++$]=pe}),K}var Ee=Array.prototype,Te=Function.prototype,Pe=Object.prototype,We=Ne["__core-js_shared__"],pt=Te.toString,es=Pe.hasOwnProperty,ts=function(){var j=/[^.]+$/.exec(We&&We.keys&&We.keys.IE_PROTO||"");return j?"Symbol(src)_1."+j:""}(),Ss=Pe.toString,Ms=RegExp("^"+pt.call(es).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gs=Re?Ne.Buffer:void 0,Qs=Ne.Symbol,Gr=Ne.Uint8Array,mr=Pe.propertyIsEnumerable,Zr=Ee.splice,pr=Qs?Qs.toStringTag:void 0,vi=Object.getOwnPropertySymbols,wi=Gs?Gs.isBuffer:void 0,Cr=ke(Object.keys,Object),dl=yn(Ne,"DataView"),Vn=yn(Ne,"Map"),oa=yn(Ne,"Promise"),_i=yn(Ne,"Set"),ji=yn(Ne,"WeakMap"),mn=yn(Object,"create"),bo=ns(dl),Ds=ns(Vn),xs=ns(oa),Ls=ns(_i),Gn=ns(ji),ca=Qs?Qs.prototype:void 0,hl=ca?ca.valueOf:void 0;function Es(j){var $=-1,K=j==null?0:j.length;for(this.clear();++$<K;){var pe=j[$];this.set(pe[0],pe[1])}}function vo(){this.__data__=mn?mn(null):{},this.size=0}function Ni(j){var $=this.has(j)&&delete this.__data__[j];return this.size-=$?1:0,$}function fl(j){var $=this.__data__;if(mn){var K=$[j];return K===r?void 0:K}return es.call($,j)?$[j]:void 0}function Zn(j){var $=this.__data__;return mn?$[j]!==void 0:es.call($,j)}function Yn(j,$){var K=this.__data__;return this.size+=this.has(j)?0:1,K[j]=mn&&$===void 0?r:$,this}Es.prototype.clear=vo,Es.prototype.delete=Ni,Es.prototype.get=fl,Es.prototype.has=Zn,Es.prototype.set=Yn;function ss(j){var $=-1,K=j==null?0:j.length;for(this.clear();++$<K;){var pe=j[$];this.set(pe[0],pe[1])}}function Kn(){this.__data__=[],this.size=0}function rs(j){var $=this.__data__,K=Si($,j);if(K<0)return!1;var pe=$.length-1;return K==pe?$.pop():Zr.call($,K,1),--this.size,!0}function wo(j){var $=this.__data__,K=Si($,j);return K<0?void 0:$[K][1]}function _o(j){return Si(this.__data__,j)>-1}function pn(j,$){var K=this.__data__,pe=Si(K,j);return pe<0?(++this.size,K.push([j,$])):K[pe][1]=$,this}ss.prototype.clear=Kn,ss.prototype.delete=rs,ss.prototype.get=wo,ss.prototype.has=_o,ss.prototype.set=pn;function ls(j){var $=-1,K=j==null?0:j.length;for(this.clear();++$<K;){var pe=j[$];this.set(pe[0],pe[1])}}function su(){this.size=0,this.__data__={hash:new Es,map:new(Vn||ss),string:new Es}}function jo(j){var $=qs(this,j).delete(j);return this.size-=$?1:0,$}function No(j){return qs(this,j).get(j)}function ru(j){return qs(this,j).has(j)}function ua(j,$){var K=qs(this,j),pe=K.size;return K.set(j,$),this.size+=K.size==pe?0:1,this}ls.prototype.clear=su,ls.prototype.delete=jo,ls.prototype.get=No,ls.prototype.has=ru,ls.prototype.set=ua;function gn(j){var $=-1,K=j==null?0:j.length;for(this.__data__=new ls;++$<K;)this.add(j[$])}function gr(j){return this.__data__.set(j,r),this}function Wn(j){return this.__data__.has(j)}gn.prototype.add=gn.prototype.push=gr,gn.prototype.has=Wn;function kr(j){var $=this.__data__=new ss(j);this.size=$.size}function Yr(){this.__data__=new ss,this.size=0}function ml(j){var $=this.__data__,K=$.delete(j);return this.size=$.size,K}function pl(j){return this.__data__.get(j)}function nu(j){return this.__data__.has(j)}function So(j,$){var K=this.__data__;if(K instanceof ss){var pe=K.__data__;if(!Vn||pe.length<s-1)return pe.push([j,$]),this.size=++K.size,this;K=this.__data__=new ls(pe)}return K.set(j,$),this.size=K.size,this}kr.prototype.clear=Yr,kr.prototype.delete=ml,kr.prototype.get=pl,kr.prototype.has=nu,kr.prototype.set=So;function Xs(j,$){var K=Jn(j),pe=!K&&vl(j),tt=!K&&!pe&&Qr(j),Ve=!K&&!pe&&!tt&&Ci(j),gt=K||pe||tt||Ve,dt=gt?ut(j.length,String):[],It=dt.length;for(var xt in j)es.call(j,xt)&&!(gt&&(xt=="length"||tt&&(xt=="offset"||xt=="parent")||Ve&&(xt=="buffer"||xt=="byteLength"||xt=="byteOffset")||au(xt,It)))&&dt.push(xt);return dt}function Si(j,$){for(var K=j.length;K--;)if(xn(j[K][0],$))return K;return-1}function gl(j,$,K){var pe=$(j);return Jn(j)?pe:rt(pe,K(j))}function Kr(j){return j==null?j===void 0?k:E:pr&&pr in Object(j)?Wr(j):ha(j)}function yl(j){return xr(j)&&Kr(j)==h}function Ei(j,$,K,pe,tt){return j===$?!0:j==null||$==null||!xr(j)&&!xr($)?j!==j&&$!==$:iu(j,$,K,pe,Ei,tt)}function iu(j,$,K,pe,tt,Ve){var gt=Jn(j),dt=Jn($),It=gt?f:yr(j),xt=dt?f:yr($);It=It==h?A:It,xt=xt==h?A:xt;var As=It==A,er=xt==A,os=It==xt;if(os&&Qr(j)){if(!Qr($))return!1;gt=!0,As=!1}if(os&&!As)return Ve||(Ve=new kr),gt||Ci(j)?Ai(j,$,K,pe,tt,Ve):Qn(j,$,It,K,pe,tt,Ve);if(!(K&a)){var Ps=As&&es.call(j,"__wrapped__"),cs=er&&es.call($,"__wrapped__");if(Ps||cs){var ei=Ps?j.value():j,vn=cs?$.value():$;return Ve||(Ve=new kr),tt(ei,vn,K,pe,Ve)}}return os?(Ve||(Ve=new kr),Ao(j,$,K,pe,tt,Ve)):!1}function Js(j){if(!Or(j)||da(j))return!1;var $=ma(j)?Ms:ee;return $.test(ns(j))}function xl(j){return xr(j)&&bn(j.length)&&!!we[Kr(j)]}function Eo(j){if(!bl(j))return Cr(j);var $=[];for(var K in Object(j))es.call(j,K)&&K!="constructor"&&$.push(K);return $}function Ai(j,$,K,pe,tt,Ve){var gt=K&a,dt=j.length,It=$.length;if(dt!=It&&!(gt&&It>dt))return!1;var xt=Ve.get(j);if(xt&&Ve.get($))return xt==$;var As=-1,er=!0,os=K&o?new gn:void 0;for(Ve.set(j,$),Ve.set($,j);++As<dt;){var Ps=j[As],cs=$[As];if(pe)var ei=gt?pe(cs,Ps,As,$,j,Ve):pe(Ps,cs,As,j,$,Ve);if(ei!==void 0){if(ei)continue;er=!1;break}if(os){if(!bt($,function(vn,ki){if(!G(os,ki)&&(Ps===vn||tt(Ps,vn,K,pe,Ve)))return os.push(ki)})){er=!1;break}}else if(!(Ps===cs||tt(Ps,cs,K,pe,Ve))){er=!1;break}}return Ve.delete(j),Ve.delete($),er}function Qn(j,$,K,pe,tt,Ve,gt){switch(K){case D:if(j.byteLength!=$.byteLength||j.byteOffset!=$.byteOffset)return!1;j=j.buffer,$=$.buffer;case R:return!(j.byteLength!=$.byteLength||!Ve(new Gr(j),new Gr($)));case g:case x:case w:return xn(+j,+$);case v:return j.name==$.name&&j.message==$.message;case C:case B:return j==$+"";case N:var dt=he;case L:var It=pe&a;if(dt||(dt=Se),j.size!=$.size&&!It)return!1;var xt=gt.get(j);if(xt)return xt==$;pe|=o,gt.set(j,$);var As=Ai(dt(j),dt($),pe,tt,Ve,gt);return gt.delete(j),As;case S:if(hl)return hl.call(j)==hl.call($)}return!1}function Ao(j,$,K,pe,tt,Ve){var gt=K&a,dt=Xn(j),It=dt.length,xt=Xn($),As=xt.length;if(It!=As&&!gt)return!1;for(var er=It;er--;){var os=dt[er];if(!(gt?os in $:es.call($,os)))return!1}var Ps=Ve.get(j);if(Ps&&Ve.get($))return Ps==$;var cs=!0;Ve.set(j,$),Ve.set($,j);for(var ei=gt;++er<It;){os=dt[er];var vn=j[os],ki=$[os];if(pe)var oh=gt?pe(ki,vn,os,$,j,Ve):pe(vn,ki,os,j,$,Ve);if(!(oh===void 0?vn===ki||tt(vn,ki,K,pe,Ve):oh)){cs=!1;break}ei||(ei=os=="constructor")}if(cs&&!ei){var ko=j.constructor,wl=$.constructor;ko!=wl&&"constructor"in j&&"constructor"in $&&!(typeof ko=="function"&&ko instanceof ko&&typeof wl=="function"&&wl instanceof wl)&&(cs=!1)}return Ve.delete(j),Ve.delete($),cs}function Xn(j){return gl(j,pa,Co)}function qs(j,$){var K=j.__data__;return lu($)?K[typeof $=="string"?"string":"hash"]:K.map}function yn(j,$){var K=se(j,$);return Js(K)?K:void 0}function Wr(j){var $=es.call(j,pr),K=j[pr];try{j[pr]=void 0;var pe=!0}catch{}var tt=Ss.call(j);return pe&&($?j[pr]=K:delete j[pr]),tt}var Co=vi?function(j){return j==null?[]:(j=Object(j),Je(vi(j),function($){return mr.call(j,$)}))}:ga,yr=Kr;(dl&&yr(new dl(new ArrayBuffer(1)))!=D||Vn&&yr(new Vn)!=N||oa&&yr(oa.resolve())!=O||_i&&yr(new _i)!=L||ji&&yr(new ji)!=z)&&(yr=function(j){var $=Kr(j),K=$==A?j.constructor:void 0,pe=K?ns(K):"";if(pe)switch(pe){case bo:return D;case Ds:return N;case xs:return O;case Ls:return L;case Gn:return z}return $});function au(j,$){return $=$??u,!!$&&(typeof j=="number"||ge.test(j))&&j>-1&&j%1==0&&j<$}function lu(j){var $=typeof j;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?j!=="__proto__":j===null}function da(j){return!!ts&&ts in j}function bl(j){var $=j&&j.constructor,K=typeof $=="function"&&$.prototype||Pe;return j===K}function ha(j){return Ss.call(j)}function ns(j){if(j!=null){try{return pt.call(j)}catch{}try{return j+""}catch{}}return""}function xn(j,$){return j===$||j!==j&&$!==$}var vl=yl(function(){return arguments}())?yl:function(j){return xr(j)&&es.call(j,"callee")&&!mr.call(j,"callee")},Jn=Array.isArray;function fa(j){return j!=null&&bn(j.length)&&!ma(j)}var Qr=wi||ya;function Tr(j,$){return Ei(j,$)}function ma(j){if(!Or(j))return!1;var $=Kr(j);return $==_||$==b||$==m||$==F}function bn(j){return typeof j=="number"&&j>-1&&j%1==0&&j<=u}function Or(j){var $=typeof j;return j!=null&&($=="object"||$=="function")}function xr(j){return j!=null&&typeof j=="object"}var Ci=Ke?vt(Ke):xl;function pa(j){return fa(j)?Xs(j):Eo(j)}function ga(){return[]}function ya(){return!1}t.exports=Tr}(hd,hd.exports)),hd.exports}var Af={},Yj;function Fz(){if(Yj)return Af;Yj=1,Object.defineProperty(Af,"__esModule",{value:!0});const t=QE(),e=XE();var s;return function(r){function a(f={},m={},g=!1){typeof f!="object"&&(f={}),typeof m!="object"&&(m={});let x=t(m);g||(x=Object.keys(x).reduce((v,_)=>(x[_]!=null&&(v[_]=x[_]),v),{}));for(const v in f)f[v]!==void 0&&m[v]===void 0&&(x[v]=f[v]);return Object.keys(x).length>0?x:void 0}r.compose=a;function o(f={},m={}){typeof f!="object"&&(f={}),typeof m!="object"&&(m={});const g=Object.keys(f).concat(Object.keys(m)).reduce((x,v)=>(e(f[v],m[v])||(x[v]=m[v]===void 0?null:m[v]),x),{});return Object.keys(g).length>0?g:void 0}r.diff=o;function u(f={},m={}){f=f||{};const g=Object.keys(m).reduce((x,v)=>(m[v]!==f[v]&&f[v]!==void 0&&(x[v]=m[v]),x),{});return Object.keys(f).reduce((x,v)=>(f[v]!==m[v]&&m[v]===void 0&&(x[v]=null),x),g)}r.invert=u;function h(f,m,g=!1){if(typeof f!="object")return m;if(typeof m!="object")return;if(!g)return m;const x=Object.keys(m).reduce((v,_)=>(f[_]===void 0&&(v[_]=m[_]),v),{});return Object.keys(x).length>0?x:void 0}r.transform=h}(s||(s={})),Af.default=s,Af}var Cf={},Kj;function JE(){if(Kj)return Cf;Kj=1,Object.defineProperty(Cf,"__esModule",{value:!0});var t;return function(e){function s(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=s}(t||(t={})),Cf.default=t,Cf}var kf={},Wj;function Hz(){if(Wj)return kf;Wj=1,Object.defineProperty(kf,"__esModule",{value:!0});const t=JE();class e{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const a=this.ops[this.index];if(a){const o=this.offset,u=t.default.length(a);if(r>=u-o?(r=u-o,this.index+=1,this.offset=0):this.offset+=r,typeof a.delete=="number")return{delete:r};{const h={};return a.attributes&&(h.attributes=a.attributes),typeof a.retain=="number"?h.retain=r:typeof a.retain=="object"&&a.retain!==null?h.retain=a.retain:typeof a.insert=="string"?h.insert=a.insert.substr(o,r):h.insert=a.insert,h}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?t.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,a=this.index,o=this.next(),u=this.ops.slice(this.index);return this.offset=r,this.index=a,[o].concat(u)}}else return[]}}return kf.default=e,kf}var Qj;function Vz(){return Qj||(Qj=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const s=zz(),r=QE(),a=XE(),o=Fz();e.AttributeMap=o.default;const u=JE();e.Op=u.default;const h=Hz();e.OpIterator=h.default;const f="\0",m=(x,v)=>{if(typeof x!="object"||x===null)throw new Error(`cannot retain a ${typeof x}`);if(typeof v!="object"||v===null)throw new Error(`cannot retain a ${typeof v}`);const _=Object.keys(x)[0];if(!_||_!==Object.keys(v)[0])throw new Error(`embed types not matched: ${_} != ${Object.keys(v)[0]}`);return[_,x[_],v[_]]};class g{constructor(v){Array.isArray(v)?this.ops=v:v!=null&&Array.isArray(v.ops)?this.ops=v.ops:this.ops=[]}static registerEmbed(v,_){this.handlers[v]=_}static unregisterEmbed(v){delete this.handlers[v]}static getHandler(v){const _=this.handlers[v];if(!_)throw new Error(`no handlers for embed type "${v}"`);return _}insert(v,_){const b={};return typeof v=="string"&&v.length===0?this:(b.insert=v,_!=null&&typeof _=="object"&&Object.keys(_).length>0&&(b.attributes=_),this.push(b))}delete(v){return v<=0?this:this.push({delete:v})}retain(v,_){if(typeof v=="number"&&v<=0)return this;const b={retain:v};return _!=null&&typeof _=="object"&&Object.keys(_).length>0&&(b.attributes=_),this.push(b)}push(v){let _=this.ops.length,b=this.ops[_-1];if(v=r(v),typeof b=="object"){if(typeof v.delete=="number"&&typeof b.delete=="number")return this.ops[_-1]={delete:b.delete+v.delete},this;if(typeof b.delete=="number"&&v.insert!=null&&(_-=1,b=this.ops[_-1],typeof b!="object"))return this.ops.unshift(v),this;if(a(v.attributes,b.attributes)){if(typeof v.insert=="string"&&typeof b.insert=="string")return this.ops[_-1]={insert:b.insert+v.insert},typeof v.attributes=="object"&&(this.ops[_-1].attributes=v.attributes),this;if(typeof v.retain=="number"&&typeof b.retain=="number")return this.ops[_-1]={retain:b.retain+v.retain},typeof v.attributes=="object"&&(this.ops[_-1].attributes=v.attributes),this}}return _===this.ops.length?this.ops.push(v):this.ops.splice(_,0,v),this}chop(){const v=this.ops[this.ops.length-1];return v&&typeof v.retain=="number"&&!v.attributes&&this.ops.pop(),this}filter(v){return this.ops.filter(v)}forEach(v){this.ops.forEach(v)}map(v){return this.ops.map(v)}partition(v){const _=[],b=[];return this.forEach(N=>{(v(N)?_:b).push(N)}),[_,b]}reduce(v,_){return this.ops.reduce(v,_)}changeLength(){return this.reduce((v,_)=>_.insert?v+u.default.length(_):_.delete?v-_.delete:v,0)}length(){return this.reduce((v,_)=>v+u.default.length(_),0)}slice(v=0,_=1/0){const b=[],N=new h.default(this.ops);let w=0;for(;w<_&&N.hasNext();){let E;w<v?E=N.next(v-w):(E=N.next(_-w),b.push(E)),w+=u.default.length(E)}return new g(b)}compose(v){const _=new h.default(this.ops),b=new h.default(v.ops),N=[],w=b.peek();if(w!=null&&typeof w.retain=="number"&&w.attributes==null){let A=w.retain;for(;_.peekType()==="insert"&&_.peekLength()<=A;)A-=_.peekLength(),N.push(_.next());w.retain-A>0&&b.next(w.retain-A)}const E=new g(N);for(;_.hasNext()||b.hasNext();)if(b.peekType()==="insert")E.push(b.next());else if(_.peekType()==="delete")E.push(_.next());else{const A=Math.min(_.peekLength(),b.peekLength()),O=_.next(A),F=b.next(A);if(F.retain){const C={};if(typeof O.retain=="number")C.retain=typeof F.retain=="number"?A:F.retain;else if(typeof F.retain=="number")O.retain==null?C.insert=O.insert:C.retain=O.retain;else{const B=O.retain==null?"insert":"retain",[S,k,z]=m(O[B],F.retain),R=g.getHandler(S);C[B]={[S]:R.compose(k,z,B==="retain")}}const L=o.default.compose(O.attributes,F.attributes,typeof O.retain=="number");if(L&&(C.attributes=L),E.push(C),!b.hasNext()&&a(E.ops[E.ops.length-1],C)){const B=new g(_.rest());return E.concat(B).chop()}}else typeof F.delete=="number"&&(typeof O.retain=="number"||typeof O.retain=="object"&&O.retain!==null)&&E.push(F)}return E.chop()}concat(v){const _=new g(this.ops.slice());return v.ops.length>0&&(_.push(v.ops[0]),_.ops=_.ops.concat(v.ops.slice(1))),_}diff(v,_){if(this.ops===v.ops)return new g;const b=[this,v].map(O=>O.map(F=>{if(F.insert!=null)return typeof F.insert=="string"?F.insert:f;const C=O===v?"on":"with";throw new Error("diff() called "+C+" non-document")}).join("")),N=new g,w=s(b[0],b[1],_,!0),E=new h.default(this.ops),A=new h.default(v.ops);return w.forEach(O=>{let F=O[1].length;for(;F>0;){let C=0;switch(O[0]){case s.INSERT:C=Math.min(A.peekLength(),F),N.push(A.next(C));break;case s.DELETE:C=Math.min(F,E.peekLength()),E.next(C),N.delete(C);break;case s.EQUAL:C=Math.min(E.peekLength(),A.peekLength(),F);const L=E.next(C),B=A.next(C);a(L.insert,B.insert)?N.retain(C,o.default.diff(L.attributes,B.attributes)):N.push(B).delete(C);break}F-=C}}),N.chop()}eachLine(v,_=`
`){const b=new h.default(this.ops);let N=new g,w=0;for(;b.hasNext();){if(b.peekType()!=="insert")return;const E=b.peek(),A=u.default.length(E)-b.peekLength(),O=typeof E.insert=="string"?E.insert.indexOf(_,A)-A:-1;if(O<0)N.push(b.next());else if(O>0)N.push(b.next(O));else{if(v(N,b.next(1).attributes||{},w)===!1)return;w+=1,N=new g}}N.length()>0&&v(N,{},w)}invert(v){const _=new g;return this.reduce((b,N)=>{if(N.insert)_.delete(u.default.length(N));else{if(typeof N.retain=="number"&&N.attributes==null)return _.retain(N.retain),b+N.retain;if(N.delete||typeof N.retain=="number"){const w=N.delete||N.retain;return v.slice(b,b+w).forEach(A=>{N.delete?_.push(A):N.retain&&N.attributes&&_.retain(u.default.length(A),o.default.invert(N.attributes,A.attributes))}),b+w}else if(typeof N.retain=="object"&&N.retain!==null){const w=v.slice(b,b+1),E=new h.default(w.ops).next(),[A,O,F]=m(N.retain,E.insert),C=g.getHandler(A);return _.retain({[A]:C.invert(O,F)},o.default.invert(N.attributes,E.attributes)),b+1}}return b},0),_.chop()}transform(v,_=!1){if(_=!!_,typeof v=="number")return this.transformPosition(v,_);const b=v,N=new h.default(this.ops),w=new h.default(b.ops),E=new g;for(;N.hasNext()||w.hasNext();)if(N.peekType()==="insert"&&(_||w.peekType()!=="insert"))E.retain(u.default.length(N.next()));else if(w.peekType()==="insert")E.push(w.next());else{const A=Math.min(N.peekLength(),w.peekLength()),O=N.next(A),F=w.next(A);if(O.delete)continue;if(F.delete)E.push(F);else{const C=O.retain,L=F.retain;let B=typeof L=="object"&&L!==null?L:A;if(typeof C=="object"&&C!==null&&typeof L=="object"&&L!==null){const S=Object.keys(C)[0];if(S===Object.keys(L)[0]){const k=g.getHandler(S);k&&(B={[S]:k.transform(C[S],L[S],_)})}}E.retain(B,o.default.transform(O.attributes,F.attributes,_))}}return E.chop()}transformPosition(v,_=!1){_=!!_;const b=new h.default(this.ops);let N=0;for(;b.hasNext()&&N<=v;){const w=b.peekLength(),E=b.peekType();if(b.next(),E==="delete"){v-=Math.min(w,v-N);continue}else E==="insert"&&(N<v||!_)&&(v+=w);N+=w}return v}}g.Op=u.default,g.OpIterator=h.default,g.AttributeMap=o.default,g.handlers={},e.default=g,t.exports=g,t.exports.default=g}(Ef,Ef.exports)),Ef.exports}var cn=Vz();const Fe=qd(cn);class Fn extends Vr{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Fn.blotName="break";Fn.tagName="BR";let In=class extends ym{};function Fm(t){return t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}class ur extends Cx{static allowedChildren=[ur,Fn,Vr,In];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,s){const r=ur.order.indexOf(e),a=ur.order.indexOf(s);return r>=0||a>=0?r-a:e===s?0:e<s?-1:1}formatAt(e,s,r,a){if(ur.compare(this.statics.blotName,r)<0&&this.scroll.query(r,He.BLOT)){const o=this.isolate(e,s);a&&o.wrap(r,a)}else super.formatAt(e,s,r,a)}optimize(e){if(super.optimize(e),this.parent instanceof ur&&ur.compare(this.statics.blotName,this.parent.statics.blotName)>0){const s=this.parent.isolate(this.offset(),this.length());this.moveChildren(s),s.wrap(this)}}}const Xj=1;class Ws extends Rd{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=eA(this)),this.cache.delta}deleteAt(e,s){super.deleteAt(e,s),this.cache={}}formatAt(e,s,r,a){s<=0||(this.scroll.query(r,He.BLOCK)?e+s===this.length()&&this.format(r,a):super.formatAt(e,Math.min(s,this.length()-e-1),r,a),this.cache={})}insertAt(e,s,r){if(r!=null){super.insertAt(e,s,r),this.cache={};return}if(s.length===0)return;const a=s.split(`
`),o=a.shift();o.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let u=this;a.reduce((h,f)=>(u=u.split(h,!0),u.insertAt(0,f),f.length),e+o.length)}insertBefore(e,s){const{head:r}=this.children;super.insertBefore(e,s),r instanceof Fn&&r.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Xj),this.cache.length}moveChildren(e,s){super.moveChildren(e,s),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s&&(e===0||e>=this.length()-Xj)){const a=this.clone();return e===0?(this.parent.insertBefore(a,this),this):(this.parent.insertBefore(a,this.next),a)}const r=super.split(e,s);return this.cache={},r}}Ws.blotName="block";Ws.tagName="P";Ws.defaultChild=Fn;Ws.allowedChildren=[Fn,ur,Vr,In];class on extends Vr{attach(){super.attach(),this.attributes=new Bm(this.domNode)}delta(){return new Fe().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,s){const r=this.scroll.query(e,He.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,s)}formatAt(e,s,r,a){this.format(r,a)}insertAt(e,s,r){if(r!=null){super.insertAt(e,s,r);return}const a=s.split(`
`),o=a.pop(),u=a.map(f=>{const m=this.scroll.create(Ws.blotName);return m.insertAt(0,f),m}),h=this.split(e);u.forEach(f=>{this.parent.insertBefore(f,h)}),o&&this.parent.insertBefore(this.scroll.create("text",o),h)}}on.scope=He.BLOCK_BLOT;function eA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(nr).reduce((s,r)=>r.length()===0?s:s.insert(r.value(),an(r,{},e)),new Fe).insert(`
`,an(t))}function an(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},s&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:an(t.parent,e,s)}class Cn extends Vr{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,s,r){super(e,s),this.selection=r,this.textNode=document.createTextNode(Cn.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,s){if(this.savedLength!==0){super.format(e,s);return}let r=this,a=0;for(;r!=null&&r.statics.scope!==He.BLOCK_BLOT;)a+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Cn.CONTENTS.length,r.optimize(),r.formatAt(a,Cn.CONTENTS.length,e,s),this.savedLength=0)}index(e,s){return e===this.textNode?0:super.index(e,s)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const s=this.prev instanceof In?this.prev:null,r=s?s.length():0,a=this.next instanceof In?this.next:null,o=a?a.text:"",{textNode:u}=this,h=u.data.split(Cn.CONTENTS).join("");u.data=Cn.CONTENTS;let f;if(s)f=s,(h||a)&&(s.insertAt(s.length(),h+o),a&&a.remove());else if(a)f=a,a.insertAt(0,h);else{const m=document.createTextNode(h);f=this.scroll.create(m),this.parent.insertBefore(f,this)}if(this.remove(),e){const m=(v,_)=>s&&v===s.domNode?_:v===u?r+_-1:a&&v===a.domNode?r+h.length+_:null,g=m(e.start.node,e.start.offset),x=m(e.end.node,e.end.offset);if(g!==null&&x!==null)return{startNode:f.domNode,startOffset:g,endNode:f.domNode,endOffset:x}}return null}update(e,s){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(s.range=r)}}optimize(e){super.optimize(e);let{parent:s}=this;for(;s;){if(s.domNode.tagName==="A"){this.savedLength=Cn.CONTENTS.length,s.isolate(this.offset(s),this.length()).unwrap(),this.savedLength=0;break}s=s.parent}}value(){return""}}var w0={exports:{}},Jj;function Gz(){return Jj||(Jj=1,function(t){var e=Object.prototype.hasOwnProperty,s="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(s=!1));function a(f,m,g){this.fn=f,this.context=m,this.once=g||!1}function o(f,m,g,x,v){if(typeof g!="function")throw new TypeError("The listener must be a function");var _=new a(g,x||f,v),b=s?s+m:m;return f._events[b]?f._events[b].fn?f._events[b]=[f._events[b],_]:f._events[b].push(_):(f._events[b]=_,f._eventsCount++),f}function u(f,m){--f._eventsCount===0?f._events=new r:delete f._events[m]}function h(){this._events=new r,this._eventsCount=0}h.prototype.eventNames=function(){var m=[],g,x;if(this._eventsCount===0)return m;for(x in g=this._events)e.call(g,x)&&m.push(s?x.slice(1):x);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(g)):m},h.prototype.listeners=function(m){var g=s?s+m:m,x=this._events[g];if(!x)return[];if(x.fn)return[x.fn];for(var v=0,_=x.length,b=new Array(_);v<_;v++)b[v]=x[v].fn;return b},h.prototype.listenerCount=function(m){var g=s?s+m:m,x=this._events[g];return x?x.fn?1:x.length:0},h.prototype.emit=function(m,g,x,v,_,b){var N=s?s+m:m;if(!this._events[N])return!1;var w=this._events[N],E=arguments.length,A,O;if(w.fn){switch(w.once&&this.removeListener(m,w.fn,void 0,!0),E){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,g),!0;case 3:return w.fn.call(w.context,g,x),!0;case 4:return w.fn.call(w.context,g,x,v),!0;case 5:return w.fn.call(w.context,g,x,v,_),!0;case 6:return w.fn.call(w.context,g,x,v,_,b),!0}for(O=1,A=new Array(E-1);O<E;O++)A[O-1]=arguments[O];w.fn.apply(w.context,A)}else{var F=w.length,C;for(O=0;O<F;O++)switch(w[O].once&&this.removeListener(m,w[O].fn,void 0,!0),E){case 1:w[O].fn.call(w[O].context);break;case 2:w[O].fn.call(w[O].context,g);break;case 3:w[O].fn.call(w[O].context,g,x);break;case 4:w[O].fn.call(w[O].context,g,x,v);break;default:if(!A)for(C=1,A=new Array(E-1);C<E;C++)A[C-1]=arguments[C];w[O].fn.apply(w[O].context,A)}}return!0},h.prototype.on=function(m,g,x){return o(this,m,g,x,!1)},h.prototype.once=function(m,g,x){return o(this,m,g,x,!0)},h.prototype.removeListener=function(m,g,x,v){var _=s?s+m:m;if(!this._events[_])return this;if(!g)return u(this,_),this;var b=this._events[_];if(b.fn)b.fn===g&&(!v||b.once)&&(!x||b.context===x)&&u(this,_);else{for(var N=0,w=[],E=b.length;N<E;N++)(b[N].fn!==g||v&&!b[N].once||x&&b[N].context!==x)&&w.push(b[N]);w.length?this._events[_]=w.length===1?w[0]:w:u(this,_)}return this},h.prototype.removeAllListeners=function(m){var g;return m?(g=s?s+m:m,this._events[g]&&u(this,g)):(this._events=new r,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=s,h.EventEmitter=h,t.exports=h}(w0)),w0.exports}var Zz=Gz();const Yz=qd(Zz),_y=new WeakMap,jy=["error","warn","log","info"];let Ny="warn";function tA(t){if(Ny&&jy.indexOf(t)<=jy.indexOf(Ny)){for(var e=arguments.length,s=new Array(e>1?e-1:0),r=1;r<e;r++)s[r-1]=arguments[r];console[t](...s)}}function la(t){return jy.reduce((e,s)=>(e[s]=tA.bind(console,s,t),e),{})}la.level=t=>{Ny=t};tA.level=la.level;const _0=la("quill:events"),Kz=["selectionchange","mousedown","mouseup","click"];Kz.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(a=>{const o=_y.get(a);o&&o.emitter&&o.emitter.handleDOM(...s)})})});class ze extends Yz{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",_0.error)}emit(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return _0.log.call(_0,...s),super.emit(...s)}handleDOM(e){for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];(this.domListeners[e.type]||[]).forEach(o=>{let{node:u,handler:h}=o;(e.target===u||u.contains(e.target))&&h(e,...r)})}listenDOM(e,s,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:s,handler:r})}}const j0=la("quill:selection");class ro{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=s}}class Wz{constructor(e,s){this.emitter=s,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new ro(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,ze.sources.USER),1)}),this.emitter.on(ze.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(ze.events.SCROLL_UPDATE,(a,o)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const u=o.some(h=>h.type==="characterData"||h.type==="childList"||h.type==="attributes"&&h.target===this.root);this.update(u?ze.sources.SILENT:a)}catch{}})}),this.emitter.on(ze.events.SCROLL_OPTIMIZE,(r,a)=>{if(a.range){const{startNode:o,startOffset:u,endNode:h,endOffset:f}=a.range;this.setNativeRange(o,u,h,f),this.update(ze.sources.SILENT)}}),this.update(ze.sources.SILENT)}handleComposition(){this.emitter.on(ze.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(ze.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(ze.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,s){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,He.BLOCK))){if(r.start.node!==this.cursor.textNode){const a=this.scroll.find(r.start.node,!1);if(a==null)return;if(a instanceof nr){const o=a.split(r.start.offset);a.parent.insertBefore(this.cursor,o)}else a.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,s),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),s=Math.min(e+s,r-1)-e;let a,[o,u]=this.scroll.leaf(e);if(o==null)return null;if(s>0&&u===o.length()){const[g]=this.scroll.leaf(e+1);if(g){const[x]=this.scroll.line(e),[v]=this.scroll.line(e+1);x===v&&(o=g,u=0)}}[a,u]=o.position(u,!0);const h=document.createRange();if(s>0)return h.setStart(a,u),[o,u]=this.scroll.leaf(e+s),o==null?null:([a,u]=o.position(u,!0),h.setEnd(a,u),h.getBoundingClientRect());let f="left",m;if(a instanceof Text){if(!a.data.length)return null;u<a.data.length?(h.setStart(a,u),h.setEnd(a,u+1)):(h.setStart(a,u-1),h.setEnd(a,u),f="right"),m=h.getBoundingClientRect()}else{if(!(o.domNode instanceof Element))return null;m=o.domNode.getBoundingClientRect(),u>0&&(f="right")}return{bottom:m.top+m.height,height:m.height,left:m[f],right:m[f],top:m.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const s=e.getRangeAt(0);if(s==null)return null;const r=this.normalizeNative(s);return j0.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const s=this.getNativeRange();return s==null?[null,null]:[this.normalizedToRange(s),s]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&N0(this.root,document.activeElement)}normalizedToRange(e){const s=[[e.start.node,e.start.offset]];e.native.collapsed||s.push([e.end.node,e.end.offset]);const r=s.map(u=>{const[h,f]=u,m=this.scroll.find(h,!0),g=m.offset(this.scroll);return f===0?g:m instanceof nr?g+m.index(h,f):g+m.length()}),a=Math.min(Math.max(...r),this.scroll.length()-1),o=Math.min(a,...r);return new ro(o,a-o)}normalizeNative(e){if(!N0(this.root,e.startContainer)||!e.collapsed&&!N0(this.root,e.endContainer))return null;const s={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[s.start,s.end].forEach(r=>{let{node:a,offset:o}=r;for(;!(a instanceof Text)&&a.childNodes.length>0;)if(a.childNodes.length>o)a=a.childNodes[o],o=0;else if(a.childNodes.length===o)a=a.lastChild,a instanceof Text?o=a.data.length:a.childNodes.length>0?o=a.childNodes.length:o=a.childNodes.length+1;else break;r.node=a,r.offset=o}),s}rangeToNative(e){const s=this.scroll.length(),r=(a,o)=>{a=Math.min(s-1,a);const[u,h]=this.scroll.leaf(a);return u?u.position(h,o):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:s,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(j0.info("setNativeRange",e,s,r,a),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const u=document.getSelection();if(u!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:h}=this.getNativeRange()||{};if(h==null||o||e!==h.startContainer||s!==h.startOffset||r!==h.endContainer||a!==h.endOffset){e instanceof Element&&e.tagName==="BR"&&(s=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(a=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const f=document.createRange();f.setStart(e,s),f.setEnd(r,a),u.removeAllRanges(),u.addRange(f)}}else u.removeAllRanges(),this.root.blur()}setRange(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ze.sources.API;if(typeof s=="string"&&(r=s,s=!1),j0.info("setRange",e),e!=null){const a=this.rangeToNative(e);this.setNativeRange(...a,s)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ze.sources.USER;const s=this.lastRange,[r,a]=this.getRange();if(this.lastRange=r,this.lastNative=a,this.lastRange!=null&&(this.savedRange=this.lastRange),!Ax(s,this.lastRange)){if(!this.composing&&a!=null&&a.native.collapsed&&a.start.node!==this.cursor.textNode){const u=this.cursor.restore();u&&this.setNativeRange(u.startNode,u.startOffset,u.endNode,u.endOffset)}const o=[ze.events.SELECTION_CHANGE,kc(this.lastRange),kc(s),e];this.emitter.emit(ze.events.EDITOR_CHANGE,...o),e!==ze.sources.SILENT&&this.emitter.emit(...o)}}}function N0(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const Qz=/^[ -~]*$/;class Xz{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let s=this.scroll.length();this.scroll.batchStart();const r=e2(e),a=new Fe;return eF(r.ops.slice()).reduce((u,h)=>{const f=cn.Op.length(h);let m=h.attributes||{},g=!1,x=!1;if(h.insert!=null){if(a.retain(f),typeof h.insert=="string"){const b=h.insert;x=!b.endsWith(`
`)&&(s<=u||!!this.scroll.descendant(on,u)[0]),this.scroll.insertAt(u,b);const[N,w]=this.scroll.line(u);let E=Ja({},an(N));if(N instanceof Ws){const[A]=N.descendant(nr,w);A&&(E=Ja(E,an(A)))}m=cn.AttributeMap.diff(E,m)||{}}else if(typeof h.insert=="object"){const b=Object.keys(h.insert)[0];if(b==null)return u;const N=this.scroll.query(b,He.INLINE)!=null;if(N)(s<=u||this.scroll.descendant(on,u)[0])&&(x=!0);else if(u>0){const[w,E]=this.scroll.descendant(nr,u-1);w instanceof In?w.value()[E]!==`
`&&(g=!0):w instanceof Vr&&w.statics.scope===He.INLINE_BLOT&&(g=!0)}if(this.scroll.insertAt(u,b,h.insert[b]),N){const[w]=this.scroll.descendant(nr,u);if(w){const E=Ja({},an(w));m=cn.AttributeMap.diff(E,m)||{}}}}s+=f}else if(a.push(h),h.retain!==null&&typeof h.retain=="object"){const b=Object.keys(h.retain)[0];if(b==null)return u;this.scroll.updateEmbedAt(u,b,h.retain[b])}Object.keys(m).forEach(b=>{this.scroll.formatAt(u,f,b,m[b])});const v=g?1:0,_=x?1:0;return s+=v+_,a.retain(v),a.delete(_),u+f+v+_},0),a.reduce((u,h)=>typeof h.delete=="number"?(this.scroll.deleteAt(u,h.delete),u):u+cn.Op.length(h),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,s){return this.scroll.deleteAt(e,s),this.update(new Fe().retain(e).delete(s))}formatLine(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(o=>{this.scroll.lines(e,Math.max(s,1)).forEach(u=>{u.format(o,r[o])})}),this.scroll.optimize();const a=new Fe().retain(e).retain(s,kc(r));return this.update(a)}formatText(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(o=>{this.scroll.formatAt(e,s,o,r[o])});const a=new Fe().retain(e).retain(s,kc(r));return this.update(a)}getContents(e,s){return this.delta.slice(e,e+s)}getDelta(){return this.scroll.lines().reduce((e,s)=>e.concat(s.delta()),new Fe)}getFormat(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],a=[];s===0?this.scroll.path(e).forEach(h=>{const[f]=h;f instanceof Ws?r.push(f):f instanceof nr&&a.push(f)}):(r=this.scroll.lines(e,s),a=this.scroll.descendants(nr,e,s));const[o,u]=[r,a].map(h=>{const f=h.shift();if(f==null)return{};let m=an(f);for(;Object.keys(m).length>0;){const g=h.shift();if(g==null)return m;m=Jz(an(g),m)}return m});return{...o,...u}}getHTML(e,s){const[r,a]=this.scroll.line(e);if(r){const o=r.length();return r.length()>=a+s&&!(a===0&&s===o)?Md(r,a,s,!0):Md(this.scroll,e,s,!0)}return""}getText(e,s){return this.getContents(e,s).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,s){const r=e2(s),a=new Fe().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(a)}insertEmbed(e,s,r){return this.scroll.insertAt(e,s,r),this.update(new Fe().retain(e).insert({[s]:r}))}insertText(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return s=s.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,s),Object.keys(r).forEach(a=>{this.scroll.formatAt(e,s.length,a,r[a])}),this.update(new Fe().retain(e).insert(s,kc(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==Ws.blotName)return!1;const s=e;return s.children.length>1?!1:s.children.head instanceof Fn}removeFormat(e,s){const r=this.getText(e,s),[a,o]=this.scroll.line(e+s);let u=0,h=new Fe;a!=null&&(u=a.length()-o,h=a.delta().slice(o,o+u-1).insert(`
`));const m=this.getContents(e,s+u).diff(new Fe().insert(r).concat(h)),g=new Fe().retain(e).concat(m);return this.applyDelta(g)}update(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const a=this.delta;if(s.length===1&&s[0].type==="characterData"&&s[0].target.data.match(Qz)&&this.scroll.find(s[0].target)){const o=this.scroll.find(s[0].target),u=an(o),h=o.offset(this.scroll),f=s[0].oldValue.replace(Cn.CONTENTS,""),m=new Fe().insert(f),g=new Fe().insert(o.value()),x=r&&{oldRange:t2(r.oldRange,-h),newRange:t2(r.newRange,-h)};e=new Fe().retain(h).concat(m.diff(g,x)).reduce((_,b)=>b.insert?_.insert(b.insert,u):_.push(b),new Fe),this.delta=a.compose(e)}else this.delta=this.getDelta(),(!e||!Ax(a.compose(e),this.delta))&&(e=a.diff(this.delta,r));return e}}function Nc(t,e,s){if(t.length===0){const[_]=S0(s.pop());return e<=0?`</li></${_}>`:`</li></${_}>${Nc([],e-1,s)}`}const[{child:r,offset:a,length:o,indent:u,type:h},...f]=t,[m,g]=S0(h);if(u>e)return s.push(h),u===e+1?`<${m}><li${g}>${Md(r,a,o)}${Nc(f,u,s)}`:`<${m}><li>${Nc(t,e+1,s)}`;const x=s[s.length-1];if(u===e&&h===x)return`</li><li${g}>${Md(r,a,o)}${Nc(f,u,s)}`;const[v]=S0(s.pop());return`</li></${v}>${Nc(t,e-1,s)}`}function Md(t,e,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,s);if(t instanceof In)return Fm(t.value().slice(e,e+s));if(t instanceof qn){if(t.statics.blotName==="list-container"){const m=[];return t.children.forEachAt(e,s,(g,x,v)=>{const _="formats"in g&&typeof g.formats=="function"?g.formats():{};m.push({child:g,offset:x,length:v,indent:_.indent||0,type:_.list})}),Nc(m,-1,[])}const a=[];if(t.children.forEachAt(e,s,(m,g,x)=>{a.push(Md(m,g,x))}),r||t.statics.blotName==="list")return a.join("");const{outerHTML:o,innerHTML:u}=t.domNode,[h,f]=o.split(`>${u}<`);return h==="<table"?`<table style="border: 1px solid #000;">${a.join("")}<${f}`:`${h}>${a.join("")}<${f}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function Jz(t,e){return Object.keys(e).reduce((s,r)=>{if(t[r]==null)return s;const a=e[r];return a===t[r]?s[r]=a:Array.isArray(a)?a.indexOf(t[r])<0?s[r]=a.concat([t[r]]):s[r]=a:s[r]=[a,t[r]],s},{})}function S0(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function e2(t){return t.reduce((e,s)=>{if(typeof s.insert=="string"){const r=s.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,s.attributes)}return e.push(s)},new Fe)}function t2(t,e){let{index:s,length:r}=t;return new ro(s+e,r)}function eF(t){const e=[];return t.forEach(s=>{typeof s.insert=="string"?s.insert.split(`
`).forEach((a,o)=>{o&&e.push({insert:`
`,attributes:s.attributes}),a&&e.push({insert:a,attributes:s.attributes})}):e.push(s)}),e}class bi{static DEFAULTS={};constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=s}}const Tf="\uFEFF";class Tx extends Vr{constructor(e,s){super(e,s),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(Tf),this.rightGuard=document.createTextNode(Tf),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,s){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,s)}restore(e){let s=null,r;const a=e.data.split(Tf).join("");if(e===this.leftGuard)if(this.prev instanceof In){const o=this.prev.length();this.prev.insertAt(o,a),s={startNode:this.prev.domNode,startOffset:o+a.length}}else r=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(r),this),s={startNode:r,startOffset:a.length};else e===this.rightGuard&&(this.next instanceof In?(this.next.insertAt(0,a),s={startNode:this.next.domNode,startOffset:a.length}):(r=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(r),this.next),s={startNode:r,startOffset:a.length}));return e.data=Tf,s}update(e,s){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const a=this.restore(r.target);a&&(s.range=a)}})}}class tF{isComposing=!1;constructor(e,s){this.scroll=e,this.emitter=s,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const s=e.target instanceof Node?this.scroll.find(e.target,!0):null;s&&!(s instanceof Tx)&&(this.emitter.emit(ze.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(ze.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(ze.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(ze.events.COMPOSITION_END,e),this.isComposing=!1}}class Jc{static DEFAULTS={modules:{}};static themes={default:Jc};modules={};constructor(e,s){this.quill=e,this.options=s}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const s=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new s(this.quill,this.options.modules[e]||{}),this.modules[e]}}const sF=t=>t.parentElement||t.getRootNode().host||null,rF=t=>{const e=t.getBoundingClientRect(),s="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,r="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*s,bottom:e.top+t.clientHeight*r,left:e.left}},Of=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},s2=(t,e,s,r,a,o)=>t<s&&e>r?0:t<s?-(s-t+a):e>r?e-t>r-s?t+a-s:e-r+o:0,nF=(t,e)=>{const s=t.ownerDocument;let r=e,a=t;for(;a;){const o=a===s.body,u=o?{top:0,right:window.visualViewport?.width??s.documentElement.clientWidth,bottom:window.visualViewport?.height??s.documentElement.clientHeight,left:0}:rF(a),h=getComputedStyle(a),f=s2(r.left,r.right,u.left,u.right,Of(h.scrollPaddingLeft),Of(h.scrollPaddingRight)),m=s2(r.top,r.bottom,u.top,u.bottom,Of(h.scrollPaddingTop),Of(h.scrollPaddingBottom));if(f||m)if(o)s.defaultView?.scrollBy(f,m);else{const{scrollLeft:g,scrollTop:x}=a;m&&(a.scrollTop+=m),f&&(a.scrollLeft+=f);const v=a.scrollLeft-g,_=a.scrollTop-x;r={left:r.left-v,top:r.top-_,right:r.right-v,bottom:r.bottom-_}}a=o||h.position==="fixed"?null:sF(a)}},iF=100,aF=["block","break","cursor","inline","scroll","text"],lF=(t,e,s)=>{const r=new $c;return aF.forEach(a=>{const o=e.query(a);o&&r.register(o)}),t.forEach(a=>{let o=e.query(a);o||s.error(`Cannot register "${a}" specified in "formats" config. Are you sure it was registered?`);let u=0;for(;o;)if(r.register(o),o="blotName"in o?o.requiredContainer??null:null,u+=1,u>iF){s.error(`Cycle detected in registering blot requiredContainer: "${a}"`);break}}),r},Oc=la("quill"),Rf=new $c;qn.uiClass="ql-ui";class be{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Rf,theme:"default"};static events=ze.events;static sources=ze.sources;static version="2.0.2";static imports={delta:Fe,parchment:Bz,"core/module":bi,"core/theme":Jc};static debug(e){e===!0&&(e="log"),la.level(e)}static find(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return _y.get(e)||Rf.find(e,s)}static import(e){return this.imports[e]==null&&Oc.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],s=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,s):Object.keys(e).forEach(a=>{this.register(a,e[a],s)})}else{const e=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&Oc.warn(`Overwriting ${e} with`,s),this.imports[e]=s,(e.startsWith("blots/")||e.startsWith("formats/"))&&s&&typeof s!="boolean"&&s.blotName!=="abstract"&&Rf.register(s),typeof s.register=="function"&&s.register(Rf)}}constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=oF(e,s),this.container=this.options.container,this.container==null){Oc.error("Invalid Quill container",e);return}this.options.debug&&be.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",_y.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new ze;const a=kx.blotName,o=this.options.registry.query(a);if(!o||!("blotName"in o))throw new Error(`Cannot initialize Quill without "${a}" blot`);if(this.scroll=new o(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Xz(this.scroll),this.selection=new Wz(this.scroll,this.emitter),this.composition=new tF(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(ze.events.EDITOR_CHANGE,u=>{u===ze.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(ze.events.SCROLL_UPDATE,(u,h)=>{const f=this.selection.lastRange,[m]=this.selection.getRange(),g=f&&m?{oldRange:f,newRange:m}:void 0;Nn.call(this,()=>this.editor.update(null,h,g),u)}),this.emitter.on(ze.events.SCROLL_EMBED_UPDATE,(u,h)=>{const f=this.selection.lastRange,[m]=this.selection.getRange(),g=f&&m?{oldRange:f,newRange:m}:void 0;Nn.call(this,()=>{const x=new Fe().retain(u.offset(this)).retain({[u.statics.blotName]:h});return this.editor.update(x,[],g)},be.sources.USER)}),r){const u=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(u)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,s),e}blur(){this.selection.setRange(null)}deleteText(e,s,r){return[e,s,,r]=Vi(e,s,r),Nn.call(this,()=>this.editor.deleteText(e,s),r,e,-1*s)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const s=e();return this.allowReadOnlyEdits=!1,s}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ze.sources.API;return Nn.call(this,()=>{const a=this.getSelection(!0);let o=new Fe;if(a==null)return o;if(this.scroll.query(e,He.BLOCK))o=this.editor.formatLine(a.index,a.length,{[e]:s});else{if(a.length===0)return this.selection.format(e,s),o;o=this.editor.formatText(a.index,a.length,{[e]:s})}return this.setSelection(a,ze.sources.SILENT),o},r)}formatLine(e,s,r,a,o){let u;return[e,s,u,o]=Vi(e,s,r,a,o),Nn.call(this,()=>this.editor.formatLine(e,s,u),o,e,0)}formatText(e,s,r,a,o){let u;return[e,s,u,o]=Vi(e,s,r,a,o),Nn.call(this,()=>this.editor.formatText(e,s,u),o,e,0)}getBounds(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,s):r=this.selection.getBounds(e.index,e.length),!r)return null;const a=this.container.getBoundingClientRect();return{bottom:r.bottom-a.top,height:r.height,left:r.left-a.left,right:r.right-a.left,top:r.top-a.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,s]=Vi(e,s),this.editor.getContents(e,s)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,s):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,s)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(s=s??this.getLength()-e),[e,s]=Vi(e,s),this.editor.getHTML(e,s)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(s=s??this.getLength()-e),[e,s]=Vi(e,s),this.editor.getText(e,s)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,s,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:be.sources.API;return Nn.call(this,()=>this.editor.insertEmbed(e,s,r),a,e)}insertText(e,s,r,a,o){let u;return[e,,u,o]=Vi(e,0,r,a,o),Nn.call(this,()=>this.editor.insertText(e,s,u),o,e,s.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,s,r){return[e,s,,r]=Vi(e,s,r),Nn.call(this,()=>this.editor.removeFormat(e,s),r,e)}scrollRectIntoView(e){nF(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,s=e&&this.selection.getBounds(e.index,e.length);s&&this.scrollRectIntoView(s)}setContents(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze.sources.API;return Nn.call(this,()=>{e=new Fe(e);const r=this.getLength(),a=this.editor.deleteText(0,r),o=this.editor.insertContents(0,e),u=this.editor.deleteText(this.getLength()-1,1);return a.compose(o).compose(u)},s)}setSelection(e,s,r){e==null?this.selection.setRange(null,s||be.sources.API):([e,s,,r]=Vi(e,s,r),this.selection.setRange(new ro(Math.max(0,e),s),r),r!==ze.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze.sources.API;const r=new Fe().insert(e);return this.setContents(r,s)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ze.sources.USER;const s=this.scroll.update(e);return this.selection.update(e),s}updateContents(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze.sources.API;return Nn.call(this,()=>(e=new Fe(e),this.editor.applyDelta(e)),s,!0)}}function r2(t){return typeof t=="string"?document.querySelector(t):t}function E0(t){return Object.entries(t??{}).reduce((e,s)=>{let[r,a]=s;return{...e,[r]:a===!0?{}:a}},{})}function n2(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function oF(t,e){const s=r2(t);if(!s)throw new Error("Invalid Quill container");const a=!e.theme||e.theme===be.DEFAULTS.theme?Jc:be.import(`themes/${e.theme}`);if(!a)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:o,...u}=be.DEFAULTS,{modules:h,...f}=a.DEFAULTS;let m=E0(e.modules);m!=null&&m.toolbar&&m.toolbar.constructor!==Object&&(m={...m,toolbar:{container:m.toolbar}});const g=Ja({},E0(o),E0(h),m),x={...u,...n2(f),...n2(e)};let v=e.registry;return v?e.formats&&Oc.warn('Ignoring "formats" option because "registry" is specified'):v=e.formats?lF(e.formats,x.registry,Oc):x.registry,{...x,registry:v,container:s,theme:a,modules:Object.entries(g).reduce((_,b)=>{let[N,w]=b;if(!w)return _;const E=be.import(`modules/${N}`);return E==null?(Oc.error(`Cannot load ${N} module. Are you sure you registered it?`),_):{..._,[N]:Ja({},E.DEFAULTS||{},w)}},{}),bounds:r2(x.bounds)}}function Nn(t,e,s,r){if(!this.isEnabled()&&e===ze.sources.USER&&!this.allowReadOnlyEdits)return new Fe;let a=s==null?null:this.getSelection();const o=this.editor.delta,u=t();if(a!=null&&(s===!0&&(s=a.index),r==null?a=i2(a,u,e):r!==0&&(a=i2(a,s,r,e)),this.setSelection(a,ze.sources.SILENT)),u.length()>0){const h=[ze.events.TEXT_CHANGE,u,o,e];this.emitter.emit(ze.events.EDITOR_CHANGE,...h),e!==ze.sources.SILENT&&this.emitter.emit(...h)}return u}function Vi(t,e,s,r,a){let o={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(a=r,r=s,s=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(a=r,r=s,s=e,e=0),typeof s=="object"?(o=s,a=r):typeof s=="string"&&(r!=null?o[s]=r:a=s),a=a||ze.sources.API,[t,e,o,a]}function i2(t,e,s,r){const a=typeof s=="number"?s:0;if(t==null)return null;let o,u;return e&&typeof e.transformPosition=="function"?[o,u]=[t.index,t.index+t.length].map(h=>e.transformPosition(h,r!==ze.sources.USER)):[o,u]=[t.index,t.index+t.length].map(h=>h<e||h===e&&r===ze.sources.USER?h:a>=0?h+a:Math.max(e,h+a)),new ro(o,u-o)}class go extends zm{}function a2(t){return t instanceof Ws||t instanceof on}function l2(t){return typeof t.updateContent=="function"}class cF extends kx{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Ws;static allowedChildren=[Ws,on,go];constructor(e,s,r){let{emitter:a}=r;super(e,s),this.emitter=a,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",o=>this.handleDragStart(o))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(ze.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(ze.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,s){this.emitter.emit(ze.events.SCROLL_EMBED_UPDATE,e,s)}deleteAt(e,s){const[r,a]=this.line(e),[o]=this.line(e+s);if(super.deleteAt(e,s),o!=null&&r!==o&&a>0){if(r instanceof on||o instanceof on){this.optimize();return}const u=o.children.head instanceof Fn?null:o.children.head;r.moveChildren(o,u),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,s,r,a){super.formatAt(e,s,r,a),this.optimize()}insertAt(e,s,r){if(e>=this.length())if(r==null||this.scroll.query(s,He.BLOCK)==null){const a=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(a),r==null&&s.endsWith(`
`)?a.insertAt(0,s.slice(0,-1),r):a.insertAt(0,s,r)}else{const a=this.scroll.create(s,r);this.appendChild(a)}else super.insertAt(e,s,r);this.optimize()}insertBefore(e,s){if(e.statics.scope===He.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,s)}else super.insertBefore(e,s)}insertContents(e,s){const r=this.deltaToRenderBlocks(s.concat(new Fe().insert(`
`))),a=r.pop();if(a==null)return;this.batchStart();const o=r.shift();if(o){const f=o.type==="block"&&(o.delta.length()===0||!this.descendant(on,e)[0]&&e<this.length()),m=o.type==="block"?o.delta:new Fe().insert({[o.key]:o.value});A0(this,e,m);const g=o.type==="block"?1:0,x=e+m.length()+g;f&&this.insertAt(x-1,`
`);const v=an(this.line(e)[0]),_=cn.AttributeMap.diff(v,o.attributes)||{};Object.keys(_).forEach(b=>{this.formatAt(x-1,1,b,_[b])}),e=x}let[u,h]=this.children.find(e);if(r.length&&(u&&(u=u.split(h),h=0),r.forEach(f=>{if(f.type==="block"){const m=this.createBlock(f.attributes,u||void 0);A0(m,0,f.delta)}else{const m=this.create(f.key,f.value);this.insertBefore(m,u||void 0),Object.keys(f.attributes).forEach(g=>{m.format(g,f.attributes[g])})}})),a.type==="block"&&a.delta.length()){const f=u?u.offset(u.scroll)+h:this.length();A0(this,f,a.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const s=this.path(e).pop();if(!s)return[null,-1];const[r,a]=s;return r instanceof nr?[r,a]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(a2,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(a,o,u)=>{let h=[],f=u;return a.children.forEachAt(o,u,(m,g,x)=>{a2(m)?h.push(m):m instanceof zm&&(h=h.concat(r(m,g,f))),f-=x}),h};return r(this,e,s)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,s),e.length>0&&this.emitter.emit(ze.events.SCROLL_OPTIMIZE,e,s))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let s=ze.sources.USER;typeof e=="string"&&(s=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:a}=r;const o=this.find(a,!0);return o&&!l2(o)}),e.length>0&&this.emitter.emit(ze.events.SCROLL_BEFORE_UPDATE,s,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(ze.events.SCROLL_UPDATE,s,e)}updateEmbedAt(e,s,r){const[a]=this.descendant(o=>o instanceof on,e);a&&a.statics.blotName===s&&l2(a)&&a.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const s=[];let r=new Fe;return e.forEach(a=>{const o=a?.insert;if(o)if(typeof o=="string"){const u=o.split(`
`);u.slice(0,-1).forEach(f=>{r.insert(f,a.attributes),s.push({type:"block",delta:r,attributes:a.attributes??{}}),r=new Fe});const h=u[u.length-1];h&&r.insert(h,a.attributes)}else{const u=Object.keys(o)[0];if(!u)return;this.query(u,He.INLINE)?r.push(a):(r.length()&&s.push({type:"block",delta:r,attributes:{}}),r=new Fe,s.push({type:"blockEmbed",key:u,value:o[u],attributes:a.attributes??{}}))}}),r.length()&&s.push({type:"block",delta:r,attributes:{}}),s}createBlock(e,s){let r;const a={};Object.entries(e).forEach(h=>{let[f,m]=h;this.query(f,He.BLOCK&He.BLOT)!=null?r=f:a[f]=m});const o=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(o,s||void 0);const u=o.length();return Object.entries(a).forEach(h=>{let[f,m]=h;o.formatAt(0,u,f,m)}),o}}function A0(t,e,s){s.reduce((r,a)=>{const o=cn.Op.length(a);let u=a.attributes||{};if(a.insert!=null){if(typeof a.insert=="string"){const h=a.insert;t.insertAt(r,h);const[f]=t.descendant(nr,r),m=an(f);u=cn.AttributeMap.diff(m,u)||{}}else if(typeof a.insert=="object"){const h=Object.keys(a.insert)[0];if(h==null)return r;if(t.insertAt(r,h,a.insert[h]),t.scroll.query(h,He.INLINE)!=null){const[m]=t.descendant(nr,r),g=an(m);u=cn.AttributeMap.diff(g,u)||{}}}}return Object.keys(u).forEach(h=>{t.formatAt(r,o,h,u[h])}),r+o},e)}const Ox={scope:He.BLOCK,whitelist:["right","center","justify"]},uF=new gi("align","align",Ox),sA=new zn("align","ql-align",Ox),rA=new ul("align","text-align",Ox);class nA extends ul{value(e){let s=super.value(e);return s.startsWith("rgb(")?(s=s.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${s.split(",").map(a=>`00${parseInt(a,10).toString(16)}`.slice(-2)).join("")}`):s}}const dF=new zn("color","ql-color",{scope:He.INLINE}),Rx=new nA("color","color",{scope:He.INLINE}),hF=new zn("background","ql-bg",{scope:He.INLINE}),Mx=new nA("background","background-color",{scope:He.INLINE});class yo extends go{static create(e){const s=super.create(e);return s.setAttribute("spellcheck","false"),s}code(e,s){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+s)}html(e,s){return`<pre>
${Fm(this.code(e,s))}
</pre>`}}class dr extends Ws{static TAB="  ";static register(){be.register(yo)}}class Dx extends ur{}Dx.blotName="code";Dx.tagName="CODE";dr.blotName="code-block";dr.className="ql-code-block";dr.tagName="DIV";yo.blotName="code-block-container";yo.className="ql-code-block-container";yo.tagName="DIV";yo.allowedChildren=[dr];dr.allowedChildren=[In,Fn,Cn];dr.requiredContainer=yo;const Lx={scope:He.BLOCK,whitelist:["rtl"]},iA=new gi("direction","dir",Lx),aA=new zn("direction","ql-direction",Lx),lA=new ul("direction","direction",Lx),oA={scope:He.INLINE,whitelist:["serif","monospace"]},cA=new zn("font","ql-font",oA);class fF extends ul{value(e){return super.value(e).replace(/["']/g,"")}}const uA=new fF("font","font-family",oA),dA=new zn("size","ql-size",{scope:He.INLINE,whitelist:["small","large","huge"]}),hA=new ul("size","font-size",{scope:He.INLINE,whitelist:["10px","18px","32px"]}),mF=la("quill:keyboard"),pF=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Hm extends bi{static match(e,s){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!s[r]!==e[r]&&s[r]!==null)?!1:s.key===e.key||s.key===e.which}constructor(e,s){super(e,s),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=yF(e);if(a==null){mF.warn("Attempted to add invalid keyboard binding",a);return}typeof s=="function"&&(s={handler:s}),typeof r=="function"&&(r={handler:r}),(Array.isArray(a.key)?a.key:[a.key]).forEach(u=>{const h={...a,key:u,...s,...r};this.bindings[h.key]=this.bindings[h.key]||[],this.bindings[h.key].push(h)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const a=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(E=>Hm.match(e,E));if(a.length===0)return;const o=be.find(e.target,!0);if(o&&o.scroll!==this.quill.scroll)return;const u=this.quill.getSelection();if(u==null||!this.quill.hasFocus())return;const[h,f]=this.quill.getLine(u.index),[m,g]=this.quill.getLeaf(u.index),[x,v]=u.length===0?[m,g]:this.quill.getLeaf(u.index+u.length),_=m instanceof ym?m.value().slice(0,g):"",b=x instanceof ym?x.value().slice(v):"",N={collapsed:u.length===0,empty:u.length===0&&h.length()<=1,format:this.quill.getFormat(u),line:h,offset:f,prefix:_,suffix:b,event:e};a.some(E=>{if(E.collapsed!=null&&E.collapsed!==N.collapsed||E.empty!=null&&E.empty!==N.empty||E.offset!=null&&E.offset!==N.offset)return!1;if(Array.isArray(E.format)){if(E.format.every(A=>N.format[A]==null))return!1}else if(typeof E.format=="object"&&!Object.keys(E.format).every(A=>E.format[A]===!0?N.format[A]!=null:E.format[A]===!1?N.format[A]==null:Ax(E.format[A],N.format[A])))return!1;return E.prefix!=null&&!E.prefix.test(N.prefix)||E.suffix!=null&&!E.suffix.test(N.suffix)?!1:E.handler.call(this,u,N,E)!==!0})&&e.preventDefault()})}handleBackspace(e,s){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(s.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let a={};const[o]=this.quill.getLine(e.index);let u=new Fe().retain(e.index-r).delete(r);if(s.offset===0){const[h]=this.quill.getLine(e.index-1);if(h&&!(h.statics.blotName==="block"&&h.length()<=1)){const m=o.formats(),g=this.quill.getFormat(e.index-1,1);if(a=cn.AttributeMap.diff(m,g)||{},Object.keys(a).length>0){const x=new Fe().retain(e.index+o.length()-2).retain(1,a);u=u.compose(x)}}}this.quill.updateContents(u,be.sources.USER),this.quill.focus()}handleDelete(e,s){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(s.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let a={};const[o]=this.quill.getLine(e.index);let u=new Fe().retain(e.index).delete(r);if(s.offset>=o.length()-1){const[h]=this.quill.getLine(e.index+1);if(h){const f=o.formats(),m=this.quill.getFormat(e.index,1);a=cn.AttributeMap.diff(f,m)||{},Object.keys(a).length>0&&(u=u.retain(h.length()-1).retain(1,a))}}this.quill.updateContents(u,be.sources.USER),this.quill.focus()}handleDeleteRange(e){qx({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,s){const r=Object.keys(s.format).reduce((o,u)=>(this.quill.scroll.query(u,He.BLOCK)&&!Array.isArray(s.format[u])&&(o[u]=s.format[u]),o),{}),a=new Fe().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(a,be.sources.USER),this.quill.setSelection(e.index+1,be.sources.SILENT),this.quill.focus()}}const gF={bindings:{bold:C0("bold"),italic:C0("italic"),underline:C0("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",be.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",be.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",be.sources.USER):e.format.list!=null&&this.quill.format("list",!1,be.sources.USER)}},"indent code-block":o2(!0),"outdent code-block":o2(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,be.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const s=new Fe().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(s,be.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,be.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,be.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const s={list:!1};e.format.indent&&(s.indent=!1),this.quill.formatLine(t.index,t.length,s,be.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,s]=this.quill.getLine(t.index),r={...e.formats(),list:"checked"},a=new Fe().retain(t.index).insert(`
`,r).retain(e.length()-s-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,be.sources.USER),this.quill.setSelection(t.index+1,be.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[s,r]=this.quill.getLine(t.index),a=new Fe().retain(t.index).insert(`
`,e.format).retain(s.length()-r-1).retain(1,{header:null});this.quill.updateContents(a,be.sources.USER),this.quill.setSelection(t.index+1,be.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[s,r,a,o]=e.getTable(t),u=xF(s,r,a,o);if(u==null)return;let h=s.offset();if(u<0){const f=new Fe().retain(h).insert(`
`);this.quill.updateContents(f,be.sources.USER),this.quill.setSelection(t.index+1,t.length,be.sources.SILENT)}else if(u>0){h+=s.length();const f=new Fe().retain(h).insert(`
`);this.quill.updateContents(f,be.sources.USER),this.quill.setSelection(h,be.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:s,line:r}=e,a=r.offset(this.quill.scroll);s.shiftKey?this.quill.setSelection(a-1,be.sources.USER):this.quill.setSelection(a+r.length(),be.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:s}=e.prefix,[r,a]=this.quill.getLine(t.index);if(a>s)return!0;let o;switch(e.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(t.index," ",be.sources.USER),this.quill.history.cutoff();const u=new Fe().retain(t.index-a).delete(s+1).retain(r.length()-2-a).retain(1,{list:o});return this.quill.updateContents(u,be.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-s,be.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,s]=this.quill.getLine(t.index);let r=2,a=e;for(;a!=null&&a.length()<=1&&a.formats()["code-block"];)if(a=a.prev,r-=1,r<=0){const o=new Fe().retain(t.index+e.length()-s-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(o,be.sources.USER),this.quill.setSelection(t.index-1,be.sources.SILENT),!1}return!0}},"embed left":Mf("ArrowLeft",!1),"embed left shift":Mf("ArrowLeft",!0),"embed right":Mf("ArrowRight",!1),"embed right shift":Mf("ArrowRight",!0),"table down":c2(!1),"table up":c2(!0)}};Hm.DEFAULTS=gF;function o2(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,s){let{event:r}=s;const a=this.quill.scroll.query("code-block"),{TAB:o}=a;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,o,be.sources.USER),this.quill.setSelection(e.index+o.length,be.sources.SILENT);return}const u=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:h,length:f}=e;u.forEach((m,g)=>{t?(m.insertAt(0,o),g===0?h+=o.length:f+=o.length):m.domNode.textContent.startsWith(o)&&(m.deleteAt(0,o.length),g===0?h-=o.length:f-=o.length)}),this.quill.update(be.sources.USER),this.quill.setSelection(h,f,be.sources.SILENT)}}}function Mf(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:a}=r;t==="ArrowRight"&&(a+=r.length+1);const[o]=this.quill.getLeaf(a);return o instanceof Vr?(t==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,be.sources.USER):this.quill.setSelection(r.index-1,be.sources.USER):e?this.quill.setSelection(r.index,r.length+1,be.sources.USER):this.quill.setSelection(r.index+r.length+1,be.sources.USER),!1):!0}}}function C0(t){return{key:t[0],shortKey:!0,handler(e,s){this.quill.format(t,!s.format[t],be.sources.USER)}}}function c2(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,s){const r=t?"prev":"next",a=s.line,o=a.parent[r];if(o!=null){if(o.statics.blotName==="table-row"){let u=o.children.head,h=a;for(;h.prev!=null;)h=h.prev,u=u.next;const f=u.offset(this.quill.scroll)+Math.min(s.offset,u.length()-1);this.quill.setSelection(f,0,be.sources.USER)}}else{const u=a.table()[r];u!=null&&(t?this.quill.setSelection(u.offset(this.quill.scroll)+u.length()-1,0,be.sources.USER):this.quill.setSelection(u.offset(this.quill.scroll),0,be.sources.USER))}return!1}}}function yF(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=kc(t);else return null;return t.shortKey&&(t[pF]=t.shortKey,delete t.shortKey),t}function qx(t){let{quill:e,range:s}=t;const r=e.getLines(s);let a={};if(r.length>1){const o=r[0].formats(),u=r[r.length-1].formats();a=cn.AttributeMap.diff(u,o)||{}}e.deleteText(s,be.sources.USER),Object.keys(a).length>0&&e.formatLine(s.index,1,a,be.sources.USER),e.setSelection(s.index,be.sources.SILENT)}function xF(t,e,s,r){return e.prev==null&&e.next==null?s.prev==null&&s.next==null?r===0?-1:1:s.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const bF=/font-weight:\s*normal/,vF=["P","OL","UL"],u2=t=>t&&vF.includes(t.tagName),wF=t=>{Array.from(t.querySelectorAll("br")).filter(e=>u2(e.previousElementSibling)&&u2(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},_F=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(bF)).forEach(e=>{const s=t.createDocumentFragment();s.append(...e.childNodes),e.parentNode?.replaceChild(s,e)})};function jF(t){t.querySelector('[id^="docs-internal-guid-"]')&&(_F(t),wF(t))}const NF=/\bmso-list:[^;]*ignore/i,SF=/\bmso-list:[^;]*\bl(\d+)/i,EF=/\bmso-list:[^;]*\blevel(\d+)/i,AF=(t,e)=>{const s=t.getAttribute("style"),r=s?.match(SF);if(!r)return null;const a=Number(r[1]),o=s?.match(EF),u=o?Number(o[1]):1,h=new RegExp(`@list l${a}:level${u}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),f=e.match(h),m=f&&f[1]==="bullet"?"bullet":"ordered";return{id:a,indent:u,type:m,element:t}},CF=t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),s=[],r=[];e.forEach(u=>{(u.getAttribute("style")||"").match(NF)?s.push(u):r.push(u)}),s.forEach(u=>u.parentNode?.removeChild(u));const a=t.documentElement.innerHTML,o=r.map(u=>AF(u,a)).filter(u=>u);for(;o.length;){const u=[];let h=o.shift();for(;h;)u.push(h),h=o.length&&o[0]?.element===h.element.nextElementSibling&&o[0].id===h.id?o.shift():null;const f=document.createElement("ul");u.forEach(x=>{const v=document.createElement("li");v.setAttribute("data-list",x.type),x.indent>1&&v.setAttribute("class",`ql-indent-${x.indent-1}`),v.innerHTML=x.element.innerHTML,f.appendChild(v)});const m=u[0]?.element,{parentNode:g}=m??{};m&&g?.replaceChild(f,m),u.slice(1).forEach(x=>{let{element:v}=x;g?.removeChild(v)})}};function kF(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&CF(t)}const TF=[kF,jF],OF=t=>{t.documentElement&&TF.forEach(e=>{e(t)})},RF=la("quill:clipboard"),MF=[[Node.TEXT_NODE,GF],[Node.TEXT_NODE,h2],["br",$F],[Node.ELEMENT_NODE,h2],[Node.ELEMENT_NODE,IF],[Node.ELEMENT_NODE,PF],[Node.ELEMENT_NODE,HF],["li",zF],["ol, ul",FF],["pre",UF],["tr",VF],["b",k0("bold")],["i",k0("italic")],["strike",k0("strike")],["style",BF]],DF=[uF,iA].reduce((t,e)=>(t[e.keyName]=e,t),{}),d2=[rA,Mx,Rx,lA,uA,hA].reduce((t,e)=>(t[e.keyName]=e,t),{});class LF extends bi{static DEFAULTS={matchers:[]};constructor(e,s){super(e,s),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],MF.concat(this.options.matchers??[]).forEach(r=>{let[a,o]=r;this.addMatcher(a,o)})}addMatcher(e,s){this.matchers.push([e,s])}convert(e){let{html:s,text:r}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a[dr.blotName])return new Fe().insert(r||"",{[dr.blotName]:a[dr.blotName]});if(!s)return new Fe().insert(r||"",a);const o=this.convertHTML(s);return Jd(o,`
`)&&(o.ops[o.ops.length-1].attributes==null||a.table)?o.compose(new Fe().retain(o.length()-1).delete(1)):o}normalizeHTML(e){OF(e)}convertHTML(e){const s=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(s);const r=s.body,a=new WeakMap,[o,u]=this.prepareMatching(r,a);return Px(this.quill.scroll,r,o,u,a)}dangerouslyPasteHTML(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:be.sources.API;if(typeof e=="string"){const a=this.convert({html:e,text:""});this.quill.setContents(a,s),this.quill.setSelection(0,be.sources.SILENT)}else{const a=this.convert({html:s,text:""});this.quill.updateContents(new Fe().retain(e).concat(a),r),this.quill.setSelection(e+a.length(),be.sources.SILENT)}}onCaptureCopy(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:a,text:o}=this.onCopy(r,s);e.clipboardData?.setData("text/plain",o),e.clipboardData?.setData("text/html",a),s&&qx({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(s=>s[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const s=this.quill.getSelection(!0);if(s==null)return;const r=e.clipboardData?.getData("text/html");let a=e.clipboardData?.getData("text/plain");if(!r&&!a){const u=e.clipboardData?.getData("text/uri-list");u&&(a=this.normalizeURIList(u))}const o=Array.from(e.clipboardData?.files||[]);if(!r&&o.length>0){this.quill.uploader.upload(s,o);return}if(r&&o.length>0){const u=new DOMParser().parseFromString(r,"text/html");if(u.body.childElementCount===1&&u.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(s,o);return}}this.onPaste(s,{html:r,text:a})}onCopy(e){const s=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:s}}onPaste(e,s){let{text:r,html:a}=s;const o=this.quill.getFormat(e.index),u=this.convert({text:r,html:a},o);RF.log("onPaste",u,{text:r,html:a});const h=new Fe().retain(e.index).delete(e.length).concat(u);this.quill.updateContents(h,be.sources.USER),this.quill.setSelection(h.length()-e.length,be.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,s){const r=[],a=[];return this.matchers.forEach(o=>{const[u,h]=o;switch(u){case Node.TEXT_NODE:a.push(h);break;case Node.ELEMENT_NODE:r.push(h);break;default:Array.from(e.querySelectorAll(u)).forEach(f=>{s.has(f)?s.get(f)?.push(h):s.set(f,[h])});break}}),[r,a]}}function xo(t,e,s,r){return r.query(e)?t.reduce((a,o)=>{if(!o.insert)return a;if(o.attributes&&o.attributes[e])return a.push(o);const u=s?{[e]:s}:{};return a.insert(o.insert,{...u,...o.attributes})},new Fe):t}function Jd(t,e){let s="";for(let r=t.ops.length-1;r>=0&&s.length<e.length;--r){const a=t.ops[r];if(typeof a.insert!="string")break;s=a.insert+s}return s.slice(-1*e.length)===e}function Qa(t,e){if(!(t instanceof Element))return!1;const s=e.query(t);return s&&s.prototype instanceof Vr?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function qF(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Qa(t.previousElementSibling,e)&&!Qa(t.nextElementSibling,e)}const Df=new WeakMap;function fA(t){return t==null?!1:(Df.has(t)||(t.tagName==="PRE"?Df.set(t,!0):Df.set(t,fA(t.parentNode))),Df.get(t))}function Px(t,e,s,r,a){return e.nodeType===e.TEXT_NODE?r.reduce((o,u)=>u(e,o,t),new Fe):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((o,u)=>{let h=Px(t,u,s,r,a);return u.nodeType===e.ELEMENT_NODE&&(h=s.reduce((f,m)=>m(u,f,t),h),h=(a.get(u)||[]).reduce((f,m)=>m(u,f,t),h)),o.concat(h)},new Fe):new Fe}function k0(t){return(e,s,r)=>xo(s,t,!0,r)}function PF(t,e,s){const r=gi.keys(t),a=zn.keys(t),o=ul.keys(t),u={};return r.concat(a).concat(o).forEach(h=>{let f=s.query(h,He.ATTRIBUTE);f!=null&&(u[f.attrName]=f.value(t),u[f.attrName])||(f=DF[h],f!=null&&(f.attrName===h||f.keyName===h)&&(u[f.attrName]=f.value(t)||void 0),f=d2[h],f!=null&&(f.attrName===h||f.keyName===h)&&(f=d2[h],u[f.attrName]=f.value(t)||void 0))}),Object.entries(u).reduce((h,f)=>{let[m,g]=f;return xo(h,m,g,s)},e)}function IF(t,e,s){const r=s.query(t);if(r==null)return e;if(r.prototype instanceof Vr){const a={},o=r.value(t);if(o!=null)return a[r.blotName]=o,new Fe().insert(a,r.formats(t,s))}else if(r.prototype instanceof Rd&&!Jd(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return xo(e,r.blotName,r.formats(t,s),s);return e}function $F(t,e){return Jd(e,`
`)||e.insert(`
`),e}function UF(t,e,s){const r=s.query("code-block"),a=r&&"formats"in r&&typeof r.formats=="function"?r.formats(t,s):!0;return xo(e,"code-block",a,s)}function BF(){return new Fe}function zF(t,e,s){const r=s.query(t);if(r==null||r.blotName!=="list"||!Jd(e,`
`))return e;let a=-1,o=t.parentNode;for(;o!=null;)["OL","UL"].includes(o.tagName)&&(a+=1),o=o.parentNode;return a<=0?e:e.reduce((u,h)=>h.insert?h.attributes&&typeof h.attributes.indent=="number"?u.push(h):u.insert(h.insert,{indent:a,...h.attributes||{}}):u,new Fe)}function FF(t,e,s){const r=t;let a=r.tagName==="OL"?"ordered":"bullet";const o=r.getAttribute("data-checked");return o&&(a=o==="true"?"checked":"unchecked"),xo(e,"list",a,s)}function h2(t,e,s){if(!Jd(e,`
`)){if(Qa(t,s)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let r=t.nextSibling;for(;r!=null;){if(Qa(r,s))return e.insert(`
`);const a=s.query(r);if(a&&a.prototype instanceof on)return e.insert(`
`);r=r.firstChild}}}return e}function HF(t,e,s){const r={},a=t.style||{};return a.fontStyle==="italic"&&(r.italic=!0),a.textDecoration==="underline"&&(r.underline=!0),a.textDecoration==="line-through"&&(r.strike=!0),(a.fontWeight?.startsWith("bold")||parseInt(a.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((o,u)=>{let[h,f]=u;return xo(o,h,f,s)},e),parseFloat(a.textIndent||0)>0?new Fe().insert("	").concat(e):e}function VF(t,e,s){const r=t.parentElement?.tagName==="TABLE"?t.parentElement:t.parentElement?.parentElement;if(r!=null){const o=Array.from(r.querySelectorAll("tr")).indexOf(t)+1;return xo(e,"table",o,s)}return e}function GF(t,e,s){let r=t.data;if(t.parentElement?.tagName==="O:P")return e.insert(r.trim());if(!fA(t)){if(r.trim().length===0&&r.includes(`
`)&&!qF(t,s))return e;const a=(o,u)=>{const h=u.replace(/[^\u00a0]/g,"");return h.length<1&&o?" ":h};r=r.replace(/\r\n/g," ").replace(/\n/g," "),r=r.replace(/\s\s+/g,a.bind(a,!0)),(t.previousSibling==null&&t.parentElement!=null&&Qa(t.parentElement,s)||t.previousSibling instanceof Element&&Qa(t.previousSibling,s))&&(r=r.replace(/^\s+/,a.bind(a,!1))),(t.nextSibling==null&&t.parentElement!=null&&Qa(t.parentElement,s)||t.nextSibling instanceof Element&&Qa(t.nextSibling,s))&&(r=r.replace(/\s+$/,a.bind(a,!1)))}return e.insert(r)}class ZF extends bi{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,s){super(e,s),this.quill.on(be.events.EDITOR_CHANGE,(r,a,o,u)=>{r===be.events.SELECTION_CHANGE?a&&u!==be.sources.SILENT&&(this.currentRange=a):r===be.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||u===be.sources.USER?this.record(a,o):this.transform(a)),this.currentRange=Sy(this.currentRange,a))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{r.inputType==="historyUndo"?(this.undo(),r.preventDefault()):r.inputType==="historyRedo"&&(this.redo(),r.preventDefault())})}change(e,s){if(this.stack[e].length===0)return;const r=this.stack[e].pop();if(!r)return;const a=this.quill.getContents(),o=r.delta.invert(a);this.stack[s].push({delta:o,range:Sy(r.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,be.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,s){if(e.ops.length===0)return;this.stack.redo=[];let r=e.invert(s),a=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const u=this.stack.undo.pop();u&&(r=r.compose(u.delta),a=u.range)}else this.lastRecorded=o;r.length()!==0&&(this.stack.undo.push({delta:r,range:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){f2(this.stack.undo,e),f2(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,be.sources.USER);else{const s=KF(this.quill.scroll,e.delta);this.quill.setSelection(s,be.sources.USER)}}}function f2(t,e){let s=e;for(let r=t.length-1;r>=0;r-=1){const a=t[r];t[r]={delta:s.transform(a.delta,!0),range:a.range&&Sy(a.range,s)},s=a.delta.transform(s),t[r].delta.length()===0&&t.splice(r,1)}}function YF(t,e){const s=e.ops[e.ops.length-1];return s==null?!1:s.insert!=null?typeof s.insert=="string"&&s.insert.endsWith(`
`):s.attributes!=null?Object.keys(s.attributes).some(r=>t.query(r,He.BLOCK)!=null):!1}function KF(t,e){const s=e.reduce((a,o)=>a+(o.delete||0),0);let r=e.length()-s;return YF(t,e)&&(r-=1),r}function Sy(t,e){if(!t)return t;const s=e.transformPosition(t.index),r=e.transformPosition(t.index+t.length);return{index:s,length:r-s}}class mA extends bi{constructor(e,s){super(e,s),e.root.addEventListener("drop",r=>{r.preventDefault();let a=null;if(document.caretRangeFromPoint)a=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const u=document.caretPositionFromPoint(r.clientX,r.clientY);a=document.createRange(),a.setStart(u.offsetNode,u.offset),a.setEnd(u.offsetNode,u.offset)}const o=a&&e.selection.normalizeNative(a);if(o){const u=e.selection.normalizedToRange(o);r.dataTransfer?.files&&this.upload(u,r.dataTransfer.files)}})}upload(e,s){const r=[];Array.from(s).forEach(a=>{a&&this.options.mimetypes?.includes(a.type)&&r.push(a)}),r.length>0&&this.options.handler.call(this,e,r)}}mA.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const s=e.map(r=>new Promise(a=>{const o=new FileReader;o.onload=()=>{a(o.result)},o.readAsDataURL(r)}));Promise.all(s).then(r=>{const a=r.reduce((o,u)=>o.insert({image:u}),new Fe().retain(t.index).delete(t.length));this.quill.updateContents(a,ze.sources.USER),this.quill.setSelection(t.index+r.length,ze.sources.SILENT)})}};const WF=["insertText","insertReplacementText"];class QF extends bi{constructor(e,s){super(e,s),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(be.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){qx({range:e,quill:this.quill})}replaceText(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(s){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Fe().retain(e.index).insert(s,r),be.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+s.length,0,be.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!WF.includes(e.inputType))return;const s=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!s||s.collapsed===!0)return;const r=XF(e);if(r==null)return;const a=this.quill.selection.normalizeNative(s),o=a?this.quill.selection.normalizedToRange(a):null;o&&this.replaceText(o,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function XF(t){return typeof t.data=="string"?t.data:t.dataTransfer?.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const JF=/Mac/i.test(navigator.platform),eH=100,tH=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||JF&&t.key==="a"&&t.ctrlKey===!0);class sH extends bi{isListening=!1;selectionChangeDeadline=0;constructor(e,s){super(e,s),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,s){let{line:r,event:a}=s;if(!(r instanceof qn)||!r.uiNode)return!0;const o=getComputedStyle(r.domNode).direction==="rtl";return o&&a.key!=="ArrowRight"||!o&&a.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(a.shiftKey?1:0),be.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&tH(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+eH,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const s=e.getRangeAt(0);if(s.collapsed!==!0||s.startOffset!==0)return;const r=this.quill.scroll.find(s.startContainer);if(!(r instanceof qn)||!r.uiNode)return;const a=document.createRange();a.setStartAfter(r.uiNode),a.setEndAfter(r.uiNode),e.removeAllRanges(),e.addRange(a)}}be.register({"blots/block":Ws,"blots/block/embed":on,"blots/break":Fn,"blots/container":go,"blots/cursor":Cn,"blots/embed":Tx,"blots/inline":ur,"blots/scroll":cF,"blots/text":In,"modules/clipboard":LF,"modules/history":ZF,"modules/keyboard":Hm,"modules/uploader":mA,"modules/input":QF,"modules/uiNode":sH});class rH extends zn{add(e,s){let r=0;if(s==="+1"||s==="-1"){const a=this.value(e)||0;r=s==="+1"?a+1:a-1}else typeof s=="number"&&(r=s);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,s){return super.canAdd(e,s)||super.canAdd(e,parseInt(s,10))}value(e){return parseInt(super.value(e),10)||void 0}}const nH=new rH("indent","ql-indent",{scope:He.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class iH extends Ws{static blotName="blockquote";static tagName="blockquote"}class aH extends Ws{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class eh extends go{}eh.blotName="list-container";eh.tagName="OL";class th extends Ws{static create(e){const s=super.create();return s.setAttribute("data-list",e),s}static formats(e){return e.getAttribute("data-list")||void 0}static register(){be.register(eh)}constructor(e,s){super(e,s);const r=s.ownerDocument.createElement("span"),a=o=>{if(!e.isEnabled())return;const u=this.statics.formats(s,e);u==="checked"?(this.format("list","unchecked"),o.preventDefault()):u==="unchecked"&&(this.format("list","checked"),o.preventDefault())};r.addEventListener("mousedown",a),r.addEventListener("touchstart",a),this.attachUI(r)}format(e,s){e===this.statics.blotName&&s?this.domNode.setAttribute("data-list",s):super.format(e,s)}}th.blotName="list";th.tagName="LI";eh.allowedChildren=[th];th.requiredContainer=eh;class Ix extends ur{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class lH extends Ix{static blotName="italic";static tagName=["EM","I"]}class xm extends ur{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const s=super.create(e);return s.setAttribute("href",this.sanitize(e)),s.setAttribute("rel","noopener noreferrer"),s.setAttribute("target","_blank"),s}static formats(e){return e.getAttribute("href")}static sanitize(e){return pA(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,s){e!==this.statics.blotName||!s?super.format(e,s):this.domNode.setAttribute("href",this.constructor.sanitize(s))}}function pA(t,e){const s=document.createElement("a");s.href=t;const r=s.href.slice(0,s.href.indexOf(":"));return e.indexOf(r)>-1}class oH extends ur{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class cH extends Ix{static blotName="strike";static tagName=["S","STRIKE"]}class uH extends ur{static blotName="underline";static tagName="U"}class dH extends Tx{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const s=super.create(e);return typeof e=="string"&&(window.katex.render(e,s,{throwOnError:!1,errorColor:"#f00"}),s.setAttribute("data-value",e)),s}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const m2=["alt","height","width"];class hH extends Vr{static blotName="image";static tagName="IMG";static create(e){const s=super.create(e);return typeof e=="string"&&s.setAttribute("src",this.sanitize(e)),s}static formats(e){return m2.reduce((s,r)=>(e.hasAttribute(r)&&(s[r]=e.getAttribute(r)),s),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return pA(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,s){m2.indexOf(e)>-1?s?this.domNode.setAttribute(e,s):this.domNode.removeAttribute(e):super.format(e,s)}}const p2=["height","width"];class fH extends on{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const s=super.create(e);return s.setAttribute("frameborder","0"),s.setAttribute("allowfullscreen","true"),s.setAttribute("src",this.sanitize(e)),s}static formats(e){return p2.reduce((s,r)=>(e.hasAttribute(r)&&(s[r]=e.getAttribute(r)),s),{})}static sanitize(e){return xm.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,s){p2.indexOf(e)>-1?s?this.domNode.setAttribute(e,s):this.domNode.removeAttribute(e):super.format(e,s)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const fd=new zn("code-token","hljs",{scope:He.INLINE});class ia extends ur{static formats(e,s){for(;e!=null&&e!==s.domNode;){if(e.classList&&e.classList.contains(dr.className))return super.formats(e,s);e=e.parentNode}}constructor(e,s,r){super(e,s,r),fd.add(this.domNode,r)}format(e,s){e!==ia.blotName?super.format(e,s):s?fd.add(this.domNode,s):(fd.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),fd.value(this.domNode)||this.unwrap()}}ia.blotName="code-token";ia.className="ql-token";class ln extends dr{static create(e){const s=super.create(e);return typeof e=="string"&&s.setAttribute("data-language",e),s}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,s){e===this.statics.blotName&&s?this.domNode.setAttribute("data-language",s):super.format(e,s)}replaceWith(e,s){return this.formatAt(0,this.length(),ia.blotName,!1),super.replaceWith(e,s)}}class vd extends yo{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,s){e===ln.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,s)}))}formatAt(e,s,r,a){r===ln.blotName&&(this.forceNext=!0),super.formatAt(e,s,r,a)}highlight(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const a=`${Array.from(this.domNode.childNodes).filter(u=>u!==this.uiNode).map(u=>u.textContent).join(`
`)}
`,o=ln.formats(this.children.head.domNode);if(s||this.forceNext||this.cachedText!==a){if(a.trim().length>0||this.cachedText==null){const u=this.children.reduce((f,m)=>f.concat(eA(m,!1)),new Fe),h=e(a,o);u.diff(h).reduce((f,m)=>{let{retain:g,attributes:x}=m;return g?(x&&Object.keys(x).forEach(v=>{[ln.blotName,ia.blotName].includes(v)&&this.formatAt(f,g,v,x[v])}),f+g):f},0)}this.cachedText=a,this.forceNext=!1}}html(e,s){const[r]=this.children.find(e);return`<pre data-language="${r?ln.formats(r.domNode):"plain"}">
${Fm(this.code(e,s))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const s=ln.formats(this.children.head.domNode);s!==this.uiNode.value&&(this.uiNode.value=s)}}}vd.allowedChildren=[ln];ln.requiredContainer=vd;ln.allowedChildren=[ia,Cn,In,Fn];const mH=(t,e,s)=>{if(typeof t.versionString=="string"){const r=t.versionString.split(".")[0];if(parseInt(r,10)>=11)return t.highlight(s,{language:e}).value}return t.highlight(e,s).value};class gA extends bi{static register(){be.register(ia,!0),be.register(ln,!0),be.register(vd,!0)}constructor(e,s){if(super(e,s),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,a)=>{let{key:o}=a;return r[o]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(be.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof vd))return;const s=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:a,label:o}=r;const u=s.ownerDocument.createElement("option");u.textContent=o,u.setAttribute("value",a),s.appendChild(u)}),s.addEventListener("change",()=>{e.format(ln.blotName,s.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(s),e.children.head&&(s.value=ln.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(be.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(be.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(vd):[e]).forEach(o=>{o.highlight(this.highlightBlot,s)}),this.quill.update(be.sources.SILENT),r!=null&&this.quill.setSelection(r,be.sources.SILENT)}highlightBlot(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(s=this.languages[s]?s:"plain",s==="plain")return Fm(e).split(`
`).reduce((a,o,u)=>(u!==0&&a.insert(`
`,{[dr.blotName]:s}),a.insert(o)),new Fe);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(dr.className),r.innerHTML=mH(this.options.hljs,s,e),Px(this.quill.scroll,r,[(a,o)=>{const u=fd.value(a);return u?o.compose(new Fe().retain(o.length(),{[ia.blotName]:u})):o}],[(a,o)=>a.data.split(`
`).reduce((u,h,f)=>(f!==0&&u.insert(`
`,{[dr.blotName]:s}),u.insert(h)),o)],new WeakMap)}}gA.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class On extends Ws{static blotName="table";static tagName="TD";static create(e){const s=super.create();return e?s.setAttribute("data-row",e):s.setAttribute("data-row",$x()),s}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,s){e===On.blotName&&s?this.domNode.setAttribute("data-row",s):super.format(e,s)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class no extends go{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),s=this.children.tail.formats(),r=this.next.children.head.formats(),a=this.next.children.tail.formats();return e.table===s.table&&e.table===r.table&&e.table===a.table}return!1}optimize(e){super.optimize(e),this.children.forEach(s=>{if(s.next==null)return;const r=s.formats(),a=s.next.formats();if(r.table!==a.table){const o=this.splitAfter(s);o&&o.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class el extends go{static blotName="table-body";static tagName="TBODY"}class bm extends go{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(no),s=e.reduce((r,a)=>Math.max(a.children.length,r),0);e.forEach(r=>{new Array(s-r.children.length).fill(0).forEach(()=>{let a;r.children.head!=null&&(a=On.formats(r.children.head.domNode));const o=this.scroll.create(On.blotName,a);r.appendChild(o),o.optimize()})})}cells(e){return this.rows().map(s=>s.children.at(e))}deleteColumn(e){const[s]=this.descendant(el);s==null||s.children.head==null||s.children.forEach(r=>{const a=r.children.at(e);a?.remove()})}insertColumn(e){const[s]=this.descendant(el);s==null||s.children.head==null||s.children.forEach(r=>{const a=r.children.at(e),o=On.formats(r.children.head.domNode),u=this.scroll.create(On.blotName,o);r.insertBefore(u,a)})}insertRow(e){const[s]=this.descendant(el);if(s==null||s.children.head==null)return;const r=$x(),a=this.scroll.create(no.blotName);s.children.head.children.forEach(()=>{const u=this.scroll.create(On.blotName,r);a.appendChild(u)});const o=s.children.at(e);s.insertBefore(a,o)}rows(){const e=this.children.head;return e==null?[]:e.children.map(s=>s)}}bm.allowedChildren=[el];el.requiredContainer=bm;el.allowedChildren=[no];no.requiredContainer=el;no.allowedChildren=[On];On.requiredContainer=no;function $x(){return`row-${Math.random().toString(36).slice(2,6)}`}class pH extends bi{static register(){be.register(On),be.register(no),be.register(el),be.register(bm)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(bm).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,s]=this.getTable();s!=null&&(e.deleteColumn(s.cellOffset()),this.quill.update(be.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(be.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const s=e.offset();e.remove(),this.quill.update(be.sources.USER),this.quill.setSelection(s,be.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[s,r]=this.quill.getLine(e.index);if(s==null||s.statics.blotName!==On.blotName)return[null,null,null,-1];const a=s.parent;return[a.parent.parent,a,s,r]}insertColumn(e){const s=this.quill.getSelection();if(!s)return;const[r,a,o]=this.getTable(s);if(o==null)return;const u=o.cellOffset();r.insertColumn(u+e),this.quill.update(be.sources.USER);let h=a.rowOffset();e===0&&(h+=1),this.quill.setSelection(s.index+h,s.length,be.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const s=this.quill.getSelection();if(!s)return;const[r,a,o]=this.getTable(s);if(o==null)return;const u=a.rowOffset();r.insertRow(u+e),this.quill.update(be.sources.USER),e>0?this.quill.setSelection(s,be.sources.SILENT):this.quill.setSelection(s.index+a.children.length,s.length,be.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,s){const r=this.quill.getSelection();if(r==null)return;const a=new Array(e).fill(0).reduce(o=>{const u=new Array(s).fill(`
`).join("");return o.insert(u,{table:$x()})},new Fe().retain(r.index));this.quill.updateContents(a,be.sources.USER),this.quill.setSelection(r.index,be.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(be.events.SCROLL_OPTIMIZE,e=>{e.some(s=>["TD","TR","TBODY","TABLE"].includes(s.target.tagName)?(this.quill.once(be.events.TEXT_CHANGE,(r,a,o)=>{o===be.sources.USER&&this.balanceTables()}),!0):!1)})}}const g2=la("quill:toolbar");class Ux extends bi{constructor(e,s){if(super(e,s),Array.isArray(this.options.container)){const r=document.createElement("div");r.setAttribute("role","toolbar"),gH(r,this.options.container),e.container?.parentNode?.insertBefore(r,e.container),this.container=r}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){g2.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(r=>{const a=this.options.handlers?.[r];a&&this.addHandler(r,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)}),this.quill.on(be.events.EDITOR_CHANGE,()=>{const[r]=this.quill.selection.getRange();this.update(r)})}addHandler(e,s){this.handlers[e]=s}attach(e){let s=Array.from(e.classList).find(a=>a.indexOf("ql-")===0);if(!s)return;if(s=s.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[s]==null&&this.quill.scroll.query(s)==null){g2.warn("ignoring attaching to nonexistent format",s,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,a=>{let o;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const h=e.options[e.selectedIndex];h.hasAttribute("selected")?o=!1:o=h.value||!1}else e.classList.contains("ql-active")?o=!1:o=e.value||!e.hasAttribute("value"),a.preventDefault();this.quill.focus();const[u]=this.quill.selection.getRange();if(this.handlers[s]!=null)this.handlers[s].call(this,o);else if(this.quill.scroll.query(s).prototype instanceof Vr){if(o=prompt(`Enter ${s}`),!o)return;this.quill.updateContents(new Fe().retain(u.index).delete(u.length).insert({[s]:o}),be.sources.USER)}else this.quill.format(s,o,be.sources.USER);this.update(u)}),this.controls.push([s,e])}update(e){const s=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[a,o]=r;if(o.tagName==="SELECT"){let u=null;if(e==null)u=null;else if(s[a]==null)u=o.querySelector("option[selected]");else if(!Array.isArray(s[a])){let h=s[a];typeof h=="string"&&(h=h.replace(/"/g,'\\"')),u=o.querySelector(`option[value="${h}"]`)}u==null?(o.value="",o.selectedIndex=-1):u.selected=!0}else if(e==null)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){const u=s[a],h=u===o.getAttribute("value")||u!=null&&u.toString()===o.getAttribute("value")||u==null&&!o.getAttribute("value");o.classList.toggle("ql-active",h),o.setAttribute("aria-pressed",h.toString())}else{const u=s[a]!=null;o.classList.toggle("ql-active",u),o.setAttribute("aria-pressed",u.toString())}})}}Ux.DEFAULTS={};function y2(t,e,s){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),s!=null?(r.value=s,r.setAttribute("aria-label",`${e}: ${s}`)):r.setAttribute("aria-label",e),t.appendChild(r)}function gH(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(s=>{const r=document.createElement("span");r.classList.add("ql-formats"),s.forEach(a=>{if(typeof a=="string")y2(r,a);else{const o=Object.keys(a)[0],u=a[o];Array.isArray(u)?yH(r,o,u):y2(r,o,u)}}),t.appendChild(r)})}function yH(t,e,s){const r=document.createElement("select");r.classList.add(`ql-${e}`),s.forEach(a=>{const o=document.createElement("option");a!==!1?o.setAttribute("value",String(a)):o.setAttribute("selected","selected"),r.appendChild(o)}),t.appendChild(r)}Ux.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(s=>{this.quill.scroll.query(s,He.INLINE)!=null&&this.quill.format(s,!1,be.sources.USER)})}else this.quill.removeFormat(t.index,t.length,be.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",be.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,be.sources.USER),this.quill.format("direction",t,be.sources.USER)},indent(t){const e=this.quill.getSelection(),s=this.quill.getFormat(e),r=parseInt(s.indent||0,10);if(t==="+1"||t==="-1"){let a=t==="+1"?1:-1;s.direction==="rtl"&&(a*=-1),this.quill.format("indent",r+a,be.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,be.sources.USER)},list(t){const e=this.quill.getSelection(),s=this.quill.getFormat(e);t==="check"?s.list==="checked"||s.list==="unchecked"?this.quill.format("list",!1,be.sources.USER):this.quill.format("list","unchecked",be.sources.USER):this.quill.format("list",t,be.sources.USER)}}};const xH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',bH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',vH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',wH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',_H='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',jH='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',NH='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',SH='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',x2='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',EH='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',AH='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',CH='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',kH='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',TH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',OH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',RH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',MH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',DH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',LH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',qH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',PH='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',IH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',$H='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',UH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',BH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',zH='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',FH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',HH='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',VH='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',GH='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',ZH='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',YH='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',KH='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Dd={align:{"":xH,center:bH,right:vH,justify:wH},background:_H,blockquote:jH,bold:NH,clean:SH,code:x2,"code-block":x2,color:EH,direction:{"":AH,rtl:CH},formula:kH,header:{1:TH,2:OH,3:RH,4:MH,5:DH,6:LH},italic:qH,image:PH,indent:{"+1":IH,"-1":$H},link:UH,list:{bullet:BH,check:zH,ordered:FH},script:{sub:HH,super:VH},strike:GH,table:ZH,underline:YH,video:KH},WH='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let b2=0;function v2(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class Vm{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),s.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),v2(this.label,"aria-expanded"),v2(this.options,"aria-hidden")}buildItem(e){const s=document.createElement("span");s.tabIndex="0",s.setAttribute("role","button"),s.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&s.setAttribute("data-value",r),e.textContent&&s.setAttribute("data-label",e.textContent),s.addEventListener("click",()=>{this.selectItem(s,!0)}),s.addEventListener("keydown",a=>{switch(a.key){case"Enter":this.selectItem(s,!0),a.preventDefault();break;case"Escape":this.escape(),a.preventDefault();break}}),s}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=WH,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${b2}`,b2+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(s=>{const r=this.buildItem(s);e.appendChild(r),s.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),s&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const s=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",s)}}class yA extends Vm{constructor(e,s){super(e),this.label.innerHTML=s,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const s=super.buildItem(e);return s.style.backgroundColor=e.getAttribute("value")||"",s}selectItem(e,s){super.selectItem(e,s);const r=this.label.querySelector(".ql-color-label"),a=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=a:r.style.fill=a)}}class xA extends Vm{constructor(e,s){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=s[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,s){super.selectItem(e,s);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const QH=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class bA{constructor(e,s){this.quill=e,this.boundsContainer=s||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,QH(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const s=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${s}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const a=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect();let u=0;if(o.right>a.right&&(u=a.right-o.right,this.root.style.left=`${s+u}px`),o.left<a.left&&(u=a.left-o.left,this.root.style.left=`${s+u}px`),o.bottom>a.bottom){const h=o.bottom-o.top,f=e.bottom-e.top+h;this.root.style.top=`${r-f}px`,this.root.classList.add("ql-flip")}return u}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const XH=[!1,"center","right","justify"],JH=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],eV=[!1,"serif","monospace"],tV=["1","2","3",!1],sV=["small",!1,"large","huge"];class sh extends Jc{constructor(e,s){super(e,s);const r=a=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(a.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(o=>{o.container.contains(a.target)||o.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const s=super.addModule(e);return e==="toolbar"&&this.extendToolbar(s),s}buildButtons(e,s){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(o=>{if(o.startsWith("ql-")&&(o=o.slice(3),s[o]!=null))if(o==="direction")r.innerHTML=s[o][""]+s[o].rtl;else if(typeof s[o]=="string")r.innerHTML=s[o];else{const u=r.value||"";u!=null&&s[o][u]&&(r.innerHTML=s[o][u])}})})}buildPickers(e,s){this.pickers=Array.from(e).map(a=>{if(a.classList.contains("ql-align")&&(a.querySelector("option")==null&&od(a,XH),typeof s.align=="object"))return new xA(a,s.align);if(a.classList.contains("ql-background")||a.classList.contains("ql-color")){const o=a.classList.contains("ql-background")?"background":"color";return a.querySelector("option")==null&&od(a,JH,o==="background"?"#ffffff":"#000000"),new yA(a,s[o])}return a.querySelector("option")==null&&(a.classList.contains("ql-font")?od(a,eV):a.classList.contains("ql-header")?od(a,tV):a.classList.contains("ql-size")&&od(a,sV)),new Vm(a)});const r=()=>{this.pickers.forEach(a=>{a.update()})};this.quill.on(ze.events.EDITOR_CHANGE,r)}}sh.DEFAULTS=Ja({},Jc.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class vA extends bA{constructor(e,s){super(e,s),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;s!=null?this.textbox.value=s:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:s}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,ze.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,ze.sources.USER)),this.quill.root.scrollTop=s;break}case"video":e=rV(e);case"formula":{if(!e)break;const s=this.quill.getSelection(!0);if(s!=null){const r=s.index+s.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,ze.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",ze.sources.USER),this.quill.setSelection(r+2,ze.sources.USER)}break}}this.textbox.value="",this.hide()}}function rV(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function od(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const a=document.createElement("option");r===s?a.setAttribute("selected","selected"):a.setAttribute("value",String(r)),t.appendChild(a)})}const nV=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class iV extends vA{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,s){super(e,s),this.quill.on(ze.events.EDITOR_CHANGE,(r,a,o,u)=>{if(r===ze.events.SELECTION_CHANGE)if(a!=null&&a.length>0&&u===ze.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const h=this.quill.getLines(a.index,a.length);if(h.length===1){const f=this.quill.getBounds(a);f!=null&&this.position(f)}else{const f=h[h.length-1],m=this.quill.getIndex(f),g=Math.min(f.length()-1,a.index+a.length-m),x=this.quill.getBounds(new ro(m,g));x!=null&&this.position(x)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(ze.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const s=this.quill.getBounds(e);s!=null&&this.position(s)}},1)})}cancel(){this.show()}position(e){const s=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",s!==0&&(r.style.marginLeft=`${-1*s-r.offsetWidth/2}px`),s}}class wA extends sh{constructor(e,s){s.modules.toolbar!=null&&s.modules.toolbar.container==null&&(s.modules.toolbar.container=nV),super(e,s),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new iV(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),Dd),this.buildPickers(e.container.querySelectorAll("select"),Dd))}}wA.DEFAULTS=Ja({},sh.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,be.sources.USER)}}}}});const aV=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class lV extends vA{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const s=this.linkRange;this.restoreFocus(),this.quill.formatText(s,"link",!1,ze.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(ze.events.SELECTION_CHANGE,(e,s,r)=>{if(e!=null){if(e.length===0&&r===ze.sources.USER){const[a,o]=this.quill.scroll.descendant(xm,e.index);if(a!=null){this.linkRange=new ro(e.index-o,a.length());const u=xm.formats(a.domNode);this.preview.textContent=u,this.preview.setAttribute("href",u),this.show();const h=this.quill.getBounds(this.linkRange);h!=null&&this.position(h);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class _A extends sh{constructor(e,s){s.modules.toolbar!=null&&s.modules.toolbar.container==null&&(s.modules.toolbar.container=aV),super(e,s),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),Dd),this.buildPickers(e.container.querySelectorAll("select"),Dd),this.tooltip=new lV(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(s,r)=>{e.handlers.link.call(e,!r.format.link)}))}}_A.DEFAULTS=Ja({},sh.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let s=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(s)&&s.indexOf("mailto:")!==0&&(s=`mailto:${s}`);const{tooltip:r}=this.quill.theme;r.edit("link",s)}else this.quill.format("link",!1,be.sources.USER)}}}}});be.register({"attributors/attribute/direction":iA,"attributors/class/align":sA,"attributors/class/background":hF,"attributors/class/color":dF,"attributors/class/direction":aA,"attributors/class/font":cA,"attributors/class/size":dA,"attributors/style/align":rA,"attributors/style/background":Mx,"attributors/style/color":Rx,"attributors/style/direction":lA,"attributors/style/font":uA,"attributors/style/size":hA},!0);be.register({"formats/align":sA,"formats/direction":aA,"formats/indent":nH,"formats/background":Mx,"formats/color":Rx,"formats/font":cA,"formats/size":dA,"formats/blockquote":iH,"formats/code-block":dr,"formats/header":aH,"formats/list":th,"formats/bold":Ix,"formats/code":Dx,"formats/italic":lH,"formats/link":xm,"formats/script":oH,"formats/strike":cH,"formats/underline":uH,"formats/formula":dH,"formats/image":hH,"formats/video":fH,"modules/syntax":gA,"modules/table":pH,"modules/toolbar":Ux,"themes/bubble":wA,"themes/snow":_A,"ui/icons":Dd,"ui/picker":Vm,"ui/icon-picker":xA,"ui/color-picker":yA,"ui/tooltip":bA},!0);const oV=be.import("formats/list");class rh extends oV{static create(e){const s=super.create(e);if(e==="bullet"&&s.tagName==="OL"){const r=document.createElement("UL");return r.innerHTML=s.innerHTML,r}return s}}rh.blotName="list";rh.tagName=["OL","UL"];rh.defaultChild="list-item";rh.allowedChildren=["list-item"];be.register(rh,!0);function cV({content:t,onChange:e,placeholder:s="Start typing...",height:r="200px",enableDebugLogs:a=!1}){const o=M.useRef(null),u=M.useRef(null),[h,f]=M.useState(!1),m=M.useRef(null),g=M.useRef(!1),x=M.useCallback((_,b)=>{a&&console.log(`[QuillBulletFix] ${_}`,b||"")},[a]),v=M.useCallback(async _=>{try{if(f(!0),x("Starting image upload",{fileName:_.name}),!_.type.startsWith("image/"))throw new Error("Please select an image file");if(_.size>5*1024*1024)throw new Error("Image size must be less than 5MB");const b=_.name.split(".").pop(),w=`editor-images/${`${Date.now()}_${Math.random().toString(36).substr(2,9)}.${b}`}`,{data:E,error:A}=await V.storage.from("media").upload(w,_,{contentType:_.type,cacheControl:"3600"});if(A)throw A;const{data:{publicUrl:O}}=V.storage.from("media").getPublicUrl(w);if(u.current){const F=u.current.getSelection()||{index:0};u.current.insertEmbed(F.index,"image",O),u.current.setSelection(F.index+1)}ae("success","Image uploaded successfully")}catch(b){x("Image upload failed",b),ae("error",b.message||"Failed to upload image")}finally{f(!1),m.current&&(m.current.value="")}},[x]);return M.useEffect(()=>{if(!o.current||u.current)return;x("Initializing Quill editor with bullet fix");const _=new be(o.current,{theme:"snow",placeholder:s,modules:{toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"bullet"},{list:"ordered"}],["link","image"],[{color:[]},{background:[]}],["clean"]],handlers:{image:()=>m.current?.click(),list:function(b){_.getSelection()&&(b==="bullet"?(_.format("list","bullet"),setTimeout(()=>{_.root.querySelectorAll("ol").forEach(E=>{if(E.querySelectorAll('li[data-list="bullet"]').length>0){const O=document.createElement("ul");for(;E.firstChild;)O.appendChild(E.firstChild);E.parentNode?.replaceChild(O,E)}})},0)):_.format("list",b))}}}}});return t&&t!=="<p><br></p>"&&(_.root.innerHTML=t),_.on("text-change",()=>{if(g.current){g.current=!1;return}const b=_.root.innerHTML;x("Text changed",{preview:b.substring(0,100)}),e(b==="<p><br></p>"?"":b)}),_.root.addEventListener("paste",async b=>{const N=b.clipboardData?.items;if(N){for(const w of N)if(w.type.startsWith("image/")){b.preventDefault();const E=w.getAsFile();E&&await v(E)}}}),u.current=_,()=>{_.off("text-change")}},[]),M.useEffect(()=>{if(!u.current||g.current){g.current=!1;return}const _=u.current.root.innerHTML;_===t||(!_||_==="<p><br></p>")&&(!t||t==="<p><br></p>"||t==="")||(x("Updating content from prop",{old:_?.substring(0,50),new:t?.substring(0,50)}),g.current=!0,setTimeout(()=>{u.current&&(u.current.root.innerHTML=t||"",g.current=!1)},0))},[t,x]),n.jsxs("div",{className:"quill-bullet-fix-wrapper relative",children:[n.jsx("input",{ref:m,type:"file",accept:"image/*",className:"hidden",onChange:_=>{const b=_.target.files?.[0];b&&v(b)}}),h&&n.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center z-50 rounded-md",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5 animate-spin"}),n.jsx("span",{children:"Uploading image..."})]})}),n.jsx("div",{ref:o,style:{height:r},className:"bg-white"}),n.jsx("style",{children:`
        /* FIX DOUBLE BULLETS - Hide the .ql-ui::before bullet since we have ::marker working */
        .quill-bullet-fix-wrapper .ql-editor ul {
          list-style-type: disc !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor ul li {
          list-style-type: disc !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor li[data-list="bullet"] {
          list-style-type: disc !important;
        }
        
        /* HIDE THE QUILL UI for bullets - We're using native ::marker now */
        .quill-bullet-fix-wrapper .ql-editor li[data-list="bullet"] > .ql-ui {
          display: none !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor li[data-list="bullet"] > .ql-ui::before {
          content: none !important;
          display: none !important;
        }
        
        /* FIX ORDERED LISTS - Use native numbering */
        .quill-bullet-fix-wrapper .ql-editor ol {
          list-style-type: decimal !important;
          counter-reset: none !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor ol li {
          list-style-type: decimal !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor li[data-list="ordered"] {
          list-style-type: decimal !important;
        }
        
        /* HIDE THE QUILL UI for ordered lists too */
        .quill-bullet-fix-wrapper .ql-editor li[data-list="ordered"] > .ql-ui {
          display: none !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor li[data-list="ordered"] > .ql-ui::before {
          content: none !important;
          display: none !important;
        }
        
        .quill-bullet-fix-wrapper .ql-toolbar {
          border: 1px solid #e5e7eb;
          border-bottom: none;
          border-radius: 0.375rem 0.375rem 0 0;
          background: #f9fafb;
        }
        
        .quill-bullet-fix-wrapper .ql-container {
          border: 1px solid #e5e7eb;
          border-radius: 0 0 0.375rem 0.375rem;
          font-family: inherit;
          overflow: hidden;
        }
        
        .quill-bullet-fix-wrapper .ql-editor {
          min-height: ${r};
          max-height: 400px;
          overflow-y: auto;
          overflow-x: hidden;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
          white-space: pre-wrap;
        }
        
        .quill-bullet-fix-wrapper .ql-editor * {
          max-width: 100%;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
        }
        
        .quill-bullet-fix-wrapper .ql-editor img {
          max-width: 100%;
          height: auto;
          border-radius: 0.375rem;
          margin: 0.5rem 0;
        }
        
        .quill-bullet-fix-wrapper .ql-editor.ql-blank::before {
          color: #9ca3af;
          font-style: normal;
        }
      `})]})}class w2{static async createMediaFileRecord(e,s,r,a){const{data:{publicUrl:o}}=V.storage.from("media").getPublicUrl(e),u=(s instanceof File,s.size),h=s instanceof File?s.type:"image/jpeg",f=o+"?width=150&height=150&resize=cover",m=o+"?width=800&height=600&resize=fit",g=o+"?width=1920&height=1080&resize=fit";try{const{data:x,error:v}=await V.from("media_files").insert({filename:e,original_filename:s instanceof File?s.name:"uploaded-image.jpg",file_type:h,file_size:u,mime_type:h,url:o,thumbnail_url:f,medium_url:m,large_url:g,title:r.title,alt_text:r.alt_text,description:r.description,category:r.category||"general",tags:r.tags||[],folder_id:r.folder_id,status:"active",is_public:!1}).select().single();return v?(console.warn("Could not save media metadata to database:",v),{id:e,filename:e,original_filename:s instanceof File?s.name:"uploaded-image.jpg",file_type:h,file_size:u,mime_type:h,url:o,thumbnail_url:f,medium_url:m,large_url:g,title:r.title,alt_text:r.alt_text,description:r.description,category:r.category||"general",tags:r.tags||[],status:"active",is_public:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}):x}catch(x){return console.warn("Database not configured, returning file info without metadata:",x),{id:e,filename:e,original_filename:s instanceof File?s.name:"uploaded-image.jpg",file_type:h,file_size:u,mime_type:h,url:o,thumbnail_url:f,medium_url:m,large_url:g,title:r.title,alt_text:r.alt_text,description:r.description,category:r.category||"general",tags:r.tags||[],status:"active",is_public:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}}static async uploadImage(e,s={}){try{const r=Date.now(),a=Math.random().toString(36).substring(7),o=e instanceof File?e.name.split(".").pop():"jpg",u=`${r}-${a}.${o}`;console.log("Attempting to upload file:",u);const{data:h,error:f}=await V.storage.from("media").upload(u,e,{cacheControl:"3600",upsert:!1});if(f){if(console.error("Upload error details:",{error:f,message:f.message,statusCode:f.statusCode}),f.message?.includes("Bucket not found")){console.log("Bucket not found, attempting to create...");const{data:m,error:g}=await V.storage.createBucket("media",{public:!0,allowedMimeTypes:["image/*"],fileSizeLimit:10485760});if(g){console.error("Could not create bucket:",g),console.log("Retrying upload after bucket creation attempt...");const{data:x,error:v}=await V.storage.from("media").upload(u,e,{cacheControl:"3600",upsert:!1});if(v)throw console.error("Retry failed:",v),new Error(`Storage error: ${v.message}. Please check Supabase Storage configuration.`);return this.createMediaFileRecord(u,e,s,x)}else{console.log("Bucket created successfully, retrying upload...");const{data:x,error:v}=await V.storage.from("media").upload(u,e,{cacheControl:"3600",upsert:!1});if(v)throw new Error(`Upload failed after creating bucket: ${v.message}`);return this.createMediaFileRecord(u,e,s,x)}}throw f}return this.createMediaFileRecord(u,e,s,h)}catch(r){throw console.error("Error uploading image:",r),r}}static async getMediaFiles(e){let s=V.from("media_files").select("*").eq("status","active").order("created_at",{ascending:!1});e?.category&&(s=s.eq("category",e.category)),e?.folder_id&&(s=s.eq("folder_id",e.folder_id)),e?.tags&&e.tags.length>0&&(s=s.contains("tags",e.tags)),e?.search&&(s=s.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%,alt_text.ilike.%${e.search}%`)),e?.limit&&(s=s.limit(e.limit)),e?.offset&&(s=s.range(e.offset,e.offset+(e?.limit||20)-1));const{data:r,error:a}=await s;if(a)throw console.error("Error fetching media files:",a),a;return r||[]}static async getMediaFile(e){const{data:s,error:r}=await V.from("media_files").select("*").eq("id",e).single();if(r)throw console.error("Error fetching media file:",r),r;return s}static async updateMediaFile(e,s){const{data:r,error:a}=await V.from("media_files").update(s).eq("id",e).select().single();if(a)throw console.error("Error updating media file:",a),a;return r}static async deleteMediaFile(e){const s=await this.getMediaFile(e);if(!s)throw new Error("Media file not found");const{error:r}=await V.from("media_files").update({status:"deleted"}).eq("id",e);if(r)throw console.error("Error deleting media file:",r),r;const{error:a}=await V.storage.from("media").remove([s.filename]);a&&console.error("Error deleting file from storage:",a)}static async getFolders(){const{data:e,error:s}=await V.from("media_folders").select("*").order("path");if(s)throw console.error("Error fetching folders:",s),s;return e||[]}static async createFolder(e,s){let r="/";if(s){const u=await V.from("media_folders").select("path").eq("id",s).single();u.data&&(r=u.data.path+e+"/")}else r="/"+e+"/";const{data:a,error:o}=await V.from("media_folders").insert({name:e,parent_id:s,path:r}).select().single();if(o)throw console.error("Error creating folder:",o),o;return a}static async trackUsage(e,s,r,a){const{error:o}=await V.from("media_usage").upsert({media_file_id:e,entity_type:s,entity_id:r,field_name:a});if(o)throw console.error("Error tracking media usage:",o),o}static async getMediaUsage(e){const{data:s,error:r}=await V.from("media_usage").select("*").eq("media_file_id",e);if(r)throw console.error("Error fetching media usage:",r),r;return s||[]}static async getMediaStatistics(){const{data:e,error:s}=await V.rpc("get_media_statistics");if(s)throw console.error("Error fetching media statistics:",s),s;return e}}function uV({onSelectImage:t,onClose:e,category:s="events",currentImageUrl:r}){const[a,o]=M.useState([]),[u,h]=M.useState(!0),[f,m]=M.useState(""),[g,x]=M.useState(r||null),[v,_]=M.useState("grid"),[b,N]=M.useState("gallery"),[w,E]=M.useState(""),[A,O]=M.useState(!1),[F,C]=M.useState(!1),L=[{id:"default-1",name:"Conference",url:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800"},{id:"default-2",name:"Meeting",url:"https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=800"},{id:"default-3",name:"Workshop",url:"https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=800"},{id:"default-4",name:"Presentation",url:"https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=800"},{id:"default-5",name:"Networking",url:"https://images.unsplash.com/photo-1559223607-a43c990c692c?w=800"},{id:"default-6",name:"Team Event",url:"https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=800"},{id:"default-7",name:"Training",url:"https://images.unsplash.com/photo-1591115765373-5207764f72e7?w=800"},{id:"default-8",name:"Business",url:"https://images.unsplash.com/photo-1542744173-8e7e53415bb0?w=800"},{id:"default-9",name:"Seminar",url:"https://images.unsplash.com/photo-1560439514-4e9645039924?w=800"},{id:"default-10",name:"Virtual Event",url:"https://images.unsplash.com/photo-1588196749597-9ff075ee6b5b?w=800"},{id:"default-11",name:"Panel",url:"https://images.unsplash.com/photo-1582192730841-2a682d7375f9?w=800"},{id:"default-12",name:"Awards",url:"https://images.unsplash.com/photo-1569163139394-de4798aa62b6?w=800"}];M.useEffect(()=>{B()},[s]);const B=async()=>{try{h(!0);const H=await w2.getMediaFiles({category:s,search:f});o(H||[])}catch(H){console.error("Error loading images:",H),o([])}finally{h(!1)}},S=async H=>{try{if(O(!0),!H.type.startsWith("image/"))throw new Error("Please select an image file");if(H.size>10*1024*1024)throw new Error("Image size must be less than 10MB");const J=await w2.uploadImage(H,{title:H.name.split(".")[0],category:s,alt_text:H.name});J&&(ae("success","Image uploaded successfully"),o([J,...a]),x(J.url),N("gallery"))}catch(J){if(console.error("Error uploading image:",J),J.message?.includes("relation")||J.message?.includes("media_files")){ae("warning","Database not configured. Using direct upload.");const q=new FileReader;q.onloadend=()=>{const Z=q.result;t(Z),e()},q.readAsDataURL(H)}else ae("error",J.message||"Failed to upload image")}finally{O(!1)}},k=M.useCallback(H=>{H.preventDefault(),H.stopPropagation(),C(!1),H.dataTransfer.files&&H.dataTransfer.files[0]&&S(H.dataTransfer.files[0])},[]),z=M.useCallback(H=>{H.preventDefault(),H.stopPropagation(),H.type==="dragenter"||H.type==="dragover"?C(!0):H.type==="dragleave"&&C(!1)},[]),R=()=>{if(w)try{new URL(w),t(w),e()}catch{ae("error","Please enter a valid URL")}},D=()=>{g&&(t(g),e())},P=a.filter(H=>!f||H.title?.toLowerCase().includes(f.toLowerCase())||H.original_filename?.toLowerCase().includes(f.toLowerCase()));return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Select Image"}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(fn,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"flex border-b",children:[n.jsx("button",{onClick:()=>N("gallery"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${b==="gallery"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:"Gallery"}),n.jsx("button",{onClick:()=>N("upload"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${b==="upload"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:"Upload New"}),n.jsx("button",{onClick:()=>N("url"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${b==="url"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:"From URL"})]}),n.jsx("div",{className:"flex-1 overflow-hidden",children:b==="gallery"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[n.jsx("div",{className:"flex items-center gap-4 flex-1",children:n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(tl,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(Ae,{placeholder:"Search images...",value:f,onChange:H=>m(H.target.value),className:"pl-10"})]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>_("grid"),className:`p-2 rounded ${v==="grid"?"bg-gray-200":"hover:bg-gray-100"}`,title:"Grid View",children:n.jsx(yP,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>_("list"),className:`p-2 rounded ${v==="list"?"bg-gray-200":"hover:bg-gray-100"}`,title:"List View",children:n.jsx(AP,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(hn,{className:"h-8 w-8 animate-spin text-primary-600"})}):v==="grid"?n.jsxs(n.Fragment,{children:[P.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Your Images"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:P.map(H=>n.jsxs("div",{onClick:()=>x(H.url),className:`relative cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${g===H.url?"border-primary-500 shadow-lg":"border-gray-200 hover:border-gray-400"}`,children:[n.jsx("img",{src:H.thumbnail_url||H.url,alt:H.title||"Image",className:"w-full h-32 object-cover"}),H.title&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2",children:n.jsx("p",{className:"text-white text-xs truncate",children:H.title})}),g===H.url&&n.jsx("div",{className:"absolute top-2 right-2 bg-primary-500 rounded-full p-1",children:n.jsx(Zl,{className:"h-4 w-4 text-white"})})]},H.id))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Stock Images"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:L.map(H=>n.jsxs("div",{onClick:()=>x(H.url),className:`relative cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${g===H.url?"border-primary-500 shadow-lg":"border-gray-200 hover:border-gray-400"}`,children:[n.jsx("img",{src:H.url,alt:H.name,className:"w-full h-32 object-cover"}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2",children:n.jsx("p",{className:"text-white text-xs truncate",children:H.name})}),g===H.url&&n.jsx("div",{className:"absolute top-2 right-2 bg-primary-500 rounded-full p-1",children:n.jsx(Zl,{className:"h-4 w-4 text-white"})})]},H.id))})]})]}):n.jsxs("div",{className:"space-y-2",children:[P.map(H=>n.jsxs("div",{onClick:()=>x(H.url),className:`flex items-center gap-4 p-3 rounded-lg cursor-pointer transition-colors ${g===H.url?"bg-primary-50 border border-primary-500":"hover:bg-gray-50 border border-gray-200"}`,children:[n.jsx("img",{src:H.thumbnail_url||H.url,alt:H.title||"Image",className:"w-16 h-16 object-cover rounded"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium",children:H.title||"Untitled"}),n.jsx("p",{className:"text-sm text-gray-500",children:H.category})]}),g===H.url&&n.jsx(Zl,{className:"h-5 w-5 text-primary-600"})]},H.id)),n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mt-4 mb-2",children:"Stock Images"}),L.map(H=>n.jsxs("div",{onClick:()=>x(H.url),className:`flex items-center gap-4 p-3 rounded-lg cursor-pointer transition-colors ${g===H.url?"bg-primary-50 border border-primary-500":"hover:bg-gray-50 border border-gray-200"}`,children:[n.jsx("img",{src:H.url,alt:H.name,className:"w-16 h-16 object-cover rounded"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium",children:H.name}),n.jsx("p",{className:"text-sm text-gray-500",children:"Stock Photo"})]}),g===H.url&&n.jsx(Zl,{className:"h-5 w-5 text-primary-600"})]},H.id))]})})]}):b==="upload"?n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:n.jsxs("div",{className:`w-full max-w-md p-8 border-2 border-dashed rounded-lg transition-colors ${F?"border-primary-500 bg-primary-50":"border-gray-300"}`,onDrop:k,onDragEnter:z,onDragLeave:z,onDragOver:z,children:[n.jsx("input",{type:"file",id:"file-upload",accept:"image/*",className:"hidden",onChange:H=>{const J=H.target.files?.[0];J&&S(J)},disabled:A}),n.jsx("label",{htmlFor:"file-upload",className:"flex flex-col items-center cursor-pointer",children:A?n.jsxs(n.Fragment,{children:[n.jsx(hn,{className:"h-12 w-12 text-primary-600 animate-spin mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Uploading..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(sl,{className:"h-12 w-12 text-gray-400 mb-4"}),n.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"Click to upload or drag and drop"}),n.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]})}):b==="url"?n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL"}),n.jsx(Ae,{type:"url",placeholder:"https://example.com/image.jpg",value:w,onChange:H=>E(H.target.value),onKeyPress:H=>{H.key==="Enter"&&R()}}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Enter a direct link to an image file"}),w&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview:"}),n.jsx("img",{src:w,alt:"Preview",className:"w-full h-48 object-cover rounded-lg border",onError:H=>{const J=H.target;J.style.display="none"},onLoad:H=>{const J=H.target;J.style.display="block"}})]})]})}):null}),n.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t bg-gray-50",children:[n.jsx(re,{variant:"outline",onClick:e,children:"Cancel"}),b==="gallery"&&n.jsx(re,{onClick:D,disabled:!g,children:"Select Image"}),b==="url"&&n.jsx(re,{onClick:R,disabled:!w,children:"Use This URL"})]})]})})}const{CPD_CATEGORIES:dV}=ol;function hV({event:t,categories:e,onClose:s,onSuccess:r}){const[a,o]=M.useState(!1),[u,h]=M.useState("basic"),[f,m]=M.useState(!1),[g,x]=M.useState({title:"",description:"",short_description:"",category_id:"",start_date:"",end_date:"",timezone:"Australia/Sydney",location_type:"physical",venue_name:"",address_line1:"",city:"",state:"",postal_code:"",country:"Australia",virtual_link:"",capacity:50,member_price:0,non_member_price:0,early_bird_price:void 0,early_bird_end_date:void 0,cpd_points:1,cpd_category:"",visibility:"public",featured:!1,allow_guests:!1,max_guests_per_registration:0,requires_approval:!1,image_url:""});M.useEffect(()=>{t&&(console.log(" [EventFormModal] Loading event data:",{id:t.id,title:t.title,description_length:t.description?.length,description_preview:t.description?.substring(0,100)}),x({title:t.title,description:t.description||"",short_description:t.short_description||"",category_id:t.category_id||"",start_date:t.start_date.slice(0,16),end_date:t.end_date.slice(0,16),timezone:t.timezone,location_type:t.location_type,venue_name:t.venue_name||"",address_line1:t.address_line1||"",city:t.city||"",state:t.state||"",postal_code:t.postal_code||"",country:t.country,virtual_link:t.virtual_link||"",capacity:t.capacity,member_price:t.member_price_cents/100,non_member_price:t.non_member_price_cents/100,early_bird_price:t.early_bird_price_cents?t.early_bird_price_cents/100:void 0,early_bird_end_date:t.early_bird_end_date?.slice(0,16),cpd_points:t.cpd_points,cpd_category:t.cpd_category||"",visibility:t.visibility,featured:t.featured,allow_guests:t.allow_guests,max_guests_per_registration:t.max_guests_per_registration,requires_approval:t.requires_approval,image_url:t.image_url||""}))},[t]);const v=async b=>{if(b.preventDefault(),console.log(" [EventFormModal] Submitting form with data:",{title:g.title,description_length:g.description?.length,description_preview:g.description?.substring(0,100),full_formData:g}),!g.title||!g.start_date||!g.end_date){ae("error","Please fill in all required fields");return}if(new Date(g.end_date)<new Date(g.start_date)){ae("error","End date must be after start date");return}o(!0);try{const N={...g,start_date:new Date(g.start_date).toISOString(),end_date:new Date(g.end_date).toISOString(),early_bird_end_date:g.early_bird_end_date?new Date(g.early_bird_end_date).toISOString():void 0};console.log(" [EventFormModal] Data being sent to service:",{description_length:N.description?.length,description_preview:N.description?.substring(0,100),full_data:N}),t?(console.log(" [EventFormModal] Updating event ID:",t.id),await Xt.updateEvent(t.id,N),ae("success","Event updated successfully")):(console.log(" [EventFormModal] Creating new event"),await Xt.createEvent(N),ae("success","Event created successfully")),r()}catch(N){console.error(" [EventFormModal] Error saving event:",N),ae("error","Failed to save event. Check console for details.")}finally{o(!1)}},_=[{id:"basic",label:"Basic Info",icon:js},{id:"location",label:"Location",icon:fi},{id:"capacity",label:"Capacity & Pricing",icon:zr},{id:"cpd",label:"CPD & Settings",icon:un}];return n.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Edit Event":"Create New Event"}),n.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:n.jsx(fn,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"flex border-b",children:_.map(b=>{const N=b.icon;return n.jsxs("button",{onClick:()=>h(b.id),className:`flex items-center px-4 py-3 text-sm font-medium border-b-2 transition-colors ${u===b.id?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:[n.jsx(N,{className:"h-4 w-4 mr-2"}),b.label]},b.id)})}),n.jsxs("form",{onSubmit:v,className:"flex-1 overflow-y-auto",children:[n.jsxs("div",{className:"p-6 space-y-6",children:[u==="basic"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"title",children:"Event Title *"}),n.jsx(Ae,{id:"title",value:g.title,onChange:b=>x({...g,title:b.target.value}),placeholder:"Enter event title",required:!0})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"short_description",children:"Short Description"}),n.jsx(Ae,{id:"short_description",value:g.short_description,onChange:b=>x({...g,short_description:b.target.value}),placeholder:"Brief description for event cards (max 500 characters)",maxLength:500})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"description",children:"Full Description"}),n.jsx(cV,{content:g.description,onChange:b=>{console.log(" [EventFormModal] Description changed:",{length:b?.length,preview:b?.substring(0,100)}),x(N=>({...N,description:b}))},placeholder:"Enter detailed event description...",height:"250px",enableDebugLogs:!0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tip: Use the toolbar to format text and add images."})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"category",children:"Category"}),n.jsxs("select",{id:"category",value:g.category_id,onChange:b=>x({...g,category_id:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[n.jsx("option",{value:"",children:"Select a category"}),e.map(b=>n.jsx("option",{value:b.id,children:b.name},b.id))]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"start_date",children:"Start Date & Time *"}),n.jsx(Ae,{id:"start_date",type:"datetime-local",value:g.start_date,onChange:b=>x({...g,start_date:b.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"end_date",children:"End Date & Time *"}),n.jsx(Ae,{id:"end_date",type:"datetime-local",value:g.end_date,onChange:b=>x({...g,end_date:b.target.value}),required:!0})]})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"timezone",children:"Timezone"}),n.jsxs("select",{id:"timezone",value:g.timezone,onChange:b=>x({...g,timezone:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[n.jsx("option",{value:"Australia/Sydney",children:"Sydney"}),n.jsx("option",{value:"Australia/Melbourne",children:"Melbourne"}),n.jsx("option",{value:"Australia/Brisbane",children:"Brisbane"}),n.jsx("option",{value:"Australia/Perth",children:"Perth"}),n.jsx("option",{value:"Australia/Adelaide",children:"Adelaide"})]})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"image_url",children:"Event Image"}),g.image_url&&n.jsx("div",{className:"mb-3",children:n.jsx("img",{src:g.image_url,alt:"Event preview",className:"w-full h-48 object-cover rounded-md border",onError:b=>{const N=b.target;N.onerror=null,N.src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=400"}})}),n.jsxs(re,{type:"button",variant:"outline",onClick:()=>m(!0),className:"w-full",children:[n.jsx(sl,{className:"h-4 w-4 mr-2"}),g.image_url?"Change Image":"Select Image"]}),g.image_url&&n.jsx(re,{type:"button",variant:"ghost",onClick:()=>x({...g,image_url:""}),className:"w-full mt-2 text-red-600 hover:text-red-700",children:"Remove Image"})]})]}),u==="location"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(xe,{children:"Event Type"}),n.jsxs("div",{className:"flex gap-4 mt-2",children:[n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"radio",value:"physical",checked:g.location_type==="physical",onChange:b=>x({...g,location_type:b.target.value}),className:"mr-2"}),n.jsx(Ed,{className:"h-4 w-4 mr-1"}),"In-Person"]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"radio",value:"virtual",checked:g.location_type==="virtual",onChange:b=>x({...g,location_type:b.target.value}),className:"mr-2"}),n.jsx(oE,{className:"h-4 w-4 mr-1"}),"Virtual"]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"radio",value:"hybrid",checked:g.location_type==="hybrid",onChange:b=>x({...g,location_type:b.target.value}),className:"mr-2"}),"Hybrid"]})]})]}),(g.location_type==="physical"||g.location_type==="hybrid")&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"venue_name",children:"Venue Name"}),n.jsx(Ae,{id:"venue_name",value:g.venue_name,onChange:b=>x({...g,venue_name:b.target.value}),placeholder:"e.g., Sydney Convention Centre"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"address_line1",children:"Address"}),n.jsx(Ae,{id:"address_line1",value:g.address_line1,onChange:b=>x({...g,address_line1:b.target.value}),placeholder:"Street address"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"city",children:"City"}),n.jsx(Ae,{id:"city",value:g.city,onChange:b=>x({...g,city:b.target.value})})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"state",children:"State"}),n.jsx(Ae,{id:"state",value:g.state,onChange:b=>x({...g,state:b.target.value})})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"postal_code",children:"Postal Code"}),n.jsx(Ae,{id:"postal_code",value:g.postal_code,onChange:b=>x({...g,postal_code:b.target.value})})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"country",children:"Country"}),n.jsx(Ae,{id:"country",value:g.country,onChange:b=>x({...g,country:b.target.value})})]})]})]}),(g.location_type==="virtual"||g.location_type==="hybrid")&&n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"virtual_link",children:"Virtual Event Link"}),n.jsx(Ae,{id:"virtual_link",value:g.virtual_link,onChange:b=>x({...g,virtual_link:b.target.value}),placeholder:"https://zoom.us/j/..."})]})]}),u==="capacity"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"capacity",children:"Event Capacity"}),n.jsx(Ae,{id:"capacity",type:"number",value:g.capacity,onChange:b=>x({...g,capacity:parseInt(b.target.value)}),min:"1"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"member_price",children:"Member Price ($)"}),n.jsx(Ae,{id:"member_price",type:"number",value:g.member_price,onChange:b=>x({...g,member_price:parseFloat(b.target.value)}),min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"non_member_price",children:"Non-Member Price ($)"}),n.jsx(Ae,{id:"non_member_price",type:"number",value:g.non_member_price,onChange:b=>x({...g,non_member_price:parseFloat(b.target.value)}),min:"0",step:"0.01"})]})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Early Bird Pricing (Optional)"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"early_bird_price",children:"Early Bird Price ($)"}),n.jsx(Ae,{id:"early_bird_price",type:"number",value:g.early_bird_price||"",onChange:b=>x({...g,early_bird_price:b.target.value?parseFloat(b.target.value):void 0}),min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"early_bird_end_date",children:"Early Bird End Date"}),n.jsx(Ae,{id:"early_bird_end_date",type:"datetime-local",value:g.early_bird_end_date||"",onChange:b=>x({...g,early_bird_end_date:b.target.value||void 0})})]})]})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Guest Settings"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:g.allow_guests,onChange:b=>x({...g,allow_guests:b.target.checked}),className:"mr-2"}),"Allow guests"]}),g.allow_guests&&n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"max_guests",children:"Max Guests per Registration"}),n.jsx(Ae,{id:"max_guests",type:"number",value:g.max_guests_per_registration,onChange:b=>x({...g,max_guests_per_registration:parseInt(b.target.value)}),min:"0"})]})]})]})]}),u==="cpd"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"CPD Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"cpd_points",children:"CPD Points"}),n.jsx(Ae,{id:"cpd_points",type:"number",value:g.cpd_points,onChange:b=>x({...g,cpd_points:parseFloat(b.target.value)}),min:"0",step:"0.5"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"cpd_category",children:"CPD Category"}),n.jsxs("select",{id:"cpd_category",value:g.cpd_category,onChange:b=>x({...g,cpd_category:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[n.jsx("option",{value:"",children:"Select CPD category"}),dV.map(b=>n.jsx("option",{value:b.name,children:b.name},b.id))]})]})]})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Visibility Settings"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(xe,{children:"Event Visibility"}),n.jsxs("select",{value:g.visibility,onChange:b=>x({...g,visibility:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[n.jsx("option",{value:"public",children:"Public - Everyone can see"}),n.jsx("option",{value:"members",children:"Members Only"}),n.jsx("option",{value:"private",children:"Private - Invite only"})]})]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:g.featured,onChange:b=>x({...g,featured:b.target.checked}),className:"mr-2"}),"Featured Event (shown prominently)"]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:g.requires_approval,onChange:b=>x({...g,requires_approval:b.target.checked}),className:"mr-2"}),"Require approval for registrations"]})]})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50",children:[n.jsx(re,{type:"button",variant:"outline",onClick:s,disabled:a,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:a,children:a?"Saving...":t?"Update Event":"Create Event"})]})]})]}),f&&n.jsx(uV,{onSelectImage:b=>{x({...g,image_url:b}),m(!1)},onClose:()=>m(!1),category:"events",currentImageUrl:g.image_url})]})}function fV(){const t=Ns(),[e,s]=M.useState([]),[r,a]=M.useState([]),[o,u]=M.useState(!0),[h,f]=M.useState(""),[m,g]=M.useState("all"),[x,v]=M.useState(!1),[_,b]=M.useState(null),[N,w]=M.useState(null);M.useEffect(()=>{E()},[]);const E=async()=>{try{u(!0);const[k,z]=await Promise.all([Xt.getEvents(),Xt.getCategories()]);s(k),a(z)}catch(k){console.error("Error loading events:",k),ae("error","Failed to load events")}finally{u(!1)}},A=()=>{b(null),v(!0)},O=k=>{b(k),v(!0)},F=async k=>{try{const z={...k,title:`${k.title} (Copy)`,slug:void 0,status:"draft",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};delete z.id,await Xt.createEvent(z),ae("success","Event duplicated successfully"),E()}catch(z){console.error("Error duplicating event:",z),ae("error","Failed to duplicate event")}},C=async k=>{try{await Xt.deleteEvent(k),ae("success","Event deleted successfully"),w(null),E()}catch(z){console.error("Error deleting event:",z),ae("error","Failed to delete event")}},L=async k=>{try{k.status==="published"?(await Xt.updateEvent(k.id,{status:"draft"}),ae("success","Event unpublished")):(await Xt.publishEvent(k.id),ae("success","Event published successfully")),E()}catch(z){console.error("Error publishing event:",z),ae("error","Failed to publish event")}},B=e.filter(k=>!(h&&!k.title.toLowerCase().includes(h.toLowerCase())||m!=="all"&&k.status!==m)),S=k=>{const z={draft:"bg-gray-100 text-gray-800",published:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"};return n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${z[k]}`,children:k.charAt(0).toUpperCase()+k.slice(1)})};return o?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Event Management"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Create and manage events"})]}),n.jsxs(re,{onClick:A,children:[n.jsx(Pc,{className:"h-4 w-4 mr-2"}),"Create Event"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsx(de,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Events"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),n.jsx(js,{className:"h-8 w-8 text-gray-400"})]})}),n.jsx(de,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Published"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.filter(k=>k.status==="published").length})]}),n.jsx(Ln,{className:"h-8 w-8 text-green-400"})]})}),n.jsx(de,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Draft"}),n.jsx("p",{className:"text-2xl font-bold text-gray-600",children:e.filter(k=>k.status==="draft").length})]}),n.jsx(hm,{className:"h-8 w-8 text-gray-400"})]})}),n.jsx(de,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Upcoming"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.filter(k=>new Date(k.start_date)>new Date).length})]}),n.jsx(js,{className:"h-8 w-8 text-blue-400"})]})})]}),n.jsx(de,{className:"p-4 mb-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx(Ae,{placeholder:"Search events...",value:h,onChange:k=>f(k.target.value),className:"flex-1"}),n.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:m,onChange:k=>g(k.target.value),children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"published",children:"Published"}),n.jsx("option",{value:"cancelled",children:"Cancelled"}),n.jsx("option",{value:"completed",children:"Completed"})]})]})}),n.jsx(de,{children:n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capacity"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(k=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.title}),k.category&&n.jsx("div",{className:"text-xs text-gray-500",children:k.category.name})]})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Ft(new Date(k.start_date),"MMM d, yyyy"),n.jsx("div",{className:"text-xs text-gray-500",children:Ft(new Date(k.start_date),"h:mm a")})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.location_type==="virtual"?"Online":k.venue_name||k.city}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.capacity}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S(k.status)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>t(`/events/${k.slug}`),children:n.jsx(Ln,{className:"h-4 w-4"})}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>O(k),children:n.jsx(hm,{className:"h-4 w-4"})}),n.jsxs("div",{className:"relative",children:[n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>w(N===k.id?null:k.id),children:n.jsx(lP,{className:"h-4 w-4"})}),N===k.id&&n.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border",children:n.jsxs("div",{className:"py-1",children:[n.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>L(k),children:k.status==="published"?"Unpublish":"Publish"}),n.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>F(k),children:[n.jsx(iE,{className:"h-4 w-4 inline mr-2"}),"Duplicate"]}),n.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>t(`/admin/events/${k.id}/registrations`),children:"View Registrations"}),n.jsx("hr",{className:"my-1"}),n.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",onClick:()=>C(k.id),children:[n.jsx(Qc,{className:"h-4 w-4 inline mr-2"}),"Delete"]})]})})]})]})})]},k.id))})]}),B.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(js,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No events found"}),n.jsx(re,{onClick:A,className:"mt-4",children:"Create your first event"})]})]})}),x&&n.jsx(hV,{event:_,categories:r,onClose:()=>{v(!1),b(null)},onSuccess:()=>{v(!1),b(null),E()}})]})}function mV(){const{user:t}=jt(),[e,s]=M.useState(!1),[r,a]=M.useState(!1),[o,u]=M.useState(!1),[h,f]=M.useState(t?.email||""),[m,g]=M.useState(!1),[x,v]=M.useState({smtp_host:"",smtp_port:587,smtp_secure:!0,smtp_auth_type:"LOGIN",smtp_username:"",smtp_password:"",from_email:"",from_name:"English Australia",reply_to_email:"",reply_to_name:"",enabled:!1,test_mode:!1,test_email:"",daily_limit:1e3,hourly_limit:100,emails_sent_today:0,emails_sent_this_hour:0}),_=[{name:"Gmail",host:"smtp.gmail.com",port:587,secure:!0},{name:"Outlook/Office365",host:"smtp.office365.com",port:587,secure:!0},{name:"SendGrid",host:"smtp.sendgrid.net",port:587,secure:!0},{name:"Mailgun",host:"smtp.mailgun.org",port:587,secure:!0},{name:"Amazon SES",host:"email-smtp.us-east-1.amazonaws.com",port:587,secure:!0},{name:"Custom",host:"",port:587,secure:!0}];M.useEffect(()=>{b()},[]);const b=async()=>{try{s(!0);const O=await Ki.checkDatabaseAvailable();g(!O);const F=await Ki.getSMTPSettings();if(console.log("SMTP Settings received from backend:",F),F.data){console.log("Setting SMTP data in form:",F.data);const C={...F.data,smtp_host:F.data.smtp_host||"",smtp_port:F.data.smtp_port||587,smtp_username:F.data.smtp_username||"",smtp_password:F.data.smtp_password||"",from_email:F.data.from_email||"",from_name:F.data.from_name||""};console.log("Final settings to apply:",C),v(C),setTimeout(()=>{v(L=>({...L}))},100)}g(F.isLocal)}catch(O){console.error("Error loading SMTP settings:",O),ae("error","Failed to load SMTP settings")}finally{s(!1)}},N=O=>{v({...x,smtp_host:O.host,smtp_port:O.port,smtp_secure:O.secure})},w=async()=>{if(!x.smtp_host||!x.smtp_username||!x.from_email){ae("error","Please fill in all required fields");return}if(!x.smtp_password&&!x.id){ae("error","Password is required for new SMTP configuration");return}try{s(!0),await Ki.saveSMTPSettings(x)?(ae("success","SMTP settings saved successfully"),b()):ae("error","Failed to save SMTP settings")}catch(O){console.error("Error saving SMTP settings:",O),ae("error","Failed to save SMTP settings")}finally{s(!1)}},E=async()=>{try{a(!0);const O=await Ki.testSMTPConnection();O.success?ae("success",O.message):ae("error",O.message)}catch(O){console.error("Error testing SMTP connection:",O),ae("error","Failed to test SMTP connection")}finally{a(!1)}},A=async()=>{if(!h){ae("error","Please enter a test email address");return}try{a(!0);const O=await Ki.sendTestEmail(h);O.success?ae("success",O.message):ae("error",O.message)}catch(O){console.error("Error sending test email:",O),ae("error","Failed to send test email")}finally{a(!1)}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"SMTP Settings"}),n.jsx("p",{className:"text-gray-600",children:"Configure email sending settings for the system"})]}),x.enabled&&n.jsx(de,{className:"mb-6 bg-green-50 border-green-200",children:n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(ta,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"font-semibold text-green-900",children:"SMTP is configured and enabled"}),n.jsx("p",{className:"text-green-800",children:"Email sending is active using the configuration below."})]})]})})}),n.jsx(de,{className:"mb-6",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Setup"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:_.map(O=>n.jsx(re,{variant:"outline",size:"sm",onClick:()=>N(O),className:x.smtp_host===O.host?"border-primary-500 bg-primary-50":"",children:O.name},O.name))})]})}),n.jsx(de,{className:"mb-6",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"SMTP Server Configuration"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"smtp_host",children:"SMTP Host *"}),n.jsx(Ae,{id:"smtp_host",value:x.smtp_host,onChange:O=>v({...x,smtp_host:O.target.value}),placeholder:"smtp.gmail.com",required:!0})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"smtp_port",children:"SMTP Port *"}),n.jsx(Ae,{id:"smtp_port",type:"number",value:x.smtp_port,onChange:O=>v({...x,smtp_port:parseInt(O.target.value)}),placeholder:"587",required:!0})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"smtp_username",children:"Username *"}),n.jsx(Ae,{id:"smtp_username",value:x.smtp_username,onChange:O=>v({...x,smtp_username:O.target.value}),placeholder:"your-email@gmail.com",required:!0})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"smtp_password",children:"Password *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ae,{id:"smtp_password",type:o?"text":"password",value:x.smtp_password||"",onChange:O=>v({...x,smtp_password:O.target.value}),placeholder:x.id?"(unchanged)":"Enter password"}),n.jsx("button",{type:"button",onClick:()=>u(!o),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:o?n.jsx(Uf,{className:"h-4 w-4"}):n.jsx(Ln,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For Gmail, use an App Password instead of your regular password"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"from_email",children:"From Email *"}),n.jsx(Ae,{id:"from_email",type:"email",value:x.from_email,onChange:O=>v({...x,from_email:O.target.value}),placeholder:"noreply@englishaustralia.com.au",required:!0})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"from_name",children:"From Name *"}),n.jsx(Ae,{id:"from_name",value:x.from_name,onChange:O=>v({...x,from_name:O.target.value}),placeholder:"English Australia",required:!0})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"reply_to_email",children:"Reply-To Email"}),n.jsx(Ae,{id:"reply_to_email",type:"email",value:x.reply_to_email||"",onChange:O=>v({...x,reply_to_email:O.target.value}),placeholder:"info@englishaustralia.com.au"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"reply_to_name",children:"Reply-To Name"}),n.jsx(Ae,{id:"reply_to_name",value:x.reply_to_name||"",onChange:O=>v({...x,reply_to_name:O.target.value}),placeholder:"English Australia Support"})]})]}),n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:x.smtp_secure,onChange:O=>v({...x,smtp_secure:O.target.checked}),className:"rounded border-gray-300"}),n.jsx("span",{className:"text-sm",children:"Use TLS/SSL encryption"})]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:x.enabled,onChange:O=>v({...x,enabled:O.target.checked}),className:"rounded border-gray-300"}),n.jsx("span",{className:"text-sm font-medium",children:"Enable email sending"})]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:x.test_mode,onChange:O=>v({...x,test_mode:O.target.checked}),className:"rounded border-gray-300"}),n.jsx("span",{className:"text-sm",children:"Test mode (all emails go to test address)"})]}),x.test_mode&&n.jsxs("div",{className:"ml-6",children:[n.jsx(xe,{htmlFor:"test_email_address",children:"Test Email Address"}),n.jsx(Ae,{id:"test_email_address",type:"email",value:x.test_email||"",onChange:O=>v({...x,test_email:O.target.value}),placeholder:"test@example.com"})]})]})]})}),n.jsx(de,{className:"mb-6",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rate Limits"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"daily_limit",children:"Daily Email Limit"}),n.jsx(Ae,{id:"daily_limit",type:"number",value:x.daily_limit,onChange:O=>v({...x,daily_limit:parseInt(O.target.value)})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Sent today: ",x.emails_sent_today]})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"hourly_limit",children:"Hourly Email Limit"}),n.jsx(Ae,{id:"hourly_limit",type:"number",value:x.hourly_limit,onChange:O=>v({...x,hourly_limit:parseInt(O.target.value)})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Sent this hour: ",x.emails_sent_this_hour]})]})]})]})}),n.jsx(de,{className:"mb-6",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Test Configuration"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(re,{variant:"outline",onClick:E,disabled:r||!x.smtp_host||!x.smtp_username,children:[n.jsx(XP,{className:"h-4 w-4 mr-2"}),r?"Testing...":"Test Connection"]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Test if the SMTP server can be reached with current settings"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"test_email_to",children:"Send Test Email To"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ae,{id:"test_email_to",type:"email",value:h,onChange:O=>f(O.target.value),placeholder:"test@example.com",className:"flex-1"}),n.jsxs(re,{onClick:A,disabled:r||!x.enabled||!h,children:[n.jsx(vx,{className:"h-4 w-4 mr-2"}),r?"Sending...":"Send Test"]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Send a test email to verify everything is working"})]})]})]})}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx(re,{variant:"outline",onClick:b,disabled:e,children:"Cancel"}),n.jsxs(re,{onClick:w,disabled:e,children:[n.jsx(Qd,{className:"h-4 w-4 mr-2"}),e?"Saving...":"Save Settings"]})]}),n.jsx(de,{className:"mt-6 bg-blue-50 border-blue-200",children:n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(ta,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsx("p",{className:"font-semibold mb-1",children:"Gmail Configuration Tips:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Enable 2-factor authentication in your Google account"}),n.jsx("li",{children:"Generate an App Password: Google Account  Security  2-Step Verification  App passwords"}),n.jsx("li",{children:"Use the App Password instead of your regular Gmail password"}),n.jsx("li",{children:"SMTP Host: smtp.gmail.com, Port: 587, Enable TLS"})]})]})]})})})]})}function pV(){const[t,e]=M.useState(!1),[s,r]=M.useState(""),[a,o]=M.useState(!1),[u,h]=M.useState({serviceId:"",templateIdTest:"",templateIdRegistration:"",templateIdReminder:"",publicKey:""});M.useEffect(()=>{h({serviceId:localStorage.getItem("emailjs_service_id")||"",templateIdTest:localStorage.getItem("emailjs_template_test")||"",templateIdRegistration:localStorage.getItem("emailjs_template_registration")||"",templateIdReminder:localStorage.getItem("emailjs_template_reminder")||"",publicKey:localStorage.getItem("emailjs_public_key")||""})},[]);const f=()=>{e(!0),localStorage.setItem("emailjs_service_id",u.serviceId),localStorage.setItem("emailjs_template_test",u.templateIdTest),localStorage.setItem("emailjs_template_registration",u.templateIdRegistration),localStorage.setItem("emailjs_template_reminder",u.templateIdReminder),localStorage.setItem("emailjs_public_key",u.publicKey),Ki.initEmailJS(u.publicKey),Os("success","EmailJS settings saved successfully!"),e(!1)},m=async()=>{if(!s){Os("error","Please enter a test email address");return}if(!u.serviceId||!u.templateIdTest||!u.publicKey){Os("error","Please configure EmailJS settings first");return}o(!0);try{const g=await Ki.sendTestEmail(s);g.success?Os("success",g.message):Os("error",g.message)}catch(g){Os("error",g.message||"Failed to send test email")}finally{o(!1)}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"EmailJS Configuration"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Configure EmailJS to send emails directly from the browser without a backend server"})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(jP,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{className:"space-y-3 flex-1",children:[n.jsx("h3",{className:"font-semibold text-blue-900",children:"Quick Setup Guide"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-blue-800",children:[n.jsxs("li",{children:["Create a free account at"," ",n.jsxs("a",{href:"https://www.emailjs.com/docs/get-started/sign-up/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline inline-flex items-center gap-1",children:["EmailJS.com",n.jsx(oy,{className:"w-3 h-3"})]})]}),n.jsxs("li",{children:["Add an email service (Gmail, Outlook, or SMTP) in your"," ",n.jsxs("a",{href:"https://dashboard.emailjs.com/admin",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline inline-flex items-center gap-1",children:["EmailJS Dashboard",n.jsx(oy,{className:"w-3 h-3"})]})]}),n.jsx("li",{children:"Create email templates for: Test Email, Event Registration, and Event Reminder"}),n.jsx("li",{children:"Copy your Service ID, Template IDs, and Public Key from the dashboard"}),n.jsx("li",{children:"Paste them in the form below and save"}),n.jsx("li",{children:"Send a test email to verify everything works!"})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3 mt-3",children:n.jsxs("p",{className:"text-xs text-yellow-800",children:[n.jsx("strong",{children:"Free Plan Limits:"})," 200 emails/month, 2 templates. Perfect for testing and small organizations."]})})]})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[n.jsx(eo,{className:"w-5 h-5"}),"EmailJS Settings"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"serviceId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Service ID *"}),n.jsx("input",{type:"text",id:"serviceId",value:u.serviceId,onChange:g=>h({...u,serviceId:g.target.value}),placeholder:"e.g., service_abc123",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Found in: Email Services  Your Service  Service ID"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"publicKey",className:"block text-sm font-medium text-gray-700 mb-2",children:"Public Key *"}),n.jsx("input",{type:"text",id:"publicKey",value:u.publicKey,onChange:g=>h({...u,publicKey:g.target.value}),placeholder:"e.g., AbCdEfGhIjKlMnOpQr",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Found in: Account  API Keys  Public Key"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"templateIdTest",className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Email Template ID *"}),n.jsx("input",{type:"text",id:"templateIdTest",value:u.templateIdTest,onChange:g=>h({...u,templateIdTest:g.target.value}),placeholder:"e.g., template_test123",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Template for sending test emails"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"templateIdRegistration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration Template ID"}),n.jsx("input",{type:"text",id:"templateIdRegistration",value:u.templateIdRegistration,onChange:g=>h({...u,templateIdRegistration:g.target.value}),placeholder:"e.g., template_reg456",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Template for event registration confirmations"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"templateIdReminder",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reminder Template ID"}),n.jsx("input",{type:"text",id:"templateIdReminder",value:u.templateIdReminder,onChange:g=>h({...u,templateIdReminder:g.target.value}),placeholder:"e.g., template_rem789",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Template for event reminders"})]})]}),n.jsx("div",{className:"mt-6 flex justify-end",children:n.jsxs("button",{onClick:f,disabled:t||!u.serviceId||!u.publicKey||!u.templateIdTest,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(Qd,{className:"w-4 h-4"}),"Save Settings"]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[n.jsx(qm,{className:"w-5 h-5"}),"Test Email Sending"]}),n.jsxs("div",{className:"flex gap-4 items-end",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"testEmailAddress",className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Email Address"}),n.jsx("input",{type:"email",id:"testEmailAddress",value:s,onChange:g=>r(g.target.value),placeholder:"test@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("button",{onClick:m,disabled:a||!s||!u.serviceId||!u.publicKey,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(vx,{className:"w-4 h-4"}),a?"Sending...":"Send Test"]})]}),u.serviceId&&u.publicKey&&n.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center gap-2 text-green-700 text-sm",children:[n.jsx(fs,{className:"w-4 h-4"}),"EmailJS is configured and ready to send emails"]})})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mt-6",children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(SP,{className:"w-5 h-5"}),"Template Variables Reference"]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Use these variables in your EmailJS templates:"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Common Variables"}),n.jsxs("ul",{className:"space-y-1 text-gray-600 font-mono text-xs",children:[n.jsx("li",{children:"{{to_email}}"}),n.jsx("li",{children:"{{to_name}}"}),n.jsx("li",{children:"{{from_name}}"}),n.jsx("li",{children:"{{timestamp}}"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Event Variables"}),n.jsxs("ul",{className:"space-y-1 text-gray-600 font-mono text-xs",children:[n.jsx("li",{children:"{{event_title}}"}),n.jsx("li",{children:"{{event_date}}"}),n.jsx("li",{children:"{{event_time}}"}),n.jsx("li",{children:"{{event_location}}"}),n.jsx("li",{children:"{{virtual_link}}"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"User Variables"}),n.jsxs("ul",{className:"space-y-1 text-gray-600 font-mono text-xs",children:[n.jsx("li",{children:"{{user_name}}"}),n.jsx("li",{children:"{{user_email}}"}),n.jsx("li",{children:"{{registration_id}}"}),n.jsx("li",{children:"{{reminder_time}}"})]})]})]})]}),n.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500",children:["Need help? Check the"," ",n.jsx("a",{href:"https://www.emailjs.com/docs/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"EmailJS Documentation"})," or ",n.jsx("a",{href:"https://dashboard.emailjs.com/admin/templates",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Manage Your Templates"})]})]})}const gV=[{id:"tpl-1",name:"event-registration",subject:"Registration Confirmed: {{event_title}}",body_html:`<h2>Registration Confirmed!</h2>
<p>Dear {{user_name}},</p>
<p>Your registration for <strong>{{event_title}}</strong> has been confirmed.</p>
<p>Event Date: {{event_date}}</p>
<p>Location: {{event_location}}</p>`,body_text:"Registration confirmed for {{event_title}}",category:"event",variables:["user_name","event_title","event_date","event_location"],enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"tpl-2",name:"event-reminder",subject:"Reminder: {{event_title}} - {{reminder_time}}",body_html:`<h2>Event Reminder</h2>
<p>Dear {{user_name}},</p>
<p>This is a reminder about your upcoming event: <strong>{{event_title}}</strong></p>
<p>When: {{event_date}} at {{event_time}}</p>
<p>Where: {{event_location}}</p>`,body_text:"Reminder: {{event_title}} on {{event_date}}",category:"event",variables:["user_name","event_title","event_date","event_time","event_location","reminder_time"],enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"tpl-3",name:"cpd-approved",subject:"CPD Activity Approved: {{activity_title}}",body_html:`<h2>CPD Activity Approved</h2>
<p>Dear {{user_name}},</p>
<p>Your CPD activity "<strong>{{activity_title}}</strong>" has been approved.</p>
<p>Points Awarded: {{cpd_points}}</p>`,body_text:"CPD activity {{activity_title}} approved. Points: {{cpd_points}}",category:"cpd",variables:["user_name","activity_title","cpd_points","cpd_category"],enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];function yV(){const[t,e]=M.useState(gV),[s,r]=M.useState(null),[a,o]=M.useState(!1),[u,h]=M.useState(!1),[f,m]=M.useState("html"),[g,x]=M.useState("all"),[v,_]=M.useState({}),[b,N]=M.useState({}),w=[{value:"all",label:"All Categories"},{value:"event",label:"Events"},{value:"cpd",label:"CPD"},{value:"member",label:"Members"},{value:"system",label:"System"},{value:"custom",label:"Custom"}],E=g==="all"?t:t.filter(S=>S.category===g),A=S=>{r(S),_(S),o(!0);const k={};S.variables.forEach(z=>{k[z]=`[${z}]`}),N(k)},O=()=>{if(!v.name||!v.subject||!v.body_html){ae("error","Please fill in all required fields");return}e(t.map(S=>S.id===v.id?{...S,...v,updated_at:new Date().toISOString()}:S)),ae("success","Template saved successfully"),o(!1),r(null),_({})},F=S=>{confirm("Are you sure you want to delete this template?")&&(e(t.filter(k=>k.id!==S)),ae("success","Template deleted successfully"))},C=S=>{const k={...S,id:`tpl-${Date.now()}`,name:`${S.name}-copy`,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};e([...t,k]),ae("success","Template duplicated successfully")},L=S=>{e(t.map(k=>k.id===S?{...k,enabled:!k.enabled}:k))},B=()=>{if(!v.body_html)return"";let S=v.body_html;return Object.entries(b).forEach(([k,z])=>{S=S.replace(new RegExp(`{{${k}}}`,"g"),z)}),S};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Email Templates"}),n.jsx("p",{className:"text-gray-600",children:"Manage email templates for automated messages"})]}),n.jsxs(re,{onClick:()=>{_({id:`tpl-${Date.now()}`,name:"",subject:"",body_html:"",body_text:"",category:"custom",variables:[],enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),o(!0)},children:[n.jsx(Pc,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsxs(de,{children:[n.jsx("div",{className:"p-4 border-b",children:n.jsx("select",{value:g,onChange:S=>x(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:w.map(S=>n.jsx("option",{value:S.value,children:S.label},S.value))})}),n.jsx("div",{className:"divide-y",children:E.map(S=>n.jsxs("div",{className:`p-4 hover:bg-gray-50 cursor-pointer ${s?.id===S.id?"bg-primary-50":""}`,onClick:()=>A(S),children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:S.name}),n.jsx("p",{className:"text-sm text-gray-500 truncate",children:S.subject})]}),n.jsx("div",{className:"flex items-center gap-1",children:S.enabled?n.jsx(fs,{className:"h-4 w-4 text-green-500"}):n.jsx(fn,{className:"h-4 w-4 text-gray-400"})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${S.category==="event"?"bg-blue-100 text-blue-700":S.category==="cpd"?"bg-purple-100 text-purple-700":S.category==="member"?"bg-green-100 text-green-700":S.category==="system"?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"}`,children:S.category}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:k=>{k.stopPropagation(),C(S)},className:"p-1 hover:bg-gray-200 rounded",title:"Duplicate",children:n.jsx(iE,{className:"h-3 w-3 text-gray-600"})}),n.jsx("button",{onClick:k=>{k.stopPropagation(),L(S.id)},className:"p-1 hover:bg-gray-200 rounded",title:S.enabled?"Disable":"Enable",children:S.enabled?n.jsx(Ln,{className:"h-3 w-3 text-gray-600"}):n.jsx(Ln,{className:"h-3 w-3 text-gray-400"})}),n.jsx("button",{onClick:k=>{k.stopPropagation(),F(S.id)},className:"p-1 hover:bg-gray-200 rounded",title:"Delete",children:n.jsx(Qc,{className:"h-3 w-3 text-red-600"})})]})]})]},S.id))})]})}),n.jsx("div",{className:"lg:col-span-2",children:a?n.jsx(de,{children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:v.id?.startsWith("tpl-")&&!t.find(S=>S.id===v.id)?"New Template":"Edit Template"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(re,{variant:"outline",onClick:()=>{o(!1),_({})},children:[n.jsx(fn,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs(re,{onClick:O,children:[n.jsx(Qd,{className:"h-4 w-4 mr-2"}),"Save"]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"template_name",children:"Template Name *"}),n.jsx(Ae,{id:"template_name",value:v.name||"",onChange:S=>_({...v,name:S.target.value}),placeholder:"e.g., welcome-email"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"template_category",children:"Category *"}),n.jsx("select",{id:"template_category",value:v.category||"custom",onChange:S=>_({...v,category:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:w.filter(S=>S.value!=="all").map(S=>n.jsx("option",{value:S.value,children:S.label},S.value))})]})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"template_subject",children:"Subject Line *"}),n.jsx(Ae,{id:"template_subject",value:v.subject||"",onChange:S=>_({...v,subject:S.target.value}),placeholder:"e.g., Welcome to {{organization_name}}!"})]}),n.jsxs("div",{children:[n.jsx(xe,{children:"Variables"}),n.jsx(Ae,{value:v.variables?.join(", ")||"",onChange:S=>_({...v,variables:S.target.value.split(",").map(k=>k.trim()).filter(Boolean)}),placeholder:"e.g., user_name, event_title, event_date"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Comma-separated list of variables that can be used in the template"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsxs("button",{onClick:()=>m("html"),className:`px-3 py-1 rounded ${f==="html"?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-700"}`,children:[n.jsx(J8,{className:"h-4 w-4 inline mr-1"}),"HTML"]}),n.jsxs("button",{onClick:()=>m("text"),className:`px-3 py-1 rounded ${f==="text"?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-700"}`,children:[n.jsx(ra,{className:"h-4 w-4 inline mr-1"}),"Plain Text"]}),n.jsxs("button",{onClick:()=>m("preview"),className:`px-3 py-1 rounded ${f==="preview"?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-700"}`,children:[n.jsx(Ln,{className:"h-4 w-4 inline mr-1"}),"Preview"]})]}),f==="html"&&n.jsx("textarea",{value:v.body_html||"",onChange:S=>_({...v,body_html:S.target.value}),className:"w-full h-64 px-3 py-2 border border-gray-300 rounded-md font-mono text-sm",placeholder:"HTML template content..."}),f==="text"&&n.jsx("textarea",{value:v.body_text||"",onChange:S=>_({...v,body_text:S.target.value}),className:"w-full h-64 px-3 py-2 border border-gray-300 rounded-md font-mono text-sm",placeholder:"Plain text template content..."}),f==="preview"&&n.jsxs("div",{className:"border border-gray-300 rounded-md p-4 h-64 overflow-auto bg-white",children:[n.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview Variables:"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:v.variables?.map(S=>n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("span",{className:"text-xs text-gray-600",children:[S,":"]}),n.jsx("input",{type:"text",value:b[S]||"",onChange:k=>N({...b,[S]:k.target.value}),className:"flex-1 text-xs px-1 py-0.5 border border-gray-200 rounded"})]},S))})]}),n.jsx("div",{dangerouslySetInnerHTML:{__html:B()}})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"template_enabled",checked:v.enabled||!1,onChange:S=>_({...v,enabled:S.target.checked}),className:"rounded border-gray-300"}),n.jsx(xe,{htmlFor:"template_enabled",children:"Template is enabled"})]})]})]})}):n.jsxs(de,{className:"p-12 text-center",children:[n.jsx(qm,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Select a Template"}),n.jsx("p",{className:"text-gray-600",children:"Choose a template from the list to view or edit its content"})]})})]})]})}const xV=({checked:t,onCheckedChange:e,disabled:s=!1,id:r,className:a=""})=>n.jsx("button",{type:"button",role:"switch","aria-checked":t,disabled:s,id:r,className:`
        relative inline-flex h-6 w-11 items-center rounded-full
        transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        ${t?"bg-blue-600":"bg-gray-200"}
        ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        ${a}
      `,onClick:()=>!s&&e(!t),children:n.jsx("span",{className:`
          inline-block h-4 w-4 transform rounded-full bg-white transition
          ${t?"translate-x-6":"translate-x-1"}
        `})}),T0=[{name:"Registration Confirmation",description:"Sent immediately after registration",timing_type:"after",timing_value:0,timing_unit:"minutes",email_subject:"Registration Confirmed: {{event_title}}",email_template:"registration_confirmation",is_active:!0,send_to_all:!1,order_index:0},{name:"7 Days Before",description:"One week reminder",timing_type:"before",timing_value:7,timing_unit:"days",email_subject:"Event in 1 Week: {{event_title}}",email_template:"event_reminder_week",is_active:!0,send_to_all:!0,order_index:1},{name:"3 Days Before",description:"Mid-week reminder",timing_type:"before",timing_value:3,timing_unit:"days",email_subject:"Event in 3 Days: {{event_title}}",email_template:"event_reminder_3days",is_active:!0,send_to_all:!0,order_index:2},{name:"1 Day Before",description:"Day before reminder",timing_type:"before",timing_value:1,timing_unit:"days",email_subject:"Event Tomorrow: {{event_title}}",email_template:"event_reminder_tomorrow",is_active:!0,send_to_all:!0,order_index:3},{name:"30 Minutes Before",description:"Final reminder",timing_type:"before",timing_value:30,timing_unit:"minutes",email_subject:"Starting Soon: {{event_title}}",email_template:"event_starting_soon",is_active:!0,send_to_all:!0,order_index:4},{name:"Event Live",description:"When event goes live",timing_type:"at_start",timing_value:0,timing_unit:"minutes",email_subject:" LIVE NOW: {{event_title}}",email_template:"event_live",is_active:!0,send_to_all:!0,order_index:5}];function bV(){const[t,e]=M.useState([]),[s,r]=M.useState(!0),[a,o]=M.useState(!1),[u,h]=M.useState(!1),[f,m]=M.useState(null),[g,x]=M.useState(""),[v,_]=M.useState(null),b=M.useRef(null),[N,w]=M.useState({name:"",description:"",timing_type:"before",timing_value:1,timing_unit:"days",email_subject:"",email_template:"",is_active:!0,send_to_all:!0});M.useEffect(()=>{E()},[]);const E=async()=>{try{r(!0);const{data:D,error:P}=await V.from("event_reminder_configs").select("*").order("order_index");if(P){console.log("Using default reminders configuration");const H=T0.map((J,q)=>({...J,id:`default-${q}`}));e(H)}else if(D&&D.length>0)e(D);else{const H=T0.map((J,q)=>({...J,id:`default-${q}`}));e(H)}}catch(D){console.error("Error loading reminders:",D);const P=T0.map((H,J)=>({...H,id:`default-${J}`}));e(P)}finally{r(!1)}},A=async()=>{try{o(!0),localStorage.setItem("event_reminder_configs",JSON.stringify(t));try{await V.from("event_reminder_configs").delete().neq("id","00000000-0000-0000-0000-000000000000");const{error:D}=await V.from("event_reminder_configs").insert(t.map(P=>({...P,id:P.id.startsWith("default-")?void 0:P.id})));if(D)throw D;ae("success","Reminder settings saved successfully!")}catch(D){console.log("Saved to localStorage only:",D),ae("success","Settings saved locally")}}catch(D){console.error("Error saving reminders:",D),ae("error","Failed to save reminder settings")}finally{o(!1)}},O=()=>{w({name:"",description:"",timing_type:"before",timing_value:1,timing_unit:"days",email_subject:"",email_template:"",is_active:!0,send_to_all:!0}),m(null),h(!0)},F=D=>{w(D),m(D.id),h(!0),setTimeout(()=>{b.current?.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},C=()=>{if(!N.name||!N.email_subject){ae("error","Please fill in all required fields");return}if(f)e(t.map(D=>D.id===f?{...D,...N}:D));else{const D={id:`custom-${Date.now()}`,name:N.name,description:N.description||"",timing_type:N.timing_type,timing_value:N.timing_value,timing_unit:N.timing_unit,email_subject:N.email_subject,email_template:N.email_template||N.name.toLowerCase().replace(/\s+/g,"_"),is_active:N.is_active,send_to_all:N.send_to_all,order_index:t.length};e([...t,D])}h(!1),m(null)},L=D=>{confirm("Are you sure you want to delete this reminder?")&&e(t.filter(P=>P.id!==D))},B=D=>{e(t.map(P=>P.id===D?{...P,is_active:!P.is_active}:P))},S=D=>{if(D===0)return;const P=[...t];[P[D-1],P[D]]=[P[D],P[D-1]],P.forEach((H,J)=>H.order_index=J),e(P)},k=D=>{if(D===t.length-1)return;const P=[...t];[P[D],P[D+1]]=[P[D+1],P[D]],P.forEach((H,J)=>H.order_index=J),e(P)},z=async D=>{if(!g){ae("error","Please enter a test email address");return}_(D.id);try{const P=`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
          <div style="background: linear-gradient(135deg, #0f172a 0%, #059669 100%); color: white; padding: 30px; text-align: center;">
            <h1 style="margin: 0; font-size: 28px;"> Test Reminder</h1>
            <p style="margin: 12px 0 0 0; opacity: 0.9;">EAU Event Reminder System</p>
          </div>
          <div style="padding: 40px;">
            <p style="font-size: 18px; margin-bottom: 24px;">Hello <strong>Test User</strong>,</p>
            <p>This is a test of the <strong>${D.name}</strong> reminder configuration.</p>
            
            <div style="background: #f8fafc; border: 2px solid #059669; border-radius: 12px; padding: 24px; margin: 24px 0;">
              <h2 style="margin: 0 0 16px 0; color: #0f172a;"> Sample Event Title</h2>
              <div style="font-size: 16px; line-height: 1.8;">
                <div><strong> Date:</strong> August 25, 2025</div>
                <div><strong> Time:</strong> 10:00 AM</div>
                <div><strong> Location:</strong> Online via Zoom</div>
                <div><strong> Reminder Type:</strong> ${R(D)}</div>
              </div>
            </div>
            
            <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 16px; margin: 24px 0; border-radius: 0 8px 8px 0;">
              <h3 style="margin: 0 0 8px 0; color: #856404;"> Reminder Details</h3>
              <p style="margin: 0; color: #856404;"><strong>Subject:</strong> ${D.email_subject}</p>
              <p style="margin: 8px 0 0 0; color: #856404;"><strong>Template:</strong> ${D.email_template}</p>
            </div>
            
            <div style="text-align: center;">
              <a href="http://localhost:5180/events" style="background: #059669; color: white; padding: 14px 28px; text-decoration: none; border-radius: 8px; font-weight: 600;">View Events</a>
            </div>
          </div>
          <div style="background: #f8fafc; padding: 20px; text-align: center; font-size: 14px; color: #64748b;">
            <strong>EAU Members</strong> | Email Reminder Test<br>
            Sent at ${new Date().toLocaleString()}
          </div>
        </div>
      `,H=await fetch("http://localhost:3001/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:g,subject:`[TEST] ${D.email_subject.replace(/\{\{([^}]+)\}\}/g,"Sample Event Title")}`,html:P,text:`Test reminder: ${D.name} - ${R(D)}`,useStoredConfig:!0})});if(H.ok)ae("success",`Test reminder "${D.name}" sent to ${g}`);else{const J=await H.text();console.error("Email send error:",J),ae("error","Failed to send test reminder. Check SMTP configuration.")}}catch(P){console.error("Test reminder error:",P),ae("error","Failed to send test reminder")}finally{_(null)}},R=D=>D.timing_type==="at_start"?"At event start":D.timing_type==="after"?`${D.timing_value} ${D.timing_unit} after registration`:`${D.timing_value} ${D.timing_unit} before event`;return s?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx(rE,{className:"h-8 w-8 text-primary-600"}),"Event Reminder Settings"]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Configure automated email reminders for event registrations"})]}),n.jsx(de,{className:"p-6 mb-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(qm,{className:"h-5 w-5 text-gray-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx(xe,{htmlFor:"test-email",children:"Test Email Address"}),n.jsx(Ae,{id:"test-email",type:"email",placeholder:"Enter email for testing reminders",value:g,onChange:D=>x(D.target.value),className:"max-w-md"})]})]})}),n.jsxs(de,{className:"p-6 mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Configured Reminders"}),n.jsxs(re,{onClick:O,children:[n.jsx(Pc,{className:"h-4 w-4 mr-2"}),"Add Reminder"]})]}),n.jsxs("div",{className:"space-y-4",children:[t.map((D,P)=>n.jsx("div",{className:`border rounded-lg p-4 ${D.is_active?"bg-white":"bg-gray-50"}`,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:D.name}),D.is_active?n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(fs,{className:"h-3 w-3 mr-1"}),"Active"]}):n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Inactive"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:D.description}),n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(sa,{className:"h-4 w-4 text-gray-400"}),R(D)]}),n.jsxs("span",{className:"text-gray-500",children:["Subject: ",D.email_subject]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>S(P),disabled:P===0,children:""}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>k(P),disabled:P===t.length-1,children:""}),n.jsx(xV,{checked:D.is_active,onCheckedChange:()=>B(D.id)}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>F(D),children:n.jsx(eo,{className:"h-4 w-4"})}),g&&n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>z(D),disabled:v===D.id,children:v===D.id?n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):n.jsx(vx,{className:"h-4 w-4"})}),!D.id.startsWith("default-")&&n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>L(D.id),className:"text-red-600 hover:text-red-700",children:n.jsx(Qc,{className:"h-4 w-4"})})]})]})},D.id)),t.length===0&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:'No reminders configured. Click "Add Reminder" to create one.'})]})]}),u&&n.jsxs(de,{className:"p-6 mb-6",ref:b,children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:f?"Edit Reminder":"Add New Reminder"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"name",children:"Reminder Name *"}),n.jsx(Ae,{id:"name",value:N.name,onChange:D=>w({...N,name:D.target.value}),placeholder:"e.g., 2 Hours Before"})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"description",children:"Description"}),n.jsx(Ae,{id:"description",value:N.description,onChange:D=>w({...N,description:D.target.value}),placeholder:"Brief description"})]}),n.jsxs("div",{children:[n.jsx(xe,{children:"Timing"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ae,{type:"number",min:"0",value:N.timing_value,onChange:D=>w({...N,timing_value:parseInt(D.target.value)}),className:"w-20"}),n.jsxs("select",{value:N.timing_unit,onChange:D=>w({...N,timing_unit:D.target.value}),className:"flex-1 rounded-md border border-gray-300 px-3 py-2",children:[n.jsx("option",{value:"minutes",children:"Minutes"}),n.jsx("option",{value:"hours",children:"Hours"}),n.jsx("option",{value:"days",children:"Days"})]}),n.jsxs("select",{value:N.timing_type,onChange:D=>w({...N,timing_type:D.target.value}),className:"flex-1 rounded-md border border-gray-300 px-3 py-2",children:[n.jsx("option",{value:"before",children:"Before Event"}),n.jsx("option",{value:"after",children:"After Registration"}),n.jsx("option",{value:"at_start",children:"At Event Start"})]})]})]}),n.jsxs("div",{children:[n.jsx(xe,{htmlFor:"email_subject",children:"Email Subject *"}),n.jsx(Ae,{id:"email_subject",value:N.email_subject,onChange:D=>w({...N,email_subject:D.target.value}),placeholder:"Use {{event_title}} for dynamic content"})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx(xe,{htmlFor:"email_template",children:"Template Name"}),n.jsx(Ae,{id:"email_template",value:N.email_template,onChange:D=>w({...N,email_template:D.target.value}),placeholder:"Template identifier (e.g., reminder_2hours)"})]}),n.jsxs("div",{className:"col-span-2 flex items-center gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:N.is_active,onChange:D=>w({...N,is_active:D.target.checked})}),n.jsx("span",{children:"Active"})]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:N.send_to_all,onChange:D=>w({...N,send_to_all:D.target.checked})}),n.jsx("span",{children:"Send to all registrants"})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx(re,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),n.jsxs(re,{onClick:C,children:[f?"Update":"Add"," Reminder"]})]})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx(re,{variant:"outline",onClick:E,disabled:a,children:"Reset to Defaults"}),n.jsx(re,{onClick:A,disabled:a,className:"min-w-[120px]",children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Qd,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})]}),n.jsx("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex",children:[n.jsx(ta,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-blue-900 font-semibold mb-1",children:"Available Variables"}),n.jsx("p",{className:"text-blue-800 text-sm mb-2",children:"You can use these variables in email subjects and templates:"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-blue-700",children:[n.jsx("code",{children:"{{event_title}}"}),n.jsx("code",{children:"{{event_date}}"}),n.jsx("code",{children:"{{event_time}}"}),n.jsx("code",{children:"{{event_location}}"}),n.jsx("code",{children:"{{user_name}}"}),n.jsx("code",{children:"{{user_email}}"}),n.jsx("code",{children:"{{registration_id}}"}),n.jsx("code",{children:"{{event_link}}"})]})]})]})})]})}async function vV(){try{console.log("Setting up storage bucket...");const{data:t,error:e}=await V.storage.listBuckets();if(e)return console.error("Error listing buckets:",e),!1;if(t?.some(r=>r.name==="media"))return console.log("Storage bucket already exists"),!0;{const{data:r,error:a}=await V.storage.createBucket("media",{public:!0,allowedMimeTypes:["image/jpeg","image/png","image/gif","image/webp"],fileSizeLimit:5242880});return a?(console.error("Error creating bucket:",a),!1):(console.log("Storage bucket created successfully"),!0)}}catch(t){return console.error("Setup error:",t),!1}}function wV(){const[t,e]=M.useState(!1),[s,r]=M.useState([]),a=async()=>{e(!0),r([]);const o=[];try{o.push("Setting up storage bucket..."),r([...o]),await vV()?o.push(" Storage bucket ready"):o.push(" Storage bucket setup failed (may already exist)"),r([...o]),o.push("Checking database tables..."),r([...o]);const{error:h}=await V.from("media_folders").select("id").limit(1);if(h)o.push(" media_folders table not found - please run SQL script manually"),o.push("Copy the content from database/media_library_schema_fixed.sql"),o.push("and execute it in Supabase SQL Editor");else{o.push(" media_folders table exists");const g=[{name:"Events",path:"/events/"},{name:"Members",path:"/members/"},{name:"CPD",path:"/cpd/"},{name:"General",path:"/general/"},{name:"Banners",path:"/banners/"},{name:"Icons",path:"/icons/"}];for(const x of g){const{error:v}=await V.from("media_folders").upsert(x,{onConflict:"path"});v||o.push(` Created folder: ${x.name}`)}}r([...o]);const{error:f}=await V.from("media_files").select("id").limit(1);f?o.push(" media_files table not found"):o.push(" media_files table exists"),r([...o]);const{error:m}=await V.from("media_usage").select("id").limit(1);if(m?o.push(" media_usage table not found"):o.push(" media_usage table exists"),r([...o]),!f){const{count:g}=await V.from("media_files").select("*",{count:"exact",head:!0});if(g===0){o.push("Adding sample images..."),r([...o]);const x=[{filename:"conference-event.jpg",original_filename:"conference-event.jpg",file_type:"image/jpeg",file_size:102400,mime_type:"image/jpeg",url:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800",thumbnail_url:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=200",medium_url:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=600",title:"Conference Event",category:"events",status:"active",is_public:!0},{filename:"business-meeting.jpg",original_filename:"business-meeting.jpg",file_type:"image/jpeg",file_size:98304,mime_type:"image/jpeg",url:"https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=800",thumbnail_url:"https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=200",medium_url:"https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=600",title:"Business Meeting",category:"events",status:"active",is_public:!0},{filename:"networking-event.jpg",original_filename:"networking-event.jpg",file_type:"image/jpeg",file_size:110592,mime_type:"image/jpeg",url:"https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=800",thumbnail_url:"https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=200",medium_url:"https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=600",title:"Networking Event",category:"events",status:"active",is_public:!0},{filename:"workshop.jpg",original_filename:"workshop.jpg",file_type:"image/jpeg",file_size:94208,mime_type:"image/jpeg",url:"https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=800",thumbnail_url:"https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=200",medium_url:"https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=600",title:"Workshop",category:"events",status:"active",is_public:!0}];for(const v of x){const{error:_}=await V.from("media_files").insert(v);_||o.push(` Added sample image: ${v.title}`)}r([...o])}}o.push(""),o.push(" Media Library setup completed!"),o.push(""),o.push(" If any tables are missing, please:"),o.push("1. Go to Supabase SQL Editor"),o.push("2. Copy the SQL from database/media_library_schema_fixed.sql"),o.push("3. Execute the script"),r([...o]),ae("success","Media Library setup completed!")}catch(u){console.error("Setup error:",u),o.push(` Error: ${u.message}`),r([...o]),ae("error","Failed to setup Media Library")}finally{e(!1)}};return n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs(de,{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Media Library Setup"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"This will check and setup the Media Library system. If tables don't exist, you'll need to run the SQL script manually in Supabase."}),n.jsx(re,{onClick:a,disabled:t,className:"mb-6",children:t?n.jsxs(n.Fragment,{children:[n.jsx(TP,{className:"h-4 w-4 mr-2 animate-spin"}),"Running setup..."]}):"Run Setup"}),s.length>0&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Setup Log:"}),n.jsx("div",{className:"space-y-1 font-mono text-sm",children:s.map((o,u)=>n.jsx("div",{className:`${o.includes("")?"text-green-600":o.includes("")?"text-red-600":o.includes("")?"text-yellow-600":o.includes("")?"text-primary-600 font-semibold":o.includes("")?"text-blue-600":"text-gray-700"}`,children:o||""},u))})]})]})})}function _V({content:t,onChange:e,placeholder:s="Start typing...",height:r="200px",enableDebugLogs:a=!0}){const o=M.useRef(null),u=M.useRef(null),[h,f]=M.useState(!1),m=M.useRef(null),g=M.useRef(e),x=M.useCallback((b,N)=>{if(!a)return;const w=new Date().toISOString();console.group(`[QuillEditor ${w}] ${b}`),N&&console.log("Data:",N),console.groupEnd()},[a]),v=M.useCallback(async b=>{try{if(f(!0),x("Starting image upload",{fileName:b.name,fileSize:b.size,fileType:b.type}),!b.type.startsWith("image/"))throw new Error("Please select an image file");if(b.size>5*1024*1024)throw new Error("Image size must be less than 5MB");const N=b.name.split(".").pop(),E=`editor-images/${`${Date.now()}_${Math.random().toString(36).substr(2,9)}.${N}`}`;x("Uploading to Supabase",{filePath:E});const{data:A,error:O}=await V.storage.from("media").upload(E,b,{contentType:b.type,cacheControl:"3600"});if(O)throw x("Upload error",O),O;x("Upload successful",A);const{data:{publicUrl:F}}=V.storage.from("media").getPublicUrl(E);if(x("Public URL generated",{publicUrl:F}),u.current){const C=u.current.getSelection(),L=C?C.index:0;u.current.insertEmbed(L,"image",F),u.current.setSelection(L+1)}ae("success","Image uploaded successfully")}catch(N){x("Image upload failed",N),ae("error",N.message||"Failed to upload image")}finally{f(!1),m.current&&(m.current.value="")}},[x]),_=M.useCallback(()=>{x("Image button clicked"),m.current?.click()},[x]);return M.useEffect(()=>{g.current=e},[e]),M.useEffect(()=>{if(!o.current||u.current)return;x("Initializing Quill editor");const b=new be(o.current,{theme:"snow",placeholder:s,modules:{toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"bullet"},{list:"ordered"}],[{indent:"-1"},{indent:"+1"}],["link","image","video"],[{color:[]},{background:[]}],[{align:[]}],["clean"]],handlers:{image:_}},clipboard:{matchVisual:!1}}});return t&&(x("Setting initial content",{content:t}),b.root.innerHTML=t),b.on("text-change",(N,w,E)=>{x("Text changed",{source:E,deltaOps:N.ops?.length,html:b.root.innerHTML});const A=b.root.innerHTML;A==="<p><br></p>"?g.current(""):g.current(A)}),b.on("selection-change",(N,w,E)=>{x("Selection changed",{range:N,oldRange:w,source:E})}),b.root.addEventListener("paste",async N=>{x("Paste event detected");const w=N.clipboardData?.items;if(w){for(const E of w)if(E.type.startsWith("image/")){N.preventDefault();const A=E.getAsFile();A&&(x("Image pasted",{fileName:A.name,fileType:A.type}),await v(A))}}}),u.current=b,x("Quill editor initialized successfully"),()=>{x("Cleaning up Quill editor"),b.off("text-change"),b.off("selection-change")}},[s,_,v,x]),M.useEffect(()=>{if(!u.current)return;const b=u.current.root.innerHTML,N=b==="<p><br></p>"||b==="",w=!t||t==="";x("Content prop check",{currentHtml:b?.substring(0,100),propContent:t?.substring(0,100),willUpdate:b!==t&&!(N&&w)}),!(N&&w)&&b!==t&&(x("Updating content from prop",{oldContent:b,newContent:t}),u.current.off("text-change"),u.current.root.innerHTML=t||"",setTimeout(()=>{u.current&&u.current.on("text-change",(E,A,O)=>{x("Text changed (re-attached)",{source:O,deltaOps:E.ops?.length,html:u.current?.root.innerHTML});const F=u.current?.root.innerHTML||"";F==="<p><br></p>"?g.current(""):g.current(F)})},0))},[t,x]),n.jsxs("div",{className:"quill-editor-wrapper relative",children:[n.jsx("input",{ref:m,type:"file",accept:"image/*",className:"hidden",onChange:b=>{const N=b.target.files?.[0];N&&(x("File selected",{fileName:N.name}),v(N))}}),h&&n.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center z-50 rounded-md",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5 animate-spin"}),n.jsx("span",{children:"Uploading image..."})]})}),n.jsx("div",{ref:o,style:{height:r},className:"bg-white"}),n.jsx("style",{children:`
        .quill-editor-wrapper .ql-toolbar {
          border: 1px solid #e5e7eb;
          border-bottom: none;
          border-radius: 0.375rem 0.375rem 0 0;
          background: #f9fafb;
        }
        
        .quill-editor-wrapper .ql-container {
          border: 1px solid #e5e7eb;
          border-radius: 0 0 0.375rem 0.375rem;
          font-family: inherit;
          overflow: hidden;
        }
        
        .quill-editor-wrapper .ql-editor {
          min-height: ${r};
          max-height: 400px;
          overflow-y: auto;
          overflow-x: hidden;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
          white-space: pre-wrap;
        }
        
        .quill-editor-wrapper .ql-editor * {
          max-width: 100%;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
        }
        
        .quill-editor-wrapper .ql-editor p,
        .quill-editor-wrapper .ql-editor li,
        .quill-editor-wrapper .ql-editor h1,
        .quill-editor-wrapper .ql-editor h2,
        .quill-editor-wrapper .ql-editor h3,
        .quill-editor-wrapper .ql-editor h4,
        .quill-editor-wrapper .ql-editor h5,
        .quill-editor-wrapper .ql-editor h6,
        .quill-editor-wrapper .ql-editor blockquote {
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
          max-width: 100%;
        }
        
        .quill-editor-wrapper .ql-editor img {
          max-width: 100%;
          height: auto;
          border-radius: 0.375rem;
          margin: 0.5rem 0;
        }
        
        .quill-editor-wrapper .ql-editor.ql-blank::before {
          color: #9ca3af;
          font-style: normal;
        }
        
        .quill-editor-wrapper .ql-snow .ql-tooltip {
          z-index: 100;
        }
        
        /* Custom scrollbar */
        .quill-editor-wrapper .ql-editor::-webkit-scrollbar {
          width: 8px;
        }
        
        .quill-editor-wrapper .ql-editor::-webkit-scrollbar-track {
          background: #f1f1f1;
          border-radius: 4px;
        }
        
        .quill-editor-wrapper .ql-editor::-webkit-scrollbar-thumb {
          background: #888;
          border-radius: 4px;
        }
        
        .quill-editor-wrapper .ql-editor::-webkit-scrollbar-thumb:hover {
          background: #555;
        }
      `})]})}function jV(){const[t,e]=M.useState(""),[s,r]=M.useState(""),[a,o]=M.useState(!1),u=()=>{r(t),ae("success","Content saved successfully"),console.log("Saved content:",t)},h=()=>{e(""),r(""),ae("info","Content cleared")};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Rich Text Editor Test"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx("div",{children:n.jsxs(de,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quill Editor"}),n.jsx(_V,{content:t,onChange:e,placeholder:"Start typing or paste an image...",height:"300px",enableDebugLogs:!0}),n.jsxs("div",{className:"mt-4 flex gap-2",children:[n.jsx(re,{onClick:u,children:"Save Content"}),n.jsx(re,{variant:"outline",onClick:h,children:"Clear"}),n.jsxs(re,{variant:"outline",onClick:()=>o(!a),children:[a?"Hide":"Show"," Preview"]})]}),n.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Features:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[n.jsx("li",{children:"Rich text formatting (bold, italic, underline, etc.)"}),n.jsx("li",{children:"Headers and lists"}),n.jsx("li",{children:"Image upload from computer (click image button)"}),n.jsx("li",{children:"Paste images directly (Ctrl+V)"}),n.jsx("li",{children:"Links and videos"}),n.jsx("li",{children:"Color and background formatting"}),n.jsx("li",{children:"All changes are logged in the console (F12)"})]})]})]})}),n.jsxs("div",{children:[n.jsxs(de,{className:"p-6 mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Raw HTML Output"}),n.jsx("div",{className:"bg-gray-100 p-4 rounded font-mono text-xs overflow-x-auto max-h-48 overflow-y-auto",children:n.jsx("pre",{children:t||"<empty>"})})]}),a&&n.jsxs(de,{className:"p-6 mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Rendered Preview"}),n.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:t||'<p class="text-gray-400">No content to preview</p>'}})]}),s&&n.jsxs(de,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Last Saved Content"}),n.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s}})]})]})]})]})}function NV(){const t=`
    <h1>Heading 1 - Main Title</h1>
    <p>This is a regular paragraph with some <strong>bold text</strong>, <em>italic text</em>, and <u>underlined text</u>. You can also have <s>strikethrough text</s>.</p>
    
    <h2>Heading 2 - Section Title</h2>
    <p>Here's another paragraph demonstrating text formatting. You can combine <strong><em>bold and italic</em></strong> or any other combination.</p>
    
    <h3>Heading 3 - Subsection</h3>
    <p>Let's demonstrate lists. Here's an unordered list:</p>
    <ul>
      <li>First item in the list</li>
      <li>Second item with <strong>bold text</strong></li>
      <li>Third item with nested list:
        <ul>
          <li>Nested item 1</li>
          <li>Nested item 2</li>
          <li>Nested item 3 with another level:
            <ul>
              <li>Deep nested item</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Fourth item back at main level</li>
    </ul>
    
    <h3>Ordered Lists</h3>
    <p>Now let's see an ordered list:</p>
    <ol>
      <li>First step in the process</li>
      <li>Second step with more details</li>
      <li>Third step with sub-steps:
        <ol>
          <li>Sub-step A</li>
          <li>Sub-step B</li>
          <li>Sub-step C</li>
        </ol>
      </li>
      <li>Final step</li>
    </ol>
    
    <h2>Blockquotes and Code</h2>
    <blockquote>
      "This is a blockquote. It's typically used for quotes or to highlight important information. It can span multiple lines and should be visually distinct from regular text."
    </blockquote>
    
    <p>Here's some inline code: <code>const example = "Hello World";</code> within a paragraph.</p>
    
    <pre><code>// Code block example
function greet(name) {
  return \`Hello, \${name}!\`;
}

const message = greet("Developer");
console.log(message);</code></pre>
    
    <h2>Links and Text Alignment</h2>
    <p>You can add <a href="https://example.com" target="_blank">links to external sites</a> or internal pages.</p>
    
    <p class="ql-align-center">This text is centered using Quill's alignment class.</p>
    
    <p class="ql-align-right">This text is right-aligned.</p>
    
    <p class="ql-align-justify">This is a justified paragraph. When text is justified, it is aligned along both the left and right margins. This creates a clean, formal appearance that's often used in printed materials like newspapers and books. The spacing between words is adjusted to achieve this alignment.</p>
    
    <h2>Indentation</h2>
    <p>Regular paragraph without indentation.</p>
    <p class="ql-indent-1">This paragraph has level 1 indentation.</p>
    <p class="ql-indent-2">This paragraph has level 2 indentation.</p>
    <p class="ql-indent-3">This paragraph has level 3 indentation.</p>
    
    <hr>
    
    <h2>Mixed Content Example</h2>
    <p>Let's combine everything in a real-world example:</p>
    
    <h3>Workshop Agenda</h3>
    <ol>
      <li><strong>9:00 AM - Introduction</strong>
        <ul>
          <li>Welcome and overview</li>
          <li>Participant introductions</li>
        </ul>
      </li>
      <li><strong>9:30 AM - Theory Session</strong>
        <ul>
          <li>Core concepts</li>
          <li>Best practices</li>
          <li>Case studies</li>
        </ul>
      </li>
      <li><strong>11:00 AM - Practical Exercise</strong>
        <blockquote>
          "Learning by doing is the most effective way to master new skills."
        </blockquote>
      </li>
      <li><strong>12:00 PM - Lunch Break</strong></li>
      <li><strong>1:00 PM - Advanced Topics</strong>
        <ul>
          <li>Complex scenarios</li>
          <li>Troubleshooting tips</li>
        </ul>
      </li>
    </ol>
    
    <p><em>Note: All times are in AEDT (Australian Eastern Daylight Time)</em></p>
  `;return n.jsxs("div",{className:"container mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Rich Content Styles Test"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx("div",{children:n.jsxs(de,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Raw HTML (from Quill)"}),n.jsx("div",{className:"bg-gray-100 p-4 rounded font-mono text-xs overflow-x-auto max-h-96 overflow-y-auto",children:n.jsx("pre",{children:t})})]})}),n.jsx("div",{children:n.jsxs(de,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Rendered Content"}),n.jsx("div",{className:"rich-content",dangerouslySetInnerHTML:{__html:t}})]})})]}),n.jsx("div",{className:"mt-8",children:n.jsxs(de,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Full Width Rendered Content"}),n.jsx("div",{className:"rich-content",dangerouslySetInnerHTML:{__html:t}})]})})]})}function Bx({content:t,onChange:e,placeholder:s="Start typing...",height:r="200px",enableDebugLogs:a=!1}){const o=M.useRef(null),u=M.useRef(null),[h,f]=M.useState(!1),m=M.useRef(null),g=M.useRef(!1),x=M.useCallback((_,b)=>{a&&console.log(`[QuillEditor] ${_}`,b||"")},[a]),v=M.useCallback(async _=>{try{if(f(!0),x("Starting image upload",{fileName:_.name}),!_.type.startsWith("image/"))throw new Error("Please select an image file");if(_.size>5*1024*1024)throw new Error("Image size must be less than 5MB");const b=_.name.split(".").pop(),w=`editor-images/${`${Date.now()}_${Math.random().toString(36).substr(2,9)}.${b}`}`,{data:E,error:A}=await V.storage.from("media").upload(w,_,{contentType:_.type,cacheControl:"3600"});if(A)throw A;const{data:{publicUrl:O}}=V.storage.from("media").getPublicUrl(w);if(u.current){const F=u.current.getSelection()||{index:0};u.current.insertEmbed(F.index,"image",O),u.current.setSelection(F.index+1)}ae("success","Image uploaded successfully")}catch(b){x("Image upload failed",b),ae("error",b.message||"Failed to upload image")}finally{f(!1),m.current&&(m.current.value="")}},[x]);return M.useEffect(()=>{if(!o.current||u.current)return;x("Initializing Quill editor");const _=new be(o.current,{theme:"snow",placeholder:s,modules:{toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"bullet"},{list:"ordered"}],["link","image"],[{color:[]},{background:[]}],["clean"]],handlers:{image:()=>m.current?.click()}}}});t&&t!=="<p><br></p>"&&(_.root.innerHTML=t);const b=document.createElement("style");b.textContent=`
      ${o.current.id?`#${o.current.id}`:""} .ql-editor li[data-list="bullet"] {
        list-style-type: disc !important;
      }
      ${o.current.id?`#${o.current.id}`:""} .ql-editor ul li {
        list-style-type: disc !important;
      }
      ${o.current.id?`#${o.current.id}`:""} .ql-editor ul {
        list-style-type: disc !important;
      }
    `,document.head.appendChild(b);const N=`quill-editor-${Math.random().toString(36).substr(2,9)}`;return o.current.id=N,_.on("text-change",()=>{if(g.current){g.current=!1;return}const w=_.root.innerHTML;x("Text changed",{preview:w.substring(0,100)}),_.root.querySelectorAll('li[data-list="bullet"]').forEach(F=>{const C=F.parentElement;if(C&&C.tagName==="OL"){const L=document.createElement("ul");L.innerHTML=C.innerHTML,C.parentNode?.replaceChild(L,C)}}),_.root.querySelectorAll("ul").forEach(F=>{F.style.listStyleType="disc",F.querySelectorAll("li").forEach(C=>{C.style.listStyleType="disc"})});const O=_.root.innerHTML;e(O==="<p><br></p>"?"":O)}),_.root.addEventListener("paste",async w=>{const E=w.clipboardData?.items;if(E){for(const A of E)if(A.type.startsWith("image/")){w.preventDefault();const O=A.getAsFile();O&&await v(O)}}}),u.current=_,()=>{_.off("text-change")}},[]),M.useEffect(()=>{if(!u.current)return;const _=u.current.root.innerHTML;_===t||(!_||_==="<p><br></p>")&&(!t||t==="<p><br></p>"||t==="")||(x("Updating content from prop",{old:_.substring(0,50),new:t.substring(0,50)}),g.current=!0,u.current.root.innerHTML=t||"")},[t,x]),n.jsxs("div",{className:"quill-editor-wrapper relative",children:[n.jsx("input",{ref:m,type:"file",accept:"image/*",className:"hidden",onChange:_=>{const b=_.target.files?.[0];b&&v(b)}}),h&&n.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center z-50 rounded-md",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5 animate-spin"}),n.jsx("span",{children:"Uploading image..."})]})}),n.jsx("div",{ref:o,style:{height:r},className:"bg-white"}),n.jsx("style",{children:`
        .quill-editor-wrapper .ql-toolbar {
          border: 1px solid #e5e7eb;
          border-bottom: none;
          border-radius: 0.375rem 0.375rem 0 0;
          background: #f9fafb;
        }
        
        .quill-editor-wrapper .ql-container {
          border: 1px solid #e5e7eb;
          border-radius: 0 0 0.375rem 0.375rem;
          font-family: inherit;
          overflow: hidden;
        }
        
        .quill-editor-wrapper .ql-editor {
          min-height: ${r};
          max-height: 400px;
          overflow-y: auto;
          overflow-x: hidden;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
          white-space: pre-wrap;
        }
        
        .quill-editor-wrapper .ql-editor * {
          max-width: 100%;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
        }
        
        .quill-editor-wrapper .ql-editor p,
        .quill-editor-wrapper .ql-editor li,
        .quill-editor-wrapper .ql-editor h1,
        .quill-editor-wrapper .ql-editor h2,
        .quill-editor-wrapper .ql-editor h3,
        .quill-editor-wrapper .ql-editor h4,
        .quill-editor-wrapper .ql-editor h5,
        .quill-editor-wrapper .ql-editor h6 {
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
        }
        
        .quill-editor-wrapper .ql-editor img {
          max-width: 100%;
          height: auto;
          border-radius: 0.375rem;
          margin: 0.5rem 0;
        }
        
        .quill-editor-wrapper .ql-editor.ql-blank::before {
          color: #9ca3af;
          font-style: normal;
        }
        
        
        /* Nested bullets */
        .quill-editor-wrapper .ql-editor ul ul {
          list-style-type: circle !important;
        }
        
        .quill-editor-wrapper .ql-editor ul ul ul {
          list-style-type: square !important;
        }
        
        /* Ensure ordered lists remain numbered */
        .quill-editor-wrapper .ql-editor ol {
          list-style-type: decimal !important;
          padding-left: 1.5em !important;
        }
        
        .quill-editor-wrapper .ql-editor ol li {
          list-style-type: decimal !important;
          display: list-item !important;
        }
      `})]})}function Ey({content:t,className:e=""}){const s=t.replace(/<ul>/g,'<ul style="list-style:none!important;list-style-type:none!important;margin:0.5em 0!important;padding-left:0!important;">').replace(/<li>/g,'<li style="list-style:none!important;list-style-type:none!important;position:relative!important;padding-left:1.5em!important;margin:0.25em 0!important;display:block!important;">');return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`ql-container ql-snow ${e}`,style:{border:"none"},children:n.jsx("div",{className:"ql-editor bullets-fixed",style:{padding:0,minHeight:"auto",fontSize:"16px",lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:s}})}),n.jsx("style",{children:`
        /* SUPER SPECIFIC FIX: Custom bullets for bullets-fixed class */
        .bullets-fixed ul li::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
          top: 0 !important;
          color: currentColor !important;
          font-weight: bold !important;
          display: inline-block !important;
          width: 1em !important;
          height: 1em !important;
          line-height: 1 !important;
          z-index: 1 !important;
        }
        
        /* Hide ALL possible markers */
        .bullets-fixed ul li::marker {
          content: none !important;
          display: none !important;
          visibility: hidden !important;
          opacity: 0 !important;
        }
        
        .bullets-fixed ul li::-webkit-details-marker {
          display: none !important;
        }
        
        .bullets-fixed ul li {
          list-style: none !important;
          list-style-type: none !important;
          list-style-image: none !important;
          counter-increment: none !important;
        }
        
        .bullets-fixed ul {
          list-style: none !important;
          list-style-type: none !important;
          list-style-image: none !important;
          counter-reset: none !important;
        }
        
        /* Force override any external styles */
        [data-list] {
          list-style: none !important;
        }
        
        [data-list="bullet"] {
          list-style: none !important;
        }
        
        [data-list="bullet"]::marker {
          display: none !important;
        }
        
        [data-list="bullet"]::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
        }
        
        .ql-editor ul > li[data-list] {
          list-style-type: disc !important;
        }
        
        .ql-editor ul > li[data-list="bullet"] {
          list-style-type: disc !important;
        }
        
        .ql-editor ul ul {
          list-style-type: circle !important;
        }
        
        .ql-editor ul ul ul {
          list-style-type: square !important;
        }
        
        .ql-editor ol {
          list-style-type: decimal !important;
          display: block !important;
          margin-block-start: 0.5em !important;
          margin-block-end: 0.5em !important;
          padding-inline-start: 1.5em !important;
        }
        
        .ql-editor ol > li {
          list-style-type: decimal !important;
          display: list-item !important;
          margin: 0.25em 0 !important;
        }
        
        .ql-editor ol > li::before {
          display: none !important;
          content: none !important;
        }
        
        .ql-editor ol > li[data-list] {
          list-style-type: decimal !important;
        }
        
        .ql-editor ol > li[data-list="ordered"] {
          list-style-type: decimal !important;
        }
        
        /* Counter reset for any Quill counters */
        .ql-editor {
          counter-reset: none !important;
        }
        
        .ql-editor li {
          counter-increment: none !important;
        }
        
        .ql-editor li:before {
          content: none !important;
        }
        
        /* Spacing adjustments */
        .ql-editor h1 {
          margin: 0.5em 0 !important;
          font-size: 2em !important;
        }
        
        .ql-editor h2 {
          margin: 0.5em 0 !important;
          font-size: 1.5em !important;
        }
        
        .ql-editor h3 {
          margin: 0.5em 0 !important;
          font-size: 1.17em !important;
        }
        
        .ql-editor p {
          margin: 0.5em 0 !important;
        }
        
        .ql-editor p:first-child {
          margin-top: 0 !important;
        }
        
        .ql-editor p:last-child {
          margin-bottom: 0 !important;
        }
        
        .ql-editor blockquote {
          margin: 0.5em 0 !important;
          padding-left: 1em !important;
        }
        
        /* Remove any Quill-specific list indentation classes */
        .ql-editor .ql-indent-1 { padding-left: 3em !important; }
        .ql-editor .ql-indent-2 { padding-left: 6em !important; }
        .ql-editor .ql-indent-3 { padding-left: 9em !important; }
        .ql-editor .ql-indent-4 { padding-left: 12em !important; }
        .ql-editor .ql-indent-5 { padding-left: 15em !important; }
        .ql-editor .ql-indent-6 { padding-left: 18em !important; }
        .ql-editor .ql-indent-7 { padding-left: 21em !important; }
        .ql-editor .ql-indent-8 { padding-left: 24em !important; }
      `})]})}function SV(){const[t,e]=M.useState(`
    <h1>WYSIWYG Test - What You See Is What You Get</h1>
    <p>This page demonstrates that the content looks exactly the same in the editor and when rendered.</p>
    
    <h2>Unordered List (Bullet Points)</h2>
    <ul>
      <li>First bullet point</li>
      <li>Second bullet point</li>
      <li>Third bullet point with nested items:
        <ul>
          <li>Nested item 1</li>
          <li>Nested item 2</li>
        </ul>
      </li>
    </ul>
    
    <h2>Ordered List (Numbers)</h2>
    <ol>
      <li>First numbered item</li>
      <li>Second numbered item</li>
      <li>Third numbered item</li>
    </ol>
    
    <blockquote>This is a blockquote. It should look the same in both views.</blockquote>
    
    <p><strong>Bold text</strong>, <em>italic text</em>, and <u>underlined text</u>.</p>
  `),[s,r]=M.useState(!0);return n.jsxs("div",{className:"container mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-3xl font-bold mb-4",children:"WYSIWYG Test - Editor vs Display"}),n.jsx("p",{className:"text-gray-600 mb-8",children:"This page shows that content looks identical in the editor and when displayed to users."}),n.jsx("div",{className:"mb-4",children:n.jsx(re,{onClick:()=>r(!s),variant:s?"primary":"outline",children:s?"Switch to Display Mode":"Switch to Edit Mode"})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs(de,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4 text-green-600",children:"Editor View (What Admin Sees)"}),n.jsx("div",{className:s?"":"opacity-50 pointer-events-none",children:n.jsx(Bx,{content:t,onChange:e,placeholder:"Start typing...",height:"400px",enableDebugLogs:!1})})]}),n.jsxs(de,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4 text-blue-600",children:"Display View (What Users See)"}),n.jsx("div",{className:"border border-gray-200 rounded-lg p-4 min-h-[400px]",children:n.jsx(Ey,{content:t})})]})]}),n.jsx("div",{className:"mt-8",children:n.jsxs(de,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Full Width Display (Event Details Page)"}),n.jsx("div",{className:"border-t pt-4",children:n.jsx(Ey,{content:t})})]})}),n.jsx("div",{className:"mt-8",children:n.jsxs(de,{className:"p-6 bg-blue-50",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Instructions:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Edit content in the left panel (Editor View)"}),n.jsx("li",{children:"See real-time updates in the right panel (Display View)"}),n.jsx("li",{children:"Toggle between edit and display modes with the button"}),n.jsx("li",{children:"Notice that bullet points remain as bullets (not numbers)"}),n.jsx("li",{children:"All formatting looks identical in both views"})]})]})})]})}function EV(){const[t,e]=M.useState(""),s=()=>{e(`
      <h2>Test Content</h2>
      <p>This is a paragraph.</p>
      <ul>
        <li>First bullet point</li>
        <li>Second bullet point</li>
        <li>Third bullet point</li>
      </ul>
      <ol>
        <li>First numbered item</li>
        <li>Second numbered item</li>
      </ol>
    `)};return n.jsxs("div",{className:"container mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Quill HTML Debug Tool"}),n.jsxs("div",{className:"mb-4 space-x-2",children:[n.jsx(re,{onClick:s,children:"Load Sample Content"}),n.jsx(re,{onClick:()=>e(""),variant:"outline",children:"Clear"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsxs(de,{className:"p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"1. Create content in editor:"}),n.jsx(Bx,{content:t,onChange:r=>{console.log("Content changed:",r),e(r)},height:"300px",enableDebugLogs:!1})]}),n.jsxs(de,{className:"p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"2. Raw HTML generated by Quill:"}),n.jsx("div",{className:"bg-gray-900 text-green-400 p-4 rounded font-mono text-xs overflow-auto max-h-[300px]",children:n.jsx("pre",{children:t||"(empty)"})})]})]}),n.jsxs(de,{className:"p-4 mt-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"3. Raw browser rendering (no Quill styles):"}),n.jsx("div",{className:"border p-4 rounded",dangerouslySetInnerHTML:{__html:t}})]}),n.jsxs(de,{className:"p-4 mt-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"4. With ql-editor class (Quill styles):"}),n.jsx("div",{className:"ql-editor border p-4 rounded",dangerouslySetInnerHTML:{__html:t}})]}),n.jsxs(de,{className:"p-4 mt-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"5. With fixed styles:"}),n.jsx("div",{className:"quill-display-content border p-4 rounded",dangerouslySetInnerHTML:{__html:t}})]}),n.jsx("style",{children:`
        /* Fixed styles for display */
        .quill-display-content {
          font-size: 16px;
          line-height: 1.6;
          color: #333;
        }
        
        .quill-display-content h1 { 
          font-size: 2em; 
          margin: 0.5em 0; 
          font-weight: bold; 
        }
        
        .quill-display-content h2 { 
          font-size: 1.5em; 
          margin: 0.5em 0; 
          font-weight: bold; 
        }
        
        .quill-display-content h3 { 
          font-size: 1.17em; 
          margin: 0.5em 0; 
          font-weight: bold; 
        }
        
        .quill-display-content p { 
          margin: 0.5em 0; 
        }
        
        /* Force bullet lists to show bullets */
        .quill-display-content ul {
          list-style: disc !important;
          list-style-type: disc !important;
          margin: 0.5em 0 !important;
          padding-left: 1.5em !important;
        }
        
        .quill-display-content ul li {
          display: list-item !important;
          list-style: disc !important;
          list-style-type: disc !important;
          margin: 0.25em 0 !important;
        }
        
        .quill-display-content ul li::before {
          content: none !important;
        }
        
        /* Force numbered lists */
        .quill-display-content ol {
          list-style: decimal !important;
          list-style-type: decimal !important;
          margin: 0.5em 0 !important;
          padding-left: 1.5em !important;
        }
        
        .quill-display-content ol li {
          display: list-item !important;
          list-style: decimal !important;
          list-style-type: decimal !important;
          margin: 0.25em 0 !important;
        }
        
        .quill-display-content ol li::before {
          content: none !important;
        }
        
        /* Nested lists */
        .quill-display-content ul ul {
          list-style-type: circle !important;
        }
        
        .quill-display-content ul ul ul {
          list-style-type: square !important;
        }
        
        .quill-display-content blockquote {
          border-left: 4px solid #ddd;
          margin: 0.5em 0;
          padding-left: 1em;
          color: #666;
          font-style: italic;
        }
      `})]})}function AV(){const[t,e]=M.useState(""),s=()=>{e(`
      <h1>Testing Text Overflow</h1>
      <p>This is a normal paragraph with regular text that should wrap properly.</p>
      
      <h2>Long URL Test</h2>
      <p>Here's a very long URL that might cause overflow: https://www.example.com/very/long/path/that/continues/forever/and/ever/with/more/segments/and/parameters?param1=value1&param2=value2&param3=value3&param4=value4</p>
      
      <h2>Long Word Test</h2>
      <p>Supercalifragilisticexpialidociousantidisestablishmentarianismfloccinaucinihilipilificationpneumonoultramicroscopicsilicovolcanoconiosis</p>
      
      <h2>Long Continuous Text</h2>
      <p>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</p>
      
      <h2>Normal List</h2>
      <ul>
        <li>Normal bullet point</li>
        <li>Another normal bullet with a very long text that should wrap properly when it reaches the edge of the container</li>
        <li>Short bullet</li>
      </ul>
      
      <h2>List with Long Content</h2>
      <ul>
        <li>https://www.example.com/very/long/url/in/a/list/item/that/might/cause/overflow/problems/if/not/handled/properly</li>
        <li>Verylongwordwithoutanyspacesthatmightcauseoverflowissuesifnothandledproperlyintheeditor</li>
      </ul>
      
      <blockquote>
        This is a blockquote with a very long URL: https://www.example.com/another/very/long/path/in/a/blockquote/element/to/test/overflow/handling
      </blockquote>
    `)},r=()=>{e(`
      <h1>Normal Content Example</h1>
      <p>This is a normal paragraph with regular content that should display nicely without any overflow issues.</p>
      
      <h2>Features List</h2>
      <ul>
        <li>First feature point</li>
        <li>Second feature with more details</li>
        <li>Third feature point</li>
      </ul>
      
      <p>Another paragraph with <strong>bold</strong>, <em>italic</em>, and <u>underlined</u> text.</p>
    `)};return n.jsxs("div",{className:"container mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Text Overflow Test"}),n.jsx("p",{className:"text-gray-600 mb-8",children:"Test how the editor handles long text, URLs, and words that might cause overflow."}),n.jsxs("div",{className:"mb-4 space-x-2",children:[n.jsx(re,{onClick:s,children:"Load Long/Problem Text"}),n.jsx(re,{onClick:r,variant:"outline",children:"Load Normal Text"}),n.jsx(re,{onClick:()=>e(""),variant:"outline",children:"Clear"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsxs(de,{className:"p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2 text-green-600",children:"Editor (Should NOT overflow)"}),n.jsx("div",{className:"border-2 border-red-500 p-1",children:n.jsx(Bx,{content:t,onChange:e,height:"400px",enableDebugLogs:!1})}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Red border shows the container boundary. Text should NOT go outside."})]}),n.jsxs(de,{className:"p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2 text-blue-600",children:"Display (Should also NOT overflow)"}),n.jsx("div",{className:"border-2 border-red-500 p-4 overflow-hidden",children:n.jsx(Ey,{content:t})}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Red border shows the container boundary. Text should wrap properly."})]})]}),n.jsx("div",{className:"mt-8",children:n.jsxs(de,{className:"p-6 bg-yellow-50",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"What to Check:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Long URLs should wrap or be truncated"}),n.jsx("li",{children:"Long words should break when necessary"}),n.jsx("li",{children:"Continuous text without spaces should wrap"}),n.jsx("li",{children:"All content should stay within the red borders"}),n.jsx("li",{children:"Horizontal scrollbar should NOT appear"})]})]})})]})}function CV(){const t=`
    <p>Normal paragraph</p>
    <ul>
      <li>First bullet point</li>
      <li>Second bullet point</li>  
      <li>Third bullet point</li>
    </ul>
    <p>Another paragraph</p>
  `;return n.jsxs("div",{className:"p-4 border rounded",children:[n.jsx("h3",{className:"font-bold mb-4",children:"Bullet Test Component"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"font-semibold text-sm",children:"Test 1: Raw HTML"}),n.jsx("div",{className:"border p-2 bg-gray-50",dangerouslySetInnerHTML:{__html:t}})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"font-semibold text-sm",children:"Test 2: bullets-fixed class"}),n.jsx("div",{className:"bullets-fixed border p-2 bg-blue-50",dangerouslySetInnerHTML:{__html:t}})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"font-semibold text-sm",children:"Test 3: Forced inline styles"}),n.jsxs("div",{className:"border p-2 bg-green-50",children:[n.jsx("p",{children:"Normal paragraph"}),n.jsxs("ul",{style:{listStyle:"none",listStyleType:"none",paddingLeft:0,margin:"0.5em 0"},children:[n.jsxs("li",{style:{listStyle:"none",listStyleType:"none",position:"relative",paddingLeft:"1.5em",margin:"0.25em 0",display:"block"},children:[n.jsx("span",{style:{position:"absolute",left:0,top:0,fontWeight:"bold"},children:""}),"First forced bullet"]}),n.jsxs("li",{style:{listStyle:"none",listStyleType:"none",position:"relative",paddingLeft:"1.5em",margin:"0.25em 0",display:"block"},children:[n.jsx("span",{style:{position:"absolute",left:0,top:0,fontWeight:"bold"},children:""}),"Second forced bullet"]})]})]})]}),n.jsx("style",{children:`
        .bullets-fixed ul {
          list-style: none !important;
          list-style-type: none !important;
          padding-left: 0 !important;
          margin: 0.5em 0 !important;
        }
        
        .bullets-fixed ul li {
          list-style: none !important;
          list-style-type: none !important;
          position: relative !important;
          padding-left: 1.5em !important;
          margin: 0.25em 0 !important;
          display: block !important;
        }
        
        .bullets-fixed ul li::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
          top: 0 !important;
          font-weight: bold !important;
          color: currentColor !important;
        }
        
        .bullets-fixed ul li::marker {
          display: none !important;
          content: none !important;
          visibility: hidden !important;
        }
      `})]})}function kV(){const t=`
    <p>Paragraph before list</p>
    <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
    <p>Paragraph after list</p>
  `,e=t.replace(/<ul>/g,'<div class="forced-bullet-list">').replace(/<\/ul>/g,"</div>").replace(/<li>/g,'<div class="forced-bullet-item">').replace(/<\/li>/g,"</div>");return n.jsxs("div",{className:"p-6 space-y-8 bg-white border rounded",children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Forced Bullet Test - Step by Step"}),n.jsxs("div",{className:"border-2 border-red-200 p-4 rounded",children:[n.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Step 1: Raw HTML (problematic)"}),n.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded mb-2",children:t}),n.jsx("div",{className:"border p-3 bg-red-50",dangerouslySetInnerHTML:{__html:t}}),n.jsx("p",{className:"text-sm text-red-600 mt-2",children:" This probably shows numbers instead of bullets"})]}),n.jsxs("div",{className:"border-2 border-blue-200 p-4 rounded",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Step 2: Converted HTML (should work)"}),n.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded mb-2",children:e}),n.jsx("div",{className:"border p-3 bg-blue-50",dangerouslySetInnerHTML:{__html:e}}),n.jsx("p",{className:"text-sm text-blue-600 mt-2",children:" This should show bullet points ()"})]}),n.jsxs("div",{className:"border-2 border-green-200 p-4 rounded",children:[n.jsx("h3",{className:"text-lg font-semibold text-green-700 mb-2",children:"Step 3: Manual HTML (guaranteed to work)"}),n.jsxs("div",{className:"border p-3 bg-green-50",children:[n.jsx("p",{children:"Paragraph before list"}),n.jsxs("div",{className:"forced-bullet-list",children:[n.jsx("div",{className:"forced-bullet-item",children:"Manual Item 1"}),n.jsx("div",{className:"forced-bullet-item",children:"Manual Item 2"}),n.jsx("div",{className:"forced-bullet-item",children:"Manual Item 3"})]}),n.jsx("p",{children:"Paragraph after list"})]}),n.jsx("p",{className:"text-sm text-green-600 mt-2",children:" This is manually coded and MUST work"})]}),n.jsxs("div",{className:"border-2 border-purple-200 p-4 rounded",children:[n.jsx("h3",{className:"text-lg font-semibold text-purple-700 mb-2",children:"Step 4: CSS Debug"}),n.jsx("p",{className:"text-sm mb-2",children:"Check browser DevTools for these styles:"}),n.jsx("pre",{className:"text-xs bg-purple-50 p-2 rounded",children:`.forced-bullet-list { margin: 0.5em 0; padding-left: 0; }
.forced-bullet-item { position: relative; padding-left: 1.5em; margin: 0.25em 0; }
.forced-bullet-item::before { content: ""; position: absolute; left: 0; }`})]}),n.jsx("style",{children:`
        .forced-bullet-list {
          margin: 0.5em 0 !important;
          padding-left: 0 !important;
        }
        
        .forced-bullet-item {
          position: relative !important;
          padding-left: 1.5em !important;
          margin: 0.25em 0 !important;
          display: block !important;
        }
        
        .forced-bullet-item::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
          top: 0 !important;
          color: currentColor !important;
          font-weight: bold !important;
          display: inline-block !important;
          width: 1em !important;
          font-size: 1em !important;
        }
        
        /* Force hide any potential markers on UL/LI */
        ul {
          list-style: none !important;
          list-style-type: none !important;
        }
        
        ul li {
          list-style: none !important;
          list-style-type: none !important;
        }
        
        ul li::marker {
          display: none !important;
          content: none !important;
          visibility: hidden !important;
        }
        
        ul li::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
          color: red !important;
          font-weight: bold !important;
        }
      `})]})}function TV(){const[t,e]=M.useState(""),s=M.useRef(null),r=M.useRef(null);M.useEffect(()=>{if(!s.current||r.current)return;const h=new be(s.current,{theme:"snow",placeholder:"Type something and click the bullet list button...",modules:{toolbar:[["bold","italic"],[{list:"bullet"},{list:"ordered"}],["clean"]]}});h.on("text-change",()=>{const f=h.root.innerHTML;console.log("HTML generated:",f),e(f)}),r.current=h},[]);const a=()=>{r.current&&(r.current.root.innerHTML=`
        <p>Before list</p>
        <ul>
          <li>First bullet point</li>
          <li>Second bullet point</li>
          <li>Third bullet point</li>
        </ul>
        <p>After list</p>
      `,e(r.current.root.innerHTML))},o=()=>{r.current&&(r.current.root.innerHTML=`
        <p>Before list</p>
        <ol>
          <li>First numbered item</li>
          <li>Second numbered item</li>
          <li>Third numbered item</li>
        </ol>
        <p>After list</p>
      `,e(r.current.root.innerHTML))},u=()=>{if(r.current){const h=r.current.getSelection();if(h){const[f]=r.current.getLine(h.index),m=r.current.getFormat(h);console.log("Current formats:",m),console.log("Current line:",f)}}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-8",children:"List Debug Tool"}),n.jsx(kV,{}),n.jsx(CV,{}),n.jsx("div",{className:"my-8 border-t pt-8",children:n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Quill Editor Test"})}),n.jsxs("div",{className:"mb-4 space-x-2",children:[n.jsx(re,{onClick:a,children:"Insert Bullet List"}),n.jsx(re,{onClick:o,children:"Insert Numbered List"}),n.jsx(re,{onClick:()=>e(""),variant:"outline",children:"Clear"}),n.jsx(re,{onClick:u,variant:"outline",children:"Check Current Format"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[n.jsxs(de,{className:"p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"1. Quill Editor"}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Try clicking the bullet list button () in the toolbar"}),n.jsx("div",{ref:s,style:{height:"300px"},className:"bg-white"})]}),n.jsxs(de,{className:"p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"2. Raw HTML Output"}),n.jsx("div",{className:"bg-gray-900 text-green-400 p-2 rounded font-mono text-xs overflow-auto h-[300px]",children:n.jsx("pre",{children:t||"(empty)"})}),n.jsxs("div",{className:"mt-2 text-xs",children:[n.jsx("p",{className:"text-blue-600",children:"Look for: <ul> = bullets"}),n.jsx("p",{className:"text-orange-600",children:"Look for: <ol> = numbers"})]})]}),n.jsxs(de,{className:"p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"3. Browser Rendering"}),n.jsx("div",{className:"rendered-content border p-4 rounded min-h-[300px]",dangerouslySetInnerHTML:{__html:t}})]})]}),n.jsx("div",{className:"mt-8",children:n.jsxs(de,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"QuillContentUltraFixed Test"}),t&&n.jsxs("div",{className:"border p-4 rounded bg-yellow-50",children:[n.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Using QuillContentUltraFixed Component:"}),n.jsx(vE,{content:t})]})]})}),n.jsx("div",{className:"grid grid-cols-1 gap-4 mt-6",children:n.jsxs(de,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Direct HTML Conversion Test"}),n.jsx("div",{className:"bg-green-50 border p-4 rounded",children:n.jsxs("div",{className:"custom-bullet-list",children:[n.jsx("div",{className:"custom-bullet-item",children:"First bullet converted to div"}),n.jsx("div",{className:"custom-bullet-item",children:"Second bullet converted to div"}),n.jsx("div",{className:"custom-bullet-item",children:"Third bullet converted to div"})]})}),n.jsx("style",{children:`
            .custom-bullet-list {
              margin: 0.5em 0 !important;
              padding-left: 0 !important;
            }
            
            .custom-bullet-item {
              position: relative !important;
              padding-left: 1.5em !important;
              margin: 0.25em 0 !important;
              display: block !important;
            }
            
            .custom-bullet-item::before {
              content: "" !important;
              position: absolute !important;
              left: 0 !important;
              top: 0 !important;
              color: currentColor !important;
              font-weight: bold !important;
              display: inline-block !important;
              width: 1em !important;
            }
          `})]})}),n.jsxs(de,{className:"p-6 mt-8",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4",children:"What Should Happen:"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-blue-600",children:"Bullet List Button ()"}),n.jsxs("ul",{className:"list-disc list-inside mt-2",children:[n.jsx("li",{children:"Should create <ul> tags"}),n.jsx("li",{children:"Should show bullet points"}),n.jsx("li",{children:"HTML should contain <ul><li>...</li></ul>"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-orange-600",children:"Numbered List Button (1.)"}),n.jsxs("ul",{className:"list-disc list-inside mt-2",children:[n.jsx("li",{children:"Should create <ol> tags"}),n.jsx("li",{children:"Should show numbers (1, 2, 3...)"}),n.jsx("li",{children:"HTML should contain <ol><li>...</li></ol>"})]})]})]})]}),n.jsxs(de,{className:"p-6 mt-4 bg-yellow-50",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"CSS Interference Check:"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Raw UL (should show bullets):"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Item 1"}),n.jsx("li",{children:"Item 2"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Raw OL (should show numbers):"}),n.jsxs("ol",{children:[n.jsx("li",{children:"Item 1"}),n.jsx("li",{children:"Item 2"})]})]})]})]}),n.jsx("style",{children:`
        /* Disable native list styles completely */
        .rendered-content ul {
          list-style: none !important;
          list-style-type: none !important;
          padding-left: 0 !important;
          margin: 0.5em 0 !important;
        }
        
        .rendered-content ul li {
          list-style: none !important;
          list-style-type: none !important;
          display: block !important;
          position: relative !important;
          padding-left: 1.5em !important;
          margin: 0.25em 0 !important;
        }
        
        /* Create custom bullet with ::before */
        .rendered-content ul li::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
          top: 0 !important;
          color: inherit !important;
          font-weight: bold !important;
          display: inline-block !important;
          width: 1em !important;
        }
        
        /* Hide native ::marker completely */
        .rendered-content ul li::marker {
          content: none !important;
          display: none !important;
        }
        
        /* Nested bullets */
        .rendered-content ul ul li::before {
          content: "" !important;
        }
        
        .rendered-content ul ul ul li::before {
          content: "" !important;
        }
        
        /* OL keeps normal behavior */
        .rendered-content ol {
          list-style-type: decimal !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
        }
        
        .rendered-content ol li {
          display: list-item !important;
          list-style-type: decimal !important;
          margin: 0.25em 0 !important;
        }
        
        .rendered-content ol li::before {
          content: none !important;
          display: none !important;
        }
      `})]})}const OV=Hs.forwardRef(({className:t,variant:e="default",...s},r)=>n.jsx("div",{ref:r,className:yi("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{"bg-primary text-primary-foreground hover:bg-primary/80":e==="default","bg-secondary text-secondary-foreground hover:bg-secondary/80":e==="secondary","bg-destructive text-destructive-foreground hover:bg-destructive/80":e==="destructive","text-foreground":e==="outline"},t),...s}));OV.displayName="Badge";function RV({isOpen:t,onClose:e,duplicate:s,onMergeComplete:r}){const[a,o]=M.useState(null),[u,h]=M.useState(null),[f,m]=M.useState(!0),[g,x]=M.useState(!1),[v,_]=M.useState(""),[b,N]=M.useState({}),[w,E]=M.useState({merge_cpd_activities:!0,merge_event_registrations:!0,merge_payments:!0,sum_cpd_points:!0});M.useEffect(()=>{t&&s&&A()},[t,s]);const A=async()=>{try{m(!0);const[S,k,z,R]=await Promise.all([V.from("members").select("*").eq("id",s.member1_id).single(),V.from("members").select("*").eq("id",s.member2_id).single(),V.from("cpd_activities").select("*",{count:"exact"}).eq("member_id",s.member1_id).eq("status","approved"),V.from("cpd_activities").select("*",{count:"exact"}).eq("member_id",s.member2_id).eq("status","approved")]);if(S.error||k.error)throw new Error("Failed to load member details");const D={...S.data,cpd_activities_count:z.count||0,cpd_points_total:z.data?.reduce((q,Z)=>q+(Z.points||0),0)||0},P={...k.data,cpd_activities_count:R.count||0,cpd_points_total:R.data?.reduce((q,Z)=>q+(Z.points||0),0)||0};o(D),h(P);const H=O(D),J=O(P);_(H>=J?D.id:P.id),F(D,P,H>=J?"member1":"member2")}catch(S){console.error("Error loading member details:",S),ae("error","Failed to load member details"),e()}finally{m(!1)}},O=S=>{let k=0;return["first_name","last_name","email","phone","mobile","company_name","street_address","suburb","postcode","state","bio"].forEach(R=>{S[R]&&k++}),k+=Math.min(S.cpd_activities_count||0,5),k},F=(S,k,z)=>{const R=["first_name","last_name","email","phone","mobile","company_name","street_address","suburb","postcode","state","country","bio","membership_status","membership_type","subscriptions"],D={};R.forEach(P=>{const H=S[P],J=k[P];H&&!J?D[P]="member1":!H&&J?D[P]="member2":D[P]=z}),N(D)},C=S=>{N(k=>({...k,[S]:k[S]==="member1"?"member2":"member1"}))},L=async()=>{if(!(!a||!u))try{x(!0);const S={primary_member_id:v,fields_to_keep:Object.keys(b).reduce((k,z)=>{const R=v===a.id&&b[z]==="member1"||v===u.id&&b[z]==="member2";return{...k,[z]:R}},{}),relationships:w};await Ec.mergeMembers(s.id,S),ae("success","Members merged successfully"),r()}catch(S){console.error("Error merging members:",S),ae("error","Failed to merge members")}finally{x(!1)}},B=(S,k,z,R)=>{const D=a?.[S],P=u?.[S];if(!D&&!P)return null;const H=b[S],J=D&&P&&D!==P;return n.jsxs("div",{className:"border-b border-gray-200 pb-3 mb-3 last:border-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[z,n.jsx("span",{className:"text-sm font-medium text-gray-700",children:k})]}),J&&n.jsx(re,{size:"sm",variant:"ghost",onClick:()=>C(S),className:"text-xs",children:"Switch"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:`p-2 rounded-md transition-all ${!J&&D||J&&H==="member1"?"bg-blue-50 border border-blue-300":"bg-gray-50 opacity-50"}`,children:[n.jsx("p",{className:"text-sm",children:D?String(D):"-"}),J&&H==="member1"&&n.jsx(Zl,{className:"w-3 h-3 text-blue-600 mt-1"})]}),n.jsxs("div",{className:`p-2 rounded-md transition-all ${!J&&P&&!D||J&&H==="member2"?"bg-blue-50 border border-blue-300":"bg-gray-50 opacity-50"}`,children:[n.jsx("p",{className:"text-sm",children:P?String(P):"-"}),J&&H==="member2"&&n.jsx(Zl,{className:"w-3 h-3 text-blue-600 mt-1"})]})]})]})};return t?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs(de,{className:"w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Merge Duplicate Members"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Review and select which information to keep from each member"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:e,children:n.jsx(fn,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"mt-4",children:n.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${s.similarity_score>=90?"bg-red-100 text-red-800":s.similarity_score>=70?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:["Similarity Score: ",s.similarity_score,"%"]})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:f?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a&&u?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(ta,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx(xe,{className:"text-yellow-800",children:"Select Primary Member"}),n.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"The primary member will be kept, and the other will be deleted after merging data."}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"primary",value:a.id,checked:v===a.id,onChange:S=>_(S.target.value),className:"text-blue-600"}),n.jsxs("span",{className:"text-sm font-medium",children:[a.first_name," ",a.last_name," (Member 1)"]})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"primary",value:u.id,checked:v===u.id,onChange:S=>_(S.target.value),className:"text-blue-600"}),n.jsxs("span",{className:"text-sm font-medium",children:[u.first_name," ",u.last_name," (Member 2)"]})]})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:`p-4 rounded-lg ${v===a.id?"bg-blue-50 border-2 border-blue-300":"bg-gray-50"}`,children:[n.jsxs("h3",{className:"font-semibold mb-2",children:["Member 1 ",v===a.id&&"(Primary)"]}),n.jsx("p",{className:"text-sm text-gray-600",children:a.email}),n.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-500",children:[n.jsxs("span",{children:["CPD: ",a.cpd_activities_count," activities"]}),n.jsxs("span",{children:[a.cpd_points_total," points"]})]})]}),n.jsxs("div",{className:`p-4 rounded-lg ${v===u.id?"bg-blue-50 border-2 border-blue-300":"bg-gray-50"}`,children:[n.jsxs("h3",{className:"font-semibold mb-2",children:["Member 2 ",v===u.id&&"(Primary)"]}),n.jsx("p",{className:"text-sm text-gray-600",children:u.email}),n.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-500",children:[n.jsxs("span",{children:["CPD: ",u.cpd_activities_count," activities"]}),n.jsxs("span",{children:[u.cpd_points_total," points"]})]})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Select Fields to Keep"}),B("first_name","First Name",n.jsx(Ji,{className:"w-4 h-4"})),B("last_name","Last Name",n.jsx(Ji,{className:"w-4 h-4"})),B("email","Email",n.jsx(qm,{className:"w-4 h-4"})),B("phone","Phone",n.jsx(rj,{className:"w-4 h-4"})),B("mobile","Mobile",n.jsx(rj,{className:"w-4 h-4"})),B("company_name","Company",n.jsx(Ed,{className:"w-4 h-4"})),B("street_address","Street Address",n.jsx(fi,{className:"w-4 h-4"})),B("suburb","Suburb",n.jsx(fi,{className:"w-4 h-4"})),B("postcode","Postcode",n.jsx(fi,{className:"w-4 h-4"})),B("state","State",n.jsx(fi,{className:"w-4 h-4"})),B("membership_status","Membership Status",n.jsx(js,{className:"w-4 h-4"})),B("membership_type","Membership Type",n.jsx(js,{className:"w-4 h-4"}))]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Data Transfer Options"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:w.merge_cpd_activities,onChange:S=>E(k=>({...k,merge_cpd_activities:S.target.checked})),className:"rounded text-blue-600"}),n.jsx("span",{className:"text-sm",children:"Transfer all CPD activities to primary member"})]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:w.merge_event_registrations,onChange:S=>E(k=>({...k,merge_event_registrations:S.target.checked})),className:"rounded text-blue-600"}),n.jsx("span",{className:"text-sm",children:"Transfer all event registrations to primary member"})]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:w.sum_cpd_points,onChange:S=>E(k=>({...k,sum_cpd_points:S.target.checked})),className:"rounded text-blue-600"}),n.jsx("span",{className:"text-sm",children:"Combine CPD points from both members"})]})]})]})]}):null}),n.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-between items-center",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx(ta,{className:"w-4 h-4 inline mr-1"}),"This action cannot be automatically undone after 30 days"]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(re,{variant:"outline",onClick:e,disabled:g,children:"Cancel"}),n.jsx(re,{onClick:L,disabled:f||g||!v,children:g?"Merging...":"Merge Members"})]})]})]})}):null}function MV(){const[t,e]=M.useState([]),[s,r]=M.useState([]),[a,o]=M.useState(!0),[u,h]=M.useState(!1),[f,m]=M.useState(""),[g,x]=M.useState(0),[v,_]=M.useState(null),[b,N]=M.useState(!1);M.useEffect(()=>{w()},[]),M.useEffect(()=>{E()},[t,f,g]);const w=async()=>{try{o(!0);const B=await Ec.getPendingDuplicates();e(B)}catch(B){console.error("Error loading duplicates:",B),ae("error","Failed to load duplicates")}finally{o(!1)}},E=()=>{let B=[...t];if(g>0&&(B=B.filter(S=>S.similarity_score>=g)),f){const S=f.toLowerCase();B=B.filter(k=>k.member1_first_name?.toLowerCase().includes(S)||k.member1_last_name?.toLowerCase().includes(S)||k.member1_email?.toLowerCase().includes(S)||k.member2_first_name?.toLowerCase().includes(S)||k.member2_last_name?.toLowerCase().includes(S)||k.member2_email?.toLowerCase().includes(S))}r(B)},A=async()=>{try{h(!0),ae("info","Scanning for duplicates...");const B=await Ec.findAllDuplicates(50);for(const S of B)await Ec.saveDuplicate(S);ae("success",`Found ${B.length} potential duplicates`),await w()}catch(B){console.error("Error scanning for duplicates:",B),ae("error","Failed to scan for duplicates")}finally{h(!1)}},O=async(B,S)=>{try{await Ec.reviewDuplicate(B,S),await w()}catch(k){console.error(`Error marking as ${S}:`,k),ae("error",`Failed to mark as ${S.replace("_"," ")}`)}},F=B=>{_(B),N(!0)},C=B=>B>=90?"bg-red-100 text-red-800":B>=70?"bg-orange-100 text-orange-800":B>=50?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",L=B=>{const S=[];return B.exact_name?S.push({label:"Exact Name",color:"bg-green-100 text-green-800"}):B.similar_name&&S.push({label:"Similar Name",color:"bg-blue-100 text-blue-800"}),B.same_company&&S.push({label:"Same Company",color:"bg-purple-100 text-purple-800"}),B.similar_email&&S.push({label:"Similar Email",color:"bg-indigo-100 text-indigo-800"}),B.same_phone&&S.push({label:"Same Phone",color:"bg-pink-100 text-pink-800"}),B.same_address&&S.push({label:"Same Address",color:"bg-cyan-100 text-cyan-800"}),S};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Member Duplicates Management"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Review and merge potential duplicate member records"})]}),n.jsx(re,{onClick:A,disabled:u,className:"mt-4 md:mt-0",children:u?n.jsxs(n.Fragment,{children:[n.jsx(hn,{className:"w-4 h-4 mr-2 animate-spin"}),"Scanning..."]}):n.jsxs(n.Fragment,{children:[n.jsx(tl,{className:"w-4 h-4 mr-2"}),"Scan for Duplicates"]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(de,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Duplicates"}),n.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),n.jsx(zr,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx(de,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"High Confidence"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:t.filter(B=>B.similarity_score>=90).length})]}),n.jsx(Xa,{className:"w-8 h-8 text-red-500"})]})}),n.jsx(de,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Medium Confidence"}),n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:t.filter(B=>B.similarity_score>=70&&B.similarity_score<90).length})]}),n.jsx(Xa,{className:"w-8 h-8 text-orange-500"})]})}),n.jsx(de,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Low Confidence"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:t.filter(B=>B.similarity_score>=50&&B.similarity_score<70).length})]}),n.jsx(Xa,{className:"w-8 h-8 text-yellow-500"})]})})]}),n.jsx(de,{className:"p-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(tl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx(Ae,{placeholder:"Search by name or email...",value:f,onChange:B=>m(B.target.value),className:"pl-10"})]})}),n.jsx("div",{className:"w-48",children:n.jsxs("select",{value:g,onChange:B=>x(Number(B.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"0",children:"All Scores"}),n.jsx("option",{value:"50",children:"Score  50"}),n.jsx("option",{value:"70",children:"Score  70"}),n.jsx("option",{value:"90",children:"Score  90"})]})})]})}),a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(hn,{className:"w-8 h-8 animate-spin text-blue-500"})}):s.length===0?n.jsxs(de,{className:"p-8 text-center",children:[n.jsx(ho,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Duplicates Found"}),n.jsx("p",{className:"text-gray-600",children:t.length===0?"No potential duplicates detected. Click 'Scan for Duplicates' to search.":"No duplicates match your current filters."})]}):n.jsx("div",{className:"space-y-4",children:s.map(B=>n.jsx(de,{className:"p-6 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:[B.member1_first_name," ",B.member1_last_name]}),n.jsx("p",{className:"text-sm text-gray-600",children:B.member1_email}),B.member1_company&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:B.member1_company})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:[B.member2_first_name," ",B.member2_last_name]}),n.jsx("p",{className:"text-sm text-gray-600",children:B.member2_email}),B.member2_company&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:B.member2_company})]})]}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[n.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${C(B.similarity_score)}`,children:["Score: ",B.similarity_score,"%"]}),L(B.match_details).map((S,k)=>n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${S.color}`,children:S.label},k))]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Detected on ",Ft(new Date(B.created_at),"MMM d, yyyy")]})]}),n.jsxs("div",{className:"flex flex-row lg:flex-col gap-2",children:[n.jsxs(re,{onClick:()=>F(B),size:"sm",className:"flex-1",children:[n.jsx(Zl,{className:"w-4 h-4 mr-1"}),"Merge"]}),n.jsxs(re,{onClick:()=>O(B.id,"not_duplicate"),size:"sm",variant:"outline",className:"flex-1",children:[n.jsx(fn,{className:"w-4 h-4 mr-1"}),"Not Duplicate"]}),n.jsxs(re,{onClick:()=>O(B.id,"skipped"),size:"sm",variant:"ghost",className:"flex-1",children:[n.jsx(ZP,{className:"w-4 h-4 mr-1"}),"Skip"]})]})]})},B.id))})]}),b&&v&&n.jsx(RV,{isOpen:b,onClose:()=>{N(!1),_(null)},duplicate:v,onMergeComplete:()=>{N(!1),_(null),w()}})]})}const DV=()=>{Ns();const{user:t}=jt(),[e,s]=M.useState([]),[r,a]=M.useState(new Set),[o,u]=M.useState(!0),[h,f]=M.useState(!1),[m,g]=M.useState(""),[x,v]=M.useState("all"),[_,b]=M.useState({total:0,active:0,inactive:0,expired:0});M.useEffect(()=>{w(),N()},[]);const N=async()=>{try{const{count:L}=await V.from("members").select("*",{count:"exact",head:!0}),{count:B}=await V.from("members").select("*",{count:"exact",head:!0}).eq("membership_status","active"),{count:S}=await V.from("members").select("*",{count:"exact",head:!0}).eq("membership_status","inactive"),{count:k}=await V.from("members").select("*",{count:"exact",head:!0}).eq("membership_status","expired");b({total:L||0,active:B||0,inactive:S||0,expired:k||0})}catch(L){console.error("Error loading stats:",L)}},w=async()=>{try{u(!0);let L=V.from("members").select("*").order("created_at",{ascending:!1});x!=="all"&&(L=L.eq("membership_status",x));const{data:B,error:S}=await L;if(S)throw S;s(B||[])}catch(L){console.error("Error loading members:",L),ae("error","Failed to load members")}finally{u(!1)}},E=L=>{const B=new Set(r);B.has(L)?B.delete(L):B.add(L),a(B)},A=()=>{r.size===O.length?a(new Set):a(new Set(O.map(L=>L.id)))},O=e.filter(L=>L.first_name?.toLowerCase().includes(m.toLowerCase())||L.last_name?.toLowerCase().includes(m.toLowerCase())||L.email?.toLowerCase().includes(m.toLowerCase())||L.company_name?.toLowerCase().includes(m.toLowerCase())),F=async()=>{if(r.size===0){ae("warning","No members selected");return}if(!(!(await Et.fire({title:"Delete Selected Members?",html:`
        <div class="text-left">
          <p class="mb-4">You are about to delete <strong>${r.size}</strong> member(s).</p>
          <p class="mb-2"><strong>This will permanently delete:</strong></p>
          <ul class="list-disc list-inside text-sm">
            <li>Member profiles</li>
            <li>CPD activities and points</li>
            <li>Event registrations</li>
            <li>Payment records</li>
            <li>All related data</li>
          </ul>
          <p class="mt-4 text-red-600"><strong>This action cannot be undone!</strong></p>
        </div>
      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete them!",cancelButtonText:"Cancel"})).isConfirmed||!(await Et.fire({title:"Are you absolutely sure?",text:`Type "DELETE" to confirm deletion of ${r.size} member(s)`,input:"text",inputPlaceholder:"Type DELETE to confirm",showCancelButton:!0,confirmButtonColor:"#dc2626",confirmButtonText:"Delete",cancelButtonText:"Cancel",inputValidator:S=>{if(S!=="DELETE")return"You must type DELETE to confirm"}})).isConfirmed))try{f(!0);const{data:S}=await V.from("members").select("id").eq("user_id",t?.id).single(),k=Array.from(r).filter(D=>D!==S?.id);if(k.length===0){ae("warning","Cannot delete your own account");return}const z=10;let R=0;for(let D=0;D<k.length;D+=z){const P=k.slice(D,D+z),{error:H}=await V.from("members").delete().in("id",P);if(H)throw H;R+=P.length,ae("info",`Deleted ${R} of ${k.length} members...`)}ae("success",`Successfully deleted ${R} member(s)`),await w(),await N(),a(new Set)}catch(S){console.error("Error deleting members:",S),ae("error","Failed to delete members")}finally{f(!1)}},C=async()=>{if(!(!(await Et.fire({title:" EXTREME CAUTION ",html:`
        <div class="text-left">
          <p class="mb-4 text-red-600 font-bold">This will delete ALL ${_.total} members from the system!</p>
          <p class="mb-2"><strong>Everything will be permanently deleted:</strong></p>
          <ul class="list-disc list-inside text-sm">
            <li>All member profiles</li>
            <li>All CPD activities and points</li>
            <li>All event registrations</li>
            <li>All payment records</li>
            <li>All companies and memberships</li>
            <li>ALL related data</li>
          </ul>
          <p class="mt-4 text-red-600"><strong> THIS CANNOT BE UNDONE! </strong></p>
          <p class="mt-2 text-sm">Only your account will be preserved.</p>
        </div>
      `,icon:"error",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"I understand, continue",cancelButtonText:"Cancel"})).isConfirmed||!(await Et.fire({title:"Final Confirmation",text:'Type "DELETE ALL MEMBERS" to confirm complete database cleanup',input:"text",inputPlaceholder:"Type DELETE ALL MEMBERS to confirm",showCancelButton:!0,confirmButtonColor:"#dc2626",confirmButtonText:"Delete Everything",cancelButtonText:"Cancel",inputValidator:S=>{if(S!=="DELETE ALL MEMBERS")return"You must type DELETE ALL MEMBERS to confirm"}})).isConfirmed))try{f(!0),ae("info","Starting complete database cleanup...");const{data:S}=await V.from("members").select("id").eq("user_id",t?.id).single();if(!S){ae("error","Could not identify current user");return}const{error:k}=await V.from("members").delete().neq("id",S.id);if(k)throw k;await V.from("cpd_activities").delete().is("member_id",null),await V.from("event_registrations").delete().neq("user_id",t?.id),ae("success","Database cleaned successfully! Only your account remains."),await w(),await N(),a(new Set)}catch(S){console.error("Error cleaning database:",S),ae("error","Failed to clean database")}finally{f(!1)}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bulk Member Management"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Manage and clean up member data in bulk (Super Admin only)"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsxs(de,{className:"p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:_.total}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Members"})]}),n.jsxs(de,{className:"p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:_.active}),n.jsx("div",{className:"text-sm text-gray-600",children:"Active"})]}),n.jsxs(de,{className:"p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:_.inactive}),n.jsx("div",{className:"text-sm text-gray-600",children:"Inactive"})]}),n.jsxs(de,{className:"p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:_.expired}),n.jsx("div",{className:"text-sm text-gray-600",children:"Expired"})]})]}),n.jsx(de,{className:"p-4 mb-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(tl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),n.jsx("input",{type:"text",placeholder:"Search members...",value:m,onChange:L=>g(L.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("select",{value:x,onChange:L=>v(L.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"expired",children:"Expired"})]}),n.jsx(re,{variant:"outline",onClick:w,disabled:o,children:n.jsx(Ad,{className:`h-4 w-4 ${o?"animate-spin":""}`})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(re,{variant:"destructive",onClick:F,disabled:r.size===0||h,children:[n.jsx(Qc,{className:"h-4 w-4 mr-2"}),"Delete Selected (",r.size,")"]}),n.jsxs(re,{variant:"destructive",onClick:C,disabled:h||_.total===0,className:"bg-red-600 hover:bg-red-700",children:[n.jsx(Xa,{className:"h-4 w-4 mr-2"}),"Delete All Members"]})]})]})}),n.jsx(de,{className:"overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left",children:n.jsxs("button",{onClick:A,className:"flex items-center gap-2 hover:text-blue-600",children:[r.size===O.length&&O.length>0?n.jsx(nj,{className:"h-4 w-4"}):n.jsx(ij,{className:"h-4 w-4"}),"Select All"]})}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Company"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:o?n.jsx("tr",{children:n.jsxs("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),"Loading members..."]})}):O.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No members found"})}):O.map(L=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsx("button",{onClick:()=>E(L.id),className:"hover:text-blue-600",children:r.has(L.id)?n.jsx(nj,{className:"h-4 w-4"}):n.jsx(ij,{className:"h-4 w-4"})})}),n.jsxs("td",{className:"px-4 py-3 text-sm",children:[L.first_name," ",L.last_name]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:L.email}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:L.company_name||"-"}),n.jsx("td",{className:"px-4 py-3 text-sm",children:n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100",children:L.membership_type||"Basic"})}),n.jsx("td",{className:"px-4 py-3 text-sm",children:n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${L.membership_status==="active"?"bg-green-100 text-green-800":L.membership_status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:L.membership_status||"Unknown"})}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(L.created_at).toLocaleDateString()})]},L.id))})]})})}),n.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Xa,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-yellow-900",children:"Important Notice"}),n.jsx("p",{className:"text-sm text-yellow-800 mt-1",children:"Bulk deletion is permanent and cannot be undone. All related data including CPD activities, event registrations, and payment records will also be deleted. Your own account will never be deleted."})]})]})})]})};function jA(t,e){return function(){return t.apply(e,arguments)}}const{toString:LV}=Object.prototype,{getPrototypeOf:zx}=Object,{iterator:Gm,toStringTag:NA}=Symbol,Zm=(t=>e=>{const s=LV.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Hn=t=>(t=t.toLowerCase(),e=>Zm(e)===t),Ym=t=>e=>typeof e===t,{isArray:eu}=Array,Ld=Ym("undefined");function nh(t){return t!==null&&!Ld(t)&&t.constructor!==null&&!Ld(t.constructor)&&Sr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const SA=Hn("ArrayBuffer");function qV(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&SA(t.buffer),e}const PV=Ym("string"),Sr=Ym("function"),EA=Ym("number"),ih=t=>t!==null&&typeof t=="object",IV=t=>t===!0||t===!1,Ff=t=>{if(Zm(t)!=="object")return!1;const e=zx(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(NA in t)&&!(Gm in t)},$V=t=>{if(!ih(t)||nh(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},UV=Hn("Date"),BV=Hn("File"),zV=Hn("Blob"),FV=Hn("FileList"),HV=t=>ih(t)&&Sr(t.pipe),VV=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Sr(t.append)&&((e=Zm(t))==="formdata"||e==="object"&&Sr(t.toString)&&t.toString()==="[object FormData]"))},GV=Hn("URLSearchParams"),[ZV,YV,KV,WV]=["ReadableStream","Request","Response","Headers"].map(Hn),QV=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ah(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let r,a;if(typeof t!="object"&&(t=[t]),eu(t))for(r=0,a=t.length;r<a;r++)e.call(null,t[r],r,t);else{if(nh(t))return;const o=s?Object.getOwnPropertyNames(t):Object.keys(t),u=o.length;let h;for(r=0;r<u;r++)h=o[r],e.call(null,t[h],h,t)}}function AA(t,e){if(nh(t))return null;e=e.toLowerCase();const s=Object.keys(t);let r=s.length,a;for(;r-- >0;)if(a=s[r],e===a.toLowerCase())return a;return null}const Yl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,CA=t=>!Ld(t)&&t!==Yl;function Ay(){const{caseless:t}=CA(this)&&this||{},e={},s=(r,a)=>{const o=t&&AA(e,a)||a;Ff(e[o])&&Ff(r)?e[o]=Ay(e[o],r):Ff(r)?e[o]=Ay({},r):eu(r)?e[o]=r.slice():e[o]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&ah(arguments[r],s);return e}const XV=(t,e,s,{allOwnKeys:r}={})=>(ah(e,(a,o)=>{s&&Sr(a)?t[o]=jA(a,s):t[o]=a},{allOwnKeys:r}),t),JV=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),eG=(t,e,s,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},tG=(t,e,s,r)=>{let a,o,u;const h={};if(e=e||{},t==null)return e;do{for(a=Object.getOwnPropertyNames(t),o=a.length;o-- >0;)u=a[o],(!r||r(u,t,e))&&!h[u]&&(e[u]=t[u],h[u]=!0);t=s!==!1&&zx(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},sG=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const r=t.indexOf(e,s);return r!==-1&&r===s},rG=t=>{if(!t)return null;if(eu(t))return t;let e=t.length;if(!EA(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},nG=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&zx(Uint8Array)),iG=(t,e)=>{const r=(t&&t[Gm]).call(t);let a;for(;(a=r.next())&&!a.done;){const o=a.value;e.call(t,o[0],o[1])}},aG=(t,e)=>{let s;const r=[];for(;(s=t.exec(e))!==null;)r.push(s);return r},lG=Hn("HTMLFormElement"),oG=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,a){return r.toUpperCase()+a}),_2=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),cG=Hn("RegExp"),kA=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),r={};ah(s,(a,o)=>{let u;(u=e(a,o,t))!==!1&&(r[o]=u||a)}),Object.defineProperties(t,r)},uG=t=>{kA(t,(e,s)=>{if(Sr(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=t[s];if(Sr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},dG=(t,e)=>{const s={},r=a=>{a.forEach(o=>{s[o]=!0})};return eu(t)?r(t):r(String(t).split(e)),s},hG=()=>{},fG=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function mG(t){return!!(t&&Sr(t.append)&&t[NA]==="FormData"&&t[Gm])}const pG=t=>{const e=new Array(10),s=(r,a)=>{if(ih(r)){if(e.indexOf(r)>=0)return;if(nh(r))return r;if(!("toJSON"in r)){e[a]=r;const o=eu(r)?[]:{};return ah(r,(u,h)=>{const f=s(u,a+1);!Ld(f)&&(o[h]=f)}),e[a]=void 0,o}}return r};return s(t,0)},gG=Hn("AsyncFunction"),yG=t=>t&&(ih(t)||Sr(t))&&Sr(t.then)&&Sr(t.catch),TA=((t,e)=>t?setImmediate:e?((s,r)=>(Yl.addEventListener("message",({source:a,data:o})=>{a===Yl&&o===s&&r.length&&r.shift()()},!1),a=>{r.push(a),Yl.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Sr(Yl.postMessage)),xG=typeof queueMicrotask<"u"?queueMicrotask.bind(Yl):typeof process<"u"&&process.nextTick||TA,bG=t=>t!=null&&Sr(t[Gm]),fe={isArray:eu,isArrayBuffer:SA,isBuffer:nh,isFormData:VV,isArrayBufferView:qV,isString:PV,isNumber:EA,isBoolean:IV,isObject:ih,isPlainObject:Ff,isEmptyObject:$V,isReadableStream:ZV,isRequest:YV,isResponse:KV,isHeaders:WV,isUndefined:Ld,isDate:UV,isFile:BV,isBlob:zV,isRegExp:cG,isFunction:Sr,isStream:HV,isURLSearchParams:GV,isTypedArray:nG,isFileList:FV,forEach:ah,merge:Ay,extend:XV,trim:QV,stripBOM:JV,inherits:eG,toFlatObject:tG,kindOf:Zm,kindOfTest:Hn,endsWith:sG,toArray:rG,forEachEntry:iG,matchAll:aG,isHTMLForm:lG,hasOwnProperty:_2,hasOwnProp:_2,reduceDescriptors:kA,freezeMethods:uG,toObjectSet:dG,toCamelCase:oG,noop:hG,toFiniteNumber:fG,findKey:AA,global:Yl,isContextDefined:CA,isSpecCompliantForm:mG,toJSONObject:pG,isAsyncFn:gG,isThenable:yG,setImmediate:TA,asap:xG,isIterable:bG};function it(t,e,s,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}fe.inherits(it,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fe.toJSONObject(this.config),code:this.code,status:this.status}}});const OA=it.prototype,RA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{RA[t]={value:t}});Object.defineProperties(it,RA);Object.defineProperty(OA,"isAxiosError",{value:!0});it.from=(t,e,s,r,a,o)=>{const u=Object.create(OA);return fe.toFlatObject(t,u,function(f){return f!==Error.prototype},h=>h!=="isAxiosError"),it.call(u,t.message,e,s,r,a),u.cause=t,u.name=t.name,o&&Object.assign(u,o),u};const vG=null;function Cy(t){return fe.isPlainObject(t)||fe.isArray(t)}function MA(t){return fe.endsWith(t,"[]")?t.slice(0,-2):t}function j2(t,e,s){return t?t.concat(e).map(function(a,o){return a=MA(a),!s&&o?"["+a+"]":a}).join(s?".":""):e}function wG(t){return fe.isArray(t)&&!t.some(Cy)}const _G=fe.toFlatObject(fe,{},null,function(e){return/^is[A-Z]/.test(e)});function Km(t,e,s){if(!fe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=fe.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,w){return!fe.isUndefined(w[N])});const r=s.metaTokens,a=s.visitor||g,o=s.dots,u=s.indexes,f=(s.Blob||typeof Blob<"u"&&Blob)&&fe.isSpecCompliantForm(e);if(!fe.isFunction(a))throw new TypeError("visitor must be a function");function m(b){if(b===null)return"";if(fe.isDate(b))return b.toISOString();if(fe.isBoolean(b))return b.toString();if(!f&&fe.isBlob(b))throw new it("Blob is not supported. Use a Buffer instead.");return fe.isArrayBuffer(b)||fe.isTypedArray(b)?f&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function g(b,N,w){let E=b;if(b&&!w&&typeof b=="object"){if(fe.endsWith(N,"{}"))N=r?N:N.slice(0,-2),b=JSON.stringify(b);else if(fe.isArray(b)&&wG(b)||(fe.isFileList(b)||fe.endsWith(N,"[]"))&&(E=fe.toArray(b)))return N=MA(N),E.forEach(function(O,F){!(fe.isUndefined(O)||O===null)&&e.append(u===!0?j2([N],F,o):u===null?N:N+"[]",m(O))}),!1}return Cy(b)?!0:(e.append(j2(w,N,o),m(b)),!1)}const x=[],v=Object.assign(_G,{defaultVisitor:g,convertValue:m,isVisitable:Cy});function _(b,N){if(!fe.isUndefined(b)){if(x.indexOf(b)!==-1)throw Error("Circular reference detected in "+N.join("."));x.push(b),fe.forEach(b,function(E,A){(!(fe.isUndefined(E)||E===null)&&a.call(e,E,fe.isString(A)?A.trim():A,N,v))===!0&&_(E,N?N.concat(A):[A])}),x.pop()}}if(!fe.isObject(t))throw new TypeError("data must be an object");return _(t),e}function N2(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Fx(t,e){this._pairs=[],t&&Km(t,this,e)}const DA=Fx.prototype;DA.append=function(e,s){this._pairs.push([e,s])};DA.toString=function(e){const s=e?function(r){return e.call(this,r,N2)}:N2;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function jG(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function LA(t,e,s){if(!e)return t;const r=s&&s.encode||jG;fe.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let o;if(a?o=a(e,s):o=fe.isURLSearchParams(e)?e.toString():new Fx(e,s).toString(r),o){const u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class S2{constructor(){this.handlers=[]}use(e,s,r){return this.handlers.push({fulfilled:e,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){fe.forEach(this.handlers,function(r){r!==null&&e(r)})}}const qA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},NG=typeof URLSearchParams<"u"?URLSearchParams:Fx,SG=typeof FormData<"u"?FormData:null,EG=typeof Blob<"u"?Blob:null,AG={isBrowser:!0,classes:{URLSearchParams:NG,FormData:SG,Blob:EG},protocols:["http","https","file","blob","url","data"]},Hx=typeof window<"u"&&typeof document<"u",ky=typeof navigator=="object"&&navigator||void 0,CG=Hx&&(!ky||["ReactNative","NativeScript","NS"].indexOf(ky.product)<0),kG=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",TG=Hx&&window.location.href||"http://localhost",OG=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Hx,hasStandardBrowserEnv:CG,hasStandardBrowserWebWorkerEnv:kG,navigator:ky,origin:TG},Symbol.toStringTag,{value:"Module"})),ir={...OG,...AG};function RG(t,e){return Km(t,new ir.classes.URLSearchParams,{visitor:function(s,r,a,o){return ir.isNode&&fe.isBuffer(s)?(this.append(r,s.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function MG(t){return fe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function DG(t){const e={},s=Object.keys(t);let r;const a=s.length;let o;for(r=0;r<a;r++)o=s[r],e[o]=t[o];return e}function PA(t){function e(s,r,a,o){let u=s[o++];if(u==="__proto__")return!0;const h=Number.isFinite(+u),f=o>=s.length;return u=!u&&fe.isArray(a)?a.length:u,f?(fe.hasOwnProp(a,u)?a[u]=[a[u],r]:a[u]=r,!h):((!a[u]||!fe.isObject(a[u]))&&(a[u]=[]),e(s,r,a[u],o)&&fe.isArray(a[u])&&(a[u]=DG(a[u])),!h)}if(fe.isFormData(t)&&fe.isFunction(t.entries)){const s={};return fe.forEachEntry(t,(r,a)=>{e(MG(r),a,s,0)}),s}return null}function LG(t,e,s){if(fe.isString(t))try{return(e||JSON.parse)(t),fe.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(t)}const lh={transitional:qA,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const r=s.getContentType()||"",a=r.indexOf("application/json")>-1,o=fe.isObject(e);if(o&&fe.isHTMLForm(e)&&(e=new FormData(e)),fe.isFormData(e))return a?JSON.stringify(PA(e)):e;if(fe.isArrayBuffer(e)||fe.isBuffer(e)||fe.isStream(e)||fe.isFile(e)||fe.isBlob(e)||fe.isReadableStream(e))return e;if(fe.isArrayBufferView(e))return e.buffer;if(fe.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let h;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return RG(e,this.formSerializer).toString();if((h=fe.isFileList(e))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Km(h?{"files[]":e}:e,f&&new f,this.formSerializer)}}return o||a?(s.setContentType("application/json",!1),LG(e)):e}],transformResponse:[function(e){const s=this.transitional||lh.transitional,r=s&&s.forcedJSONParsing,a=this.responseType==="json";if(fe.isResponse(e)||fe.isReadableStream(e))return e;if(e&&fe.isString(e)&&(r&&!this.responseType||a)){const u=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(h){if(u)throw h.name==="SyntaxError"?it.from(h,it.ERR_BAD_RESPONSE,this,null,this.response):h}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ir.classes.FormData,Blob:ir.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};fe.forEach(["delete","get","head","post","put","patch"],t=>{lh.headers[t]={}});const qG=fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),PG=t=>{const e={};let s,r,a;return t&&t.split(`
`).forEach(function(u){a=u.indexOf(":"),s=u.substring(0,a).trim().toLowerCase(),r=u.substring(a+1).trim(),!(!s||e[s]&&qG[s])&&(s==="set-cookie"?e[s]?e[s].push(r):e[s]=[r]:e[s]=e[s]?e[s]+", "+r:r)}),e},E2=Symbol("internals");function cd(t){return t&&String(t).trim().toLowerCase()}function Hf(t){return t===!1||t==null?t:fe.isArray(t)?t.map(Hf):String(t)}function IG(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(t);)e[r[1]]=r[2];return e}const $G=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function O0(t,e,s,r,a){if(fe.isFunction(r))return r.call(this,e,s);if(a&&(e=s),!!fe.isString(e)){if(fe.isString(r))return e.indexOf(r)!==-1;if(fe.isRegExp(r))return r.test(e)}}function UG(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,r)=>s.toUpperCase()+r)}function BG(t,e){const s=fe.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+s,{value:function(a,o,u){return this[r].call(this,e,a,o,u)},configurable:!0})})}let Er=class{constructor(e){e&&this.set(e)}set(e,s,r){const a=this;function o(h,f,m){const g=cd(f);if(!g)throw new Error("header name must be a non-empty string");const x=fe.findKey(a,g);(!x||a[x]===void 0||m===!0||m===void 0&&a[x]!==!1)&&(a[x||f]=Hf(h))}const u=(h,f)=>fe.forEach(h,(m,g)=>o(m,g,f));if(fe.isPlainObject(e)||e instanceof this.constructor)u(e,s);else if(fe.isString(e)&&(e=e.trim())&&!$G(e))u(PG(e),s);else if(fe.isObject(e)&&fe.isIterable(e)){let h={},f,m;for(const g of e){if(!fe.isArray(g))throw TypeError("Object iterator must return a key-value pair");h[m=g[0]]=(f=h[m])?fe.isArray(f)?[...f,g[1]]:[f,g[1]]:g[1]}u(h,s)}else e!=null&&o(s,e,r);return this}get(e,s){if(e=cd(e),e){const r=fe.findKey(this,e);if(r){const a=this[r];if(!s)return a;if(s===!0)return IG(a);if(fe.isFunction(s))return s.call(this,a,r);if(fe.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=cd(e),e){const r=fe.findKey(this,e);return!!(r&&this[r]!==void 0&&(!s||O0(this,this[r],r,s)))}return!1}delete(e,s){const r=this;let a=!1;function o(u){if(u=cd(u),u){const h=fe.findKey(r,u);h&&(!s||O0(r,r[h],h,s))&&(delete r[h],a=!0)}}return fe.isArray(e)?e.forEach(o):o(e),a}clear(e){const s=Object.keys(this);let r=s.length,a=!1;for(;r--;){const o=s[r];(!e||O0(this,this[o],o,e,!0))&&(delete this[o],a=!0)}return a}normalize(e){const s=this,r={};return fe.forEach(this,(a,o)=>{const u=fe.findKey(r,o);if(u){s[u]=Hf(a),delete s[o];return}const h=e?UG(o):String(o).trim();h!==o&&delete s[o],s[h]=Hf(a),r[h]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return fe.forEach(this,(r,a)=>{r!=null&&r!==!1&&(s[a]=e&&fe.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const r=new this(e);return s.forEach(a=>r.set(a)),r}static accessor(e){const r=(this[E2]=this[E2]={accessors:{}}).accessors,a=this.prototype;function o(u){const h=cd(u);r[h]||(BG(a,u),r[h]=!0)}return fe.isArray(e)?e.forEach(o):o(e),this}};Er.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);fe.reduceDescriptors(Er.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[s]=r}}});fe.freezeMethods(Er);function R0(t,e){const s=this||lh,r=e||s,a=Er.from(r.headers);let o=r.data;return fe.forEach(t,function(h){o=h.call(s,o,a.normalize(),e?e.status:void 0)}),a.normalize(),o}function IA(t){return!!(t&&t.__CANCEL__)}function tu(t,e,s){it.call(this,t??"canceled",it.ERR_CANCELED,e,s),this.name="CanceledError"}fe.inherits(tu,it,{__CANCEL__:!0});function $A(t,e,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?t(s):e(new it("Request failed with status code "+s.status,[it.ERR_BAD_REQUEST,it.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function zG(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function FG(t,e){t=t||10;const s=new Array(t),r=new Array(t);let a=0,o=0,u;return e=e!==void 0?e:1e3,function(f){const m=Date.now(),g=r[o];u||(u=m),s[a]=f,r[a]=m;let x=o,v=0;for(;x!==a;)v+=s[x++],x=x%t;if(a=(a+1)%t,a===o&&(o=(o+1)%t),m-u<e)return;const _=g&&m-g;return _?Math.round(v*1e3/_):void 0}}function HG(t,e){let s=0,r=1e3/e,a,o;const u=(m,g=Date.now())=>{s=g,a=null,o&&(clearTimeout(o),o=null),t(...m)};return[(...m)=>{const g=Date.now(),x=g-s;x>=r?u(m,g):(a=m,o||(o=setTimeout(()=>{o=null,u(a)},r-x)))},()=>a&&u(a)]}const vm=(t,e,s=3)=>{let r=0;const a=FG(50,250);return HG(o=>{const u=o.loaded,h=o.lengthComputable?o.total:void 0,f=u-r,m=a(f),g=u<=h;r=u;const x={loaded:u,total:h,progress:h?u/h:void 0,bytes:f,rate:m||void 0,estimated:m&&h&&g?(h-u)/m:void 0,event:o,lengthComputable:h!=null,[e?"download":"upload"]:!0};t(x)},s)},A2=(t,e)=>{const s=t!=null;return[r=>e[0]({lengthComputable:s,total:t,loaded:r}),e[1]]},C2=t=>(...e)=>fe.asap(()=>t(...e)),VG=ir.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,ir.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(ir.origin),ir.navigator&&/(msie|trident)/i.test(ir.navigator.userAgent)):()=>!0,GG=ir.hasStandardBrowserEnv?{write(t,e,s,r,a,o){const u=[t+"="+encodeURIComponent(e)];fe.isNumber(s)&&u.push("expires="+new Date(s).toGMTString()),fe.isString(r)&&u.push("path="+r),fe.isString(a)&&u.push("domain="+a),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ZG(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function YG(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function UA(t,e,s){let r=!ZG(e);return t&&(r||s==!1)?YG(t,e):e}const k2=t=>t instanceof Er?{...t}:t;function io(t,e){e=e||{};const s={};function r(m,g,x,v){return fe.isPlainObject(m)&&fe.isPlainObject(g)?fe.merge.call({caseless:v},m,g):fe.isPlainObject(g)?fe.merge({},g):fe.isArray(g)?g.slice():g}function a(m,g,x,v){if(fe.isUndefined(g)){if(!fe.isUndefined(m))return r(void 0,m,x,v)}else return r(m,g,x,v)}function o(m,g){if(!fe.isUndefined(g))return r(void 0,g)}function u(m,g){if(fe.isUndefined(g)){if(!fe.isUndefined(m))return r(void 0,m)}else return r(void 0,g)}function h(m,g,x){if(x in e)return r(m,g);if(x in t)return r(void 0,m)}const f={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:h,headers:(m,g,x)=>a(k2(m),k2(g),x,!0)};return fe.forEach(Object.keys({...t,...e}),function(g){const x=f[g]||a,v=x(t[g],e[g],g);fe.isUndefined(v)&&x!==h||(s[g]=v)}),s}const BA=t=>{const e=io({},t);let{data:s,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:o,headers:u,auth:h}=e;e.headers=u=Er.from(u),e.url=LA(UA(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&u.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let f;if(fe.isFormData(s)){if(ir.hasStandardBrowserEnv||ir.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((f=u.getContentType())!==!1){const[m,...g]=f?f.split(";").map(x=>x.trim()).filter(Boolean):[];u.setContentType([m||"multipart/form-data",...g].join("; "))}}if(ir.hasStandardBrowserEnv&&(r&&fe.isFunction(r)&&(r=r(e)),r||r!==!1&&VG(e.url))){const m=a&&o&&GG.read(o);m&&u.set(a,m)}return e},KG=typeof XMLHttpRequest<"u",WG=KG&&function(t){return new Promise(function(s,r){const a=BA(t);let o=a.data;const u=Er.from(a.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:m}=a,g,x,v,_,b;function N(){_&&_(),b&&b(),a.cancelToken&&a.cancelToken.unsubscribe(g),a.signal&&a.signal.removeEventListener("abort",g)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function E(){if(!w)return;const O=Er.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),C={data:!h||h==="text"||h==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:O,config:t,request:w};$A(function(B){s(B),N()},function(B){r(B),N()},C),w=null}"onloadend"in w?w.onloadend=E:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(E)},w.onabort=function(){w&&(r(new it("Request aborted",it.ECONNABORTED,t,w)),w=null)},w.onerror=function(){r(new it("Network Error",it.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let F=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const C=a.transitional||qA;a.timeoutErrorMessage&&(F=a.timeoutErrorMessage),r(new it(F,C.clarifyTimeoutError?it.ETIMEDOUT:it.ECONNABORTED,t,w)),w=null},o===void 0&&u.setContentType(null),"setRequestHeader"in w&&fe.forEach(u.toJSON(),function(F,C){w.setRequestHeader(C,F)}),fe.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),h&&h!=="json"&&(w.responseType=a.responseType),m&&([v,b]=vm(m,!0),w.addEventListener("progress",v)),f&&w.upload&&([x,_]=vm(f),w.upload.addEventListener("progress",x),w.upload.addEventListener("loadend",_)),(a.cancelToken||a.signal)&&(g=O=>{w&&(r(!O||O.type?new tu(null,t,w):O),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(g),a.signal&&(a.signal.aborted?g():a.signal.addEventListener("abort",g)));const A=zG(a.url);if(A&&ir.protocols.indexOf(A)===-1){r(new it("Unsupported protocol "+A+":",it.ERR_BAD_REQUEST,t));return}w.send(o||null)})},QG=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let r=new AbortController,a;const o=function(m){if(!a){a=!0,h();const g=m instanceof Error?m:this.reason;r.abort(g instanceof it?g:new tu(g instanceof Error?g.message:g))}};let u=e&&setTimeout(()=>{u=null,o(new it(`timeout ${e} of ms exceeded`,it.ETIMEDOUT))},e);const h=()=>{t&&(u&&clearTimeout(u),u=null,t.forEach(m=>{m.unsubscribe?m.unsubscribe(o):m.removeEventListener("abort",o)}),t=null)};t.forEach(m=>m.addEventListener("abort",o));const{signal:f}=r;return f.unsubscribe=()=>fe.asap(h),f}},XG=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let r=0,a;for(;r<s;)a=r+e,yield t.slice(r,a),r=a},JG=async function*(t,e){for await(const s of eZ(t))yield*XG(s,e)},eZ=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:r}=await e.read();if(s)break;yield r}}finally{await e.cancel()}},T2=(t,e,s,r)=>{const a=JG(t,e);let o=0,u,h=f=>{u||(u=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:m,value:g}=await a.next();if(m){h(),f.close();return}let x=g.byteLength;if(s){let v=o+=x;s(v)}f.enqueue(new Uint8Array(g))}catch(m){throw h(m),m}},cancel(f){return h(f),a.return()}},{highWaterMark:2})},Wm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",zA=Wm&&typeof ReadableStream=="function",tZ=Wm&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),FA=(t,...e)=>{try{return!!t(...e)}catch{return!1}},sZ=zA&&FA(()=>{let t=!1;const e=new Request(ir.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),O2=64*1024,Ty=zA&&FA(()=>fe.isReadableStream(new Response("").body)),wm={stream:Ty&&(t=>t.body)};Wm&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!wm[e]&&(wm[e]=fe.isFunction(t[e])?s=>s[e]():(s,r)=>{throw new it(`Response type '${e}' is not supported`,it.ERR_NOT_SUPPORT,r)})})})(new Response);const rZ=async t=>{if(t==null)return 0;if(fe.isBlob(t))return t.size;if(fe.isSpecCompliantForm(t))return(await new Request(ir.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(fe.isArrayBufferView(t)||fe.isArrayBuffer(t))return t.byteLength;if(fe.isURLSearchParams(t)&&(t=t+""),fe.isString(t))return(await tZ(t)).byteLength},nZ=async(t,e)=>{const s=fe.toFiniteNumber(t.getContentLength());return s??rZ(e)},iZ=Wm&&(async t=>{let{url:e,method:s,data:r,signal:a,cancelToken:o,timeout:u,onDownloadProgress:h,onUploadProgress:f,responseType:m,headers:g,withCredentials:x="same-origin",fetchOptions:v}=BA(t);m=m?(m+"").toLowerCase():"text";let _=QG([a,o&&o.toAbortSignal()],u),b;const N=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let w;try{if(f&&sZ&&s!=="get"&&s!=="head"&&(w=await nZ(g,r))!==0){let C=new Request(e,{method:"POST",body:r,duplex:"half"}),L;if(fe.isFormData(r)&&(L=C.headers.get("content-type"))&&g.setContentType(L),C.body){const[B,S]=A2(w,vm(C2(f)));r=T2(C.body,O2,B,S)}}fe.isString(x)||(x=x?"include":"omit");const E="credentials"in Request.prototype;b=new Request(e,{...v,signal:_,method:s.toUpperCase(),headers:g.normalize().toJSON(),body:r,duplex:"half",credentials:E?x:void 0});let A=await fetch(b,v);const O=Ty&&(m==="stream"||m==="response");if(Ty&&(h||O&&N)){const C={};["status","statusText","headers"].forEach(k=>{C[k]=A[k]});const L=fe.toFiniteNumber(A.headers.get("content-length")),[B,S]=h&&A2(L,vm(C2(h),!0))||[];A=new Response(T2(A.body,O2,B,()=>{S&&S(),N&&N()}),C)}m=m||"text";let F=await wm[fe.findKey(wm,m)||"text"](A,t);return!O&&N&&N(),await new Promise((C,L)=>{$A(C,L,{data:F,headers:Er.from(A.headers),status:A.status,statusText:A.statusText,config:t,request:b})})}catch(E){throw N&&N(),E&&E.name==="TypeError"&&/Load failed|fetch/i.test(E.message)?Object.assign(new it("Network Error",it.ERR_NETWORK,t,b),{cause:E.cause||E}):it.from(E,E&&E.code,t,b)}}),Oy={http:vG,xhr:WG,fetch:iZ};fe.forEach(Oy,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const R2=t=>`- ${t}`,aZ=t=>fe.isFunction(t)||t===null||t===!1,HA={getAdapter:t=>{t=fe.isArray(t)?t:[t];const{length:e}=t;let s,r;const a={};for(let o=0;o<e;o++){s=t[o];let u;if(r=s,!aZ(s)&&(r=Oy[(u=String(s)).toLowerCase()],r===void 0))throw new it(`Unknown adapter '${u}'`);if(r)break;a[u||"#"+o]=r}if(!r){const o=Object.entries(a).map(([h,f])=>`adapter ${h} `+(f===!1?"is not supported by the environment":"is not available in the build"));let u=e?o.length>1?`since :
`+o.map(R2).join(`
`):" "+R2(o[0]):"as no adapter specified";throw new it("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:Oy};function M0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new tu(null,t)}function M2(t){return M0(t),t.headers=Er.from(t.headers),t.data=R0.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),HA.getAdapter(t.adapter||lh.adapter)(t).then(function(r){return M0(t),r.data=R0.call(t,t.transformResponse,r),r.headers=Er.from(r.headers),r},function(r){return IA(r)||(M0(t),r&&r.response&&(r.response.data=R0.call(t,t.transformResponse,r.response),r.response.headers=Er.from(r.response.headers))),Promise.reject(r)})}const VA="1.11.0",Qm={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Qm[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const D2={};Qm.transitional=function(e,s,r){function a(o,u){return"[Axios v"+VA+"] Transitional option '"+o+"'"+u+(r?". "+r:"")}return(o,u,h)=>{if(e===!1)throw new it(a(u," has been removed"+(s?" in "+s:"")),it.ERR_DEPRECATED);return s&&!D2[u]&&(D2[u]=!0,console.warn(a(u," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(o,u,h):!0}};Qm.spelling=function(e){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function lZ(t,e,s){if(typeof t!="object")throw new it("options must be an object",it.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let a=r.length;for(;a-- >0;){const o=r[a],u=e[o];if(u){const h=t[o],f=h===void 0||u(h,o,t);if(f!==!0)throw new it("option "+o+" must be "+f,it.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new it("Unknown option "+o,it.ERR_BAD_OPTION)}}const Vf={assertOptions:lZ,validators:Qm},li=Vf.validators;let Wl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new S2,response:new S2}}async request(e,s){try{return await this._request(e,s)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=io(this.defaults,s);const{transitional:r,paramsSerializer:a,headers:o}=s;r!==void 0&&Vf.assertOptions(r,{silentJSONParsing:li.transitional(li.boolean),forcedJSONParsing:li.transitional(li.boolean),clarifyTimeoutError:li.transitional(li.boolean)},!1),a!=null&&(fe.isFunction(a)?s.paramsSerializer={serialize:a}:Vf.assertOptions(a,{encode:li.function,serialize:li.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Vf.assertOptions(s,{baseUrl:li.spelling("baseURL"),withXsrfToken:li.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let u=o&&fe.merge(o.common,o[s.method]);o&&fe.forEach(["delete","get","head","post","put","patch","common"],b=>{delete o[b]}),s.headers=Er.concat(u,o);const h=[];let f=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(s)===!1||(f=f&&N.synchronous,h.unshift(N.fulfilled,N.rejected))});const m=[];this.interceptors.response.forEach(function(N){m.push(N.fulfilled,N.rejected)});let g,x=0,v;if(!f){const b=[M2.bind(this),void 0];for(b.unshift(...h),b.push(...m),v=b.length,g=Promise.resolve(s);x<v;)g=g.then(b[x++],b[x++]);return g}v=h.length;let _=s;for(x=0;x<v;){const b=h[x++],N=h[x++];try{_=b(_)}catch(w){N.call(this,w);break}}try{g=M2.call(this,_)}catch(b){return Promise.reject(b)}for(x=0,v=m.length;x<v;)g=g.then(m[x++],m[x++]);return g}getUri(e){e=io(this.defaults,e);const s=UA(e.baseURL,e.url,e.allowAbsoluteUrls);return LA(s,e.params,e.paramsSerializer)}};fe.forEach(["delete","get","head","options"],function(e){Wl.prototype[e]=function(s,r){return this.request(io(r||{},{method:e,url:s,data:(r||{}).data}))}});fe.forEach(["post","put","patch"],function(e){function s(r){return function(o,u,h){return this.request(io(h||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:u}))}}Wl.prototype[e]=s(),Wl.prototype[e+"Form"]=s(!0)});let oZ=class GA{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(o){s=o});const r=this;this.promise.then(a=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](a);r._listeners=null}),this.promise.then=a=>{let o;const u=new Promise(h=>{r.subscribe(h),o=h}).then(a);return u.cancel=function(){r.unsubscribe(o)},u},e(function(o,u,h){r.reason||(r.reason=new tu(o,u,h),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=r=>{e.abort(r)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new GA(function(a){e=a}),cancel:e}}};function cZ(t){return function(s){return t.apply(null,s)}}function uZ(t){return fe.isObject(t)&&t.isAxiosError===!0}const Ry={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ry).forEach(([t,e])=>{Ry[e]=t});function ZA(t){const e=new Wl(t),s=jA(Wl.prototype.request,e);return fe.extend(s,Wl.prototype,e,{allOwnKeys:!0}),fe.extend(s,e,null,{allOwnKeys:!0}),s.create=function(a){return ZA(io(t,a))},s}const gs=ZA(lh);gs.Axios=Wl;gs.CanceledError=tu;gs.CancelToken=oZ;gs.isCancel=IA;gs.VERSION=VA;gs.toFormData=Km;gs.AxiosError=it;gs.Cancel=gs.CanceledError;gs.all=function(e){return Promise.all(e)};gs.spread=cZ;gs.isAxiosError=uZ;gs.mergeConfig=io;gs.AxiosHeaders=Er;gs.formToJSON=t=>PA(fe.isHTMLForm(t)?new FormData(t):t);gs.getAdapter=HA.getAdapter;gs.HttpStatusCode=Ry;gs.default=gs;const{Axios:qZ,AxiosError:PZ,CanceledError:IZ,isCancel:$Z,CancelToken:UZ,VERSION:BZ,all:zZ,Cancel:FZ,isAxiosError:HZ,spread:VZ,toFormData:GZ,AxiosHeaders:ZZ,HttpStatusCode:YZ,formToJSON:KZ,getAdapter:WZ,mergeConfig:QZ}=gs,dZ="http://localhost:3001";class hZ{apiClient=gs.create({baseURL:`${dZ}/api/v1/openlearning`,headers:{"Content-Type":"application/json"}});constructor(){this.apiClient.interceptors.request.use(async e=>{const{data:{session:s}}=await V.auth.getSession();return s?.access_token&&(e.headers.Authorization=`Bearer ${s.access_token}`),e})}async provisionCurrentUser(){try{const e=JSON.parse(localStorage.getItem("eau_member")||"{}");if(!e.id)throw new Error("No user logged in");return(await this.apiClient.post("/provision",{memberId:e.id})).data}catch(e){return console.error("Error provisioning user:",e),{success:!1,error:e.response?.data?.error||e.message}}}async generateSSOUrl(e,s){try{return(await this.apiClient.post("/sso",{classId:e,returnUrl:s||window.location.origin})).data}catch(r){return console.error("Error generating SSO URL:",r),{success:!1,error:r.response?.data?.error||r.message}}}async launchSSO(e,s=!0){try{const r="https://www.openlearning.com/saml-redirect/english-australia/english-australia/";if(s){if(!window.open(r,"_blank","width=1024,height=768,scrollbars=yes,resizable=yes"))throw new Error("Pop-up blocked. Please allow pop-ups for this site and try again.")}else window.location.href=r;sessionStorage.setItem("openlearning_launched",new Date().toISOString())}catch(r){throw console.error("Error launching OpenLearning SSO:",r),new Error(r.message||"Failed to launch OpenLearning SSO")}}async getStatus(e){try{const s=e?`/status/${e}`:"/status";return(await this.apiClient.get(s)).data}catch(s){return console.error("Error getting OpenLearning status:",s),{success:!1,error:s.response?.data?.error||s.message}}}async getCourses(e){try{const s=e?`/courses/${e}`:"/courses";return(await this.apiClient.get(s)).data}catch(s){return console.error("Error getting courses:",s),{success:!1,error:s.response?.data?.error||s.message}}}async syncCourses(e){try{return(await this.apiClient.post("/sync",{memberId:e})).data}catch(s){return console.error("Error syncing courses:",s),{success:!1,error:s.response?.data?.error||s.message}}}async bulkProvision(e){try{return(await this.apiClient.post("/bulk-provision",{memberIds:e})).data}catch(s){return console.error("Error bulk provisioning:",s),{success:!1,error:s.response?.data?.error||s.message}}}isAuthenticated(){return!!sessionStorage.getItem("openlearning_session")}clearSession(){sessionStorage.removeItem("openlearning_session")}}const Gf=new hZ,fZ=Object.freeze(Object.defineProperty({__proto__:null,openLearningService:Gf},Symbol.toStringTag,{value:"Module"})),L2={async getMemberById(t){const{data:e,error:s}=await V.from("members").select(`
        *,
        cpd_activities_count:cpd_activities(count),
        events_count:event_registrations(count)
      `).eq("id",t).single();if(s)throw s;return{...e,cpd_activities_count:e.cpd_activities_count?.[0]?.count||0,events_count:e.events_count?.[0]?.count||0,payments_count:0}},async searchMembers(t){const{data:e,error:s}=await V.from("members").select("*").or(`first_name.ilike.%${t}%,last_name.ilike.%${t}%,email.ilike.%${t}%`).limit(10);if(s)throw s;return e},async getAllMembers(){const{data:t,error:e}=await V.from("members").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}};function mZ(){const t=Ns(),[e,s]=M.useState(!1),[r,a]=M.useState([]),[o,u]=M.useState([]),[h,f]=M.useState({}),[m,g]=M.useState({totalMembers:0,provisionedMembers:0,totalCourses:0,syncedActivities:0});M.useEffect(()=>{x(),v()},[]);const x=async()=>{try{const A=await L2.getAllMembers();a(A.members||[])}catch(A){console.error("Error loading members:",A),Os("error","Failed to load members")}},v=async()=>{try{const O=(await L2.getAllMembers()).members||[],F=O.filter(C=>C.openlearning_user_id).length;g({totalMembers:O.length,provisionedMembers:F,totalCourses:0,syncedActivities:0})}catch(A){console.error("Error loading stats:",A)}},_=async()=>{if(o.length===0){Os("warning","Please select members to provision");return}s(!0);try{const A=await Gf.bulkProvision(o);if(A.success&&A.results){const{provisioned:O,failed:F,alreadyProvisioned:C}=A.results,L={};O.forEach(B=>L[B]="success"),F.forEach(({memberId:B})=>L[B]="failed"),C.forEach(B=>L[B]="already"),f(L),Os("success",`Provisioned ${O.length} members successfully. ${F.length} failed, ${C.length} already provisioned.`),await x(),await v(),u([])}else Os("error",A.error||"Provisioning failed")}catch(A){console.error("Error provisioning members:",A),Os("error","Failed to provision members")}finally{s(!1)}},b=async A=>{s(!0);try{const O=await Gf.syncCourses(A);O.success?(Os("success",O.message||"Courses synced successfully"),await v()):Os("error",O.error||"Sync failed")}catch(O){console.error("Error syncing courses:",O),Os("error","Failed to sync courses")}finally{s(!1)}},N=async A=>{try{if(!r.find(F=>F.id===A))return;await Gf.launchSSO(void 0,!0),Os("info","Opening OpenLearning in new window...")}catch(O){console.error("Error launching SSO:",O),Os("error","Failed to launch OpenLearning")}},w=A=>{u(O=>O.includes(A)?O.filter(F=>F!==A):[...O,A])},E=()=>{const A=r.filter(O=>!O.openlearning_user_id).map(O=>O.id);u(A)};return n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"OpenLearning Integration"}),n.jsx(re,{variant:"outline",onClick:()=>t("/admin"),children:"Back to Admin"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[n.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Members"}),n.jsx("p",{className:"text-2xl font-bold",children:m.totalMembers})]}),n.jsx(zr,{className:"h-8 w-8 text-blue-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Provisioned"}),n.jsx("p",{className:"text-2xl font-bold",children:m.provisionedMembers})]}),n.jsx(fs,{className:"h-8 w-8 text-green-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Courses"}),n.jsx("p",{className:"text-2xl font-bold",children:m.totalCourses})]}),n.jsx(um,{className:"h-8 w-8 text-purple-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"CPD Activities"}),n.jsx("p",{className:"text-2xl font-bold",children:m.syncedActivities})]}),n.jsx(Ad,{className:"h-8 w-8 text-orange-500"})]})})]}),n.jsx("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(re,{onClick:E,variant:"outline",disabled:e,children:"Select All Unprovisioned"}),n.jsx(re,{onClick:_,disabled:e||o.length===0,children:e?n.jsxs(n.Fragment,{children:[n.jsx(hn,{className:"animate-spin h-4 w-4 mr-2"}),"Provisioning..."]}):n.jsxs(n.Fragment,{children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Provision Selected (",o.length,")"]})})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[o.length," of ",r.length," members selected"]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.jsx("input",{type:"checkbox",checked:o.length===r.filter(A=>!A.openlearning_user_id).length,onChange:A=>{A.target.checked?E():u([])},className:"rounded border-gray-300"})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"OpenLearning ID"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(A=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("input",{type:"checkbox",checked:o.includes(A.id),onChange:()=>w(A.id),disabled:A.openlearning_user_id,className:"rounded border-gray-300"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[A.first_name," ",A.last_name]}),n.jsx("div",{className:"text-sm text-gray-500",children:A.email})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.openlearning_user_id?n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(fs,{className:"h-3 w-3 mr-1"}),"Provisioned"]}):h[A.id]==="failed"?n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[n.jsx(Lc,{className:"h-3 w-3 mr-1"}),"Failed"]}):n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Not Provisioned"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A.openlearning_user_id||"-"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsx("div",{className:"flex items-center gap-2",children:A.openlearning_user_id&&n.jsxs(n.Fragment,{children:[n.jsxs(re,{size:"sm",variant:"outline",onClick:()=>b(A.id),disabled:e,children:[n.jsx(Ad,{className:"h-3 w-3 mr-1"}),"Sync"]}),n.jsxs(re,{size:"sm",variant:"outline",onClick:()=>N(A.id),children:[n.jsx(oy,{className:"h-3 w-3 mr-1"}),"Open"]})]})})})]},A.id))})]})})]})})}const Tt=({children:t})=>{const{user:e,isLoading:s}=jt();return console.log(" PROTECTED ROUTE: isLoading:",s,"user:",!!e),s?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e?n.jsx(gI,{children:t}):n.jsx(_d,{to:"/login",replace:!0})},D0=({children:t})=>{const{user:e,isLoading:s}=jt();return s?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e?n.jsx(_d,{to:"/dashboard",replace:!0}):n.jsx(n.Fragment,{children:t})},pZ=()=>n.jsxs(BT,{children:[n.jsx(yt,{path:"/login",element:n.jsx(D0,{children:n.jsx(UM,{})})}),n.jsx(yt,{path:"/forgot-password",element:n.jsx(D0,{children:n.jsx(SD,{})})}),n.jsx(yt,{path:"/signup",element:n.jsx(D0,{children:n.jsx(ED,{})})}),n.jsx(yt,{path:"/",element:n.jsx(_d,{to:"/dashboard",replace:!0})}),n.jsx(yt,{path:"/unauthorized",element:n.jsx(C8,{})}),n.jsx(yt,{path:"/dashboard",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_MEMBER_DASHBOARD",children:n.jsx(A8,{})})})}),n.jsx(yt,{path:"/cpd",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"CREATE_CPD",children:n.jsx(Q7,{})})})}),n.jsx(yt,{path:"/cpd/review",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(X7,{})})})}),n.jsx(yt,{path:"/cpd/settings",element:n.jsx(Tt,{children:n.jsx(Lt,{roles:["AdminSuper"],children:n.jsx(J7,{})})})}),n.jsx(yt,{path:"/cpd/management",element:n.jsx(Tt,{children:n.jsx(Lt,{roles:["Admin","AdminSuper"],children:n.jsx(e9,{})})})}),n.jsx(yt,{path:"/events",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"REGISTER_EVENT",children:n.jsx(t9,{})})})}),n.jsx(yt,{path:"/events/:slug",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"REGISTER_EVENT",children:n.jsx(i9,{})})})}),n.jsx(yt,{path:"/my-registrations",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"REGISTER_EVENT",children:n.jsx(a9,{})})})}),n.jsx(yt,{path:"/profile",element:n.jsx(Tt,{children:n.jsx(zI,{})})}),n.jsx(yt,{path:"/admin",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(yI,{})})})}),n.jsx(yt,{path:"/admin/members",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(NI,{})})})}),n.jsx(yt,{path:"/admin/membership",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(EI,{})})})}),n.jsx(yt,{path:"/admin/openlearning",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(mZ,{})})})}),n.jsx(yt,{path:"/admin/import-activities",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(TI,{})})})}),n.jsx(yt,{path:"/admin/editor-test",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(jV,{})})})}),n.jsx(yt,{path:"/admin/rich-content-test",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(NV,{})})})}),n.jsx(yt,{path:"/admin/wysiwyg-test",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(SV,{})})})}),n.jsx(yt,{path:"/admin/quill-debug",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(EV,{})})})}),n.jsx(yt,{path:"/admin/overflow-test",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(AV,{})})})}),n.jsx(yt,{path:"/admin/list-debug",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(TV,{})})})}),n.jsx(yt,{path:"/admin/import-system",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(DI,{})})})}),n.jsx(yt,{path:"/admin/events",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(fV,{})})})}),n.jsx(yt,{path:"/admin/smtp-settings",element:n.jsx(Tt,{children:n.jsx(Lt,{roles:["AdminSuper"],children:n.jsx(mV,{})})})}),n.jsx(yt,{path:"/admin/emailjs-config",element:n.jsx(Tt,{children:n.jsx(Lt,{roles:["AdminSuper"],children:n.jsx(pV,{})})})}),n.jsx(yt,{path:"/admin/email-templates",element:n.jsx(Tt,{children:n.jsx(Lt,{roles:["AdminSuper"],children:n.jsx(yV,{})})})}),n.jsx(yt,{path:"/admin/event-reminders",element:n.jsx(Tt,{children:n.jsx(Lt,{roles:["AdminSuper"],children:n.jsx(bV,{})})})}),n.jsx(yt,{path:"/admin/setup-media",element:n.jsx(Tt,{children:n.jsx(Lt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(wV,{})})})}),n.jsx(yt,{path:"/admin/duplicates",element:n.jsx(Tt,{children:n.jsx(Lt,{roles:["Admin","AdminSuper"],children:n.jsx(MV,{})})})}),n.jsx(yt,{path:"/admin/bulk-management",element:n.jsx(Tt,{children:n.jsx(Lt,{roles:["AdminSuper"],children:n.jsx(DV,{})})})}),n.jsx(yt,{path:"*",element:n.jsx(_d,{to:"/dashboard",replace:!0})})]}),gZ=()=>{Object.keys(localStorage).filter(e=>e.includes("supabase")||e.includes("sb-")||e.includes("auth")).forEach(e=>{localStorage.removeItem(e)}),console.log("Supabase cache cleared")};class yZ extends M.Component{state={hasError:!1,error:null};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("Uncaught error:",e,s)}handleReset=()=>{console.log("ErrorBoundary: Performing full reset"),gZ(),localStorage.clear(),sessionStorage.clear(),window.location.href="/login"};handleHardReload=()=>{console.log("ErrorBoundary: Performing hard reload"),localStorage.clear(),sessionStorage.clear(),window.location.reload()};render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"An error occurred while loading the application. This might be due to cached data."}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("button",{onClick:this.handleReset,className:"w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors font-medium",children:" Clear All Data & Go to Login"}),n.jsx("button",{onClick:this.handleHardReload,className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors font-medium",children:" Hard Reload Page"}),n.jsx("button",{onClick:()=>window.location.href="/login",className:"w-full bg-gray-200 text-gray-700 py-2 px-4 rounded hover:bg-gray-300 transition-colors",children:" Go to Login Page"})]}),!1]})}):this.props.children}}const xZ=()=>{const{isLoading:t}=jt();M.useEffect(()=>{let e;return t&&(e=setTimeout(()=>{console.error("Auth health check - extremely long loading time");const s=jt.getState();s.isLoading&&(console.warn("Force stopping loading after timeout"),s.setIsLoading(!1),s.setRolesLoaded(!0))},5e3)),()=>{e&&clearTimeout(e)}},[t])};function bZ(){const{setUser:t,setIsLoading:e,setRoles:s}=jt();return xZ(),M.useEffect(()=>{(async()=>{try{const{data:{session:o}}=await ey.getSession();o?.user?(t(o.user),o.user.email==="rrzillesg@gmail.com"?s(["AdminSuper","Admin","Members"]):s(["Members"])):(t(null),s([]))}catch(o){console.error("Auth error:",o),t(null),s([])}finally{e(!1)}})();const{data:{subscription:a}}=ey.onAuthStateChange(async(o,u)=>{t(u?.user??null),u?.user?u.user.email==="rrzillesg@gmail.com"?s(["AdminSuper","Admin","Members"]):s(["Members"]):s([])});return()=>{a.unsubscribe()}},[]),n.jsx(yZ,{children:n.jsx(u4,{children:n.jsx(pZ,{})})})}Wk.createRoot(document.getElementById("root")).render(n.jsx(bZ,{}))});export default vZ();
