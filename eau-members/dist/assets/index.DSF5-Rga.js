var Uk=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var SZ=Uk((Ur,Br)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();var Ki=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Bk(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),s}var Vg={exports:{}},Qu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function zk(){if(h_)return Qu;h_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,i,o){var u=null;if(o!==void 0&&(u=""+o),i.key!==void 0&&(u=""+i.key),"key"in i){o={};for(var h in i)h!=="key"&&(o[h]=i[h])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:u,ref:i!==void 0?i:null,props:o}}return Qu.Fragment=e,Qu.jsx=s,Qu.jsxs=s,Qu}var m_;function Fk(){return m_||(m_=1,Vg.exports=zk()),Vg.exports}var n=Fk(),Gg={exports:{}},Xu={},Zg={exports:{}},Yg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function Hk(){return f_||(f_=1,function(t){function e(P,Z){var Q=P.length;P.push(Z);e:for(;0<Q;){var de=Q-1>>>1,U=P[de];if(0<i(U,Z))P[de]=Z,P[Q]=U,Q=de;else break e}}function s(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var Z=P[0],Q=P.pop();if(Q!==Z){P[0]=Q;e:for(var de=0,U=P.length,J=U>>>1;de<J;){var le=2*(de+1)-1,ee=P[le],xe=le+1,we=P[xe];if(0>i(ee,Q))xe<U&&0>i(we,ee)?(P[de]=we,P[xe]=Q,de=xe):(P[de]=ee,P[le]=Q,de=le);else if(xe<U&&0>i(we,Q))P[de]=we,P[xe]=Q,de=xe;else break e}}return Z}function i(P,Z){var Q=P.sortIndex-Z.sortIndex;return Q!==0?Q:P.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var m=[],f=[],p=1,x=null,b=3,j=!1,v=!1,S=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function F(P){for(var Z=s(f);Z!==null;){if(Z.callback===null)r(f);else if(Z.startTime<=P)r(f),Z.sortIndex=Z.expirationTime,e(m,Z);else break;Z=s(f)}}function k(P){if(S=!1,F(P),!v)if(s(m)!==null)v=!0,L||(L=!0,D());else{var Z=s(f);Z!==null&&X(k,Z.startTime-P)}}var L=!1,B=-1,w=5,C=-1;function z(){return _?!0:!(t.unstable_now()-C<w)}function R(){if(_=!1,L){var P=t.unstable_now();C=P;var Z=!0;try{e:{v=!1,S&&(S=!1,A(B),B=-1),j=!0;var Q=b;try{t:{for(F(P),x=s(m);x!==null&&!(x.expirationTime>P&&z());){var de=x.callback;if(typeof de=="function"){x.callback=null,b=x.priorityLevel;var U=de(x.expirationTime<=P);if(P=t.unstable_now(),typeof U=="function"){x.callback=U,F(P),Z=!0;break t}x===s(m)&&r(m),F(P)}else r(m);x=s(m)}if(x!==null)Z=!0;else{var J=s(f);J!==null&&X(k,J.startTime-P),Z=!1}}break e}finally{x=null,b=Q,j=!1}Z=void 0}}finally{Z?D():L=!1}}}var D;if(typeof O=="function")D=function(){O(R)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,H=q.port2;q.port1.onmessage=R,D=function(){H.postMessage(null)}}else D=function(){E(R,0)};function X(P,Z){B=E(function(){P(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(P){switch(b){case 1:case 2:case 3:var Z=3;break;default:Z=b}var Q=b;b=Z;try{return P()}finally{b=Q}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(P,Z){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Q=b;b=P;try{return Z()}finally{b=Q}},t.unstable_scheduleCallback=function(P,Z,Q){var de=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?de+Q:de):Q=de,P){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Q+U,P={id:p++,callback:Z,priorityLevel:P,startTime:Q,expirationTime:U,sortIndex:-1},Q>de?(P.sortIndex=Q,e(f,P),s(m)===null&&P===s(f)&&(S?(A(B),B=-1):S=!0,X(k,Q-de))):(P.sortIndex=U,e(m,P),v||j||(v=!0,L||(L=!0,D()))),P},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(P){var Z=b;return function(){var Q=b;b=Z;try{return P.apply(this,arguments)}finally{b=Q}}}}(Yg)),Yg}var p_;function Vk(){return p_||(p_=1,Zg.exports=Hk()),Zg.exports}var Kg={exports:{}},it={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function Gk(){if(g_)return it;g_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),x=Symbol.iterator;function b(U){return U===null||typeof U!="object"?null:(U=x&&U[x]||U["@@iterator"],typeof U=="function"?U:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,S={};function _(U,J,le){this.props=U,this.context=J,this.refs=S,this.updater=le||j}_.prototype.isReactComponent={},_.prototype.setState=function(U,J){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,J,"setState")},_.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function E(){}E.prototype=_.prototype;function A(U,J,le){this.props=U,this.context=J,this.refs=S,this.updater=le||j}var O=A.prototype=new E;O.constructor=A,v(O,_.prototype),O.isPureReactComponent=!0;var F=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function B(U,J,le,ee,xe,we){return le=we.ref,{$$typeof:t,type:U,key:J,ref:le!==void 0?le:null,props:we}}function w(U,J){return B(U.type,J,void 0,void 0,void 0,U.props)}function C(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function z(U){var J={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(le){return J[le]})}var R=/\/+/g;function D(U,J){return typeof U=="object"&&U!==null&&U.key!=null?z(""+U.key):J.toString(36)}function q(){}function H(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(q,q):(U.status="pending",U.then(function(J){U.status==="pending"&&(U.status="fulfilled",U.value=J)},function(J){U.status==="pending"&&(U.status="rejected",U.reason=J)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function X(U,J,le,ee,xe){var we=typeof U;(we==="undefined"||we==="boolean")&&(U=null);var Ae=!1;if(U===null)Ae=!0;else switch(we){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(U.$$typeof){case t:case e:Ae=!0;break;case p:return Ae=U._init,X(Ae(U._payload),J,le,ee,xe)}}if(Ae)return xe=xe(U),Ae=ee===""?"."+D(U,0):ee,F(xe)?(le="",Ae!=null&&(le=Ae.replace(R,"$&/")+"/"),X(xe,J,le,"",function(Oe){return Oe})):xe!=null&&(C(xe)&&(xe=w(xe,le+(xe.key==null||U&&U.key===xe.key?"":(""+xe.key).replace(R,"$&/")+"/")+Ae)),J.push(xe)),1;Ae=0;var Me=ee===""?".":ee+":";if(F(U))for(var Se=0;Se<U.length;Se++)ee=U[Se],we=Me+D(ee,Se),Ae+=X(ee,J,le,we,xe);else if(Se=b(U),typeof Se=="function")for(U=Se.call(U),Se=0;!(ee=U.next()).done;)ee=ee.value,we=Me+D(ee,Se++),Ae+=X(ee,J,le,we,xe);else if(we==="object"){if(typeof U.then=="function")return X(H(U),J,le,ee,xe);throw J=String(U),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function P(U,J,le){if(U==null)return U;var ee=[],xe=0;return X(U,ee,"","",function(we){return J.call(le,we,xe++)}),ee}function Z(U){if(U._status===-1){var J=U._result;J=J(),J.then(function(le){(U._status===0||U._status===-1)&&(U._status=1,U._result=le)},function(le){(U._status===0||U._status===-1)&&(U._status=2,U._result=le)}),U._status===-1&&(U._status=0,U._result=J)}if(U._status===1)return U._result.default;throw U._result}var Q=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function de(){}return it.Children={map:P,forEach:function(U,J,le){P(U,function(){J.apply(this,arguments)},le)},count:function(U){var J=0;return P(U,function(){J++}),J},toArray:function(U){return P(U,function(J){return J})||[]},only:function(U){if(!C(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},it.Component=_,it.Fragment=s,it.Profiler=i,it.PureComponent=A,it.StrictMode=r,it.Suspense=m,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,it.__COMPILER_RUNTIME={__proto__:null,c:function(U){return k.H.useMemoCache(U)}},it.cache=function(U){return function(){return U.apply(null,arguments)}},it.cloneElement=function(U,J,le){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ee=v({},U.props),xe=U.key,we=void 0;if(J!=null)for(Ae in J.ref!==void 0&&(we=void 0),J.key!==void 0&&(xe=""+J.key),J)!L.call(J,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&J.ref===void 0||(ee[Ae]=J[Ae]);var Ae=arguments.length-2;if(Ae===1)ee.children=le;else if(1<Ae){for(var Me=Array(Ae),Se=0;Se<Ae;Se++)Me[Se]=arguments[Se+2];ee.children=Me}return B(U.type,xe,void 0,void 0,we,ee)},it.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:o,_context:U},U},it.createElement=function(U,J,le){var ee,xe={},we=null;if(J!=null)for(ee in J.key!==void 0&&(we=""+J.key),J)L.call(J,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(xe[ee]=J[ee]);var Ae=arguments.length-2;if(Ae===1)xe.children=le;else if(1<Ae){for(var Me=Array(Ae),Se=0;Se<Ae;Se++)Me[Se]=arguments[Se+2];xe.children=Me}if(U&&U.defaultProps)for(ee in Ae=U.defaultProps,Ae)xe[ee]===void 0&&(xe[ee]=Ae[ee]);return B(U,we,void 0,void 0,null,xe)},it.createRef=function(){return{current:null}},it.forwardRef=function(U){return{$$typeof:h,render:U}},it.isValidElement=C,it.lazy=function(U){return{$$typeof:p,_payload:{_status:-1,_result:U},_init:Z}},it.memo=function(U,J){return{$$typeof:f,type:U,compare:J===void 0?null:J}},it.startTransition=function(U){var J=k.T,le={};k.T=le;try{var ee=U(),xe=k.S;xe!==null&&xe(le,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(de,Q)}catch(we){Q(we)}finally{k.T=J}},it.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},it.use=function(U){return k.H.use(U)},it.useActionState=function(U,J,le){return k.H.useActionState(U,J,le)},it.useCallback=function(U,J){return k.H.useCallback(U,J)},it.useContext=function(U){return k.H.useContext(U)},it.useDebugValue=function(){},it.useDeferredValue=function(U,J){return k.H.useDeferredValue(U,J)},it.useEffect=function(U,J,le){var ee=k.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(U,J)},it.useId=function(){return k.H.useId()},it.useImperativeHandle=function(U,J,le){return k.H.useImperativeHandle(U,J,le)},it.useInsertionEffect=function(U,J){return k.H.useInsertionEffect(U,J)},it.useLayoutEffect=function(U,J){return k.H.useLayoutEffect(U,J)},it.useMemo=function(U,J){return k.H.useMemo(U,J)},it.useOptimistic=function(U,J){return k.H.useOptimistic(U,J)},it.useReducer=function(U,J,le){return k.H.useReducer(U,J,le)},it.useRef=function(U){return k.H.useRef(U)},it.useState=function(U){return k.H.useState(U)},it.useSyncExternalStore=function(U,J,le){return k.H.useSyncExternalStore(U,J,le)},it.useTransition=function(){return k.H.useTransition()},it.version="19.1.1",it}var x_;function Lx(){return x_||(x_=1,Kg.exports=Gk()),Kg.exports}var Wg={exports:{}},sr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function Zk(){if(y_)return sr;y_=1;var t=Lx();function e(m){var f="https://react.dev/errors/"+m;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+m+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(m,f,p){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:x==null?null:""+x,children:m,containerInfo:f,implementation:p}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,f){if(m==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return sr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sr.createPortal=function(m,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(m,f,null,p)},sr.flushSync=function(m){var f=u.T,p=r.p;try{if(u.T=null,r.p=2,m)return m()}finally{u.T=f,r.p=p,r.d.f()}},sr.preconnect=function(m,f){typeof m=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(m,f))},sr.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},sr.preinit=function(m,f){if(typeof m=="string"&&f&&typeof f.as=="string"){var p=f.as,x=h(p,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,j=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(m,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:j}):p==="script"&&r.d.X(m,{crossOrigin:x,integrity:b,fetchPriority:j,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},sr.preinitModule=function(m,f){if(typeof m=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=h(f.as,f.crossOrigin);r.d.M(m,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(m)},sr.preload=function(m,f){if(typeof m=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,x=h(p,f.crossOrigin);r.d.L(m,p,{crossOrigin:x,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},sr.preloadModule=function(m,f){if(typeof m=="string")if(f){var p=h(f.as,f.crossOrigin);r.d.m(m,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(m)},sr.requestFormReset=function(m){r.d.r(m)},sr.unstable_batchedUpdates=function(m,f){return m(f)},sr.useFormState=function(m,f,p){return u.H.useFormState(m,f,p)},sr.useFormStatus=function(){return u.H.useHostTransitionStatus()},sr.version="19.1.1",sr}var b_;function Yk(){if(b_)return Wg.exports;b_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Wg.exports=Zk(),Wg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function Kk(){if(v_)return Xu;v_=1;var t=Vk(),e=Lx(),s=Yk();function r(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var l=a,c=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(c=l.return),a=l.return;while(a)}return l.tag===3?c:null}function u(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function h(a){if(o(a)!==a)throw Error(r(188))}function m(a){var l=a.alternate;if(!l){if(l=o(a),l===null)throw Error(r(188));return l!==a?null:a}for(var c=a,d=l;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return h(g),a;if(y===d)return h(g),l;y=y.sibling}throw Error(r(188))}if(c.return!==d.return)c=g,d=y;else{for(var T=!1,I=g.child;I;){if(I===c){T=!0,c=g,d=y;break}if(I===d){T=!0,d=g,c=y;break}I=I.sibling}if(!T){for(I=y.child;I;){if(I===c){T=!0,c=y,d=g;break}if(I===d){T=!0,d=y,c=g;break}I=I.sibling}if(!T)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:l}function f(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=f(a),l!==null)return l;a=a.sibling}return null}var p=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function D(a){return a===null||typeof a!="object"?null:(a=R&&a[R]||a["@@iterator"],typeof a=="function"?a:null)}var q=Symbol.for("react.client.reference");function H(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===q?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case v:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case k:return"Suspense";case L:return"SuspenseList";case C:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case j:return"Portal";case O:return(a.displayName||"Context")+".Provider";case A:return(a._context.displayName||"Context")+".Consumer";case F:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case B:return l=a.displayName||null,l!==null?l:H(a.type)||"Memo";case w:l=a._payload,a=a._init;try{return H(a(l))}catch{}}return null}var X=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},de=[],U=-1;function J(a){return{current:a}}function le(a){0>U||(a.current=de[U],de[U]=null,U--)}function ee(a,l){U++,de[U]=a.current,a.current=l}var xe=J(null),we=J(null),Ae=J(null),Me=J(null);function Se(a,l){switch(ee(Ae,l),ee(we,a),ee(xe,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?Uw(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=Uw(l),a=Bw(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}le(xe),ee(xe,a)}function Oe(){le(xe),le(we),le(Ae)}function Le(a){a.memoizedState!==null&&ee(Me,a);var l=xe.current,c=Bw(l,a.type);l!==c&&(ee(we,a),ee(xe,c))}function Re(a){we.current===a&&(le(xe),le(we)),Me.current===a&&(le(Me),Gu._currentValue=Q)}var qe=Object.prototype.hasOwnProperty,Ze=t.unstable_scheduleCallback,Ke=t.unstable_cancelCallback,Je=t.unstable_shouldYield,rt=t.unstable_requestPaint,bt=t.unstable_now,ut=t.unstable_getCurrentPriorityLevel,vt=t.unstable_ImmediatePriority,G=t.unstable_UserBlockingPriority,re=t.unstable_NormalPriority,me=t.unstable_LowPriority,ke=t.unstable_IdlePriority,Ee=t.log,Ce=t.unstable_setDisableYieldValue,Te=null,Pe=null;function We(a){if(typeof Ee=="function"&&Ce(a),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(Te,a)}catch{}}var gt=Math.clz32?Math.clz32:Ss,es=Math.log,ts=Math.LN2;function Ss(a){return a>>>=0,a===0?32:31-(es(a)/ts|0)|0}var Ms=256,Gs=4194304;function Qs(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Gr(a,l,c){var d=a.pendingLanes;if(d===0)return 0;var g=0,y=a.suspendedLanes,T=a.pingedLanes;a=a.warmLanes;var I=d&134217727;return I!==0?(d=I&~y,d!==0?g=Qs(d):(T&=I,T!==0?g=Qs(T):c||(c=I&~a,c!==0&&(g=Qs(c))))):(I=d&~y,I!==0?g=Qs(I):T!==0?g=Qs(T):c||(c=d&~a,c!==0&&(g=Qs(c)))),g===0?0:l!==0&&l!==g&&(l&y)===0&&(y=g&-g,c=l&-l,y>=c||y===32&&(c&4194048)!==0)?l:g}function fr(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function Zr(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pr(){var a=Ms;return Ms<<=1,(Ms&4194048)===0&&(Ms=256),a}function va(){var a=Gs;return Gs<<=1,(Gs&62914560)===0&&(Gs=4194304),a}function wa(a){for(var l=[],c=0;31>c;c++)l.push(a);return l}function kr(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function hl(a,l,c,d,g,y){var T=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var I=a.entanglements,Y=a.expirationTimes,ie=a.hiddenUpdates;for(c=T&~c;0<c;){var ye=31-gt(c),_e=1<<ye;I[ye]=0,Y[ye]=-1;var oe=ie[ye];if(oe!==null)for(ie[ye]=null,ye=0;ye<oe.length;ye++){var ce=oe[ye];ce!==null&&(ce.lane&=-536870913)}c&=~_e}d!==0&&Gn(a,d,0),y!==0&&g===0&&a.tag!==0&&(a.suspendedLanes|=y&~(T&~l))}function Gn(a,l,c){a.pendingLanes|=l,a.suspendedLanes&=~l;var d=31-gt(l);a.entangledLanes|=l,a.entanglements[d]=a.entanglements[d]|1073741824|c&4194090}function ci(a,l){var c=a.entangledLanes|=l;for(a=a.entanglements;c;){var d=31-gt(c),g=1<<d;g&l|a[d]&l&&(a[d]|=l),c&=~g}}function _a(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function ja(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function fn(){var a=Z.p;return a!==0?a:(a=window.event,a===void 0?32:i_(a.type))}function No(a,l){var c=Z.p;try{return Z.p=a,l()}finally{Z.p=c}}var Ds=Math.random().toString(36).slice(2),ys="__reactFiber$"+Ds,Ls="__reactProps$"+Ds,Zn="__reactContainer$"+Ds,ui="__reactEvents$"+Ds,ml="__reactListeners$"+Ds,Es="__reactHandles$"+Ds,So="__reactResources$"+Ds,Na="__reactMarker$"+Ds;function fl(a){delete a[ys],delete a[Ls],delete a[ui],delete a[ml],delete a[Es]}function Yn(a){var l=a[ys];if(l)return l;for(var c=a.parentNode;c;){if(l=c[Zn]||c[ys]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(a=Vw(a);a!==null;){if(c=a[ys])return c;a=Vw(a)}return l}a=c,c=a.parentNode}return null}function Kn(a){if(a=a[ys]||a[Zn]){var l=a.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return a}return null}function ss(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(r(33))}function Wn(a){var l=a[So];return l||(l=a[So]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function rs(a){a[Na]=!0}var Eo=new Set,Co={};function pn(a,l){os(a,l),os(a+"Capture",l)}function os(a,l){for(Co[a]=l,a=0;a<l.length;a++)Eo.add(l[a])}var ru=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ao={},ko={};function nu(a){return qe.call(ko,a)?!0:qe.call(Ao,a)?!1:ru.test(a)?ko[a]=!0:(Ao[a]=!0,!1)}function di(a,l,c){if(nu(l))if(c===null)a.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+c)}}function gn(a,l,c){if(c===null)a.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+c)}}function gr(a,l,c,d){if(d===null)a.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(l,c,""+d)}}var Qn,Tr;function Yr(a){if(Qn===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);Qn=l&&l[1]||"",Tr=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qn+a+Tr}var pl=!1;function gl(a,l){if(!a||pl)return"";pl=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(ce){var oe=ce}Reflect.construct(a,[],_e)}else{try{_e.call()}catch(ce){oe=ce}a.call(_e.prototype)}}else{try{throw Error()}catch(ce){oe=ce}(_e=a())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(ce){if(ce&&oe&&typeof ce.stack=="string")return[ce.stack,oe.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),T=y[0],I=y[1];if(T&&I){var Y=T.split(`
`),ie=I.split(`
`);for(g=d=0;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;for(;g<ie.length&&!ie[g].includes("DetermineComponentFrameRoot");)g++;if(d===Y.length||g===ie.length)for(d=Y.length-1,g=ie.length-1;1<=d&&0<=g&&Y[d]!==ie[g];)g--;for(;1<=d&&0<=g;d--,g--)if(Y[d]!==ie[g]){if(d!==1||g!==1)do if(d--,g--,0>g||Y[d]!==ie[g]){var ye=`
`+Y[d].replace(" at new "," at ");return a.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",a.displayName)),ye}while(1<=d&&0<=g);break}}}finally{pl=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?Yr(c):""}function au(a){switch(a.tag){case 26:case 27:case 5:return Yr(a.type);case 16:return Yr("Lazy");case 13:return Yr("Suspense");case 19:return Yr("SuspenseList");case 0:case 15:return gl(a.type,!1);case 11:return gl(a.type.render,!1);case 1:return gl(a.type,!0);case 31:return Yr("Activity");default:return""}}function To(a){try{var l="";do l+=au(a),a=a.return;while(a);return l}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Xs(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Sa(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function xl(a){var l=Sa(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),d=""+a[l];if(!a.hasOwnProperty(l)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,y=c.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return g.call(this)},set:function(T){d=""+T,y.call(this,T)}}),Object.defineProperty(a,l,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Kr(a){a._valueTracker||(a._valueTracker=xl(a))}function yl(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var c=l.getValue(),d="";return a&&(d=Sa(a)?a.checked?"true":"false":a.value),a=d,a!==c?(l.setValue(a),!0):!1}function Ea(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var iu=/[\n"\\]/g;function Js(a){return a.replace(iu,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function bl(a,l,c,d,g,y,T,I){a.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?a.type=T:a.removeAttribute("type"),l!=null?T==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+Xs(l)):a.value!==""+Xs(l)&&(a.value=""+Xs(l)):T!=="submit"&&T!=="reset"||a.removeAttribute("value"),l!=null?Ca(a,T,Xs(l)):c!=null?Ca(a,T,Xs(c)):d!=null&&a.removeAttribute("value"),g==null&&y!=null&&(a.defaultChecked=!!y),g!=null&&(a.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?a.name=""+Xs(I):a.removeAttribute("name")}function Oo(a,l,c,d,g,y,T,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(a.type=y),l!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||l!=null))return;c=c!=null?""+Xs(c):"",l=l!=null?""+Xs(l):c,I||l===a.value||(a.value=l),a.defaultValue=l}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=I?a.checked:!!d,a.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(a.name=T)}function Ca(a,l,c){l==="number"&&Ea(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function Xn(a,l,c,d){if(a=a.options,l){l={};for(var g=0;g<c.length;g++)l["$"+c[g]]=!0;for(c=0;c<a.length;c++)g=l.hasOwnProperty("$"+a[c].value),a[c].selected!==g&&(a[c].selected=g),g&&d&&(a[c].defaultSelected=!0)}else{for(c=""+Xs(c),l=null,g=0;g<a.length;g++){if(a[g].value===c){a[g].selected=!0,d&&(a[g].defaultSelected=!0);return}l!==null||a[g].disabled||(l=a[g])}l!==null&&(l.selected=!0)}}function Ro(a,l,c){if(l!=null&&(l=""+Xs(l),l!==a.value&&(a.value=l),c==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=c!=null?""+Xs(c):""}function Jn(a,l,c,d){if(l==null){if(d!=null){if(c!=null)throw Error(r(92));if(X(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),l=c}c=Xs(l),a.defaultValue=c,d=a.textContent,d===c&&d!==""&&d!==null&&(a.value=d)}function qs(a,l){if(l){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=l;return}}a.textContent=l}var xn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wr(a,l,c){var d=l.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":d?a.setProperty(l,c):typeof c!="number"||c===0||xn.has(l)?l==="float"?a.cssFloat=c:a[l]=(""+c).trim():a[l]=c+"px"}function Mo(a,l,c){if(l!=null&&typeof l!="object")throw Error(r(62));if(a=a.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var g in l)d=l[g],l.hasOwnProperty(g)&&c[g]!==d&&Wr(a,g,d)}else for(var y in l)l.hasOwnProperty(y)&&Wr(a,y,l[y])}function xr(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ou=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hi(a){return ou.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var vl=null;function mi(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ns=null,yn=null;function wl(a){var l=Kn(a);if(l&&(a=l.stateNode)){var c=a[Ls]||null;e:switch(a=l.stateNode,l.type){case"input":if(bl(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),l=c.name,c.type==="radio"&&l!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Js(""+l)+'"][type="radio"]'),l=0;l<c.length;l++){var d=c[l];if(d!==a&&d.form===a.form){var g=d[Ls]||null;if(!g)throw Error(r(90));bl(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(l=0;l<c.length;l++)d=c[l],d.form===a.form&&yl(d)}break e;case"textarea":Ro(a,c.value,c.defaultValue);break e;case"select":l=c.value,l!=null&&Xn(a,!!c.multiple,l,!1)}}}var ea=!1;function fi(a,l,c){if(ea)return a(l,c);ea=!0;try{var d=a(l);return d}finally{if(ea=!1,(ns!==null||yn!==null)&&(Hh(),ns&&(l=ns,a=yn,yn=ns=null,wl(l),a)))for(l=0;l<a.length;l++)wl(a[l])}}function Qr(a,l){var c=a.stateNode;if(c===null)return null;var d=c[Ls]||null;if(d===null)return null;c=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,l,typeof c));return c}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pi=!1;if(Or)try{var bn={};Object.defineProperty(bn,"passive",{get:function(){pi=!0}}),window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,bn)}catch{pi=!1}var Rr=null,yr=null,Aa=null;function gi(){if(Aa)return Aa;var a,l=yr,c=l.length,d,g="value"in Rr?Rr.value:Rr.textContent,y=g.length;for(a=0;a<c&&l[a]===g[a];a++);var T=c-a;for(d=1;d<=T&&l[c-d]===g[y-d];d++);return Aa=g.slice(a,1<d?1-d:void 0)}function xi(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function yi(){return!0}function N(){return!1}function $(a){function l(c,d,g,y,T){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var I in a)a.hasOwnProperty(I)&&(c=a[I],this[I]=c?c(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?yi:N,this.isPropagationStopped=N,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=yi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=yi)},persist:function(){},isPersistent:yi}),l}var K={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ge=$(K),tt=p({},K,{view:0,detail:0}),Ve=$(tt),xt,dt,It,yt=p({},tt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jf,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==It&&(It&&a.type==="mousemove"?(xt=a.screenX-It.screenX,dt=a.screenY-It.screenY):dt=xt=0,It=a),xt)},movementY:function(a){return"movementY"in a?a.movementY:dt}}),Cs=$(yt),er=p({},yt,{dataTransfer:0}),cs=$(er),Ps=p({},tt,{relatedTarget:0}),us=$(Ps),ta=p({},K,{animationName:0,elapsedTime:0,pseudoElement:0}),vn=$(ta),ka=p({},K,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),uh=$(ka),Do=p({},K,{data:0}),_l=$(Do),KC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XC(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=QC[a])?!!l[a]:!1}function Jf(){return XC}var JC=p({},tt,{key:function(a){if(a.key){var l=KC[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=xi(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?WC[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jf,charCode:function(a){return a.type==="keypress"?xi(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?xi(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),eA=$(JC),tA=p({},yt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yy=$(tA),sA=p({},tt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jf}),rA=$(sA),nA=p({},K,{propertyName:0,elapsedTime:0,pseudoElement:0}),aA=$(nA),iA=p({},yt,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),lA=$(iA),oA=p({},K,{newState:0,oldState:0}),cA=$(oA),uA=[9,13,27,32],ep=Or&&"CompositionEvent"in window,cu=null;Or&&"documentMode"in document&&(cu=document.documentMode);var dA=Or&&"TextEvent"in window&&!cu,Ky=Or&&(!ep||cu&&8<cu&&11>=cu),Wy=" ",Qy=!1;function Xy(a,l){switch(a){case"keyup":return uA.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jy(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Lo=!1;function hA(a,l){switch(a){case"compositionend":return Jy(l);case"keypress":return l.which!==32?null:(Qy=!0,Wy);case"textInput":return a=l.data,a===Wy&&Qy?null:a;default:return null}}function mA(a,l){if(Lo)return a==="compositionend"||!ep&&Xy(a,l)?(a=gi(),Aa=yr=Rr=null,Lo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Ky&&l.locale!=="ko"?null:l.data;default:return null}}var fA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eb(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!fA[a.type]:l==="textarea"}function tb(a,l,c,d){ns?yn?yn.push(d):yn=[d]:ns=d,l=Wh(l,"onChange"),0<l.length&&(c=new ge("onChange","change",null,c,d),a.push({event:c,listeners:l}))}var uu=null,du=null;function pA(a){Lw(a,0)}function dh(a){var l=ss(a);if(yl(l))return a}function sb(a,l){if(a==="change")return l}var rb=!1;if(Or){var tp;if(Or){var sp="oninput"in document;if(!sp){var nb=document.createElement("div");nb.setAttribute("oninput","return;"),sp=typeof nb.oninput=="function"}tp=sp}else tp=!1;rb=tp&&(!document.documentMode||9<document.documentMode)}function ab(){uu&&(uu.detachEvent("onpropertychange",ib),du=uu=null)}function ib(a){if(a.propertyName==="value"&&dh(du)){var l=[];tb(l,du,a,mi(a)),fi(pA,l)}}function gA(a,l,c){a==="focusin"?(ab(),uu=l,du=c,uu.attachEvent("onpropertychange",ib)):a==="focusout"&&ab()}function xA(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return dh(du)}function yA(a,l){if(a==="click")return dh(l)}function bA(a,l){if(a==="input"||a==="change")return dh(l)}function vA(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Mr=typeof Object.is=="function"?Object.is:vA;function hu(a,l){if(Mr(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var c=Object.keys(a),d=Object.keys(l);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!qe.call(l,g)||!Mr(a[g],l[g]))return!1}return!0}function lb(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ob(a,l){var c=lb(a);a=0;for(var d;c;){if(c.nodeType===3){if(d=a+c.textContent.length,a<=l&&d>=l)return{node:c,offset:l-a};a=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=lb(c)}}function cb(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?cb(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function ub(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=Ea(a.document);l instanceof a.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)a=l.contentWindow;else break;l=Ea(a.document)}return l}function rp(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var wA=Or&&"documentMode"in document&&11>=document.documentMode,qo=null,np=null,mu=null,ap=!1;function db(a,l,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ap||qo==null||qo!==Ea(d)||(d=qo,"selectionStart"in d&&rp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),mu&&hu(mu,d)||(mu=d,d=Wh(np,"onSelect"),0<d.length&&(l=new ge("onSelect","select",null,l,c),a.push({event:l,listeners:d}),l.target=qo)))}function jl(a,l){var c={};return c[a.toLowerCase()]=l.toLowerCase(),c["Webkit"+a]="webkit"+l,c["Moz"+a]="moz"+l,c}var Po={animationend:jl("Animation","AnimationEnd"),animationiteration:jl("Animation","AnimationIteration"),animationstart:jl("Animation","AnimationStart"),transitionrun:jl("Transition","TransitionRun"),transitionstart:jl("Transition","TransitionStart"),transitioncancel:jl("Transition","TransitionCancel"),transitionend:jl("Transition","TransitionEnd")},ip={},hb={};Or&&(hb=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function Nl(a){if(ip[a])return ip[a];if(!Po[a])return a;var l=Po[a],c;for(c in l)if(l.hasOwnProperty(c)&&c in hb)return ip[a]=l[c];return a}var mb=Nl("animationend"),fb=Nl("animationiteration"),pb=Nl("animationstart"),_A=Nl("transitionrun"),jA=Nl("transitionstart"),NA=Nl("transitioncancel"),gb=Nl("transitionend"),xb=new Map,lp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lp.push("scrollEnd");function wn(a,l){xb.set(a,l),pn(l,[a])}var yb=new WeakMap;function Xr(a,l){if(typeof a=="object"&&a!==null){var c=yb.get(a);return c!==void 0?c:(l={value:a,source:l,stack:To(l)},yb.set(a,l),l)}return{value:a,source:l,stack:To(l)}}var Jr=[],Io=0,op=0;function hh(){for(var a=Io,l=op=Io=0;l<a;){var c=Jr[l];Jr[l++]=null;var d=Jr[l];Jr[l++]=null;var g=Jr[l];Jr[l++]=null;var y=Jr[l];if(Jr[l++]=null,d!==null&&g!==null){var T=d.pending;T===null?g.next=g:(g.next=T.next,T.next=g),d.pending=g}y!==0&&bb(c,g,y)}}function mh(a,l,c,d){Jr[Io++]=a,Jr[Io++]=l,Jr[Io++]=c,Jr[Io++]=d,op|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function cp(a,l,c,d){return mh(a,l,c,d),fh(a)}function $o(a,l){return mh(a,null,null,l),fh(a)}function bb(a,l,c){a.lanes|=c;var d=a.alternate;d!==null&&(d.lanes|=c);for(var g=!1,y=a.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(a=y.stateNode,a===null||a._visibility&1||(g=!0)),a=y,y=y.return;return a.tag===3?(y=a.stateNode,g&&l!==null&&(g=31-gt(c),a=y.hiddenUpdates,d=a[g],d===null?a[g]=[l]:d.push(l),l.lane=c|536870912),y):null}function fh(a){if(50<Iu)throw Iu=0,pg=null,Error(r(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var Uo={};function SA(a,l,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(a,l,c,d){return new SA(a,l,c,d)}function up(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ta(a,l){var c=a.alternate;return c===null?(c=Dr(a.tag,l,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=l,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,l=a.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function vb(a,l){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,l=c.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function ph(a,l,c,d,g,y){var T=0;if(d=a,typeof a=="function")up(a)&&(T=1);else if(typeof a=="string")T=Ck(a,c,xe.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case C:return a=Dr(31,c,l,g),a.elementType=C,a.lanes=y,a;case v:return Sl(c.children,g,y,l);case S:T=8,g|=24;break;case _:return a=Dr(12,c,l,g|2),a.elementType=_,a.lanes=y,a;case k:return a=Dr(13,c,l,g),a.elementType=k,a.lanes=y,a;case L:return a=Dr(19,c,l,g),a.elementType=L,a.lanes=y,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case E:case O:T=10;break e;case A:T=9;break e;case F:T=11;break e;case B:T=14;break e;case w:T=16,d=null;break e}T=29,c=Error(r(130,a===null?"null":typeof a,"")),d=null}return l=Dr(T,c,l,g),l.elementType=a,l.type=d,l.lanes=y,l}function Sl(a,l,c,d){return a=Dr(7,a,d,l),a.lanes=c,a}function dp(a,l,c){return a=Dr(6,a,null,l),a.lanes=c,a}function hp(a,l,c){return l=Dr(4,a.children!==null?a.children:[],a.key,l),l.lanes=c,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var Bo=[],zo=0,gh=null,xh=0,en=[],tn=0,El=null,Oa=1,Ra="";function Cl(a,l){Bo[zo++]=xh,Bo[zo++]=gh,gh=a,xh=l}function wb(a,l,c){en[tn++]=Oa,en[tn++]=Ra,en[tn++]=El,El=a;var d=Oa;a=Ra;var g=32-gt(d)-1;d&=~(1<<g),c+=1;var y=32-gt(l)+g;if(30<y){var T=g-g%5;y=(d&(1<<T)-1).toString(32),d>>=T,g-=T,Oa=1<<32-gt(l)+g|c<<g|d,Ra=y+a}else Oa=1<<y|c<<g|d,Ra=a}function mp(a){a.return!==null&&(Cl(a,1),wb(a,1,0))}function fp(a){for(;a===gh;)gh=Bo[--zo],Bo[zo]=null,xh=Bo[--zo],Bo[zo]=null;for(;a===El;)El=en[--tn],en[tn]=null,Ra=en[--tn],en[tn]=null,Oa=en[--tn],en[tn]=null}var lr=null,as=null,St=!1,Al=null,sa=!1,pp=Error(r(519));function kl(a){var l=Error(r(418,""));throw gu(Xr(l,a)),pp}function _b(a){var l=a.stateNode,c=a.type,d=a.memoizedProps;switch(l[ys]=a,l[Ls]=d,c){case"dialog":mt("cancel",l),mt("close",l);break;case"iframe":case"object":case"embed":mt("load",l);break;case"video":case"audio":for(c=0;c<Uu.length;c++)mt(Uu[c],l);break;case"source":mt("error",l);break;case"img":case"image":case"link":mt("error",l),mt("load",l);break;case"details":mt("toggle",l);break;case"input":mt("invalid",l),Oo(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Kr(l);break;case"select":mt("invalid",l);break;case"textarea":mt("invalid",l),Jn(l,d.value,d.defaultValue,d.children),Kr(l)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||l.textContent===""+c||d.suppressHydrationWarning===!0||$w(l.textContent,c)?(d.popover!=null&&(mt("beforetoggle",l),mt("toggle",l)),d.onScroll!=null&&mt("scroll",l),d.onScrollEnd!=null&&mt("scrollend",l),d.onClick!=null&&(l.onclick=Qh),l=!0):l=!1,l||kl(a)}function jb(a){for(lr=a.return;lr;)switch(lr.tag){case 5:case 13:sa=!1;return;case 27:case 3:sa=!0;return;default:lr=lr.return}}function fu(a){if(a!==lr)return!1;if(!St)return jb(a),St=!0,!1;var l=a.tag,c;if((c=l!==3&&l!==27)&&((c=l===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||Og(a.type,a.memoizedProps)),c=!c),c&&as&&kl(a),jb(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(l===0){as=jn(a.nextSibling);break e}l--}else c!=="$"&&c!=="$!"&&c!=="$?"||l++;a=a.nextSibling}as=null}}else l===27?(l=as,Di(a.type)?(a=Lg,Lg=null,as=a):as=l):as=lr?jn(a.stateNode.nextSibling):null;return!0}function pu(){as=lr=null,St=!1}function Nb(){var a=Al;return a!==null&&(wr===null?wr=a:wr.push.apply(wr,a),Al=null),a}function gu(a){Al===null?Al=[a]:Al.push(a)}var gp=J(null),Tl=null,Ma=null;function bi(a,l,c){ee(gp,l._currentValue),l._currentValue=c}function Da(a){a._currentValue=gp.current,le(gp)}function xp(a,l,c){for(;a!==null;){var d=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),a===c)break;a=a.return}}function yp(a,l,c,d){var g=a.child;for(g!==null&&(g.return=a);g!==null;){var y=g.dependencies;if(y!==null){var T=g.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=g;for(var Y=0;Y<l.length;Y++)if(I.context===l[Y]){y.lanes|=c,I=y.alternate,I!==null&&(I.lanes|=c),xp(y.return,c,a),d||(T=null);break e}y=I.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(r(341));T.lanes|=c,y=T.alternate,y!==null&&(y.lanes|=c),xp(T,c,a),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===a){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function xu(a,l,c,d){a=null;for(var g=l,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var I=g.type;Mr(g.pendingProps.value,T.value)||(a!==null?a.push(I):a=[I])}}else if(g===Me.current){if(T=g.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(a!==null?a.push(Gu):a=[Gu])}g=g.return}a!==null&&yp(l,a,c,d),l.flags|=262144}function yh(a){for(a=a.firstContext;a!==null;){if(!Mr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ol(a){Tl=a,Ma=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function tr(a){return Sb(Tl,a)}function bh(a,l){return Tl===null&&Ol(a),Sb(a,l)}function Sb(a,l){var c=l._currentValue;if(l={context:l,memoizedValue:c,next:null},Ma===null){if(a===null)throw Error(r(308));Ma=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else Ma=Ma.next=l;return c}var EA=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(c,d){a.push(d)}};this.abort=function(){l.aborted=!0,a.forEach(function(c){return c()})}},CA=t.unstable_scheduleCallback,AA=t.unstable_NormalPriority,As={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bp(){return{controller:new EA,data:new Map,refCount:0}}function yu(a){a.refCount--,a.refCount===0&&CA(AA,function(){a.controller.abort()})}var bu=null,vp=0,Fo=0,Ho=null;function kA(a,l){if(bu===null){var c=bu=[];vp=0,Fo=_g(),Ho={status:"pending",value:void 0,then:function(d){c.push(d)}}}return vp++,l.then(Eb,Eb),l}function Eb(){if(--vp===0&&bu!==null){Ho!==null&&(Ho.status="fulfilled");var a=bu;bu=null,Fo=0,Ho=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function TA(a,l){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return a.then(function(){d.status="fulfilled",d.value=l;for(var g=0;g<c.length;g++)(0,c[g])(l)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var Cb=P.S;P.S=function(a,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&kA(a,l),Cb!==null&&Cb(a,l)};var Rl=J(null);function wp(){var a=Rl.current;return a!==null?a:$t.pooledCache}function vh(a,l){l===null?ee(Rl,Rl.current):ee(Rl,l.pool)}function Ab(){var a=wp();return a===null?null:{parent:As._currentValue,pool:a}}var vu=Error(r(460)),kb=Error(r(474)),wh=Error(r(542)),_p={then:function(){}};function Tb(a){return a=a.status,a==="fulfilled"||a==="rejected"}function _h(){}function Ob(a,l,c){switch(c=a[c],c===void 0?a.push(l):c!==l&&(l.then(_h,_h),l=c),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Mb(a),a;default:if(typeof l.status=="string")l.then(_h,_h);else{if(a=$t,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=l,a.status="pending",a.then(function(d){if(l.status==="pending"){var g=l;g.status="fulfilled",g.value=d}},function(d){if(l.status==="pending"){var g=l;g.status="rejected",g.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Mb(a),a}throw wu=l,vu}}var wu=null;function Rb(){if(wu===null)throw Error(r(459));var a=wu;return wu=null,a}function Mb(a){if(a===vu||a===wh)throw Error(r(483))}var vi=!1;function jp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Np(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function wi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function _i(a,l,c){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(kt&2)!==0){var g=d.pending;return g===null?l.next=l:(l.next=g.next,g.next=l),d.pending=l,l=fh(a),bb(a,null,c),l}return mh(a,d,l,c),fh(a)}function _u(a,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194048)!==0)){var d=l.lanes;d&=a.pendingLanes,c|=d,l.lanes=c,ci(a,c)}}function Sp(a,l){var c=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=T:y=y.next=T,c=c.next}while(c!==null);y===null?g=y=l:y=y.next=l}else g=y=l;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=l}var Ep=!1;function ju(){if(Ep){var a=Ho;if(a!==null)throw a}}function Nu(a,l,c,d){Ep=!1;var g=a.updateQueue;vi=!1;var y=g.firstBaseUpdate,T=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var Y=I,ie=Y.next;Y.next=null,T===null?y=ie:T.next=ie,T=Y;var ye=a.alternate;ye!==null&&(ye=ye.updateQueue,I=ye.lastBaseUpdate,I!==T&&(I===null?ye.firstBaseUpdate=ie:I.next=ie,ye.lastBaseUpdate=Y))}if(y!==null){var _e=g.baseState;T=0,ye=ie=Y=null,I=y;do{var oe=I.lane&-536870913,ce=oe!==I.lane;if(ce?(wt&oe)===oe:(d&oe)===oe){oe!==0&&oe===Fo&&(Ep=!0),ye!==null&&(ye=ye.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var st=a,Xe=I;oe=l;var Lt=c;switch(Xe.tag){case 1:if(st=Xe.payload,typeof st=="function"){_e=st.call(Lt,_e,oe);break e}_e=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=Xe.payload,oe=typeof st=="function"?st.call(Lt,_e,oe):st,oe==null)break e;_e=p({},_e,oe);break e;case 2:vi=!0}}oe=I.callback,oe!==null&&(a.flags|=64,ce&&(a.flags|=8192),ce=g.callbacks,ce===null?g.callbacks=[oe]:ce.push(oe))}else ce={lane:oe,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ye===null?(ie=ye=ce,Y=_e):ye=ye.next=ce,T|=oe;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;ce=I,I=ce.next,ce.next=null,g.lastBaseUpdate=ce,g.shared.pending=null}}while(!0);ye===null&&(Y=_e),g.baseState=Y,g.firstBaseUpdate=ie,g.lastBaseUpdate=ye,y===null&&(g.shared.lanes=0),Ti|=T,a.lanes=T,a.memoizedState=_e}}function Db(a,l){if(typeof a!="function")throw Error(r(191,a));a.call(l)}function Lb(a,l){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)Db(c[a],l)}var Vo=J(null),jh=J(0);function qb(a,l){a=Ba,ee(jh,a),ee(Vo,l),Ba=a|l.baseLanes}function Cp(){ee(jh,Ba),ee(Vo,Vo.current)}function Ap(){Ba=jh.current,le(Vo),le(jh)}var ji=0,lt=null,Mt=null,bs=null,Nh=!1,Go=!1,Ml=!1,Sh=0,Su=0,Zo=null,OA=0;function ds(){throw Error(r(321))}function kp(a,l){if(l===null)return!1;for(var c=0;c<l.length&&c<a.length;c++)if(!Mr(a[c],l[c]))return!1;return!0}function Tp(a,l,c,d,g,y){return ji=y,lt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,P.H=a===null||a.memoizedState===null?bv:vv,Ml=!1,y=c(d,g),Ml=!1,Go&&(y=Ib(l,c,d,g)),Pb(a),y}function Pb(a){P.H=Oh;var l=Mt!==null&&Mt.next!==null;if(ji=0,bs=Mt=lt=null,Nh=!1,Su=0,Zo=null,l)throw Error(r(300));a===null||Is||(a=a.dependencies,a!==null&&yh(a)&&(Is=!0))}function Ib(a,l,c,d){lt=a;var g=0;do{if(Go&&(Zo=null),Su=0,Go=!1,25<=g)throw Error(r(301));if(g+=1,bs=Mt=null,a.updateQueue!=null){var y=a.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}P.H=IA,y=l(c,d)}while(Go);return y}function RA(){var a=P.H,l=a.useState()[0];return l=typeof l.then=="function"?Eu(l):l,a=a.useState()[0],(Mt!==null?Mt.memoizedState:null)!==a&&(lt.flags|=1024),l}function Op(){var a=Sh!==0;return Sh=0,a}function Rp(a,l,c){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~c}function Mp(a){if(Nh){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}Nh=!1}ji=0,bs=Mt=lt=null,Go=!1,Su=Sh=0,Zo=null}function br(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bs===null?lt.memoizedState=bs=a:bs=bs.next=a,bs}function vs(){if(Mt===null){var a=lt.alternate;a=a!==null?a.memoizedState:null}else a=Mt.next;var l=bs===null?lt.memoizedState:bs.next;if(l!==null)bs=l,Mt=a;else{if(a===null)throw lt.alternate===null?Error(r(467)):Error(r(310));Mt=a,a={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},bs===null?lt.memoizedState=bs=a:bs=bs.next=a}return bs}function Dp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eu(a){var l=Su;return Su+=1,Zo===null&&(Zo=[]),a=Ob(Zo,a,l),l=lt,(bs===null?l.memoizedState:bs.next)===null&&(l=l.alternate,P.H=l===null||l.memoizedState===null?bv:vv),a}function Eh(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Eu(a);if(a.$$typeof===O)return tr(a)}throw Error(r(438,String(a)))}function Lp(a){var l=null,c=lt.updateQueue;if(c!==null&&(l=c.memoCache),l==null){var d=lt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(g){return g.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),c===null&&(c=Dp(),lt.updateQueue=c),c.memoCache=l,c=l.data[l.index],c===void 0)for(c=l.data[l.index]=Array(a),d=0;d<a;d++)c[d]=z;return l.index++,c}function La(a,l){return typeof l=="function"?l(a):l}function Ch(a){var l=vs();return qp(l,Mt,a)}function qp(a,l,c){var d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var g=a.baseQueue,y=d.pending;if(y!==null){if(g!==null){var T=g.next;g.next=y.next,y.next=T}l.baseQueue=g=y,d.pending=null}if(y=a.baseState,g===null)a.memoizedState=y;else{l=g.next;var I=T=null,Y=null,ie=l,ye=!1;do{var _e=ie.lane&-536870913;if(_e!==ie.lane?(wt&_e)===_e:(ji&_e)===_e){var oe=ie.revertLane;if(oe===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),_e===Fo&&(ye=!0);else if((ji&oe)===oe){ie=ie.next,oe===Fo&&(ye=!0);continue}else _e={lane:0,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},Y===null?(I=Y=_e,T=y):Y=Y.next=_e,lt.lanes|=oe,Ti|=oe;_e=ie.action,Ml&&c(y,_e),y=ie.hasEagerState?ie.eagerState:c(y,_e)}else oe={lane:_e,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},Y===null?(I=Y=oe,T=y):Y=Y.next=oe,lt.lanes|=_e,Ti|=_e;ie=ie.next}while(ie!==null&&ie!==l);if(Y===null?T=y:Y.next=I,!Mr(y,a.memoizedState)&&(Is=!0,ye&&(c=Ho,c!==null)))throw c;a.memoizedState=y,a.baseState=T,a.baseQueue=Y,d.lastRenderedState=y}return g===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function Pp(a){var l=vs(),c=l.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var d=c.dispatch,g=c.pending,y=l.memoizedState;if(g!==null){c.pending=null;var T=g=g.next;do y=a(y,T.action),T=T.next;while(T!==g);Mr(y,l.memoizedState)||(Is=!0),l.memoizedState=y,l.baseQueue===null&&(l.baseState=y),c.lastRenderedState=y}return[y,d]}function $b(a,l,c){var d=lt,g=vs(),y=St;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=l();var T=!Mr((Mt||g).memoizedState,c);T&&(g.memoizedState=c,Is=!0),g=g.queue;var I=zb.bind(null,d,g,a);if(Cu(2048,8,I,[a]),g.getSnapshot!==l||T||bs!==null&&bs.memoizedState.tag&1){if(d.flags|=2048,Yo(9,Ah(),Bb.bind(null,d,g,c,l),null),$t===null)throw Error(r(349));y||(ji&124)!==0||Ub(d,l,c)}return c}function Ub(a,l,c){a.flags|=16384,a={getSnapshot:l,value:c},l=lt.updateQueue,l===null?(l=Dp(),lt.updateQueue=l,l.stores=[a]):(c=l.stores,c===null?l.stores=[a]:c.push(a))}function Bb(a,l,c,d){l.value=c,l.getSnapshot=d,Fb(l)&&Hb(a)}function zb(a,l,c){return c(function(){Fb(l)&&Hb(a)})}function Fb(a){var l=a.getSnapshot;a=a.value;try{var c=l();return!Mr(a,c)}catch{return!0}}function Hb(a){var l=$o(a,2);l!==null&&$r(l,a,2)}function Ip(a){var l=br();if(typeof a=="function"){var c=a;if(a=c(),Ml){We(!0);try{c()}finally{We(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:a},l}function Vb(a,l,c,d){return a.baseState=c,qp(a,Mt,typeof d=="function"?d:La)}function MA(a,l,c,d,g){if(Th(a))throw Error(r(485));if(a=l.action,a!==null){var y={payload:g,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};P.T!==null?c(!0):y.isTransition=!1,d(y),c=l.pending,c===null?(y.next=l.pending=y,Gb(l,y)):(y.next=c.next,l.pending=c.next=y)}}function Gb(a,l){var c=l.action,d=l.payload,g=a.state;if(l.isTransition){var y=P.T,T={};P.T=T;try{var I=c(g,d),Y=P.S;Y!==null&&Y(T,I),Zb(a,l,I)}catch(ie){$p(a,l,ie)}finally{P.T=y}}else try{y=c(g,d),Zb(a,l,y)}catch(ie){$p(a,l,ie)}}function Zb(a,l,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Yb(a,l,d)},function(d){return $p(a,l,d)}):Yb(a,l,c)}function Yb(a,l,c){l.status="fulfilled",l.value=c,Kb(l),a.state=c,l=a.pending,l!==null&&(c=l.next,c===l?a.pending=null:(c=c.next,l.next=c,Gb(a,c)))}function $p(a,l,c){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=c,Kb(l),l=l.next;while(l!==d)}a.action=null}function Kb(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function Wb(a,l){return l}function Qb(a,l){if(St){var c=$t.formState;if(c!==null){e:{var d=lt;if(St){if(as){t:{for(var g=as,y=sa;g.nodeType!==8;){if(!y){g=null;break t}if(g=jn(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){as=jn(g.nextSibling),d=g.data==="F!";break e}}kl(d)}d=!1}d&&(l=c[0])}}return c=br(),c.memoizedState=c.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wb,lastRenderedState:l},c.queue=d,c=gv.bind(null,lt,d),d.dispatch=c,d=Ip(!1),y=Hp.bind(null,lt,!1,d.queue),d=br(),g={state:l,dispatch:null,action:a,pending:null},d.queue=g,c=MA.bind(null,lt,g,y,c),g.dispatch=c,d.memoizedState=a,[l,c,!1]}function Xb(a){var l=vs();return Jb(l,Mt,a)}function Jb(a,l,c){if(l=qp(a,l,Wb)[0],a=Ch(La)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=Eu(l)}catch(T){throw T===vu?wh:T}else d=l;l=vs();var g=l.queue,y=g.dispatch;return c!==l.memoizedState&&(lt.flags|=2048,Yo(9,Ah(),DA.bind(null,g,c),null)),[d,y,a]}function DA(a,l){a.action=l}function ev(a){var l=vs(),c=Mt;if(c!==null)return Jb(l,c,a);vs(),l=l.memoizedState,c=vs();var d=c.queue.dispatch;return c.memoizedState=a,[l,d,!1]}function Yo(a,l,c,d){return a={tag:a,create:c,deps:d,inst:l,next:null},l=lt.updateQueue,l===null&&(l=Dp(),lt.updateQueue=l),c=l.lastEffect,c===null?l.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,l.lastEffect=a),a}function Ah(){return{destroy:void 0,resource:void 0}}function tv(){return vs().memoizedState}function kh(a,l,c,d){var g=br();d=d===void 0?null:d,lt.flags|=a,g.memoizedState=Yo(1|l,Ah(),c,d)}function Cu(a,l,c,d){var g=vs();d=d===void 0?null:d;var y=g.memoizedState.inst;Mt!==null&&d!==null&&kp(d,Mt.memoizedState.deps)?g.memoizedState=Yo(l,y,c,d):(lt.flags|=a,g.memoizedState=Yo(1|l,y,c,d))}function sv(a,l){kh(8390656,8,a,l)}function rv(a,l){Cu(2048,8,a,l)}function nv(a,l){return Cu(4,2,a,l)}function av(a,l){return Cu(4,4,a,l)}function iv(a,l){if(typeof l=="function"){a=a();var c=l(a);return function(){typeof c=="function"?c():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function lv(a,l,c){c=c!=null?c.concat([a]):null,Cu(4,4,iv.bind(null,l,a),c)}function Up(){}function ov(a,l){var c=vs();l=l===void 0?null:l;var d=c.memoizedState;return l!==null&&kp(l,d[1])?d[0]:(c.memoizedState=[a,l],a)}function cv(a,l){var c=vs();l=l===void 0?null:l;var d=c.memoizedState;if(l!==null&&kp(l,d[1]))return d[0];if(d=a(),Ml){We(!0);try{a()}finally{We(!1)}}return c.memoizedState=[d,l],d}function Bp(a,l,c){return c===void 0||(ji&1073741824)!==0?a.memoizedState=l:(a.memoizedState=c,a=hw(),lt.lanes|=a,Ti|=a,c)}function uv(a,l,c,d){return Mr(c,l)?c:Vo.current!==null?(a=Bp(a,c,d),Mr(a,l)||(Is=!0),a):(ji&42)===0?(Is=!0,a.memoizedState=c):(a=hw(),lt.lanes|=a,Ti|=a,l)}function dv(a,l,c,d,g){var y=Z.p;Z.p=y!==0&&8>y?y:8;var T=P.T,I={};P.T=I,Hp(a,!1,l,c);try{var Y=g(),ie=P.S;if(ie!==null&&ie(I,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ye=TA(Y,d);Au(a,l,ye,Ir(a))}else Au(a,l,d,Ir(a))}catch(_e){Au(a,l,{then:function(){},status:"rejected",reason:_e},Ir())}finally{Z.p=y,P.T=T}}function LA(){}function zp(a,l,c,d){if(a.tag!==5)throw Error(r(476));var g=hv(a).queue;dv(a,g,l,Q,c===null?LA:function(){return mv(a),c(d)})}function hv(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:Q},next:null};var c={};return l.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:c},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function mv(a){var l=hv(a).next.queue;Au(a,l,{},Ir())}function Fp(){return tr(Gu)}function fv(){return vs().memoizedState}function pv(){return vs().memoizedState}function qA(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var c=Ir();a=wi(c);var d=_i(l,a,c);d!==null&&($r(d,l,c),_u(d,l,c)),l={cache:bp()},a.payload=l;return}l=l.return}}function PA(a,l,c){var d=Ir();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Th(a)?xv(l,c):(c=cp(a,l,c,d),c!==null&&($r(c,a,d),yv(c,l,d)))}function gv(a,l,c){var d=Ir();Au(a,l,c,d)}function Au(a,l,c,d){var g={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Th(a))xv(l,g);else{var y=a.alternate;if(a.lanes===0&&(y===null||y.lanes===0)&&(y=l.lastRenderedReducer,y!==null))try{var T=l.lastRenderedState,I=y(T,c);if(g.hasEagerState=!0,g.eagerState=I,Mr(I,T))return mh(a,l,g,0),$t===null&&hh(),!1}catch{}finally{}if(c=cp(a,l,g,d),c!==null)return $r(c,a,d),yv(c,l,d),!0}return!1}function Hp(a,l,c,d){if(d={lane:2,revertLane:_g(),action:d,hasEagerState:!1,eagerState:null,next:null},Th(a)){if(l)throw Error(r(479))}else l=cp(a,c,d,2),l!==null&&$r(l,a,2)}function Th(a){var l=a.alternate;return a===lt||l!==null&&l===lt}function xv(a,l){Go=Nh=!0;var c=a.pending;c===null?l.next=l:(l.next=c.next,c.next=l),a.pending=l}function yv(a,l,c){if((c&4194048)!==0){var d=l.lanes;d&=a.pendingLanes,c|=d,l.lanes=c,ci(a,c)}}var Oh={readContext:tr,use:Eh,useCallback:ds,useContext:ds,useEffect:ds,useImperativeHandle:ds,useLayoutEffect:ds,useInsertionEffect:ds,useMemo:ds,useReducer:ds,useRef:ds,useState:ds,useDebugValue:ds,useDeferredValue:ds,useTransition:ds,useSyncExternalStore:ds,useId:ds,useHostTransitionStatus:ds,useFormState:ds,useActionState:ds,useOptimistic:ds,useMemoCache:ds,useCacheRefresh:ds},bv={readContext:tr,use:Eh,useCallback:function(a,l){return br().memoizedState=[a,l===void 0?null:l],a},useContext:tr,useEffect:sv,useImperativeHandle:function(a,l,c){c=c!=null?c.concat([a]):null,kh(4194308,4,iv.bind(null,l,a),c)},useLayoutEffect:function(a,l){return kh(4194308,4,a,l)},useInsertionEffect:function(a,l){kh(4,2,a,l)},useMemo:function(a,l){var c=br();l=l===void 0?null:l;var d=a();if(Ml){We(!0);try{a()}finally{We(!1)}}return c.memoizedState=[d,l],d},useReducer:function(a,l,c){var d=br();if(c!==void 0){var g=c(l);if(Ml){We(!0);try{c(l)}finally{We(!1)}}}else g=l;return d.memoizedState=d.baseState=g,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:g},d.queue=a,a=a.dispatch=PA.bind(null,lt,a),[d.memoizedState,a]},useRef:function(a){var l=br();return a={current:a},l.memoizedState=a},useState:function(a){a=Ip(a);var l=a.queue,c=gv.bind(null,lt,l);return l.dispatch=c,[a.memoizedState,c]},useDebugValue:Up,useDeferredValue:function(a,l){var c=br();return Bp(c,a,l)},useTransition:function(){var a=Ip(!1);return a=dv.bind(null,lt,a.queue,!0,!1),br().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,c){var d=lt,g=br();if(St){if(c===void 0)throw Error(r(407));c=c()}else{if(c=l(),$t===null)throw Error(r(349));(wt&124)!==0||Ub(d,l,c)}g.memoizedState=c;var y={value:c,getSnapshot:l};return g.queue=y,sv(zb.bind(null,d,y,a),[a]),d.flags|=2048,Yo(9,Ah(),Bb.bind(null,d,y,c,l),null),c},useId:function(){var a=br(),l=$t.identifierPrefix;if(St){var c=Ra,d=Oa;c=(d&~(1<<32-gt(d)-1)).toString(32)+c,l=""+l+"R"+c,c=Sh++,0<c&&(l+="H"+c.toString(32)),l+=""}else c=OA++,l=""+l+"r"+c.toString(32)+"";return a.memoizedState=l},useHostTransitionStatus:Fp,useFormState:Qb,useActionState:Qb,useOptimistic:function(a){var l=br();l.memoizedState=l.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=c,l=Hp.bind(null,lt,!0,c),c.dispatch=l,[a,l]},useMemoCache:Lp,useCacheRefresh:function(){return br().memoizedState=qA.bind(null,lt)}},vv={readContext:tr,use:Eh,useCallback:ov,useContext:tr,useEffect:rv,useImperativeHandle:lv,useInsertionEffect:nv,useLayoutEffect:av,useMemo:cv,useReducer:Ch,useRef:tv,useState:function(){return Ch(La)},useDebugValue:Up,useDeferredValue:function(a,l){var c=vs();return uv(c,Mt.memoizedState,a,l)},useTransition:function(){var a=Ch(La)[0],l=vs().memoizedState;return[typeof a=="boolean"?a:Eu(a),l]},useSyncExternalStore:$b,useId:fv,useHostTransitionStatus:Fp,useFormState:Xb,useActionState:Xb,useOptimistic:function(a,l){var c=vs();return Vb(c,Mt,a,l)},useMemoCache:Lp,useCacheRefresh:pv},IA={readContext:tr,use:Eh,useCallback:ov,useContext:tr,useEffect:rv,useImperativeHandle:lv,useInsertionEffect:nv,useLayoutEffect:av,useMemo:cv,useReducer:Pp,useRef:tv,useState:function(){return Pp(La)},useDebugValue:Up,useDeferredValue:function(a,l){var c=vs();return Mt===null?Bp(c,a,l):uv(c,Mt.memoizedState,a,l)},useTransition:function(){var a=Pp(La)[0],l=vs().memoizedState;return[typeof a=="boolean"?a:Eu(a),l]},useSyncExternalStore:$b,useId:fv,useHostTransitionStatus:Fp,useFormState:ev,useActionState:ev,useOptimistic:function(a,l){var c=vs();return Mt!==null?Vb(c,Mt,a,l):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:Lp,useCacheRefresh:pv},Ko=null,ku=0;function Rh(a){var l=ku;return ku+=1,Ko===null&&(Ko=[]),Ob(Ko,a,l)}function Tu(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function Mh(a,l){throw l.$$typeof===x?Error(r(525)):(a=Object.prototype.toString.call(l),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function wv(a){var l=a._init;return l(a._payload)}function _v(a){function l(te,W){if(a){var ne=te.deletions;ne===null?(te.deletions=[W],te.flags|=16):ne.push(W)}}function c(te,W){if(!a)return null;for(;W!==null;)l(te,W),W=W.sibling;return null}function d(te){for(var W=new Map;te!==null;)te.key!==null?W.set(te.key,te):W.set(te.index,te),te=te.sibling;return W}function g(te,W){return te=Ta(te,W),te.index=0,te.sibling=null,te}function y(te,W,ne){return te.index=ne,a?(ne=te.alternate,ne!==null?(ne=ne.index,ne<W?(te.flags|=67108866,W):ne):(te.flags|=67108866,W)):(te.flags|=1048576,W)}function T(te){return a&&te.alternate===null&&(te.flags|=67108866),te}function I(te,W,ne,ve){return W===null||W.tag!==6?(W=dp(ne,te.mode,ve),W.return=te,W):(W=g(W,ne),W.return=te,W)}function Y(te,W,ne,ve){var Ie=ne.type;return Ie===v?ye(te,W,ne.props.children,ve,ne.key):W!==null&&(W.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===w&&wv(Ie)===W.type)?(W=g(W,ne.props),Tu(W,ne),W.return=te,W):(W=ph(ne.type,ne.key,ne.props,null,te.mode,ve),Tu(W,ne),W.return=te,W)}function ie(te,W,ne,ve){return W===null||W.tag!==4||W.stateNode.containerInfo!==ne.containerInfo||W.stateNode.implementation!==ne.implementation?(W=hp(ne,te.mode,ve),W.return=te,W):(W=g(W,ne.children||[]),W.return=te,W)}function ye(te,W,ne,ve,Ie){return W===null||W.tag!==7?(W=Sl(ne,te.mode,ve,Ie),W.return=te,W):(W=g(W,ne),W.return=te,W)}function _e(te,W,ne){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=dp(""+W,te.mode,ne),W.return=te,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return ne=ph(W.type,W.key,W.props,null,te.mode,ne),Tu(ne,W),ne.return=te,ne;case j:return W=hp(W,te.mode,ne),W.return=te,W;case w:var ve=W._init;return W=ve(W._payload),_e(te,W,ne)}if(X(W)||D(W))return W=Sl(W,te.mode,ne,null),W.return=te,W;if(typeof W.then=="function")return _e(te,Rh(W),ne);if(W.$$typeof===O)return _e(te,bh(te,W),ne);Mh(te,W)}return null}function oe(te,W,ne,ve){var Ie=W!==null?W.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ie!==null?null:I(te,W,""+ne,ve);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case b:return ne.key===Ie?Y(te,W,ne,ve):null;case j:return ne.key===Ie?ie(te,W,ne,ve):null;case w:return Ie=ne._init,ne=Ie(ne._payload),oe(te,W,ne,ve)}if(X(ne)||D(ne))return Ie!==null?null:ye(te,W,ne,ve,null);if(typeof ne.then=="function")return oe(te,W,Rh(ne),ve);if(ne.$$typeof===O)return oe(te,W,bh(te,ne),ve);Mh(te,ne)}return null}function ce(te,W,ne,ve,Ie){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return te=te.get(ne)||null,I(W,te,""+ve,Ie);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case b:return te=te.get(ve.key===null?ne:ve.key)||null,Y(W,te,ve,Ie);case j:return te=te.get(ve.key===null?ne:ve.key)||null,ie(W,te,ve,Ie);case w:var ct=ve._init;return ve=ct(ve._payload),ce(te,W,ne,ve,Ie)}if(X(ve)||D(ve))return te=te.get(ne)||null,ye(W,te,ve,Ie,null);if(typeof ve.then=="function")return ce(te,W,ne,Rh(ve),Ie);if(ve.$$typeof===O)return ce(te,W,ne,bh(W,ve),Ie);Mh(W,ve)}return null}function st(te,W,ne,ve){for(var Ie=null,ct=null,Ge=W,et=W=0,Us=null;Ge!==null&&et<ne.length;et++){Ge.index>et?(Us=Ge,Ge=null):Us=Ge.sibling;var _t=oe(te,Ge,ne[et],ve);if(_t===null){Ge===null&&(Ge=Us);break}a&&Ge&&_t.alternate===null&&l(te,Ge),W=y(_t,W,et),ct===null?Ie=_t:ct.sibling=_t,ct=_t,Ge=Us}if(et===ne.length)return c(te,Ge),St&&Cl(te,et),Ie;if(Ge===null){for(;et<ne.length;et++)Ge=_e(te,ne[et],ve),Ge!==null&&(W=y(Ge,W,et),ct===null?Ie=Ge:ct.sibling=Ge,ct=Ge);return St&&Cl(te,et),Ie}for(Ge=d(Ge);et<ne.length;et++)Us=ce(Ge,te,et,ne[et],ve),Us!==null&&(a&&Us.alternate!==null&&Ge.delete(Us.key===null?et:Us.key),W=y(Us,W,et),ct===null?Ie=Us:ct.sibling=Us,ct=Us);return a&&Ge.forEach(function($i){return l(te,$i)}),St&&Cl(te,et),Ie}function Xe(te,W,ne,ve){if(ne==null)throw Error(r(151));for(var Ie=null,ct=null,Ge=W,et=W=0,Us=null,_t=ne.next();Ge!==null&&!_t.done;et++,_t=ne.next()){Ge.index>et?(Us=Ge,Ge=null):Us=Ge.sibling;var $i=oe(te,Ge,_t.value,ve);if($i===null){Ge===null&&(Ge=Us);break}a&&Ge&&$i.alternate===null&&l(te,Ge),W=y($i,W,et),ct===null?Ie=$i:ct.sibling=$i,ct=$i,Ge=Us}if(_t.done)return c(te,Ge),St&&Cl(te,et),Ie;if(Ge===null){for(;!_t.done;et++,_t=ne.next())_t=_e(te,_t.value,ve),_t!==null&&(W=y(_t,W,et),ct===null?Ie=_t:ct.sibling=_t,ct=_t);return St&&Cl(te,et),Ie}for(Ge=d(Ge);!_t.done;et++,_t=ne.next())_t=ce(Ge,te,et,_t.value,ve),_t!==null&&(a&&_t.alternate!==null&&Ge.delete(_t.key===null?et:_t.key),W=y(_t,W,et),ct===null?Ie=_t:ct.sibling=_t,ct=_t);return a&&Ge.forEach(function($k){return l(te,$k)}),St&&Cl(te,et),Ie}function Lt(te,W,ne,ve){if(typeof ne=="object"&&ne!==null&&ne.type===v&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case b:e:{for(var Ie=ne.key;W!==null;){if(W.key===Ie){if(Ie=ne.type,Ie===v){if(W.tag===7){c(te,W.sibling),ve=g(W,ne.props.children),ve.return=te,te=ve;break e}}else if(W.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===w&&wv(Ie)===W.type){c(te,W.sibling),ve=g(W,ne.props),Tu(ve,ne),ve.return=te,te=ve;break e}c(te,W);break}else l(te,W);W=W.sibling}ne.type===v?(ve=Sl(ne.props.children,te.mode,ve,ne.key),ve.return=te,te=ve):(ve=ph(ne.type,ne.key,ne.props,null,te.mode,ve),Tu(ve,ne),ve.return=te,te=ve)}return T(te);case j:e:{for(Ie=ne.key;W!==null;){if(W.key===Ie)if(W.tag===4&&W.stateNode.containerInfo===ne.containerInfo&&W.stateNode.implementation===ne.implementation){c(te,W.sibling),ve=g(W,ne.children||[]),ve.return=te,te=ve;break e}else{c(te,W);break}else l(te,W);W=W.sibling}ve=hp(ne,te.mode,ve),ve.return=te,te=ve}return T(te);case w:return Ie=ne._init,ne=Ie(ne._payload),Lt(te,W,ne,ve)}if(X(ne))return st(te,W,ne,ve);if(D(ne)){if(Ie=D(ne),typeof Ie!="function")throw Error(r(150));return ne=Ie.call(ne),Xe(te,W,ne,ve)}if(typeof ne.then=="function")return Lt(te,W,Rh(ne),ve);if(ne.$$typeof===O)return Lt(te,W,bh(te,ne),ve);Mh(te,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,W!==null&&W.tag===6?(c(te,W.sibling),ve=g(W,ne),ve.return=te,te=ve):(c(te,W),ve=dp(ne,te.mode,ve),ve.return=te,te=ve),T(te)):c(te,W)}return function(te,W,ne,ve){try{ku=0;var Ie=Lt(te,W,ne,ve);return Ko=null,Ie}catch(Ge){if(Ge===vu||Ge===wh)throw Ge;var ct=Dr(29,Ge,null,te.mode);return ct.lanes=ve,ct.return=te,ct}finally{}}}var Wo=_v(!0),jv=_v(!1),sn=J(null),ra=null;function Ni(a){var l=a.alternate;ee(ks,ks.current&1),ee(sn,a),ra===null&&(l===null||Vo.current!==null||l.memoizedState!==null)&&(ra=a)}function Nv(a){if(a.tag===22){if(ee(ks,ks.current),ee(sn,a),ra===null){var l=a.alternate;l!==null&&l.memoizedState!==null&&(ra=a)}}else Si()}function Si(){ee(ks,ks.current),ee(sn,sn.current)}function qa(a){le(sn),ra===a&&(ra=null),le(ks)}var ks=J(0);function Dh(a){for(var l=a;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Dg(c)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Vp(a,l,c,d){l=a.memoizedState,c=c(d,l),c=c==null?l:p({},l,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Gp={enqueueSetState:function(a,l,c){a=a._reactInternals;var d=Ir(),g=wi(d);g.payload=l,c!=null&&(g.callback=c),l=_i(a,g,d),l!==null&&($r(l,a,d),_u(l,a,d))},enqueueReplaceState:function(a,l,c){a=a._reactInternals;var d=Ir(),g=wi(d);g.tag=1,g.payload=l,c!=null&&(g.callback=c),l=_i(a,g,d),l!==null&&($r(l,a,d),_u(l,a,d))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var c=Ir(),d=wi(c);d.tag=2,l!=null&&(d.callback=l),l=_i(a,d,c),l!==null&&($r(l,a,c),_u(l,a,c))}};function Sv(a,l,c,d,g,y,T){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,y,T):l.prototype&&l.prototype.isPureReactComponent?!hu(c,d)||!hu(g,y):!0}function Ev(a,l,c,d){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,d),l.state!==a&&Gp.enqueueReplaceState(l,l.state,null)}function Dl(a,l){var c=l;if("ref"in l){c={};for(var d in l)d!=="ref"&&(c[d]=l[d])}if(a=a.defaultProps){c===l&&(c=p({},c));for(var g in a)c[g]===void 0&&(c[g]=a[g])}return c}var Lh=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function Cv(a){Lh(a)}function Av(a){console.error(a)}function kv(a){Lh(a)}function qh(a,l){try{var c=a.onUncaughtError;c(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function Tv(a,l,c){try{var d=a.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Zp(a,l,c){return c=wi(c),c.tag=3,c.payload={element:null},c.callback=function(){qh(a,l)},c}function Ov(a){return a=wi(a),a.tag=3,a}function Rv(a,l,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=d.value;a.payload=function(){return g(y)},a.callback=function(){Tv(l,c,d)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(a.callback=function(){Tv(l,c,d),typeof g!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})})}function $A(a,l,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=c.alternate,l!==null&&xu(l,c,g,!0),c=sn.current,c!==null){switch(c.tag){case 13:return ra===null?xg():c.alternate===null&&is===0&&(is=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===_p?c.flags|=16384:(l=c.updateQueue,l===null?c.updateQueue=new Set([d]):l.add(d),bg(a,d,g)),!1;case 22:return c.flags|=65536,d===_p?c.flags|=16384:(l=c.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=l):(c=l.retryQueue,c===null?l.retryQueue=new Set([d]):c.add(d)),bg(a,d,g)),!1}throw Error(r(435,c.tag))}return bg(a,d,g),xg(),!1}if(St)return l=sn.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=g,d!==pp&&(a=Error(r(422),{cause:d}),gu(Xr(a,c)))):(d!==pp&&(l=Error(r(423),{cause:d}),gu(Xr(l,c))),a=a.current.alternate,a.flags|=65536,g&=-g,a.lanes|=g,d=Xr(d,c),g=Zp(a.stateNode,d,g),Sp(a,g),is!==4&&(is=2)),!1;var y=Error(r(520),{cause:d});if(y=Xr(y,c),Pu===null?Pu=[y]:Pu.push(y),is!==4&&(is=2),l===null)return!0;d=Xr(d,c),c=l;do{switch(c.tag){case 3:return c.flags|=65536,a=g&-g,c.lanes|=a,a=Zp(c.stateNode,d,a),Sp(c,a),!1;case 1:if(l=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Oi===null||!Oi.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=Ov(g),Rv(g,a,c,d),Sp(c,g),!1}c=c.return}while(c!==null);return!1}var Mv=Error(r(461)),Is=!1;function Zs(a,l,c,d){l.child=a===null?jv(l,null,c,d):Wo(l,a.child,c,d)}function Dv(a,l,c,d,g){c=c.render;var y=l.ref;if("ref"in d){var T={};for(var I in d)I!=="ref"&&(T[I]=d[I])}else T=d;return Ol(l),d=Tp(a,l,c,T,y,g),I=Op(),a!==null&&!Is?(Rp(a,l,g),Pa(a,l,g)):(St&&I&&mp(l),l.flags|=1,Zs(a,l,d,g),l.child)}function Lv(a,l,c,d,g){if(a===null){var y=c.type;return typeof y=="function"&&!up(y)&&y.defaultProps===void 0&&c.compare===null?(l.tag=15,l.type=y,qv(a,l,y,d,g)):(a=ph(c.type,null,d,l,l.mode,g),a.ref=l.ref,a.return=l,l.child=a)}if(y=a.child,!tg(a,g)){var T=y.memoizedProps;if(c=c.compare,c=c!==null?c:hu,c(T,d)&&a.ref===l.ref)return Pa(a,l,g)}return l.flags|=1,a=Ta(y,d),a.ref=l.ref,a.return=l,l.child=a}function qv(a,l,c,d,g){if(a!==null){var y=a.memoizedProps;if(hu(y,d)&&a.ref===l.ref)if(Is=!1,l.pendingProps=d=y,tg(a,g))(a.flags&131072)!==0&&(Is=!0);else return l.lanes=a.lanes,Pa(a,l,g)}return Yp(a,l,c,d,g)}function Pv(a,l,c){var d=l.pendingProps,g=d.children,y=a!==null?a.memoizedState:null;if(d.mode==="hidden"){if((l.flags&128)!==0){if(d=y!==null?y.baseLanes|c:c,a!==null){for(g=l.child=a.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;l.childLanes=y&~d}else l.childLanes=0,l.child=null;return Iv(a,l,d,c)}if((c&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&vh(l,y!==null?y.cachePool:null),y!==null?qb(l,y):Cp(),Nv(l);else return l.lanes=l.childLanes=536870912,Iv(a,l,y!==null?y.baseLanes|c:c,c)}else y!==null?(vh(l,y.cachePool),qb(l,y),Si(),l.memoizedState=null):(a!==null&&vh(l,null),Cp(),Si());return Zs(a,l,g,c),l.child}function Iv(a,l,c,d){var g=wp();return g=g===null?null:{parent:As._currentValue,pool:g},l.memoizedState={baseLanes:c,cachePool:g},a!==null&&vh(l,null),Cp(),Nv(l),a!==null&&xu(a,l,d,!0),null}function Ph(a,l){var c=l.ref;if(c===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(l.flags|=4194816)}}function Yp(a,l,c,d,g){return Ol(l),c=Tp(a,l,c,d,void 0,g),d=Op(),a!==null&&!Is?(Rp(a,l,g),Pa(a,l,g)):(St&&d&&mp(l),l.flags|=1,Zs(a,l,c,g),l.child)}function $v(a,l,c,d,g,y){return Ol(l),l.updateQueue=null,c=Ib(l,d,c,g),Pb(a),d=Op(),a!==null&&!Is?(Rp(a,l,y),Pa(a,l,y)):(St&&d&&mp(l),l.flags|=1,Zs(a,l,c,y),l.child)}function Uv(a,l,c,d,g){if(Ol(l),l.stateNode===null){var y=Uo,T=c.contextType;typeof T=="object"&&T!==null&&(y=tr(T)),y=new c(d,y),l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Gp,l.stateNode=y,y._reactInternals=l,y=l.stateNode,y.props=d,y.state=l.memoizedState,y.refs={},jp(l),T=c.contextType,y.context=typeof T=="object"&&T!==null?tr(T):Uo,y.state=l.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(Vp(l,c,T,d),y.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Gp.enqueueReplaceState(y,y.state,null),Nu(l,d,y,g),ju(),y.state=l.memoizedState),typeof y.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(a===null){y=l.stateNode;var I=l.memoizedProps,Y=Dl(c,I);y.props=Y;var ie=y.context,ye=c.contextType;T=Uo,typeof ye=="object"&&ye!==null&&(T=tr(ye));var _e=c.getDerivedStateFromProps;ye=typeof _e=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=l.pendingProps!==I,ye||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||ie!==T)&&Ev(l,y,d,T),vi=!1;var oe=l.memoizedState;y.state=oe,Nu(l,d,y,g),ju(),ie=l.memoizedState,I||oe!==ie||vi?(typeof _e=="function"&&(Vp(l,c,_e,d),ie=l.memoizedState),(Y=vi||Sv(l,c,Y,d,oe,ie,T))?(ye||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(l.flags|=4194308)):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=ie),y.props=d,y.state=ie,y.context=T,d=Y):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{y=l.stateNode,Np(a,l),T=l.memoizedProps,ye=Dl(c,T),y.props=ye,_e=l.pendingProps,oe=y.context,ie=c.contextType,Y=Uo,typeof ie=="object"&&ie!==null&&(Y=tr(ie)),I=c.getDerivedStateFromProps,(ie=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==_e||oe!==Y)&&Ev(l,y,d,Y),vi=!1,oe=l.memoizedState,y.state=oe,Nu(l,d,y,g),ju();var ce=l.memoizedState;T!==_e||oe!==ce||vi||a!==null&&a.dependencies!==null&&yh(a.dependencies)?(typeof I=="function"&&(Vp(l,c,I,d),ce=l.memoizedState),(ye=vi||Sv(l,c,ye,d,oe,ce,Y)||a!==null&&a.dependencies!==null&&yh(a.dependencies))?(ie||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,ce,Y),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,ce,Y)),typeof y.componentDidUpdate=="function"&&(l.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===a.memoizedProps&&oe===a.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&oe===a.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=ce),y.props=d,y.state=ce,y.context=Y,d=ye):(typeof y.componentDidUpdate!="function"||T===a.memoizedProps&&oe===a.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&oe===a.memoizedState||(l.flags|=1024),d=!1)}return y=d,Ph(a,l),d=(l.flags&128)!==0,y||d?(y=l.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),l.flags|=1,a!==null&&d?(l.child=Wo(l,a.child,null,g),l.child=Wo(l,null,c,g)):Zs(a,l,c,g),l.memoizedState=y.state,a=l.child):a=Pa(a,l,g),a}function Bv(a,l,c,d){return pu(),l.flags|=256,Zs(a,l,c,d),l.child}var Kp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wp(a){return{baseLanes:a,cachePool:Ab()}}function Qp(a,l,c){return a=a!==null?a.childLanes&~c:0,l&&(a|=rn),a}function zv(a,l,c){var d=l.pendingProps,g=!1,y=(l.flags&128)!==0,T;if((T=y)||(T=a!==null&&a.memoizedState===null?!1:(ks.current&2)!==0),T&&(g=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,a===null){if(St){if(g?Ni(l):Si(),St){var I=as,Y;if(Y=I){e:{for(Y=I,I=sa;Y.nodeType!==8;){if(!I){I=null;break e}if(Y=jn(Y.nextSibling),Y===null){I=null;break e}}I=Y}I!==null?(l.memoizedState={dehydrated:I,treeContext:El!==null?{id:Oa,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},Y=Dr(18,null,null,0),Y.stateNode=I,Y.return=l,l.child=Y,lr=l,as=null,Y=!0):Y=!1}Y||kl(l)}if(I=l.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return Dg(I)?l.lanes=32:l.lanes=536870912,null;qa(l)}return I=d.children,d=d.fallback,g?(Si(),g=l.mode,I=Ih({mode:"hidden",children:I},g),d=Sl(d,g,c,null),I.return=l,d.return=l,I.sibling=d,l.child=I,g=l.child,g.memoizedState=Wp(c),g.childLanes=Qp(a,T,c),l.memoizedState=Kp,d):(Ni(l),Xp(l,I))}if(Y=a.memoizedState,Y!==null&&(I=Y.dehydrated,I!==null)){if(y)l.flags&256?(Ni(l),l.flags&=-257,l=Jp(a,l,c)):l.memoizedState!==null?(Si(),l.child=a.child,l.flags|=128,l=null):(Si(),g=d.fallback,I=l.mode,d=Ih({mode:"visible",children:d.children},I),g=Sl(g,I,c,null),g.flags|=2,d.return=l,g.return=l,d.sibling=g,l.child=d,Wo(l,a.child,null,c),d=l.child,d.memoizedState=Wp(c),d.childLanes=Qp(a,T,c),l.memoizedState=Kp,l=g);else if(Ni(l),Dg(I)){if(T=I.nextSibling&&I.nextSibling.dataset,T)var ie=T.dgst;T=ie,d=Error(r(419)),d.stack="",d.digest=T,gu({value:d,source:null,stack:null}),l=Jp(a,l,c)}else if(Is||xu(a,l,c,!1),T=(c&a.childLanes)!==0,Is||T){if(T=$t,T!==null&&(d=c&-c,d=(d&42)!==0?1:_a(d),d=(d&(T.suspendedLanes|c))!==0?0:d,d!==0&&d!==Y.retryLane))throw Y.retryLane=d,$o(a,d),$r(T,a,d),Mv;I.data==="$?"||xg(),l=Jp(a,l,c)}else I.data==="$?"?(l.flags|=192,l.child=a.child,l=null):(a=Y.treeContext,as=jn(I.nextSibling),lr=l,St=!0,Al=null,sa=!1,a!==null&&(en[tn++]=Oa,en[tn++]=Ra,en[tn++]=El,Oa=a.id,Ra=a.overflow,El=l),l=Xp(l,d.children),l.flags|=4096);return l}return g?(Si(),g=d.fallback,I=l.mode,Y=a.child,ie=Y.sibling,d=Ta(Y,{mode:"hidden",children:d.children}),d.subtreeFlags=Y.subtreeFlags&65011712,ie!==null?g=Ta(ie,g):(g=Sl(g,I,c,null),g.flags|=2),g.return=l,d.return=l,d.sibling=g,l.child=d,d=g,g=l.child,I=a.child.memoizedState,I===null?I=Wp(c):(Y=I.cachePool,Y!==null?(ie=As._currentValue,Y=Y.parent!==ie?{parent:ie,pool:ie}:Y):Y=Ab(),I={baseLanes:I.baseLanes|c,cachePool:Y}),g.memoizedState=I,g.childLanes=Qp(a,T,c),l.memoizedState=Kp,d):(Ni(l),c=a.child,a=c.sibling,c=Ta(c,{mode:"visible",children:d.children}),c.return=l,c.sibling=null,a!==null&&(T=l.deletions,T===null?(l.deletions=[a],l.flags|=16):T.push(a)),l.child=c,l.memoizedState=null,c)}function Xp(a,l){return l=Ih({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function Ih(a,l){return a=Dr(22,a,null,l),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Jp(a,l,c){return Wo(l,a.child,null,c),a=Xp(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function Fv(a,l,c){a.lanes|=l;var d=a.alternate;d!==null&&(d.lanes|=l),xp(a.return,l,c)}function eg(a,l,c,d,g){var y=a.memoizedState;y===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g}:(y.isBackwards=l,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=c,y.tailMode=g)}function Hv(a,l,c){var d=l.pendingProps,g=d.revealOrder,y=d.tail;if(Zs(a,l,d.children,c),d=ks.current,(d&2)!==0)d=d&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Fv(a,c,l);else if(a.tag===19)Fv(a,c,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}switch(ee(ks,d),g){case"forwards":for(c=l.child,g=null;c!==null;)a=c.alternate,a!==null&&Dh(a)===null&&(g=c),c=c.sibling;c=g,c===null?(g=l.child,l.child=null):(g=c.sibling,c.sibling=null),eg(l,!1,g,c,y);break;case"backwards":for(c=null,g=l.child,l.child=null;g!==null;){if(a=g.alternate,a!==null&&Dh(a)===null){l.child=g;break}a=g.sibling,g.sibling=c,c=g,g=a}eg(l,!0,c,null,y);break;case"together":eg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Pa(a,l,c){if(a!==null&&(l.dependencies=a.dependencies),Ti|=l.lanes,(c&l.childLanes)===0)if(a!==null){if(xu(a,l,c,!1),(c&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(r(153));if(l.child!==null){for(a=l.child,c=Ta(a,a.pendingProps),l.child=c,c.return=l;a.sibling!==null;)a=a.sibling,c=c.sibling=Ta(a,a.pendingProps),c.return=l;c.sibling=null}return l.child}function tg(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&yh(a)))}function UA(a,l,c){switch(l.tag){case 3:Se(l,l.stateNode.containerInfo),bi(l,As,a.memoizedState.cache),pu();break;case 27:case 5:Le(l);break;case 4:Se(l,l.stateNode.containerInfo);break;case 10:bi(l,l.type,l.memoizedProps.value);break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(Ni(l),l.flags|=128,null):(c&l.child.childLanes)!==0?zv(a,l,c):(Ni(l),a=Pa(a,l,c),a!==null?a.sibling:null);Ni(l);break;case 19:var g=(a.flags&128)!==0;if(d=(c&l.childLanes)!==0,d||(xu(a,l,c,!1),d=(c&l.childLanes)!==0),g){if(d)return Hv(a,l,c);l.flags|=128}if(g=l.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ee(ks,ks.current),d)break;return null;case 22:case 23:return l.lanes=0,Pv(a,l,c);case 24:bi(l,As,a.memoizedState.cache)}return Pa(a,l,c)}function Vv(a,l,c){if(a!==null)if(a.memoizedProps!==l.pendingProps)Is=!0;else{if(!tg(a,c)&&(l.flags&128)===0)return Is=!1,UA(a,l,c);Is=(a.flags&131072)!==0}else Is=!1,St&&(l.flags&1048576)!==0&&wb(l,xh,l.index);switch(l.lanes=0,l.tag){case 16:e:{a=l.pendingProps;var d=l.elementType,g=d._init;if(d=g(d._payload),l.type=d,typeof d=="function")up(d)?(a=Dl(d,a),l.tag=1,l=Uv(null,l,d,a,c)):(l.tag=0,l=Yp(null,l,d,a,c));else{if(d!=null){if(g=d.$$typeof,g===F){l.tag=11,l=Dv(null,l,d,a,c);break e}else if(g===B){l.tag=14,l=Lv(null,l,d,a,c);break e}}throw l=H(d)||d,Error(r(306,l,""))}}return l;case 0:return Yp(a,l,l.type,l.pendingProps,c);case 1:return d=l.type,g=Dl(d,l.pendingProps),Uv(a,l,d,g,c);case 3:e:{if(Se(l,l.stateNode.containerInfo),a===null)throw Error(r(387));d=l.pendingProps;var y=l.memoizedState;g=y.element,Np(a,l),Nu(l,d,null,c);var T=l.memoizedState;if(d=T.cache,bi(l,As,d),d!==y.cache&&yp(l,[As],c,!0),ju(),d=T.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=y,l.memoizedState=y,l.flags&256){l=Bv(a,l,d,c);break e}else if(d!==g){g=Xr(Error(r(424)),l),gu(g),l=Bv(a,l,d,c);break e}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(as=jn(a.firstChild),lr=l,St=!0,Al=null,sa=!0,c=jv(l,null,d,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(pu(),d===g){l=Pa(a,l,c);break e}Zs(a,l,d,c)}l=l.child}return l;case 26:return Ph(a,l),a===null?(c=Kw(l.type,null,l.pendingProps,null))?l.memoizedState=c:St||(c=l.type,a=l.pendingProps,d=Xh(Ae.current).createElement(c),d[ys]=l,d[Ls]=a,Ks(d,c,a),rs(d),l.stateNode=d):l.memoizedState=Kw(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return Le(l),a===null&&St&&(d=l.stateNode=Gw(l.type,l.pendingProps,Ae.current),lr=l,sa=!0,g=as,Di(l.type)?(Lg=g,as=jn(d.firstChild)):as=g),Zs(a,l,l.pendingProps.children,c),Ph(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&St&&((g=d=as)&&(d=fk(d,l.type,l.pendingProps,sa),d!==null?(l.stateNode=d,lr=l,as=jn(d.firstChild),sa=!1,g=!0):g=!1),g||kl(l)),Le(l),g=l.type,y=l.pendingProps,T=a!==null?a.memoizedProps:null,d=y.children,Og(g,y)?d=null:T!==null&&Og(g,T)&&(l.flags|=32),l.memoizedState!==null&&(g=Tp(a,l,RA,null,null,c),Gu._currentValue=g),Ph(a,l),Zs(a,l,d,c),l.child;case 6:return a===null&&St&&((a=c=as)&&(c=pk(c,l.pendingProps,sa),c!==null?(l.stateNode=c,lr=l,as=null,a=!0):a=!1),a||kl(l)),null;case 13:return zv(a,l,c);case 4:return Se(l,l.stateNode.containerInfo),d=l.pendingProps,a===null?l.child=Wo(l,null,d,c):Zs(a,l,d,c),l.child;case 11:return Dv(a,l,l.type,l.pendingProps,c);case 7:return Zs(a,l,l.pendingProps,c),l.child;case 8:return Zs(a,l,l.pendingProps.children,c),l.child;case 12:return Zs(a,l,l.pendingProps.children,c),l.child;case 10:return d=l.pendingProps,bi(l,l.type,d.value),Zs(a,l,d.children,c),l.child;case 9:return g=l.type._context,d=l.pendingProps.children,Ol(l),g=tr(g),d=d(g),l.flags|=1,Zs(a,l,d,c),l.child;case 14:return Lv(a,l,l.type,l.pendingProps,c);case 15:return qv(a,l,l.type,l.pendingProps,c);case 19:return Hv(a,l,c);case 31:return d=l.pendingProps,c=l.mode,d={mode:d.mode,children:d.children},a===null?(c=Ih(d,c),c.ref=l.ref,l.child=c,c.return=l,l=c):(c=Ta(a.child,d),c.ref=l.ref,l.child=c,c.return=l,l=c),l;case 22:return Pv(a,l,c);case 24:return Ol(l),d=tr(As),a===null?(g=wp(),g===null&&(g=$t,y=bp(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),l.memoizedState={parent:d,cache:g},jp(l),bi(l,As,g)):((a.lanes&c)!==0&&(Np(a,l),Nu(l,null,null,c),ju()),g=a.memoizedState,y=l.memoizedState,g.parent!==d?(g={parent:d,cache:d},l.memoizedState=g,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=g),bi(l,As,d)):(d=y.cache,bi(l,As,d),d!==g.cache&&yp(l,[As],c,!0))),Zs(a,l,l.pendingProps.children,c),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Ia(a){a.flags|=4}function Gv(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!e_(l)){if(l=sn.current,l!==null&&((wt&4194048)===wt?ra!==null:(wt&62914560)!==wt&&(wt&536870912)===0||l!==ra))throw wu=_p,kb;a.flags|=8192}}function $h(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?va():536870912,a.lanes|=l,ec|=l)}function Ou(a,l){if(!St)switch(a.tailMode){case"hidden":l=a.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function Kt(a){var l=a.alternate!==null&&a.alternate.child===a.child,c=0,d=0;if(l)for(var g=a.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=a,g=g.sibling;else for(g=a.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=a,g=g.sibling;return a.subtreeFlags|=d,a.childLanes=c,l}function BA(a,l,c){var d=l.pendingProps;switch(fp(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(l),null;case 1:return Kt(l),null;case 3:return c=l.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Da(As),Oe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(fu(l)?Ia(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Nb())),Kt(l),null;case 26:return c=l.memoizedState,a===null?(Ia(l),c!==null?(Kt(l),Gv(l,c)):(Kt(l),l.flags&=-16777217)):c?c!==a.memoizedState?(Ia(l),Kt(l),Gv(l,c)):(Kt(l),l.flags&=-16777217):(a.memoizedProps!==d&&Ia(l),Kt(l),l.flags&=-16777217),null;case 27:Re(l),c=Ae.current;var g=l.type;if(a!==null&&l.stateNode!=null)a.memoizedProps!==d&&Ia(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return Kt(l),null}a=xe.current,fu(l)?_b(l):(a=Gw(g,d,c),l.stateNode=a,Ia(l))}return Kt(l),null;case 5:if(Re(l),c=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==d&&Ia(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return Kt(l),null}if(a=xe.current,fu(l))_b(l);else{switch(g=Xh(Ae.current),a){case 1:a=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=g.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof d.is=="string"?g.createElement("select",{is:d.is}):g.createElement("select"),d.multiple?a.multiple=!0:d.size&&(a.size=d.size);break;default:a=typeof d.is=="string"?g.createElement(c,{is:d.is}):g.createElement(c)}}a[ys]=l,a[Ls]=d;e:for(g=l.child;g!==null;){if(g.tag===5||g.tag===6)a.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===l)break e;for(;g.sibling===null;){if(g.return===null||g.return===l)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}l.stateNode=a;e:switch(Ks(a,c,d),c){case"button":case"input":case"select":case"textarea":a=!!d.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ia(l)}}return Kt(l),l.flags&=-16777217,null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==d&&Ia(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(r(166));if(a=Ae.current,fu(l)){if(a=l.stateNode,c=l.memoizedProps,d=null,g=lr,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}a[ys]=l,a=!!(a.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||$w(a.nodeValue,c)),a||kl(l)}else a=Xh(a).createTextNode(d),a[ys]=l,l.stateNode=a}return Kt(l),null;case 13:if(d=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(g=fu(l),d!==null&&d.dehydrated!==null){if(a===null){if(!g)throw Error(r(318));if(g=l.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[ys]=l}else pu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Kt(l),g=!1}else g=Nb(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=g),g=!0;if(!g)return l.flags&256?(qa(l),l):(qa(l),null)}if(qa(l),(l.flags&128)!==0)return l.lanes=c,l;if(c=d!==null,a=a!==null&&a.memoizedState!==null,c){d=l.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool);var y=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==g&&(d.flags|=2048)}return c!==a&&c&&(l.child.flags|=8192),$h(l,l.updateQueue),Kt(l),null;case 4:return Oe(),a===null&&Eg(l.stateNode.containerInfo),Kt(l),null;case 10:return Da(l.type),Kt(l),null;case 19:if(le(ks),g=l.memoizedState,g===null)return Kt(l),null;if(d=(l.flags&128)!==0,y=g.rendering,y===null)if(d)Ou(g,!1);else{if(is!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(y=Dh(a),y!==null){for(l.flags|=128,Ou(g,!1),a=y.updateQueue,l.updateQueue=a,$h(l,a),l.subtreeFlags=0,a=c,c=l.child;c!==null;)vb(c,a),c=c.sibling;return ee(ks,ks.current&1|2),l.child}a=a.sibling}g.tail!==null&&bt()>zh&&(l.flags|=128,d=!0,Ou(g,!1),l.lanes=4194304)}else{if(!d)if(a=Dh(y),a!==null){if(l.flags|=128,d=!0,a=a.updateQueue,l.updateQueue=a,$h(l,a),Ou(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!St)return Kt(l),null}else 2*bt()-g.renderingStartTime>zh&&c!==536870912&&(l.flags|=128,d=!0,Ou(g,!1),l.lanes=4194304);g.isBackwards?(y.sibling=l.child,l.child=y):(a=g.last,a!==null?a.sibling=y:l.child=y,g.last=y)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=bt(),l.sibling=null,a=ks.current,ee(ks,d?a&1|2:a&1),l):(Kt(l),null);case 22:case 23:return qa(l),Ap(),d=l.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(c&536870912)!==0&&(l.flags&128)===0&&(Kt(l),l.subtreeFlags&6&&(l.flags|=8192)):Kt(l),c=l.updateQueue,c!==null&&$h(l,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==c&&(l.flags|=2048),a!==null&&le(Rl),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),l.memoizedState.cache!==c&&(l.flags|=2048),Da(As),Kt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function zA(a,l){switch(fp(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Da(As),Oe(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return Re(l),null;case 13:if(qa(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(r(340));pu()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return le(ks),null;case 4:return Oe(),null;case 10:return Da(l.type),null;case 22:case 23:return qa(l),Ap(),a!==null&&le(Rl),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return Da(As),null;case 25:return null;default:return null}}function Zv(a,l){switch(fp(l),l.tag){case 3:Da(As),Oe();break;case 26:case 27:case 5:Re(l);break;case 4:Oe();break;case 13:qa(l);break;case 19:le(ks);break;case 10:Da(l.type);break;case 22:case 23:qa(l),Ap(),a!==null&&le(Rl);break;case 24:Da(As)}}function Ru(a,l){try{var c=l.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&a)===a){d=void 0;var y=c.create,T=c.inst;d=y(),T.destroy=d}c=c.next}while(c!==g)}}catch(I){qt(l,l.return,I)}}function Ei(a,l,c){try{var d=l.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var y=g.next;d=y;do{if((d.tag&a)===a){var T=d.inst,I=T.destroy;if(I!==void 0){T.destroy=void 0,g=l;var Y=c,ie=I;try{ie()}catch(ye){qt(g,Y,ye)}}}d=d.next}while(d!==y)}}catch(ye){qt(l,l.return,ye)}}function Yv(a){var l=a.updateQueue;if(l!==null){var c=a.stateNode;try{Lb(l,c)}catch(d){qt(a,a.return,d)}}}function Kv(a,l,c){c.props=Dl(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(d){qt(a,l,d)}}function Mu(a,l){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof c=="function"?a.refCleanup=c(d):c.current=d}}catch(g){qt(a,l,g)}}function na(a,l){var c=a.ref,d=a.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){qt(a,l,g)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){qt(a,l,g)}else c.current=null}function Wv(a){var l=a.type,c=a.memoizedProps,d=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){qt(a,a.return,g)}}function sg(a,l,c){try{var d=a.stateNode;ck(d,a.type,c,l),d[Ls]=l}catch(g){qt(a,a.return,g)}}function Qv(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Di(a.type)||a.tag===4}function rg(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Qv(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Di(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ng(a,l,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,l?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,l):(l=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,l.appendChild(a),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=Qh));else if(d!==4&&(d===27&&Di(a.type)&&(c=a.stateNode,l=null),a=a.child,a!==null))for(ng(a,l,c),a=a.sibling;a!==null;)ng(a,l,c),a=a.sibling}function Uh(a,l,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,l?c.insertBefore(a,l):c.appendChild(a);else if(d!==4&&(d===27&&Di(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(Uh(a,l,c),a=a.sibling;a!==null;)Uh(a,l,c),a=a.sibling}function Xv(a){var l=a.stateNode,c=a.memoizedProps;try{for(var d=a.type,g=l.attributes;g.length;)l.removeAttributeNode(g[0]);Ks(l,d,c),l[ys]=a,l[Ls]=c}catch(y){qt(a,a.return,y)}}var $a=!1,hs=!1,ag=!1,Jv=typeof WeakSet=="function"?WeakSet:Set,$s=null;function FA(a,l){if(a=a.containerInfo,kg=nm,a=ub(a),rp(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var T=0,I=-1,Y=-1,ie=0,ye=0,_e=a,oe=null;t:for(;;){for(var ce;_e!==c||g!==0&&_e.nodeType!==3||(I=T+g),_e!==y||d!==0&&_e.nodeType!==3||(Y=T+d),_e.nodeType===3&&(T+=_e.nodeValue.length),(ce=_e.firstChild)!==null;)oe=_e,_e=ce;for(;;){if(_e===a)break t;if(oe===c&&++ie===g&&(I=T),oe===y&&++ye===d&&(Y=T),(ce=_e.nextSibling)!==null)break;_e=oe,oe=_e.parentNode}_e=ce}c=I===-1||Y===-1?null:{start:I,end:Y}}else c=null}c=c||{start:0,end:0}}else c=null;for(Tg={focusedElem:a,selectionRange:c},nm=!1,$s=l;$s!==null;)if(l=$s,a=l.child,(l.subtreeFlags&1024)!==0&&a!==null)a.return=l,$s=a;else for(;$s!==null;){switch(l=$s,y=l.alternate,a=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&y!==null){a=void 0,c=l,g=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var st=Dl(c.type,g,c.elementType===c.type);a=d.getSnapshotBeforeUpdate(st,y),d.__reactInternalSnapshotBeforeUpdate=a}catch(Xe){qt(c,c.return,Xe)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,c=a.nodeType,c===9)Mg(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Mg(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=l.sibling,a!==null){a.return=l.return,$s=a;break}$s=l.return}}function ew(a,l,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Ci(a,c),d&4&&Ru(5,c);break;case 1:if(Ci(a,c),d&4)if(a=c.stateNode,l===null)try{a.componentDidMount()}catch(T){qt(c,c.return,T)}else{var g=Dl(c.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(g,l,a.__reactInternalSnapshotBeforeUpdate)}catch(T){qt(c,c.return,T)}}d&64&&Yv(c),d&512&&Mu(c,c.return);break;case 3:if(Ci(a,c),d&64&&(a=c.updateQueue,a!==null)){if(l=null,c.child!==null)switch(c.child.tag){case 27:case 5:l=c.child.stateNode;break;case 1:l=c.child.stateNode}try{Lb(a,l)}catch(T){qt(c,c.return,T)}}break;case 27:l===null&&d&4&&Xv(c);case 26:case 5:Ci(a,c),l===null&&d&4&&Wv(c),d&512&&Mu(c,c.return);break;case 12:Ci(a,c);break;case 13:Ci(a,c),d&4&&rw(a,c),d&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=XA.bind(null,c),gk(a,c))));break;case 22:if(d=c.memoizedState!==null||$a,!d){l=l!==null&&l.memoizedState!==null||hs,g=$a;var y=hs;$a=d,(hs=l)&&!y?Ai(a,c,(c.subtreeFlags&8772)!==0):Ci(a,c),$a=g,hs=y}break;case 30:break;default:Ci(a,c)}}function tw(a){var l=a.alternate;l!==null&&(a.alternate=null,tw(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&fl(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Gt=null,vr=!1;function Ua(a,l,c){for(c=c.child;c!==null;)sw(a,l,c),c=c.sibling}function sw(a,l,c){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(Te,c)}catch{}switch(c.tag){case 26:hs||na(c,l),Ua(a,l,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:hs||na(c,l);var d=Gt,g=vr;Di(c.type)&&(Gt=c.stateNode,vr=!1),Ua(a,l,c),zu(c.stateNode),Gt=d,vr=g;break;case 5:hs||na(c,l);case 6:if(d=Gt,g=vr,Gt=null,Ua(a,l,c),Gt=d,vr=g,Gt!==null)if(vr)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(c.stateNode)}catch(y){qt(c,l,y)}else try{Gt.removeChild(c.stateNode)}catch(y){qt(c,l,y)}break;case 18:Gt!==null&&(vr?(a=Gt,Hw(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),Wu(a)):Hw(Gt,c.stateNode));break;case 4:d=Gt,g=vr,Gt=c.stateNode.containerInfo,vr=!0,Ua(a,l,c),Gt=d,vr=g;break;case 0:case 11:case 14:case 15:hs||Ei(2,c,l),hs||Ei(4,c,l),Ua(a,l,c);break;case 1:hs||(na(c,l),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Kv(c,l,d)),Ua(a,l,c);break;case 21:Ua(a,l,c);break;case 22:hs=(d=hs)||c.memoizedState!==null,Ua(a,l,c),hs=d;break;default:Ua(a,l,c)}}function rw(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Wu(a)}catch(c){qt(l,l.return,c)}}function HA(a){switch(a.tag){case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new Jv),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new Jv),l;default:throw Error(r(435,a.tag))}}function ig(a,l){var c=HA(a);l.forEach(function(d){var g=JA.bind(null,a,d);c.has(d)||(c.add(d),d.then(g,g))})}function Lr(a,l){var c=l.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],y=a,T=l,I=T;e:for(;I!==null;){switch(I.tag){case 27:if(Di(I.type)){Gt=I.stateNode,vr=!1;break e}break;case 5:Gt=I.stateNode,vr=!1;break e;case 3:case 4:Gt=I.stateNode.containerInfo,vr=!0;break e}I=I.return}if(Gt===null)throw Error(r(160));sw(y,T,g),Gt=null,vr=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)nw(l,a),l=l.sibling}var _n=null;function nw(a,l){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Lr(l,a),qr(a),d&4&&(Ei(3,a,a.return),Ru(3,a),Ei(5,a,a.return));break;case 1:Lr(l,a),qr(a),d&512&&(hs||c===null||na(c,c.return)),d&64&&$a&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=_n;if(Lr(l,a),qr(a),d&512&&(hs||c===null||na(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=a.memoizedState,c===null)if(d===null)if(a.stateNode===null){e:{d=a.type,c=a.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Na]||y[ys]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(d),g.head.insertBefore(y,g.querySelector("head > title"))),Ks(y,d,c),y[ys]=a,rs(y),d=y;break e;case"link":var T=Xw("link","href",g).get(d+(c.href||""));if(T){for(var I=0;I<T.length;I++)if(y=T[I],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(I,1);break t}}y=g.createElement(d),Ks(y,d,c),g.head.appendChild(y);break;case"meta":if(T=Xw("meta","content",g).get(d+(c.content||""))){for(I=0;I<T.length;I++)if(y=T[I],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(I,1);break t}}y=g.createElement(d),Ks(y,d,c),g.head.appendChild(y);break;default:throw Error(r(468,d))}y[ys]=a,rs(y),d=y}a.stateNode=d}else Jw(g,a.type,a.stateNode);else a.stateNode=Qw(g,d,a.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?Jw(g,a.type,a.stateNode):Qw(g,d,a.memoizedProps)):d===null&&a.stateNode!==null&&sg(a,a.memoizedProps,c.memoizedProps)}break;case 27:Lr(l,a),qr(a),d&512&&(hs||c===null||na(c,c.return)),c!==null&&d&4&&sg(a,a.memoizedProps,c.memoizedProps);break;case 5:if(Lr(l,a),qr(a),d&512&&(hs||c===null||na(c,c.return)),a.flags&32){g=a.stateNode;try{qs(g,"")}catch(ce){qt(a,a.return,ce)}}d&4&&a.stateNode!=null&&(g=a.memoizedProps,sg(a,g,c!==null?c.memoizedProps:g)),d&1024&&(ag=!0);break;case 6:if(Lr(l,a),qr(a),d&4){if(a.stateNode===null)throw Error(r(162));d=a.memoizedProps,c=a.stateNode;try{c.nodeValue=d}catch(ce){qt(a,a.return,ce)}}break;case 3:if(tm=null,g=_n,_n=Jh(l.containerInfo),Lr(l,a),_n=g,qr(a),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Wu(l.containerInfo)}catch(ce){qt(a,a.return,ce)}ag&&(ag=!1,aw(a));break;case 4:d=_n,_n=Jh(a.stateNode.containerInfo),Lr(l,a),qr(a),_n=d;break;case 12:Lr(l,a),qr(a);break;case 13:Lr(l,a),qr(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(hg=bt()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,ig(a,d)));break;case 22:g=a.memoizedState!==null;var Y=c!==null&&c.memoizedState!==null,ie=$a,ye=hs;if($a=ie||g,hs=ye||Y,Lr(l,a),hs=ye,$a=ie,qr(a),d&8192)e:for(l=a.stateNode,l._visibility=g?l._visibility&-2:l._visibility|1,g&&(c===null||Y||$a||hs||Ll(a)),c=null,l=a;;){if(l.tag===5||l.tag===26){if(c===null){Y=c=l;try{if(y=Y.stateNode,g)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{I=Y.stateNode;var _e=Y.memoizedProps.style,oe=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;I.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(ce){qt(Y,Y.return,ce)}}}else if(l.tag===6){if(c===null){Y=l;try{Y.stateNode.nodeValue=g?"":Y.memoizedProps}catch(ce){qt(Y,Y.return,ce)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;c===l&&(c=null),l=l.return}c===l&&(c=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=a.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,ig(a,c))));break;case 19:Lr(l,a),qr(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,ig(a,d)));break;case 30:break;case 21:break;default:Lr(l,a),qr(a)}}function qr(a){var l=a.flags;if(l&2){try{for(var c,d=a.return;d!==null;){if(Qv(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var g=c.stateNode,y=rg(a);Uh(a,y,g);break;case 5:var T=c.stateNode;c.flags&32&&(qs(T,""),c.flags&=-33);var I=rg(a);Uh(a,I,T);break;case 3:case 4:var Y=c.stateNode.containerInfo,ie=rg(a);ng(a,ie,Y);break;default:throw Error(r(161))}}catch(ye){qt(a,a.return,ye)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function aw(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;aw(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function Ci(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)ew(a,l.alternate,l),l=l.sibling}function Ll(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:Ei(4,l,l.return),Ll(l);break;case 1:na(l,l.return);var c=l.stateNode;typeof c.componentWillUnmount=="function"&&Kv(l,l.return,c),Ll(l);break;case 27:zu(l.stateNode);case 26:case 5:na(l,l.return),Ll(l);break;case 22:l.memoizedState===null&&Ll(l);break;case 30:Ll(l);break;default:Ll(l)}a=a.sibling}}function Ai(a,l,c){for(c=c&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,g=a,y=l,T=y.flags;switch(y.tag){case 0:case 11:case 15:Ai(g,y,c),Ru(4,y);break;case 1:if(Ai(g,y,c),d=y,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ie){qt(d,d.return,ie)}if(d=y,g=d.updateQueue,g!==null){var I=d.stateNode;try{var Y=g.shared.hiddenCallbacks;if(Y!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Y.length;g++)Db(Y[g],I)}catch(ie){qt(d,d.return,ie)}}c&&T&64&&Yv(y),Mu(y,y.return);break;case 27:Xv(y);case 26:case 5:Ai(g,y,c),c&&d===null&&T&4&&Wv(y),Mu(y,y.return);break;case 12:Ai(g,y,c);break;case 13:Ai(g,y,c),c&&T&4&&rw(g,y);break;case 22:y.memoizedState===null&&Ai(g,y,c),Mu(y,y.return);break;case 30:break;default:Ai(g,y,c)}l=l.sibling}}function lg(a,l){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&yu(c))}function og(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&yu(a))}function aa(a,l,c,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)iw(a,l,c,d),l=l.sibling}function iw(a,l,c,d){var g=l.flags;switch(l.tag){case 0:case 11:case 15:aa(a,l,c,d),g&2048&&Ru(9,l);break;case 1:aa(a,l,c,d);break;case 3:aa(a,l,c,d),g&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&yu(a)));break;case 12:if(g&2048){aa(a,l,c,d),a=l.stateNode;try{var y=l.memoizedProps,T=y.id,I=y.onPostCommit;typeof I=="function"&&I(T,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(Y){qt(l,l.return,Y)}}else aa(a,l,c,d);break;case 13:aa(a,l,c,d);break;case 23:break;case 22:y=l.stateNode,T=l.alternate,l.memoizedState!==null?y._visibility&2?aa(a,l,c,d):Du(a,l):y._visibility&2?aa(a,l,c,d):(y._visibility|=2,Qo(a,l,c,d,(l.subtreeFlags&10256)!==0)),g&2048&&lg(T,l);break;case 24:aa(a,l,c,d),g&2048&&og(l.alternate,l);break;default:aa(a,l,c,d)}}function Qo(a,l,c,d,g){for(g=g&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var y=a,T=l,I=c,Y=d,ie=T.flags;switch(T.tag){case 0:case 11:case 15:Qo(y,T,I,Y,g),Ru(8,T);break;case 23:break;case 22:var ye=T.stateNode;T.memoizedState!==null?ye._visibility&2?Qo(y,T,I,Y,g):Du(y,T):(ye._visibility|=2,Qo(y,T,I,Y,g)),g&&ie&2048&&lg(T.alternate,T);break;case 24:Qo(y,T,I,Y,g),g&&ie&2048&&og(T.alternate,T);break;default:Qo(y,T,I,Y,g)}l=l.sibling}}function Du(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var c=a,d=l,g=d.flags;switch(d.tag){case 22:Du(c,d),g&2048&&lg(d.alternate,d);break;case 24:Du(c,d),g&2048&&og(d.alternate,d);break;default:Du(c,d)}l=l.sibling}}var Lu=8192;function Xo(a){if(a.subtreeFlags&Lu)for(a=a.child;a!==null;)lw(a),a=a.sibling}function lw(a){switch(a.tag){case 26:Xo(a),a.flags&Lu&&a.memoizedState!==null&&kk(_n,a.memoizedState,a.memoizedProps);break;case 5:Xo(a);break;case 3:case 4:var l=_n;_n=Jh(a.stateNode.containerInfo),Xo(a),_n=l;break;case 22:a.memoizedState===null&&(l=a.alternate,l!==null&&l.memoizedState!==null?(l=Lu,Lu=16777216,Xo(a),Lu=l):Xo(a));break;default:Xo(a)}}function ow(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function qu(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var d=l[c];$s=d,uw(d,a)}ow(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)cw(a),a=a.sibling}function cw(a){switch(a.tag){case 0:case 11:case 15:qu(a),a.flags&2048&&Ei(9,a,a.return);break;case 3:qu(a);break;case 12:qu(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,Bh(a)):qu(a);break;default:qu(a)}}function Bh(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var d=l[c];$s=d,uw(d,a)}ow(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:Ei(8,l,l.return),Bh(l);break;case 22:c=l.stateNode,c._visibility&2&&(c._visibility&=-3,Bh(l));break;default:Bh(l)}a=a.sibling}}function uw(a,l){for(;$s!==null;){var c=$s;switch(c.tag){case 0:case 11:case 15:Ei(8,c,l);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:yu(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,$s=d;else e:for(c=a;$s!==null;){d=$s;var g=d.sibling,y=d.return;if(tw(d),d===c){$s=null;break e}if(g!==null){g.return=y,$s=g;break e}$s=y}}}var VA={getCacheForType:function(a){var l=tr(As),c=l.data.get(a);return c===void 0&&(c=a(),l.data.set(a,c)),c}},GA=typeof WeakMap=="function"?WeakMap:Map,kt=0,$t=null,ht=null,wt=0,Tt=0,Pr=null,ki=!1,Jo=!1,cg=!1,Ba=0,is=0,Ti=0,ql=0,ug=0,rn=0,ec=0,Pu=null,wr=null,dg=!1,hg=0,zh=1/0,Fh=null,Oi=null,Ys=0,Ri=null,tc=null,sc=0,mg=0,fg=null,dw=null,Iu=0,pg=null;function Ir(){if((kt&2)!==0&&wt!==0)return wt&-wt;if(P.T!==null){var a=Fo;return a!==0?a:_g()}return fn()}function hw(){rn===0&&(rn=(wt&536870912)===0||St?pr():536870912);var a=sn.current;return a!==null&&(a.flags|=32),rn}function $r(a,l,c){(a===$t&&(Tt===2||Tt===9)||a.cancelPendingCommit!==null)&&(rc(a,0),Mi(a,wt,rn,!1)),kr(a,c),((kt&2)===0||a!==$t)&&(a===$t&&((kt&2)===0&&(ql|=c),is===4&&Mi(a,wt,rn,!1)),ia(a))}function mw(a,l,c){if((kt&6)!==0)throw Error(r(327));var d=!c&&(l&124)===0&&(l&a.expiredLanes)===0||fr(a,l),g=d?KA(a,l):yg(a,l,!0),y=d;do{if(g===0){Jo&&!d&&Mi(a,l,0,!1);break}else{if(c=a.current.alternate,y&&!ZA(c)){g=yg(a,l,!1),y=!1;continue}if(g===2){if(y=l,a.errorRecoveryDisabledLanes&y)var T=0;else T=a.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var I=a;g=Pu;var Y=I.current.memoizedState.isDehydrated;if(Y&&(rc(I,T).flags|=256),T=yg(I,T,!1),T!==2){if(cg&&!Y){I.errorRecoveryDisabledLanes|=y,ql|=y,g=4;break e}y=wr,wr=g,y!==null&&(wr===null?wr=y:wr.push.apply(wr,y))}g=T}if(y=!1,g!==2)continue}}if(g===1){rc(a,0),Mi(a,l,0,!0);break}e:{switch(d=a,y=g,y){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Mi(d,l,rn,!ki);break e;case 2:wr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(g=hg+300-bt(),10<g)){if(Mi(d,l,rn,!ki),Gr(d,0,!0)!==0)break e;d.timeoutHandle=zw(fw.bind(null,d,c,wr,Fh,dg,l,rn,ql,ec,ki,y,2,-0,0),g);break e}fw(d,c,wr,Fh,dg,l,rn,ql,ec,ki,y,0,-0,0)}}break}while(!0);ia(a)}function fw(a,l,c,d,g,y,T,I,Y,ie,ye,_e,oe,ce){if(a.timeoutHandle=-1,_e=l.subtreeFlags,(_e&8192||(_e&16785408)===16785408)&&(Vu={stylesheets:null,count:0,unsuspend:Ak},lw(l),_e=Tk(),_e!==null)){a.cancelPendingCommit=_e(ww.bind(null,a,l,y,c,d,g,T,I,Y,ye,1,oe,ce)),Mi(a,y,T,!ie);return}ww(a,l,y,c,d,g,T,I,Y)}function ZA(a){for(var l=a;;){var c=l.tag;if((c===0||c===11||c===15)&&l.flags&16384&&(c=l.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],y=g.getSnapshot;g=g.value;try{if(!Mr(y(),g))return!1}catch{return!1}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Mi(a,l,c,d){l&=~ug,l&=~ql,a.suspendedLanes|=l,a.pingedLanes&=~l,d&&(a.warmLanes|=l),d=a.expirationTimes;for(var g=l;0<g;){var y=31-gt(g),T=1<<y;d[y]=-1,g&=~T}c!==0&&Gn(a,c,l)}function Hh(){return(kt&6)===0?($u(0),!1):!0}function gg(){if(ht!==null){if(Tt===0)var a=ht.return;else a=ht,Ma=Tl=null,Mp(a),Ko=null,ku=0,a=ht;for(;a!==null;)Zv(a.alternate,a),a=a.return;ht=null}}function rc(a,l){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,dk(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),gg(),$t=a,ht=c=Ta(a.current,null),wt=l,Tt=0,Pr=null,ki=!1,Jo=fr(a,l),cg=!1,ec=rn=ug=ql=Ti=is=0,wr=Pu=null,dg=!1,(l&8)!==0&&(l|=l&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=l;0<d;){var g=31-gt(d),y=1<<g;l|=a[g],d&=~y}return Ba=l,hh(),c}function pw(a,l){lt=null,P.H=Oh,l===vu||l===wh?(l=Rb(),Tt=3):l===kb?(l=Rb(),Tt=4):Tt=l===Mv?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Pr=l,ht===null&&(is=1,qh(a,Xr(l,a.current)))}function gw(){var a=P.H;return P.H=Oh,a===null?Oh:a}function xw(){var a=P.A;return P.A=VA,a}function xg(){is=4,ki||(wt&4194048)!==wt&&sn.current!==null||(Jo=!0),(Ti&134217727)===0&&(ql&134217727)===0||$t===null||Mi($t,wt,rn,!1)}function yg(a,l,c){var d=kt;kt|=2;var g=gw(),y=xw();($t!==a||wt!==l)&&(Fh=null,rc(a,l)),l=!1;var T=is;e:do try{if(Tt!==0&&ht!==null){var I=ht,Y=Pr;switch(Tt){case 8:gg(),T=6;break e;case 3:case 2:case 9:case 6:sn.current===null&&(l=!0);var ie=Tt;if(Tt=0,Pr=null,nc(a,I,Y,ie),c&&Jo){T=0;break e}break;default:ie=Tt,Tt=0,Pr=null,nc(a,I,Y,ie)}}YA(),T=is;break}catch(ye){pw(a,ye)}while(!0);return l&&a.shellSuspendCounter++,Ma=Tl=null,kt=d,P.H=g,P.A=y,ht===null&&($t=null,wt=0,hh()),T}function YA(){for(;ht!==null;)yw(ht)}function KA(a,l){var c=kt;kt|=2;var d=gw(),g=xw();$t!==a||wt!==l?(Fh=null,zh=bt()+500,rc(a,l)):Jo=fr(a,l);e:do try{if(Tt!==0&&ht!==null){l=ht;var y=Pr;t:switch(Tt){case 1:Tt=0,Pr=null,nc(a,l,y,1);break;case 2:case 9:if(Tb(y)){Tt=0,Pr=null,bw(l);break}l=function(){Tt!==2&&Tt!==9||$t!==a||(Tt=7),ia(a)},y.then(l,l);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:Tb(y)?(Tt=0,Pr=null,bw(l)):(Tt=0,Pr=null,nc(a,l,y,7));break;case 5:var T=null;switch(ht.tag){case 26:T=ht.memoizedState;case 5:case 27:var I=ht;if(!T||e_(T)){Tt=0,Pr=null;var Y=I.sibling;if(Y!==null)ht=Y;else{var ie=I.return;ie!==null?(ht=ie,Vh(ie)):ht=null}break t}}Tt=0,Pr=null,nc(a,l,y,5);break;case 6:Tt=0,Pr=null,nc(a,l,y,6);break;case 8:gg(),is=6;break e;default:throw Error(r(462))}}WA();break}catch(ye){pw(a,ye)}while(!0);return Ma=Tl=null,P.H=d,P.A=g,kt=c,ht!==null?0:($t=null,wt=0,hh(),is)}function WA(){for(;ht!==null&&!Je();)yw(ht)}function yw(a){var l=Vv(a.alternate,a,Ba);a.memoizedProps=a.pendingProps,l===null?Vh(a):ht=l}function bw(a){var l=a,c=l.alternate;switch(l.tag){case 15:case 0:l=$v(c,l,l.pendingProps,l.type,void 0,wt);break;case 11:l=$v(c,l,l.pendingProps,l.type.render,l.ref,wt);break;case 5:Mp(l);default:Zv(c,l),l=ht=vb(l,Ba),l=Vv(c,l,Ba)}a.memoizedProps=a.pendingProps,l===null?Vh(a):ht=l}function nc(a,l,c,d){Ma=Tl=null,Mp(l),Ko=null,ku=0;var g=l.return;try{if($A(a,g,l,c,wt)){is=1,qh(a,Xr(c,a.current)),ht=null;return}}catch(y){if(g!==null)throw ht=g,y;is=1,qh(a,Xr(c,a.current)),ht=null;return}l.flags&32768?(St||d===1?a=!0:Jo||(wt&536870912)!==0?a=!1:(ki=a=!0,(d===2||d===9||d===3||d===6)&&(d=sn.current,d!==null&&d.tag===13&&(d.flags|=16384))),vw(l,a)):Vh(l)}function Vh(a){var l=a;do{if((l.flags&32768)!==0){vw(l,ki);return}a=l.return;var c=BA(l.alternate,l,Ba);if(c!==null){ht=c;return}if(l=l.sibling,l!==null){ht=l;return}ht=l=a}while(l!==null);is===0&&(is=5)}function vw(a,l){do{var c=zA(a.alternate,a);if(c!==null){c.flags&=32767,ht=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!l&&(a=a.sibling,a!==null)){ht=a;return}ht=a=c}while(a!==null);is=6,ht=null}function ww(a,l,c,d,g,y,T,I,Y){a.cancelPendingCommit=null;do Gh();while(Ys!==0);if((kt&6)!==0)throw Error(r(327));if(l!==null){if(l===a.current)throw Error(r(177));if(y=l.lanes|l.childLanes,y|=op,hl(a,c,y,T,I,Y),a===$t&&(ht=$t=null,wt=0),tc=l,Ri=a,sc=c,mg=y,fg=g,dw=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,ek(re,function(){return Ew(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=P.T,P.T=null,g=Z.p,Z.p=2,T=kt,kt|=4;try{FA(a,l,c)}finally{kt=T,Z.p=g,P.T=d}}Ys=1,_w(),jw(),Nw()}}function _w(){if(Ys===1){Ys=0;var a=Ri,l=tc,c=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||c){c=P.T,P.T=null;var d=Z.p;Z.p=2;var g=kt;kt|=4;try{nw(l,a);var y=Tg,T=ub(a.containerInfo),I=y.focusedElem,Y=y.selectionRange;if(T!==I&&I&&I.ownerDocument&&cb(I.ownerDocument.documentElement,I)){if(Y!==null&&rp(I)){var ie=Y.start,ye=Y.end;if(ye===void 0&&(ye=ie),"selectionStart"in I)I.selectionStart=ie,I.selectionEnd=Math.min(ye,I.value.length);else{var _e=I.ownerDocument||document,oe=_e&&_e.defaultView||window;if(oe.getSelection){var ce=oe.getSelection(),st=I.textContent.length,Xe=Math.min(Y.start,st),Lt=Y.end===void 0?Xe:Math.min(Y.end,st);!ce.extend&&Xe>Lt&&(T=Lt,Lt=Xe,Xe=T);var te=ob(I,Xe),W=ob(I,Lt);if(te&&W&&(ce.rangeCount!==1||ce.anchorNode!==te.node||ce.anchorOffset!==te.offset||ce.focusNode!==W.node||ce.focusOffset!==W.offset)){var ne=_e.createRange();ne.setStart(te.node,te.offset),ce.removeAllRanges(),Xe>Lt?(ce.addRange(ne),ce.extend(W.node,W.offset)):(ne.setEnd(W.node,W.offset),ce.addRange(ne))}}}}for(_e=[],ce=I;ce=ce.parentNode;)ce.nodeType===1&&_e.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<_e.length;I++){var ve=_e[I];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}nm=!!kg,Tg=kg=null}finally{kt=g,Z.p=d,P.T=c}}a.current=l,Ys=2}}function jw(){if(Ys===2){Ys=0;var a=Ri,l=tc,c=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||c){c=P.T,P.T=null;var d=Z.p;Z.p=2;var g=kt;kt|=4;try{ew(a,l.alternate,l)}finally{kt=g,Z.p=d,P.T=c}}Ys=3}}function Nw(){if(Ys===4||Ys===3){Ys=0,rt();var a=Ri,l=tc,c=sc,d=dw;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Ys=5:(Ys=0,tc=Ri=null,Sw(a,a.pendingLanes));var g=a.pendingLanes;if(g===0&&(Oi=null),ja(c),l=l.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(Te,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=P.T,g=Z.p,Z.p=2,P.T=null;try{for(var y=a.onRecoverableError,T=0;T<d.length;T++){var I=d[T];y(I.value,{componentStack:I.stack})}}finally{P.T=l,Z.p=g}}(sc&3)!==0&&Gh(),ia(a),g=a.pendingLanes,(c&4194090)!==0&&(g&42)!==0?a===pg?Iu++:(Iu=0,pg=a):Iu=0,$u(0)}}function Sw(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,yu(l)))}function Gh(a){return _w(),jw(),Nw(),Ew()}function Ew(){if(Ys!==5)return!1;var a=Ri,l=mg;mg=0;var c=ja(sc),d=P.T,g=Z.p;try{Z.p=32>c?32:c,P.T=null,c=fg,fg=null;var y=Ri,T=sc;if(Ys=0,tc=Ri=null,sc=0,(kt&6)!==0)throw Error(r(331));var I=kt;if(kt|=4,cw(y.current),iw(y,y.current,T,c),kt=I,$u(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(Te,y)}catch{}return!0}finally{Z.p=g,P.T=d,Sw(a,l)}}function Cw(a,l,c){l=Xr(c,l),l=Zp(a.stateNode,l,2),a=_i(a,l,2),a!==null&&(kr(a,2),ia(a))}function qt(a,l,c){if(a.tag===3)Cw(a,a,c);else for(;l!==null;){if(l.tag===3){Cw(l,a,c);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Oi===null||!Oi.has(d))){a=Xr(c,a),c=Ov(2),d=_i(l,c,2),d!==null&&(Rv(c,d,l,a),kr(d,2),ia(d));break}}l=l.return}}function bg(a,l,c){var d=a.pingCache;if(d===null){d=a.pingCache=new GA;var g=new Set;d.set(l,g)}else g=d.get(l),g===void 0&&(g=new Set,d.set(l,g));g.has(c)||(cg=!0,g.add(c),a=QA.bind(null,a,l,c),l.then(a,a))}function QA(a,l,c){var d=a.pingCache;d!==null&&d.delete(l),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,$t===a&&(wt&c)===c&&(is===4||is===3&&(wt&62914560)===wt&&300>bt()-hg?(kt&2)===0&&rc(a,0):ug|=c,ec===wt&&(ec=0)),ia(a)}function Aw(a,l){l===0&&(l=va()),a=$o(a,l),a!==null&&(kr(a,l),ia(a))}function XA(a){var l=a.memoizedState,c=0;l!==null&&(c=l.retryLane),Aw(a,c)}function JA(a,l){var c=0;switch(a.tag){case 13:var d=a.stateNode,g=a.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(l),Aw(a,c)}function ek(a,l){return Ze(a,l)}var Zh=null,ac=null,vg=!1,Yh=!1,wg=!1,Pl=0;function ia(a){a!==ac&&a.next===null&&(ac===null?Zh=ac=a:ac=ac.next=a),Yh=!0,vg||(vg=!0,sk())}function $u(a,l){if(!wg&&Yh){wg=!0;do for(var c=!1,d=Zh;d!==null;){if(a!==0){var g=d.pendingLanes;if(g===0)var y=0;else{var T=d.suspendedLanes,I=d.pingedLanes;y=(1<<31-gt(42|a)+1)-1,y&=g&~(T&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,Rw(d,y))}else y=wt,y=Gr(d,d===$t?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||fr(d,y)||(c=!0,Rw(d,y));d=d.next}while(c);wg=!1}}function tk(){kw()}function kw(){Yh=vg=!1;var a=0;Pl!==0&&(uk()&&(a=Pl),Pl=0);for(var l=bt(),c=null,d=Zh;d!==null;){var g=d.next,y=Tw(d,l);y===0?(d.next=null,c===null?Zh=g:c.next=g,g===null&&(ac=c)):(c=d,(a!==0||(y&3)!==0)&&(Yh=!0)),d=g}$u(a)}function Tw(a,l){for(var c=a.suspendedLanes,d=a.pingedLanes,g=a.expirationTimes,y=a.pendingLanes&-62914561;0<y;){var T=31-gt(y),I=1<<T,Y=g[T];Y===-1?((I&c)===0||(I&d)!==0)&&(g[T]=Zr(I,l)):Y<=l&&(a.expiredLanes|=I),y&=~I}if(l=$t,c=wt,c=Gr(a,a===l?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,c===0||a===l&&(Tt===2||Tt===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Ke(d),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||fr(a,c)){if(l=c&-c,l===a.callbackPriority)return l;switch(d!==null&&Ke(d),ja(c)){case 2:case 8:c=G;break;case 32:c=re;break;case 268435456:c=ke;break;default:c=re}return d=Ow.bind(null,a),c=Ze(c,d),a.callbackPriority=l,a.callbackNode=c,l}return d!==null&&d!==null&&Ke(d),a.callbackPriority=2,a.callbackNode=null,2}function Ow(a,l){if(Ys!==0&&Ys!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(Gh()&&a.callbackNode!==c)return null;var d=wt;return d=Gr(a,a===$t?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(mw(a,d,l),Tw(a,bt()),a.callbackNode!=null&&a.callbackNode===c?Ow.bind(null,a):null)}function Rw(a,l){if(Gh())return null;mw(a,l,!0)}function sk(){hk(function(){(kt&6)!==0?Ze(vt,tk):kw()})}function _g(){return Pl===0&&(Pl=pr()),Pl}function Mw(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:hi(""+a)}function Dw(a,l){var c=l.ownerDocument.createElement("input");return c.name=l.name,c.value=l.value,a.id&&c.setAttribute("form",a.id),l.parentNode.insertBefore(c,l),a=new FormData(a),c.parentNode.removeChild(c),a}function rk(a,l,c,d,g){if(l==="submit"&&c&&c.stateNode===g){var y=Mw((g[Ls]||null).action),T=d.submitter;T&&(l=(l=T[Ls]||null)?Mw(l.formAction):T.getAttribute("formAction"),l!==null&&(y=l,T=null));var I=new ge("action","action",null,d,g);a.push({event:I,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Pl!==0){var Y=T?Dw(g,T):new FormData(g);zp(c,{pending:!0,data:Y,method:g.method,action:y},null,Y)}}else typeof y=="function"&&(I.preventDefault(),Y=T?Dw(g,T):new FormData(g),zp(c,{pending:!0,data:Y,method:g.method,action:y},y,Y))},currentTarget:g}]})}}for(var jg=0;jg<lp.length;jg++){var Ng=lp[jg],nk=Ng.toLowerCase(),ak=Ng[0].toUpperCase()+Ng.slice(1);wn(nk,"on"+ak)}wn(mb,"onAnimationEnd"),wn(fb,"onAnimationIteration"),wn(pb,"onAnimationStart"),wn("dblclick","onDoubleClick"),wn("focusin","onFocus"),wn("focusout","onBlur"),wn(_A,"onTransitionRun"),wn(jA,"onTransitionStart"),wn(NA,"onTransitionCancel"),wn(gb,"onTransitionEnd"),os("onMouseEnter",["mouseout","mouseover"]),os("onMouseLeave",["mouseout","mouseover"]),os("onPointerEnter",["pointerout","pointerover"]),os("onPointerLeave",["pointerout","pointerover"]),pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ik=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uu));function Lw(a,l){l=(l&4)!==0;for(var c=0;c<a.length;c++){var d=a[c],g=d.event;d=d.listeners;e:{var y=void 0;if(l)for(var T=d.length-1;0<=T;T--){var I=d[T],Y=I.instance,ie=I.currentTarget;if(I=I.listener,Y!==y&&g.isPropagationStopped())break e;y=I,g.currentTarget=ie;try{y(g)}catch(ye){Lh(ye)}g.currentTarget=null,y=Y}else for(T=0;T<d.length;T++){if(I=d[T],Y=I.instance,ie=I.currentTarget,I=I.listener,Y!==y&&g.isPropagationStopped())break e;y=I,g.currentTarget=ie;try{y(g)}catch(ye){Lh(ye)}g.currentTarget=null,y=Y}}}}function mt(a,l){var c=l[ui];c===void 0&&(c=l[ui]=new Set);var d=a+"__bubble";c.has(d)||(qw(l,a,2,!1),c.add(d))}function Sg(a,l,c){var d=0;l&&(d|=4),qw(c,a,d,l)}var Kh="_reactListening"+Math.random().toString(36).slice(2);function Eg(a){if(!a[Kh]){a[Kh]=!0,Eo.forEach(function(c){c!=="selectionchange"&&(ik.has(c)||Sg(c,!1,a),Sg(c,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Kh]||(l[Kh]=!0,Sg("selectionchange",!1,l))}}function qw(a,l,c,d){switch(i_(l)){case 2:var g=Mk;break;case 8:g=Dk;break;default:g=Ug}c=g.bind(null,l,c,a),g=void 0,!pi||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(g=!0),d?g!==void 0?a.addEventListener(l,c,{capture:!0,passive:g}):a.addEventListener(l,c,!0):g!==void 0?a.addEventListener(l,c,{passive:g}):a.addEventListener(l,c,!1)}function Cg(a,l,c,d,g){var y=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var I=d.stateNode.containerInfo;if(I===g)break;if(T===4)for(T=d.return;T!==null;){var Y=T.tag;if((Y===3||Y===4)&&T.stateNode.containerInfo===g)return;T=T.return}for(;I!==null;){if(T=Yn(I),T===null)return;if(Y=T.tag,Y===5||Y===6||Y===26||Y===27){d=y=T;continue e}I=I.parentNode}}d=d.return}fi(function(){var ie=y,ye=mi(c),_e=[];e:{var oe=xb.get(a);if(oe!==void 0){var ce=ge,st=a;switch(a){case"keypress":if(xi(c)===0)break e;case"keydown":case"keyup":ce=eA;break;case"focusin":st="focus",ce=us;break;case"focusout":st="blur",ce=us;break;case"beforeblur":case"afterblur":ce=us;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Cs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=cs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=rA;break;case mb:case fb:case pb:ce=vn;break;case gb:ce=aA;break;case"scroll":case"scrollend":ce=Ve;break;case"wheel":ce=lA;break;case"copy":case"cut":case"paste":ce=uh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Yy;break;case"toggle":case"beforetoggle":ce=cA}var Xe=(l&4)!==0,Lt=!Xe&&(a==="scroll"||a==="scrollend"),te=Xe?oe!==null?oe+"Capture":null:oe;Xe=[];for(var W=ie,ne;W!==null;){var ve=W;if(ne=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||ne===null||te===null||(ve=Qr(W,te),ve!=null&&Xe.push(Bu(W,ve,ne))),Lt)break;W=W.return}0<Xe.length&&(oe=new ce(oe,st,null,c,ye),_e.push({event:oe,listeners:Xe}))}}if((l&7)===0){e:{if(oe=a==="mouseover"||a==="pointerover",ce=a==="mouseout"||a==="pointerout",oe&&c!==vl&&(st=c.relatedTarget||c.fromElement)&&(Yn(st)||st[Zn]))break e;if((ce||oe)&&(oe=ye.window===ye?ye:(oe=ye.ownerDocument)?oe.defaultView||oe.parentWindow:window,ce?(st=c.relatedTarget||c.toElement,ce=ie,st=st?Yn(st):null,st!==null&&(Lt=o(st),Xe=st.tag,st!==Lt||Xe!==5&&Xe!==27&&Xe!==6)&&(st=null)):(ce=null,st=ie),ce!==st)){if(Xe=Cs,ve="onMouseLeave",te="onMouseEnter",W="mouse",(a==="pointerout"||a==="pointerover")&&(Xe=Yy,ve="onPointerLeave",te="onPointerEnter",W="pointer"),Lt=ce==null?oe:ss(ce),ne=st==null?oe:ss(st),oe=new Xe(ve,W+"leave",ce,c,ye),oe.target=Lt,oe.relatedTarget=ne,ve=null,Yn(ye)===ie&&(Xe=new Xe(te,W+"enter",st,c,ye),Xe.target=ne,Xe.relatedTarget=Lt,ve=Xe),Lt=ve,ce&&st)t:{for(Xe=ce,te=st,W=0,ne=Xe;ne;ne=ic(ne))W++;for(ne=0,ve=te;ve;ve=ic(ve))ne++;for(;0<W-ne;)Xe=ic(Xe),W--;for(;0<ne-W;)te=ic(te),ne--;for(;W--;){if(Xe===te||te!==null&&Xe===te.alternate)break t;Xe=ic(Xe),te=ic(te)}Xe=null}else Xe=null;ce!==null&&Pw(_e,oe,ce,Xe,!1),st!==null&&Lt!==null&&Pw(_e,Lt,st,Xe,!0)}}e:{if(oe=ie?ss(ie):window,ce=oe.nodeName&&oe.nodeName.toLowerCase(),ce==="select"||ce==="input"&&oe.type==="file")var Ie=sb;else if(eb(oe))if(rb)Ie=bA;else{Ie=xA;var ct=gA}else ce=oe.nodeName,!ce||ce.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ie&&xr(ie.elementType)&&(Ie=sb):Ie=yA;if(Ie&&(Ie=Ie(a,ie))){tb(_e,Ie,c,ye);break e}ct&&ct(a,oe,ie),a==="focusout"&&ie&&oe.type==="number"&&ie.memoizedProps.value!=null&&Ca(oe,"number",oe.value)}switch(ct=ie?ss(ie):window,a){case"focusin":(eb(ct)||ct.contentEditable==="true")&&(qo=ct,np=ie,mu=null);break;case"focusout":mu=np=qo=null;break;case"mousedown":ap=!0;break;case"contextmenu":case"mouseup":case"dragend":ap=!1,db(_e,c,ye);break;case"selectionchange":if(wA)break;case"keydown":case"keyup":db(_e,c,ye)}var Ge;if(ep)e:{switch(a){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else Lo?Xy(a,c)&&(et="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(et="onCompositionStart");et&&(Ky&&c.locale!=="ko"&&(Lo||et!=="onCompositionStart"?et==="onCompositionEnd"&&Lo&&(Ge=gi()):(Rr=ye,yr="value"in Rr?Rr.value:Rr.textContent,Lo=!0)),ct=Wh(ie,et),0<ct.length&&(et=new _l(et,a,null,c,ye),_e.push({event:et,listeners:ct}),Ge?et.data=Ge:(Ge=Jy(c),Ge!==null&&(et.data=Ge)))),(Ge=dA?hA(a,c):mA(a,c))&&(et=Wh(ie,"onBeforeInput"),0<et.length&&(ct=new _l("onBeforeInput","beforeinput",null,c,ye),_e.push({event:ct,listeners:et}),ct.data=Ge)),rk(_e,a,ie,c,ye)}Lw(_e,l)})}function Bu(a,l,c){return{instance:a,listener:l,currentTarget:c}}function Wh(a,l){for(var c=l+"Capture",d=[];a!==null;){var g=a,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Qr(a,c),g!=null&&d.unshift(Bu(a,g,y)),g=Qr(a,l),g!=null&&d.push(Bu(a,g,y))),a.tag===3)return d;a=a.return}return[]}function ic(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Pw(a,l,c,d,g){for(var y=l._reactName,T=[];c!==null&&c!==d;){var I=c,Y=I.alternate,ie=I.stateNode;if(I=I.tag,Y!==null&&Y===d)break;I!==5&&I!==26&&I!==27||ie===null||(Y=ie,g?(ie=Qr(c,y),ie!=null&&T.unshift(Bu(c,ie,Y))):g||(ie=Qr(c,y),ie!=null&&T.push(Bu(c,ie,Y)))),c=c.return}T.length!==0&&a.push({event:l,listeners:T})}var lk=/\r\n?/g,ok=/\u0000|\uFFFD/g;function Iw(a){return(typeof a=="string"?a:""+a).replace(lk,`
`).replace(ok,"")}function $w(a,l){return l=Iw(l),Iw(a)===l}function Qh(){}function Dt(a,l,c,d,g,y){switch(c){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||qs(a,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&qs(a,""+d);break;case"className":gn(a,"class",d);break;case"tabIndex":gn(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":gn(a,c,d);break;case"style":Mo(a,d,y);break;case"data":if(l!=="object"){gn(a,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||c!=="href")){a.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=hi(""+d),a.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(l!=="input"&&Dt(a,l,"name",g.name,g,null),Dt(a,l,"formEncType",g.formEncType,g,null),Dt(a,l,"formMethod",g.formMethod,g,null),Dt(a,l,"formTarget",g.formTarget,g,null)):(Dt(a,l,"encType",g.encType,g,null),Dt(a,l,"method",g.method,g,null),Dt(a,l,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=hi(""+d),a.setAttribute(c,d);break;case"onClick":d!=null&&(a.onclick=Qh);break;case"onScroll":d!=null&&mt("scroll",a);break;case"onScrollEnd":d!=null&&mt("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}c=hi(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""+d):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":d===!0?a.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,d):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(c,d):a.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(c):a.setAttribute(c,d);break;case"popover":mt("beforetoggle",a),mt("toggle",a),di(a,"popover",d);break;case"xlinkActuate":gr(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":gr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":gr(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":gr(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":gr(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":gr(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":gr(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":gr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":gr(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":di(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=lu.get(c)||c,di(a,c,d))}}function Ag(a,l,c,d,g,y){switch(c){case"style":Mo(a,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof d=="string"?qs(a,d):(typeof d=="number"||typeof d=="bigint")&&qs(a,""+d);break;case"onScroll":d!=null&&mt("scroll",a);break;case"onScrollEnd":d!=null&&mt("scrollend",a);break;case"onClick":d!=null&&(a.onclick=Qh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Co.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),l=c.slice(2,g?c.length-7:void 0),y=a[Ls]||null,y=y!=null?y[c]:null,typeof y=="function"&&a.removeEventListener(l,y,g),typeof d=="function")){typeof y!="function"&&y!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(l,d,g);break e}c in a?a[c]=d:d===!0?a.setAttribute(c,""):di(a,c,d)}}}function Ks(a,l,c){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mt("error",a),mt("load",a);var d=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var T=c[y];if(T!=null)switch(y){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Dt(a,l,y,T,c,null)}}g&&Dt(a,l,"srcSet",c.srcSet,c,null),d&&Dt(a,l,"src",c.src,c,null);return;case"input":mt("invalid",a);var I=y=T=g=null,Y=null,ie=null;for(d in c)if(c.hasOwnProperty(d)){var ye=c[d];if(ye!=null)switch(d){case"name":g=ye;break;case"type":T=ye;break;case"checked":Y=ye;break;case"defaultChecked":ie=ye;break;case"value":y=ye;break;case"defaultValue":I=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,l));break;default:Dt(a,l,d,ye,c,null)}}Oo(a,y,I,Y,ie,T,g,!1),Kr(a);return;case"select":mt("invalid",a),d=T=y=null;for(g in c)if(c.hasOwnProperty(g)&&(I=c[g],I!=null))switch(g){case"value":y=I;break;case"defaultValue":T=I;break;case"multiple":d=I;default:Dt(a,l,g,I,c,null)}l=y,c=T,a.multiple=!!d,l!=null?Xn(a,!!d,l,!1):c!=null&&Xn(a,!!d,c,!0);return;case"textarea":mt("invalid",a),y=g=d=null;for(T in c)if(c.hasOwnProperty(T)&&(I=c[T],I!=null))switch(T){case"value":d=I;break;case"defaultValue":g=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:Dt(a,l,T,I,c,null)}Jn(a,d,g,y),Kr(a);return;case"option":for(Y in c)if(c.hasOwnProperty(Y)&&(d=c[Y],d!=null))switch(Y){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Dt(a,l,Y,d,c,null)}return;case"dialog":mt("beforetoggle",a),mt("toggle",a),mt("cancel",a),mt("close",a);break;case"iframe":case"object":mt("load",a);break;case"video":case"audio":for(d=0;d<Uu.length;d++)mt(Uu[d],a);break;case"image":mt("error",a),mt("load",a);break;case"details":mt("toggle",a);break;case"embed":case"source":case"link":mt("error",a),mt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in c)if(c.hasOwnProperty(ie)&&(d=c[ie],d!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Dt(a,l,ie,d,c,null)}return;default:if(xr(l)){for(ye in c)c.hasOwnProperty(ye)&&(d=c[ye],d!==void 0&&Ag(a,l,ye,d,c,void 0));return}}for(I in c)c.hasOwnProperty(I)&&(d=c[I],d!=null&&Dt(a,l,I,d,c,null))}function ck(a,l,c,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,T=null,I=null,Y=null,ie=null,ye=null;for(ce in c){var _e=c[ce];if(c.hasOwnProperty(ce)&&_e!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":Y=_e;default:d.hasOwnProperty(ce)||Dt(a,l,ce,null,d,_e)}}for(var oe in d){var ce=d[oe];if(_e=c[oe],d.hasOwnProperty(oe)&&(ce!=null||_e!=null))switch(oe){case"type":y=ce;break;case"name":g=ce;break;case"checked":ie=ce;break;case"defaultChecked":ye=ce;break;case"value":T=ce;break;case"defaultValue":I=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,l));break;default:ce!==_e&&Dt(a,l,oe,ce,d,_e)}}bl(a,T,I,Y,ie,ye,y,g);return;case"select":ce=T=I=oe=null;for(y in c)if(Y=c[y],c.hasOwnProperty(y)&&Y!=null)switch(y){case"value":break;case"multiple":ce=Y;default:d.hasOwnProperty(y)||Dt(a,l,y,null,d,Y)}for(g in d)if(y=d[g],Y=c[g],d.hasOwnProperty(g)&&(y!=null||Y!=null))switch(g){case"value":oe=y;break;case"defaultValue":I=y;break;case"multiple":T=y;default:y!==Y&&Dt(a,l,g,y,d,Y)}l=I,c=T,d=ce,oe!=null?Xn(a,!!c,oe,!1):!!d!=!!c&&(l!=null?Xn(a,!!c,l,!0):Xn(a,!!c,c?[]:"",!1));return;case"textarea":ce=oe=null;for(I in c)if(g=c[I],c.hasOwnProperty(I)&&g!=null&&!d.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Dt(a,l,I,null,d,g)}for(T in d)if(g=d[T],y=c[T],d.hasOwnProperty(T)&&(g!=null||y!=null))switch(T){case"value":oe=g;break;case"defaultValue":ce=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==y&&Dt(a,l,T,g,d,y)}Ro(a,oe,ce);return;case"option":for(var st in c)if(oe=c[st],c.hasOwnProperty(st)&&oe!=null&&!d.hasOwnProperty(st))switch(st){case"selected":a.selected=!1;break;default:Dt(a,l,st,null,d,oe)}for(Y in d)if(oe=d[Y],ce=c[Y],d.hasOwnProperty(Y)&&oe!==ce&&(oe!=null||ce!=null))switch(Y){case"selected":a.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:Dt(a,l,Y,oe,d,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in c)oe=c[Xe],c.hasOwnProperty(Xe)&&oe!=null&&!d.hasOwnProperty(Xe)&&Dt(a,l,Xe,null,d,oe);for(ie in d)if(oe=d[ie],ce=c[ie],d.hasOwnProperty(ie)&&oe!==ce&&(oe!=null||ce!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,l));break;default:Dt(a,l,ie,oe,d,ce)}return;default:if(xr(l)){for(var Lt in c)oe=c[Lt],c.hasOwnProperty(Lt)&&oe!==void 0&&!d.hasOwnProperty(Lt)&&Ag(a,l,Lt,void 0,d,oe);for(ye in d)oe=d[ye],ce=c[ye],!d.hasOwnProperty(ye)||oe===ce||oe===void 0&&ce===void 0||Ag(a,l,ye,oe,d,ce);return}}for(var te in c)oe=c[te],c.hasOwnProperty(te)&&oe!=null&&!d.hasOwnProperty(te)&&Dt(a,l,te,null,d,oe);for(_e in d)oe=d[_e],ce=c[_e],!d.hasOwnProperty(_e)||oe===ce||oe==null&&ce==null||Dt(a,l,_e,oe,d,ce)}var kg=null,Tg=null;function Xh(a){return a.nodeType===9?a:a.ownerDocument}function Uw(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bw(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function Og(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Rg=null;function uk(){var a=window.event;return a&&a.type==="popstate"?a===Rg?!1:(Rg=a,!0):(Rg=null,!1)}var zw=typeof setTimeout=="function"?setTimeout:void 0,dk=typeof clearTimeout=="function"?clearTimeout:void 0,Fw=typeof Promise=="function"?Promise:void 0,hk=typeof queueMicrotask=="function"?queueMicrotask:typeof Fw<"u"?function(a){return Fw.resolve(null).then(a).catch(mk)}:zw;function mk(a){setTimeout(function(){throw a})}function Di(a){return a==="head"}function Hw(a,l){var c=l,d=0,g=0;do{var y=c.nextSibling;if(a.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(0<d&&8>d){c=d;var T=a.ownerDocument;if(c&1&&zu(T.documentElement),c&2&&zu(T.body),c&4)for(c=T.head,zu(c),T=c.firstChild;T;){var I=T.nextSibling,Y=T.nodeName;T[Na]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&T.rel.toLowerCase()==="stylesheet"||c.removeChild(T),T=I}}if(g===0){a.removeChild(y),Wu(l);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:d=c.charCodeAt(0)-48;else d=0;c=y}while(c);Wu(l)}function Mg(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var c=l;switch(l=l.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Mg(c),fl(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function fk(a,l,c,d){for(;a.nodeType===1;){var g=c;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Na])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(y=a.getAttribute("rel"),y==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(y!==g.rel||a.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||a.getAttribute("title")!==(g.title==null?null:g.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(y=a.getAttribute("src"),(y!==(g.src==null?null:g.src)||a.getAttribute("type")!==(g.type==null?null:g.type)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&a.getAttribute("name")===y)return a}else return a;if(a=jn(a.nextSibling),a===null)break}return null}function pk(a,l,c){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=jn(a.nextSibling),a===null))return null;return a}function Dg(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function gk(a,l){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")l();else{var d=function(){l(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function jn(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return a}var Lg=null;function Vw(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(l===0)return a;l--}else c==="/$"&&l++}a=a.previousSibling}return null}function Gw(a,l,c){switch(l=Xh(c),a){case"html":if(a=l.documentElement,!a)throw Error(r(452));return a;case"head":if(a=l.head,!a)throw Error(r(453));return a;case"body":if(a=l.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function zu(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);fl(a)}var nn=new Map,Zw=new Set;function Jh(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var za=Z.d;Z.d={f:xk,r:yk,D:bk,C:vk,L:wk,m:_k,X:Nk,S:jk,M:Sk};function xk(){var a=za.f(),l=Hh();return a||l}function yk(a){var l=Kn(a);l!==null&&l.tag===5&&l.type==="form"?mv(l):za.r(a)}var lc=typeof document>"u"?null:document;function Yw(a,l,c){var d=lc;if(d&&typeof l=="string"&&l){var g=Js(l);g='link[rel="'+a+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),Zw.has(g)||(Zw.add(g),a={rel:a,crossOrigin:c,href:l},d.querySelector(g)===null&&(l=d.createElement("link"),Ks(l,"link",a),rs(l),d.head.appendChild(l)))}}function bk(a){za.D(a),Yw("dns-prefetch",a,null)}function vk(a,l){za.C(a,l),Yw("preconnect",a,l)}function wk(a,l,c){za.L(a,l,c);var d=lc;if(d&&a&&l){var g='link[rel="preload"][as="'+Js(l)+'"]';l==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Js(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Js(c.imageSizes)+'"]')):g+='[href="'+Js(a)+'"]';var y=g;switch(l){case"style":y=oc(a);break;case"script":y=cc(a)}nn.has(y)||(a=p({rel:"preload",href:l==="image"&&c&&c.imageSrcSet?void 0:a,as:l},c),nn.set(y,a),d.querySelector(g)!==null||l==="style"&&d.querySelector(Fu(y))||l==="script"&&d.querySelector(Hu(y))||(l=d.createElement("link"),Ks(l,"link",a),rs(l),d.head.appendChild(l)))}}function _k(a,l){za.m(a,l);var c=lc;if(c&&a){var d=l&&typeof l.as=="string"?l.as:"script",g='link[rel="modulepreload"][as="'+Js(d)+'"][href="'+Js(a)+'"]',y=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=cc(a)}if(!nn.has(y)&&(a=p({rel:"modulepreload",href:a},l),nn.set(y,a),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Hu(y)))return}d=c.createElement("link"),Ks(d,"link",a),rs(d),c.head.appendChild(d)}}}function jk(a,l,c){za.S(a,l,c);var d=lc;if(d&&a){var g=Wn(d).hoistableStyles,y=oc(a);l=l||"default";var T=g.get(y);if(!T){var I={loading:0,preload:null};if(T=d.querySelector(Fu(y)))I.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":l},c),(c=nn.get(y))&&qg(a,c);var Y=T=d.createElement("link");rs(Y),Ks(Y,"link",a),Y._p=new Promise(function(ie,ye){Y.onload=ie,Y.onerror=ye}),Y.addEventListener("load",function(){I.loading|=1}),Y.addEventListener("error",function(){I.loading|=2}),I.loading|=4,em(T,l,d)}T={type:"stylesheet",instance:T,count:1,state:I},g.set(y,T)}}}function Nk(a,l){za.X(a,l);var c=lc;if(c&&a){var d=Wn(c).hoistableScripts,g=cc(a),y=d.get(g);y||(y=c.querySelector(Hu(g)),y||(a=p({src:a,async:!0},l),(l=nn.get(g))&&Pg(a,l),y=c.createElement("script"),rs(y),Ks(y,"link",a),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function Sk(a,l){za.M(a,l);var c=lc;if(c&&a){var d=Wn(c).hoistableScripts,g=cc(a),y=d.get(g);y||(y=c.querySelector(Hu(g)),y||(a=p({src:a,async:!0,type:"module"},l),(l=nn.get(g))&&Pg(a,l),y=c.createElement("script"),rs(y),Ks(y,"link",a),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function Kw(a,l,c,d){var g=(g=Ae.current)?Jh(g):null;if(!g)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(l=oc(c.href),c=Wn(g).hoistableStyles,d=c.get(l),d||(d={type:"style",instance:null,count:0,state:null},c.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=oc(c.href);var y=Wn(g).hoistableStyles,T=y.get(a);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(a,T),(y=g.querySelector(Fu(a)))&&!y._p&&(T.instance=y,T.state.loading=5),nn.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},nn.set(a,c),y||Ek(g,a,c,T.state))),l&&d===null)throw Error(r(528,""));return T}if(l&&d!==null)throw Error(r(529,""));return null;case"script":return l=c.async,c=c.src,typeof c=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=cc(c),c=Wn(g).hoistableScripts,d=c.get(l),d||(d={type:"script",instance:null,count:0,state:null},c.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function oc(a){return'href="'+Js(a)+'"'}function Fu(a){return'link[rel="stylesheet"]['+a+"]"}function Ww(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function Ek(a,l,c,d){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=a.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),Ks(l,"link",c),rs(l),a.head.appendChild(l))}function cc(a){return'[src="'+Js(a)+'"]'}function Hu(a){return"script[async]"+a}function Qw(a,l,c){if(l.count++,l.instance===null)switch(l.type){case"style":var d=a.querySelector('style[data-href~="'+Js(c.href)+'"]');if(d)return l.instance=d,rs(d),d;var g=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),rs(d),Ks(d,"style",g),em(d,c.precedence,a),l.instance=d;case"stylesheet":g=oc(c.href);var y=a.querySelector(Fu(g));if(y)return l.state.loading|=4,l.instance=y,rs(y),y;d=Ww(c),(g=nn.get(g))&&qg(d,g),y=(a.ownerDocument||a).createElement("link"),rs(y);var T=y;return T._p=new Promise(function(I,Y){T.onload=I,T.onerror=Y}),Ks(y,"link",d),l.state.loading|=4,em(y,c.precedence,a),l.instance=y;case"script":return y=cc(c.src),(g=a.querySelector(Hu(y)))?(l.instance=g,rs(g),g):(d=c,(g=nn.get(y))&&(d=p({},c),Pg(d,g)),a=a.ownerDocument||a,g=a.createElement("script"),rs(g),Ks(g,"link",d),a.head.appendChild(g),l.instance=g);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,em(d,c.precedence,a));return l.instance}function em(a,l,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,y=g,T=0;T<d.length;T++){var I=d[T];if(I.dataset.precedence===l)y=I;else if(y!==g)break}y?y.parentNode.insertBefore(a,y.nextSibling):(l=c.nodeType===9?c.head:c,l.insertBefore(a,l.firstChild))}function qg(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function Pg(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var tm=null;function Xw(a,l,c){if(tm===null){var d=new Map,g=tm=new Map;g.set(c,d)}else g=tm,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(a))return d;for(d.set(a,null),c=c.getElementsByTagName(a),g=0;g<c.length;g++){var y=c[g];if(!(y[Na]||y[ys]||a==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(l)||"";T=a+T;var I=d.get(T);I?I.push(y):d.set(T,[y])}}return d}function Jw(a,l,c){a=a.ownerDocument||a,a.head.insertBefore(c,l==="title"?a.querySelector("head > title"):null)}function Ck(a,l,c){if(c===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function e_(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Vu=null;function Ak(){}function kk(a,l,c){if(Vu===null)throw Error(r(475));var d=Vu;if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=oc(c.href),y=a.querySelector(Fu(g));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(d.count++,d=sm.bind(d),a.then(d,d)),l.state.loading|=4,l.instance=y,rs(y);return}y=a.ownerDocument||a,c=Ww(c),(g=nn.get(g))&&qg(c,g),y=y.createElement("link"),rs(y);var T=y;T._p=new Promise(function(I,Y){T.onload=I,T.onerror=Y}),Ks(y,"link",c),l.instance=y}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(d.count++,l=sm.bind(d),a.addEventListener("load",l),a.addEventListener("error",l))}}function Tk(){if(Vu===null)throw Error(r(475));var a=Vu;return a.stylesheets&&a.count===0&&Ig(a,a.stylesheets),0<a.count?function(l){var c=setTimeout(function(){if(a.stylesheets&&Ig(a,a.stylesheets),a.unsuspend){var d=a.unsuspend;a.unsuspend=null,d()}},6e4);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(c)}}:null}function sm(){if(this.count--,this.count===0){if(this.stylesheets)Ig(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var rm=null;function Ig(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,rm=new Map,l.forEach(Ok,a),rm=null,sm.call(a))}function Ok(a,l){if(!(l.state.loading&4)){var c=rm.get(a);if(c)var d=c.get(null);else{c=new Map,rm.set(a,c);for(var g=a.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var T=g[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),d=T)}d&&c.set(null,d)}g=l.instance,T=g.getAttribute("data-precedence"),y=c.get(T)||d,y===d&&c.set(null,g),c.set(T,g),this.count++,d=sm.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),y?y.parentNode.insertBefore(g,y.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(g,a.firstChild)),l.state.loading|=4}}var Gu={$$typeof:O,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function Rk(a,l,c,d,g,y,T,I){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wa(0),this.hiddenUpdates=wa(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function t_(a,l,c,d,g,y,T,I,Y,ie,ye,_e){return a=new Rk(a,l,c,T,I,Y,ie,_e),l=1,y===!0&&(l|=24),y=Dr(3,null,null,l),a.current=y,y.stateNode=a,l=bp(),l.refCount++,a.pooledCache=l,l.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:l},jp(y),a}function s_(a){return a?(a=Uo,a):Uo}function r_(a,l,c,d,g,y){g=s_(g),d.context===null?d.context=g:d.pendingContext=g,d=wi(l),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=_i(a,d,l),c!==null&&($r(c,a,l),_u(c,a,l))}function n_(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<l?c:l}}function $g(a,l){n_(a,l),(a=a.alternate)&&n_(a,l)}function a_(a){if(a.tag===13){var l=$o(a,67108864);l!==null&&$r(l,a,67108864),$g(a,67108864)}}var nm=!0;function Mk(a,l,c,d){var g=P.T;P.T=null;var y=Z.p;try{Z.p=2,Ug(a,l,c,d)}finally{Z.p=y,P.T=g}}function Dk(a,l,c,d){var g=P.T;P.T=null;var y=Z.p;try{Z.p=8,Ug(a,l,c,d)}finally{Z.p=y,P.T=g}}function Ug(a,l,c,d){if(nm){var g=Bg(d);if(g===null)Cg(a,l,d,am,c),l_(a,d);else if(qk(g,a,l,c,d))d.stopPropagation();else if(l_(a,d),l&4&&-1<Lk.indexOf(a)){for(;g!==null;){var y=Kn(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=Qs(y.pendingLanes);if(T!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;T;){var Y=1<<31-gt(T);I.entanglements[1]|=Y,T&=~Y}ia(y),(kt&6)===0&&(zh=bt()+500,$u(0))}}break;case 13:I=$o(y,2),I!==null&&$r(I,y,2),Hh(),$g(y,2)}if(y=Bg(d),y===null&&Cg(a,l,d,am,c),y===g)break;g=y}g!==null&&d.stopPropagation()}else Cg(a,l,d,null,c)}}function Bg(a){return a=mi(a),zg(a)}var am=null;function zg(a){if(am=null,a=Yn(a),a!==null){var l=o(a);if(l===null)a=null;else{var c=l.tag;if(c===13){if(a=u(l),a!==null)return a;a=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return am=a,null}function i_(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ut()){case vt:return 2;case G:return 8;case re:case me:return 32;case ke:return 268435456;default:return 32}default:return 32}}var Fg=!1,Li=null,qi=null,Pi=null,Zu=new Map,Yu=new Map,Ii=[],Lk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function l_(a,l){switch(a){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":qi=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":Zu.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yu.delete(l.pointerId)}}function Ku(a,l,c,d,g,y){return a===null||a.nativeEvent!==y?(a={blockedOn:l,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[g]},l!==null&&(l=Kn(l),l!==null&&a_(l)),a):(a.eventSystemFlags|=d,l=a.targetContainers,g!==null&&l.indexOf(g)===-1&&l.push(g),a)}function qk(a,l,c,d,g){switch(l){case"focusin":return Li=Ku(Li,a,l,c,d,g),!0;case"dragenter":return qi=Ku(qi,a,l,c,d,g),!0;case"mouseover":return Pi=Ku(Pi,a,l,c,d,g),!0;case"pointerover":var y=g.pointerId;return Zu.set(y,Ku(Zu.get(y)||null,a,l,c,d,g)),!0;case"gotpointercapture":return y=g.pointerId,Yu.set(y,Ku(Yu.get(y)||null,a,l,c,d,g)),!0}return!1}function o_(a){var l=Yn(a.target);if(l!==null){var c=o(l);if(c!==null){if(l=c.tag,l===13){if(l=u(c),l!==null){a.blockedOn=l,No(a.priority,function(){if(c.tag===13){var d=Ir();d=_a(d);var g=$o(c,d);g!==null&&$r(g,c,d),$g(c,d)}});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function im(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var c=Bg(a.nativeEvent);if(c===null){c=a.nativeEvent;var d=new c.constructor(c.type,c);vl=d,c.target.dispatchEvent(d),vl=null}else return l=Kn(c),l!==null&&a_(l),a.blockedOn=c,!1;l.shift()}return!0}function c_(a,l,c){im(a)&&c.delete(l)}function Pk(){Fg=!1,Li!==null&&im(Li)&&(Li=null),qi!==null&&im(qi)&&(qi=null),Pi!==null&&im(Pi)&&(Pi=null),Zu.forEach(c_),Yu.forEach(c_)}function lm(a,l){a.blockedOn===l&&(a.blockedOn=null,Fg||(Fg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Pk)))}var om=null;function u_(a){om!==a&&(om=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){om===a&&(om=null);for(var l=0;l<a.length;l+=3){var c=a[l],d=a[l+1],g=a[l+2];if(typeof d!="function"){if(zg(d||c)===null)continue;break}var y=Kn(c);y!==null&&(a.splice(l,3),l-=3,zp(y,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function Wu(a){function l(Y){return lm(Y,a)}Li!==null&&lm(Li,a),qi!==null&&lm(qi,a),Pi!==null&&lm(Pi,a),Zu.forEach(l),Yu.forEach(l);for(var c=0;c<Ii.length;c++){var d=Ii[c];d.blockedOn===a&&(d.blockedOn=null)}for(;0<Ii.length&&(c=Ii[0],c.blockedOn===null);)o_(c),c.blockedOn===null&&Ii.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],y=c[d+1],T=g[Ls]||null;if(typeof y=="function")T||u_(c);else if(T){var I=null;if(y&&y.hasAttribute("formAction")){if(g=y,T=y[Ls]||null)I=T.formAction;else if(zg(g)!==null)continue}else I=T.action;typeof I=="function"?c[d+1]=I:(c.splice(d,3),d-=3),u_(c)}}}function Hg(a){this._internalRoot=a}cm.prototype.render=Hg.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(r(409));var c=l.current,d=Ir();r_(c,d,a,l,null,null)},cm.prototype.unmount=Hg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;r_(a.current,2,null,a,null,null),Hh(),l[Zn]=null}};function cm(a){this._internalRoot=a}cm.prototype.unstable_scheduleHydration=function(a){if(a){var l=fn();a={blockedOn:null,target:a,priority:l};for(var c=0;c<Ii.length&&l!==0&&l<Ii[c].priority;c++);Ii.splice(c,0,a),c===0&&o_(a)}};var d_=e.version;if(d_!=="19.1.1")throw Error(r(527,d_,"19.1.1"));Z.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=m(l),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var Ik={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var um=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!um.isDisabled&&um.supportsFiber)try{Te=um.inject(Ik),Pe=um}catch{}}return Xu.createRoot=function(a,l){if(!i(a))throw Error(r(299));var c=!1,d="",g=Cv,y=Av,T=kv,I=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(y=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(I=l.unstable_transitionCallbacks)),l=t_(a,1,!1,null,null,c,d,g,y,T,I,null),a[Zn]=l.current,Eg(a),new Hg(l)},Xu.hydrateRoot=function(a,l,c){if(!i(a))throw Error(r(299));var d=!1,g="",y=Cv,T=Av,I=kv,Y=null,ie=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(I=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(Y=c.unstable_transitionCallbacks),c.formState!==void 0&&(ie=c.formState)),l=t_(a,1,!0,l,c??null,d,g,y,T,I,Y,ie),l.context=s_(null),c=l.current,d=Ir(),d=_a(d),g=wi(d),g.callback=null,_i(c,g,d),c=d,l.current.lanes=c,kr(l,c),ia(l),a[Zn]=l.current,Eg(a),new cm(l)},Xu.version="19.1.1",Xu}var w_;function Wk(){if(w_)return Gg.exports;w_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Gg.exports=Kk(),Gg.exports}var Qk=Wk(),M=Lx();const Hs=Pd(M);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var __="popstate";function Xk(t={}){function e(r,i){let{pathname:o,search:u,hash:h}=r.location;return q0("",{pathname:o,search:u,hash:h},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(r,i){return typeof i=="string"?i:_d(i)}return e4(e,s,null,t)}function Zt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function In(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Jk(){return Math.random().toString(36).substring(2,10)}function j_(t,e){return{usr:t.state,key:t.key,idx:e}}function q0(t,e,s=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?zc(e):e,state:s,key:e&&e.key||r||Jk()}}function _d({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function zc(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function e4(t,e,s,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,u=i.history,h="POP",m=null,f=p();f==null&&(f=0,u.replaceState({...u.state,idx:f},""));function p(){return(u.state||{idx:null}).idx}function x(){h="POP";let _=p(),E=_==null?null:_-f;f=_,m&&m({action:h,location:S.location,delta:E})}function b(_,E){h="PUSH";let A=q0(S.location,_,E);f=p()+1;let O=j_(A,f),F=S.createHref(A);try{u.pushState(O,"",F)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(F)}o&&m&&m({action:h,location:S.location,delta:1})}function j(_,E){h="REPLACE";let A=q0(S.location,_,E);f=p();let O=j_(A,f),F=S.createHref(A);u.replaceState(O,"",F),o&&m&&m({action:h,location:S.location,delta:0})}function v(_){return t4(_)}let S={get action(){return h},get location(){return t(i,u)},listen(_){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(__,x),m=_,()=>{i.removeEventListener(__,x),m=null}},createHref(_){return e(i,_)},createURL:v,encodeLocation(_){let E=v(_);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:j,go(_){return u.go(_)}};return S}function t4(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Zt(s,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:_d(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=s+r),new URL(r,s)}function I2(t,e,s="/"){return s4(t,e,s,!1)}function s4(t,e,s,r){let i=typeof e=="string"?zc(e):e,o=ei(i.pathname||"/",s);if(o==null)return null;let u=$2(t);r4(u);let h=null;for(let m=0;h==null&&m<u.length;++m){let f=f4(o);h=h4(u[m],f,r)}return h}function $2(t,e=[],s=[],r=""){let i=(o,u,h)=>{let m={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};m.relativePath.startsWith("/")&&(Zt(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let f=Wa([r,m.relativePath]),p=s.concat(m);o.children&&o.children.length>0&&(Zt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),$2(o.children,e,p,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:u4(f,o.index),routesMeta:p})};return t.forEach((o,u)=>{if(o.path===""||!o.path?.includes("?"))i(o,u);else for(let h of U2(o.path))i(o,u,h)}),e}function U2(t){let e=t.split("/");if(e.length===0)return[];let[s,...r]=e,i=s.endsWith("?"),o=s.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let u=U2(r.join("/")),h=[];return h.push(...u.map(m=>m===""?o:[o,m].join("/"))),i&&h.push(...u),h.map(m=>t.startsWith("/")&&m===""?"/":m)}function r4(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:d4(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}var n4=/^:[\w-]+$/,a4=3,i4=2,l4=1,o4=10,c4=-2,N_=t=>t==="*";function u4(t,e){let s=t.split("/"),r=s.length;return s.some(N_)&&(r+=c4),e&&(r+=i4),s.filter(i=>!N_(i)).reduce((i,o)=>i+(n4.test(o)?a4:o===""?l4:o4),r)}function d4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function h4(t,e,s=!1){let{routesMeta:r}=t,i={},o="/",u=[];for(let h=0;h<r.length;++h){let m=r[h],f=h===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",x=Ym({path:m.relativePath,caseSensitive:m.caseSensitive,end:f},p),b=m.route;if(!x&&f&&s&&!r[r.length-1].route.index&&(x=Ym({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},p)),!x)return null;Object.assign(i,x.params),u.push({params:i,pathname:Wa([o,x.pathname]),pathnameBase:y4(Wa([o,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(o=Wa([o,x.pathnameBase]))}return u}function Ym(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=m4(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let o=i[0],u=o.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:x},b)=>{if(p==="*"){let v=h[b]||"";u=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const j=h[b];return x&&!j?f[p]=void 0:f[p]=(j||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:u,pattern:t}}function m4(t,e=!1,s=!0){In(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,m)=>(r.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function f4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return In(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ei(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function p4(t,e="/"){let{pathname:s,search:r="",hash:i=""}=typeof t=="string"?zc(t):t;return{pathname:s?s.startsWith("/")?s:g4(s,e):e,search:b4(r),hash:v4(i)}}function g4(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Qg(t,e,s,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function x4(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function qx(t){let e=x4(t);return e.map((s,r)=>r===e.length-1?s.pathname:s.pathnameBase)}function Px(t,e,s,r=!1){let i;typeof t=="string"?i=zc(t):(i={...t},Zt(!i.pathname||!i.pathname.includes("?"),Qg("?","pathname","search",i)),Zt(!i.pathname||!i.pathname.includes("#"),Qg("#","pathname","hash",i)),Zt(!i.search||!i.search.includes("#"),Qg("#","search","hash",i)));let o=t===""||i.pathname==="",u=o?"/":i.pathname,h;if(u==null)h=s;else{let x=e.length-1;if(!r&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),x-=1;i.pathname=b.join("/")}h=x>=0?e[x]:"/"}let m=p4(i,h),f=u&&u!=="/"&&u.endsWith("/"),p=(o||u===".")&&s.endsWith("/");return!m.pathname.endsWith("/")&&(f||p)&&(m.pathname+="/"),m}var Wa=t=>t.join("/").replace(/\/\/+/g,"/"),y4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),b4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,v4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function w4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var B2=["POST","PUT","PATCH","DELETE"];new Set(B2);var _4=["GET",...B2];new Set(_4);var Fc=M.createContext(null);Fc.displayName="DataRouter";var Nf=M.createContext(null);Nf.displayName="DataRouterState";M.createContext(!1);var z2=M.createContext({isTransitioning:!1});z2.displayName="ViewTransition";var j4=M.createContext(new Map);j4.displayName="Fetchers";var N4=M.createContext(null);N4.displayName="Await";var Un=M.createContext(null);Un.displayName="Navigation";var Id=M.createContext(null);Id.displayName="Location";var Bn=M.createContext({outlet:null,matches:[],isDataRoute:!1});Bn.displayName="Route";var Ix=M.createContext(null);Ix.displayName="RouteError";function S4(t,{relative:e}={}){Zt(Hc(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=M.useContext(Un),{hash:i,pathname:o,search:u}=$d(t,{relative:e}),h=o;return s!=="/"&&(h=o==="/"?s:Wa([s,o])),r.createHref({pathname:h,search:u,hash:i})}function Hc(){return M.useContext(Id)!=null}function il(){return Zt(Hc(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Id).location}var F2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function H2(t){M.useContext(Un).static||M.useLayoutEffect(t)}function Ns(){let{isDataRoute:t}=M.useContext(Bn);return t?$4():E4()}function E4(){Zt(Hc(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(Fc),{basename:e,navigator:s}=M.useContext(Un),{matches:r}=M.useContext(Bn),{pathname:i}=il(),o=JSON.stringify(qx(r)),u=M.useRef(!1);return H2(()=>{u.current=!0}),M.useCallback((m,f={})=>{if(In(u.current,F2),!u.current)return;if(typeof m=="number"){s.go(m);return}let p=Px(m,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Wa([e,p.pathname])),(f.replace?s.replace:s.push)(p,f.state,f)},[e,s,o,i,t])}M.createContext(null);function C4(){let{matches:t}=M.useContext(Bn),e=t[t.length-1];return e?e.params:{}}function $d(t,{relative:e}={}){let{matches:s}=M.useContext(Bn),{pathname:r}=il(),i=JSON.stringify(qx(s));return M.useMemo(()=>Px(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function A4(t,e){return V2(t,e)}function V2(t,e,s,r){Zt(Hc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=M.useContext(Un),{matches:o}=M.useContext(Bn),u=o[o.length-1],h=u?u.params:{},m=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let E=p&&p.path||"";G2(m,!p||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let x=il(),b;if(e){let E=typeof e=="string"?zc(e):e;Zt(f==="/"||E.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${E.pathname}" was given in the \`location\` prop.`),b=E}else b=x;let j=b.pathname||"/",v=j;if(f!=="/"){let E=f.replace(/^\//,"").split("/");v="/"+j.replace(/^\//,"").split("/").slice(E.length).join("/")}let S=I2(t,{pathname:v});In(p||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),In(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=M4(S&&S.map(E=>Object.assign({},E,{params:Object.assign({},h,E.params),pathname:Wa([f,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?f:Wa([f,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,s,r);return e&&_?M.createElement(Id.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},_):_}function k4(){let t=I4(),e=w4(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:o},"ErrorBoundary")," or"," ",M.createElement("code",{style:o},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),s?M.createElement("pre",{style:i},s):null,u)}var T4=M.createElement(k4,null),O4=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?M.createElement(Bn.Provider,{value:this.props.routeContext},M.createElement(Ix.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function R4({routeContext:t,match:e,children:s}){let r=M.useContext(Fc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Bn.Provider,{value:t},s)}function M4(t,e=[],s=null,r=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let i=t,o=s?.errors;if(o!=null){let m=i.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);Zt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let u=!1,h=-1;if(s)for(let m=0;m<i.length;m++){let f=i[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(h=m),f.route.id){let{loaderData:p,errors:x}=s,b=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||b){u=!0,h>=0?i=i.slice(0,h+1):i=[i[0]];break}}}return i.reduceRight((m,f,p)=>{let x,b=!1,j=null,v=null;s&&(x=o&&f.route.id?o[f.route.id]:void 0,j=f.route.errorElement||T4,u&&(h<0&&p===0?(G2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,v=null):h===p&&(b=!0,v=f.route.hydrateFallbackElement||null)));let S=e.concat(i.slice(0,p+1)),_=()=>{let E;return x?E=j:b?E=v:f.route.Component?E=M.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=m,M.createElement(R4,{match:f,routeContext:{outlet:m,matches:S,isDataRoute:s!=null},children:E})};return s&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?M.createElement(O4,{location:s.location,revalidation:s.revalidation,component:j,error:x,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):_()},null)}function $x(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D4(t){let e=M.useContext(Fc);return Zt(e,$x(t)),e}function L4(t){let e=M.useContext(Nf);return Zt(e,$x(t)),e}function q4(t){let e=M.useContext(Bn);return Zt(e,$x(t)),e}function Ux(t){let e=q4(t),s=e.matches[e.matches.length-1];return Zt(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function P4(){return Ux("useRouteId")}function I4(){let t=M.useContext(Ix),e=L4("useRouteError"),s=Ux("useRouteError");return t!==void 0?t:e.errors?.[s]}function $4(){let{router:t}=D4("useNavigate"),e=Ux("useNavigate"),s=M.useRef(!1);return H2(()=>{s.current=!0}),M.useCallback(async(i,o={})=>{In(s.current,F2),s.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var S_={};function G2(t,e,s){!e&&!S_[t]&&(S_[t]=!0,In(!1,s))}M.memo(U4);function U4({routes:t,future:e,state:s}){return V2(t,void 0,s,e)}function jd({to:t,replace:e,state:s,relative:r}){Zt(Hc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=M.useContext(Un);In(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=M.useContext(Bn),{pathname:u}=il(),h=Ns(),m=Px(t,qx(o),u,r==="path"),f=JSON.stringify(m);return M.useEffect(()=>{h(JSON.parse(f),{replace:e,state:s,relative:r})},[h,f,r,e,s]),null}function ft(t){Zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function B4({basename:t="/",children:e=null,location:s,navigationType:r="POP",navigator:i,static:o=!1}){Zt(!Hc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),h=M.useMemo(()=>({basename:u,navigator:i,static:o,future:{}}),[u,i,o]);typeof s=="string"&&(s=zc(s));let{pathname:m="/",search:f="",hash:p="",state:x=null,key:b="default"}=s,j=M.useMemo(()=>{let v=ei(m,u);return v==null?null:{location:{pathname:v,search:f,hash:p,state:x,key:b},navigationType:r}},[u,m,f,p,x,b,r]);return In(j!=null,`<Router basename="${u}"> is not able to match the URL "${m}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:M.createElement(Un.Provider,{value:h},M.createElement(Id.Provider,{children:e,value:j}))}function z4({children:t,location:e}){return A4(P0(t),e)}function P0(t,e=[]){let s=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let o=[...e,i];if(r.type===M.Fragment){s.push.apply(s,P0(r.props.children,o));return}Zt(r.type===ft,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=P0(r.props.children,o)),s.push(u)}),s}var qm="get",Pm="application/x-www-form-urlencoded";function Sf(t){return t!=null&&typeof t.tagName=="string"}function F4(t){return Sf(t)&&t.tagName.toLowerCase()==="button"}function H4(t){return Sf(t)&&t.tagName.toLowerCase()==="form"}function V4(t){return Sf(t)&&t.tagName.toLowerCase()==="input"}function G4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Z4(t,e){return t.button===0&&(!e||e==="_self")&&!G4(t)}var dm=null;function Y4(){if(dm===null)try{new FormData(document.createElement("form"),0),dm=!1}catch{dm=!0}return dm}var K4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xg(t){return t!=null&&!K4.has(t)?(In(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pm}"`),null):t}function W4(t,e){let s,r,i,o,u;if(H4(t)){let h=t.getAttribute("action");r=h?ei(h,e):null,s=t.getAttribute("method")||qm,i=Xg(t.getAttribute("enctype"))||Pm,o=new FormData(t)}else if(F4(t)||V4(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=t.getAttribute("formaction")||h.getAttribute("action");if(r=m?ei(m,e):null,s=t.getAttribute("formmethod")||h.getAttribute("method")||qm,i=Xg(t.getAttribute("formenctype"))||Xg(h.getAttribute("enctype"))||Pm,o=new FormData(h,t),!Y4()){let{name:f,type:p,value:x}=t;if(p==="image"){let b=f?`${f}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else f&&o.append(f,x)}}else{if(Sf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=qm,r=null,i=Pm,u=t}return o&&i==="text/plain"&&(u=o,o=void 0),{action:r,method:s.toLowerCase(),encType:i,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Bx(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Q4(t,e,s){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${s}`:e&&ei(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function X4(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function J4(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function eT(t,e,s){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let u=await X4(o,s);return u.links?u.links():[]}return[]}));return nT(r.flat(1).filter(J4).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function E_(t,e,s,r,i,o){let u=(m,f)=>s[f]?m.route.id!==s[f].route.id:!0,h=(m,f)=>s[f].pathname!==m.pathname||s[f].route.path?.endsWith("*")&&s[f].params["*"]!==m.params["*"];return o==="assets"?e.filter((m,f)=>u(m,f)||h(m,f)):o==="data"?e.filter((m,f)=>{let p=r.routes[m.route.id];if(!p||!p.hasLoader)return!1;if(u(m,f)||h(m,f))return!0;if(m.route.shouldRevalidate){let x=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function tT(t,e,{includeHydrateFallback:s}={}){return sT(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),s&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function sT(t){return[...new Set(t)]}function rT(t){let e={},s=Object.keys(t).sort();for(let r of s)e[r]=t[r];return e}function nT(t,e){let s=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(rT(i));return s.has(o)||(s.add(o),r.push({key:o,link:i})),r},[])}function Z2(){let t=M.useContext(Fc);return Bx(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function aT(){let t=M.useContext(Nf);return Bx(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var zx=M.createContext(void 0);zx.displayName="FrameworkContext";function Y2(){let t=M.useContext(zx);return Bx(t,"You must render this element inside a <HydratedRouter> element"),t}function iT(t,e){let s=M.useContext(zx),[r,i]=M.useState(!1),[o,u]=M.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:f,onMouseLeave:p,onTouchStart:x}=e,b=M.useRef(null);M.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let S=E=>{E.forEach(A=>{u(A.isIntersecting)})},_=new IntersectionObserver(S,{threshold:.5});return b.current&&_.observe(b.current),()=>{_.disconnect()}}},[t]),M.useEffect(()=>{if(r){let S=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(S)}}},[r]);let j=()=>{i(!0)},v=()=>{i(!1),u(!1)};return s?t!=="intent"?[o,b,{}]:[o,b,{onFocus:Ju(h,j),onBlur:Ju(m,v),onMouseEnter:Ju(f,j),onMouseLeave:Ju(p,v),onTouchStart:Ju(x,j)}]:[!1,b,{}]}function Ju(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function lT({page:t,...e}){let{router:s}=Z2(),r=M.useMemo(()=>I2(s.routes,t,s.basename),[s.routes,t,s.basename]);return r?M.createElement(cT,{page:t,matches:r,...e}):null}function oT(t){let{manifest:e,routeModules:s}=Y2(),[r,i]=M.useState([]);return M.useEffect(()=>{let o=!1;return eT(t,e,s).then(u=>{o||i(u)}),()=>{o=!0}},[t,e,s]),r}function cT({page:t,matches:e,...s}){let r=il(),{manifest:i,routeModules:o}=Y2(),{basename:u}=Z2(),{loaderData:h,matches:m}=aT(),f=M.useMemo(()=>E_(t,e,m,i,r,"data"),[t,e,m,i,r]),p=M.useMemo(()=>E_(t,e,m,i,r,"assets"),[t,e,m,i,r]),x=M.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,S=!1;if(e.forEach(E=>{let A=i.routes[E.route.id];!A||!A.hasLoader||(!f.some(O=>O.route.id===E.route.id)&&E.route.id in h&&o[E.route.id]?.shouldRevalidate||A.hasClientLoader?S=!0:v.add(E.route.id))}),v.size===0)return[];let _=Q4(t,u,"data");return S&&v.size>0&&_.searchParams.set("_routes",e.filter(E=>v.has(E.route.id)).map(E=>E.route.id).join(",")),[_.pathname+_.search]},[u,h,r,i,f,e,t,o]),b=M.useMemo(()=>tT(p,i),[p,i]),j=oT(p);return M.createElement(M.Fragment,null,x.map(v=>M.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...s})),b.map(v=>M.createElement("link",{key:v,rel:"modulepreload",href:v,...s})),j.map(({key:v,link:S})=>M.createElement("link",{key:v,...S})))}function uT(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var K2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{K2&&(window.__reactRouterVersion="7.7.1")}catch{}function dT({basename:t,children:e,window:s}){let r=M.useRef();r.current==null&&(r.current=Xk({window:s,v5Compat:!0}));let i=r.current,[o,u]=M.useState({action:i.action,location:i.location}),h=M.useCallback(m=>{M.startTransition(()=>u(m))},[u]);return M.useLayoutEffect(()=>i.listen(h),[i,h]),M.createElement(B4,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var W2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q2=M.forwardRef(function({onClick:e,discover:s="render",prefetch:r="none",relative:i,reloadDocument:o,replace:u,state:h,target:m,to:f,preventScrollReset:p,viewTransition:x,...b},j){let{basename:v}=M.useContext(Un),S=typeof f=="string"&&W2.test(f),_,E=!1;if(typeof f=="string"&&S&&(_=f,K2))try{let C=new URL(window.location.href),z=f.startsWith("//")?new URL(C.protocol+f):new URL(f),R=ei(z.pathname,v);z.origin===C.origin&&R!=null?f=R+z.search+z.hash:E=!0}catch{In(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=S4(f,{relative:i}),[O,F,k]=iT(r,b),L=pT(f,{replace:u,state:h,target:m,preventScrollReset:p,relative:i,viewTransition:x});function B(C){e&&e(C),C.defaultPrevented||L(C)}let w=M.createElement("a",{...b,...k,href:_||A,onClick:E||o?e:B,ref:uT(j,F),target:m,"data-discover":!S&&s==="render"?"true":void 0});return O&&!S?M.createElement(M.Fragment,null,w,M.createElement(lT,{page:A})):w});Q2.displayName="Link";var hT=M.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:r="",end:i=!1,style:o,to:u,viewTransition:h,children:m,...f},p){let x=$d(u,{relative:f.relative}),b=il(),j=M.useContext(Nf),{navigator:v,basename:S}=M.useContext(Un),_=j!=null&&vT(x)&&h===!0,E=v.encodeLocation?v.encodeLocation(x).pathname:x.pathname,A=b.pathname,O=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;s||(A=A.toLowerCase(),O=O?O.toLowerCase():null,E=E.toLowerCase()),O&&S&&(O=ei(O,S)||O);const F=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let k=A===E||!i&&A.startsWith(E)&&A.charAt(F)==="/",L=O!=null&&(O===E||!i&&O.startsWith(E)&&O.charAt(E.length)==="/"),B={isActive:k,isPending:L,isTransitioning:_},w=k?e:void 0,C;typeof r=="function"?C=r(B):C=[r,k?"active":null,L?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let z=typeof o=="function"?o(B):o;return M.createElement(Q2,{...f,"aria-current":w,className:C,ref:p,style:z,to:u,viewTransition:h},typeof m=="function"?m(B):m)});hT.displayName="NavLink";var mT=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:r,replace:i,state:o,method:u=qm,action:h,onSubmit:m,relative:f,preventScrollReset:p,viewTransition:x,...b},j)=>{let v=yT(),S=bT(h,{relative:f}),_=u.toLowerCase()==="get"?"get":"post",E=typeof h=="string"&&W2.test(h),A=O=>{if(m&&m(O),O.defaultPrevented)return;O.preventDefault();let F=O.nativeEvent.submitter,k=F?.getAttribute("formmethod")||u;v(F||O.currentTarget,{fetcherKey:e,method:k,navigate:s,replace:i,state:o,relative:f,preventScrollReset:p,viewTransition:x})};return M.createElement("form",{ref:j,method:_,action:S,onSubmit:r?m:A,...b,"data-discover":!E&&t==="render"?"true":void 0})});mT.displayName="Form";function fT(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function X2(t){let e=M.useContext(Fc);return Zt(e,fT(t)),e}function pT(t,{target:e,replace:s,state:r,preventScrollReset:i,relative:o,viewTransition:u}={}){let h=Ns(),m=il(),f=$d(t,{relative:o});return M.useCallback(p=>{if(Z4(p,e)){p.preventDefault();let x=s!==void 0?s:_d(m)===_d(f);h(t,{replace:x,state:r,preventScrollReset:i,relative:o,viewTransition:u})}},[m,h,f,s,r,e,t,i,o,u])}var gT=0,xT=()=>`__${String(++gT)}__`;function yT(){let{router:t}=X2("useSubmit"),{basename:e}=M.useContext(Un),s=P4();return M.useCallback(async(r,i={})=>{let{action:o,method:u,encType:h,formData:m,body:f}=W4(r,e);if(i.navigate===!1){let p=i.fetcherKey||xT();await t.fetch(p,s,i.action||o,{preventScrollReset:i.preventScrollReset,formData:m,body:f,formMethod:i.method||u,formEncType:i.encType||h,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:m,body:f,formMethod:i.method||u,formEncType:i.encType||h,replace:i.replace,state:i.state,fromRouteId:s,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,s])}function bT(t,{relative:e}={}){let{basename:s}=M.useContext(Un),r=M.useContext(Bn);Zt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...$d(t||".",{relative:e})},u=il();if(t==null){o.search=u.search;let h=new URLSearchParams(o.search),m=h.getAll("index");if(m.some(p=>p==="")){h.delete("index"),m.filter(x=>x).forEach(x=>h.append("index",x));let p=h.toString();o.search=p?`?${p}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(o.pathname=o.pathname==="/"?s:Wa([s,o.pathname])),_d(o)}function vT(t,{relative:e}={}){let s=M.useContext(z2);Zt(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=X2("useViewTransitionState"),i=$d(t,{relative:e});if(!s.isTransitioning)return!1;let o=ei(s.currentLocation.pathname,r)||s.currentLocation.pathname,u=ei(s.nextLocation.pathname,r)||s.nextLocation.pathname;return Ym(i.pathname,u)!=null||Ym(i.pathname,o)!=null}const Tc={major:1,minor:3,patch:0,build:"20250904-0933",environment:"production",get full(){return`${this.major}.${this.minor}.${this.patch}-${this.build}`},get simple(){return`v${this.major}.${this.minor}.${this.patch}`},get withEnv(){const t=this.environment==="production"?"PROD":"DEV";return`${this.simple} (${t})`},lastUpdate:"2025-09-04 09:33",changes:"Added version system, fixed CPD certificates view/download"};typeof window<"u"&&(console.log(`%c EAU Members Portal %c${Tc.full} %c${Tc.environment}`,"color: #4F46E5; font-weight: bold; font-size: 14px;","color: #10B981; font-weight: bold; font-size: 14px;","color: #6B7280; font-size: 12px;"),console.log(`Last update: ${Tc.lastUpdate}`),console.log(`Changes: ${Tc.changes}`));const Fx=({children:t})=>n.jsxs("div",{className:"min-h-screen bg-white flex",children:[n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("img",{src:"/logo-500.png",alt:"English Australia",className:"mx-auto h-16 w-auto mb-4"}),n.jsx("div",{className:"text-xs text-gray-500",children:Tc.withEnv})]}),t]})}),n.jsxs("div",{className:"hidden lg:flex w-1/2 bg-[#1E3A8A] relative flex-col",children:[n.jsx("div",{className:"flex-1"}),n.jsx("div",{className:"h-2 bg-gradient-to-r from-red-500 via-yellow-500 via-green-500 via-blue-500 to-purple-500"})]})]}),wT="modulepreload",_T=function(t){return"/"+t},C_={},ll=function(e,s,r){let i=Promise.resolve();if(s&&s.length>0){let f=function(p){return Promise.all(p.map(x=>Promise.resolve(x).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var u=f;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),m=h?.nonce||h?.getAttribute("nonce");i=f(s.map(p=>{if(p=_T(p),p in C_)return;C_[p]=!0;const x=p.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const j=document.createElement("link");if(j.rel=x?"stylesheet":wT,x||(j.as="script"),j.crossOrigin="",j.href=p,m&&j.setAttribute("nonce",m),document.head.appendChild(j),x)return new Promise((v,S)=>{j.addEventListener("load",v),j.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(h){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=h,window.dispatchEvent(m),!m.defaultPrevented)throw h}return i.then(h=>{for(const m of h||[])m.status==="rejected"&&o(m.reason);return e().catch(o)})};var Ud=t=>t.type==="checkbox",Zl=t=>t instanceof Date,or=t=>t==null;const J2=t=>typeof t=="object";var fs=t=>!or(t)&&!Array.isArray(t)&&J2(t)&&!Zl(t),jT=t=>fs(t)&&t.target?Ud(t.target)?t.target.checked:t.target.value:t,NT=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,ST=(t,e)=>t.has(NT(e)),ET=t=>{const e=t.constructor&&t.constructor.prototype;return fs(e)&&e.hasOwnProperty("isPrototypeOf")},Hx=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function zs(t){let e;const s=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(Hx&&(t instanceof Blob||r))&&(s||fs(t)))if(e=s?[]:Object.create(Object.getPrototypeOf(t)),!s&&!ET(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=zs(t[i]));else return t;return e}var Ef=t=>/^\w*$/.test(t),_s=t=>t===void 0,Vx=t=>Array.isArray(t)?t.filter(Boolean):[],Gx=t=>Vx(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Be=(t,e,s)=>{if(!e||!fs(t))return s;const r=(Ef(e)?[e]:Gx(e)).reduce((i,o)=>or(i)?i:i[o],t);return _s(r)||r===t?_s(t[e])?s:t[e]:r},ca=t=>typeof t=="boolean",Pt=(t,e,s)=>{let r=-1;const i=Ef(e)?[e]:Gx(e),o=i.length,u=o-1;for(;++r<o;){const h=i[r];let m=s;if(r!==u){const f=t[h];m=fs(f)||Array.isArray(f)?f:isNaN(+i[r+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;t[h]=m,t=t[h]}};const A_={BLUR:"blur",FOCUS_OUT:"focusout"},kn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Fa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},CT=Hs.createContext(null);CT.displayName="HookFormContext";var AT=(t,e,s,r=!0)=>{const i={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(i,o,{get:()=>{const u=o;return e._proxyFormState[u]!==kn.all&&(e._proxyFormState[u]=!r||kn.all),t[u]}});return i};const kT=typeof window<"u"?Hs.useLayoutEffect:Hs.useEffect;var ma=t=>typeof t=="string",TT=(t,e,s,r,i)=>ma(t)?(r&&e.watch.add(t),Be(s,t,i)):Array.isArray(t)?t.map(o=>(r&&e.watch.add(o),Be(s,o))):(r&&(e.watchAll=!0),s),I0=t=>or(t)||!J2(t);function Zi(t,e,s=new WeakSet){if(I0(t)||I0(e))return t===e;if(Zl(t)&&Zl(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(s.has(t)||s.has(e))return!0;s.add(t),s.add(e);for(const o of r){const u=t[o];if(!i.includes(o))return!1;if(o!=="ref"){const h=e[o];if(Zl(u)&&Zl(h)||fs(u)&&fs(h)||Array.isArray(u)&&Array.isArray(h)?!Zi(u,h,s):u!==h)return!1}}return!0}var Zx=(t,e,s,r,i)=>e?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[r]:i||!0}}:{},pd=t=>Array.isArray(t)?t:[t],k_=()=>{let t=[];return{get observers(){return t},next:i=>{for(const o of t)o.next&&o.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(o=>o!==i)}}),unsubscribe:()=>{t=[]}}},jr=t=>fs(t)&&!Object.keys(t).length,Yx=t=>t.type==="file",Tn=t=>typeof t=="function",Km=t=>{if(!Hx)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},eN=t=>t.type==="select-multiple",Kx=t=>t.type==="radio",OT=t=>Kx(t)||Ud(t),Jg=t=>Km(t)&&t.isConnected;function RT(t,e){const s=e.slice(0,-1).length;let r=0;for(;r<s;)t=_s(t)?r++:t[e[r++]];return t}function MT(t){for(const e in t)if(t.hasOwnProperty(e)&&!_s(t[e]))return!1;return!0}function ws(t,e){const s=Array.isArray(e)?e:Ef(e)?[e]:Gx(e),r=s.length===1?t:RT(t,s),i=s.length-1,o=s[i];return r&&delete r[o],i!==0&&(fs(r)&&jr(r)||Array.isArray(r)&&MT(r))&&ws(t,s.slice(0,-1)),t}var tN=t=>{for(const e in t)if(Tn(t[e]))return!0;return!1};function Wm(t,e={}){const s=Array.isArray(t);if(fs(t)||s)for(const r in t)Array.isArray(t[r])||fs(t[r])&&!tN(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Wm(t[r],e[r])):or(t[r])||(e[r]=!0);return e}function sN(t,e,s){const r=Array.isArray(t);if(fs(t)||r)for(const i in t)Array.isArray(t[i])||fs(t[i])&&!tN(t[i])?_s(e)||I0(s[i])?s[i]=Array.isArray(t[i])?Wm(t[i],[]):{...Wm(t[i])}:sN(t[i],or(e)?{}:e[i],s[i]):s[i]=!Zi(t[i],e[i]);return s}var ed=(t,e)=>sN(t,e,Wm(e));const T_={value:!1,isValid:!1},O_={value:!0,isValid:!0};var rN=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!_s(t[0].attributes.value)?_s(t[0].value)||t[0].value===""?O_:{value:t[0].value,isValid:!0}:O_:T_}return T_},nN=(t,{valueAsNumber:e,valueAsDate:s,setValueAs:r})=>_s(t)?t:e?t===""?NaN:t&&+t:s&&ma(t)?new Date(t):r?r(t):t;const R_={isValid:!1,value:null};var aN=t=>Array.isArray(t)?t.reduce((e,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:e,R_):R_;function M_(t){const e=t.ref;return Yx(e)?e.files:Kx(e)?aN(t.refs).value:eN(e)?[...e.selectedOptions].map(({value:s})=>s):Ud(e)?rN(t.refs).value:nN(_s(e.value)?t.ref.value:e.value,t)}var DT=(t,e,s,r)=>{const i={};for(const o of t){const u=Be(e,o);u&&Pt(i,o,u._f)}return{criteriaMode:s,names:[...t],fields:i,shouldUseNativeValidation:r}},Qm=t=>t instanceof RegExp,td=t=>_s(t)?t:Qm(t)?t.source:fs(t)?Qm(t.value)?t.value.source:t.value:t,D_=t=>({isOnSubmit:!t||t===kn.onSubmit,isOnBlur:t===kn.onBlur,isOnChange:t===kn.onChange,isOnAll:t===kn.all,isOnTouch:t===kn.onTouched});const L_="AsyncFunction";var LT=t=>!!t&&!!t.validate&&!!(Tn(t.validate)&&t.validate.constructor.name===L_||fs(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===L_)),qT=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),q_=(t,e,s)=>!s&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const gd=(t,e,s,r)=>{for(const i of s||Object.keys(t)){const o=Be(t,i);if(o){const{_f:u,...h}=o;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],i)&&!r)return!0;if(u.ref&&e(u.ref,u.name)&&!r)return!0;if(gd(h,e))break}else if(fs(h)&&gd(h,e))break}}};function P_(t,e,s){const r=Be(t,s);if(r||Ef(s))return{error:r,name:s};const i=s.split(".");for(;i.length;){const o=i.join("."),u=Be(e,o),h=Be(t,o);if(u&&!Array.isArray(u)&&s!==o)return{name:s};if(h&&h.type)return{name:o,error:h};if(h&&h.root&&h.root.type)return{name:`${o}.root`,error:h.root};i.pop()}return{name:s}}var PT=(t,e,s,r)=>{s(t);const{name:i,...o}=t;return jr(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(u=>e[u]===(!r||kn.all))},IT=(t,e,s)=>!t||!e||t===e||pd(t).some(r=>r&&(s?r===e:r.startsWith(e)||e.startsWith(r))),$T=(t,e,s,r,i)=>i.isOnAll?!1:!s&&i.isOnTouch?!(e||t):(s?r.isOnBlur:i.isOnBlur)?!t:(s?r.isOnChange:i.isOnChange)?t:!0,UT=(t,e)=>!Vx(Be(t,e)).length&&ws(t,e),BT=(t,e,s)=>{const r=pd(Be(t,s));return Pt(r,"root",e[s]),Pt(t,s,r),t},Im=t=>ma(t);function I_(t,e,s="validate"){if(Im(t)||Array.isArray(t)&&t.every(Im)||ca(t)&&!t)return{type:s,message:Im(t)?t:"",ref:e}}var uc=t=>fs(t)&&!Qm(t)?t:{value:t,message:""},$_=async(t,e,s,r,i,o)=>{const{ref:u,refs:h,required:m,maxLength:f,minLength:p,min:x,max:b,pattern:j,validate:v,name:S,valueAsNumber:_,mount:E}=t._f,A=Be(s,S);if(!E||e.has(S))return{};const O=h?h[0]:u,F=D=>{i&&O.reportValidity&&(O.setCustomValidity(ca(D)?"":D||""),O.reportValidity())},k={},L=Kx(u),B=Ud(u),w=L||B,C=(_||Yx(u))&&_s(u.value)&&_s(A)||Km(u)&&u.value===""||A===""||Array.isArray(A)&&!A.length,z=Zx.bind(null,S,r,k),R=(D,q,H,X=Fa.maxLength,P=Fa.minLength)=>{const Z=D?q:H;k[S]={type:D?X:P,message:Z,ref:u,...z(D?X:P,Z)}};if(o?!Array.isArray(A)||!A.length:m&&(!w&&(C||or(A))||ca(A)&&!A||B&&!rN(h).isValid||L&&!aN(h).isValid)){const{value:D,message:q}=Im(m)?{value:!!m,message:m}:uc(m);if(D&&(k[S]={type:Fa.required,message:q,ref:O,...z(Fa.required,q)},!r))return F(q),k}if(!C&&(!or(x)||!or(b))){let D,q;const H=uc(b),X=uc(x);if(!or(A)&&!isNaN(A)){const P=u.valueAsNumber||A&&+A;or(H.value)||(D=P>H.value),or(X.value)||(q=P<X.value)}else{const P=u.valueAsDate||new Date(A),Z=U=>new Date(new Date().toDateString()+" "+U),Q=u.type=="time",de=u.type=="week";ma(H.value)&&A&&(D=Q?Z(A)>Z(H.value):de?A>H.value:P>new Date(H.value)),ma(X.value)&&A&&(q=Q?Z(A)<Z(X.value):de?A<X.value:P<new Date(X.value))}if((D||q)&&(R(!!D,H.message,X.message,Fa.max,Fa.min),!r))return F(k[S].message),k}if((f||p)&&!C&&(ma(A)||o&&Array.isArray(A))){const D=uc(f),q=uc(p),H=!or(D.value)&&A.length>+D.value,X=!or(q.value)&&A.length<+q.value;if((H||X)&&(R(H,D.message,q.message),!r))return F(k[S].message),k}if(j&&!C&&ma(A)){const{value:D,message:q}=uc(j);if(Qm(D)&&!A.match(D)&&(k[S]={type:Fa.pattern,message:q,ref:u,...z(Fa.pattern,q)},!r))return F(q),k}if(v){if(Tn(v)){const D=await v(A,s),q=I_(D,O);if(q&&(k[S]={...q,...z(Fa.validate,q.message)},!r))return F(q.message),k}else if(fs(v)){let D={};for(const q in v){if(!jr(D)&&!r)break;const H=I_(await v[q](A,s),O,q);H&&(D={...H,...z(q,H.message)},F(H.message),r&&(k[S]=D))}if(!jr(D)&&(k[S]={ref:O,...D},!r))return k}}return F(!0),k};const zT={mode:kn.onSubmit,reValidateMode:kn.onChange,shouldFocusError:!0};function FT(t={}){let e={...zT,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:Tn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=fs(e.defaultValues)||fs(e.values)?zs(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:zs(i),u={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},m,f=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let x={...p};const b={array:k_(),state:k_()},j=e.criteriaMode===kn.all,v=G=>re=>{clearTimeout(f),f=setTimeout(G,re)},S=async G=>{if(!e.disabled&&(p.isValid||x.isValid||G)){const re=e.resolver?jr((await B()).errors):await C(r,!0);re!==s.isValid&&b.state.next({isValid:re})}},_=(G,re)=>{!e.disabled&&(p.isValidating||p.validatingFields||x.isValidating||x.validatingFields)&&((G||Array.from(h.mount)).forEach(me=>{me&&(re?Pt(s.validatingFields,me,re):ws(s.validatingFields,me))}),b.state.next({validatingFields:s.validatingFields,isValidating:!jr(s.validatingFields)}))},E=(G,re=[],me,ke,Ee=!0,Ce=!0)=>{if(ke&&me&&!e.disabled){if(u.action=!0,Ce&&Array.isArray(Be(r,G))){const Te=me(Be(r,G),ke.argA,ke.argB);Ee&&Pt(r,G,Te)}if(Ce&&Array.isArray(Be(s.errors,G))){const Te=me(Be(s.errors,G),ke.argA,ke.argB);Ee&&Pt(s.errors,G,Te),UT(s.errors,G)}if((p.touchedFields||x.touchedFields)&&Ce&&Array.isArray(Be(s.touchedFields,G))){const Te=me(Be(s.touchedFields,G),ke.argA,ke.argB);Ee&&Pt(s.touchedFields,G,Te)}(p.dirtyFields||x.dirtyFields)&&(s.dirtyFields=ed(i,o)),b.state.next({name:G,isDirty:R(G,re),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Pt(o,G,re)},A=(G,re)=>{Pt(s.errors,G,re),b.state.next({errors:s.errors})},O=G=>{s.errors=G,b.state.next({errors:s.errors,isValid:!1})},F=(G,re,me,ke)=>{const Ee=Be(r,G);if(Ee){const Ce=Be(o,G,_s(me)?Be(i,G):me);_s(Ce)||ke&&ke.defaultChecked||re?Pt(o,G,re?Ce:M_(Ee._f)):H(G,Ce),u.mount&&S()}},k=(G,re,me,ke,Ee)=>{let Ce=!1,Te=!1;const Pe={name:G};if(!e.disabled){if(!me||ke){(p.isDirty||x.isDirty)&&(Te=s.isDirty,s.isDirty=Pe.isDirty=R(),Ce=Te!==Pe.isDirty);const We=Zi(Be(i,G),re);Te=!!Be(s.dirtyFields,G),We?ws(s.dirtyFields,G):Pt(s.dirtyFields,G,!0),Pe.dirtyFields=s.dirtyFields,Ce=Ce||(p.dirtyFields||x.dirtyFields)&&Te!==!We}if(me){const We=Be(s.touchedFields,G);We||(Pt(s.touchedFields,G,me),Pe.touchedFields=s.touchedFields,Ce=Ce||(p.touchedFields||x.touchedFields)&&We!==me)}Ce&&Ee&&b.state.next(Pe)}return Ce?Pe:{}},L=(G,re,me,ke)=>{const Ee=Be(s.errors,G),Ce=(p.isValid||x.isValid)&&ca(re)&&s.isValid!==re;if(e.delayError&&me?(m=v(()=>A(G,me)),m(e.delayError)):(clearTimeout(f),m=null,me?Pt(s.errors,G,me):ws(s.errors,G)),(me?!Zi(Ee,me):Ee)||!jr(ke)||Ce){const Te={...ke,...Ce&&ca(re)?{isValid:re}:{},errors:s.errors,name:G};s={...s,...Te},b.state.next(Te)}},B=async G=>{_(G,!0);const re=await e.resolver(o,e.context,DT(G||h.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return _(G),re},w=async G=>{const{errors:re}=await B(G);if(G)for(const me of G){const ke=Be(re,me);ke?Pt(s.errors,me,ke):ws(s.errors,me)}else s.errors=re;return re},C=async(G,re,me={valid:!0})=>{for(const ke in G){const Ee=G[ke];if(Ee){const{_f:Ce,...Te}=Ee;if(Ce){const Pe=h.array.has(Ce.name),We=Ee._f&&LT(Ee._f);We&&p.validatingFields&&_([ke],!0);const gt=await $_(Ee,h.disabled,o,j,e.shouldUseNativeValidation&&!re,Pe);if(We&&p.validatingFields&&_([ke]),gt[Ce.name]&&(me.valid=!1,re))break;!re&&(Be(gt,Ce.name)?Pe?BT(s.errors,gt,Ce.name):Pt(s.errors,Ce.name,gt[Ce.name]):ws(s.errors,Ce.name))}!jr(Te)&&await C(Te,re,me)}}return me.valid},z=()=>{for(const G of h.unMount){const re=Be(r,G);re&&(re._f.refs?re._f.refs.every(me=>!Jg(me)):!Jg(re._f.ref))&&Me(G)}h.unMount=new Set},R=(G,re)=>!e.disabled&&(G&&re&&Pt(o,G,re),!Zi(U(),i)),D=(G,re,me)=>TT(G,h,{...u.mount?o:_s(re)?i:ma(G)?{[G]:re}:re},me,re),q=G=>Vx(Be(u.mount?o:i,G,e.shouldUnregister?Be(i,G,[]):[])),H=(G,re,me={})=>{const ke=Be(r,G);let Ee=re;if(ke){const Ce=ke._f;Ce&&(!Ce.disabled&&Pt(o,G,nN(re,Ce)),Ee=Km(Ce.ref)&&or(re)?"":re,eN(Ce.ref)?[...Ce.ref.options].forEach(Te=>Te.selected=Ee.includes(Te.value)):Ce.refs?Ud(Ce.ref)?Ce.refs.forEach(Te=>{(!Te.defaultChecked||!Te.disabled)&&(Array.isArray(Ee)?Te.checked=!!Ee.find(Pe=>Pe===Te.value):Te.checked=Ee===Te.value||!!Ee)}):Ce.refs.forEach(Te=>Te.checked=Te.value===Ee):Yx(Ce.ref)?Ce.ref.value="":(Ce.ref.value=Ee,Ce.ref.type||b.state.next({name:G,values:zs(o)})))}(me.shouldDirty||me.shouldTouch)&&k(G,Ee,me.shouldTouch,me.shouldDirty,!0),me.shouldValidate&&de(G)},X=(G,re,me)=>{for(const ke in re){if(!re.hasOwnProperty(ke))return;const Ee=re[ke],Ce=G+"."+ke,Te=Be(r,Ce);(h.array.has(G)||fs(Ee)||Te&&!Te._f)&&!Zl(Ee)?X(Ce,Ee,me):H(Ce,Ee,me)}},P=(G,re,me={})=>{const ke=Be(r,G),Ee=h.array.has(G),Ce=zs(re);Pt(o,G,Ce),Ee?(b.array.next({name:G,values:zs(o)}),(p.isDirty||p.dirtyFields||x.isDirty||x.dirtyFields)&&me.shouldDirty&&b.state.next({name:G,dirtyFields:ed(i,o),isDirty:R(G,Ce)})):ke&&!ke._f&&!or(Ce)?X(G,Ce,me):H(G,Ce,me),q_(G,h)&&b.state.next({...s,name:G}),b.state.next({name:u.mount?G:void 0,values:zs(o)})},Z=async G=>{u.mount=!0;const re=G.target;let me=re.name,ke=!0;const Ee=Be(r,me),Ce=We=>{ke=Number.isNaN(We)||Zl(We)&&isNaN(We.getTime())||Zi(We,Be(o,me,We))},Te=D_(e.mode),Pe=D_(e.reValidateMode);if(Ee){let We,gt;const es=re.type?M_(Ee._f):jT(G),ts=G.type===A_.BLUR||G.type===A_.FOCUS_OUT,Ss=!qT(Ee._f)&&!e.resolver&&!Be(s.errors,me)&&!Ee._f.deps||$T(ts,Be(s.touchedFields,me),s.isSubmitted,Pe,Te),Ms=q_(me,h,ts);Pt(o,me,es),ts?(!re||!re.readOnly)&&(Ee._f.onBlur&&Ee._f.onBlur(G),m&&m(0)):Ee._f.onChange&&Ee._f.onChange(G);const Gs=k(me,es,ts),Qs=!jr(Gs)||Ms;if(!ts&&b.state.next({name:me,type:G.type,values:zs(o)}),Ss)return(p.isValid||x.isValid)&&(e.mode==="onBlur"?ts&&S():ts||S()),Qs&&b.state.next({name:me,...Ms?{}:Gs});if(!ts&&Ms&&b.state.next({...s}),e.resolver){const{errors:Gr}=await B([me]);if(Ce(es),ke){const fr=P_(s.errors,r,me),Zr=P_(Gr,r,fr.name||me);We=Zr.error,me=Zr.name,gt=jr(Gr)}}else _([me],!0),We=(await $_(Ee,h.disabled,o,j,e.shouldUseNativeValidation))[me],_([me]),Ce(es),ke&&(We?gt=!1:(p.isValid||x.isValid)&&(gt=await C(r,!0)));ke&&(Ee._f.deps&&de(Ee._f.deps),L(me,gt,We,Gs))}},Q=(G,re)=>{if(Be(s.errors,re)&&G.focus)return G.focus(),1},de=async(G,re={})=>{let me,ke;const Ee=pd(G);if(e.resolver){const Ce=await w(_s(G)?G:Ee);me=jr(Ce),ke=G?!Ee.some(Te=>Be(Ce,Te)):me}else G?(ke=(await Promise.all(Ee.map(async Ce=>{const Te=Be(r,Ce);return await C(Te&&Te._f?{[Ce]:Te}:Te)}))).every(Boolean),!(!ke&&!s.isValid)&&S()):ke=me=await C(r);return b.state.next({...!ma(G)||(p.isValid||x.isValid)&&me!==s.isValid?{}:{name:G},...e.resolver||!G?{isValid:me}:{},errors:s.errors}),re.shouldFocus&&!ke&&gd(r,Q,G?Ee:h.mount),ke},U=G=>{const re={...u.mount?o:i};return _s(G)?re:ma(G)?Be(re,G):G.map(me=>Be(re,me))},J=(G,re)=>({invalid:!!Be((re||s).errors,G),isDirty:!!Be((re||s).dirtyFields,G),error:Be((re||s).errors,G),isValidating:!!Be(s.validatingFields,G),isTouched:!!Be((re||s).touchedFields,G)}),le=G=>{G&&pd(G).forEach(re=>ws(s.errors,re)),b.state.next({errors:G?s.errors:{}})},ee=(G,re,me)=>{const ke=(Be(r,G,{_f:{}})._f||{}).ref,Ee=Be(s.errors,G)||{},{ref:Ce,message:Te,type:Pe,...We}=Ee;Pt(s.errors,G,{...We,...re,ref:ke}),b.state.next({name:G,errors:s.errors,isValid:!1}),me&&me.shouldFocus&&ke&&ke.focus&&ke.focus()},xe=(G,re)=>Tn(G)?b.state.subscribe({next:me=>"values"in me&&G(D(void 0,re),me)}):D(G,re,!0),we=G=>b.state.subscribe({next:re=>{IT(G.name,re.name,G.exact)&&PT(re,G.formState||p,bt,G.reRenderRoot)&&G.callback({values:{...o},...s,...re,defaultValues:i})}}).unsubscribe,Ae=G=>(u.mount=!0,x={...x,...G.formState},we({...G,formState:x})),Me=(G,re={})=>{for(const me of G?pd(G):h.mount)h.mount.delete(me),h.array.delete(me),re.keepValue||(ws(r,me),ws(o,me)),!re.keepError&&ws(s.errors,me),!re.keepDirty&&ws(s.dirtyFields,me),!re.keepTouched&&ws(s.touchedFields,me),!re.keepIsValidating&&ws(s.validatingFields,me),!e.shouldUnregister&&!re.keepDefaultValue&&ws(i,me);b.state.next({values:zs(o)}),b.state.next({...s,...re.keepDirty?{isDirty:R()}:{}}),!re.keepIsValid&&S()},Se=({disabled:G,name:re})=>{(ca(G)&&u.mount||G||h.disabled.has(re))&&(G?h.disabled.add(re):h.disabled.delete(re))},Oe=(G,re={})=>{let me=Be(r,G);const ke=ca(re.disabled)||ca(e.disabled);return Pt(r,G,{...me||{},_f:{...me&&me._f?me._f:{ref:{name:G}},name:G,mount:!0,...re}}),h.mount.add(G),me?Se({disabled:ca(re.disabled)?re.disabled:e.disabled,name:G}):F(G,!0,re.value),{...ke?{disabled:re.disabled||e.disabled}:{},...e.progressive?{required:!!re.required,min:td(re.min),max:td(re.max),minLength:td(re.minLength),maxLength:td(re.maxLength),pattern:td(re.pattern)}:{},name:G,onChange:Z,onBlur:Z,ref:Ee=>{if(Ee){Oe(G,re),me=Be(r,G);const Ce=_s(Ee.value)&&Ee.querySelectorAll&&Ee.querySelectorAll("input,select,textarea")[0]||Ee,Te=OT(Ce),Pe=me._f.refs||[];if(Te?Pe.find(We=>We===Ce):Ce===me._f.ref)return;Pt(r,G,{_f:{...me._f,...Te?{refs:[...Pe.filter(Jg),Ce,...Array.isArray(Be(i,G))?[{}]:[]],ref:{type:Ce.type,name:G}}:{ref:Ce}}}),F(G,!1,void 0,Ce)}else me=Be(r,G,{}),me._f&&(me._f.mount=!1),(e.shouldUnregister||re.shouldUnregister)&&!(ST(h.array,G)&&u.action)&&h.unMount.add(G)}}},Le=()=>e.shouldFocusError&&gd(r,Q,h.mount),Re=G=>{ca(G)&&(b.state.next({disabled:G}),gd(r,(re,me)=>{const ke=Be(r,me);ke&&(re.disabled=ke._f.disabled||G,Array.isArray(ke._f.refs)&&ke._f.refs.forEach(Ee=>{Ee.disabled=ke._f.disabled||G}))},0,!1))},qe=(G,re)=>async me=>{let ke;me&&(me.preventDefault&&me.preventDefault(),me.persist&&me.persist());let Ee=zs(o);if(b.state.next({isSubmitting:!0}),e.resolver){const{errors:Ce,values:Te}=await B();s.errors=Ce,Ee=zs(Te)}else await C(r);if(h.disabled.size)for(const Ce of h.disabled)ws(Ee,Ce);if(ws(s.errors,"root"),jr(s.errors)){b.state.next({errors:{}});try{await G(Ee,me)}catch(Ce){ke=Ce}}else re&&await re({...s.errors},me),Le(),setTimeout(Le);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:jr(s.errors)&&!ke,submitCount:s.submitCount+1,errors:s.errors}),ke)throw ke},Ze=(G,re={})=>{Be(r,G)&&(_s(re.defaultValue)?P(G,zs(Be(i,G))):(P(G,re.defaultValue),Pt(i,G,zs(re.defaultValue))),re.keepTouched||ws(s.touchedFields,G),re.keepDirty||(ws(s.dirtyFields,G),s.isDirty=re.defaultValue?R(G,zs(Be(i,G))):R()),re.keepError||(ws(s.errors,G),p.isValid&&S()),b.state.next({...s}))},Ke=(G,re={})=>{const me=G?zs(G):i,ke=zs(me),Ee=jr(G),Ce=Ee?i:ke;if(re.keepDefaultValues||(i=me),!re.keepValues){if(re.keepDirtyValues){const Te=new Set([...h.mount,...Object.keys(ed(i,o))]);for(const Pe of Array.from(Te))Be(s.dirtyFields,Pe)?Pt(Ce,Pe,Be(o,Pe)):P(Pe,Be(Ce,Pe))}else{if(Hx&&_s(G))for(const Te of h.mount){const Pe=Be(r,Te);if(Pe&&Pe._f){const We=Array.isArray(Pe._f.refs)?Pe._f.refs[0]:Pe._f.ref;if(Km(We)){const gt=We.closest("form");if(gt){gt.reset();break}}}}if(re.keepFieldsRef)for(const Te of h.mount)P(Te,Be(Ce,Te));else r={}}o=e.shouldUnregister?re.keepDefaultValues?zs(i):{}:zs(Ce),b.array.next({values:{...Ce}}),b.state.next({values:{...Ce}})}h={mount:re.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!p.isValid||!!re.keepIsValid||!!re.keepDirtyValues,u.watch=!!e.shouldUnregister,b.state.next({submitCount:re.keepSubmitCount?s.submitCount:0,isDirty:Ee?!1:re.keepDirty?s.isDirty:!!(re.keepDefaultValues&&!Zi(G,i)),isSubmitted:re.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:Ee?{}:re.keepDirtyValues?re.keepDefaultValues&&o?ed(i,o):s.dirtyFields:re.keepDefaultValues&&G?ed(i,G):re.keepDirty?s.dirtyFields:{},touchedFields:re.keepTouched?s.touchedFields:{},errors:re.keepErrors?s.errors:{},isSubmitSuccessful:re.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Je=(G,re)=>Ke(Tn(G)?G(o):G,re),rt=(G,re={})=>{const me=Be(r,G),ke=me&&me._f;if(ke){const Ee=ke.refs?ke.refs[0]:ke.ref;Ee.focus&&(Ee.focus(),re.shouldSelect&&Tn(Ee.select)&&Ee.select())}},bt=G=>{s={...s,...G}},vt={control:{register:Oe,unregister:Me,getFieldState:J,handleSubmit:qe,setError:ee,_subscribe:we,_runSchema:B,_focusError:Le,_getWatch:D,_getDirty:R,_setValid:S,_setFieldArray:E,_setDisabledField:Se,_setErrors:O,_getFieldArray:q,_reset:Ke,_resetDefaultValues:()=>Tn(e.defaultValues)&&e.defaultValues().then(G=>{Je(G,e.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:z,_disableForm:Re,_subjects:b,_proxyFormState:p,get _fields(){return r},get _formValues(){return o},get _state(){return u},set _state(G){u=G},get _defaultValues(){return i},get _names(){return h},set _names(G){h=G},get _formState(){return s},get _options(){return e},set _options(G){e={...e,...G}}},subscribe:Ae,trigger:de,register:Oe,handleSubmit:qe,watch:xe,setValue:P,getValues:U,reset:Je,resetField:Ze,clearErrors:le,unregister:Me,setError:ee,setFocus:rt,getFieldState:J};return{...vt,formControl:vt}}function Bd(t={}){const e=Hs.useRef(void 0),s=Hs.useRef(void 0),[r,i]=Hs.useState({isDirty:!1,isValidating:!1,isLoading:Tn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Tn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Tn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:u,...h}=FT(t);e.current={...h,formState:r}}const o=e.current.control;return o._options=t,kT(()=>{const u=o._subscribe({formState:o._proxyFormState,callback:()=>i({...o._formState}),reRenderRoot:!0});return i(h=>({...h,isReady:!0})),o._formState.isReady=!0,u},[o]),Hs.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),Hs.useEffect(()=>{t.mode&&(o._options.mode=t.mode),t.reValidateMode&&(o._options.reValidateMode=t.reValidateMode)},[o,t.mode,t.reValidateMode]),Hs.useEffect(()=>{t.errors&&(o._setErrors(t.errors),o._focusError())},[o,t.errors]),Hs.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,t.shouldUnregister]),Hs.useEffect(()=>{if(o._proxyFormState.isDirty){const u=o._getDirty();u!==r.isDirty&&o._subjects.state.next({isDirty:u})}},[o,r.isDirty]),Hs.useEffect(()=>{t.values&&!Zi(t.values,s.current)?(o._reset(t.values,{keepFieldsRef:!0,...o._options.resetOptions}),s.current=t.values,i(u=>({...u}))):o._resetDefaultValues()},[o,t.values]),Hs.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=AT(r,o),e.current}const U_=(t,e,s)=>{if(t&&"reportValidity"in t){const r=Be(s,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},$0=(t,e)=>{for(const s in e.fields){const r=e.fields[s];r&&r.ref&&"reportValidity"in r.ref?U_(r.ref,s,t):r&&r.refs&&r.refs.forEach(i=>U_(i,s,t))}},B_=(t,e)=>{e.shouldUseNativeValidation&&$0(t,e);const s={};for(const r in t){const i=Be(e.fields,r),o=Object.assign(t[r]||{},{ref:i&&i.ref});if(HT(e.names||Object.keys(t),r)){const u=Object.assign({},Be(s,r));Pt(u,"root",o),Pt(s,r,u)}else Pt(s,r,o)}return s},HT=(t,e)=>{const s=z_(e);return t.some(r=>z_(r).match(`^${s}\\.\\d+`))};function z_(t){return t.replace(/\]|\[/g,"")}function je(t,e,s){function r(h,m){var f;Object.defineProperty(h,"_zod",{value:h._zod??{},enumerable:!1}),(f=h._zod).traits??(f.traits=new Set),h._zod.traits.add(t),e(h,m);for(const p in u.prototype)p in h||Object.defineProperty(h,p,{value:u.prototype[p].bind(h)});h._zod.constr=u,h._zod.def=m}const i=s?.Parent??Object;class o extends i{}Object.defineProperty(o,"name",{value:t});function u(h){var m;const f=s?.Parent?new o:this;r(f,h),(m=f._zod).deferred??(m.deferred=[]);for(const p of f._zod.deferred)p();return f}return Object.defineProperty(u,"init",{value:r}),Object.defineProperty(u,Symbol.hasInstance,{value:h=>s?.Parent&&h instanceof s.Parent?!0:h?._zod?.traits?.has(t)}),Object.defineProperty(u,"name",{value:t}),u}class Nd extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const iN={};function Xl(t){return iN}function VT(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,i])=>e.indexOf(+r)===-1).map(([r,i])=>i)}function U0(t,e){return typeof e=="bigint"?e.toString():e}function lN(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function Wx(t){return t==null}function Qx(t){const e=t.startsWith("^")?1:0,s=t.endsWith("$")?t.length-1:t.length;return t.slice(e,s)}function GT(t,e){const s=(t.toString().split(".")[1]||"").length,r=e.toString();let i=(r.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(r)){const m=r.match(/\d?e-(\d?)/);m?.[1]&&(i=Number.parseInt(m[1]))}const o=s>i?s:i,u=Number.parseInt(t.toFixed(o).replace(".","")),h=Number.parseInt(e.toFixed(o).replace(".",""));return u%h/10**o}const F_=Symbol("evaluating");function zt(t,e,s){let r;Object.defineProperty(t,e,{get(){if(r!==F_)return r===void 0&&(r=F_,r=s()),r},set(i){Object.defineProperty(t,e,{value:i})},configurable:!0})}function uo(t,e,s){Object.defineProperty(t,e,{value:s,writable:!0,enumerable:!0,configurable:!0})}function Vc(...t){const e={};for(const s of t){const r=Object.getOwnPropertyDescriptors(s);Object.assign(e,r)}return Object.defineProperties({},e)}function H_(t){return JSON.stringify(t)}const oN="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function B0(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const ZT=lN(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function z0(t){if(B0(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(B0(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}const YT=new Set(["string","number","symbol"]);function Cf(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ho(t,e,s){const r=new t._zod.constr(e??t._zod.def);return(!e||s?.parent)&&(r._zod.parent=t),r}function Ye(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function KT(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const WT={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function QT(t,e){const s=t._zod.def,r=Vc(t._zod.def,{get shape(){const i={};for(const o in e){if(!(o in s.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(i[o]=s.shape[o])}return uo(this,"shape",i),i},checks:[]});return ho(t,r)}function XT(t,e){const s=t._zod.def,r=Vc(t._zod.def,{get shape(){const i={...t._zod.def.shape};for(const o in e){if(!(o in s.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete i[o]}return uo(this,"shape",i),i},checks:[]});return ho(t,r)}function JT(t,e){if(!z0(e))throw new Error("Invalid input to extend: expected a plain object");const s=Vc(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return uo(this,"shape",r),r},checks:[]});return ho(t,s)}function e5(t,e){const s=Vc(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return uo(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return ho(t,s)}function t5(t,e,s){const r=Vc(e._zod.def,{get shape(){const i=e._zod.def.shape,o={...i};if(s)for(const u in s){if(!(u in i))throw new Error(`Unrecognized key: "${u}"`);s[u]&&(o[u]=t?new t({type:"optional",innerType:i[u]}):i[u])}else for(const u in i)o[u]=t?new t({type:"optional",innerType:i[u]}):i[u];return uo(this,"shape",o),o},checks:[]});return ho(e,r)}function s5(t,e,s){const r=Vc(e._zod.def,{get shape(){const i=e._zod.def.shape,o={...i};if(s)for(const u in s){if(!(u in o))throw new Error(`Unrecognized key: "${u}"`);s[u]&&(o[u]=new t({type:"nonoptional",innerType:i[u]}))}else for(const u in i)o[u]=new t({type:"nonoptional",innerType:i[u]});return uo(this,"shape",o),o},checks:[]});return ho(e,r)}function xd(t,e=0){for(let s=e;s<t.issues.length;s++)if(t.issues[s]?.continue!==!0)return!0;return!1}function cN(t,e){return e.map(s=>{var r;return(r=s).path??(r.path=[]),s.path.unshift(t),s})}function hm(t){return typeof t=="string"?t:t?.message}function Jl(t,e,s){const r={...t,path:t.path??[]};if(!t.message){const i=hm(t.inst?._zod.def?.error?.(t))??hm(e?.error?.(t))??hm(s.customError?.(t))??hm(s.localeError?.(t))??"Invalid input";r.message=i}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function Xx(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Sd(...t){const[e,s,r]=t;return typeof e=="string"?{message:e,code:"custom",input:s,inst:r}:{...e}}const uN=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,U0,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Jx=je("$ZodError",uN),Af=je("$ZodError",uN,{Parent:Error});function r5(t,e=s=>s.message){const s={},r=[];for(const i of t.issues)i.path.length>0?(s[i.path[0]]=s[i.path[0]]||[],s[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:s}}function n5(t,e){const s=e||function(o){return o.message},r={_errors:[]},i=o=>{for(const u of o.issues)if(u.code==="invalid_union"&&u.errors.length)u.errors.map(h=>i({issues:h}));else if(u.code==="invalid_key")i({issues:u.issues});else if(u.code==="invalid_element")i({issues:u.issues});else if(u.path.length===0)r._errors.push(s(u));else{let h=r,m=0;for(;m<u.path.length;){const f=u.path[m];m===u.path.length-1?(h[f]=h[f]||{_errors:[]},h[f]._errors.push(s(u))):h[f]=h[f]||{_errors:[]},h=h[f],m++}}};return i(t),r}const dN=t=>(e,s,r,i)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},u=e._zod.run({value:s,issues:[]},o);if(u instanceof Promise)throw new Nd;if(u.issues.length){const h=new(i?.Err??t)(u.issues.map(m=>Jl(m,o,Xl())));throw oN(h,i?.callee),h}return u.value},a5=dN(Af),hN=t=>async(e,s,r,i)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let u=e._zod.run({value:s,issues:[]},o);if(u instanceof Promise&&(u=await u),u.issues.length){const h=new(i?.Err??t)(u.issues.map(m=>Jl(m,o,Xl())));throw oN(h,i?.callee),h}return u.value},i5=hN(Af),mN=t=>(e,s,r)=>{const i=r?{...r,async:!1}:{async:!1},o=e._zod.run({value:s,issues:[]},i);if(o instanceof Promise)throw new Nd;return o.issues.length?{success:!1,error:new(t??Jx)(o.issues.map(u=>Jl(u,i,Xl())))}:{success:!0,data:o.value}},l5=mN(Af),fN=t=>async(e,s,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:s,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(u=>Jl(u,i,Xl())))}:{success:!0,data:o.value}},o5=fN(Af),c5=/^[cC][^\s-]{8,}$/,u5=/^[0-9a-z]+$/,d5=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,h5=/^[0-9a-vA-V]{20}$/,m5=/^[A-Za-z0-9]{27}$/,f5=/^[a-zA-Z0-9_-]{21}$/,p5=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,g5=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,V_=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,x5=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,y5="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function b5(){return new RegExp(y5,"u")}const v5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,w5=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,_5=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,j5=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,N5=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,pN=/^[A-Za-z0-9_-]*$/,S5=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,E5=/^\+(?:[0-9]){6,14}[0-9]$/,gN="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",C5=new RegExp(`^${gN}$`);function xN(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function A5(t){return new RegExp(`^${xN(t)}$`)}function k5(t){const e=xN({precision:t.precision}),s=["Z"];t.local&&s.push(""),t.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${s.join("|")})`;return new RegExp(`^${gN}T(?:${r})$`)}const T5=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},O5=/^\d+$/,R5=/^-?\d+(?:\.\d+)?/i,M5=/^[^A-Z]*$/,D5=/^[^a-z]*$/,Ar=je("$ZodCheck",(t,e)=>{var s;t._zod??(t._zod={}),t._zod.def=e,(s=t._zod).onattach??(s.onattach=[])}),yN={number:"number",bigint:"bigint",object:"date"},bN=je("$ZodCheckLessThan",(t,e)=>{Ar.init(t,e);const s=yN[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,o=(e.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?i.maximum=e.value:i.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:s,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),vN=je("$ZodCheckGreaterThan",(t,e)=>{Ar.init(t,e);const s=yN[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,o=(e.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?i.minimum=e.value:i.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:s,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),L5=je("$ZodCheckMultipleOf",(t,e)=>{Ar.init(t,e),t._zod.onattach.push(s=>{var r;(r=s._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=s=>{if(typeof s.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof s.value=="bigint"?s.value%e.value===BigInt(0):GT(s.value,e.value)===0)||s.issues.push({origin:typeof s.value,code:"not_multiple_of",divisor:e.value,input:s.value,inst:t,continue:!e.abort})}}),q5=je("$ZodCheckNumberFormat",(t,e)=>{Ar.init(t,e),e.format=e.format||"float64";const s=e.format?.includes("int"),r=s?"int":"number",[i,o]=WT[e.format];t._zod.onattach.push(u=>{const h=u._zod.bag;h.format=e.format,h.minimum=i,h.maximum=o,s&&(h.pattern=O5)}),t._zod.check=u=>{const h=u.value;if(s){if(!Number.isInteger(h)){u.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:h,inst:t});return}if(!Number.isSafeInteger(h)){h>0?u.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):u.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}h<i&&u.issues.push({origin:"number",input:h,code:"too_small",minimum:i,inclusive:!0,inst:t,continue:!e.abort}),h>o&&u.issues.push({origin:"number",input:h,code:"too_big",maximum:o,inst:t})}}),P5=je("$ZodCheckMaxLength",(t,e)=>{var s;Ar.init(t,e),(s=t._zod.def).when??(s.when=r=>{const i=r.value;return!Wx(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const i=r.value;if(i.length<=e.maximum)return;const u=Xx(i);r.issues.push({origin:u,code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),I5=je("$ZodCheckMinLength",(t,e)=>{var s;Ar.init(t,e),(s=t._zod.def).when??(s.when=r=>{const i=r.value;return!Wx(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const i=r.value;if(i.length>=e.minimum)return;const u=Xx(i);r.issues.push({origin:u,code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),$5=je("$ZodCheckLengthEquals",(t,e)=>{var s;Ar.init(t,e),(s=t._zod.def).when??(s.when=r=>{const i=r.value;return!Wx(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag;i.minimum=e.length,i.maximum=e.length,i.length=e.length}),t._zod.check=r=>{const i=r.value,o=i.length;if(o===e.length)return;const u=Xx(i),h=o>e.length;r.issues.push({origin:u,...h?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),kf=je("$ZodCheckStringFormat",(t,e)=>{var s,r;Ar.init(t,e),t._zod.onattach.push(i=>{const o=i._zod.bag;o.format=e.format,e.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(e.pattern))}),e.pattern?(s=t._zod).check??(s.check=i=>{e.pattern.lastIndex=0,!e.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:e.format,input:i.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),U5=je("$ZodCheckRegex",(t,e)=>{kf.init(t,e),t._zod.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),B5=je("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=M5),kf.init(t,e)}),z5=je("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=D5),kf.init(t,e)}),F5=je("$ZodCheckIncludes",(t,e)=>{Ar.init(t,e);const s=Cf(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${s}`:s);e.pattern=r,t._zod.onattach.push(i=>{const o=i._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=i=>{i.value.includes(e.includes,e.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:i.value,inst:t,continue:!e.abort})}}),H5=je("$ZodCheckStartsWith",(t,e)=>{Ar.init(t,e);const s=new RegExp(`^${Cf(e.prefix)}.*`);e.pattern??(e.pattern=s),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),V5=je("$ZodCheckEndsWith",(t,e)=>{Ar.init(t,e);const s=new RegExp(`.*${Cf(e.suffix)}$`);e.pattern??(e.pattern=s),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),G5=je("$ZodCheckOverwrite",(t,e)=>{Ar.init(t,e),t._zod.check=s=>{s.value=e.tx(s.value)}});class Z5{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(u=>u),i=Math.min(...r.map(u=>u.length-u.trimStart().length)),o=r.map(u=>u.slice(i)).map(u=>" ".repeat(this.indent*2)+u);for(const u of o)this.content.push(u)}compile(){const e=Function,s=this?.args,i=[...(this?.content??[""]).map(o=>`  ${o}`)];return new e(...s,i.join(`
`))}}const Y5={major:4,minor:0,patch:14},ps=je("$ZodType",(t,e)=>{var s;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=Y5;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const i of r)for(const o of i._zod.onattach)o(t);if(r.length===0)(s=t._zod).deferred??(s.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const i=(o,u,h)=>{let m=xd(o),f;for(const p of u){if(p._zod.def.when){if(!p._zod.def.when(o))continue}else if(m)continue;const x=o.issues.length,b=p._zod.check(o);if(b instanceof Promise&&h?.async===!1)throw new Nd;if(f||b instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await b,o.issues.length!==x&&(m||(m=xd(o,x)))});else{if(o.issues.length===x)continue;m||(m=xd(o,x))}}return f?f.then(()=>o):o};t._zod.run=(o,u)=>{const h=t._zod.parse(o,u);if(h instanceof Promise){if(u.async===!1)throw new Nd;return h.then(m=>i(m,r,u))}return i(h,r,u)}}t["~standard"]={validate:i=>{try{const o=l5(t,i);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return o5(t,i).then(u=>u.success?{value:u.data}:{issues:u.error?.issues})}},vendor:"zod",version:1}}),ey=je("$ZodString",(t,e)=>{ps.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??T5(t._zod.bag),t._zod.parse=(s,r)=>{if(e.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:t}),s}}),Yt=je("$ZodStringFormat",(t,e)=>{kf.init(t,e),ey.init(t,e)}),K5=je("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=g5),Yt.init(t,e)}),W5=je("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=V_(r))}else e.pattern??(e.pattern=V_());Yt.init(t,e)}),Q5=je("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=x5),Yt.init(t,e)}),X5=je("$ZodURL",(t,e)=>{Yt.init(t,e),t._zod.check=s=>{try{const r=s.value.trim(),i=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(i.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:S5.source,input:s.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:s.value,inst:t,continue:!e.abort})),e.normalize?s.value=i.href:s.value=r;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:t,continue:!e.abort})}}}),J5=je("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=b5()),Yt.init(t,e)}),e3=je("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=f5),Yt.init(t,e)}),t3=je("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=c5),Yt.init(t,e)}),s3=je("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=u5),Yt.init(t,e)}),r3=je("$ZodULID",(t,e)=>{e.pattern??(e.pattern=d5),Yt.init(t,e)}),n3=je("$ZodXID",(t,e)=>{e.pattern??(e.pattern=h5),Yt.init(t,e)}),a3=je("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=m5),Yt.init(t,e)}),i3=je("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=k5(e)),Yt.init(t,e)}),l3=je("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=C5),Yt.init(t,e)}),o3=je("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=A5(e)),Yt.init(t,e)}),c3=je("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=p5),Yt.init(t,e)}),u3=je("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=v5),Yt.init(t,e),t._zod.onattach.push(s=>{const r=s._zod.bag;r.format="ipv4"})}),d3=je("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=w5),Yt.init(t,e),t._zod.onattach.push(s=>{const r=s._zod.bag;r.format="ipv6"}),t._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:t,continue:!e.abort})}}}),h3=je("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=_5),Yt.init(t,e)}),m3=je("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=j5),Yt.init(t,e),t._zod.check=s=>{const[r,i]=s.value.split("/");try{if(!i)throw new Error;const o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${r}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:t,continue:!e.abort})}}});function wN(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const f3=je("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=N5),Yt.init(t,e),t._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64"}),t._zod.check=s=>{wN(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:t,continue:!e.abort})}});function p3(t){if(!pN.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),s=e.padEnd(Math.ceil(e.length/4)*4,"=");return wN(s)}const g3=je("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=pN),Yt.init(t,e),t._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64url"}),t._zod.check=s=>{p3(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:t,continue:!e.abort})}}),x3=je("$ZodE164",(t,e)=>{e.pattern??(e.pattern=E5),Yt.init(t,e)});function y3(t,e=null){try{const s=t.split(".");if(s.length!==3)return!1;const[r]=s;if(!r)return!1;const i=JSON.parse(atob(r));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch{return!1}}const b3=je("$ZodJWT",(t,e)=>{Yt.init(t,e),t._zod.check=s=>{y3(s.value,e.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:t,continue:!e.abort})}}),_N=je("$ZodNumber",(t,e)=>{ps.init(t,e),t._zod.pattern=t._zod.bag.pattern??R5,t._zod.parse=(s,r)=>{if(e.coerce)try{s.value=Number(s.value)}catch{}const i=s.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return s;const o=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return s.issues.push({expected:"number",code:"invalid_type",input:i,inst:t,...o?{received:o}:{}}),s}}),v3=je("$ZodNumber",(t,e)=>{q5.init(t,e),_N.init(t,e)}),w3=je("$ZodUnknown",(t,e)=>{ps.init(t,e),t._zod.parse=s=>s}),_3=je("$ZodNever",(t,e)=>{ps.init(t,e),t._zod.parse=(s,r)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:t}),s)});function G_(t,e,s){t.issues.length&&e.issues.push(...cN(s,t.issues)),e.value[s]=t.value}const j3=je("$ZodArray",(t,e)=>{ps.init(t,e),t._zod.parse=(s,r)=>{const i=s.value;if(!Array.isArray(i))return s.issues.push({expected:"array",code:"invalid_type",input:i,inst:t}),s;s.value=Array(i.length);const o=[];for(let u=0;u<i.length;u++){const h=i[u],m=e.element._zod.run({value:h,issues:[]},r);m instanceof Promise?o.push(m.then(f=>G_(f,s,u))):G_(m,s,u)}return o.length?Promise.all(o).then(()=>s):s}});function mm(t,e,s,r){t.issues.length&&e.issues.push(...cN(s,t.issues)),t.value===void 0?s in r&&(e.value[s]=void 0):e.value[s]=t.value}const N3=je("$ZodObject",(t,e)=>{ps.init(t,e);const s=lN(()=>{const x=Object.keys(e.shape);for(const j of x)if(!(e.shape[j]instanceof ps))throw new Error(`Invalid element at key "${j}": expected a Zod schema`);const b=KT(e.shape);return{shape:e.shape,keys:x,keySet:new Set(x),numKeys:x.length,optionalKeys:new Set(b)}});zt(t._zod,"propValues",()=>{const x=e.shape,b={};for(const j in x){const v=x[j]._zod;if(v.values){b[j]??(b[j]=new Set);for(const S of v.values)b[j].add(S)}}return b});const r=x=>{const b=new Z5(["shape","payload","ctx"]),j=s.value,v=A=>{const O=H_(A);return`shape[${O}]._zod.run({ value: input[${O}], issues: [] }, ctx)`};b.write("const input = payload.value;");const S=Object.create(null);let _=0;for(const A of j.keys)S[A]=`key_${_++}`;b.write("const newResult = {}");for(const A of j.keys){const O=S[A],F=H_(A);b.write(`const ${O} = ${v(A)};`),b.write(`
        if (${O}.issues.length) {
          payload.issues = payload.issues.concat(${O}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${F}, ...iss.path] : [${F}]
          })));
        }
        
        if (${O}.value === undefined) {
          if (${F} in input) {
            newResult[${F}] = undefined;
          }
        } else {
          newResult[${F}] = ${O}.value;
        }
      `)}b.write("payload.value = newResult;"),b.write("return payload;");const E=b.compile();return(A,O)=>E(x,A,O)};let i;const o=B0,u=!iN.jitless,m=u&&ZT.value,f=e.catchall;let p;t._zod.parse=(x,b)=>{p??(p=s.value);const j=x.value;if(!o(j))return x.issues.push({expected:"object",code:"invalid_type",input:j,inst:t}),x;const v=[];if(u&&m&&b?.async===!1&&b.jitless!==!0)i||(i=r(e.shape)),x=i(x,b);else{x.value={};const O=p.shape;for(const F of p.keys){const L=O[F]._zod.run({value:j[F],issues:[]},b);L instanceof Promise?v.push(L.then(B=>mm(B,x,F,j))):mm(L,x,F,j)}}if(!f)return v.length?Promise.all(v).then(()=>x):x;const S=[],_=p.keySet,E=f._zod,A=E.def.type;for(const O of Object.keys(j)){if(_.has(O))continue;if(A==="never"){S.push(O);continue}const F=E.run({value:j[O],issues:[]},b);F instanceof Promise?v.push(F.then(k=>mm(k,x,O,j))):mm(F,x,O,j)}return S.length&&x.issues.push({code:"unrecognized_keys",keys:S,input:j,inst:t}),v.length?Promise.all(v).then(()=>x):x}});function Z_(t,e,s,r){for(const o of t)if(o.issues.length===0)return e.value=o.value,e;const i=t.filter(o=>!xd(o));return i.length===1?(e.value=i[0].value,i[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:s,errors:t.map(o=>o.issues.map(u=>Jl(u,r,Xl())))}),e)}const S3=je("$ZodUnion",(t,e)=>{ps.init(t,e),zt(t._zod,"optin",()=>e.options.some(i=>i._zod.optin==="optional")?"optional":void 0),zt(t._zod,"optout",()=>e.options.some(i=>i._zod.optout==="optional")?"optional":void 0),zt(t._zod,"values",()=>{if(e.options.every(i=>i._zod.values))return new Set(e.options.flatMap(i=>Array.from(i._zod.values)))}),zt(t._zod,"pattern",()=>{if(e.options.every(i=>i._zod.pattern)){const i=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${i.map(o=>Qx(o.source)).join("|")})$`)}});const s=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(i,o)=>{if(s)return r(i,o);let u=!1;const h=[];for(const m of e.options){const f=m._zod.run({value:i.value,issues:[]},o);if(f instanceof Promise)h.push(f),u=!0;else{if(f.issues.length===0)return f;h.push(f)}}return u?Promise.all(h).then(m=>Z_(m,i,t,o)):Z_(h,i,t,o)}}),E3=je("$ZodIntersection",(t,e)=>{ps.init(t,e),t._zod.parse=(s,r)=>{const i=s.value,o=e.left._zod.run({value:i,issues:[]},r),u=e.right._zod.run({value:i,issues:[]},r);return o instanceof Promise||u instanceof Promise?Promise.all([o,u]).then(([m,f])=>Y_(s,m,f)):Y_(s,o,u)}});function F0(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(z0(t)&&z0(e)){const s=Object.keys(e),r=Object.keys(t).filter(o=>s.indexOf(o)!==-1),i={...t,...e};for(const o of r){const u=F0(t[o],e[o]);if(!u.valid)return{valid:!1,mergeErrorPath:[o,...u.mergeErrorPath]};i[o]=u.data}return{valid:!0,data:i}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let r=0;r<t.length;r++){const i=t[r],o=e[r],u=F0(i,o);if(!u.valid)return{valid:!1,mergeErrorPath:[r,...u.mergeErrorPath]};s.push(u.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function Y_(t,e,s){if(e.issues.length&&t.issues.push(...e.issues),s.issues.length&&t.issues.push(...s.issues),xd(t))return t;const r=F0(e.value,s.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const C3=je("$ZodEnum",(t,e)=>{ps.init(t,e);const s=VT(e.entries),r=new Set(s);t._zod.values=r,t._zod.pattern=new RegExp(`^(${s.filter(i=>YT.has(typeof i)).map(i=>typeof i=="string"?Cf(i):i.toString()).join("|")})$`),t._zod.parse=(i,o)=>{const u=i.value;return r.has(u)||i.issues.push({code:"invalid_value",values:s,input:u,inst:t}),i}}),A3=je("$ZodTransform",(t,e)=>{ps.init(t,e),t._zod.parse=(s,r)=>{const i=e.transform(s.value,s);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(u=>(s.value=u,s));if(i instanceof Promise)throw new Nd;return s.value=i,s}});function K_(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const k3=je("$ZodOptional",(t,e)=>{ps.init(t,e),t._zod.optin="optional",t._zod.optout="optional",zt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),zt(t._zod,"pattern",()=>{const s=e.innerType._zod.pattern;return s?new RegExp(`^(${Qx(s.source)})?$`):void 0}),t._zod.parse=(s,r)=>{if(e.innerType._zod.optin==="optional"){const i=e.innerType._zod.run(s,r);return i instanceof Promise?i.then(o=>K_(o,s.value)):K_(i,s.value)}return s.value===void 0?s:e.innerType._zod.run(s,r)}}),T3=je("$ZodNullable",(t,e)=>{ps.init(t,e),zt(t._zod,"optin",()=>e.innerType._zod.optin),zt(t._zod,"optout",()=>e.innerType._zod.optout),zt(t._zod,"pattern",()=>{const s=e.innerType._zod.pattern;return s?new RegExp(`^(${Qx(s.source)}|null)$`):void 0}),zt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(s,r)=>s.value===null?s:e.innerType._zod.run(s,r)}),O3=je("$ZodDefault",(t,e)=>{ps.init(t,e),t._zod.optin="optional",zt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(s,r)=>{if(s.value===void 0)return s.value=e.defaultValue,s;const i=e.innerType._zod.run(s,r);return i instanceof Promise?i.then(o=>W_(o,e)):W_(i,e)}});function W_(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const R3=je("$ZodPrefault",(t,e)=>{ps.init(t,e),t._zod.optin="optional",zt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(s,r)=>(s.value===void 0&&(s.value=e.defaultValue),e.innerType._zod.run(s,r))}),M3=je("$ZodNonOptional",(t,e)=>{ps.init(t,e),zt(t._zod,"values",()=>{const s=e.innerType._zod.values;return s?new Set([...s].filter(r=>r!==void 0)):void 0}),t._zod.parse=(s,r)=>{const i=e.innerType._zod.run(s,r);return i instanceof Promise?i.then(o=>Q_(o,t)):Q_(i,t)}});function Q_(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const D3=je("$ZodCatch",(t,e)=>{ps.init(t,e),zt(t._zod,"optin",()=>e.innerType._zod.optin),zt(t._zod,"optout",()=>e.innerType._zod.optout),zt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(s,r)=>{const i=e.innerType._zod.run(s,r);return i instanceof Promise?i.then(o=>(s.value=o.value,o.issues.length&&(s.value=e.catchValue({...s,error:{issues:o.issues.map(u=>Jl(u,r,Xl()))},input:s.value}),s.issues=[]),s)):(s.value=i.value,i.issues.length&&(s.value=e.catchValue({...s,error:{issues:i.issues.map(o=>Jl(o,r,Xl()))},input:s.value}),s.issues=[]),s)}}),L3=je("$ZodPipe",(t,e)=>{ps.init(t,e),zt(t._zod,"values",()=>e.in._zod.values),zt(t._zod,"optin",()=>e.in._zod.optin),zt(t._zod,"optout",()=>e.out._zod.optout),zt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(s,r)=>{const i=e.in._zod.run(s,r);return i instanceof Promise?i.then(o=>X_(o,e,r)):X_(i,e,r)}});function X_(t,e,s){return t.issues.length?t:e.out._zod.run({value:t.value,issues:t.issues},s)}const q3=je("$ZodReadonly",(t,e)=>{ps.init(t,e),zt(t._zod,"propValues",()=>e.innerType._zod.propValues),zt(t._zod,"values",()=>e.innerType._zod.values),zt(t._zod,"optin",()=>e.innerType._zod.optin),zt(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(s,r)=>{const i=e.innerType._zod.run(s,r);return i instanceof Promise?i.then(J_):J_(i)}});function J_(t){return t.value=Object.freeze(t.value),t}const P3=je("$ZodCustom",(t,e)=>{Ar.init(t,e),ps.init(t,e),t._zod.parse=(s,r)=>s,t._zod.check=s=>{const r=s.value,i=e.fn(r);if(i instanceof Promise)return i.then(o=>e1(o,s,r,t));e1(i,s,r,t)}});function e1(t,e,s,r){if(!t){const i={code:"custom",input:s,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),e.issues.push(Sd(i))}}class I3{constructor(){this._map=new Map,this._idmap=new Map}add(e,...s){const r=s[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const s=this._map.get(e);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(e),this}get(e){const s=e._zod.parent;if(s){const r={...this.get(s)??{}};delete r.id;const i={...r,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function $3(){return new I3}const fm=$3();function U3(t,e){return new t({type:"string",...Ye(e)})}function B3(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Ye(e)})}function t1(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Ye(e)})}function z3(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Ye(e)})}function F3(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ye(e)})}function H3(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ye(e)})}function V3(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ye(e)})}function G3(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Ye(e)})}function Z3(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Ye(e)})}function Y3(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ye(e)})}function K3(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Ye(e)})}function W3(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ye(e)})}function Q3(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Ye(e)})}function X3(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Ye(e)})}function J3(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ye(e)})}function e6(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ye(e)})}function t6(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ye(e)})}function s6(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ye(e)})}function r6(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ye(e)})}function n6(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Ye(e)})}function a6(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Ye(e)})}function i6(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Ye(e)})}function l6(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Ye(e)})}function o6(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ye(e)})}function c6(t,e){return new t({type:"string",format:"date",check:"string_format",...Ye(e)})}function u6(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Ye(e)})}function d6(t,e){return new t({type:"string",format:"duration",check:"string_format",...Ye(e)})}function h6(t,e){return new t({type:"number",checks:[],...Ye(e)})}function m6(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...Ye(e)})}function f6(t){return new t({type:"unknown"})}function p6(t,e){return new t({type:"never",...Ye(e)})}function s1(t,e){return new bN({check:"less_than",...Ye(e),value:t,inclusive:!1})}function e0(t,e){return new bN({check:"less_than",...Ye(e),value:t,inclusive:!0})}function r1(t,e){return new vN({check:"greater_than",...Ye(e),value:t,inclusive:!1})}function t0(t,e){return new vN({check:"greater_than",...Ye(e),value:t,inclusive:!0})}function n1(t,e){return new L5({check:"multiple_of",...Ye(e),value:t})}function jN(t,e){return new P5({check:"max_length",...Ye(e),maximum:t})}function Xm(t,e){return new I5({check:"min_length",...Ye(e),minimum:t})}function NN(t,e){return new $5({check:"length_equals",...Ye(e),length:t})}function g6(t,e){return new U5({check:"string_format",format:"regex",...Ye(e),pattern:t})}function x6(t){return new B5({check:"string_format",format:"lowercase",...Ye(t)})}function y6(t){return new z5({check:"string_format",format:"uppercase",...Ye(t)})}function b6(t,e){return new F5({check:"string_format",format:"includes",...Ye(e),includes:t})}function v6(t,e){return new H5({check:"string_format",format:"starts_with",...Ye(e),prefix:t})}function w6(t,e){return new V5({check:"string_format",format:"ends_with",...Ye(e),suffix:t})}function zd(t){return new G5({check:"overwrite",tx:t})}function _6(t){return zd(e=>e.normalize(t))}function j6(){return zd(t=>t.trim())}function N6(){return zd(t=>t.toLowerCase())}function S6(){return zd(t=>t.toUpperCase())}function E6(t,e,s){return new t({type:"array",element:e,...Ye(s)})}function C6(t,e,s){return new t({type:"custom",check:"custom",fn:e,...Ye(s)})}function A6(t){const e=k6(s=>(s.addIssue=r=>{if(typeof r=="string")s.issues.push(Sd(r,s.value,e._zod.def));else{const i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=s.value),i.inst??(i.inst=e),i.continue??(i.continue=!e._zod.def.abort),s.issues.push(Sd(i))}},t(s.value,s)));return e}function k6(t,e){const s=new Ar({check:"custom",...Ye(e)});return s._zod.check=t,s}function a1(t,e){try{var s=t()}catch(r){return e(r)}return s&&s.then?s.then(void 0,e):s}function T6(t,e){for(var s={};t.length;){var r=t[0],i=r.code,o=r.message,u=r.path.join(".");if(!s[u])if("unionErrors"in r){var h=r.unionErrors[0].errors[0];s[u]={message:h.message,type:h.code}}else s[u]={message:o,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(p){return p.errors.forEach(function(x){return t.push(x)})}),e){var m=s[u].types,f=m&&m[r.code];s[u]=Zx(u,e,s,i,f?[].concat(f,r.message):r.message)}t.shift()}return s}function O6(t,e){for(var s={};t.length;){var r=t[0],i=r.code,o=r.message,u=r.path.join(".");if(!s[u])if(r.code==="invalid_union"&&r.errors.length>0){var h=r.errors[0][0];s[u]={message:h.message,type:h.code}}else s[u]={message:o,type:i};if(r.code==="invalid_union"&&r.errors.forEach(function(p){return p.forEach(function(x){return t.push(x)})}),e){var m=s[u].types,f=m&&m[r.code];s[u]=Zx(u,e,s,i,f?[].concat(f,r.message):r.message)}t.shift()}return s}function Fd(t,e,s){if(s===void 0&&(s={}),function(r){return"_def"in r&&typeof r._def=="object"&&"typeName"in r._def}(t))return function(r,i,o){try{return Promise.resolve(a1(function(){return Promise.resolve(t[s.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return o.shouldUseNativeValidation&&$0({},o),{errors:{},values:s.raw?Object.assign({},r):u}})},function(u){if(function(h){return Array.isArray(h?.issues)}(u))return{values:{},errors:B_(T6(u.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw u}))}catch(u){return Promise.reject(u)}};if(function(r){return"_zod"in r&&typeof r._zod=="object"}(t))return function(r,i,o){try{return Promise.resolve(a1(function(){return Promise.resolve((s.mode==="sync"?a5:i5)(t,r,e)).then(function(u){return o.shouldUseNativeValidation&&$0({},o),{errors:{},values:s.raw?Object.assign({},r):u}})},function(u){if(function(h){return h instanceof Jx}(u))return{values:{},errors:B_(O6(u.issues,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw u}))}catch(u){return Promise.reject(u)}};throw new Error("Invalid input: not a Zod schema")}const R6=je("ZodISODateTime",(t,e)=>{i3.init(t,e),Jt.init(t,e)});function M6(t){return o6(R6,t)}const D6=je("ZodISODate",(t,e)=>{l3.init(t,e),Jt.init(t,e)});function L6(t){return c6(D6,t)}const q6=je("ZodISOTime",(t,e)=>{o3.init(t,e),Jt.init(t,e)});function P6(t){return u6(q6,t)}const I6=je("ZodISODuration",(t,e)=>{c3.init(t,e),Jt.init(t,e)});function $6(t){return d6(I6,t)}const U6=(t,e)=>{Jx.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:s=>n5(t,s)},flatten:{value:s=>r5(t,s)},addIssue:{value:s=>{t.issues.push(s),t.message=JSON.stringify(t.issues,U0,2)}},addIssues:{value:s=>{t.issues.push(...s),t.message=JSON.stringify(t.issues,U0,2)}},isEmpty:{get(){return t.issues.length===0}}})},Tf=je("ZodError",U6,{Parent:Error}),B6=dN(Tf),z6=hN(Tf),F6=mN(Tf),H6=fN(Tf),Rs=je("ZodType",(t,e)=>(ps.init(t,e),t.def=e,Object.defineProperty(t,"_def",{value:e}),t.check=(...s)=>t.clone({...e,checks:[...e.checks??[],...s.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),t.clone=(s,r)=>ho(t,s,r),t.brand=()=>t,t.register=(s,r)=>(s.add(t,r),t),t.parse=(s,r)=>B6(t,s,r,{callee:t.parse}),t.safeParse=(s,r)=>F6(t,s,r),t.parseAsync=async(s,r)=>z6(t,s,r,{callee:t.parseAsync}),t.safeParseAsync=async(s,r)=>H6(t,s,r),t.spa=t.safeParseAsync,t.refine=(s,r)=>t.check(LO(s,r)),t.superRefine=s=>t.check(qO(s)),t.overwrite=s=>t.check(zd(s)),t.optional=()=>c1(t),t.nullable=()=>u1(t),t.nullish=()=>c1(u1(t)),t.nonoptional=s=>AO(t,s),t.array=()=>fO(t),t.or=s=>xO([t,s]),t.and=s=>bO(t,s),t.transform=s=>d1(t,_O(s)),t.default=s=>SO(t,s),t.prefault=s=>CO(t,s),t.catch=s=>TO(t,s),t.pipe=s=>d1(t,s),t.readonly=()=>MO(t),t.describe=s=>{const r=t.clone();return fm.add(r,{description:s}),r},Object.defineProperty(t,"description",{get(){return fm.get(t)?.description},configurable:!0}),t.meta=(...s)=>{if(s.length===0)return fm.get(t);const r=t.clone();return fm.add(r,s[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),SN=je("_ZodString",(t,e)=>{ey.init(t,e),Rs.init(t,e);const s=t._zod.bag;t.format=s.format??null,t.minLength=s.minimum??null,t.maxLength=s.maximum??null,t.regex=(...r)=>t.check(g6(...r)),t.includes=(...r)=>t.check(b6(...r)),t.startsWith=(...r)=>t.check(v6(...r)),t.endsWith=(...r)=>t.check(w6(...r)),t.min=(...r)=>t.check(Xm(...r)),t.max=(...r)=>t.check(jN(...r)),t.length=(...r)=>t.check(NN(...r)),t.nonempty=(...r)=>t.check(Xm(1,...r)),t.lowercase=r=>t.check(x6(r)),t.uppercase=r=>t.check(y6(r)),t.trim=()=>t.check(j6()),t.normalize=(...r)=>t.check(_6(...r)),t.toLowerCase=()=>t.check(N6()),t.toUpperCase=()=>t.check(S6())}),V6=je("ZodString",(t,e)=>{ey.init(t,e),SN.init(t,e),t.email=s=>t.check(B3(G6,s)),t.url=s=>t.check(G3(Z6,s)),t.jwt=s=>t.check(l6(oO,s)),t.emoji=s=>t.check(Z3(Y6,s)),t.guid=s=>t.check(t1(i1,s)),t.uuid=s=>t.check(z3(pm,s)),t.uuidv4=s=>t.check(F3(pm,s)),t.uuidv6=s=>t.check(H3(pm,s)),t.uuidv7=s=>t.check(V3(pm,s)),t.nanoid=s=>t.check(Y3(K6,s)),t.guid=s=>t.check(t1(i1,s)),t.cuid=s=>t.check(K3(W6,s)),t.cuid2=s=>t.check(W3(Q6,s)),t.ulid=s=>t.check(Q3(X6,s)),t.base64=s=>t.check(n6(aO,s)),t.base64url=s=>t.check(a6(iO,s)),t.xid=s=>t.check(X3(J6,s)),t.ksuid=s=>t.check(J3(eO,s)),t.ipv4=s=>t.check(e6(tO,s)),t.ipv6=s=>t.check(t6(sO,s)),t.cidrv4=s=>t.check(s6(rO,s)),t.cidrv6=s=>t.check(r6(nO,s)),t.e164=s=>t.check(i6(lO,s)),t.datetime=s=>t.check(M6(s)),t.date=s=>t.check(L6(s)),t.time=s=>t.check(P6(s)),t.duration=s=>t.check($6(s))});function Wt(t){return U3(V6,t)}const Jt=je("ZodStringFormat",(t,e)=>{Yt.init(t,e),SN.init(t,e)}),G6=je("ZodEmail",(t,e)=>{Q5.init(t,e),Jt.init(t,e)}),i1=je("ZodGUID",(t,e)=>{K5.init(t,e),Jt.init(t,e)}),pm=je("ZodUUID",(t,e)=>{W5.init(t,e),Jt.init(t,e)}),Z6=je("ZodURL",(t,e)=>{X5.init(t,e),Jt.init(t,e)}),Y6=je("ZodEmoji",(t,e)=>{J5.init(t,e),Jt.init(t,e)}),K6=je("ZodNanoID",(t,e)=>{e3.init(t,e),Jt.init(t,e)}),W6=je("ZodCUID",(t,e)=>{t3.init(t,e),Jt.init(t,e)}),Q6=je("ZodCUID2",(t,e)=>{s3.init(t,e),Jt.init(t,e)}),X6=je("ZodULID",(t,e)=>{r3.init(t,e),Jt.init(t,e)}),J6=je("ZodXID",(t,e)=>{n3.init(t,e),Jt.init(t,e)}),eO=je("ZodKSUID",(t,e)=>{a3.init(t,e),Jt.init(t,e)}),tO=je("ZodIPv4",(t,e)=>{u3.init(t,e),Jt.init(t,e)}),sO=je("ZodIPv6",(t,e)=>{d3.init(t,e),Jt.init(t,e)}),rO=je("ZodCIDRv4",(t,e)=>{h3.init(t,e),Jt.init(t,e)}),nO=je("ZodCIDRv6",(t,e)=>{m3.init(t,e),Jt.init(t,e)}),aO=je("ZodBase64",(t,e)=>{f3.init(t,e),Jt.init(t,e)}),iO=je("ZodBase64URL",(t,e)=>{g3.init(t,e),Jt.init(t,e)}),lO=je("ZodE164",(t,e)=>{x3.init(t,e),Jt.init(t,e)}),oO=je("ZodJWT",(t,e)=>{b3.init(t,e),Jt.init(t,e)}),EN=je("ZodNumber",(t,e)=>{_N.init(t,e),Rs.init(t,e),t.gt=(r,i)=>t.check(r1(r,i)),t.gte=(r,i)=>t.check(t0(r,i)),t.min=(r,i)=>t.check(t0(r,i)),t.lt=(r,i)=>t.check(s1(r,i)),t.lte=(r,i)=>t.check(e0(r,i)),t.max=(r,i)=>t.check(e0(r,i)),t.int=r=>t.check(l1(r)),t.safe=r=>t.check(l1(r)),t.positive=r=>t.check(r1(0,r)),t.nonnegative=r=>t.check(t0(0,r)),t.negative=r=>t.check(s1(0,r)),t.nonpositive=r=>t.check(e0(0,r)),t.multipleOf=(r,i)=>t.check(n1(r,i)),t.step=(r,i)=>t.check(n1(r,i)),t.finite=()=>t;const s=t._zod.bag;t.minValue=Math.max(s.minimum??Number.NEGATIVE_INFINITY,s.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(s.maximum??Number.POSITIVE_INFINITY,s.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(s.format??"").includes("int")||Number.isSafeInteger(s.multipleOf??.5),t.isFinite=!0,t.format=s.format??null});function $m(t){return h6(EN,t)}const cO=je("ZodNumberFormat",(t,e)=>{v3.init(t,e),EN.init(t,e)});function l1(t){return m6(cO,t)}const uO=je("ZodUnknown",(t,e)=>{w3.init(t,e),Rs.init(t,e)});function o1(){return f6(uO)}const dO=je("ZodNever",(t,e)=>{_3.init(t,e),Rs.init(t,e)});function hO(t){return p6(dO,t)}const mO=je("ZodArray",(t,e)=>{j3.init(t,e),Rs.init(t,e),t.element=e.element,t.min=(s,r)=>t.check(Xm(s,r)),t.nonempty=s=>t.check(Xm(1,s)),t.max=(s,r)=>t.check(jN(s,r)),t.length=(s,r)=>t.check(NN(s,r)),t.unwrap=()=>t.element});function fO(t,e){return E6(mO,t,e)}const pO=je("ZodObject",(t,e)=>{N3.init(t,e),Rs.init(t,e),zt(t,"shape",()=>e.shape),t.keyof=()=>vO(Object.keys(t._zod.def.shape)),t.catchall=s=>t.clone({...t._zod.def,catchall:s}),t.passthrough=()=>t.clone({...t._zod.def,catchall:o1()}),t.loose=()=>t.clone({...t._zod.def,catchall:o1()}),t.strict=()=>t.clone({...t._zod.def,catchall:hO()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=s=>JT(t,s),t.merge=s=>e5(t,s),t.pick=s=>QT(t,s),t.omit=s=>XT(t,s),t.partial=(...s)=>t5(CN,t,s[0]),t.required=(...s)=>s5(AN,t,s[0])});function Hd(t,e){const s={type:"object",get shape(){return uo(this,"shape",{...t}),this.shape},...Ye(e)};return new pO(s)}const gO=je("ZodUnion",(t,e)=>{S3.init(t,e),Rs.init(t,e),t.options=e.options});function xO(t,e){return new gO({type:"union",options:t,...Ye(e)})}const yO=je("ZodIntersection",(t,e)=>{E3.init(t,e),Rs.init(t,e)});function bO(t,e){return new yO({type:"intersection",left:t,right:e})}const H0=je("ZodEnum",(t,e)=>{C3.init(t,e),Rs.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const s=new Set(Object.keys(e.entries));t.extract=(r,i)=>{const o={};for(const u of r)if(s.has(u))o[u]=e.entries[u];else throw new Error(`Key ${u} not found in enum`);return new H0({...e,checks:[],...Ye(i),entries:o})},t.exclude=(r,i)=>{const o={...e.entries};for(const u of r)if(s.has(u))delete o[u];else throw new Error(`Key ${u} not found in enum`);return new H0({...e,checks:[],...Ye(i),entries:o})}});function vO(t,e){const s=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new H0({type:"enum",entries:s,...Ye(e)})}const wO=je("ZodTransform",(t,e)=>{A3.init(t,e),Rs.init(t,e),t._zod.parse=(s,r)=>{s.addIssue=o=>{if(typeof o=="string")s.issues.push(Sd(o,s.value,e));else{const u=o;u.fatal&&(u.continue=!1),u.code??(u.code="custom"),u.input??(u.input=s.value),u.inst??(u.inst=t),s.issues.push(Sd(u))}};const i=e.transform(s.value,s);return i instanceof Promise?i.then(o=>(s.value=o,s)):(s.value=i,s)}});function _O(t){return new wO({type:"transform",transform:t})}const CN=je("ZodOptional",(t,e)=>{k3.init(t,e),Rs.init(t,e),t.unwrap=()=>t._zod.def.innerType});function c1(t){return new CN({type:"optional",innerType:t})}const jO=je("ZodNullable",(t,e)=>{T3.init(t,e),Rs.init(t,e),t.unwrap=()=>t._zod.def.innerType});function u1(t){return new jO({type:"nullable",innerType:t})}const NO=je("ZodDefault",(t,e)=>{O3.init(t,e),Rs.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function SO(t,e){return new NO({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const EO=je("ZodPrefault",(t,e)=>{R3.init(t,e),Rs.init(t,e),t.unwrap=()=>t._zod.def.innerType});function CO(t,e){return new EO({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const AN=je("ZodNonOptional",(t,e)=>{M3.init(t,e),Rs.init(t,e),t.unwrap=()=>t._zod.def.innerType});function AO(t,e){return new AN({type:"nonoptional",innerType:t,...Ye(e)})}const kO=je("ZodCatch",(t,e)=>{D3.init(t,e),Rs.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function TO(t,e){return new kO({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const OO=je("ZodPipe",(t,e)=>{L3.init(t,e),Rs.init(t,e),t.in=e.in,t.out=e.out});function d1(t,e){return new OO({type:"pipe",in:t,out:e})}const RO=je("ZodReadonly",(t,e)=>{q3.init(t,e),Rs.init(t,e),t.unwrap=()=>t._zod.def.innerType});function MO(t){return new RO({type:"readonly",innerType:t})}const DO=je("ZodCustom",(t,e)=>{P3.init(t,e),Rs.init(t,e)});function LO(t,e={}){return C6(DO,t,e)}function qO(t){return A6(t)}const PO=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ll(async()=>{const{default:r}=await Promise.resolve().then(()=>Gc);return{default:r}},[]).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class ty extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class IO extends ty{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class h1 extends ty{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class m1 extends ty{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var V0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(V0||(V0={}));var $O=function(t,e,s,r){function i(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(p){try{f(r.next(p))}catch(x){u(x)}}function m(p){try{f(r.throw(p))}catch(x){u(x)}}function f(p){p.done?o(p.value):i(p.value).then(h,m)}f((r=r.apply(t,e||[])).next())})};class UO{constructor(e,{headers:s={},customFetch:r,region:i=V0.Any}={}){this.url=e,this.headers=s,this.region=i,this.fetch=PO(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return $O(this,void 0,void 0,function*(){try{const{headers:i,method:o,body:u}=s;let h={},{region:m}=s;m||(m=this.region);const f=new URL(`${this.url}/${e}`);m&&m!=="any"&&(h["x-region"]=m,f.searchParams.set("forceFunctionRegion",m));let p;u&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",p=u):typeof u=="string"?(h["Content-Type"]="text/plain",p=u):typeof FormData<"u"&&u instanceof FormData?p=u:(h["Content-Type"]="application/json",p=JSON.stringify(u)));const x=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),i),body:p}).catch(S=>{throw new IO(S)}),b=x.headers.get("x-relay-error");if(b&&b==="true")throw new h1(x);if(!x.ok)throw new m1(x);let j=((r=x.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return j==="application/json"?v=yield x.json():j==="application/octet-stream"?v=yield x.blob():j==="text/event-stream"?v=x:j==="multipart/form-data"?v=yield x.formData():v=yield x.text(),{data:v,error:null,response:x}}catch(i){return{data:null,error:i,response:i instanceof m1||i instanceof h1?i.context:void 0}}})}}var Bs={},dc={},hc={},mc={},fc={},pc={},BO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pc=BO();const zO=Pc.fetch,kN=Pc.fetch.bind(Pc),TN=Pc.Headers,FO=Pc.Request,HO=Pc.Response,Gc=Object.freeze(Object.defineProperty({__proto__:null,Headers:TN,Request:FO,Response:HO,default:kN,fetch:zO},Symbol.toStringTag,{value:"Module"})),VO=Bk(Gc);var gm={},f1;function ON(){if(f1)return gm;f1=1,Object.defineProperty(gm,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return gm.default=t,gm}var p1;function RN(){if(p1)return pc;p1=1;var t=pc&&pc.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(pc,"__esModule",{value:!0});const e=t(VO),s=t(ON());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,u){return this.headers=Object.assign({},this.headers),this.headers[o]=u,this}then(o,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const h=this.fetch;let m=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var p,x,b;let j=null,v=null,S=null,_=f.status,E=f.statusText;if(f.ok){if(this.method!=="HEAD"){const k=await f.text();k===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?v=k:v=JSON.parse(k))}const O=(p=this.headers.Prefer)===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),F=(x=f.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");O&&F&&F.length>1&&(S=parseInt(F[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(j={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,S=null,_=406,E="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const O=await f.text();try{j=JSON.parse(O),Array.isArray(j)&&f.status===404&&(v=[],j=null,_=200,E="OK")}catch{f.status===404&&O===""?(_=204,E="No Content"):j={message:O}}if(j&&this.isMaybeSingle&&(!((b=j?.details)===null||b===void 0)&&b.includes("0 rows"))&&(j=null,_=200,E="OK"),j&&this.shouldThrowOnError)throw new s.default(j)}return{error:j,data:v,count:S,status:_,statusText:E}});return this.shouldThrowOnError||(m=m.catch(f=>{var p,x,b;return{error:{message:`${(p=f?.name)!==null&&p!==void 0?p:"FetchError"}: ${f?.message}`,details:`${(x=f?.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(b=f?.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),m.then(o,u)}returns(){return this}overrideTypes(){return this}}return pc.default=r,pc}var g1;function MN(){if(g1)return fc;g1=1;var t=fc&&fc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fc,"__esModule",{value:!0});const e=t(RN());class s extends e.default{select(i){let o=!1;const u=(i??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join("");return this.url.searchParams.set("select",u),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:o=!0,nullsFirst:u,foreignTable:h,referencedTable:m=h}={}){const f=m?`${m}.order`:"order",p=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${p?`${p},`:""}${i}.${o?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:u=o}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${i}`),this}range(i,o,{foreignTable:u,referencedTable:h=u}={}){const m=typeof h>"u"?"offset":`${h}.offset`,f=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(m,`${i}`),this.url.searchParams.set(f,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:o=!1,settings:u=!1,buffers:h=!1,wal:m=!1,format:f="text"}={}){var p;const x=[i?"analyze":null,o?"verbose":null,u?"settings":null,h?"buffers":null,m?"wal":null].filter(Boolean).join("|"),b=(p=this.headers.Accept)!==null&&p!==void 0?p:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${b}"; options=${x};`,f==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return fc.default=s,fc}var x1;function sy(){if(x1)return mc;x1=1;var t=mc&&mc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mc,"__esModule",{value:!0});const e=t(MN());class s extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const u=Array.from(new Set(o)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(i,`in.(${u})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:u,type:h}={}){let m="";h==="plain"?m="pl":h==="phrase"?m="ph":h==="websearch"&&(m="w");const f=u===void 0?"":`(${u})`;return this.url.searchParams.append(i,`${m}fts${f}.${o}`),this}match(i){return Object.entries(i).forEach(([o,u])=>{this.url.searchParams.append(o,`eq.${u}`)}),this}not(i,o,u){return this.url.searchParams.append(i,`not.${o}.${u}`),this}or(i,{foreignTable:o,referencedTable:u=o}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${i})`),this}filter(i,o,u){return this.url.searchParams.append(i,`${o}.${u}`),this}}return mc.default=s,mc}var y1;function DN(){if(y1)return hc;y1=1;var t=hc&&hc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hc,"__esModule",{value:!0});const e=t(sy());class s{constructor(i,{headers:o={},schema:u,fetch:h}){this.url=i,this.headers=o,this.schema=u,this.fetch=h}select(i,{head:o=!1,count:u}={}){const h=o?"HEAD":"GET";let m=!1;const f=(i??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",f),u&&(this.headers.Prefer=`count=${u}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:o,defaultToNull:u=!0}={}){const h="POST",m=[];if(this.headers.Prefer&&m.push(this.headers.Prefer),o&&m.push(`count=${o}`),u||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(i)){const f=i.reduce((p,x)=>p.concat(Object.keys(x)),[]);if(f.length>0){const p=[...new Set(f)].map(x=>`"${x}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:o,ignoreDuplicates:u=!1,count:h,defaultToNull:m=!0}={}){const f="POST",p=[`resolution=${u?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&p.push(this.headers.Prefer),h&&p.push(`count=${h}`),m||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(i)){const x=i.reduce((b,j)=>b.concat(Object.keys(j)),[]);if(x.length>0){const b=[...new Set(x)].map(j=>`"${j}"`);this.url.searchParams.set("columns",b.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:o}={}){const u="PATCH",h=[];return this.headers.Prefer&&h.push(this.headers.Prefer),o&&h.push(`count=${o}`),this.headers.Prefer=h.join(","),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const o="DELETE",u=[];return i&&u.push(`count=${i}`),this.headers.Prefer&&u.unshift(this.headers.Prefer),this.headers.Prefer=u.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return hc.default=s,hc}var sd={},rd={},b1;function GO(){return b1||(b1=1,Object.defineProperty(rd,"__esModule",{value:!0}),rd.version=void 0,rd.version="0.0.0-automated"),rd}var v1;function ZO(){if(v1)return sd;v1=1,Object.defineProperty(sd,"__esModule",{value:!0}),sd.DEFAULT_HEADERS=void 0;const t=GO();return sd.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},sd}var w1;function YO(){if(w1)return dc;w1=1;var t=dc&&dc.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(dc,"__esModule",{value:!0});const e=t(DN()),s=t(sy()),r=ZO();class i{constructor(u,{headers:h={},schema:m,fetch:f}={}){this.url=u,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),h),this.schemaName=m,this.fetch=f}from(u){const h=new URL(`${this.url}/${u}`);return new e.default(h,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new i(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:m=!1,get:f=!1,count:p}={}){let x;const b=new URL(`${this.url}/rpc/${u}`);let j;m||f?(x=m?"HEAD":"GET",Object.entries(h).filter(([S,_])=>_!==void 0).map(([S,_])=>[S,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([S,_])=>{b.searchParams.append(S,_)})):(x="POST",j=h);const v=Object.assign({},this.headers);return p&&(v.Prefer=`count=${p}`),new s.default({method:x,url:b,headers:v,schema:this.schemaName,body:j,fetch:this.fetch,allowEmpty:!1})}}return dc.default=i,dc}var _1;function KO(){if(_1)return Bs;_1=1;var t=Bs&&Bs.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.PostgrestError=Bs.PostgrestBuilder=Bs.PostgrestTransformBuilder=Bs.PostgrestFilterBuilder=Bs.PostgrestQueryBuilder=Bs.PostgrestClient=void 0;const e=t(YO());Bs.PostgrestClient=e.default;const s=t(DN());Bs.PostgrestQueryBuilder=s.default;const r=t(sy());Bs.PostgrestFilterBuilder=r.default;const i=t(MN());Bs.PostgrestTransformBuilder=i.default;const o=t(RN());Bs.PostgrestBuilder=o.default;const u=t(ON());return Bs.PostgrestError=u.default,Bs.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:u.default},Bs}var WO=KO();const QO=Pd(WO),{PostgrestClient:XO,PostgrestQueryBuilder:CZ,PostgrestFilterBuilder:AZ,PostgrestTransformBuilder:kZ,PostgrestBuilder:TZ,PostgrestError:OZ}=QO;function JO(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const eR=JO(),tR="2.11.15",sR=`realtime-js/${tR}`,rR="1.0.0",LN=1e4,nR=1e3;var yd;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(yd||(yd={}));var rr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(rr||(rr={}));var En;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(En||(En={}));var G0;(function(t){t.websocket="websocket"})(G0||(G0={}));var Gl;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Gl||(Gl={}));class aR{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const i=s.getUint8(1),o=s.getUint8(2);let u=this.HEADER_LENGTH+2;const h=r.decode(e.slice(u,u+i));u=u+i;const m=r.decode(e.slice(u,u+o));u=u+o;const f=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{ref:null,topic:h,event:m,payload:f}}}let qN=class{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Ut;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ut||(Ut={}));const j1=(t,e,s={})=>{var r;const i=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,u)=>(o[u]=iR(u,t,e,i),o),{})},iR=(t,e,s,r)=>{const i=e.find(h=>h.name===t),o=i?.type,u=s[t];return o&&!r.includes(o)?PN(o,u):Z0(u)},PN=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return uR(e,s)}switch(t){case Ut.bool:return lR(e);case Ut.float4:case Ut.float8:case Ut.int2:case Ut.int4:case Ut.int8:case Ut.numeric:case Ut.oid:return oR(e);case Ut.json:case Ut.jsonb:return cR(e);case Ut.timestamp:return dR(e);case Ut.abstime:case Ut.date:case Ut.daterange:case Ut.int4range:case Ut.int8range:case Ut.money:case Ut.reltime:case Ut.text:case Ut.time:case Ut.timestamptz:case Ut.timetz:case Ut.tsrange:case Ut.tstzrange:return Z0(e);default:return Z0(e)}},Z0=t=>t,lR=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},oR=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},cR=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},uR=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let o;const u=t.slice(1,s);try{o=JSON.parse("["+u+"]")}catch{o=u?u.split(","):[]}return o.map(h=>PN(e,h))}return t},dR=t=>typeof t=="string"?t.replace(" ","T"):t,IN=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class s0{constructor(e,s,r={},i=LN){this.channel=e,this.event=s,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var N1;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(N1||(N1={}));class bd{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bd.syncState(this.state,i,o,u),this.pendingDiffs.forEach(m=>{this.state=bd.syncDiff(this.state,m,o,u)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=bd.syncDiff(this.state,i,o,u),h())}),this.onJoin((i,o,u)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:u})}),this.onLeave((i,o,u)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,i){const o=this.cloneDeep(e),u=this.transformState(s),h={},m={};return this.map(o,(f,p)=>{u[f]||(m[f]=p)}),this.map(u,(f,p)=>{const x=o[f];if(x){const b=p.map(_=>_.presence_ref),j=x.map(_=>_.presence_ref),v=p.filter(_=>j.indexOf(_.presence_ref)<0),S=x.filter(_=>b.indexOf(_.presence_ref)<0);v.length>0&&(h[f]=v),S.length>0&&(m[f]=S)}else h[f]=p}),this.syncDiff(o,{joins:h,leaves:m},r,i)}static syncDiff(e,s,r,i){const{joins:o,leaves:u}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(h,m)=>{var f;const p=(f=e[h])!==null&&f!==void 0?f:[];if(e[h]=this.cloneDeep(m),p.length>0){const x=e[h].map(j=>j.presence_ref),b=p.filter(j=>x.indexOf(j.presence_ref)<0);e[h].unshift(...b)}r(h,p,m)}),this.map(u,(h,m)=>{let f=e[h];if(!f)return;const p=m.map(x=>x.presence_ref);f=f.filter(x=>p.indexOf(x.presence_ref)<0),e[h]=f,i(h,f,m),f.length===0&&delete e[h]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const i=e[r];return"metas"in i?s[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[r]=i,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var S1;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(S1||(S1={}));var E1;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(E1||(E1={}));var Za;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Za||(Za={}));class ry{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=rr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new s0(this,En.join,this.params,this.timeout),this.rejoinTimer=new qN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=rr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(En.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new bd(this),this.broadcastEndpointURL=IN(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==rr.closed){const{config:{broadcast:o,presence:u,private:h}}=this.params;this._onError(p=>e?.(Za.CHANNEL_ERROR,p)),this._onClose(()=>e?.(Za.CLOSED));const m={},f={broadcast:o,presence:u,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],private:h};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:f},m)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:p})=>{var x;if(this.socket.setAuth(),p===void 0){e?.(Za.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,j=(x=b?.length)!==null&&x!==void 0?x:0,v=[];for(let S=0;S<j;S++){const _=b[S],{filter:{event:E,schema:A,table:O,filter:F}}=_,k=p&&p[S];if(k&&k.event===E&&k.schema===A&&k.table===O&&k.filter===F)v.push(Object.assign(Object.assign({},_),{id:k.id}));else{this.unsubscribe(),this.state=rr.errored,e?.(Za.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Za.SUBSCRIBED);return}}).receive("error",p=>{this.state=rr.errored,e?.(Za.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e?.(Za.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:u}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:u,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var u,h,m;const f=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||m===void 0)&&m.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rr.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(En.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new s0(this,En.leave,{},e),r.receive("ok",()=>{s(),i("ok")}).receive("timeout",()=>{s(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(o),u}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new s0(this,e,s,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var i,o;const u=e.toLocaleLowerCase(),{close:h,error:m,leave:f,join:p}=En;if(r&&[h,m,f,p].indexOf(u)>=0&&r!==this._joinRef())return;let b=this._onMessage(u,s,r);if(s&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(j=>{var v,S,_;return((v=j.filter)===null||v===void 0?void 0:v.event)==="*"||((_=(S=j.filter)===null||S===void 0?void 0:S.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===u}).map(j=>j.callback(b,r)):(o=this.bindings[u])===null||o===void 0||o.filter(j=>{var v,S,_,E,A,O;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in j){const F=j.id,k=(v=j.filter)===null||v===void 0?void 0:v.event;return F&&((S=s.ids)===null||S===void 0?void 0:S.includes(F))&&(k==="*"||k?.toLocaleLowerCase()===((_=s.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const F=(A=(E=j?.filter)===null||E===void 0?void 0:E.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return F==="*"||F===((O=s?.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===u}).map(j=>{if(typeof b=="object"&&"ids"in b){const v=b.data,{schema:S,table:_,commit_timestamp:E,type:A,errors:O}=v;b=Object.assign(Object.assign({},{schema:S,table:_,commit_timestamp:E,eventType:A,new:{},old:{},errors:O}),this._getPayloadRecords(v))}j.callback(b,r)})}_isClosed(){return this.state===rr.closed}_isJoined(){return this.state===rr.joined}_isJoining(){return this.state===rr.joining}_isLeaving(){return this.state===rr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const i=e.toLocaleLowerCase(),o={type:i,filter:s,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&ry.isEqual(i.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(En.close,{},e)}_onError(e){this._on(En.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=j1(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=j1(e.columns,e.old_record)),s}}const C1=()=>{},hR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mR{constructor(e,s){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=LN,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=C1,this.ref=0,this.logger=C1,this.conn=null,this.sendBuffer=[],this.serializer=new aR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let u;return o?u=o:typeof fetch>"u"?u=(...h)=>ll(async()=>{const{default:m}=await Promise.resolve().then(()=>Gc);return{default:m}},void 0).then(({default:m})=>m(...h)):u=fetch,(...h)=>u(...h)},this.endPoint=`${e}/${G0.websocket}`,this.httpEndpoint=IN(e),s?.transport?this.transport=s.transport:this.transport=null,s?.params&&(this.params=s.params),s?.timeout&&(this.timeout=s.timeout),s?.logger&&(this.logger=s.logger),(s?.logLevel||s?.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const i=(r=s?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=s?.reconnectAfterMs?s.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=s?.encode?s.encode:(o,u)=>u(JSON.stringify(o)),this.decode=s?.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new qN(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s?.fetch),s?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=s?.worker||!1,this.workerUrl=s?.workerUrl}this.accessToken=s?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=eR),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:rR}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case yd.connecting:return Gl.Connecting;case yd.open:return Gl.Open;case yd.closing:return Gl.Closing;default:return Gl.Closed}}isConnected(){return this.connectionState()===Gl.Open}channel(e,s={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new ry(`realtime:${e}`,s,this);return this.channels.push(o),o}}push(e){const{topic:s,event:r,payload:i,ref:o}=e,u=()=>{this.encode(e,h=>{var m;(m=this.conn)===null||m===void 0||m.send(h)})};this.log("push",`${s} ${r} (${o})`,i),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{const i={access_token:s,version:sR};s&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(En.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(nR,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:i,payload:o,ref:u}=s;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),u&&u===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${i} ${u&&"("+u+")"||""}`,o),Array.from(this.channels).filter(h=>h._isMember(r)).forEach(h=>h._trigger(i,o,u)),this.stateChangeCallbacks.message.forEach(h=>h(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(En.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${e}${r}${i}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([hR],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}}class ny extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Fs(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class fR extends ny{constructor(e,s,r){super(e),this.name="StorageApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Y0 extends ny{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var pR=function(t,e,s,r){function i(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(p){try{f(r.next(p))}catch(x){u(x)}}function m(p){try{f(r.throw(p))}catch(x){u(x)}}function f(p){p.done?o(p.value):i(p.value).then(h,m)}f((r=r.apply(t,e||[])).next())})};const $N=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ll(async()=>{const{default:r}=await Promise.resolve().then(()=>Gc);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},gR=()=>pR(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ll(()=>Promise.resolve().then(()=>Gc),void 0)).Response:Response}),K0=t=>{if(Array.isArray(t))return t.map(s=>K0(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const i=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=K0(r)}),e},xR=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var mo=function(t,e,s,r){function i(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(p){try{f(r.next(p))}catch(x){u(x)}}function m(p){try{f(r.throw(p))}catch(x){u(x)}}function f(p){p.done?o(p.value):i(p.value).then(h,m)}f((r=r.apply(t,e||[])).next())})};const r0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yR=(t,e,s)=>mo(void 0,void 0,void 0,function*(){const r=yield gR();t instanceof r&&!s?.noResolveJson?t.json().then(i=>{const o=t.status||500,u=i?.statusCode||o+"";e(new fR(r0(i),o,u))}).catch(i=>{e(new Y0(r0(i),i))}):e(new Y0(r0(t),t))}),bR=(t,e,s,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!r?i:(xR(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),s))};function Vd(t,e,s,r,i,o){return mo(this,void 0,void 0,function*(){return new Promise((u,h)=>{t(s,bR(e,r,i,o)).then(m=>{if(!m.ok)throw m;return r?.noResolveJson?m:m.json()}).then(m=>u(m)).catch(m=>yR(m,h,r))})})}function Jm(t,e,s,r){return mo(this,void 0,void 0,function*(){return Vd(t,"GET",e,s,r)})}function Ya(t,e,s,r,i){return mo(this,void 0,void 0,function*(){return Vd(t,"POST",e,r,i,s)})}function W0(t,e,s,r,i){return mo(this,void 0,void 0,function*(){return Vd(t,"PUT",e,r,i,s)})}function vR(t,e,s,r){return mo(this,void 0,void 0,function*(){return Vd(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function UN(t,e,s,r,i){return mo(this,void 0,void 0,function*(){return Vd(t,"DELETE",e,r,i,s)})}var _r=function(t,e,s,r){function i(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(p){try{f(r.next(p))}catch(x){u(x)}}function m(p){try{f(r.throw(p))}catch(x){u(x)}}function f(p){p.done?o(p.value):i(p.value).then(h,m)}f((r=r.apply(t,e||[])).next())})};const wR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},A1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _R{constructor(e,s={},r,i){this.url=e,this.headers=s,this.bucketId=r,this.fetch=$N(i)}uploadOrUpdate(e,s,r,i){return _r(this,void 0,void 0,function*(){try{let o;const u=Object.assign(Object.assign({},A1),i);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),m&&o.append("metadata",this.encodeMetadata(m)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",u.cacheControl),m&&o.append("metadata",this.encodeMetadata(m))):(o=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,m&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),i?.headers&&(h=Object.assign(Object.assign({},h),i.headers));const f=this._removeEmptyFolders(s),p=this._getFinalPath(f),x=yield(e=="PUT"?W0:Ya)(this.fetch,`${this.url}/object/${p}`,o,Object.assign({headers:h},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:f,id:x.Id,fullPath:x.Key},error:null}}catch(o){if(Fs(o))return{data:null,error:o};throw o}})}upload(e,s,r){return _r(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,i){return _r(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),u=this._getFinalPath(o),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",s);try{let m;const f=Object.assign({upsert:A1.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(m=new FormData,m.append("cacheControl",f.cacheControl),m.append("",r)):typeof FormData<"u"&&r instanceof FormData?(m=r,m.append("cacheControl",f.cacheControl)):(m=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType);const x=yield W0(this.fetch,h.toString(),m,{headers:p});return{data:{path:o,fullPath:x.Key},error:null}}catch(m){if(Fs(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,s){return _r(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);s?.upsert&&(i["x-upsert"]="true");const o=yield Ya(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),u=new URL(this.url+o.url),h=u.searchParams.get("token");if(!h)throw new ny("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:h},error:null}}catch(r){if(Fs(r))return{data:null,error:r};throw r}})}update(e,s,r){return _r(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return _r(this,void 0,void 0,function*(){try{return{data:yield Ya(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Fs(i))return{data:null,error:i};throw i}})}copy(e,s,r){return _r(this,void 0,void 0,function*(){try{return{data:{path:(yield Ya(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Fs(i))return{data:null,error:i};throw i}})}createSignedUrl(e,s,r){return _r(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield Ya(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${u}`)},{data:o,error:null}}catch(i){if(Fs(i))return{data:null,error:i};throw i}})}createSignedUrls(e,s,r){return _r(this,void 0,void 0,function*(){try{const i=yield Ya(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${o}`):null})),error:null}}catch(i){if(Fs(i))return{data:null,error:i};throw i}})}download(e,s){return _r(this,void 0,void 0,function*(){const i=typeof s?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(s?.transform||{}),u=o?`?${o}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield Jm(this.fetch,`${this.url}/${i}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(Fs(h))return{data:null,error:h};throw h}})}info(e){return _r(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield Jm(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:K0(r),error:null}}catch(r){if(Fs(r))return{data:null,error:r};throw r}})}exists(e){return _r(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield vR(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Fs(r)&&r instanceof Y0){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),i=[],o=s?.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&i.push(o);const h=typeof s?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(s?.transform||{});m!==""&&i.push(m);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${f}`)}}}remove(e){return _r(this,void 0,void 0,function*(){try{return{data:yield UN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Fs(s))return{data:null,error:s};throw s}})}list(e,s,r){return _r(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},wR),s),{prefix:e||""});return{data:yield Ya(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Fs(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const jR="2.10.4",NR={"X-Client-Info":`storage-js/${jR}`};var gc=function(t,e,s,r){function i(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(p){try{f(r.next(p))}catch(x){u(x)}}function m(p){try{f(r.throw(p))}catch(x){u(x)}}function f(p){p.done?o(p.value):i(p.value).then(h,m)}f((r=r.apply(t,e||[])).next())})};class SR{constructor(e,s={},r,i){const o=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},NR),s),this.fetch=$N(r)}listBuckets(){return gc(this,void 0,void 0,function*(){try{return{data:yield Jm(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Fs(e))return{data:null,error:e};throw e}})}getBucket(e){return gc(this,void 0,void 0,function*(){try{return{data:yield Jm(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Fs(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return gc(this,void 0,void 0,function*(){try{return{data:yield Ya(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Fs(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return gc(this,void 0,void 0,function*(){try{return{data:yield W0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Fs(r))return{data:null,error:r};throw r}})}emptyBucket(e){return gc(this,void 0,void 0,function*(){try{return{data:yield Ya(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Fs(s))return{data:null,error:s};throw s}})}deleteBucket(e){return gc(this,void 0,void 0,function*(){try{return{data:yield UN(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Fs(s))return{data:null,error:s};throw s}})}}class ER extends SR{constructor(e,s={},r,i){super(e,s,r,i)}from(e){return new _R(this.url,this.headers,e,this.fetch)}}const CR="2.53.0";let dd="";typeof Deno<"u"?dd="deno":typeof document<"u"?dd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dd="react-native":dd="node";const AR={"X-Client-Info":`supabase-js-${dd}/${CR}`},kR={headers:AR},TR={schema:"public"},OR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},RR={};var MR=function(t,e,s,r){function i(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(p){try{f(r.next(p))}catch(x){u(x)}}function m(p){try{f(r.throw(p))}catch(x){u(x)}}function f(p){p.done?o(p.value):i(p.value).then(h,m)}f((r=r.apply(t,e||[])).next())})};const DR=t=>{let e;return t?e=t:typeof fetch>"u"?e=kN:e=fetch,(...s)=>e(...s)},LR=()=>typeof Headers>"u"?TN:Headers,qR=(t,e,s)=>{const r=DR(s),i=LR();return(o,u)=>MR(void 0,void 0,void 0,function*(){var h;const m=(h=yield e())!==null&&h!==void 0?h:t;let f=new i(u?.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${m}`),r(o,Object.assign(Object.assign({},u),{headers:f}))})};var PR=function(t,e,s,r){function i(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(p){try{f(r.next(p))}catch(x){u(x)}}function m(p){try{f(r.throw(p))}catch(x){u(x)}}function f(p){p.done?o(p.value):i(p.value).then(h,m)}f((r=r.apply(t,e||[])).next())})};function IR(t){return t.endsWith("/")?t:t+"/"}function $R(t,e){var s,r;const{db:i,auth:o,realtime:u,global:h}=t,{db:m,auth:f,realtime:p,global:x}=e,b={db:Object.assign(Object.assign({},m),i),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},p),u),storage:{},global:Object.assign(Object.assign(Object.assign({},x),h),{headers:Object.assign(Object.assign({},(s=x?.headers)!==null&&s!==void 0?s:{}),(r=h?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>PR(this,void 0,void 0,function*(){return""})};return t.accessToken?b.accessToken=t.accessToken:delete b.accessToken,b}const BN="2.71.1",jc=30*1e3,Q0=3,n0=Q0*jc,UR="http://localhost:9999",BR="supabase.auth.token",zR={"X-Client-Info":`gotrue-js/${BN}`},X0="X-Supabase-Api-Version",zN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},FR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,HR=600*1e3;class ay extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function nt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class VR extends ay{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function GR(t){return nt(t)&&t.name==="AuthApiError"}class FN extends ay{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class ol extends ay{constructor(e,s,r,i){super(e,r,i),this.name=s,this.status=r}}class Vi extends ol{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ZR(t){return nt(t)&&t.name==="AuthSessionMissingError"}class xm extends ol{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ym extends ol{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class bm extends ol{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function YR(t){return nt(t)&&t.name==="AuthImplicitGrantRedirectError"}class k1 extends ol{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class J0 extends ol{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function a0(t){return nt(t)&&t.name==="AuthRetryableFetchError"}class T1 extends ol{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class ex extends ol{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ef="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),O1=` 	
\r=`.split(""),KR=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<O1.length;e+=1)t[O1[e].charCodeAt(0)]=-2;for(let e=0;e<ef.length;e+=1)t[ef[e].charCodeAt(0)]=e;return t})();function R1(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(ef[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(ef[r]),e.queuedBits-=6}}function HN(t,e,s){const r=KR[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function M1(t){const e=[],s=u=>{e.push(String.fromCodePoint(u))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=u=>{XR(u,r,s)};for(let u=0;u<t.length;u+=1)HN(t.charCodeAt(u),i,o);return e.join("")}function WR(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function QR(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}WR(r,e)}}function XR(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function JR(t){const e=[],s={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)HN(t.charCodeAt(i),s,r);return new Uint8Array(e)}function eM(t){const e=[];return QR(t,s=>e.push(s)),new Uint8Array(e)}function tM(t){const e=[],s={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>R1(i,s,r)),R1(null,s,r),e.join("")}function sM(t){return Math.round(Date.now()/1e3)+t}function rM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Sn=()=>typeof window<"u"&&typeof document<"u",Il={tested:!1,writable:!1},VN=()=>{if(!Sn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Il.tested)return Il.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Il.tested=!0,Il.writable=!0}catch{Il.tested=!0,Il.writable=!1}return Il.writable};function nM(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return s.searchParams.forEach((r,i)=>{e[i]=r}),e}const GN=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ll(async()=>{const{default:r}=await Promise.resolve().then(()=>Gc);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},aM=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Nc=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},$l=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Ui=async(t,e)=>{await t.removeItem(e)};class Of{constructor(){this.promise=new Of.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Of.promiseConstructor=Promise;function i0(t){const e=t.split(".");if(e.length!==3)throw new ex("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!FR.test(e[r]))throw new ex("JWT not in base64url format");return{header:JSON.parse(M1(e[0])),payload:JSON.parse(M1(e[1])),signature:JR(e[2]),raw:{header:e[0],payload:e[1]}}}async function iM(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function lM(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const u=await t(o);if(!e(o,null,u)){r(u);return}}catch(u){if(!e(o,u)){i(u);return}}})()})}function oM(t){return("0"+t.toString(16)).substr(-2)}function cM(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let i="";for(let o=0;o<56;o++)i+=s.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,oM).join("")}async function uM(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function dM(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await uM(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xc(t,e,s=!1){const r=cM();let i=r;s&&(i+="/PASSWORD_RECOVERY"),await Nc(t,`${e}-code-verifier`,i);const o=await dM(r);return[o,r===o?"plain":"s256"]}const hM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mM(t){const e=t.headers.get(X0);if(!e||!e.match(hM))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function fM(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function pM(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const gM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yc(t){if(!gM.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function l0(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function D1(t){return JSON.parse(JSON.stringify(t))}var xM=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s};const Hl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yM=[502,503,504];async function L1(t){var e;if(!aM(t))throw new J0(Hl(t),0);if(yM.includes(t.status))throw new J0(Hl(t),t.status);let s;try{s=await t.json()}catch(o){throw new FN(Hl(o),o)}let r;const i=mM(t);if(i&&i.getTime()>=zN["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new T1(Hl(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Vi}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,u)=>o&&typeof u=="string",!0))throw new T1(Hl(s),t.status,s.weak_password.reasons);throw new VR(Hl(s),t.status||500,r)}const bM=(t,e,s,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),s))};async function pt(t,e,s,r){var i;const o=Object.assign({},r?.headers);o[X0]||(o[X0]=zN["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const u=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(u.redirect_to=r.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await vM(t,e,s+h,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(m):{data:Object.assign({},m),error:null}}async function vM(t,e,s,r,i,o){const u=bM(e,r,i,o);let h;try{h=await t(s,Object.assign({},u))}catch(m){throw console.error(m),new J0(Hl(m),0)}if(h.ok||await L1(h),r?.noResolveJson)return h;try{return await h.json()}catch(m){await L1(m)}}function Ga(t){var e;let s=null;NM(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=sM(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function q1(t){const e=Ga(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Yi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function wM(t){return{data:t,error:null}}function _M(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:i,verification_type:o}=t,u=xM(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:s,hashed_token:r,redirect_to:i,verification_type:o},m=Object.assign({},u);return{data:{properties:h,user:m},error:null}}function jM(t){return t}function NM(t){return t.access_token&&t.refresh_token&&t.expires_in}const o0=["global","local","others"];var SM=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s};class EM{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=GN(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=o0[0]){if(o0.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${o0.join(", ")}`);try{return await pt(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await pt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Yi})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=SM(e,["options"]),i=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await pt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:_M,redirectTo:s?.redirectTo})}catch(s){if(nt(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await pt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Yi})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,i,o,u,h,m;try{const f={nextPage:null,lastPage:0,total:0},p=await pt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e?.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:jM});if(p.error)throw p.error;const x=await p.json(),b=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,j=(m=(h=p.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&m!==void 0?m:[];return j.length>0&&(j.forEach(v=>{const S=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(v.split(";")[1].split("=")[1]);f[`${_}Page`]=S}),f.total=parseInt(b)),{data:Object.assign(Object.assign({},x),f),error:null}}catch(f){if(nt(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){yc(e);try{return await pt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Yi})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){yc(e);try{return await pt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Yi})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){yc(e);try{return await pt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Yi})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){yc(e.userId);try{const{data:s,error:r}=await pt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:r}}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _deleteFactor(e){yc(e.userId),yc(e.id);try{return{data:await pt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}}}function P1(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function CM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const bc={debug:!!(globalThis&&VN()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ZN extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class AM extends ZN{}async function kM(t,e,s){bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),bc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await s()}finally{bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new AM(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(bc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}CM();const TM={url:UR,storageKey:BR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function I1(t,e,s){return await s()}const vc={};class Ed{constructor(e){var s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ed.nextInstanceID,Ed.nextInstanceID+=1,this.instanceID>0&&Sn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},TM),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new EM({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=GN(i.fetch),this.lock=i.lock||I1,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Sn()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=kM:this.lock=I1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:VN()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=P1(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=P1(this.memoryStorage)),Sn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=vc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){vc[this.storageKey]=Object.assign(Object.assign({},vc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=vc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){vc[this.storageKey]=Object.assign(Object.assign({},vc[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${BN}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=nM(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),Sn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(s,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),YR(o)){const m=(e=o.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:u,redirectType:h}=i;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return nt(s)?{error:s}:{error:new FN("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,i;try{const o=await pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e?.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ga}),{data:u,error:h}=o;if(h||!u)return{data:{user:null,session:null},error:h};const m=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:f,session:m},error:null}}catch(o){if(nt(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var s,r,i;try{let o;if("email"in e){const{email:p,password:x,options:b}=e;let j=null,v=null;this.flowType==="pkce"&&([j,v]=await xc(this.storage,this.storageKey)),o=await pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:p,password:x,data:(s=b?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:j,code_challenge_method:v},xform:Ga})}else if("phone"in e){const{phone:p,password:x,options:b}=e;o=await pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:x,data:(r=b?.data)!==null&&r!==void 0?r:{},channel:(i=b?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Ga})}else throw new ym("You must provide either an email or phone number and a password");const{data:u,error:h}=o;if(h||!u)return{data:{user:null,session:null},error:h};const m=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:f,session:m},error:null}}catch(o){if(nt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let s;if("email"in e){const{email:o,password:u,options:h}=e;s=await pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:q1})}else if("phone"in e){const{phone:o,password:u,options:h}=e;s=await pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:q1})}else throw new ym("You must provide either an email or phone number and a password");const{data:r,error:i}=s;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new xm}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,r,i,o,u,h,m,f,p,x,b,j;let v,S;if("message"in e)v=e.message,S=e.signature;else{const{chain:_,wallet:E,statement:A,options:O}=e;let F;if(Sn())if(typeof E=="object")F=E;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))F=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=E}const k=new URL((s=O?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in F&&F.signIn){const L=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),A?{statement:A}:null));let B;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")B=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)B=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)v=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),S=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${k.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(i=(r=O?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=O?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((u=O?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((h=O?.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((m=O?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((f=O?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((x=(p=O?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||x===void 0)&&x.length?["Resources",...O.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const L=await F.signMessage(new TextEncoder().encode(v),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=L}}try{const{data:_,error:E}=await pt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:tM(S)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(j=e.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:Ga});if(E)throw E;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new xm}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:E})}catch(_){if(nt(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const s=await $l(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(s??"").split("/");try{const{data:o,error:u}=await pt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ga});if(await Ui(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new xm}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:u})}catch(o){if(nt(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:s,provider:r,token:i,access_token:o,nonce:u}=e,h=await pt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:u,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Ga}),{data:m,error:f}=h;return f?{data:{user:null,session:null},error:f}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new xm}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:f})}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,i,o,u;try{if("email"in e){const{email:h,options:m}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await xc(this.storage,this.storageKey));const{error:x}=await pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(s=m?.data)!==null&&s!==void 0?s:{},create_user:(r=m?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:m?.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in e){const{phone:h,options:m}=e,{data:f,error:p}=await pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(i=m?.data)!==null&&i!==void 0?i:{},create_user:(o=m?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(u=m?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:f?.message_id},error:p}}throw new ym("You must provide either an email or phone number.")}catch(h){if(nt(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var s,r;try{let i,o;"options"in e&&(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:h}=await pt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Ga});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,f=u.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:f,session:m},error:null}}catch(i){if(nt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var s,r,i;try{let o=null,u=null;return this.flowType==="pkce"&&([o,u]=await xc(this.storage,this.storageKey)),await pt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:u}),headers:this.headers,xform:wM})}catch(o){if(nt(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Vi;const{error:i}=await pt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(nt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:u}=await pt(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:u,error:h}=await pt(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:h}}throw new ym("You must provide either an email or phone number and a type")}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await $l(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<n0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const u=await $l(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=l0()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(m,f,p)=>(!u&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,f,p))})}return{data:{session:e},error:null}}const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Yi}):await this._useSession(async s=>{var r,i,o;const{data:u,error:h}=s;if(h)throw h;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vi}:await pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Yi})})}catch(s){if(nt(s))return ZR(s)&&(await this._removeSession(),await Ui(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Vi;const u=i.session;let h=null,m=null;this.flowType==="pkce"&&e.email!=null&&([h,m]=await xc(this.storage,this.storageKey));const{data:f,error:p}=await pt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:m}),jwt:u.access_token,xform:Yi});if(p)throw p;return u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Vi;const s=Date.now()/1e3;let r=s,i=!0,o=null;const{payload:u}=i0(e.access_token);if(u.exp&&(r=u.exp,i=r<=s),i){const{session:h,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!h)return{data:{user:null,session:null},error:null};o=h}else{const{data:h,error:m}=await this._getUser(e.access_token);if(m)throw m;o={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(nt(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:u,error:h}=s;if(h)throw h;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Vi;const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Sn())throw new bm("No browser detected.");if(e.error||e.error_description||e.error_code)throw new bm(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new k1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bm("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new k1("No code detected.");const{data:A,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:u,expires_in:h,expires_at:m,token_type:f}=e;if(!o||!h||!u||!f)throw new bm("No session defined in URL");const p=Math.round(Date.now()/1e3),x=parseInt(h);let b=p+x;m&&(b=parseInt(m));const j=b-p;j*1e3<=jc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${x}s`);const v=b-x;p-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,b,p):p-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,b,p);const{data:S,error:_}=await this._getUser(o);if(_)throw _;const E={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:x,expires_at:b,refresh_token:u,token_type:f,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:e.type},error:null}}catch(r){if(nt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await $l(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:i,error:o}=s;if(o)return{error:o};const u=(r=i.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(GR(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await Ui(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=rM(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,i;try{const{data:{session:o},error:u}=s;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,s={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await xc(this.storage,this.storageKey,!0));try{return await pt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(nt(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:i}=await this._useSession(async o=>{var u,h,m,f,p;const{data:x,error:b}=o;if(b)throw b;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await pt(this.fetch,"GET",j,{headers:this.headers,jwt:(p=(f=x.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Sn()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(nt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,i;const{data:o,error:u}=s;if(u)throw u;return await pt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await lM(async i=>(i>0&&await iM(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await pt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ga})),(i,o)=>{const u=200*Math.pow(2,i);return o&&a0(o)&&Date.now()+u-r<jc})}catch(r){if(this._debug(s,"error",r),nt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),Sn()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await $l(this.storage,this.storageKey);if(i&&this.userStorage){let u=await $l(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:i.user},await Nc(this.userStorage,this.storageKey+"-user",u)),i.user=(e=u?.user)!==null&&e!==void 0?e:l0()}else if(i&&!i.user&&!i.user){const u=await $l(this.storage,this.storageKey+"-user");u&&u?.user?(i.user=u.user,await Ui(this.storage,this.storageKey+"-user"),await Nc(this.storage,this.storageKey,i)):i.user=l0()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((s=i.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<n0;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${n0}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:u}=await this._callRefreshToken(i.refresh_token);u&&(console.error(u),a0(u)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(i.access_token);!h&&u?.user?(i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(r,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Vi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Of;const{data:o,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!o.session)throw new Vi;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const h={session:o.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(o){if(this._debug(i,"error",o),nt(o)){const u={session:null,error:o};return a0(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,s,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const o=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,s)}catch(m){o.push(m)}});if(await Promise.all(u),o.length>0){for(let h=0;h<o.length;h+=1)console.error(o[h]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await Nc(this.userStorage,this.storageKey+"-user",{user:s.user});const i=Object.assign({},s);delete i.user;const o=D1(i);await Nc(this.storage,this.storageKey,o)}else{const i=D1(s);await Nc(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ui(this.storage,this.storageKey),await Ui(this.storage,this.storageKey+"-code-verifier"),await Ui(this.storage,this.storageKey+"-user"),this.userStorage&&await Ui(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Sn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),jc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/jc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${jc}ms, refresh threshold is ${Q0} ticks`),i<=Q0&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ZN)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Sn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const i=[`provider=${encodeURIComponent(s)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,u]=await xc(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(u)}`});i.push(h.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:i,error:o}=s;return o?{data:null,error:o}:await pt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,i;const{data:o,error:u}=s;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:m,error:f}=await pt(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((i=m?.totp)===null||i===void 0)&&i.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:i,error:o}=s;if(o)return{data:null,error:o};const{data:u,error:h}=await pt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(s){if(nt(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:i,error:o}=s;return o?{data:null,error:o}:await pt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(nt(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=e?.factors||[],i=r.filter(u=>u.factor_type==="totp"&&u.status==="verified"),o=r.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:r,totp:i,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=i0(i.access_token);let h=null;u.aal&&(h=u.aal);let m=h;((r=(s=i.user.factors)===null||s===void 0?void 0:s.filter(x=>x.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(m="aal2");const p=u.amr||[];return{data:{currentLevel:h,nextLevel:m,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(h=>h.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(h=>h.kid===e),r&&this.jwks_cached_at+HR>i)return r;const{data:o,error:u}=await pt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(h=>h.kid===e),!r)?null:r}async getClaims(e,s={}){try{let r=e;if(!r){const{data:j,error:v}=await this.getSession();if(v||!j.session)return{data:null,error:v};r=j.session.access_token}const{header:i,payload:o,signature:u,raw:{header:h,payload:m}}=i0(r);s?.allowExpired||fM(o.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!f){const{error:j}=await this.getUser(r);if(j)throw j;return{data:{claims:o,header:i,signature:u},error:null}}const p=pM(i.alg),x=await crypto.subtle.importKey("jwk",f,p,!0,["verify"]);if(!await crypto.subtle.verify(p,x,u,eM(`${h}.${m}`)))throw new ex("Invalid JWT signature");return{data:{claims:o,header:i,signature:u},error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}}Ed.nextInstanceID=0;const OM=Ed;class RM extends OM{constructor(e){super(e)}}var MM=function(t,e,s,r){function i(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(p){try{f(r.next(p))}catch(x){u(x)}}function m(p){try{f(r.throw(p))}catch(x){u(x)}}function f(p){p.done?o(p.value):i(p.value).then(h,m)}f((r=r.apply(t,e||[])).next())})};class DM{constructor(e,s,r){var i,o,u;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const h=IR(e),m=new URL(h);this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const f=`sb-${m.hostname.split(".")[0]}-auth-token`,p={db:TR,realtime:RR,auth:Object.assign(Object.assign({},OR),{storageKey:f}),global:kR},x=$R(r??{},p);this.storageKey=(i=x.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=x.global.headers)!==null&&o!==void 0?o:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(b,j)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(j)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=x.auth)!==null&&u!==void 0?u:{},this.headers,x.global.fetch),this.fetch=qR(s,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new XO(new URL("rest/v1",m).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new ER(this.storageUrl.href,this.headers,this.fetch,r?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new UO(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return MM(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:i,storageKey:o,flowType:u,lock:h,debug:m},f,p){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new RM({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),f),storageKey:o,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:i,flowType:u,lock:h,debug:m,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new mR(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r?.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const YN=(t,e,s)=>new DM(t,e,s);function LM(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const t=process.version.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}LM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const qM="https://english-australia-eau-supabase.lkobs5.easypanel.host",PM="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJhbm9uIiwKICAgICJpc3MiOiAic3VwYWJhc2UtZGVtbyIsCiAgICAiaWF0IjogMTY0MTc2OTIwMCwKICAgICJleHAiOiAxNzk5NTM1NjAwCn0.dc_X5iR_VP_qT0zsiyj_I_OZ2T9FtRU2BBNWN8Bu4GE",V=YN(qM,PM,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"sb-english-australia-eau-supabase-auth-token",storage:window.localStorage},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}}),IM=Object.freeze(Object.defineProperty({__proto__:null,supabase:V},Symbol.toStringTag,{value:"Module"}));class KN{static mapDatabaseRoleToSystemRole(e){return{member:["Members"],admin:["Admin","Members"],super_admin:["AdminSuper","Admin","Members"],moderator:["Admin","Members"],instructor:["Members","MemberColleges"]}[e]||["Members"]}static async getUserRoles(e){try{const{data:s}=await V.auth.getUser();if(!s.user?.email)return console.warn("No email found, using default role"),["Members"];if(s.user.email==="rrzillesg@gmail.com")return console.log("Admin user detected"),["AdminSuper","Admin","Members"];try{const{data:r,error:i}=await V.from("members").select("id, email").or(`email.eq.${s.user.email},created_by.eq.${e}`).single();if(i||!r)return console.warn("Member not found in database, using default role"),["Members"];const{data:o,error:u}=await V.from("member_roles").select("role").eq("member_id",r.id);if(u||!o||o.length===0)return console.warn("No roles found, using default role"),["Members"];const h=[];return o.forEach(m=>{const f=this.mapDatabaseRoleToSystemRole(m.role);h.push(...f)}),[...new Set(h)]}catch(r){return console.warn("Database error fetching member/roles:",r),["Members"]}}catch(s){return console.warn("General error in getUserRoles:",s),["Members"]}}static async createMemberAfterSignup(e,s){try{const{data:r}=await V.from("members").select("id").eq("email",s).single();if(r)return;const{error:i}=await V.from("members").insert({email:s,first_name:s.split("@")[0],last_name:"User",membership_status:"active",membership_type:"standard",created_by:e,updated_by:e});if(i)return;const{data:o}=await V.from("members").select("id").eq("email",s).single();o&&await V.from("member_roles").insert({member_id:o.id,role:"member"})}catch{}}static async signInWithRoles(e,s){try{const{data:r,error:i}=await V.auth.signInWithPassword({email:e,password:s});if(i||!r.user)return{user:null,roles:[],error:i};const o=await this.getUserRoles(r.user.id);return{user:r.user,roles:o,error:null}}catch(r){return{user:null,roles:[],error:r}}}}const tx={signIn:async(t,e)=>{const{data:s,error:r}=await V.auth.signInWithPassword({email:t,password:e});return{data:s,error:r}},signUp:async(t,e,s)=>{const{data:r,error:i}=await V.auth.signUp({email:t,password:e,options:{data:{full_name:s}}});return{data:r,error:i}},signOut:async()=>{const{error:t}=await V.auth.signOut();return{error:t}},resetPassword:async t=>{const{data:e,error:s}=await V.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/reset-password`});return{data:e,error:s}},updatePassword:async t=>{const{data:e,error:s}=await V.auth.updateUser({password:t});return{data:e,error:s}},getSession:async()=>{const{data:t,error:e}=await V.auth.getSession();return{data:t,error:e}},getUser:async()=>{const{data:{user:t},error:e}=await V.auth.getUser();return{user:t,error:e}},onAuthStateChange:t=>V.auth.onAuthStateChange(t)},$M=Hd({email:Wt().email("Please enter a valid email address"),password:Wt().min(6,"Password must be at least 6 characters")}),UM=()=>{const t=Ns(),[e,s]=M.useState(!1),[r,i]=M.useState(null),{register:o,handleSubmit:u,formState:{errors:h}}=Bd({resolver:Fd($M)}),m=async f=>{s(!0),i(null);try{const{user:p,roles:x,error:b}=await KN.signInWithRoles(f.email,f.password);if(b)i(b.message);else if(p){const{useAuthStore:j}=await ll(async()=>{const{useAuthStore:E}=await Promise.resolve().then(()=>RD);return{useAuthStore:E}},void 0),{setUser:v,setRoles:S,setIsLoading:_}=j.getState();v(p),S(x),_(!1),t("/dashboard")}}catch{i("An unexpected error occurred. Please try again.")}finally{s(!1)}};return n.jsx("div",{className:"w-full",children:n.jsxs("div",{className:"bg-white rounded-lg p-8",children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Welcome member"}),n.jsx("p",{className:"text-gray-600 mb-8",children:"Welcome to the Australian Online Academy of English Australia"}),n.jsxs("form",{onSubmit:u(m),className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),n.jsx("input",{id:"email",type:"email",placeholder:"Username",className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",...o("email"),disabled:e}),h.email&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.email.message})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),n.jsx("input",{id:"password",type:"password",placeholder:"Password",className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",...o("password"),disabled:e}),h.password&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.password.message})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{id:"remember",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("label",{htmlFor:"remember",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),r&&n.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md",children:r}),n.jsx("button",{type:"submit",disabled:e,className:"w-full py-3 px-4 bg-black text-white font-medium rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e?"Signing in...":"Login"})]}),n.jsx("div",{className:"text-center",children:n.jsx("a",{href:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-500",children:"Forgot your password?"})})]})})},BM=()=>n.jsx(Fx,{children:n.jsx(UM,{})});function WN(t){var e,s,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(s=WN(t[e]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}function QN(){for(var t,e,s=0,r="",i=arguments.length;s<i;s++)(t=arguments[s])&&(e=WN(t))&&(r&&(r+=" "),r+=e);return r}const $1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,U1=QN,XN=(t,e)=>s=>{var r;if(e?.variants==null)return U1(t,s?.class,s?.className);const{variants:i,defaultVariants:o}=e,u=Object.keys(i).map(f=>{const p=s?.[f],x=o?.[f];if(p===null)return null;const b=$1(p)||$1(x);return i[f][b]}),h=s&&Object.entries(s).reduce((f,p)=>{let[x,b]=p;return b===void 0||(f[x]=b),f},{}),m=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,p)=>{let{class:x,className:b,...j}=p;return Object.entries(j).every(v=>{let[S,_]=v;return Array.isArray(_)?_.includes({...o,...h}[S]):{...o,...h}[S]===_})?[...f,x,b]:f},[]);return U1(t,u,m,s?.class,s?.className)},iy="-",zM=t=>{const e=HM(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:u=>{const h=u.split(iy);return h[0]===""&&h.length!==1&&h.shift(),JN(h,e)||FM(u)},getConflictingClassGroupIds:(u,h)=>{const m=s[u]||[];return h&&r[u]?[...m,...r[u]]:m}}},JN=(t,e)=>{if(t.length===0)return e.classGroupId;const s=t[0],r=e.nextPart.get(s),i=r?JN(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(iy);return e.validators.find(({validator:u})=>u(o))?.classGroupId},B1=/^\[(.+)\]$/,FM=t=>{if(B1.test(t)){const e=B1.exec(t)[1],s=e?.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}},HM=t=>{const{theme:e,classGroups:s}=t,r={nextPart:new Map,validators:[]};for(const i in s)sx(s[i],r,i,e);return r},sx=(t,e,s,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:z1(e,i);o.classGroupId=s;return}if(typeof i=="function"){if(VM(i)){sx(i(r),e,s,r);return}e.validators.push({validator:i,classGroupId:s});return}Object.entries(i).forEach(([o,u])=>{sx(u,z1(e,o),s,r)})})},z1=(t,e)=>{let s=t;return e.split(iy).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},VM=t=>t.isThemeGetter,GM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,r=new Map;const i=(o,u)=>{s.set(o,u),e++,e>t&&(e=0,r=s,s=new Map)};return{get(o){let u=s.get(o);if(u!==void 0)return u;if((u=r.get(o))!==void 0)return i(o,u),u},set(o,u){s.has(o)?s.set(o,u):i(o,u)}}},rx="!",nx=":",ZM=nx.length,YM=t=>{const{prefix:e,experimentalParseClassName:s}=t;let r=i=>{const o=[];let u=0,h=0,m=0,f;for(let v=0;v<i.length;v++){let S=i[v];if(u===0&&h===0){if(S===nx){o.push(i.slice(m,v)),m=v+ZM;continue}if(S==="/"){f=v;continue}}S==="["?u++:S==="]"?u--:S==="("?h++:S===")"&&h--}const p=o.length===0?i:i.substring(m),x=KM(p),b=x!==p,j=f&&f>m?f-m:void 0;return{modifiers:o,hasImportantModifier:b,baseClassName:x,maybePostfixModifierPosition:j}};if(e){const i=e+nx,o=r;r=u=>u.startsWith(i)?o(u.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(s){const i=r;r=o=>s({className:o,parseClassName:i})}return r},KM=t=>t.endsWith(rx)?t.substring(0,t.length-1):t.startsWith(rx)?t.substring(1):t,WM=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(u=>{u[0]==="["||e[u]?(i.push(...o.sort(),u),o=[]):o.push(u)}),i.push(...o.sort()),i}},QM=t=>({cache:GM(t.cacheSize),parseClassName:YM(t),sortModifiers:WM(t),...zM(t)}),XM=/\s+/,JM=(t,e)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,u=[],h=t.trim().split(XM);let m="";for(let f=h.length-1;f>=0;f-=1){const p=h[f],{isExternal:x,modifiers:b,hasImportantModifier:j,baseClassName:v,maybePostfixModifierPosition:S}=s(p);if(x){m=p+(m.length>0?" "+m:m);continue}let _=!!S,E=r(_?v.substring(0,S):v);if(!E){if(!_){m=p+(m.length>0?" "+m:m);continue}if(E=r(v),!E){m=p+(m.length>0?" "+m:m);continue}_=!1}const A=o(b).join(":"),O=j?A+rx:A,F=O+E;if(u.includes(F))continue;u.push(F);const k=i(E,_);for(let L=0;L<k.length;++L){const B=k[L];u.push(O+B)}m=p+(m.length>0?" "+m:m)}return m};function eD(){let t=0,e,s,r="";for(;t<arguments.length;)(e=arguments[t++])&&(s=eS(e))&&(r&&(r+=" "),r+=s);return r}const eS=t=>{if(typeof t=="string")return t;let e,s="";for(let r=0;r<t.length;r++)t[r]&&(e=eS(t[r]))&&(s&&(s+=" "),s+=e);return s};function tD(t,...e){let s,r,i,o=u;function u(m){const f=e.reduce((p,x)=>x(p),t());return s=QM(f),r=s.cache.get,i=s.cache.set,o=h,h(m)}function h(m){const f=r(m);if(f)return f;const p=JM(m,s);return i(m,p),p}return function(){return o(eD.apply(null,arguments))}}const Ts=t=>{const e=s=>s[t]||[];return e.isThemeGetter=!0,e},tS=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,sS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,sD=/^\d+\/\d+$/,rD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,aD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,iD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,lD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wc=t=>sD.test(t),ot=t=>!!t&&!Number.isNaN(Number(t)),Bi=t=>!!t&&Number.isInteger(Number(t)),c0=t=>t.endsWith("%")&&ot(t.slice(0,-1)),Ha=t=>rD.test(t),oD=()=>!0,cD=t=>nD.test(t)&&!aD.test(t),rS=()=>!1,uD=t=>iD.test(t),dD=t=>lD.test(t),hD=t=>!$e(t)&&!Ue(t),mD=t=>Zc(t,iS,rS),$e=t=>tS.test(t),Ul=t=>Zc(t,lS,cD),u0=t=>Zc(t,yD,ot),F1=t=>Zc(t,nS,rS),fD=t=>Zc(t,aS,dD),vm=t=>Zc(t,oS,uD),Ue=t=>sS.test(t),nd=t=>Yc(t,lS),pD=t=>Yc(t,bD),H1=t=>Yc(t,nS),gD=t=>Yc(t,iS),xD=t=>Yc(t,aS),wm=t=>Yc(t,oS,!0),Zc=(t,e,s)=>{const r=tS.exec(t);return r?r[1]?e(r[1]):s(r[2]):!1},Yc=(t,e,s=!1)=>{const r=sS.exec(t);return r?r[1]?e(r[1]):s:!1},nS=t=>t==="position"||t==="percentage",aS=t=>t==="image"||t==="url",iS=t=>t==="length"||t==="size"||t==="bg-size",lS=t=>t==="length",yD=t=>t==="number",bD=t=>t==="family-name",oS=t=>t==="shadow",vD=()=>{const t=Ts("color"),e=Ts("font"),s=Ts("text"),r=Ts("font-weight"),i=Ts("tracking"),o=Ts("leading"),u=Ts("breakpoint"),h=Ts("container"),m=Ts("spacing"),f=Ts("radius"),p=Ts("shadow"),x=Ts("inset-shadow"),b=Ts("text-shadow"),j=Ts("drop-shadow"),v=Ts("blur"),S=Ts("perspective"),_=Ts("aspect"),E=Ts("ease"),A=Ts("animate"),O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...F(),Ue,$e],L=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],w=()=>[Ue,$e,m],C=()=>[wc,"full","auto",...w()],z=()=>[Bi,"none","subgrid",Ue,$e],R=()=>["auto",{span:["full",Bi,Ue,$e]},Bi,Ue,$e],D=()=>[Bi,"auto",Ue,$e],q=()=>["auto","min","max","fr",Ue,$e],H=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],X=()=>["start","end","center","stretch","center-safe","end-safe"],P=()=>["auto",...w()],Z=()=>[wc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...w()],Q=()=>[t,Ue,$e],de=()=>[...F(),H1,F1,{position:[Ue,$e]}],U=()=>["no-repeat",{repeat:["","x","y","space","round"]}],J=()=>["auto","cover","contain",gD,mD,{size:[Ue,$e]}],le=()=>[c0,nd,Ul],ee=()=>["","none","full",f,Ue,$e],xe=()=>["",ot,nd,Ul],we=()=>["solid","dashed","dotted","double"],Ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Me=()=>[ot,c0,H1,F1],Se=()=>["","none",v,Ue,$e],Oe=()=>["none",ot,Ue,$e],Le=()=>["none",ot,Ue,$e],Re=()=>[ot,Ue,$e],qe=()=>[wc,"full",...w()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ha],breakpoint:[Ha],color:[oD],container:[Ha],"drop-shadow":[Ha],ease:["in","out","in-out"],font:[hD],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ha],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ha],shadow:[Ha],spacing:["px",ot],text:[Ha],"text-shadow":[Ha],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",wc,$e,Ue,_]}],container:["container"],columns:[{columns:[ot,$e,Ue,h]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[Bi,"auto",Ue,$e]}],basis:[{basis:[wc,"full","auto",h,...w()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ot,wc,"auto","initial","none",$e]}],grow:[{grow:["",ot,Ue,$e]}],shrink:[{shrink:["",ot,Ue,$e]}],order:[{order:[Bi,"first","last","none",Ue,$e]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:R()}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:R()}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":q()}],"auto-rows":[{"auto-rows":q()}],gap:[{gap:w()}],"gap-x":[{"gap-x":w()}],"gap-y":[{"gap-y":w()}],"justify-content":[{justify:[...H(),"normal"]}],"justify-items":[{"justify-items":[...X(),"normal"]}],"justify-self":[{"justify-self":["auto",...X()]}],"align-content":[{content:["normal",...H()]}],"align-items":[{items:[...X(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...X(),{baseline:["","last"]}]}],"place-content":[{"place-content":H()}],"place-items":[{"place-items":[...X(),"baseline"]}],"place-self":[{"place-self":["auto",...X()]}],p:[{p:w()}],px:[{px:w()}],py:[{py:w()}],ps:[{ps:w()}],pe:[{pe:w()}],pt:[{pt:w()}],pr:[{pr:w()}],pb:[{pb:w()}],pl:[{pl:w()}],m:[{m:P()}],mx:[{mx:P()}],my:[{my:P()}],ms:[{ms:P()}],me:[{me:P()}],mt:[{mt:P()}],mr:[{mr:P()}],mb:[{mb:P()}],ml:[{ml:P()}],"space-x":[{"space-x":w()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":w()}],"space-y-reverse":["space-y-reverse"],size:[{size:Z()}],w:[{w:[h,"screen",...Z()]}],"min-w":[{"min-w":[h,"screen","none",...Z()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[u]},...Z()]}],h:[{h:["screen","lh",...Z()]}],"min-h":[{"min-h":["screen","lh","none",...Z()]}],"max-h":[{"max-h":["screen","lh",...Z()]}],"font-size":[{text:["base",s,nd,Ul]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ue,u0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",c0,$e]}],"font-family":[{font:[pD,$e,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ue,$e]}],"line-clamp":[{"line-clamp":[ot,"none",Ue,u0]}],leading:[{leading:[o,...w()]}],"list-image":[{"list-image":["none",Ue,$e]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ue,$e]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Q()}],"text-color":[{text:Q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...we(),"wavy"]}],"text-decoration-thickness":[{decoration:[ot,"from-font","auto",Ue,Ul]}],"text-decoration-color":[{decoration:Q()}],"underline-offset":[{"underline-offset":[ot,"auto",Ue,$e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:w()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue,$e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue,$e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:de()}],"bg-repeat":[{bg:U()}],"bg-size":[{bg:J()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Bi,Ue,$e],radial:["",Ue,$e],conic:[Bi,Ue,$e]},xD,fD]}],"bg-color":[{bg:Q()}],"gradient-from-pos":[{from:le()}],"gradient-via-pos":[{via:le()}],"gradient-to-pos":[{to:le()}],"gradient-from":[{from:Q()}],"gradient-via":[{via:Q()}],"gradient-to":[{to:Q()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:xe()}],"border-w-x":[{"border-x":xe()}],"border-w-y":[{"border-y":xe()}],"border-w-s":[{"border-s":xe()}],"border-w-e":[{"border-e":xe()}],"border-w-t":[{"border-t":xe()}],"border-w-r":[{"border-r":xe()}],"border-w-b":[{"border-b":xe()}],"border-w-l":[{"border-l":xe()}],"divide-x":[{"divide-x":xe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":xe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...we(),"hidden","none"]}],"divide-style":[{divide:[...we(),"hidden","none"]}],"border-color":[{border:Q()}],"border-color-x":[{"border-x":Q()}],"border-color-y":[{"border-y":Q()}],"border-color-s":[{"border-s":Q()}],"border-color-e":[{"border-e":Q()}],"border-color-t":[{"border-t":Q()}],"border-color-r":[{"border-r":Q()}],"border-color-b":[{"border-b":Q()}],"border-color-l":[{"border-l":Q()}],"divide-color":[{divide:Q()}],"outline-style":[{outline:[...we(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ot,Ue,$e]}],"outline-w":[{outline:["",ot,nd,Ul]}],"outline-color":[{outline:Q()}],shadow:[{shadow:["","none",p,wm,vm]}],"shadow-color":[{shadow:Q()}],"inset-shadow":[{"inset-shadow":["none",x,wm,vm]}],"inset-shadow-color":[{"inset-shadow":Q()}],"ring-w":[{ring:xe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Q()}],"ring-offset-w":[{"ring-offset":[ot,Ul]}],"ring-offset-color":[{"ring-offset":Q()}],"inset-ring-w":[{"inset-ring":xe()}],"inset-ring-color":[{"inset-ring":Q()}],"text-shadow":[{"text-shadow":["none",b,wm,vm]}],"text-shadow-color":[{"text-shadow":Q()}],opacity:[{opacity:[ot,Ue,$e]}],"mix-blend":[{"mix-blend":[...Ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ae()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ot]}],"mask-image-linear-from-pos":[{"mask-linear-from":Me()}],"mask-image-linear-to-pos":[{"mask-linear-to":Me()}],"mask-image-linear-from-color":[{"mask-linear-from":Q()}],"mask-image-linear-to-color":[{"mask-linear-to":Q()}],"mask-image-t-from-pos":[{"mask-t-from":Me()}],"mask-image-t-to-pos":[{"mask-t-to":Me()}],"mask-image-t-from-color":[{"mask-t-from":Q()}],"mask-image-t-to-color":[{"mask-t-to":Q()}],"mask-image-r-from-pos":[{"mask-r-from":Me()}],"mask-image-r-to-pos":[{"mask-r-to":Me()}],"mask-image-r-from-color":[{"mask-r-from":Q()}],"mask-image-r-to-color":[{"mask-r-to":Q()}],"mask-image-b-from-pos":[{"mask-b-from":Me()}],"mask-image-b-to-pos":[{"mask-b-to":Me()}],"mask-image-b-from-color":[{"mask-b-from":Q()}],"mask-image-b-to-color":[{"mask-b-to":Q()}],"mask-image-l-from-pos":[{"mask-l-from":Me()}],"mask-image-l-to-pos":[{"mask-l-to":Me()}],"mask-image-l-from-color":[{"mask-l-from":Q()}],"mask-image-l-to-color":[{"mask-l-to":Q()}],"mask-image-x-from-pos":[{"mask-x-from":Me()}],"mask-image-x-to-pos":[{"mask-x-to":Me()}],"mask-image-x-from-color":[{"mask-x-from":Q()}],"mask-image-x-to-color":[{"mask-x-to":Q()}],"mask-image-y-from-pos":[{"mask-y-from":Me()}],"mask-image-y-to-pos":[{"mask-y-to":Me()}],"mask-image-y-from-color":[{"mask-y-from":Q()}],"mask-image-y-to-color":[{"mask-y-to":Q()}],"mask-image-radial":[{"mask-radial":[Ue,$e]}],"mask-image-radial-from-pos":[{"mask-radial-from":Me()}],"mask-image-radial-to-pos":[{"mask-radial-to":Me()}],"mask-image-radial-from-color":[{"mask-radial-from":Q()}],"mask-image-radial-to-color":[{"mask-radial-to":Q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":F()}],"mask-image-conic-pos":[{"mask-conic":[ot]}],"mask-image-conic-from-pos":[{"mask-conic-from":Me()}],"mask-image-conic-to-pos":[{"mask-conic-to":Me()}],"mask-image-conic-from-color":[{"mask-conic-from":Q()}],"mask-image-conic-to-color":[{"mask-conic-to":Q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:de()}],"mask-repeat":[{mask:U()}],"mask-size":[{mask:J()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ue,$e]}],filter:[{filter:["","none",Ue,$e]}],blur:[{blur:Se()}],brightness:[{brightness:[ot,Ue,$e]}],contrast:[{contrast:[ot,Ue,$e]}],"drop-shadow":[{"drop-shadow":["","none",j,wm,vm]}],"drop-shadow-color":[{"drop-shadow":Q()}],grayscale:[{grayscale:["",ot,Ue,$e]}],"hue-rotate":[{"hue-rotate":[ot,Ue,$e]}],invert:[{invert:["",ot,Ue,$e]}],saturate:[{saturate:[ot,Ue,$e]}],sepia:[{sepia:["",ot,Ue,$e]}],"backdrop-filter":[{"backdrop-filter":["","none",Ue,$e]}],"backdrop-blur":[{"backdrop-blur":Se()}],"backdrop-brightness":[{"backdrop-brightness":[ot,Ue,$e]}],"backdrop-contrast":[{"backdrop-contrast":[ot,Ue,$e]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ot,Ue,$e]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ot,Ue,$e]}],"backdrop-invert":[{"backdrop-invert":["",ot,Ue,$e]}],"backdrop-opacity":[{"backdrop-opacity":[ot,Ue,$e]}],"backdrop-saturate":[{"backdrop-saturate":[ot,Ue,$e]}],"backdrop-sepia":[{"backdrop-sepia":["",ot,Ue,$e]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":w()}],"border-spacing-x":[{"border-spacing-x":w()}],"border-spacing-y":[{"border-spacing-y":w()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ue,$e]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ot,"initial",Ue,$e]}],ease:[{ease:["linear","initial",E,Ue,$e]}],delay:[{delay:[ot,Ue,$e]}],animate:[{animate:["none",A,Ue,$e]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,Ue,$e]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:Oe()}],"rotate-x":[{"rotate-x":Oe()}],"rotate-y":[{"rotate-y":Oe()}],"rotate-z":[{"rotate-z":Oe()}],scale:[{scale:Le()}],"scale-x":[{"scale-x":Le()}],"scale-y":[{"scale-y":Le()}],"scale-z":[{"scale-z":Le()}],"scale-3d":["scale-3d"],skew:[{skew:Re()}],"skew-x":[{"skew-x":Re()}],"skew-y":[{"skew-y":Re()}],transform:[{transform:[Ue,$e,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:qe()}],"translate-x":[{"translate-x":qe()}],"translate-y":[{"translate-y":qe()}],"translate-z":[{"translate-z":qe()}],"translate-none":["translate-none"],accent:[{accent:Q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue,$e]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":w()}],"scroll-mx":[{"scroll-mx":w()}],"scroll-my":[{"scroll-my":w()}],"scroll-ms":[{"scroll-ms":w()}],"scroll-me":[{"scroll-me":w()}],"scroll-mt":[{"scroll-mt":w()}],"scroll-mr":[{"scroll-mr":w()}],"scroll-mb":[{"scroll-mb":w()}],"scroll-ml":[{"scroll-ml":w()}],"scroll-p":[{"scroll-p":w()}],"scroll-px":[{"scroll-px":w()}],"scroll-py":[{"scroll-py":w()}],"scroll-ps":[{"scroll-ps":w()}],"scroll-pe":[{"scroll-pe":w()}],"scroll-pt":[{"scroll-pt":w()}],"scroll-pr":[{"scroll-pr":w()}],"scroll-pb":[{"scroll-pb":w()}],"scroll-pl":[{"scroll-pl":w()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue,$e]}],fill:[{fill:["none",...Q()]}],"stroke-w":[{stroke:[ot,nd,Ul,u0]}],stroke:[{stroke:["none",...Q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},wD=tD(vD);function xa(...t){return wD(QN(t))}const _D=XN("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-white hover:bg-primary/90",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",ghost:"hover:bg-gray-100 hover:text-gray-900",link:"text-primary underline-offset-4 hover:underline",destructive:"bg-red-500 text-white hover:bg-red-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),se=M.forwardRef(({className:t,variant:e,size:s,...r},i)=>n.jsx("button",{className:xa(_D({variant:e,size:s,className:t})),ref:i,...r}));se.displayName="Button";const Ne=M.forwardRef(({className:t,type:e,...s},r)=>n.jsx("input",{type:e,className:xa("flex h-11 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-0 focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s}));Ne.displayName="Input";const jD=XN("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),he=M.forwardRef(({className:t,...e},s)=>n.jsx("label",{ref:s,className:xa(jD(),t),...e}));he.displayName="Label";const ue=M.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:xa("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ue.displayName="Card";const Rn=M.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:xa("flex flex-col space-y-1.5 p-6",t),...e}));Rn.displayName="CardHeader";const Mn=M.forwardRef(({className:t,...e},s)=>n.jsx("h3",{ref:s,className:xa("text-2xl font-semibold leading-none tracking-tight",t),...e}));Mn.displayName="CardTitle";const Dn=M.forwardRef(({className:t,...e},s)=>n.jsx("p",{ref:s,className:xa("text-sm text-muted-foreground",t),...e}));Dn.displayName="CardDescription";const cr=M.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:xa("p-6 pt-0",t),...e}));cr.displayName="CardContent";const ax=M.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:xa("flex items-center p-6 pt-0",t),...e}));ax.displayName="CardFooter";const ND=Hd({email:Wt().email("Please enter a valid email address")}),SD=()=>{const t=Ns(),[e,s]=M.useState(!1),[r,i]=M.useState(!1),[o,u]=M.useState(null),{register:h,handleSubmit:m,formState:{errors:f}}=Bd({resolver:Fd(ND)}),p=async x=>{s(!0),u(null);try{const{error:b}=await tx.resetPassword(x.email);b?u(b.message):i(!0)}catch{u("An unexpected error occurred. Please try again.")}finally{s(!1)}};return r?n.jsxs(ue,{className:"w-full",children:[n.jsxs(Rn,{className:"space-y-1 text-center",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx(Mn,{className:"text-2xl font-bold",children:"Check your email"}),n.jsx(Dn,{children:"We've sent a password reset link to your email address."})]}),n.jsx(cr,{className:"text-center",children:n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"If you don't see the email, check your spam folder or try again."})}),n.jsx(ax,{children:n.jsx(se,{variant:"outline",className:"w-full",onClick:()=>t("/login"),children:"Back to login"})})]}):n.jsxs(ue,{className:"w-full",children:[n.jsxs(Rn,{className:"space-y-1",children:[n.jsx(Mn,{className:"text-2xl font-bold",children:"Password Recovery"}),n.jsx(Dn,{children:"Enter your email address and we'll send you a link to reset your password."})]}),n.jsx(cr,{children:n.jsxs("form",{onSubmit:m(p),className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(he,{htmlFor:"email",children:"Email address"}),n.jsx(Ne,{id:"email",type:"email",placeholder:"Enter your email address",...h("email"),disabled:e}),f.email&&n.jsx("p",{className:"text-sm text-destructive",children:f.email.message})]}),o&&n.jsx("div",{className:"text-sm text-destructive",children:o}),n.jsx(se,{type:"submit",className:"w-full",disabled:e,children:e?"Sending...":"Send reset link"})]})}),n.jsx(ax,{children:n.jsx("button",{className:"text-sm text-primary hover:underline w-full text-center",onClick:()=>t("/login"),children:"Remember your password? Sign in"})})]})},ED=()=>n.jsx(Fx,{children:n.jsx(SD,{})}),CD=()=>{const t=Ns(),[e,s]=M.useState(""),[r,i]=M.useState(""),[o,u]=M.useState(!1),[h,m]=M.useState(""),f=async p=>{p.preventDefault(),u(!0),m("");try{const{data:x,error:b}=await V.auth.signUp({email:e,password:r,options:{emailRedirectTo:`${window.location.origin}/dashboard`}});b?m(`Erro: ${b.message}`):x.user&&(await KN.createMemberAfterSignup(x.user.id,e),m("Usurio criado com sucesso! Voc pode fazer login agora."),setTimeout(()=>t("/login"),2e3))}catch{m("Erro ao criar usurio")}finally{u(!1)}};return n.jsx(Fx,{children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Criar Usurio de Teste"}),n.jsxs("form",{onSubmit:f,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),n.jsx("input",{type:"email",value:e,onChange:p=>s(p.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md",placeholder:"admin@englishaustralia.com.au",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),n.jsx("input",{type:"password",value:r,onChange:p=>i(p.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md",placeholder:"Mnimo 6 caracteres",required:!0,minLength:6})]}),h&&n.jsx("div",{className:`p-3 rounded-md text-sm ${h.includes("sucesso")?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:h}),n.jsx(se,{type:"submit",className:"w-full",disabled:o,children:o?"Criando...":"Criar Usurio"})]}),n.jsx("div",{className:"mt-4",children:n.jsx(se,{variant:"outline",onClick:()=>t("/login"),className:"w-full",children:"Voltar para Login"})})]})})},V1=t=>{let e;const s=new Set,r=(f,p)=>{const x=typeof f=="function"?f(e):f;if(!Object.is(x,e)){const b=e;e=p??(typeof x!="object"||x===null)?x:Object.assign({},e,x),s.forEach(j=>j(e,b))}},i=()=>e,h={setState:r,getState:i,getInitialState:()=>m,subscribe:f=>(s.add(f),()=>s.delete(f))},m=e=t(r,i,h);return h},AD=t=>t?V1(t):V1,kD=t=>t;function TD(t,e=kD){const s=Hs.useSyncExternalStore(t.subscribe,Hs.useCallback(()=>e(t.getState()),[t,e]),Hs.useCallback(()=>e(t.getInitialState()),[t,e]));return Hs.useDebugValue(s),s}const G1=t=>{const e=AD(t),s=r=>TD(e,r);return Object.assign(s,e),s},OD=t=>t?G1(t):G1,jt=OD((t,e)=>({user:null,roles:[],isLoading:!0,rolesLoaded:!1,simulatedRole:null,setUser:s=>t({user:s}),setRoles:s=>t({roles:s,rolesLoaded:!0}),setIsLoading:s=>{console.log(" STORE: setIsLoading called with:",s),t({isLoading:s})},setRolesLoaded:s=>t({rolesLoaded:s}),setSimulatedRole:s=>{s?localStorage.setItem("simulatedRole",s):localStorage.removeItem("simulatedRole"),t({simulatedRole:s})},hasRole:s=>{const r=e(),i=localStorage.getItem("eau_impersonation_session");if(i)try{return(JSON.parse(i).impersonatedRoles||["Members"]).includes(s)}catch{return r.roles.includes(s)}return r.simulatedRole,r.roles.includes(s)},getEffectiveRoles:()=>{const s=e(),r=localStorage.getItem("eau_impersonation_session");if(r)try{return JSON.parse(r).impersonatedRoles||["Members"]}catch{return s.roles}return s.simulatedRole,s.roles},getEffectiveUserId:()=>{const s=e(),r=localStorage.getItem("eau_impersonation_session");if(r)try{return JSON.parse(r).impersonatedUserId}catch{return s.user?.id}return s.user?.id},reset:()=>{localStorage.removeItem("simulatedRole"),t({user:null,roles:[],isLoading:!1,rolesLoaded:!1,simulatedRole:null})}})),RD=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:jt},Symbol.toStringTag,{value:"Module"})),MD={CREATE_CPD:["Admin","AdminSuper","Members","MemberColleges","ConsultantsAgents","BoardMembers"],APPROVE_CPD:["Admin","AdminSuper"],VIEW_ALL_CPDS:["Admin","AdminSuper"],CREATE_EVENT:["Admin","AdminSuper"],EDIT_EVENT:["Admin","AdminSuper"],DELETE_EVENT:["Admin","AdminSuper"],REGISTER_EVENT:["Admin","AdminSuper","Members","MemberColleges","ConsultantsAgents","BoardMembers","Affiliates"],MANAGE_USERS:["Admin","AdminSuper"],ASSIGN_ROLES:["AdminSuper"],VIEW_USER_REPORTS:["Admin","AdminSuper"],ACCESS_ADMIN_DASHBOARD:["Admin","AdminSuper"],ACCESS_MEMBER_DASHBOARD:["Admin","AdminSuper","Members","MemberColleges","ConsultantsAgents","BoardMembers","Affiliates"],ACCESS_PUBLIC_CONTENT:["Public","Openlearning","Admin","AdminSuper","Members","MemberColleges","ConsultantsAgents","BoardMembers","Affiliates"]};function Rf(){const{roles:t,hasRole:e}=jt();return{roles:t,hasPermission:m=>{const f=MD[m],p=f.some(x=>e(x));return console.log("Verificando permisso:",m),console.log("Roles necessrias:",f),console.log("Roles do usurio:",t),console.log("Tem acesso:",p),p},hasAnyRole:m=>m.some(f=>e(f)),hasAllRoles:m=>m.every(f=>e(f)),isAdmin:()=>e("Admin")||e("AdminSuper"),isSuper:()=>e("AdminSuper"),isMember:()=>e("Members")||e("MemberColleges")}}const Qt=({children:t,permission:e,roles:s,requireAll:r=!1,fallback:i=null})=>{const{hasPermission:o,hasAnyRole:u,hasAllRoles:h}=Rf();return(e?o(e):s?r?h(s):u(s):!0)?n.jsx(n.Fragment,{children:t}):n.jsx(n.Fragment,{children:i})};class DD{SESSION_KEY="eau_impersonation_session";ORIGINAL_USER_KEY="eau_original_user_data";canImpersonate(){return jt.getState().roles.includes("AdminSuper")}isImpersonating(){return!!localStorage.getItem(this.SESSION_KEY)}getSession(){const e=localStorage.getItem(this.SESSION_KEY);if(!e)return null;try{return JSON.parse(e)}catch{return null}}async startImpersonation(e){try{if(!this.canImpersonate())return{success:!1,error:"Only SuperAdmin can impersonate users"};if(this.isImpersonating())return{success:!1,error:"Already impersonating. Please exit current session first."};const s=jt.getState(),r=s.user,i=s.roles,o=localStorage.getItem("eau_member");if(!r)return{success:!1,error:"No user logged in"};localStorage.setItem(this.ORIGINAL_USER_KEY,o||"{}");const{data:u,error:h}=await V.from("members").select("*").eq("id",e).single();if(h||!u)return{success:!1,error:"Target user not found"};const{data:m,error:f}=await V.from("member_roles").select("role").eq("member_id",e);if(f)return console.error("Error fetching target user roles:",f),{success:!1,error:"Failed to fetch target user roles"};let p=m?.map(b=>b.role)||["Members"];p=p.map(b=>b==="member"?"Members":b==="admin"?"Admin":b==="adminsuper"?"AdminSuper":b),p.length===0&&p.push("Members");const x={originalUserId:r.id,originalEmail:r.email||"",originalRoles:i,impersonatedUserId:u.id,impersonatedEmail:u.email,impersonatedRoles:p,startedAt:new Date().toISOString()};return localStorage.setItem(this.SESSION_KEY,JSON.stringify(x)),s.setUser({id:u.id,email:u.email,user_metadata:{},app_metadata:{},aud:"authenticated",created_at:u.created_at}),s.setRoles(p),localStorage.setItem("eau_member",JSON.stringify(u)),{success:!0}}catch(s){return console.error("Error starting impersonation:",s),{success:!1,error:s.message||"Failed to start impersonation"}}}async stopImpersonation(){try{const e=this.getSession();if(!e)return{success:!1,error:"No impersonation session active"};const s=localStorage.getItem(this.ORIGINAL_USER_KEY);if(!s)return{success:!1,error:"Original user data not found"};let r;try{r=JSON.parse(s)}catch{return{success:!1,error:"Invalid original user data"}}const i=jt.getState();return i.setUser({id:r.id,email:r.email,user_metadata:{},app_metadata:{},aud:"authenticated",created_at:r.created_at}),i.setRoles(e.originalRoles),localStorage.setItem("eau_member",JSON.stringify(r)),localStorage.removeItem(this.SESSION_KEY),localStorage.removeItem(this.ORIGINAL_USER_KEY),{success:!0}}catch(e){return console.error("Error stopping impersonation:",e),{success:!1,error:e.message||"Failed to stop impersonation"}}}getDisplayInfo(){const e=this.getSession();return e?{isImpersonating:!0,originalEmail:e.originalEmail,targetEmail:e.impersonatedEmail}:{isImpersonating:!1}}}const Qa=new DD,LD=()=>{const{user:t,roles:e,getEffectiveRoles:s,getEffectiveUserId:r}=jt(),i=r(),o=Qa.isImpersonating(),u=Qa.getDisplayInfo(),h=o?{email:u.targetEmail,user_metadata:{full_name:null}}:t,m=s(),f=Ns(),[p,x]=M.useState({totalPoints:0,totalActivities:0,thisYearPoints:0,loading:!0}),[b,j]=M.useState([]),[v,S]=M.useState(!0),[_,E]=M.useState([]),[A,O]=M.useState(!0);return M.useEffect(()=>{(async()=>{if(i)try{const k=localStorage.getItem("eau_impersonation_session");let L;if(k){const q=i;console.log("Dashboard: Fetching CPD activities for impersonated member:",q),L=V.from("cpd_activities").select("*").eq("member_id",q).eq("status","approved")}else{const{data:q,error:H}=await V.from("members").select("id").eq("user_id",i).single();if(H||!q){console.error("Error fetching member data:",H),x(X=>({...X,loading:!1})),O(!1);return}L=V.from("cpd_activities").select("*").eq("member_id",q.id).eq("status","approved")}const{data:B,error:w}=await L;if(w)throw w;const C=new Date().getFullYear();let z=0,R=0;B?.forEach(q=>{const H=q.points||0;z+=H,new Date(q.date_completed).getFullYear()===C&&(R+=H)}),x({totalPoints:z,totalActivities:B?.length||0,thisYearPoints:R,loading:!1});const D=B?.sort((q,H)=>new Date(H.date_completed).getTime()-new Date(q.date_completed).getTime())||[];E(D.slice(0,5)),O(!1)}catch(k){console.error("Error fetching CPD stats:",k),x(L=>({...L,loading:!1})),O(!1)}})()},[i]),M.useEffect(()=>{(async()=>{try{const k=new Date().toISOString(),{data:L,error:B}=await V.from("events").select("*").gte("start_date",k).order("start_date",{ascending:!0}).limit(3);if(B)throw B;j(L||[])}catch(k){console.error("Error fetching upcoming events:",k)}finally{S(!1)}})()},[]),n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm border-b",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ",h?.user_metadata?.full_name||h?.email]}),n.jsxs("p",{className:"text-gray-600",children:["Roles: ",m.join(", ")||"No roles assigned"]})]})})})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsxs(ue,{children:[n.jsxs(Rn,{children:[n.jsx(Mn,{className:"flex items-center gap-2",children:" CPD Summary"}),n.jsx(Dn,{children:"Your Continuing Professional Development progress"})]}),n.jsx(cr,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Total Points:"}),n.jsx("span",{className:"text-2xl font-bold text-primary-600",children:p.loading?"...":p.totalPoints})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Activities:"}),n.jsx("span",{className:"text-lg font-semibold",children:p.loading?"...":p.totalActivities})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"This Year:"}),n.jsx("span",{className:"text-lg font-semibold",children:p.loading?"...":p.thisYearPoints})]}),n.jsx(Qt,{permission:"CREATE_CPD",children:n.jsx(se,{className:"w-full mt-4",onClick:()=>f("/cpd"),children:"Add New CPD Activity"})})]})})]}),n.jsxs(ue,{children:[n.jsxs(Rn,{children:[n.jsx(Mn,{className:"flex items-center gap-2",children:" Upcoming Events"}),n.jsx(Dn,{children:"Professional development events and workshops"})]}),n.jsx(cr,{children:n.jsxs("div",{className:"space-y-4",children:[v?n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"Loading..."})}):b.length>0?n.jsx("div",{className:"space-y-2",children:b.slice(0,2).map(F=>n.jsxs("div",{className:"border-l-4 border-primary-500 pl-3 py-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:F.title}),n.jsx("p",{className:"text-xs text-gray-500",children:new Date(F.start_date).toLocaleDateString()})]},F.id))}):n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No upcoming events"})}),n.jsx(Qt,{permission:"REGISTER_EVENT",children:n.jsx(se,{variant:"outline",className:"w-full",onClick:()=>f("/events"),children:"Browse Events"})})]})})]}),n.jsxs(ue,{children:[n.jsxs(Rn,{children:[n.jsx(Mn,{className:"flex items-center gap-2",children:" Quick Actions"}),n.jsx(Dn,{children:"Common tasks and shortcuts"})]}),n.jsx(cr,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsx(Qt,{permission:"CREATE_CPD",children:n.jsx(se,{variant:"outline",className:"w-full justify-start",onClick:()=>f("/cpd"),children:" Log CPD Activity"})}),n.jsx(se,{variant:"outline",className:"w-full justify-start",onClick:()=>f("/profile"),children:" My Profile"}),n.jsx(se,{variant:"outline",className:"w-full justify-start",onClick:()=>f("/cpd"),children:" Export Certificate"}),n.jsx(Qt,{roles:["Admin","AdminSuper"],children:n.jsx(se,{variant:"outline",className:"w-full justify-start",onClick:()=>f("/admin"),children:" Admin Panel"})})]})})]}),n.jsxs(ue,{className:"md:col-span-2 lg:col-span-3",children:[n.jsxs(Rn,{children:[n.jsx(Mn,{className:"flex items-center gap-2",children:" Recent Activity"}),n.jsx(Dn,{children:"Your latest CPD activities and events"})]}),n.jsx(cr,{children:A?n.jsx("div",{className:"text-center py-12 text-gray-500",children:n.jsx("p",{children:"Loading activities..."})}):_.length>0?n.jsxs("div",{className:"space-y-4",children:[_.map(F=>n.jsx("div",{className:"border-b pb-3 last:border-0",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:F.activity_title}),n.jsx("p",{className:"text-sm text-gray-600",children:F.category_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(F.date_completed).toLocaleDateString(),"  ",F.points," points"]})]}),n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${F.status==="approved"?"bg-green-100 text-green-800":F.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:F.status})]})},F.id)),n.jsx(Qt,{permission:"CREATE_CPD",children:n.jsx(se,{variant:"outline",className:"w-full",onClick:()=>f("/cpd"),children:"View All Activities"})})]}):n.jsxs("div",{className:"text-center py-12 text-gray-500",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"No activities yet"}),n.jsx("p",{className:"text-sm mb-4",children:"Start logging your professional development activities to see them here."}),n.jsx(Qt,{permission:"CREATE_CPD",children:n.jsx(se,{onClick:()=>f("/cpd"),children:"Add Your First Activity"})})]})})]})]})})]})};/*!
* sweetalert2 v11.22.2
* Released under the MIT License.
*/function cS(t,e,s){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:s;throw new TypeError("Private element is not present on this object")}function qD(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Z1(t,e){return t.get(cS(t,e))}function PD(t,e,s){qD(t,e),e.set(t,s)}function ID(t,e,s){return t.set(cS(t,e),s),s}const $D=100,Qe={},UD=()=>{Qe.previousActiveElement instanceof HTMLElement?(Qe.previousActiveElement.focus(),Qe.previousActiveElement=null):document.body&&document.body.focus()},BD=t=>new Promise(e=>{if(!t)return e();const s=window.scrollX,r=window.scrollY;Qe.restoreFocusTimeout=setTimeout(()=>{UD(),e()},$D),window.scrollTo(s,r)}),uS="swal2-",zD=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],pe=zD.reduce((t,e)=>(t[e]=uS+e,t),{}),FD=["success","warning","info","question","error"],tf=FD.reduce((t,e)=>(t[e]=uS+e,t),{}),dS="SweetAlert2:",ly=t=>t.charAt(0).toUpperCase()+t.slice(1),hr=t=>{console.warn(`${dS} ${typeof t=="object"?t.join(" "):t}`)},fo=t=>{console.error(`${dS} ${t}`)},Y1=[],HD=t=>{Y1.includes(t)||(Y1.push(t),hr(t))},hS=(t,e=null)=>{HD(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},Mf=t=>typeof t=="function"?t():t,oy=t=>t&&typeof t.toPromise=="function",Gd=t=>oy(t)?t.toPromise():Promise.resolve(t),cy=t=>t&&Promise.resolve(t)===t,mr=()=>document.body.querySelector(`.${pe.container}`),Zd=t=>{const e=mr();return e?e.querySelector(t):null},Fr=t=>Zd(`.${t}`),Nt=()=>Fr(pe.popup),Kc=()=>Fr(pe.icon),VD=()=>Fr(pe["icon-content"]),mS=()=>Fr(pe.title),uy=()=>Fr(pe["html-container"]),fS=()=>Fr(pe.image),dy=()=>Fr(pe["progress-steps"]),Df=()=>Fr(pe["validation-message"]),pa=()=>Zd(`.${pe.actions} .${pe.confirm}`),Wc=()=>Zd(`.${pe.actions} .${pe.cancel}`),po=()=>Zd(`.${pe.actions} .${pe.deny}`),GD=()=>Fr(pe["input-label"]),Qc=()=>Zd(`.${pe.loader}`),Yd=()=>Fr(pe.actions),pS=()=>Fr(pe.footer),Lf=()=>Fr(pe["timer-progress-bar"]),hy=()=>Fr(pe.close),ZD=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,my=()=>{const t=Nt();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),s=Array.from(e).sort((o,u)=>{const h=parseInt(o.getAttribute("tabindex")||"0"),m=parseInt(u.getAttribute("tabindex")||"0");return h>m?1:h<m?-1:0}),r=t.querySelectorAll(ZD),i=Array.from(r).filter(o=>o.getAttribute("tabindex")!=="-1");return[...new Set(s.concat(i))].filter(o=>Nr(o))},fy=()=>Xa(document.body,pe.shown)&&!Xa(document.body,pe["toast-shown"])&&!Xa(document.body,pe["no-backdrop"]),qf=()=>{const t=Nt();return t?Xa(t,pe.toast):!1},YD=()=>{const t=Nt();return t?t.hasAttribute("data-loading"):!1},Hr=(t,e)=>{if(t.textContent="",e){const r=new DOMParser().parseFromString(e,"text/html"),i=r.querySelector("head");i&&Array.from(i.childNodes).forEach(u=>{t.appendChild(u)});const o=r.querySelector("body");o&&Array.from(o.childNodes).forEach(u=>{u instanceof HTMLVideoElement||u instanceof HTMLAudioElement?t.appendChild(u.cloneNode(!0)):t.appendChild(u)})}},Xa=(t,e)=>{if(!e)return!1;const s=e.split(/\s+/);for(let r=0;r<s.length;r++)if(!t.classList.contains(s[r]))return!1;return!0},KD=(t,e)=>{Array.from(t.classList).forEach(s=>{!Object.values(pe).includes(s)&&!Object.values(tf).includes(s)&&!Object.values(e.showClass||{}).includes(s)&&t.classList.remove(s)})},zr=(t,e,s)=>{if(KD(t,e),!e.customClass)return;const r=e.customClass[s];if(r){if(typeof r!="string"&&!r.forEach){hr(`Invalid type of customClass.${s}! Expected string or iterable object, got "${typeof r}"`);return}Ct(t,r)}},Pf=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${pe.popup} > .${pe[e]}`);case"checkbox":return t.querySelector(`.${pe.popup} > .${pe.checkbox} input`);case"radio":return t.querySelector(`.${pe.popup} > .${pe.radio} input:checked`)||t.querySelector(`.${pe.popup} > .${pe.radio} input:first-child`);case"range":return t.querySelector(`.${pe.popup} > .${pe.range} input`);default:return t.querySelector(`.${pe.popup} > .${pe.input}`)}},gS=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},xS=(t,e,s)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(r=>{Array.isArray(t)?t.forEach(i=>{s?i.classList.add(r):i.classList.remove(r)}):s?t.classList.add(r):t.classList.remove(r)}))},Ct=(t,e)=>{xS(t,e,!0)},dn=(t,e)=>{xS(t,e,!1)},Wi=(t,e)=>{const s=Array.from(t.children);for(let r=0;r<s.length;r++){const i=s[r];if(i instanceof HTMLElement&&Xa(i,e))return i}},Wl=(t,e,s)=>{s===`${parseInt(s)}`&&(s=parseInt(s)),s||parseInt(s)===0?t.style.setProperty(e,typeof s=="number"?`${s}px`:s):t.style.removeProperty(e)},Vs=(t,e="flex")=>{t&&(t.style.display=e)},ir=t=>{t&&(t.style.display="none")},py=(t,e="block")=>{t&&new MutationObserver(()=>{Kd(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},K1=(t,e,s,r)=>{const i=t.querySelector(e);i&&i.style.setProperty(s,r)},Kd=(t,e,s="flex")=>{e?Vs(t,s):ir(t)},Nr=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),WD=()=>!Nr(pa())&&!Nr(po())&&!Nr(Wc()),ix=t=>t.scrollHeight>t.clientHeight,QD=(t,e)=>{let s=t;for(;s&&s!==e;){if(ix(s))return!0;s=s.parentElement}return!1},yS=t=>{const e=window.getComputedStyle(t),s=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return s>0||r>0},gy=(t,e=!1)=>{const s=Lf();s&&Nr(s)&&(e&&(s.style.transition="none",s.style.width="100%"),setTimeout(()=>{s.style.transition=`width ${t/1e3}s linear`,s.style.width="0%"},10))},XD=()=>{const t=Lf();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const s=parseInt(window.getComputedStyle(t).width),r=e/s*100;t.style.width=`${r}%`},JD=()=>typeof window>"u"||typeof document>"u",eL=`
 <div aria-labelledby="${pe.title}" aria-describedby="${pe["html-container"]}" class="${pe.popup}" tabindex="-1">
   <button type="button" class="${pe.close}"></button>
   <ul class="${pe["progress-steps"]}"></ul>
   <div class="${pe.icon}"></div>
   <img class="${pe.image}" />
   <h2 class="${pe.title}" id="${pe.title}"></h2>
   <div class="${pe["html-container"]}" id="${pe["html-container"]}"></div>
   <input class="${pe.input}" id="${pe.input}" />
   <input type="file" class="${pe.file}" />
   <div class="${pe.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${pe.select}" id="${pe.select}"></select>
   <div class="${pe.radio}"></div>
   <label class="${pe.checkbox}">
     <input type="checkbox" id="${pe.checkbox}" />
     <span class="${pe.label}"></span>
   </label>
   <textarea class="${pe.textarea}" id="${pe.textarea}"></textarea>
   <div class="${pe["validation-message"]}" id="${pe["validation-message"]}"></div>
   <div class="${pe.actions}">
     <div class="${pe.loader}"></div>
     <button type="button" class="${pe.confirm}"></button>
     <button type="button" class="${pe.deny}"></button>
     <button type="button" class="${pe.cancel}"></button>
   </div>
   <div class="${pe.footer}"></div>
   <div class="${pe["timer-progress-bar-container"]}">
     <div class="${pe["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),tL=()=>{const t=mr();return t?(t.remove(),dn([document.documentElement,document.body],[pe["no-backdrop"],pe["toast-shown"],pe["has-column"]]),!0):!1},Bl=()=>{Qe.currentInstance.resetValidationMessage()},sL=()=>{const t=Nt(),e=Wi(t,pe.input),s=Wi(t,pe.file),r=t.querySelector(`.${pe.range} input`),i=t.querySelector(`.${pe.range} output`),o=Wi(t,pe.select),u=t.querySelector(`.${pe.checkbox} input`),h=Wi(t,pe.textarea);e.oninput=Bl,s.onchange=Bl,o.onchange=Bl,u.onchange=Bl,h.oninput=Bl,r.oninput=()=>{Bl(),i.value=r.value},r.onchange=()=>{Bl(),i.value=r.value}},rL=t=>typeof t=="string"?document.querySelector(t):t,nL=t=>{const e=Nt();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},aL=t=>{window.getComputedStyle(t).direction==="rtl"&&Ct(mr(),pe.rtl)},iL=t=>{const e=tL();if(JD()){fo("SweetAlert2 requires document to initialize");return}const s=document.createElement("div");s.className=pe.container,e&&Ct(s,pe["no-transition"]),Hr(s,eL),s.dataset.swal2Theme=t.theme;const r=rL(t.target);r.appendChild(s),t.topLayer&&(s.setAttribute("popover",""),s.showPopover()),nL(t),aL(r),sL()},xy=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?lL(t,e):t&&Hr(e,t)},lL=(t,e)=>{t.jquery?oL(e,t):Hr(e,t.toString())},oL=(t,e)=>{if(t.textContent="",0 in e)for(let s=0;s in e;s++)t.appendChild(e[s].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},cL=(t,e)=>{const s=Yd(),r=Qc();!s||!r||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?ir(s):Vs(s),zr(s,e,"actions"),uL(s,r,e),Hr(r,e.loaderHtml||""),zr(r,e,"loader"))};function uL(t,e,s){const r=pa(),i=po(),o=Wc();!r||!i||!o||(h0(r,"confirm",s),h0(i,"deny",s),h0(o,"cancel",s),dL(r,i,o,s),s.reverseButtons&&(s.toast?(t.insertBefore(o,r),t.insertBefore(i,r)):(t.insertBefore(o,e),t.insertBefore(i,e),t.insertBefore(r,e))))}function dL(t,e,s,r){if(!r.buttonsStyling){dn([t,e,s],pe.styled);return}Ct([t,e,s],pe.styled),r.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&s.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),d0(t),d0(e),d0(s)}function d0(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const s=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${s}`))}function h0(t,e,s){const r=ly(e);Kd(t,s[`show${r}Button`],"inline-block"),Hr(t,s[`${e}ButtonText`]||""),t.setAttribute("aria-label",s[`${e}ButtonAriaLabel`]||""),t.className=pe[e],zr(t,s,`${e}Button`)}const hL=(t,e)=>{const s=hy();s&&(Hr(s,e.closeButtonHtml||""),zr(s,e,"closeButton"),Kd(s,e.showCloseButton),s.setAttribute("aria-label",e.closeButtonAriaLabel||""))},mL=(t,e)=>{const s=mr();s&&(fL(s,e.backdrop),pL(s,e.position),gL(s,e.grow),zr(s,e,"container"))};function fL(t,e){typeof e=="string"?t.style.background=e:e||Ct([document.documentElement,document.body],pe["no-backdrop"])}function pL(t,e){e&&(e in pe?Ct(t,pe[e]):(hr('The "position" parameter is not valid, defaulting to "center"'),Ct(t,pe.center)))}function gL(t,e){e&&Ct(t,pe[`grow-${e}`])}var Ht={innerParams:new WeakMap,domCache:new WeakMap};const xL=["input","file","range","select","radio","checkbox","textarea"],yL=(t,e)=>{const s=Nt();if(!s)return;const r=Ht.innerParams.get(t),i=!r||e.input!==r.input;xL.forEach(o=>{const u=Wi(s,pe[o]);u&&(wL(o,e.inputAttributes),u.className=pe[o],i&&ir(u))}),e.input&&(i&&bL(e),_L(e))},bL=t=>{if(!t.input)return;if(!ms[t.input]){fo(`Unexpected type of input! Expected ${Object.keys(ms).join(" | ")}, got "${t.input}"`);return}const e=bS(t.input);if(!e)return;const s=ms[t.input](e,t);Vs(e),t.inputAutoFocus&&setTimeout(()=>{gS(s)})},vL=t=>{for(let e=0;e<t.attributes.length;e++){const s=t.attributes[e].name;["id","type","value","style"].includes(s)||t.removeAttribute(s)}},wL=(t,e)=>{const s=Nt();if(!s)return;const r=Pf(s,t);if(r){vL(r);for(const i in e)r.setAttribute(i,e[i])}},_L=t=>{if(!t.input)return;const e=bS(t.input);e&&zr(e,t,"input")},yy=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},Wd=(t,e,s)=>{if(s.inputLabel){const r=document.createElement("label"),i=pe["input-label"];r.setAttribute("for",t.id),r.className=i,typeof s.customClass=="object"&&Ct(r,s.customClass.inputLabel),r.innerText=s.inputLabel,e.insertAdjacentElement("beforebegin",r)}},bS=t=>{const e=Nt();if(e)return Wi(e,pe[t]||pe.input)},sf=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:cy(e)||hr(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},ms={};ms.text=ms.email=ms.password=ms.number=ms.tel=ms.url=ms.search=ms.date=ms["datetime-local"]=ms.time=ms.week=ms.month=(t,e)=>(sf(t,e.inputValue),Wd(t,t,e),yy(t,e),t.type=e.input,t);ms.file=(t,e)=>(Wd(t,t,e),yy(t,e),t);ms.range=(t,e)=>{const s=t.querySelector("input"),r=t.querySelector("output");return sf(s,e.inputValue),s.type=e.input,sf(r,e.inputValue),Wd(s,t,e),t};ms.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const s=document.createElement("option");Hr(s,e.inputPlaceholder),s.value="",s.disabled=!0,s.selected=!0,t.appendChild(s)}return Wd(t,t,e),t};ms.radio=t=>(t.textContent="",t);ms.checkbox=(t,e)=>{const s=Pf(Nt(),"checkbox");s.value="1",s.checked=!!e.inputValue;const r=t.querySelector("span");return Hr(r,e.inputPlaceholder||e.inputLabel),s};ms.textarea=(t,e)=>{sf(t,e.inputValue),yy(t,e),Wd(t,t,e);const s=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(Nt()).width),i=()=>{if(!document.body.contains(t))return;const o=t.offsetWidth+s(t);o>r?Nt().style.width=`${o}px`:Wl(Nt(),"width",e.width)};new MutationObserver(i).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const jL=(t,e)=>{const s=uy();s&&(py(s),zr(s,e,"htmlContainer"),e.html?(xy(e.html,s),Vs(s,"block")):e.text?(s.textContent=e.text,Vs(s,"block")):ir(s),yL(t,e))},NL=(t,e)=>{const s=pS();s&&(py(s),Kd(s,e.footer,"block"),e.footer&&xy(e.footer,s),zr(s,e,"footer"))},SL=(t,e)=>{const s=Ht.innerParams.get(t),r=Kc();if(!r)return;if(s&&e.icon===s.icon){Q1(r,e),W1(r,e);return}if(!e.icon&&!e.iconHtml){ir(r);return}if(e.icon&&Object.keys(tf).indexOf(e.icon)===-1){fo(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),ir(r);return}Vs(r),Q1(r,e),W1(r,e),Ct(r,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",vS)},W1=(t,e)=>{for(const[s,r]of Object.entries(tf))e.icon!==s&&dn(t,r);Ct(t,e.icon&&tf[e.icon]),AL(t,e),vS(),zr(t,e,"icon")},vS=()=>{const t=Nt();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),s=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<s.length;r++)s[r].style.backgroundColor=e},EL=t=>`
  ${t.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${t.animation?'<div class="swal2-success-fix"></div>':""}
  ${t.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,CL=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Q1=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let s=t.innerHTML,r="";e.iconHtml?r=X1(e.iconHtml):e.icon==="success"?(r=EL(e),s=s.replace(/ style=".*?"/g,"")):e.icon==="error"?r=CL:e.icon&&(r=X1({question:"?",warning:"!",info:"i"}[e.icon])),s.trim()!==r.trim()&&Hr(t,r)},AL=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const s of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])K1(t,s,"background-color",e.iconColor);K1(t,".swal2-success-ring","border-color",e.iconColor)}},X1=t=>`<div class="${pe["icon-content"]}">${t}</div>`,kL=(t,e)=>{const s=fS();if(s){if(!e.imageUrl){ir(s);return}Vs(s,""),s.setAttribute("src",e.imageUrl),s.setAttribute("alt",e.imageAlt||""),Wl(s,"width",e.imageWidth),Wl(s,"height",e.imageHeight),s.className=pe.image,zr(s,e,"image")}};let by=!1,wS=0,_S=0,jS=0,NS=0;const TL=t=>{t.addEventListener("mousedown",rf),document.body.addEventListener("mousemove",nf),t.addEventListener("mouseup",af),t.addEventListener("touchstart",rf),document.body.addEventListener("touchmove",nf),t.addEventListener("touchend",af)},OL=t=>{t.removeEventListener("mousedown",rf),document.body.removeEventListener("mousemove",nf),t.removeEventListener("mouseup",af),t.removeEventListener("touchstart",rf),document.body.removeEventListener("touchmove",nf),t.removeEventListener("touchend",af)},rf=t=>{const e=Nt();if(t.target===e||Kc().contains(t.target)){by=!0;const s=SS(t);wS=s.clientX,_S=s.clientY,jS=parseInt(e.style.insetInlineStart)||0,NS=parseInt(e.style.insetBlockStart)||0,Ct(e,"swal2-dragging")}},nf=t=>{const e=Nt();if(by){let{clientX:s,clientY:r}=SS(t);e.style.insetInlineStart=`${jS+(s-wS)}px`,e.style.insetBlockStart=`${NS+(r-_S)}px`}},af=()=>{const t=Nt();by=!1,dn(t,"swal2-dragging")},SS=t=>{let e=0,s=0;return t.type.startsWith("mouse")?(e=t.clientX,s=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,s=t.touches[0].clientY),{clientX:e,clientY:s}},RL=(t,e)=>{const s=mr(),r=Nt();if(!(!s||!r)){if(e.toast){Wl(s,"width",e.width),r.style.width="100%";const i=Qc();i&&r.insertBefore(i,Kc())}else Wl(r,"width",e.width);Wl(r,"padding",e.padding),e.color&&(r.style.color=e.color),e.background&&(r.style.background=e.background),ir(Df()),ML(r,e),e.draggable&&!e.toast?(Ct(r,pe.draggable),TL(r)):(dn(r,pe.draggable),OL(r))}},ML=(t,e)=>{const s=e.showClass||{};t.className=`${pe.popup} ${Nr(t)?s.popup:""}`,e.toast?(Ct([document.documentElement,document.body],pe["toast-shown"]),Ct(t,pe.toast)):Ct(t,pe.modal),zr(t,e,"popup"),typeof e.customClass=="string"&&Ct(t,e.customClass),e.icon&&Ct(t,pe[`icon-${e.icon}`])},DL=(t,e)=>{const s=dy();if(!s)return;const{progressSteps:r,currentProgressStep:i}=e;if(!r||r.length===0||i===void 0){ir(s);return}Vs(s),s.textContent="",i>=r.length&&hr("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((o,u)=>{const h=LL(o);if(s.appendChild(h),u===i&&Ct(h,pe["active-progress-step"]),u!==r.length-1){const m=qL(e);s.appendChild(m)}})},LL=t=>{const e=document.createElement("li");return Ct(e,pe["progress-step"]),Hr(e,t),e},qL=t=>{const e=document.createElement("li");return Ct(e,pe["progress-step-line"]),t.progressStepsDistance&&Wl(e,"width",t.progressStepsDistance),e},PL=(t,e)=>{const s=mS();s&&(py(s),Kd(s,e.title||e.titleText,"block"),e.title&&xy(e.title,s),e.titleText&&(s.innerText=e.titleText),zr(s,e,"title"))},ES=(t,e)=>{RL(t,e),mL(t,e),DL(t,e),SL(t,e),kL(t,e),PL(t,e),hL(t,e),jL(t,e),cL(t,e),NL(t,e);const s=Nt();typeof e.didRender=="function"&&s&&e.didRender(s),Qe.eventEmitter.emit("didRender",s)},IL=()=>Nr(Nt()),CS=()=>{var t;return(t=pa())===null||t===void 0?void 0:t.click()},$L=()=>{var t;return(t=po())===null||t===void 0?void 0:t.click()},UL=()=>{var t;return(t=Wc())===null||t===void 0?void 0:t.click()},Xc=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),AS=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},BL=(t,e,s)=>{AS(t),e.toast||(t.keydownHandler=r=>FL(e,r,s),t.keydownTarget=e.keydownListenerCapture?window:Nt(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},lx=(t,e)=>{var s;const r=my();if(r.length){t=t+e,t===-2&&(t=r.length-1),t===r.length?t=0:t===-1&&(t=r.length-1),r[t].focus();return}(s=Nt())===null||s===void 0||s.focus()},kS=["ArrowRight","ArrowDown"],zL=["ArrowLeft","ArrowUp"],FL=(t,e,s)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?HL(e,t):e.key==="Tab"?VL(e):[...kS,...zL].includes(e.key)?GL(e.key):e.key==="Escape"&&ZL(e,t,s)))},HL=(t,e)=>{if(!Mf(e.allowEnterKey))return;const s=Pf(Nt(),e.input);if(t.target&&s&&t.target instanceof HTMLElement&&t.target.outerHTML===s.outerHTML){if(["textarea","file"].includes(e.input))return;CS(),t.preventDefault()}},VL=t=>{const e=t.target,s=my();let r=-1;for(let i=0;i<s.length;i++)if(e===s[i]){r=i;break}t.shiftKey?lx(r,-1):lx(r,1),t.stopPropagation(),t.preventDefault()},GL=t=>{const e=Yd(),s=pa(),r=po(),i=Wc();if(!e||!s||!r||!i)return;const o=[s,r,i];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const u=kS.includes(t)?"nextElementSibling":"previousElementSibling";let h=document.activeElement;if(h){for(let m=0;m<e.children.length;m++){if(h=h[u],!h)return;if(h instanceof HTMLButtonElement&&Nr(h))break}h instanceof HTMLButtonElement&&h.focus()}},ZL=(t,e,s)=>{t.preventDefault(),Mf(e.allowEscapeKey)&&s(Xc.esc)};var Ic={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const YL=()=>{const t=mr();Array.from(document.body.children).forEach(s=>{s.contains(t)||(s.hasAttribute("aria-hidden")&&s.setAttribute("data-previous-aria-hidden",s.getAttribute("aria-hidden")||""),s.setAttribute("aria-hidden","true"))})},TS=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},OS=typeof window<"u"&&!!window.GestureEvent,KL=()=>{if(OS&&!Xa(document.body,pe.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,Ct(document.body,pe.iosfix),WL()}},WL=()=>{const t=mr();if(!t)return;let e;t.ontouchstart=s=>{e=QL(s)},t.ontouchmove=s=>{e&&(s.preventDefault(),s.stopPropagation())}},QL=t=>{const e=t.target,s=mr(),r=uy();return!s||!r||XL(t)||JL(t)?!1:e===s||!ix(s)&&e instanceof HTMLElement&&!QD(e,r)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(ix(r)&&r.contains(e))},XL=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",JL=t=>t.touches&&t.touches.length>1,e8=()=>{if(Xa(document.body,pe.iosfix)){const t=parseInt(document.body.style.top,10);dn(document.body,pe.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},t8=()=>{const t=document.createElement("div");t.className=pe["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let Rc=null;const s8=t=>{Rc===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(Rc=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Rc+t8()}px`)},r8=()=>{Rc!==null&&(document.body.style.paddingRight=`${Rc}px`,Rc=null)};function RS(t,e,s,r){qf()?J1(t,r):(BD(s).then(()=>J1(t,r)),AS(Qe)),OS?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),fy()&&(r8(),e8(),TS()),n8()}function n8(){dn([document.documentElement,document.body],[pe.shown,pe["height-auto"],pe["no-backdrop"],pe["toast-shown"]])}function Qi(t){t=i8(t);const e=Ic.swalPromiseResolve.get(this),s=a8(this);this.isAwaitingPromise?t.isDismissed||(Qd(this),e(t)):s&&e(t)}const a8=t=>{const e=Nt();if(!e)return!1;const s=Ht.innerParams.get(t);if(!s||Xa(e,s.hideClass.popup))return!1;dn(e,s.showClass.popup),Ct(e,s.hideClass.popup);const r=mr();return dn(r,s.showClass.backdrop),Ct(r,s.hideClass.backdrop),l8(t,e,s),!0};function MS(t){const e=Ic.swalPromiseReject.get(this);Qd(this),e&&e(t)}const Qd=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,Ht.innerParams.get(t)||t._destroy())},i8=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),l8=(t,e,s)=>{var r;const i=mr(),o=yS(e);typeof s.willClose=="function"&&s.willClose(e),(r=Qe.eventEmitter)===null||r===void 0||r.emit("willClose",e),o?o8(t,e,i,s.returnFocus,s.didClose):RS(t,i,s.returnFocus,s.didClose)},o8=(t,e,s,r,i)=>{Qe.swalCloseEventFinishedCallback=RS.bind(null,t,s,r,i);const o=function(u){if(u.target===e){var h;(h=Qe.swalCloseEventFinishedCallback)===null||h===void 0||h.call(Qe),delete Qe.swalCloseEventFinishedCallback,e.removeEventListener("animationend",o),e.removeEventListener("transitionend",o)}};e.addEventListener("animationend",o),e.addEventListener("transitionend",o)},J1=(t,e)=>{setTimeout(()=>{var s;typeof e=="function"&&e.bind(t.params)(),(s=Qe.eventEmitter)===null||s===void 0||s.emit("didClose"),t._destroy&&t._destroy()})},$c=t=>{let e=Nt();if(e||new Et,e=Nt(),!e)return;const s=Qc();qf()?ir(Kc()):c8(e,t),Vs(s),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},c8=(t,e)=>{const s=Yd(),r=Qc();!s||!r||(!e&&Nr(pa())&&(e=pa()),Vs(s),e&&(ir(e),r.setAttribute("data-button-to-replace",e.className),s.insertBefore(r,e)),Ct([t,s],pe.loading))},u8=(t,e)=>{e.input==="select"||e.input==="radio"?p8(t,e):["text","email","number","tel","textarea"].some(s=>s===e.input)&&(oy(e.inputValue)||cy(e.inputValue))&&($c(pa()),g8(t,e))},d8=(t,e)=>{const s=t.getInput();if(!s)return null;switch(e.input){case"checkbox":return h8(s);case"radio":return m8(s);case"file":return f8(s);default:return e.inputAutoTrim?s.value.trim():s.value}},h8=t=>t.checked?1:0,m8=t=>t.checked?t.value:null,f8=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,p8=(t,e)=>{const s=Nt();if(!s)return;const r=i=>{e.input==="select"?x8(s,lf(i),e):e.input==="radio"&&y8(s,lf(i),e)};oy(e.inputOptions)||cy(e.inputOptions)?($c(pa()),Gd(e.inputOptions).then(i=>{t.hideLoading(),r(i)})):typeof e.inputOptions=="object"?r(e.inputOptions):fo(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},g8=(t,e)=>{const s=t.getInput();s&&(ir(s),Gd(e.inputValue).then(r=>{s.value=e.input==="number"?`${parseFloat(r)||0}`:`${r}`,Vs(s),s.focus(),t.hideLoading()}).catch(r=>{fo(`Error in inputValue promise: ${r}`),s.value="",Vs(s),s.focus(),t.hideLoading()}))};function x8(t,e,s){const r=Wi(t,pe.select);if(!r)return;const i=(o,u,h)=>{const m=document.createElement("option");m.value=h,Hr(m,u),m.selected=DS(h,s.inputValue),o.appendChild(m)};e.forEach(o=>{const u=o[0],h=o[1];if(Array.isArray(h)){const m=document.createElement("optgroup");m.label=u,m.disabled=!1,r.appendChild(m),h.forEach(f=>i(m,f[1],f[0]))}else i(r,h,u)}),r.focus()}function y8(t,e,s){const r=Wi(t,pe.radio);if(!r)return;e.forEach(o=>{const u=o[0],h=o[1],m=document.createElement("input"),f=document.createElement("label");m.type="radio",m.name=pe.radio,m.value=u,DS(u,s.inputValue)&&(m.checked=!0);const p=document.createElement("span");Hr(p,h),p.className=pe.label,f.appendChild(m),f.appendChild(p),r.appendChild(f)});const i=r.querySelectorAll("input");i.length&&i[0].focus()}const lf=t=>{const e=[];return t instanceof Map?t.forEach((s,r)=>{let i=s;typeof i=="object"&&(i=lf(i)),e.push([r,i])}):Object.keys(t).forEach(s=>{let r=t[s];typeof r=="object"&&(r=lf(r)),e.push([s,r])}),e},DS=(t,e)=>!!e&&e.toString()===t.toString(),b8=t=>{const e=Ht.innerParams.get(t);t.disableButtons(),e.input?LS(t,"confirm"):wy(t,!0)},v8=t=>{const e=Ht.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?LS(t,"deny"):vy(t,!1)},w8=(t,e)=>{t.disableButtons(),e(Xc.cancel)},LS=(t,e)=>{const s=Ht.innerParams.get(t);if(!s.input){fo(`The "input" parameter is needed to be set when using returnInputValueOn${ly(e)}`);return}const r=t.getInput(),i=d8(t,s);s.inputValidator?_8(t,i,e):r&&!r.checkValidity()?(t.enableButtons(),t.showValidationMessage(s.validationMessage||r.validationMessage)):e==="deny"?vy(t,i):wy(t,i)},_8=(t,e,s)=>{const r=Ht.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>Gd(r.inputValidator(e,r.validationMessage))).then(o=>{t.enableButtons(),t.enableInput(),o?t.showValidationMessage(o):s==="deny"?vy(t,e):wy(t,e)})},vy=(t,e)=>{const s=Ht.innerParams.get(t||void 0);s.showLoaderOnDeny&&$c(po()),s.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>Gd(s.preDeny(e,s.validationMessage))).then(i=>{i===!1?(t.hideLoading(),Qd(t)):t.close({isDenied:!0,value:typeof i>"u"?e:i})}).catch(i=>qS(t||void 0,i))):t.close({isDenied:!0,value:e})},ej=(t,e)=>{t.close({isConfirmed:!0,value:e})},qS=(t,e)=>{t.rejectPromise(e)},wy=(t,e)=>{const s=Ht.innerParams.get(t||void 0);s.showLoaderOnConfirm&&$c(),s.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>Gd(s.preConfirm(e,s.validationMessage))).then(i=>{Nr(Df())||i===!1?(t.hideLoading(),Qd(t)):ej(t,typeof i>"u"?e:i)}).catch(i=>qS(t||void 0,i))):ej(t,e)};function of(){const t=Ht.innerParams.get(this);if(!t)return;const e=Ht.domCache.get(this);ir(e.loader),qf()?t.icon&&Vs(Kc()):j8(e),dn([e.popup,e.actions],pe.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const j8=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?Vs(e[0],"inline-block"):WD()&&ir(t.actions)};function PS(){const t=Ht.innerParams.get(this),e=Ht.domCache.get(this);return e?Pf(e.popup,t.input):null}function IS(t,e,s){const r=Ht.domCache.get(t);e.forEach(i=>{r[i].disabled=s})}function $S(t,e){const s=Nt();if(!(!s||!t))if(t.type==="radio"){const r=s.querySelectorAll(`[name="${pe.radio}"]`);for(let i=0;i<r.length;i++)r[i].disabled=e}else t.disabled=e}function US(){IS(this,["confirmButton","denyButton","cancelButton"],!1)}function BS(){IS(this,["confirmButton","denyButton","cancelButton"],!0)}function zS(){$S(this.getInput(),!1)}function FS(){$S(this.getInput(),!0)}function HS(t){const e=Ht.domCache.get(this),s=Ht.innerParams.get(this);Hr(e.validationMessage,t),e.validationMessage.className=pe["validation-message"],s.customClass&&s.customClass.validationMessage&&Ct(e.validationMessage,s.customClass.validationMessage),Vs(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",pe["validation-message"]),gS(r),Ct(r,pe.inputerror))}function VS(){const t=Ht.domCache.get(this);t.validationMessage&&ir(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),dn(e,pe.inputerror))}const Mc={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},N8=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],S8={allowEnterKey:void 0},E8=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],GS=t=>Object.prototype.hasOwnProperty.call(Mc,t),ZS=t=>N8.indexOf(t)!==-1,YS=t=>S8[t],C8=t=>{GS(t)||hr(`Unknown parameter "${t}"`)},A8=t=>{E8.includes(t)&&hr(`The parameter "${t}" is incompatible with toasts`)},k8=t=>{const e=YS(t);e&&hS(t,e)},KS=t=>{t.backdrop===!1&&t.allowOutsideClick&&hr('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&hr(`Invalid theme "${t.theme}"`);for(const e in t)C8(e),t.toast&&A8(e),k8(e)};function WS(t){const e=mr(),s=Nt(),r=Ht.innerParams.get(this);if(!s||Xa(s,r.hideClass.popup)){hr("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const i=T8(t),o=Object.assign({},r,i);KS(o),e.dataset.swal2Theme=o.theme,ES(this,o),Ht.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const T8=t=>{const e={};return Object.keys(t).forEach(s=>{ZS(s)?e[s]=t[s]:hr(`Invalid parameter to update: ${s}`)}),e};function QS(){const t=Ht.domCache.get(this),e=Ht.innerParams.get(this);if(!e){XS(this);return}t.popup&&Qe.swalCloseEventFinishedCallback&&(Qe.swalCloseEventFinishedCallback(),delete Qe.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),Qe.eventEmitter.emit("didDestroy"),O8(this)}const O8=t=>{XS(t),delete t.params,delete Qe.keydownHandler,delete Qe.keydownTarget,delete Qe.currentInstance},XS=t=>{t.isAwaitingPromise?(m0(Ht,t),t.isAwaitingPromise=!0):(m0(Ic,t),m0(Ht,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},m0=(t,e)=>{for(const s in t)t[s].delete(e)};var R8=Object.freeze({__proto__:null,_destroy:QS,close:Qi,closeModal:Qi,closePopup:Qi,closeToast:Qi,disableButtons:BS,disableInput:FS,disableLoading:of,enableButtons:US,enableInput:zS,getInput:PS,handleAwaitingPromise:Qd,hideLoading:of,rejectPromise:MS,resetValidationMessage:VS,showValidationMessage:HS,update:WS});const M8=(t,e,s)=>{t.toast?D8(t,e,s):(q8(e),P8(e),I8(t,e,s))},D8=(t,e,s)=>{e.popup.onclick=()=>{t&&(L8(t)||t.timer||t.input)||s(Xc.close)}},L8=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let cf=!1;const q8=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(cf=!0)}}},P8=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(s){t.popup.onmouseup=()=>{},(s.target===t.popup||s.target instanceof HTMLElement&&t.popup.contains(s.target))&&(cf=!0)}}},I8=(t,e,s)=>{e.container.onclick=r=>{if(cf){cf=!1;return}r.target===e.container&&Mf(t.allowOutsideClick)&&s(Xc.backdrop)}},$8=t=>typeof t=="object"&&t.jquery,tj=t=>t instanceof Element||$8(t),U8=t=>{const e={};return typeof t[0]=="object"&&!tj(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((s,r)=>{const i=t[r];typeof i=="string"||tj(i)?e[s]=i:i!==void 0&&fo(`Unexpected type of ${s}! Expected "string" or "Element", got ${typeof i}`)}),e};function B8(...t){return new this(...t)}function z8(t){class e extends this{_main(r,i){return super._main(r,Object.assign({},t,i))}}return e}const F8=()=>Qe.timeout&&Qe.timeout.getTimerLeft(),JS=()=>{if(Qe.timeout)return XD(),Qe.timeout.stop()},eE=()=>{if(Qe.timeout){const t=Qe.timeout.start();return gy(t),t}},H8=()=>{const t=Qe.timeout;return t&&(t.running?JS():eE())},V8=t=>{if(Qe.timeout){const e=Qe.timeout.increase(t);return gy(e,!0),e}},G8=()=>!!(Qe.timeout&&Qe.timeout.isRunning());let sj=!1;const ox={};function Z8(t="data-swal-template"){ox[t]=this,sj||(document.body.addEventListener("click",Y8),sj=!0)}const Y8=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const s in ox){const r=e.getAttribute(s);if(r){ox[s].fire({template:r});return}}};let K8=class{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,s){const r=this._getHandlersByEventName(e);r.includes(s)||r.push(s)}once(e,s){const r=(...i)=>{this.removeListener(e,r),s.apply(this,i)};this.on(e,r)}emit(e,...s){this._getHandlersByEventName(e).forEach(r=>{try{r.apply(this,s)}catch(i){console.error(i)}})}removeListener(e,s){const r=this._getHandlersByEventName(e),i=r.indexOf(s);i>-1&&r.splice(i,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}};Qe.eventEmitter=new K8;const W8=(t,e)=>{Qe.eventEmitter.on(t,e)},Q8=(t,e)=>{Qe.eventEmitter.once(t,e)},X8=(t,e)=>{if(!t){Qe.eventEmitter.reset();return}e?Qe.eventEmitter.removeListener(t,e):Qe.eventEmitter.removeAllListeners(t)};var J8=Object.freeze({__proto__:null,argsToParams:U8,bindClickHandler:Z8,clickCancel:UL,clickConfirm:CS,clickDeny:$L,enableLoading:$c,fire:B8,getActions:Yd,getCancelButton:Wc,getCloseButton:hy,getConfirmButton:pa,getContainer:mr,getDenyButton:po,getFocusableElements:my,getFooter:pS,getHtmlContainer:uy,getIcon:Kc,getIconContent:VD,getImage:fS,getInputLabel:GD,getLoader:Qc,getPopup:Nt,getProgressSteps:dy,getTimerLeft:F8,getTimerProgressBar:Lf,getTitle:mS,getValidationMessage:Df,increaseTimer:V8,isDeprecatedParameter:YS,isLoading:YD,isTimerRunning:G8,isUpdatableParameter:ZS,isValidParameter:GS,isVisible:IL,mixin:z8,off:X8,on:W8,once:Q8,resumeTimer:eE,showLoading:$c,stopTimer:JS,toggleTimer:H8});class eq{constructor(e,s){this.callback=e,this.remaining=s,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const s=this.running;return s&&this.stop(),this.remaining+=e,s&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const tE=["swal-title","swal-html","swal-footer"],tq=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const s=e.content;return cq(s),Object.assign(sq(s),rq(s),nq(s),aq(s),iq(s),lq(s),oq(s,tE))},sq=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(r=>{eo(r,["name","value"]);const i=r.getAttribute("name"),o=r.getAttribute("value");!i||!o||(typeof Mc[i]=="boolean"?e[i]=o!=="false":typeof Mc[i]=="object"?e[i]=JSON.parse(o):e[i]=o)}),e},rq=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(r=>{const i=r.getAttribute("name"),o=r.getAttribute("value");!i||!o||(e[i]=new Function(`return ${o}`)())}),e},nq=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(r=>{eo(r,["type","color","aria-label"]);const i=r.getAttribute("type");!i||!["confirm","cancel","deny"].includes(i)||(e[`${i}ButtonText`]=r.innerHTML,e[`show${ly(i)}Button`]=!0,r.hasAttribute("color")&&(e[`${i}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(e[`${i}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),e},aq=t=>{const e={},s=t.querySelector("swal-image");return s&&(eo(s,["src","width","height","alt"]),s.hasAttribute("src")&&(e.imageUrl=s.getAttribute("src")||void 0),s.hasAttribute("width")&&(e.imageWidth=s.getAttribute("width")||void 0),s.hasAttribute("height")&&(e.imageHeight=s.getAttribute("height")||void 0),s.hasAttribute("alt")&&(e.imageAlt=s.getAttribute("alt")||void 0)),e},iq=t=>{const e={},s=t.querySelector("swal-icon");return s&&(eo(s,["type","color"]),s.hasAttribute("type")&&(e.icon=s.getAttribute("type")),s.hasAttribute("color")&&(e.iconColor=s.getAttribute("color")),e.iconHtml=s.innerHTML),e},lq=t=>{const e={},s=t.querySelector("swal-input");s&&(eo(s,["type","label","placeholder","value"]),e.input=s.getAttribute("type")||"text",s.hasAttribute("label")&&(e.inputLabel=s.getAttribute("label")),s.hasAttribute("placeholder")&&(e.inputPlaceholder=s.getAttribute("placeholder")),s.hasAttribute("value")&&(e.inputValue=s.getAttribute("value")));const r=Array.from(t.querySelectorAll("swal-input-option"));return r.length&&(e.inputOptions={},r.forEach(i=>{eo(i,["value"]);const o=i.getAttribute("value");if(!o)return;const u=i.innerHTML;e.inputOptions[o]=u})),e},oq=(t,e)=>{const s={};for(const r in e){const i=e[r],o=t.querySelector(i);o&&(eo(o,[]),s[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return s},cq=t=>{const e=tE.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(s=>{const r=s.tagName.toLowerCase();e.includes(r)||hr(`Unrecognized element <${r}>`)})},eo=(t,e)=>{Array.from(t.attributes).forEach(s=>{e.indexOf(s.name)===-1&&hr([`Unrecognized attribute "${s.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},sE=10,uq=t=>{const e=mr(),s=Nt();typeof t.willOpen=="function"&&t.willOpen(s),Qe.eventEmitter.emit("willOpen",s);const i=window.getComputedStyle(document.body).overflowY;mq(e,s,t),setTimeout(()=>{dq(e,s)},sE),fy()&&(hq(e,t.scrollbarPadding,i),YL()),!qf()&&!Qe.previousActiveElement&&(Qe.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(s)),Qe.eventEmitter.emit("didOpen",s),dn(e,pe["no-transition"])},uf=t=>{const e=Nt();if(t.target!==e)return;const s=mr();e.removeEventListener("animationend",uf),e.removeEventListener("transitionend",uf),s.style.overflowY="auto"},dq=(t,e)=>{yS(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",uf),e.addEventListener("transitionend",uf)):t.style.overflowY="auto"},hq=(t,e,s)=>{KL(),e&&s!=="hidden"&&s8(s),setTimeout(()=>{t.scrollTop=0})},mq=(t,e,s)=>{Ct(t,s.showClass.backdrop),s.animation?(e.style.setProperty("opacity","0","important"),Vs(e,"grid"),setTimeout(()=>{Ct(e,s.showClass.popup),e.style.removeProperty("opacity")},sE)):Vs(e,"grid"),Ct([document.documentElement,document.body],pe.shown),s.heightAuto&&s.backdrop&&!s.toast&&Ct([document.documentElement,document.body],pe["height-auto"])};var rj={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function fq(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=rj.email),t.input==="url"&&(t.inputValidator=rj.url))}function pq(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(hr('Target parameter is not valid, defaulting to "body"'),t.target="body")}function gq(t){fq(t),t.showLoaderOnConfirm&&!t.preConfirm&&hr(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),pq(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),iL(t)}let ua;var _m=new WeakMap;class xs{constructor(...e){if(PD(this,_m,void 0),typeof window>"u")return;ua=this;const s=Object.freeze(this.constructor.argsToParams(e));this.params=s,this.isAwaitingPromise=!1,ID(_m,this,this._main(ua.params))}_main(e,s={}){if(KS(Object.assign({},s,e)),Qe.currentInstance){const o=Ic.swalPromiseResolve.get(Qe.currentInstance),{isAwaitingPromise:u}=Qe.currentInstance;Qe.currentInstance._destroy(),u||o({isDismissed:!0}),fy()&&TS()}Qe.currentInstance=ua;const r=yq(e,s);gq(r),Object.freeze(r),Qe.timeout&&(Qe.timeout.stop(),delete Qe.timeout),clearTimeout(Qe.restoreFocusTimeout);const i=bq(ua);return ES(ua,r),Ht.innerParams.set(ua,r),xq(ua,i,r)}then(e){return Z1(_m,this).then(e)}finally(e){return Z1(_m,this).finally(e)}}const xq=(t,e,s)=>new Promise((r,i)=>{const o=u=>{t.close({isDismissed:!0,dismiss:u})};Ic.swalPromiseResolve.set(t,r),Ic.swalPromiseReject.set(t,i),e.confirmButton.onclick=()=>{b8(t)},e.denyButton.onclick=()=>{v8(t)},e.cancelButton.onclick=()=>{w8(t,o)},e.closeButton.onclick=()=>{o(Xc.close)},M8(s,e,o),BL(Qe,s,o),u8(t,s),uq(s),vq(Qe,s,o),wq(e,s),setTimeout(()=>{e.container.scrollTop=0})}),yq=(t,e)=>{const s=tq(t),r=Object.assign({},Mc,e,s,t);return r.showClass=Object.assign({},Mc.showClass,r.showClass),r.hideClass=Object.assign({},Mc.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},bq=t=>{const e={popup:Nt(),container:mr(),actions:Yd(),confirmButton:pa(),denyButton:po(),cancelButton:Wc(),loader:Qc(),closeButton:hy(),validationMessage:Df(),progressSteps:dy()};return Ht.domCache.set(t,e),e},vq=(t,e,s)=>{const r=Lf();ir(r),e.timer&&(t.timeout=new eq(()=>{s("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(Vs(r),zr(r,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&gy(e.timer)})))},wq=(t,e)=>{if(!e.toast){if(!Mf(e.allowEnterKey)){hS("allowEnterKey"),Nq();return}_q(t)||jq(t,e)||lx(-1,1)}},_q=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const s of e)if(s instanceof HTMLElement&&Nr(s))return s.focus(),!0;return!1},jq=(t,e)=>e.focusDeny&&Nr(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&Nr(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&Nr(t.confirmButton)?(t.confirmButton.focus(),!0):!1,Nq=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const t=new Date,e=localStorage.getItem("swal-initiation");e?(t.getTime()-Date.parse(e))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const s=document.createElement("audio");s.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",s.loop=!0,document.body.appendChild(s),setTimeout(()=>{s.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${t}`)}xs.prototype.disableButtons=BS;xs.prototype.enableButtons=US;xs.prototype.getInput=PS;xs.prototype.disableInput=FS;xs.prototype.enableInput=zS;xs.prototype.hideLoading=of;xs.prototype.disableLoading=of;xs.prototype.showValidationMessage=HS;xs.prototype.resetValidationMessage=VS;xs.prototype.close=Qi;xs.prototype.closePopup=Qi;xs.prototype.closeModal=Qi;xs.prototype.closeToast=Qi;xs.prototype.rejectPromise=MS;xs.prototype.update=WS;xs.prototype._destroy=QS;Object.assign(xs,J8);Object.keys(R8).forEach(t=>{xs[t]=function(...e){return ua&&ua[t]?ua[t](...e):null}});xs.DismissReason=Xc;xs.version="11.22.2";const Et=xs;Et.default=Et;typeof document<"u"&&function(t,e){var s=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(s),s.styleSheet)s.styleSheet.disabled||(s.styleSheet.cssText=e);else try{s.innerHTML=e}catch{s.innerText=e}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const zi={customClass:{popup:"rounded-lg shadow-xl",title:"text-lg font-semibold text-gray-900",htmlContainer:"text-sm text-gray-600",confirmButton:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",cancelButton:"bg-gray-300 hover:bg-gray-400 text-gray-700 font-medium py-2 px-4 rounded-md transition-colors mr-2",denyButton:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition-colors mr-2"},buttonsStyling:!1},df={success:(t,e)=>Et.fire({...zi,icon:"success",title:t,text:e,timer:3e3,timerProgressBar:!0,showConfirmButton:!1}),error:(t,e)=>Et.fire({...zi,icon:"error",title:t,text:e,confirmButtonText:"OK"}),warning:(t,e)=>Et.fire({...zi,icon:"warning",title:t,text:e,confirmButtonText:"OK"}),info:(t,e)=>Et.fire({...zi,icon:"info",title:t,text:e,confirmButtonText:"OK"}),confirm:(t,e,s="Yes",r="Cancel")=>Et.fire({...zi,icon:"question",title:t,text:e,showCancelButton:!0,confirmButtonText:s,cancelButtonText:r}),confirmDelete:t=>Et.fire({...zi,icon:"warning",title:"Are you sure?",text:`Do you want to delete ${t}? This action cannot be undone.`,showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",customClass:{...zi.customClass,confirmButton:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}}),loading:(t="Processing...")=>Et.fire({...zi,title:t,allowEscapeKey:!1,allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{Et.showLoading()}}),toast:{success:t=>Et.fire({toast:!0,position:"top-end",icon:"success",title:t,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}}),error:t=>Et.fire({toast:!0,position:"top-end",icon:"error",title:t,showConfirmButton:!1,timer:4e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}}),info:t=>Et.fire({toast:!0,position:"top-end",icon:"info",title:t,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}})},copyToClipboard:(t,e="Copied to clipboard!")=>{navigator.clipboard.writeText(t).then(()=>{df.toast.success(e)}).catch(()=>{df.toast.error("Failed to copy to clipboard")})}},ae=(t,e,s)=>df[t](e,s),rE=[{id:25,name:"Learning Circle Interactive Course",points_per_hour:1},{id:24,name:"Mentor TESOL teacher",points_per_hour:1},{id:23,name:"Attend industry webinar",points_per_hour:1},{id:15,name:"Attend industry PD event",points_per_hour:1},{id:14,name:"Attend English Australia PD event",points_per_hour:1},{id:17,name:"Present at industry event (include preparation time)",points_per_hour:2},{id:21,name:"Attend in-house PD or Training event",points_per_hour:1},{id:22,name:"Present at in-house PD event (include preparation time)",points_per_hour:2},{id:9,name:"Attend English Australia webinar",points_per_hour:1},{id:12,name:"Watch recorded webinar",points_per_hour:1},{id:18,name:"Peer-observe someone's lesson",points_per_hour:1},{id:19,name:"Be observed teaching (including feedback)",points_per_hour:1},{id:20,name:"Complete professional course",points_per_hour:1},{id:10,name:"Attend Industry Training",points_per_hour:1},{id:13,name:"Read journal article",points_per_hour:.5},{id:11,name:"Read professional article",points_per_hour:.5}];let Sq=class Um{static async getUserActivities(e){try{const s=localStorage.getItem("eau_impersonation_session");let r;if(s)try{r=JSON.parse(s).impersonatedUserId,console.log("Getting activities for impersonated member:",r)}catch(u){console.error("Error parsing impersonation session:",u);const{data:h,error:m}=await V.from("members").select("id").eq("user_id",e).single();if(m||!h)return console.error("Error fetching member data:",m),[];r=h.id}else{const{data:u,error:h}=await V.from("members").select("id").eq("user_id",e).single();if(h||!u)return console.error("Error fetching member data:",h),[];r=u.id}const{data:i,error:o}=await V.from("cpd_activities").select("*").eq("member_id",r).order("date_completed",{ascending:!1});if(o)throw o;return i||[]}catch(s){throw console.error("Error fetching CPD activities:",s),s}}static async createActivity(e,s,r){try{const i=localStorage.getItem("eau_impersonation_session");let o;if(i)try{o=JSON.parse(i).impersonatedUserId,console.log("Creating activity for impersonated member:",o)}catch(L){console.error("Error parsing impersonation session:",L);const{data:B,error:w}=await V.from("members").select("id").eq("user_id",s).single();if(w||!B)throw console.error("Error fetching member data:",w),new Error("Member record not found for this user");o=B.id}else{const{data:L,error:B}=await V.from("members").select("id").eq("user_id",s).single();if(B||!L)throw console.error("Error fetching member data:",B),new Error("Member record not found for this user");o=L.id}console.log("Using member_id:",o);const[u,h]=await Promise.all([Um.getCPDSettings(),Um.getCategorySettings()]),m=h.find(L=>L.category_id===e.category_id),f=rE.find(L=>L.id===e.category_id),p=m?.points_per_hour||f?.points_per_hour||1,x=m?.category_name||f?.name||"Unknown Category",j=(e.hours+e.minutes/60)*p,v="approved",S={approved_at:new Date().toISOString()};i||(S.approved_by=s);let _=null,E=null;if(e.evidence){console.log("Processing evidence file:",e.evidence.name);try{const L=new FileReader,B=new Promise((C,z)=>{L.onload=()=>{const R=L.result;C(R)},L.onerror=z});L.readAsDataURL(e.evidence),_=await B,E=e.evidence.name,console.log("Evidence processed as base64, filename:",E),e.evidence.size>2*1024*1024&&ae("warning","Certificate file is large and may not save properly. Consider using a smaller file.")}catch(L){console.error("Error processing evidence file:",L),ae("warning","Could not process certificate file, but activity will be created")}}const A={member_id:o,category_id:e.category_id,category_name:x,activity_title:e.activity_title,description:e.description||"",provider:e.provider||"",date_completed:e.date_completed,hours:e.hours,minutes:e.minutes,points:j,evidence_url:_,evidence_filename:E,status:v,...S};i||(A.user_id=s,A.created_by=s),console.log("Attempting to insert CPD activity with data:",A);const{data:O,error:F}=await V.from("cpd_activities").insert(A).select().single();if(F)throw console.error("Supabase error details:",F),console.error("Activity data that failed:",A),F;return ae("success","CPD activity added and automatically approved!"),O}catch(i){throw console.error("Error creating CPD activity:",i),ae("error","Failed to add CPD activity"),i}}static async updateActivity(e,s){try{const{data:r,error:i}=await V.from("cpd_activities").update(s).eq("id",e).select().single();if(i)throw i;return ae("success","CPD activity updated successfully!"),r}catch(r){throw console.error("Error updating CPD activity:",r),ae("error","Failed to update CPD activity"),r}}static async deleteActivity(e){try{const{error:s}=await V.from("cpd_activities").delete().eq("id",e);if(s)throw s;ae("success","CPD activity deleted successfully!")}catch(s){throw console.error("Error deleting CPD activity:",s),ae("error","Failed to delete CPD activity"),s}}static async getTotalPoints(e){try{const s=localStorage.getItem("eau_impersonation_session");let r;if(s)try{r=JSON.parse(s).impersonatedUserId}catch(u){console.error("Error parsing impersonation session:",u);const{data:h,error:m}=await V.from("members").select("id").eq("user_id",e).single();if(m||!h)return console.error("Error fetching member data:",m),0;r=h.id}else{const{data:u,error:h}=await V.from("members").select("id").eq("user_id",e).single();if(h||!u)return console.error("Error fetching member data:",h),0;r=u.id}const{data:i,error:o}=await V.from("cpd_activities").select("points").eq("member_id",r).eq("status","approved");if(o)throw o;return i?.reduce((u,h)=>u+(h.points||0),0)||0}catch(s){return console.error("Error calculating total points:",s),0}}static async getYearlyPoints(e,s){try{const r=localStorage.getItem("eau_impersonation_session");let i;if(r)try{i=JSON.parse(r).impersonatedUserId}catch(f){console.error("Error parsing impersonation session:",f);const{data:p,error:x}=await V.from("members").select("id").eq("user_id",e).single();if(x||!p)return console.error("Error fetching member data:",x),0;i=p.id}else{const{data:f,error:p}=await V.from("members").select("id").eq("user_id",e).single();if(p||!f)return console.error("Error fetching member data:",p),0;i=f.id}const o=`${s}-01-01`,u=`${s}-12-31`,{data:h,error:m}=await V.from("cpd_activities").select("points").eq("member_id",i).eq("status","approved").gte("date_completed",o).lte("date_completed",u);if(m)throw m;return h?.reduce((f,p)=>f+(p.points||0),0)||0}catch(r){return console.error("Error calculating yearly points:",r),0}}static async getAllActivities(e){try{let s=V.from("cpd_activities").select(`
          *,
          members(id, first_name, last_name, email)
        `).order("created_at",{ascending:!1});e?.status&&(s=s.eq("status",e.status)),e?.userId&&(s=s.eq("member_id",e.userId)),e?.search&&(s=s.ilike("activity_title",`%${e.search}%`));const{data:r,error:i}=await s;if(i)throw i;return r||[]}catch(s){return console.error("Error fetching all activities:",s),[]}}static async getAllPendingActivities(){try{const{data:e,error:s}=await V.from("cpd_activities").select(`
          *,
          members!inner(first_name, last_name, email)
        `).eq("status","pending").order("created_at",{ascending:!1});if(s)throw s;return e||[]}catch(e){throw console.error("Error fetching pending activities:",e),e}}static async getPendingActivitiesCount(){try{const{count:e,error:s}=await V.from("cpd_activities").select("*",{count:"exact",head:!0}).eq("status","pending");if(s)throw s;return e||0}catch(e){return console.error("Error counting pending activities:",e),0}}static async getAllActivitiesStats(){try{const[e,s,r,i]=await Promise.all([V.from("cpd_activities").select("*",{count:"exact",head:!0}),V.from("cpd_activities").select("*",{count:"exact",head:!0}).eq("status","pending"),V.from("cpd_activities").select("*",{count:"exact",head:!0}).eq("status","approved"),V.from("cpd_activities").select("*",{count:"exact",head:!0}).eq("status","rejected")]);return{total:e.count||0,pending:s.count||0,approved:r.count||0,rejected:i.count||0}}catch(e){return console.error("Error getting activities stats:",e),{total:0,pending:0,approved:0,rejected:0}}}static async getPointsStats(){try{const e=new Date,r=new Date(e.getFullYear(),e.getMonth(),1).toISOString(),{data:i,error:o}=await V.from("cpd_activities").select("points").eq("status","approved");if(o)throw o;const{data:u,error:h}=await V.from("cpd_activities").select("points").eq("status","approved").gte("created_at",r);if(h)throw h;const m=i?.reduce((p,x)=>p+(x.points||0),0)||0,f=u?.reduce((p,x)=>p+(x.points||0),0)||0;return{totalPoints:m,monthlyPoints:f}}catch(e){return console.error("Error getting points stats:",e),{totalPoints:0,monthlyPoints:0}}}static async approveActivity(e,s){try{const{data:r,error:i}=await V.from("cpd_activities").update({status:"approved",approved_by:s,approved_at:new Date().toISOString(),updated_by:s,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return ae("success","CPD activity approved successfully!"),r}catch(r){throw console.error("Error approving activity:",r),ae("error","Failed to approve activity"),r}}static async rejectActivity(e,s,r){try{const{data:i,error:o}=await V.from("cpd_activities").update({status:"rejected",approved_by:s,approved_at:new Date().toISOString(),rejection_reason:r,updated_by:s,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(o)throw o;return ae("success","CPD activity rejected"),i}catch(i){throw console.error("Error rejecting activity:",i),ae("error","Failed to reject activity"),i}}static async getCPDSettings(){try{const{data:e,error:s}=await V.from("cpd_settings").select("*").single();if(s){if(s.code==="42P01"||s.message.includes("404")||s.message.includes("relation")||s.message.includes("does not exist"))return console.warn("CPD Settings table not found, using default settings. Please run the setup SQL."),{id:"default",auto_approval_enabled:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};throw s}return e}catch(e){return console.error("Error fetching CPD settings:",e),{id:"default",auto_approval_enabled:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}}static async updateCPDSettings(e){try{const s=await Um.getCPDSettings();if(!s||s.id==="default"){const{data:o,error:u}=await V.from("cpd_settings").insert({...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(u)throw u;return ae("success","CPD settings created successfully!"),o}const{data:r,error:i}=await V.from("cpd_settings").update({...e,updated_at:new Date().toISOString()}).eq("id",s.id).select().single();if(i)throw i.code==="42P01"||i.message.includes("404")||i.message.includes("relation")||i.message.includes("does not exist")?(ae("error","CPD Settings table not found. Please run the setup SQL first."),new Error("Tables not created. Please run the setup SQL in Supabase Studio.")):i;return ae("success","CPD settings updated successfully!"),r}catch(s){console.error("Error updating CPD settings:",s);const r=s.message?.includes("Tables not created")?"Please run the setup SQL first":"Failed to update CPD settings";throw ae("error",r),s}}static async getCategorySettings(){try{const{data:e,error:s}=await V.from("cpd_category_settings").select("*").eq("is_active",!0).order("category_name");if(s){if(s.code==="42P01"||s.message.includes("404")||s.message.includes("relation")||s.message.includes("does not exist"))return console.warn("CPD Category Settings table not found, using hardcoded categories. Please run the setup SQL."),[];throw s}return e||[]}catch(e){return console.error("Error fetching category settings:",e),[]}}static async updateCategorySettings(e,s){try{const{data:r,error:i}=await V.from("cpd_category_settings").update({...s,updated_at:new Date().toISOString()}).eq("category_id",e).select().single();if(i)throw i.code==="42P01"||i.message.includes("404")||i.message.includes("relation")||i.message.includes("does not exist")?(ae("error","CPD Category Settings table not found. Please run the setup SQL first."),new Error("Tables not created. Please run the setup SQL in Supabase Studio.")):i;return ae("success","Category settings updated successfully!"),r}catch(r){console.error("Error updating category settings:",r);const i=r.message?.includes("Tables not created")?"Please run the setup SQL first":"Failed to update category settings";throw ae("error",i),r}}};const cl={CPDService:Sq,CPD_CATEGORIES:rE},Eq=[{id:"1",created_at:"2025-01-01T00:00:00Z",updated_at:"2025-01-01T00:00:00Z",first_name:"Joo",last_name:"Silva",email:"joao.silva@example.com",phone:"+61 123 456 789",date_of_birth:"1985-05-15",address_line1:"123 Collins Street",address_line2:null,city:"Melbourne",state:"VIC",postal_code:"3000",country:"Australia",membership_status:"active",membership_type:"premium",membership_start_date:"2025-01-01",membership_end_date:null,profession:"English Teacher",experience_years:10,qualifications:"TESOL Certified, Masters in Education",receive_newsletters:!0,receive_event_notifications:!0,created_by:"demo-user",updated_by:"demo-user",member_roles:[{id:"1",created_at:"2025-01-01T00:00:00Z",member_id:"1",role:"member"}]},{id:"2",created_at:"2025-01-02T00:00:00Z",updated_at:"2025-01-02T00:00:00Z",first_name:"Maria",last_name:"Santos",email:"maria.santos@example.com",phone:"+61 987 654 321",date_of_birth:"1990-08-22",address_line1:"456 Queen Street",address_line2:"Apt 12",city:"Sydney",state:"NSW",postal_code:"2000",country:"Australia",membership_status:"active",membership_type:"standard",membership_start_date:"2025-01-02",membership_end_date:null,profession:"Language Coordinator",experience_years:7,qualifications:"CELTA Certified, Bachelor in Linguistics",receive_newsletters:!0,receive_event_notifications:!1,created_by:"demo-user",updated_by:"demo-user",member_roles:[{id:"2",created_at:"2025-01-02T00:00:00Z",member_id:"2",role:"member"},{id:"3",created_at:"2025-01-02T00:00:00Z",member_id:"2",role:"moderator"}]},{id:"3",created_at:"2025-01-15T00:00:00Z",updated_at:"2025-01-15T00:00:00Z",first_name:"Peter",last_name:"Johnson",email:"peter.johnson@example.com",phone:null,date_of_birth:null,address_line1:null,address_line2:null,city:null,state:null,postal_code:null,country:"Australia",membership_status:"inactive",membership_type:"student",membership_start_date:"2025-01-15",membership_end_date:"2025-12-31",profession:"Student",experience_years:2,qualifications:"Currently studying TESOL",receive_newsletters:!1,receive_event_notifications:!0,created_by:"demo-user",updated_by:"demo-user",member_roles:[{id:"4",created_at:"2025-01-15T00:00:00Z",member_id:"3",role:"member"}]}];class zl{static members=[...Eq];static nextId=4;static delay(e=300){return new Promise(s=>setTimeout(s,e))}static async getAllMembers(){return await this.delay(),[...this.members]}static async getMemberById(e){return await this.delay(),this.members.find(s=>s.id===e)||null}static async getMemberByEmail(e){return await this.delay(),this.members.find(s=>s.email===e)||null}static async createMember(e){await this.delay();const s={id:this.nextId.toString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString(),first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,date_of_birth:e.date_of_birth,address_line1:e.address_line1,address_line2:e.address_line2,city:e.city,state:e.state,postal_code:e.postal_code,country:e.country||"Australia",membership_status:e.membership_status||"active",membership_type:e.membership_type||"standard",membership_start_date:e.membership_start_date||new Date().toISOString().split("T")[0],membership_end_date:e.membership_end_date,profession:e.profession,experience_years:e.experience_years,qualifications:e.qualifications,receive_newsletters:e.receive_newsletters??!0,receive_event_notifications:e.receive_event_notifications??!0,created_by:"demo-user",updated_by:"demo-user",member_roles:[{id:(this.nextId+100).toString(),created_at:new Date().toISOString(),member_id:this.nextId.toString(),role:"member"}]};return this.members.push(s),this.nextId++,{id:s.id,created_at:s.created_at,updated_at:s.updated_at,first_name:s.first_name,last_name:s.last_name,email:s.email,phone:s.phone,date_of_birth:s.date_of_birth,address_line1:s.address_line1,address_line2:s.address_line2,city:s.city,state:s.state,postal_code:s.postal_code,country:s.country,membership_status:s.membership_status,membership_type:s.membership_type,membership_start_date:s.membership_start_date,membership_end_date:s.membership_end_date,profession:s.profession,experience_years:s.experience_years,qualifications:s.qualifications,receive_newsletters:s.receive_newsletters,receive_event_notifications:s.receive_event_notifications,created_by:s.created_by,updated_by:s.updated_by}}static async updateMember(e,s){await this.delay();const r=this.members.findIndex(i=>i.id===e);if(r===-1)throw new Error("Membro no encontrado");return this.members[r]={...this.members[r],...s,updated_at:new Date().toISOString()},this.members[r]}static async deleteMember(e){await this.delay();const s=this.members.findIndex(r=>r.id===e);if(s===-1)throw new Error("Membro no encontrado");this.members.splice(s,1)}static async searchMembers(e){await this.delay();let s=[...this.members];if(e.search){const r=e.search.toLowerCase();s=s.filter(i=>i.first_name.toLowerCase().includes(r)||i.last_name.toLowerCase().includes(r)||i.email.toLowerCase().includes(r))}return e.status&&(s=s.filter(r=>r.membership_status===e.status)),e.type&&(s=s.filter(r=>r.membership_type===e.type)),e.offset&&(s=s.slice(e.offset)),e.limit&&(s=s.slice(0,e.limit)),s}static async addMemberRole(e,s){await this.delay();const r=this.members.find(o=>o.id===e);if(!r)throw new Error("Membro no encontrado");r.member_roles.some(o=>o.role===s)||r.member_roles.push({id:Date.now().toString(),created_at:new Date().toISOString(),member_id:e,role:s})}static async removeMemberRole(e,s){await this.delay();const r=this.members.find(i=>i.id===e);if(!r)throw new Error("Membro no encontrado");r.member_roles=r.member_roles.filter(i=>i.role!==s)}static async addMemberHistory(e,s,r){await this.delay()}static async getMemberHistory(e){return await this.delay(),[]}static async getMemberStats(){await this.delay();const e=this.members.length,s=this.members.filter(o=>o.membership_status==="active").length,r=new Date;r.setMonth(r.getMonth());const i=this.members.filter(o=>new Date(o.created_at)>=new Date(r.getFullYear(),r.getMonth(),1)).length;return{total:e,active:s,newThisMonth:i,inactive:e-s}}}class da{static async isSupabaseAvailable(){try{const{error:e}=await V.from("members").select("id").limit(1);return!e}catch{return!1}}static async getAllMembers(){if(!await this.isSupabaseAvailable())return console.warn("Supabase no disponvel, usando modo demo"),zl.getAllMembers();const{data:s,error:r}=await V.from("members").select(`
        *,
        member_roles (*)
      `).order("created_at",{ascending:!1});if(r)throw new Error(`Erro ao buscar membros: ${r.message}`);return s||[]}static async getMemberById(e){if(!await this.isSupabaseAvailable())return zl.getMemberById(e);const{data:r,error:i}=await V.from("members").select(`
        *,
        member_roles (*)
      `).eq("id",e).single();if(i){if(i.code==="PGRST116")return null;throw new Error(`Erro ao buscar membro: ${i.message}`)}return r}static async getMemberByEmail(e){if(!await this.isSupabaseAvailable())return zl.getMemberByEmail(e);const{data:r,error:i}=await V.from("members").select(`
        *,
        member_roles (*)
      `).eq("email",e).single();if(i){if(i.code==="PGRST116")return null;throw new Error(`Erro ao buscar membro: ${i.message}`)}return r}static async createMember(e){if(!await this.isSupabaseAvailable())return zl.createMember(e);const{data:r}=await V.auth.getUser(),i={...e,created_by:r.user?.id,updated_by:r.user?.id},{data:o,error:u}=await V.from("members").insert(i).select().single();if(u)throw new Error(`Erro ao criar membro: ${u.message}`);return await this.addMemberHistory(o.id,"created",{member:e}),o}static async updateMember(e,s){const{data:r}=await V.auth.getUser(),i={...s,updated_by:r.user?.id},{data:o,error:u}=await V.from("members").update(i).eq("id",e).select().single();if(u)throw new Error(`Erro ao atualizar membro: ${u.message}`);return await this.addMemberHistory(e,"updated",{updates:s}),o}static async deleteMember(e){try{await this.addMemberHistory(e,"deleted",{})}catch(r){console.log("Could not add deletion to history:",r)}const{error:s}=await V.from("members").delete().eq("id",e);if(s)throw new Error(`Erro ao deletar membro: ${s.message}`)}static async deleteMultipleMembers(e){if(e.length===0)return{success:0,failed:0};const{error:s}=await V.from("members").delete().in("id",e);if(s){console.error("Bulk delete failed, falling back to individual deletes:",s);let r=0,i=0;for(const o of e)try{await this.deleteMember(o),r++}catch(u){console.error(`Failed to delete member ${o}:`,u),i++}return{success:r,failed:i}}return{success:e.length,failed:0}}static async searchMembers(e){if(!await this.isSupabaseAvailable())return zl.searchMembers(e);let r=V.from("members").select(`
        *,
        member_roles (*)
      `);e.search&&(r=r.or(`first_name.ilike.%${e.search}%,last_name.ilike.%${e.search}%,email.ilike.%${e.search}%`)),e.status&&(r=r.eq("membership_status",e.status)),e.type&&(r=r.eq("membership_type",e.type)),e.limit&&(r=r.limit(e.limit)),e.offset&&(r=r.range(e.offset,e.offset+(e.limit||10)-1)),r=r.order("created_at",{ascending:!1});const{data:i,error:o}=await r;if(o)throw new Error(`Erro ao buscar membros: ${o.message}`);return i||[]}static async searchMembersPaginated(e){if(!await this.isSupabaseAvailable()){const f=await zl.searchMembers(e),p=(e.page-1)*e.pageSize,x=p+e.pageSize;return{data:f.slice(p,x),count:f.length}}let r=V.from("members").select(`
        *,
        member_roles (*)
      `,{count:"exact"});e.search&&(r=r.or(`first_name.ilike.%${e.search}%,last_name.ilike.%${e.search}%,email.ilike.%${e.search}%`)),e.status&&(r=r.eq("membership_status",e.status)),e.type&&(r=r.eq("membership_type",e.type));const i=(e.page-1)*e.pageSize,o=i+e.pageSize-1;r=r.range(i,o).order("created_at",{ascending:!1});const{data:u,error:h,count:m}=await r;if(h)throw new Error(`Erro ao pesquisar membros: ${h.message}`);return{data:u||[],count:m||0}}static async addMemberRole(e,s){const{error:r}=await V.from("member_roles").insert({member_id:e,role:s});if(r)throw new Error(`Erro ao adicionar role: ${r.message}`);await this.addMemberHistory(e,"role_added",{role:s})}static async removeMemberRole(e,s){const{error:r}=await V.from("member_roles").delete().eq("member_id",e).eq("role",s);if(r)throw new Error(`Erro ao remover role: ${r.message}`);await this.addMemberHistory(e,"role_removed",{role:s})}static async addMemberHistory(e,s,r){const{data:i}=await V.auth.getUser(),{error:o}=await V.from("member_history").insert({member_id:e,action:s,details:r,performed_by:i.user?.id});o&&console.error("Erro ao adicionar histrico:",o.message)}static async getMemberHistory(e){const{data:s,error:r}=await V.from("member_history").select("*").eq("member_id",e).order("created_at",{ascending:!1});if(r)throw new Error(`Erro ao buscar histrico: ${r.message}`);return s||[]}static async getMemberStats(){if(!await this.isSupabaseAvailable())return zl.getMemberStats();const{count:s}=await V.from("members").select("*",{count:"exact",head:!0}),{count:r}=await V.from("members").select("*",{count:"exact",head:!0}).eq("membership_status","active"),{count:i}=await V.from("members").select("*",{count:"exact",head:!0}).gte("created_at",new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString());return{total:s||0,active:r||0,newThisMonth:i||0,inactive:(s||0)-(r||0)}}}class Xt{static async getCategories(e=!0){let s=V.from("event_categories").select("*").order("sort_order");e&&(s=s.eq("is_active",!0));const{data:r,error:i}=await s;if(i)throw console.error("Error fetching categories:",i),i;return r||[]}static async getEvents(e){let s=V.from("events").select(`
        *,
        category:event_categories(*)
      `).order("start_date",{ascending:!0});e&&(e.status?.length&&(s=s.in("status",e.status)),e.category?.length&&(s=s.in("category_id",e.category)),e.location_type?.length&&(s=s.in("location_type",e.location_type)),e.date_from&&(s=s.gte("start_date",e.date_from)),e.date_to&&(s=s.lte("start_date",e.date_to)),e.has_cpd!==void 0&&(s=e.has_cpd?s.gt("cpd_points",0):s.eq("cpd_points",0)),e.featured_only&&(s=s.eq("featured",!0)),e.search&&(s=s.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%`)));const{data:r,error:i}=await s;if(i)throw console.error("Error fetching events:",i),i;return r||[]}static async getPublicEvents(){return this.getEvents({status:["published"]})}static async getUpcomingEvents(e=10){const{data:s,error:r}=await V.from("events").select(`
        *,
        category:event_categories(*)
      `).eq("status","published").gte("start_date",new Date().toISOString()).order("start_date",{ascending:!0}).limit(e);if(r)throw console.error("Error fetching upcoming events:",r),r;return s||[]}static async getEventById(e){const{data:s,error:r}=await V.from("events").select(`
        *,
        category:event_categories(*)
      `).eq("id",e).single();if(r)throw console.error("Error fetching event:",r),r;return s}static async getEventBySlug(e){const{data:s,error:r}=await V.from("events").select(`
        *,
        category:event_categories(*)
      `).eq("slug",e).single();if(r)throw console.error("Error fetching event by slug:",r),r;return s}static async createEvent(e){const{data:{session:s}}=await V.auth.getSession();if(!s?.user)throw new Error("User not authenticated");const r={title:e.title,description:e.description||null,short_description:e.short_description||null,category_id:e.category_id||null,start_date:e.start_date,end_date:e.end_date,timezone:e.timezone,location_type:e.location_type,venue_name:e.venue_name||null,address_line1:e.address_line1||null,city:e.city||null,state:e.state||null,postal_code:e.postal_code||null,country:e.country,virtual_link:e.virtual_link||null,capacity:Number(e.capacity)||50,member_price_cents:Math.round((Number(e.member_price)||0)*100),non_member_price_cents:Math.round((Number(e.non_member_price)||0)*100),early_bird_price_cents:e.early_bird_price?Math.round(Number(e.early_bird_price)*100):null,early_bird_end_date:e.early_bird_end_date||null,cpd_points:Number(e.cpd_points)||0,cpd_category:e.cpd_category||null,visibility:e.visibility,featured:!!e.featured,allow_guests:!!e.allow_guests,max_guests_per_registration:Number(e.max_guests_per_registration)||0,requires_approval:!!e.requires_approval,image_url:e.image_url||null,created_by:s.user.id,status:"published"};console.log("Creating event with data:",r);const{data:i,error:o}=await V.from("events").insert(r).select().single();if(o)throw console.error("Error creating event:",o),console.error("Error details:",{message:o.message,details:o.details,hint:o.hint,code:o.code}),o;return i}static async updateEvent(e,s){console.log(" [EventService.updateEvent] Input data:",{id:e,description_length:s.description?.length,description_preview:s.description?.substring(0,100),hasDescription:"description"in s,eventData_keys:Object.keys(s),full_eventData:s});const r={...s};Object.keys(r).forEach(i=>{r[i]===void 0&&delete r[i]}),"image_url"in s&&(r.image_url=s.image_url||null),s.member_price!==void 0&&(r.member_price_cents=Math.round(s.member_price*100),delete r.member_price),s.non_member_price!==void 0&&(r.non_member_price_cents=Math.round(s.non_member_price*100),delete r.non_member_price),s.early_bird_price!==void 0&&(r.early_bird_price_cents=s.early_bird_price?Math.round(s.early_bird_price*100):null,delete r.early_bird_price),console.log(" [EventService.updateEvent] Data for DB:",{id:e,description_length:r.description?.length,description_preview:r.description?.substring(0,100),hasDescription:"description"in r,dataForDb_keys:Object.keys(r),dataForDb_types:Object.fromEntries(Object.entries(r).map(([i,o])=>[i,typeof o])),full_dataForDb:r});try{const{data:i,error:o}=await V.from("events").update(r).eq("id",e).select().single();if(o)throw console.error(" [EventService.updateEvent] Supabase error details:",{error:o,errorMessage:o.message,errorCode:o.code,errorDetails:o.details,errorHint:o.hint}),o;return console.log(" [EventService.updateEvent] Response from Supabase:",{id:i.id,description_length:i.description?.length,description_preview:i.description?.substring(0,100)}),i}catch(i){throw console.error(" [EventService.updateEvent] Network/Request error:",i),i}}static async publishEvent(e){const{data:s,error:r}=await V.from("events").update({status:"published",published_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw console.error("Error publishing event:",r),r;return s}static async cancelEvent(e,s){const{data:r,error:i}=await V.from("events").update({status:"cancelled",cancelled_at:new Date().toISOString(),cancellation_reason:s}).eq("id",e).select().single();if(i)throw console.error("Error cancelling event:",i),i;return r}static async deleteEvent(e){const{error:s}=await V.from("events").delete().eq("id",e);if(s)throw console.error("Error deleting event:",s),s}static async getRegistrations(e){let s=V.from("event_registrations").select(`
        *,
        event:events(*)
      `).order("created_at",{ascending:!1});e&&(e.event_id&&(s=s.eq("event_id",e.event_id)),e.status?.length&&(s=s.in("status",e.status)),e.payment_status?.length&&(s=s.in("payment_status",e.payment_status)),e.attended!==void 0&&(s=s.eq("attended",e.attended)),e.date_from&&(s=s.gte("created_at",e.date_from)),e.date_to&&(s=s.lte("created_at",e.date_to)),e.search&&(s=s.or(`first_name.ilike.%${e.search}%,last_name.ilike.%${e.search}%,email.ilike.%${e.search}%,registration_number.ilike.%${e.search}%`)));const{data:r,error:i}=await s;if(i)throw console.error("Error fetching registrations:",i),i;return r||[]}static async getEventRegistrations(e){return this.getRegistrations({event_id:e})}static async getUserRegistrations(e){const{data:s,error:r}=await V.from("event_registrations").select(`
        *,
        event:events(*)
      `).eq("user_id",e).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching user registrations:",r),r;return s||[]}static async getRegistrationById(e){const{data:s,error:r}=await V.from("event_registrations").select(`
        *,
        event:events(*)
      `).eq("id",e).single();if(r)throw console.error("Error fetching registration:",r),r;return s}static async registerForEvent(e){const s=await this.getEventById(e.event_id);if(!s)throw new Error("Event not found");const i=(await this.getEventRegistrations(e.event_id)).filter(p=>p.status==="confirmed").length;let o="confirmed";if(i>=s.capacity)if(s.waitlist_enabled)o="waitlisted";else throw new Error("Event is full and waitlist is not enabled");let h=s.non_member_price_cents;s.early_bird_price_cents&&s.early_bird_end_date&&new Date<new Date(s.early_bird_end_date)&&(h=s.early_bird_price_cents);const{data:m,error:f}=await V.from("event_registrations").insert({...e,status:o,registration_type:"non_member",amount_paid_cents:h,payment_status:h===0?"exempt":"pending"}).select().single();if(f)throw console.error("Error creating registration:",f),f;return m}static async updateRegistration(e,s){const{data:r,error:i}=await V.from("event_registrations").update(s).eq("id",e).select().single();if(i)throw console.error("Error updating registration:",i),i;return r}static async cancelRegistration(e,s){const{data:r,error:i}=await V.from("event_registrations").update({status:"cancelled",cancelled_at:new Date().toISOString(),cancellation_reason:s}).eq("id",e).select().single();if(i)throw console.error("Error cancelling registration:",i),i;return r}static async checkInRegistration(e,s="manual"){const{data:r,error:i}=await V.from("event_registrations").update({attended:!0,check_in_time:new Date().toISOString(),check_in_method:s}).eq("id",e).select().single();if(i)throw console.error("Error checking in registration:",i),i;return r}static async checkInByQRCode(e){const{data:s,error:r}=await V.from("event_registrations").select("*").eq("qr_code_token",e).single();if(r||!s)throw new Error("Invalid QR code");if(s.attended)throw new Error("Already checked in");return this.checkInRegistration(s.id,"qr_code")}static async getEventStatistics(e){const{data:s,error:r}=await V.from("event_statistics").select("*").eq("id",e).single();if(r)throw console.error("Error fetching event statistics:",r),r;return s}static async getDashboardStatistics(){const{count:e}=await V.from("events").select("*",{count:"exact",head:!0}),{count:s}=await V.from("events").select("*",{count:"exact",head:!0}).eq("status","published").gte("start_date",new Date().toISOString()),{count:r}=await V.from("event_registrations").select("*",{count:"exact",head:!0}).eq("status","confirmed"),{data:i}=await V.from("event_registrations").select("amount_paid_cents").eq("payment_status","paid"),o=i?.reduce((m,f)=>m+(f.amount_paid_cents||0),0)||0,u=await this.getUpcomingEvents(5),{data:h}=await V.from("event_registrations").select(`
        *,
        event:events(title, start_date)
      `).order("created_at",{ascending:!1}).limit(10);return{total_events:e||0,upcoming_events:s||0,total_registrations:r||0,total_revenue:o/100,average_attendance_rate:0,popular_categories:[],recent_registrations:h||[],upcoming_events_list:u}}static async getEventEmails(e){const{data:s,error:r}=await V.from("event_emails").select("*").eq("event_id",e).order("type");if(r)throw console.error("Error fetching event emails:",r),r;return s||[]}static async updateEmailTemplate(e,s){const{data:r,error:i}=await V.from("event_emails").update(s).eq("id",e).select().single();if(i)throw console.error("Error updating email template:",i),i;return r}static formatPrice(e){return new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"}).format(e/100)}static getEventStatus(e){const s=new Date,r=new Date(e.start_date),i=new Date(e.end_date);return e.status==="cancelled"?"Cancelled":e.status==="draft"?"Draft":s<r?"Upcoming":s>=r&&s<=i?"In Progress":"Completed"}static getAvailableSpots(e,s){const r=s.filter(i=>i.status==="confirmed").length;return Math.max(0,e.capacity-r)}static isRegistrationOpen(e){const s=new Date;return!(e.status!=="published"||e.registration_start_date&&s<new Date(e.registration_start_date)||e.registration_end_date&&s>new Date(e.registration_end_date))}}const{CPDService:jm}=cl,Cq=()=>{const{user:t,roles:e,getEffectiveRoles:s}=jt(),r=Ns(),[i,o]=M.useState({total:0,pending:0,approved:0,rejected:0}),[u,h]=M.useState([]),[m,f]=M.useState({total:0,active:0,newThisMonth:0,inactive:0}),[p,x]=M.useState({active:0,upcoming:0,past:0}),[b,j]=M.useState(null),[v,S]=M.useState({totalPoints:0,monthlyPoints:0}),[_,E]=M.useState(!0);M.useEffect(()=>{A()},[]);const A=async()=>{try{E(!0);const[O,F,k,L,B,w]=await Promise.all([jm.getAllActivitiesStats(),jm.getAllPendingActivities(),da.getMemberStats(),Xt.getEvents(),jm.getCPDSettings(),jm.getPointsStats()]);o(O),h(F),f(k),j(B),S(w);const C=new Date,z=L.filter(q=>q.status==="published"),R=z.filter(q=>new Date(q.start_date)>C),D=z.filter(q=>new Date(q.end_date)<C);x({active:z.length,upcoming:R.length,past:D.length})}catch(O){console.error("Error loading dashboard data:",O)}finally{E(!1)}};return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm border-b",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),n.jsxs("p",{className:"text-gray-600",children:["Welcome, ",t?.user_metadata?.full_name||t?.email," | Roles: ",e.join(", ")]})]})})})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx(ue,{children:n.jsxs(cr,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Members"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:_?"...":m.total})]}),n.jsx("div",{className:"text-3xl",children:""})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Active: ",_?"...":m.active]})]})}),n.jsx(ue,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>r("/cpd/management"),children:n.jsxs(cr,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"CPD Activities"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:_?"...":i.total})]}),n.jsx("div",{className:"text-3xl",children:""})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Pending approval: ",_?"...":i.pending]})]})}),n.jsx(ue,{children:n.jsxs(cr,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Events"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:_?"...":p.active})]}),n.jsx("div",{className:"text-3xl",children:""})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Upcoming: ",_?"...":p.upcoming]})]})}),n.jsx(ue,{children:n.jsxs(cr,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Points Awarded"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:_?"...":v.totalPoints})]}),n.jsx("div",{className:"text-3xl",children:""})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["This month: ",_?"...":v.monthlyPoints]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(ue,{children:[n.jsxs(Rn,{children:[n.jsx(Mn,{className:"flex items-center gap-2",children:" Admin Actions"}),n.jsx(Dn,{children:"Common administrative tasks"})]}),n.jsx(cr,{children:n.jsxs("div",{className:"space-y-3",children:[(s().includes("AdminSuper")||b&&!b.auto_approval_enabled)&&n.jsx(Qt,{permission:"APPROVE_CPD",children:n.jsxs(se,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/cpd/review"),children:[" Review CPD Submissions (",_?"...":`${i.pending} pending`,")"]})}),n.jsx(Qt,{roles:["Admin","AdminSuper"],children:n.jsx(se,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/cpd/management"),children:" Manage All CPD Activities"})}),n.jsx(Qt,{roles:["AdminSuper"],children:n.jsx(se,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/cpd/settings"),children:" CPD Settings & Configuration"})}),n.jsx(Qt,{permission:"CREATE_EVENT",children:n.jsx(se,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/events"),children:" Create New Event"})}),n.jsx(Qt,{permission:"MANAGE_USERS",children:n.jsx(se,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin/members"),children:" Manage Users"})}),n.jsx(Qt,{permission:"VIEW_USER_REPORTS",children:n.jsx(se,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin"),children:" Generate Reports"})}),n.jsx(Qt,{permission:"ASSIGN_ROLES",children:n.jsx(se,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin/members"),children:" Assign User Roles"})}),n.jsx(Qt,{roles:["AdminSuper"],children:n.jsx(se,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin/smtp-settings"),children:" SMTP Settings"})}),n.jsx(Qt,{roles:["AdminSuper"],children:n.jsx(se,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin/email-templates"),children:" Email Templates"})}),n.jsx(Qt,{roles:["AdminSuper"],children:n.jsx(se,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin/event-reminders"),children:" Event Reminders"})}),n.jsx(Qt,{roles:["AdminSuper"],children:n.jsx(se,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin/import-system"),children:" Import System (CSV)"})}),n.jsx(Qt,{roles:["Admin","AdminSuper"],children:n.jsx(se,{variant:"outline",className:"w-full justify-start",onClick:()=>r("/admin/duplicates"),children:" Review Member Duplicates"})}),n.jsx(Qt,{roles:["AdminSuper"],children:n.jsx(se,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-700 border-red-300 hover:border-red-400",onClick:()=>r("/admin/bulk-management"),children:" Bulk Member Management"})})]})})]}),n.jsxs(ue,{children:[n.jsxs(Rn,{children:[n.jsx(Mn,{className:"flex items-center gap-2",children:" Recent System Activity"}),n.jsx(Dn,{children:"Latest platform activities and submissions"})]}),n.jsx(cr,{children:n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx("div",{className:"text-4xl mb-2",children:""}),n.jsx("p",{children:"No recent activity"}),n.jsx("p",{className:"text-sm",children:"System activities will appear here"})]})})]})]}),n.jsxs(ue,{className:"mt-6",children:[n.jsxs(Rn,{children:[n.jsxs(Mn,{className:"flex items-center gap-2",children:[" Pending Actions (",_?"...":u.length,")"]}),n.jsx(Dn,{children:"Items requiring your attention"})]}),n.jsx(cr,{children:_?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):u.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"All caught up!"}),n.jsx("p",{className:"text-sm",children:"No pending actions require your attention."})]}):n.jsxs("div",{className:"space-y-4",children:[u.slice(0,5).map(O=>n.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:n.jsx("span",{className:"text-orange-600 font-medium text-sm",children:""})}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["CPD Submission: ",O.activity_title]}),n.jsxs("p",{className:"text-xs text-gray-600",children:["From: ",O.members?.first_name," ",O.members?.last_name," ",O.points," points ",new Date(O.created_at).toLocaleDateString()]})]})]}),n.jsx(se,{size:"sm",onClick:()=>r("/cpd/review"),className:"text-xs",children:"Review"})]},O.id)),u.length>5&&n.jsx("div",{className:"text-center pt-4 border-t border-gray-200",children:n.jsxs(se,{variant:"outline",onClick:()=>r("/cpd/review"),className:"text-sm",children:["View All ",u.length," Pending Items"]})})]})})]})]})]})},Aq=()=>{const{isAdmin:t}=Rf(),{user:e,isLoading:s}=jt();return s?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading your dashboard..."})]})}):e?t()?n.jsx(Cq,{}):n.jsx(LD,{}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-gray-600",children:"Please log in to access your dashboard."})})})},kq=()=>{const t=Ns(),{reset:e}=jt(),s=async()=>{try{await V.auth.signOut(),e(),t("/login")}catch(r){console.error("Erro ao fazer logout:",r),e(),t("/login")}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:n.jsxs(ue,{className:"w-full max-w-md text-center",children:[n.jsxs(Rn,{children:[n.jsx("div",{className:"mx-auto mb-4 text-6xl",children:""}),n.jsx(Mn,{className:"text-2xl font-bold text-gray-900",children:"Access Denied"}),n.jsx(Dn,{children:"You don't have permission to access this page. Please contact your administrator if you believe this is an error."})]}),n.jsxs(cr,{className:"space-y-4",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("p",{children:"Required permissions not found in your account."}),n.jsx("p",{className:"mt-2",children:"Your current roles may not include access to this resource."})]}),n.jsxs("div",{className:"flex flex-col gap-3 pt-4",children:[n.jsx(se,{onClick:s,className:"w-full",children:"Logout and Try Again"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(se,{variant:"outline",onClick:()=>t(-1),className:"flex-1",children:"Go Back"}),n.jsx(se,{variant:"outline",onClick:()=>t("/dashboard"),className:"flex-1",children:"Dashboard"})]})]})]})]})})},Ot=({children:t,permission:e,roles:s,requireAll:r=!1,redirectTo:i="/unauthorized"})=>{const{hasPermission:o,hasAnyRole:u,hasAllRoles:h}=Rf(),{rolesLoaded:m,isLoading:f}=jt();return f||!m?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Verifying permissions..."})]})}):(e?o(e):s?r?h(s):u(s):!0)?n.jsx(n.Fragment,{children:t}):n.jsx(jd,{to:i,replace:!0})};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tq=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Oq=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),nj=t=>{const e=Oq(t);return e.charAt(0).toUpperCase()+e.slice(1)},nE=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim(),Rq=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dq=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:u,...h},m)=>M.createElement("svg",{ref:m,...Mq,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:nE("lucide",i),...!o&&!Rq(h)&&{"aria-hidden":"true"},...h},[...u.map(([f,p])=>M.createElement(f,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(t,e)=>{const s=M.forwardRef(({className:r,...i},o)=>M.createElement(Dq,{ref:o,iconNode:e,className:nE(`lucide-${Tq(nj(t))}`,`lucide-${t}`,r),...i}));return s.displayName=nj(t),s};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lq=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],un=De("award",Lq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qq=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],aE=De("bell",qq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pq=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],hf=De("book-open",Pq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iq=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],$q=De("briefcase",Iq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uq=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],mf=De("building-2",Uq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bq=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],to=De("building",Bq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zq=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],js=De("calendar",zq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],aj=De("camera",Fq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hq=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Yl=De("check",Hq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Gq=De("chevron-down",Vq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zq=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],iE=De("chevron-left",Zq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Kq=De("chevron-right",Yq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ti=De("circle-alert",Wq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qq=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ls=De("circle-check-big",Qq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],sl=De("circle-x",Xq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],si=De("clock",Jq);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],tP=De("code",eP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],lE=De("copy",sP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],oE=De("credit-card",rP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],aP=De("database",nP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],cE=De("dollar-sign",iP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],so=De("download",lP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],cP=De("ellipsis-vertical",oP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],cx=De("external-link",uP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Bm=De("eye-off",dP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qn=De("eye",hP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ri=De("file-text",mP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],pP=De("funnel",fP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],_y=De("globe",gP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Cd=De("graduation-cap",xP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],bP=De("grid-3x3",yP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],wP=De("heart",vP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],jP=De("house",_P);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],SP=De("info",NP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],CP=De("key",EP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],kP=De("list",AP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],hn=De("loader-circle",TP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],RP=De("loader",OP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],uE=De("log-out",MP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Xd=De("mail",DP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ln=De("map-pin",LP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],PP=De("menu",qP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],$P=De("pen",IP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ux=De("phone",UP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ro=De("plus",BP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ad=De("refresh-cw",zP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Jd=De("save",FP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ni=De("search",HP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],jy=De("send",VP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],no=De("settings",GP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],YP=De("share-2",ZP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],dE=De("shield",KP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],QP=De("skip-forward",WP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ij=De("square-check-big",XP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ff=De("square-pen",JP);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],lj=De("square",eI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],sI=De("test-tube",tI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],nI=De("ticket",rI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],go=De("trash-2",aI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],lI=De("trending-up",iI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ji=De("triangle-alert",oI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],rl=De("upload",cI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],xo=De("user-check",uI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],hI=De("user-plus",dI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],fI=De("user-x",mI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ja=De("user",pI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Cr=De("users",gI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],hE=De("video",xI);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mn=De("x",yI),Fi={customClass:{popup:"rounded-lg shadow-xl",title:"text-lg font-semibold text-gray-900",htmlContainer:"text-sm text-gray-600",confirmButton:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",cancelButton:"bg-gray-300 hover:bg-gray-400 text-gray-700 font-medium py-2 px-4 rounded-md transition-colors mr-2",denyButton:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition-colors mr-2"},buttonsStyling:!1},dx={success:(t,e)=>Et.fire({...Fi,icon:"success",title:t,text:e,timer:3e3,timerProgressBar:!0,showConfirmButton:!1}),error:(t,e)=>Et.fire({...Fi,icon:"error",title:t,text:e,confirmButtonText:"OK"}),warning:(t,e)=>Et.fire({...Fi,icon:"warning",title:t,text:e,confirmButtonText:"OK"}),info:(t,e)=>Et.fire({...Fi,icon:"info",title:t,text:e,confirmButtonText:"OK"}),confirm:(t,e,s="Yes",r="Cancel")=>Et.fire({...Fi,icon:"question",title:t,text:e,showCancelButton:!0,confirmButtonText:s,cancelButtonText:r}),confirmDelete:t=>Et.fire({...Fi,icon:"warning",title:"Are you sure?",text:`Do you want to delete ${t}? This action cannot be undone.`,showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",customClass:{...Fi.customClass,confirmButton:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}}),loading:(t="Processing...")=>Et.fire({...Fi,title:t,allowEscapeKey:!1,allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{Et.showLoading()}}),toast:{success:t=>Et.fire({toast:!0,position:"top-end",icon:"success",title:t,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}}),error:t=>Et.fire({toast:!0,position:"top-end",icon:"error",title:t,showConfirmButton:!1,timer:4e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}}),info:t=>Et.fire({toast:!0,position:"top-end",icon:"info",title:t,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,customClass:{popup:"rounded-lg shadow-lg"}})},copyToClipboard:(t,e="Copied to clipboard!")=>{navigator.clipboard.writeText(t).then(()=>{dx.toast.success(e)}).catch(()=>{dx.toast.error("Failed to copy to clipboard")})}},Os=(t,e,s)=>dx[t](e,s),bI=()=>{const t=Ns(),[e,s]=M.useState(Qa.getDisplayInfo()),[r,i]=M.useState(!1);M.useEffect(()=>{const u=()=>{s(Qa.getDisplayInfo())};u(),window.addEventListener("storage",u);const h=setInterval(u,1e3);return()=>{window.removeEventListener("storage",u),clearInterval(h)}},[]);const o=async()=>{i(!0);try{const u=await Qa.stopImpersonation();u.success?(Os("success","Exited impersonation mode"),t("/dashboard"),window.location.reload()):Os("error",u.error||"Failed to exit impersonation")}catch{Os("error","Error exiting impersonation")}finally{i(!1)}};return e.isImpersonating?n.jsx("div",{className:"fixed top-0 left-0 right-0 z-[60] bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-lg",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex items-center justify-between py-3",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ji,{className:"h-5 w-5 animate-pulse"}),n.jsx("span",{className:"font-semibold",children:"IMPERSONATION MODE"})]}),n.jsxs("div",{className:"hidden sm:flex items-center space-x-4 text-sm",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ja,{className:"h-4 w-4"}),n.jsxs("span",{children:["Original: ",n.jsx("strong",{children:e.originalEmail})]})]}),n.jsx("span",{children:""}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ja,{className:"h-4 w-4"}),n.jsxs("span",{children:["Viewing as: ",n.jsx("strong",{children:e.targetEmail})]})]})]})]}),n.jsxs("button",{onClick:o,disabled:r,className:"flex items-center space-x-2 bg-white text-orange-600 px-4 py-2 rounded-md font-medium hover:bg-orange-50 transition-colors disabled:opacity-50",children:[n.jsx(uE,{className:"h-4 w-4"}),n.jsx("span",{children:r?"Exiting...":"Exit Impersonation"})]})]}),n.jsx("div",{className:"sm:hidden pb-3 text-sm",children:n.jsxs("div",{className:"flex flex-col space-y-1",children:[n.jsxs("span",{children:["From: ",n.jsx("strong",{children:e.originalEmail})]}),n.jsxs("span",{children:["As: ",n.jsx("strong",{children:e.targetEmail})]})]})})]})}):null},vI=({children:t})=>{const e=Ns(),{user:s,roles:r,reset:i,getEffectiveRoles:o,simulatedRole:u}=jt(),[h,m]=M.useState(!1),[f,p]=M.useState(!1);o();const x=async()=>{m(!0);try{await V.auth.signOut(),i(),e("/login")}catch(E){console.error("Error signing out:",E)}finally{m(!1)}},b=Qa.isImpersonating(),j=Qa.getDisplayInfo(),v=b?{email:j.targetEmail}:s;o();const S=()=>{p(!f)},_=E=>{e(E),p(!1)};return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx(bI,{}),n.jsxs("nav",{className:`bg-white shadow-sm border-b sticky z-50 ${b?"top-16":"top-0"}`,children:[n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsx("div",{className:"flex items-center",children:n.jsx("button",{onClick:()=>_("/dashboard"),className:"flex items-center focus:outline-none",children:n.jsx("img",{src:"/logo-500.png",alt:"English Australia",className:"h-12 w-auto"})})}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"hidden sm:flex items-center space-x-2 text-sm text-gray-600",children:[n.jsx(Ja,{className:"h-4 w-4"}),n.jsx("span",{children:v?.email})]}),n.jsx("button",{onClick:S,className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",children:f?n.jsx(mn,{className:"h-6 w-6"}):n.jsx(PP,{className:"h-6 w-6"})})]})]})}),f&&n.jsx("div",{className:"absolute left-0 right-0 bg-white shadow-lg border-b z-40 animate-in slide-in-from-top duration-200 top-16",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 space-y-1",children:[n.jsxs("div",{className:"border-b pb-4 mb-4",children:[n.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Navigation"}),n.jsxs("button",{onClick:()=>_("/dashboard"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(jP,{className:"h-4 w-4 mr-3 text-blue-500"}),"Dashboard"]}),n.jsx(Qt,{permission:"CREATE_CPD",children:n.jsxs("button",{onClick:()=>_("/cpd"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(hf,{className:"h-4 w-4 mr-3 text-green-500"}),"My CPDs"]})}),n.jsx(Qt,{permission:"REGISTER_EVENT",children:n.jsxs("button",{onClick:()=>_("/events"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(js,{className:"h-4 w-4 mr-3 text-purple-500"}),"Events"]})}),n.jsx(Qt,{permission:"REGISTER_EVENT",children:n.jsxs("button",{onClick:()=>_("/my-registrations"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(js,{className:"h-4 w-4 mr-3 text-orange-500"}),"My Registrations"]})})]}),n.jsxs("div",{className:"border-b pb-4 mb-4",children:[n.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Learning Platform"}),n.jsxs("button",{onClick:()=>{ll(async()=>{const{openLearningService:E}=await Promise.resolve().then(()=>yZ);return{openLearningService:E}},void 0).then(({openLearningService:E})=>{E.launchSSO(void 0,!0).catch(console.error)})},className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(Cd,{className:"h-4 w-4 mr-3 text-indigo-500"}),"OpenLearning"]})]}),n.jsx(Qt,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsxs("div",{className:"border-b pb-4 mb-4",children:[n.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Administration"}),n.jsxs("button",{onClick:()=>_("/admin"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(dE,{className:"h-4 w-4 mr-3 text-red-500"}),"Admin Dashboard"]}),n.jsxs("button",{onClick:()=>_("/admin/members"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(Cr,{className:"h-4 w-4 mr-3 text-blue-500"}),"Members"]}),n.jsxs("button",{onClick:()=>_("/admin/membership"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(no,{className:"h-4 w-4 mr-3 text-gray-500"}),"Membership"]}),n.jsxs("button",{onClick:()=>_("/admin/institutions"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(mf,{className:"h-4 w-4 mr-3 text-purple-500"}),"Institutions"]}),n.jsxs("button",{onClick:()=>_("/admin/openlearning"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(Cd,{className:"h-4 w-4 mr-3 text-indigo-500"}),"OpenLearning Integration"]})]})}),n.jsxs("div",{className:"pt-2",children:[n.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Account"}),n.jsxs("button",{onClick:()=>_("/profile"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(Ja,{className:"h-4 w-4 mr-3 text-gray-500"}),"Profile"]}),n.jsxs("button",{onClick:x,disabled:h,className:"flex items-center w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md transition-colors disabled:opacity-50",children:[n.jsx(uE,{className:"h-4 w-4 mr-3"}),h?"Logging out...":"Logout"]})]}),n.jsx("div",{className:"sm:hidden pt-4 mt-4 border-t",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 px-3",children:[n.jsx(Ja,{className:"h-4 w-4"}),n.jsx("span",{children:v?.email})]})})]})})]}),n.jsx("main",{className:"flex-1",children:t}),n.jsx("footer",{className:"bg-white border-t mt-auto",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-2 sm:space-y-0",children:[n.jsxs("div",{className:"text-sm text-gray-500",children:[" ",new Date().getFullYear()," English Australia. All rights reserved."]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"text-xs text-gray-400",children:Tc.simple}),!1,u&&!Qa.isImpersonating()&&n.jsxs("div",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:["Simulating: ",u]})]})]})})}),f&&n.jsx("div",{className:"fixed inset-0 z-30 bg-black bg-opacity-50 lg:hidden",onClick:()=>p(!1)})]})},mE=()=>{const[t,e]=M.useState({total:0,active:0,newThisMonth:0,inactive:0}),[s,r]=M.useState(!0);M.useEffect(()=>{(async()=>{try{const u=await da.getMemberStats();e(u)}catch(u){console.error("Error loading statistics:",u)}finally{r(!1)}})()},[]);const i=[{title:"Total Members",value:t.total,icon:Cr,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Active Members",value:t.active,icon:xo,color:"text-green-600",bgColor:"bg-green-100"},{title:"New This Month",value:t.newThisMonth,icon:hI,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Inactive Members",value:t.inactive,icon:fI,color:"text-red-600",bgColor:"bg-red-100"}];return s?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(o=>n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})},o))}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map(o=>{const u=o.icon;return n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`p-3 rounded-lg ${o.bgColor}`,children:n.jsx(u,{className:`h-6 w-6 ${o.color}`})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:o.title}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.value})]})]})},o.title)})})},wI=()=>{const t=Ns(),{user:e}=jt(),s=e?.user_metadata?.role==="AdminSuper",r=[{title:"Manage Members",description:"View, create and edit members",icon:Cr,color:"text-blue-600",bgColor:"bg-blue-100",onClick:()=>t("/admin/members")},{title:"CPDs",description:"Approve and manage CPD activities",icon:hf,color:"text-purple-600",bgColor:"bg-purple-100",onClick:()=>t("/admin/cpds")},{title:"Approvals",description:"Pending approval items",icon:xo,color:"text-orange-600",bgColor:"bg-orange-100",onClick:()=>t("/admin/approvals")},{title:"Reports",description:"View reports and statistics",icon:ri,color:"text-indigo-600",bgColor:"bg-indigo-100",onClick:()=>t("/admin/reports")},{title:"Import Activities",description:"Import CPD activities from CSV",icon:rl,color:"text-teal-600",bgColor:"bg-teal-100",onClick:()=>t("/admin/import-activities")},{title:"Import System",description:"Import members, companies & memberships",icon:aP,color:"text-rose-600",bgColor:"bg-rose-100",onClick:()=>t("/admin/import-system")},{title:"OpenLearning",description:"Manage OpenLearning integration",icon:Cd,color:"text-green-600",bgColor:"bg-green-100",onClick:()=>t("/admin/openlearning")},{title:"Bulk Management",description:"Mass delete and manage members",icon:go,color:"text-red-600",bgColor:"bg-red-100",onClick:()=>t("/admin/bulk-management"),requireSuperAdmin:!0},{title:"Settings",description:"System settings",icon:no,color:"text-gray-600",bgColor:"bg-gray-100",onClick:()=>t("/admin/settings")}];return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Administrative Panel"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Manage members, events and system settings"})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Member Statistics"}),n.jsx(mE,{})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Administrative Tools"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.filter(i=>!i.requireSuperAdmin||s).map(i=>{const o=i.icon;return n.jsx(ue,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:i.onClick,children:n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:`p-3 rounded-lg ${i.bgColor}`,children:n.jsx(o,{className:`h-6 w-6 ${i.color}`})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:i.title}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:i.description}),n.jsx(se,{variant:"outline",size:"sm",onClick:u=>{u.stopPropagation(),i.onClick()},children:"Access"})]})]})},i.title)})})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(se,{className:"h-16 text-left justify-start",onClick:()=>t("/admin/members"),children:[n.jsx(Cr,{className:"mr-3 h-5 w-5"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"New Member"}),n.jsx("div",{className:"text-xs opacity-75",children:"Register member"})]})]}),n.jsxs(se,{variant:"outline",className:"h-16 text-left justify-start",onClick:()=>t("/admin/events"),children:[n.jsx(js,{className:"mr-3 h-5 w-5"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"New Event"}),n.jsx("div",{className:"text-xs opacity-75",children:"Create event"})]})]}),n.jsxs(se,{variant:"outline",className:"h-16 text-left justify-start",onClick:()=>t("/admin/cpds"),children:[n.jsx(hf,{className:"mr-3 h-5 w-5"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Approve CPDs"}),n.jsx("div",{className:"text-xs opacity-75",children:"Review pending"})]})]}),n.jsxs(se,{variant:"outline",className:"h-16 text-left justify-start",onClick:()=>t("/admin/reports"),children:[n.jsx(ri,{className:"mr-3 h-5 w-5"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"View Reports"}),n.jsx("div",{className:"text-xs opacity-75",children:"Analytics and metrics"})]})]})]})]})]})};function _I(t,e={}){const{filename:s=`export-${new Date().toISOString().split("T")[0]}.csv`,headers:r,includeHeaders:i=!0}=e;if(!t||t.length===0){console.warn("No data to export");return}const o=r||Array.from(new Set(t.flatMap(x=>Object.keys(x)))),u=[];i&&u.push(o.map(x=>oj(x)).join(",")),t.forEach(x=>{const b=o.map(j=>{const v=x[j];return oj(jI(v))});u.push(b.join(","))});const h=u.join(`
`),m=new Blob(["\uFEFF"+h],{type:"text/csv;charset=utf-8;"}),f=document.createElement("a"),p=URL.createObjectURL(m);f.setAttribute("href",p),f.setAttribute("download",s),f.style.visibility="hidden",document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(p)}function oj(t){if(t==null)return"";const e=String(t);return e.includes(",")||e.includes('"')||e.includes(`
`)||e.includes("\r")?`"${e.replace(/"/g,'""')}"`:e}function jI(t){return t==null?"":t instanceof Date?t.toISOString():typeof t=="boolean"?t?"Yes":"No":typeof t=="object"?JSON.stringify(t):String(t)}function fE(t,e){const s=t.map(r=>({"First Name":r.first_name,"Last Name":r.last_name,Email:r.email,Phone:r.phone||"","Membership Status":r.membership_status,"Membership Type":r.membership_type,"Interest Group":r.interest_group||"",City:r.city||"",State:r.state||"",Country:r.country||"Australia",Profession:r.profession||"","Experience Years":r.experience_years||"",Qualifications:r.qualifications||"",Roles:r.member_roles?.map(i=>i.role).join(", ")||"","Member Since":r.membership_start_date?new Date(r.membership_start_date).toLocaleDateString():"",Newsletter:r.receive_newsletters?"Yes":"No","Event Notifications":r.receive_event_notifications?"Yes":"No"}));_I(s,{filename:e||`members-export-${new Date().toISOString().split("T")[0]}.csv`})}const NI=["Full Provider","Associate Provider","Corporate Affiliate","Professional Affiliate"],SI=({onMemberSelect:t,onAddMember:e,onEditMember:s})=>{const[r,i]=M.useState([]),[o,u]=M.useState(!0),[h,m]=M.useState(!1),[f,p]=M.useState({search:"",status:"",type:"",interestGroup:"",city:"",state:"",hasRoles:!1}),x=Ns(),{roles:b}=jt(),j=b.includes("AdminSuper"),[v,S]=M.useState(1),[_,E]=M.useState(0),[A]=M.useState(20),O=async()=>{try{u(!0);const C={search:f.search||void 0,status:f.status||void 0,type:f.type||void 0,page:v,pageSize:A},{data:z,count:R}=await da.searchMembersPaginated(C);let D=z;f.interestGroup&&(D=D.filter(q=>q.interest_group===f.interestGroup)),f.city&&(D=D.filter(q=>q.city?.toLowerCase().includes(f.city.toLowerCase()))),f.state&&(D=D.filter(q=>q.state?.toLowerCase().includes(f.state.toLowerCase()))),f.hasRoles&&(D=D.filter(q=>q.member_roles&&q.member_roles.length>0)),i(D),E(R)}catch(C){console.error("Error loading members:",C),ae("error","Failed to load members")}finally{u(!1)}};M.useEffect(()=>{O()},[v,f]);const F=async()=>{try{const{data:C}=await da.searchMembersPaginated({search:f.search||void 0,status:f.status||void 0,type:f.type||void 0,pageSize:1e4});if(C.length===0){ae("warning","No members to export");return}fE(C),ae("success",`Exported ${C.length} members to CSV`)}catch(C){console.error("Error exporting members:",C),ae("error","Failed to export members")}},k=async C=>{if(!j){ae("error","Only SuperAdmin can impersonate users");return}const z=await Qa.startImpersonation(C.id);z.success?(ae("success",`Now viewing as ${C.first_name} ${C.last_name}`),x("/dashboard"),window.location.reload()):ae("error",z.error||"Failed to start impersonation")},L=()=>{p({search:"",status:"",type:"",interestGroup:"",city:"",state:"",hasRoles:!1}),S(1)},B=Object.values(f).filter(C=>C&&C!=="").length,w=Math.ceil(_/A);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Members Management"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Manage member accounts, roles, and groups"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(se,{onClick:F,variant:"outline",className:"flex items-center gap-2",children:[n.jsx(so,{className:"w-4 h-4"}),"Export CSV"]}),e&&n.jsxs(se,{onClick:e,children:[n.jsx(ro,{className:"w-4 h-4 mr-2"}),"Add Member"]})]})]}),n.jsxs(ue,{className:"p-4",children:[n.jsxs("div",{className:"flex gap-4 items-center",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(ni,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx(Ne,{type:"text",placeholder:"Search by name, email, or phone...",value:f.search,onChange:C=>{p(z=>({...z,search:C.target.value})),S(1)},className:"pl-10"})]}),n.jsxs(se,{variant:"outline",onClick:()=>m(!h),className:`flex items-center gap-2 ${B>0?"border-blue-500":""}`,children:[n.jsx(pP,{className:"w-4 h-4"}),"Filters",B>0&&n.jsx("span",{className:"bg-blue-500 text-white text-xs rounded-full px-2 py-0.5",children:B})]})]}),h&&n.jsxs("div",{className:"mt-4 pt-4 border-t grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"status-filter",children:"Membership Status"}),n.jsxs("select",{id:"status-filter",value:f.status,onChange:C=>p(z=>({...z,status:C.target.value})),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"suspended",children:"Suspended"}),n.jsx("option",{value:"expired",children:"Expired"})]})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"type-filter",children:"Membership Type"}),n.jsxs("select",{id:"type-filter",value:f.type,onChange:C=>p(z=>({...z,type:C.target.value})),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"All Types"}),n.jsx("option",{value:"standard",children:"Standard"}),n.jsx("option",{value:"premium",children:"Premium"}),n.jsx("option",{value:"student",children:"Student"}),n.jsx("option",{value:"corporate",children:"Corporate"})]})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"group-filter",children:"Interest Group"}),n.jsxs("select",{id:"group-filter",value:f.interestGroup,onChange:C=>p(z=>({...z,interestGroup:C.target.value})),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"All Groups"}),NI.map(C=>n.jsx("option",{value:C,children:C},C))]})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"city-filter",children:"City"}),n.jsx(Ne,{id:"city-filter",type:"text",placeholder:"Filter by city...",value:f.city,onChange:C=>p(z=>({...z,city:C.target.value}))})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"state-filter",children:"State"}),n.jsx(Ne,{id:"state-filter",type:"text",placeholder:"Filter by state...",value:f.state,onChange:C=>p(z=>({...z,state:C.target.value}))})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:f.hasRoles,onChange:C=>p(z=>({...z,hasRoles:C.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsx("span",{className:"text-sm",children:"Has special roles"})]})}),n.jsx("div",{className:"md:col-span-3 flex justify-end gap-2",children:n.jsxs(se,{variant:"outline",size:"sm",onClick:L,className:"flex items-center gap-2",children:[n.jsx(mn,{className:"w-3 h-3"}),"Clear Filters"]})})]})]}),n.jsx(ue,{children:o?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading members..."})]}):r.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(Cr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No members found"}),n.jsx("p",{className:"text-gray-600",children:B>0?"Try adjusting your filters":"Start by adding your first member"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Membership"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Interest Group"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roles"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(C=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[C.first_name," ",C.last_name]}),C.profession&&n.jsx("div",{className:"text-sm text-gray-500",children:C.profession})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"text-sm",children:[n.jsx("div",{className:"text-gray-900",children:C.email}),C.phone&&n.jsx("div",{className:"text-gray-500",children:C.phone})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:`inline-flex text-xs font-medium px-2 py-1 rounded-full ${C.membership_status==="active"?"bg-green-100 text-green-800":C.membership_status==="inactive"?"bg-gray-100 text-gray-800":C.membership_status==="suspended"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:C.membership_status}),n.jsx("span",{className:"text-xs text-gray-500 capitalize",children:C.membership_type})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"text-sm text-gray-900",children:C.interest_group||"-"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("div",{className:"text-sm text-gray-900",children:[C.city,C.state].filter(Boolean).join(", ")||"-"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:C.member_roles?.map(z=>n.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-purple-100 text-purple-800",children:z.role},z.id))||"-"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex justify-center gap-2",children:[t&&n.jsx("button",{onClick:()=>t(C),className:"text-gray-400 hover:text-gray-600",title:"View details",children:n.jsx(qn,{className:"w-4 h-4"})}),s&&n.jsx("button",{onClick:()=>s(C),className:"text-blue-400 hover:text-blue-600",title:"Edit member",children:n.jsx(ff,{className:"w-4 h-4"})}),j&&n.jsx("button",{onClick:()=>k(C),className:"text-purple-400 hover:text-purple-600",title:"View as this user",children:n.jsx(xo,{className:"w-4 h-4"})})]})})]},C.id))})]})}),w>1&&n.jsxs("div",{className:"px-6 py-4 border-t flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(v-1)*A+1," to"," ",Math.min(v*A,_)," of ",_," members"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(se,{variant:"outline",size:"sm",onClick:()=>S(C=>Math.max(1,C-1)),disabled:v===1,children:n.jsx(iE,{className:"w-4 h-4"})}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,w)},(C,z)=>{let R;return w<=5||v<=3?R=z+1:v>=w-2?R=w-4+z:R=v-2+z,n.jsx(se,{variant:v===R?"primary":"outline",size:"sm",onClick:()=>S(R),children:R},R)})}),n.jsx(se,{variant:"outline",size:"sm",onClick:()=>S(C=>Math.min(w,C+1)),disabled:v===w,children:n.jsx(Kq,{className:"w-4 h-4"})})]})]})]})})]})},Nm=[{code:"AU",name:"Australia",flag:"",dialCode:"+61",format:"### ### ###",maxLength:9},{code:"US",name:"United States",flag:"",dialCode:"+1",format:"(###) ###-####",maxLength:10},{code:"BR",name:"Brazil",flag:"",dialCode:"+55",format:"(##) #####-####",maxLength:11},{code:"GB",name:"United Kingdom",flag:"",dialCode:"+44",format:"#### ### ###",maxLength:10},{code:"CA",name:"Canada",flag:"",dialCode:"+1",format:"(###) ###-####",maxLength:10},{code:"DE",name:"Germany",flag:"",dialCode:"+49",format:"### ########",maxLength:11},{code:"FR",name:"France",flag:"",dialCode:"+33",format:"## ## ## ## ##",maxLength:10},{code:"JP",name:"Japan",flag:"",dialCode:"+81",format:"##-####-####",maxLength:11},{code:"CN",name:"China",flag:"",dialCode:"+86",format:"### #### ####",maxLength:11}];function pE({value:t="",onChange:e,placeholder:s,disabled:r,className:i=""}){const[o,u]=M.useState(!1),h=j=>{if(!j)return{country:Nm[0],number:""};const v=Nm.find(_=>j.startsWith(_.dialCode))||Nm[0],S=j.replace(v.dialCode,"").replace(/\s/g,"");return{country:v,number:S}},{country:m,number:f}=h(t),p=(j,v,S)=>{const E=j.replace(/\D/g,"").slice(0,S);let A="",O=0;for(let F=0;F<v.length&&O<E.length;F++)v[F]==="#"?(A+=E[O],O++):A+=v[F];return A},x=j=>{const v=p(f,j.format,j.maxLength);e(`${j.dialCode} ${v}`.trim()),u(!1)},b=j=>{const v=j.target.value,S=p(v,m.format,m.maxLength);e(`${m.dialCode} ${S}`.trim())};return n.jsxs("div",{className:`relative ${i}`,children:[n.jsxs("div",{className:"flex",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",disabled:r,className:"flex items-center gap-2 px-3 py-2 border border-r-0 border-gray-300 rounded-l-md bg-gray-50 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed min-w-[120px]",onClick:()=>u(!o),children:[n.jsx("span",{className:"text-lg",children:m.flag}),n.jsx("span",{className:"text-sm font-medium",children:m.dialCode}),n.jsx(Gq,{className:"w-4 h-4"})]}),o&&n.jsx("div",{className:"absolute z-50 top-full left-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto min-w-[280px]",children:Nm.map(j=>n.jsxs("button",{type:"button",className:"flex items-center gap-3 w-full px-3 py-2 text-left hover:bg-gray-100 text-sm",onClick:()=>x(j),children:[n.jsx("span",{className:"text-lg",children:j.flag}),n.jsx("span",{className:"font-medium",children:j.dialCode}),n.jsx("span",{className:"text-gray-600",children:j.name})]},j.code))})]}),n.jsx("input",{type:"tel",value:p(f,m.format,m.maxLength),onChange:b,placeholder:s||m.format.replace(/#/g,"0"),disabled:r,className:"flex-1 px-3 py-2 border border-gray-300 rounded-r-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"})]}),o&&n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)})]})}const EI=({memberEmail:t,onClose:e,onSuccess:s})=>{const[r,i]=M.useState(""),[o,u]=M.useState(!1),[h,m]=M.useState(""),[f,p]=M.useState(""),x=()=>{const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let S="";for(let _=0;_<12;_++)S+=v.charAt(Math.floor(Math.random()*v.length));i(S)},b=async()=>{if(!r){m("Please generate a temporary password");return}u(!0),m("");try{const{error:v}=await V.auth.admin.createUser({email:t,password:r,email_confirm:!0});if(v)m(`Unable to create automatically. Please create manually in Supabase Studio:
        
1. Go to Authentication > Users
2. Click "Add user" > "Create new user"  
3. Email: ${t}
4. Password: ${r}
5. Check "Auto Confirm User"`);else{m(` User created successfully!
        
Temporary credentials:
Email: ${t}
Password: ${r}

 User must change password on first login.`);const S=`${window.location.origin}/login?email=${encodeURIComponent(t)}`;p(S)}}catch(v){m(`Error: ${v instanceof Error?v.message:"Unknown error"}`)}finally{u(!1)}},j=v=>{df.copyToClipboard(v,"Copied to clipboard!")};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs(ue,{className:"w-full max-w-md p-6 m-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-bold",children:"Invite User"}),n.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-xl",children:""})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(he,{children:"Member Email"}),n.jsx(Ne,{value:t,disabled:!0,className:"bg-gray-100"})]}),n.jsxs("div",{children:[n.jsx(he,{children:"Temporary Password"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ne,{type:"text",value:r,onChange:v=>i(v.target.value),placeholder:"Click 'Generate' to create a password"}),n.jsx(se,{type:"button",onClick:x,variant:"outline",children:"Generate"})]})]}),h&&n.jsx("div",{className:`p-3 rounded-md text-sm whitespace-pre-line ${h.includes("")?"bg-green-50 text-green-800":h.includes("Unable to create")?"bg-yellow-50 text-yellow-800":"bg-red-50 text-red-800"}`,children:h}),f&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(he,{children:"Login Link"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ne,{value:f,readOnly:!0,className:"text-xs"}),n.jsx(se,{type:"button",onClick:()=>j(f),variant:"outline",size:"sm",children:"Copy"})]})]}),r&&n.jsx("div",{className:"space-y-2",children:n.jsx(se,{type:"button",onClick:()=>j(`Email: ${t}
Password: ${r}`),variant:"outline",className:"w-full",children:"Copy Credentials"})}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(se,{onClick:e,variant:"outline",className:"flex-1",children:"Close"}),n.jsx(se,{onClick:b,disabled:o||!r,className:"flex-1",children:o?"Creating...":"Create Account"})]})]})]})})},CI=({member:t,onSave:e,onCancel:s})=>{const r=!!t,[i,o]=M.useState({first_name:t?.first_name||"",last_name:t?.last_name||"",email:t?.email||"",phone:t?.phone||"",date_of_birth:t?.date_of_birth||"",address_line1:t?.address_line1||"",address_line2:t?.address_line2||"",city:t?.city||"",state:t?.state||"",postal_code:t?.postal_code||"",country:t?.country||"Australia",membership_status:t?.membership_status||"active",membership_type:t?.membership_type||"standard",membership_start_date:t?.membership_start_date||new Date().toISOString().split("T")[0],membership_end_date:t?.membership_end_date||"",profession:t?.profession||"",experience_years:t?.experience_years?.toString()||"",qualifications:t?.qualifications||"",receive_newsletters:t?.receive_newsletters??!0,receive_event_notifications:t?.receive_event_notifications??!0,roles:t?.member_roles?.map(E=>E.role)||["member"]}),[u,h]=M.useState(!1),[m,f]=M.useState(null),[p,x]=M.useState(!1),[b,j]=M.useState(""),v=async E=>{if(!(!E||E.length<4))try{if(/^\d{4}$/.test(E)){const F={1:"NSW",2:"NSW",3:"VIC",4:"QLD",5:"SA",6:"WA",7:"TAS",0:"NT"}[E[0]]||"NSW";o(k=>({...k,state:F,country:"Australia"}));return}if(/^\d{5}$/.test(E)){o(O=>({...O,country:"United States"}));return}if(/^[A-Z]{1,2}\d{1,2}[A-Z]?\s?\d[A-Z]{2}$/i.test(E)){o(O=>({...O,country:"United Kingdom"}));return}const A=E.replace(/\D/g,"");if(/^\d{8}$/.test(A)){o(O=>({...O,country:"Brazil"}));return}o(O=>({...O,country:"Australia"}))}catch(A){console.error("Error fetching address data:",A)}},S=async E=>{E.preventDefault(),h(!0),f(null);try{const A={first_name:i.first_name,last_name:i.last_name,email:i.email,phone:i.phone||null,date_of_birth:i.date_of_birth||null,address_line1:i.address_line1||null,address_line2:i.address_line2||null,city:i.city||null,state:i.state||null,postal_code:i.postal_code||null,country:i.country||null,membership_status:i.membership_status,membership_type:i.membership_type,membership_start_date:i.membership_start_date||null,membership_end_date:i.membership_end_date||null,profession:i.profession||null,experience_years:i.experience_years?parseInt(i.experience_years):null,qualifications:i.qualifications||null,receive_newsletters:i.receive_newsletters,receive_event_notifications:i.receive_event_notifications};let O;if(r&&t?O=await da.updateMember(t.id,A):O=await da.createMember(A),r&&t){const k=t.member_roles.map(w=>w.role),L=k.filter(w=>!i.roles.includes(w)),B=i.roles.filter(w=>!k.includes(w));for(const w of L)await da.removeMemberRole(t.id,w);for(const w of B)await da.addMemberRole(t.id,w)}else for(const k of i.roles)await da.addMemberRole(O.id,k);const F=await da.getMemberById(O.id);F&&(e?.(F),r||(j(i.email),x(!0)))}catch(A){f(A instanceof Error?A.message:"Error saving member"),console.error("Erro ao salvar membro:",A)}finally{h(!1)}},_=(E,A)=>{o(A?O=>({...O,roles:[...O.roles,E]}):O=>({...O,roles:O.roles.filter(F=>F!==E)}))};return n.jsxs(ue,{className:"p-6",children:[n.jsx("div",{className:"flex justify-between items-center mb-6",children:n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r?"Edit Member":"New Member"})}),m&&n.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:n.jsx("p",{className:"text-red-800",children:m})}),n.jsxs("form",{onSubmit:S,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"first_name",children:"First Name *"}),n.jsx(Ne,{id:"first_name",required:!0,value:i.first_name,onChange:E=>o(A=>({...A,first_name:E.target.value}))})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"last_name",children:"Last Name *"}),n.jsx(Ne,{id:"last_name",required:!0,value:i.last_name,onChange:E=>o(A=>({...A,last_name:E.target.value}))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"email",children:"Email *"}),n.jsx(Ne,{id:"email",type:"email",required:!0,value:i.email,onChange:E=>o(A=>({...A,email:E.target.value}))})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"phone",children:"Phone"}),n.jsx(pE,{value:i.phone,onChange:E=>o(A=>({...A,phone:E})),placeholder:"Enter phone number"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"date_of_birth",children:"Date of Birth"}),n.jsx(Ne,{id:"date_of_birth",type:"date",value:i.date_of_birth,onChange:E=>o(A=>({...A,date_of_birth:E.target.value}))})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"profession",children:"Profession"}),n.jsx(Ne,{id:"profession",value:i.profession,onChange:E=>o(A=>({...A,profession:E.target.value}))})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Address"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(he,{htmlFor:"address_line1",children:"Address Line 1"}),n.jsx(Ne,{id:"address_line1",value:i.address_line1,onChange:E=>o(A=>({...A,address_line1:E.target.value})),placeholder:"123 Main Street"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(he,{htmlFor:"address_line2",children:"Address Line 2"}),n.jsx(Ne,{id:"address_line2",value:i.address_line2,onChange:E=>o(A=>({...A,address_line2:E.target.value})),placeholder:"Apartment 4B"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"city",children:"City"}),n.jsx(Ne,{id:"city",value:i.city,onChange:E=>o(A=>({...A,city:E.target.value})),placeholder:"Sydney"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"state",children:"State"}),n.jsx(Ne,{id:"state",value:i.state,onChange:E=>o(A=>({...A,state:E.target.value})),placeholder:"NSW"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"postal_code",children:"Postal Code *"}),n.jsx(Ne,{id:"postal_code",value:i.postal_code,onChange:E=>{const A=E.target.value;o(O=>({...O,postal_code:A})),A&&A.length>=4&&v(A)},placeholder:"2000"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"country",children:"Country"}),n.jsx(Ne,{id:"country",value:i.country,onChange:E=>o(A=>({...A,country:E.target.value})),placeholder:"Australia"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Membership"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"membership_status",children:"Status"}),n.jsxs("select",{id:"membership_status",value:i.membership_status,onChange:E=>o(A=>({...A,membership_status:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"suspended",children:"Suspended"}),n.jsx("option",{value:"expired",children:"Expired"})]})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"membership_type",children:"Type"}),n.jsxs("select",{id:"membership_type",value:i.membership_type,onChange:E=>o(A=>({...A,membership_type:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"standard",children:"Standard"}),n.jsx("option",{value:"premium",children:"Premium"}),n.jsx("option",{value:"student",children:"Student"}),n.jsx("option",{value:"corporate",children:"Corporate"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"membership_start_date",children:"Start Date"}),n.jsx(Ne,{id:"membership_start_date",type:"date",value:i.membership_start_date,onChange:E=>o(A=>({...A,membership_start_date:E.target.value}))})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"membership_end_date",children:"End Date"}),n.jsx(Ne,{id:"membership_end_date",type:"date",value:i.membership_end_date,onChange:E=>o(A=>({...A,membership_end_date:E.target.value}))})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Roles"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:["member","admin","super_admin","moderator","instructor"].map(E=>n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:i.roles.includes(E),onChange:A=>_(E,A.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-700 capitalize",children:E.replace("_"," ")})]},E))})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Settings"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:i.receive_newsletters,onChange:E=>o(A=>({...A,receive_newsletters:E.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Receive newsletters"})]}),n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:i.receive_event_notifications,onChange:E=>o(A=>({...A,receive_event_notifications:E.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Receive event notifications"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Professional Information"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.jsxs("div",{children:[n.jsx(he,{htmlFor:"experience_years",children:"Years of Experience"}),n.jsx(Ne,{id:"experience_years",type:"number",min:"0",value:i.experience_years,onChange:E=>o(A=>({...A,experience_years:E.target.value}))})]})}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"qualifications",children:"Qualifications"}),n.jsx("textarea",{id:"qualifications",rows:3,value:i.qualifications,onChange:E=>o(A=>({...A,qualifications:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the member's qualifications..."})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6",children:[n.jsx(se,{type:"button",variant:"outline",onClick:s,disabled:u,children:"Cancel"}),n.jsxs(se,{type:"submit",disabled:u,children:[u?"Saving...":r?"Update":"Create"," Member"]})]})]}),p&&n.jsx(EI,{memberEmail:b,onClose:()=>x(!1),onSuccess:()=>x(!1)})]})},AI=()=>{const[t,e]=M.useState("list"),[s,r]=M.useState(null),i=()=>{r(null),e("form")},o=f=>{r(f),e("form")},u=f=>{r(f),e("view")},h=f=>{r(f),e("list")},m=()=>{r(null),e("list")};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t==="list"&&n.jsxs("div",{className:"space-y-8",children:[n.jsx(mE,{}),n.jsx(SI,{onAddMember:i,onEditMember:o,onMemberSelect:u})]}),t==="form"&&n.jsx(CI,{member:s,onSave:h,onCancel:m}),t==="view"&&s&&n.jsx(kI,{member:s,onEdit:()=>o(s),onBack:m})]})},kI=({member:t,onEdit:e,onBack:s})=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[t.first_name," ",t.last_name]}),n.jsxs("div",{className:"space-x-4",children:[n.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Back"}),n.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Edit"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personal Information"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Email:"}),n.jsx("p",{className:"text-sm text-gray-900",children:t.email})]}),t.phone&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Phone:"}),n.jsx("p",{className:"text-sm text-gray-900",children:t.phone})]}),t.date_of_birth&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Date of Birth:"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.date_of_birth).toLocaleDateString("en-AU")})]}),t.profession&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Profession:"}),n.jsx("p",{className:"text-sm text-gray-900",children:t.profession})]})]})]}),n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Membership Status"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Status:"}),n.jsx("p",{className:"text-sm text-gray-900 capitalize",children:t.membership_status})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Type:"}),n.jsx("p",{className:"text-sm text-gray-900 capitalize",children:t.membership_type})]}),t.membership_start_date&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Start Date:"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.membership_start_date).toLocaleDateString("en-AU")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Roles:"}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:t.member_roles.map(r=>n.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-purple-100 text-purple-800",children:r.role},r.id))})]})]})]}),(t.address_line1||t.city||t.state)&&n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address"}),n.jsxs("div",{className:"space-y-2",children:[t.address_line1&&n.jsx("p",{className:"text-sm text-gray-900",children:t.address_line1}),t.address_line2&&n.jsx("p",{className:"text-sm text-gray-900",children:t.address_line2}),n.jsx("p",{className:"text-sm text-gray-900",children:[t.city,t.state,t.postal_code].filter(Boolean).join(", ")}),t.country&&n.jsx("p",{className:"text-sm text-gray-900",children:t.country})]})]}),(t.experience_years||t.qualifications)&&n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Professional Information"}),n.jsxs("div",{className:"space-y-3",children:[t.experience_years&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Years of Experience:"}),n.jsx("p",{className:"text-sm text-gray-900",children:t.experience_years})]}),t.qualifications&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Qualifications:"}),n.jsx("p",{className:"text-sm text-gray-900",children:t.qualifications})]})]})]})]}),n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"System Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Created on:"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.created_at).toLocaleString("en-AU")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Last updated:"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.updated_at).toLocaleString("en-AU")})]})]})]})]});function TI(){const[t,e]=M.useState({total:0,byStatus:{active:0,inactive:0,suspended:0,expired:0},byType:{standard:0,premium:0,student:0,corporate:0},byGroup:{}}),[s,r]=M.useState([]),[i,o]=M.useState(!0),[u,h]=M.useState({status:"",type:"",group:""});M.useEffect(()=>{m(),f()},[]);const m=async()=>{try{const{count:v}=await V.from("members").select("*",{count:"exact",head:!0}),S=["active","inactive","suspended","expired"],_={active:0,inactive:0,suspended:0,expired:0};for(const k of S){const{count:L}=await V.from("members").select("*",{count:"exact",head:!0}).eq("membership_status",k);_[k]=L||0}const E=["standard","premium","student","corporate"],A={standard:0,premium:0,student:0,corporate:0};for(const k of E){const{count:L}=await V.from("members").select("*",{count:"exact",head:!0}).eq("membership_type",k);A[k]=L||0}const{data:O}=await V.from("members").select("interest_group").not("interest_group","is",null),F={};O?.forEach(k=>{const L=k.interest_group||"Unknown";F[L]=(F[L]||0)+1}),e({total:v||0,byStatus:_,byType:A,byGroup:F})}catch(v){console.error("Error loading stats:",v)}},f=async()=>{try{o(!0);const{data:v,error:S}=await V.from("members").select("*").order("created_at",{ascending:!1}).limit(10);if(S)throw S;r(v||[])}catch(v){console.error("Error loading members:",v),ae("error","Failed to load members")}finally{o(!1)}},p=async()=>{if(s.length===0){ae("warning","No members selected");return}try{const v={};if(u.status&&(v.membership_status=u.status),u.type&&(v.membership_type=u.type),u.group&&(v.interest_group=u.group),Object.keys(v).length===0){ae("warning","No changes selected");return}for(const S of s)await V.from("members").update(v).eq("id",S.id);ae("success",`Updated ${s.length} members`),f(),m(),h({status:"",type:"",group:""})}catch(v){console.error("Error updating members:",v),ae("error","Failed to update members")}},x=async()=>{try{const{data:v}=await V.from("members").select("*");v&&v.length>0&&(fE(v,"all-members-export.csv"),ae("success",`Exported ${v.length} members`))}catch(v){console.error("Error exporting:",v),ae("error","Failed to export members")}},b=v=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800",expired:"bg-yellow-100 text-yellow-800"})[v],j=v=>{switch(v){case"premium":return n.jsx(un,{className:"w-4 h-4"});case"corporate":return n.jsx(to,{className:"w-4 h-4"});case"student":return n.jsx(Cd,{className:"w-4 h-4"});default:return n.jsx(Cr,{className:"w-4 h-4"})}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Membership Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage membership types, statuses, and interest groups"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Members"}),n.jsx("p",{className:"text-2xl font-bold",children:t.total})]}),n.jsx(Cr,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Active Members"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.byStatus.active})]}),n.jsx(xo,{className:"w-8 h-8 text-green-500"})]})}),n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Premium Members"}),n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:t.byType.premium})]}),n.jsx(un,{className:"w-8 h-8 text-purple-500"})]})}),n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Interest Groups"}),n.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:Object.keys(t.byGroup).length})]}),n.jsx(lI,{className:"w-8 h-8 text-indigo-500"})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[n.jsxs(ue,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Membership Status Distribution"}),n.jsx("div",{className:"space-y-3",children:Object.entries(t.byStatus).map(([v,S])=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${b(v)}`,children:v})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-semibold",children:S}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.total>0?(S/t.total*100).toFixed(1):0,"%)"]})]})]},v))})]}),n.jsxs(ue,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Membership Type Distribution"}),n.jsx("div",{className:"space-y-3",children:Object.entries(t.byType).map(([v,S])=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[j(v),n.jsx("span",{className:"capitalize",children:v})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-semibold",children:S}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.total>0?(S/t.total*100).toFixed(1):0,"%)"]})]})]},v))})]})]}),n.jsxs(ue,{className:"p-6 mb-8",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Interest Groups Distribution"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(t.byGroup).map(([v,S])=>n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:v}),n.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:S}),n.jsx("p",{className:"text-sm text-gray-500",children:"members"})]},v))})]}),n.jsxs(ue,{className:"p-6 mb-8",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Bulk Membership Update"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"bulk-status",children:"Update Status"}),n.jsxs("select",{id:"bulk-status",value:u.status,onChange:v=>h({...u,status:v.target.value}),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"No change"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"suspended",children:"Suspended"}),n.jsx("option",{value:"expired",children:"Expired"})]})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"bulk-type",children:"Update Type"}),n.jsxs("select",{id:"bulk-type",value:u.type,onChange:v=>h({...u,type:v.target.value}),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"No change"}),n.jsx("option",{value:"standard",children:"Standard"}),n.jsx("option",{value:"premium",children:"Premium"}),n.jsx("option",{value:"student",children:"Student"}),n.jsx("option",{value:"corporate",children:"Corporate"})]})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"bulk-group",children:"Update Interest Group"}),n.jsxs("select",{id:"bulk-group",value:u.group,onChange:v=>h({...u,group:v.target.value}),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"No change"}),n.jsx("option",{value:"Full Provider",children:"Full Provider"}),n.jsx("option",{value:"Associate Provider",children:"Associate Provider"}),n.jsx("option",{value:"Corporate Affiliate",children:"Corporate Affiliate"}),n.jsx("option",{value:"Professional Affiliate",children:"Professional Affiliate"})]})]}),n.jsxs("div",{className:"flex items-end gap-2",children:[n.jsxs(se,{onClick:p,className:"flex items-center gap-2",children:[n.jsx(Ad,{className:"w-4 h-4"}),"Update Selected"]}),n.jsxs(se,{onClick:x,variant:"outline",className:"flex items-center gap-2",children:[n.jsx(so,{className:"w-4 h-4"}),"Export All"]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Recent Members (Select for bulk update)"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:n.jsx("input",{type:"checkbox",onChange:v=>{v.target.checked?r(s):r([])}})}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Member"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Interest Group"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Member Since"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(v=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2",children:n.jsx("input",{type:"checkbox",checked:!0,onChange:()=>{}})}),n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-gray-900",children:[v.first_name," ",v.last_name]}),n.jsx("div",{className:"text-sm text-gray-500",children:v.email})]})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${b(v.membership_status)}`,children:v.membership_status})}),n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[j(v.membership_type),n.jsx("span",{className:"text-sm capitalize",children:v.membership_type})]})}),n.jsx("td",{className:"px-4 py-2 text-sm",children:v.interest_group||"-"}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:v.membership_start_date?new Date(v.membership_start_date).toLocaleDateString():"-"})]},v.id))})]})})]})]}),n.jsxs(ue,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(se,{onClick:()=>window.location.href="/admin/members",variant:"outline",children:"View All Members"}),n.jsx(se,{onClick:()=>window.location.href="/admin/user-import",variant:"outline",children:"Import Members"}),n.jsxs(se,{onClick:m,variant:"outline",className:"flex items-center justify-center gap-2",children:[n.jsx(Ad,{className:"w-4 h-4"}),"Refresh Stats"]})]})]})]})}function OI(){const[t,e]=M.useState([]),[s,r]=M.useState(!0),[i,o]=M.useState(""),[u,h]=M.useState(null),[m,f]=M.useState(!1),[p,x]=M.useState({name:"",parent_company:"",abn:"",company_email:"",company_type:"",cricos_code:"",address_line1:"",address_line2:"",address_line3:"",suburb:"",postcode:"",state:"",country:"Australia",phone:"",website:"",courses_offered:"",status:"active"}),[b,j]=M.useState({total:0,active:0,inactive:0,suspended:0,totalMembers:0,totalMemberships:0});M.useEffect(()=>{v(),S()},[]);const v=async()=>{try{r(!0);const{data:w,error:C}=await V.from("institutions").select(`
          *,
          member_institutions(count),
          memberships(count)
        `).order("name");if(C)throw C;const z=w?.map(R=>({...R,member_count:R.member_institutions?.[0]?.count||0,active_memberships:R.memberships?.[0]?.count||0}))||[];e(z)}catch(w){console.error("Error loading institutions:",w),ae("error","Failed to load institutions")}finally{r(!1)}},S=async()=>{try{const{count:w}=await V.from("institutions").select("*",{count:"exact",head:!0}),{data:C}=await V.from("institutions").select("status"),z=C?.reduce((q,H)=>(q[H.status]=(q[H.status]||0)+1,q),{active:0,inactive:0,suspended:0})||{active:0,inactive:0,suspended:0},{count:R}=await V.from("member_institutions").select("*",{count:"exact",head:!0}),{count:D}=await V.from("memberships").select("*",{count:"exact",head:!0}).eq("status","active");j({total:w||0,...z,totalMembers:R||0,totalMemberships:D||0})}catch(w){console.error("Error loading stats:",w)}},_=async w=>{w.preventDefault();try{const C={...p,parent_company:p.parent_company||null,abn:p.abn||null,company_email:p.company_email||null,company_type:p.company_type||null,cricos_code:p.cricos_code||null,address_line1:p.address_line1||null,address_line2:p.address_line2||null,address_line3:p.address_line3||null,suburb:p.suburb||null,postcode:p.postcode||null,state:p.state||null,country:p.country||null,phone:p.phone||null,website:p.website||null,courses_offered:p.courses_offered||null};if(u){const{error:z}=await V.from("institutions").update(C).eq("id",u.id);if(z)throw z;ae("success","Institution updated successfully")}else{const{error:z}=await V.from("institutions").insert([C]);if(z)throw z;ae("success","Institution created successfully")}f(!1),O(),v(),S()}catch(C){console.error("Error saving institution:",C),ae("error",C.message||"Failed to save institution")}},E=w=>{h(w),x({name:w.name,parent_company:w.parent_company||"",abn:w.abn||"",company_email:w.company_email||"",company_type:w.company_type||"",cricos_code:w.cricos_code||"",address_line1:w.address_line1||"",address_line2:w.address_line2||"",address_line3:w.address_line3||"",suburb:w.suburb||"",postcode:w.postcode||"",state:w.state||"",country:w.country||"Australia",phone:w.phone||"",website:w.website||"",courses_offered:w.courses_offered||"",status:w.status}),f(!0)},A=async w=>{if(confirm("Are you sure you want to delete this institution? This action cannot be undone."))try{const{error:C}=await V.from("institutions").delete().eq("id",w);if(C)throw C;ae("success","Institution deleted successfully"),v(),S()}catch(C){console.error("Error deleting institution:",C),ae("error",C.message||"Failed to delete institution")}},O=()=>{h(null),x({name:"",parent_company:"",abn:"",company_email:"",company_type:"",cricos_code:"",address_line1:"",address_line2:"",address_line3:"",suburb:"",postcode:"",state:"",country:"Australia",phone:"",website:"",courses_offered:"",status:"active"})},F=t.filter(w=>w.name.toLowerCase().includes(i.toLowerCase())||w.company_email?.toLowerCase().includes(i.toLowerCase())||w.abn?.toLowerCase().includes(i.toLowerCase())),k=w=>{switch(w){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"suspended":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},L=w=>{switch(w?.toLowerCase()){case"university":return n.jsx(Cd,{className:"w-4 h-4"});case"college":return n.jsx(to,{className:"w-4 h-4"});case"institute":return n.jsx($q,{className:"w-4 h-4"});default:return n.jsx(mf,{className:"w-4 h-4"})}},B=()=>{const w=["Name","ABN","Email","Phone","State","Status","Members","Memberships"],C=F.map(H=>[H.name,H.abn||"",H.company_email||"",H.phone||"",H.state||"",H.status,H.member_count||0,H.active_memberships||0]),z=[w.join(","),...C.map(H=>H.map(X=>`"${X}"`).join(","))].join(`
`),R=new Blob([z],{type:"text/csv"}),D=window.URL.createObjectURL(R),q=document.createElement("a");q.href=D,q.download=`institutions-${new Date().toISOString().split("T")[0]}.csv`,q.click(),window.URL.revokeObjectURL(D),ae("success",`Exported ${F.length} institutions`)};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Institutions Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage educational institutions, companies, and organizations"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-8",children:[n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),n.jsx("p",{className:"text-2xl font-bold",children:b.total})]}),n.jsx(mf,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:b.active})]}),n.jsx(ls,{className:"w-8 h-8 text-green-500"})]})}),n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Inactive"}),n.jsx("p",{className:"text-2xl font-bold text-gray-600",children:b.inactive})]}),n.jsx(sl,{className:"w-8 h-8 text-gray-500"})]})}),n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Suspended"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:b.suspended})]}),n.jsx(sl,{className:"w-8 h-8 text-red-500"})]})}),n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Members"}),n.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:b.totalMembers})]}),n.jsx(Cr,{className:"w-8 h-8 text-indigo-500"})]})}),n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Memberships"}),n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:b.totalMemberships})]}),n.jsx(to,{className:"w-8 h-8 text-purple-500"})]})})]}),n.jsx(ue,{className:"p-6 mb-6",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[n.jsx("div",{className:"flex-1 max-w-md",children:n.jsxs("div",{className:"relative",children:[n.jsx(ni,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx(Ne,{type:"text",placeholder:"Search by name, email, or ABN...",value:i,onChange:w=>o(w.target.value),className:"pl-10"})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(se,{onClick:()=>{O(),f(!0)},className:"flex items-center gap-2",children:[n.jsx(ro,{className:"w-4 h-4"}),"Add Institution"]}),n.jsxs(se,{variant:"outline",onClick:B,className:"flex items-center gap-2",children:[n.jsx(so,{className:"w-4 h-4"}),"Export CSV"]})]})]})}),m&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:u?"Edit Institution":"Add New Institution"}),n.jsxs("form",{onSubmit:_,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"name",children:"Institution Name *"}),n.jsx(Ne,{id:"name",value:p.name,onChange:w=>x({...p,name:w.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"parent_company",children:"Parent Company"}),n.jsx(Ne,{id:"parent_company",value:p.parent_company,onChange:w=>x({...p,parent_company:w.target.value})})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"abn",children:"ABN"}),n.jsx(Ne,{id:"abn",value:p.abn,onChange:w=>x({...p,abn:w.target.value})})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"company_email",children:"Email"}),n.jsx(Ne,{id:"company_email",type:"email",value:p.company_email,onChange:w=>x({...p,company_email:w.target.value})})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"company_type",children:"Institution Type"}),n.jsxs("select",{id:"company_type",value:p.company_type,onChange:w=>x({...p,company_type:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"Select Type"}),n.jsx("option",{value:"University",children:"University"}),n.jsx("option",{value:"College",children:"College"}),n.jsx("option",{value:"Institute",children:"Institute"}),n.jsx("option",{value:"Language School",children:"Language School"}),n.jsx("option",{value:"Training Provider",children:"Training Provider"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"cricos_code",children:"CRICOS Code"}),n.jsx(Ne,{id:"cricos_code",value:p.cricos_code,onChange:w=>x({...p,cricos_code:w.target.value})})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"phone",children:"Phone"}),n.jsx(Ne,{id:"phone",value:p.phone,onChange:w=>x({...p,phone:w.target.value})})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"website",children:"Website"}),n.jsx(Ne,{id:"website",value:p.website,onChange:w=>x({...p,website:w.target.value})})]})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("h3",{className:"font-medium mb-3",children:"Address Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"address_line1",children:"Address Line 1"}),n.jsx(Ne,{id:"address_line1",value:p.address_line1,onChange:w=>x({...p,address_line1:w.target.value})})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"address_line2",children:"Address Line 2"}),n.jsx(Ne,{id:"address_line2",value:p.address_line2,onChange:w=>x({...p,address_line2:w.target.value})})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"suburb",children:"Suburb"}),n.jsx(Ne,{id:"suburb",value:p.suburb,onChange:w=>x({...p,suburb:w.target.value})})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"postcode",children:"Postcode"}),n.jsx(Ne,{id:"postcode",value:p.postcode,onChange:w=>x({...p,postcode:w.target.value})})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"state",children:"State"}),n.jsxs("select",{id:"state",value:p.state,onChange:w=>x({...p,state:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"Select State"}),n.jsx("option",{value:"NSW",children:"New South Wales"}),n.jsx("option",{value:"VIC",children:"Victoria"}),n.jsx("option",{value:"QLD",children:"Queensland"}),n.jsx("option",{value:"WA",children:"Western Australia"}),n.jsx("option",{value:"SA",children:"South Australia"}),n.jsx("option",{value:"TAS",children:"Tasmania"}),n.jsx("option",{value:"ACT",children:"Australian Capital Territory"}),n.jsx("option",{value:"NT",children:"Northern Territory"})]})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"country",children:"Country"}),n.jsx(Ne,{id:"country",value:p.country,onChange:w=>x({...p,country:w.target.value})})]})]})]}),n.jsx("div",{className:"border-t pt-4",children:n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"courses_offered",children:"Courses Offered"}),n.jsx("textarea",{id:"courses_offered",value:p.courses_offered,onChange:w=>x({...p,courses_offered:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"status",children:"Status"}),n.jsxs("select",{id:"status",value:p.status,onChange:w=>x({...p,status:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"suspended",children:"Suspended"})]})]})]})}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[n.jsx(se,{type:"button",variant:"outline",onClick:()=>{f(!1),O()},children:"Cancel"}),n.jsxs(se,{type:"submit",children:[u?"Update":"Create"," Institution"]})]})]})]})})}),n.jsxs(ue,{className:"p-6",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Institutions List"}),s?n.jsx("div",{className:"text-center py-8",children:"Loading institutions..."}):F.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500",children:i?"No institutions found matching your search.":"No institutions found. Add your first institution above."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Institution"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Location"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Members"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:F.map(w=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:w.name}),w.abn&&n.jsxs("div",{className:"text-sm text-gray-500",children:["ABN: ",w.abn]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"text-sm",children:[w.company_email&&n.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[n.jsx(Xd,{className:"w-3 h-3"}),w.company_email]}),w.phone&&n.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[n.jsx(ux,{className:"w-3 h-3"}),w.phone]}),w.website&&n.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[n.jsx(_y,{className:"w-3 h-3"}),n.jsx("a",{href:w.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Website"})]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{className:"text-sm text-gray-600",children:w.suburb&&w.state?n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ln,{className:"w-3 h-3"}),w.suburb,", ",w.state]}):n.jsx("span",{className:"text-gray-400",children:"-"})})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[L(w.company_type),n.jsx("span",{children:w.company_type||"-"})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{children:[w.member_count||0," members"]}),n.jsxs("div",{className:"text-gray-500",children:[w.active_memberships||0," memberships"]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k(w.status)}`,children:w.status})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>E(w),className:"text-blue-600 hover:text-blue-800",title:"Edit",children:n.jsx($P,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>A(w.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:n.jsx(go,{className:"w-4 h-4"})})]})})]},w.id))})]})})]})]})}var zm={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var RI=zm.exports,cj;function MI(){return cj||(cj=1,function(t,e){((s,r)=>{t.exports=r()})(RI,function s(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,o=!r.document&&!!r.postMessage,u=r.IS_PAPA_WORKER||!1,h={},m=0,f={};function p(w){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(C){var z=k(C);z.chunkSize=parseInt(z.chunkSize),C.step||C.chunk||(z.chunkSize=null),this._handle=new S(z),(this._handle.streamer=this)._config=z}).call(this,w),this.parseChunk=function(C,z){var R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<R){let q=this._config.newline;q||(D=this._config.quoteChar||'"',q=this._handle.guessLineEndings(C,D)),C=[...C.split(q).slice(R)].join(q)}this.isFirstChunk&&B(this._config.beforeFirstChunk)&&(D=this._config.beforeFirstChunk(C))!==void 0&&(C=D),this.isFirstChunk=!1,this._halted=!1;var R=this._partialLine+C,D=(this._partialLine="",this._handle.parse(R,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(C=D.meta.cursor,R=(this._finished||(this._partialLine=R.substring(C-this._baseIndex),this._baseIndex=C),D&&D.data&&(this._rowCount+=D.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),u)r.postMessage({results:D,workerId:f.WORKER_ID,finished:R});else if(B(this._config.chunk)&&!z){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=D=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!R||!B(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),R||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(C){B(this._config.error)?this._config.error(C):u&&this._config.error&&r.postMessage({workerId:f.WORKER_ID,error:C,finished:!1})}}function x(w){var C;(w=w||{}).chunkSize||(w.chunkSize=f.RemoteChunkSize),p.call(this,w),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(z){this._input=z,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(C=new XMLHttpRequest,this._config.withCredentials&&(C.withCredentials=this._config.withCredentials),o||(C.onload=L(this._chunkLoaded,this),C.onerror=L(this._chunkError,this)),C.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var z,R=this._config.downloadRequestHeaders;for(z in R)C.setRequestHeader(z,R[z])}var D;this._config.chunkSize&&(D=this._start+this._config.chunkSize-1,C.setRequestHeader("Range","bytes="+this._start+"-"+D));try{C.send(this._config.downloadRequestBody)}catch(q){this._chunkError(q.message)}o&&C.status===0&&this._chunkError()}},this._chunkLoaded=function(){C.readyState===4&&(C.status<200||400<=C.status?this._chunkError():(this._start+=this._config.chunkSize||C.responseText.length,this._finished=!this._config.chunkSize||this._start>=(z=>(z=z.getResponseHeader("Content-Range"))!==null?parseInt(z.substring(z.lastIndexOf("/")+1)):-1)(C),this.parseChunk(C.responseText)))},this._chunkError=function(z){z=C.statusText||z,this._sendError(new Error(z))}}function b(w){(w=w||{}).chunkSize||(w.chunkSize=f.LocalChunkSize),p.call(this,w);var C,z,R=typeof FileReader<"u";this.stream=function(D){this._input=D,z=D.slice||D.webkitSlice||D.mozSlice,R?((C=new FileReader).onload=L(this._chunkLoaded,this),C.onerror=L(this._chunkError,this)):C=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var D=this._input,q=(this._config.chunkSize&&(q=Math.min(this._start+this._config.chunkSize,this._input.size),D=z.call(D,this._start,q)),C.readAsText(D,this._config.encoding));R||this._chunkLoaded({target:{result:q}})},this._chunkLoaded=function(D){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(D.target.result)},this._chunkError=function(){this._sendError(C.error)}}function j(w){var C;p.call(this,w=w||{}),this.stream=function(z){return C=z,this._nextChunk()},this._nextChunk=function(){var z,R;if(!this._finished)return z=this._config.chunkSize,C=z?(R=C.substring(0,z),C.substring(z)):(R=C,""),this._finished=!C,this.parseChunk(R)}}function v(w){p.call(this,w=w||{});var C=[],z=!0,R=!1;this.pause=function(){p.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){p.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(D){this._input=D,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&C.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),C.length?this.parseChunk(C.shift()):z=!0},this._streamData=L(function(D){try{C.push(typeof D=="string"?D:D.toString(this._config.encoding)),z&&(z=!1,this._checkIsFinished(),this.parseChunk(C.shift()))}catch(q){this._streamError(q)}},this),this._streamError=L(function(D){this._streamCleanUp(),this._sendError(D)},this),this._streamEnd=L(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=L(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function S(w){var C,z,R,D,q=Math.pow(2,53),H=-q,X=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,P=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Z=this,Q=0,de=0,U=!1,J=!1,le=[],ee={data:[],errors:[],meta:{}};function xe(Se){return w.skipEmptyLines==="greedy"?Se.join("").trim()==="":Se.length===1&&Se[0].length===0}function we(){if(ee&&R&&(Me("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),R=!1),w.skipEmptyLines&&(ee.data=ee.data.filter(function(qe){return!xe(qe)})),Ae()){let qe=function(Ze,Ke){B(w.transformHeader)&&(Ze=w.transformHeader(Ze,Ke)),le.push(Ze)};var Re=qe;if(ee)if(Array.isArray(ee.data[0])){for(var Se=0;Ae()&&Se<ee.data.length;Se++)ee.data[Se].forEach(qe);ee.data.splice(0,1)}else ee.data.forEach(qe)}function Oe(qe,Ze){for(var Ke=w.header?{}:[],Je=0;Je<qe.length;Je++){var rt=Je,bt=qe[Je],bt=((ut,vt)=>(G=>(w.dynamicTypingFunction&&w.dynamicTyping[G]===void 0&&(w.dynamicTyping[G]=w.dynamicTypingFunction(G)),(w.dynamicTyping[G]||w.dynamicTyping)===!0))(ut)?vt==="true"||vt==="TRUE"||vt!=="false"&&vt!=="FALSE"&&((G=>{if(X.test(G)&&(G=parseFloat(G),H<G&&G<q))return 1})(vt)?parseFloat(vt):P.test(vt)?new Date(vt):vt===""?null:vt):vt)(rt=w.header?Je>=le.length?"__parsed_extra":le[Je]:rt,bt=w.transform?w.transform(bt,rt):bt);rt==="__parsed_extra"?(Ke[rt]=Ke[rt]||[],Ke[rt].push(bt)):Ke[rt]=bt}return w.header&&(Je>le.length?Me("FieldMismatch","TooManyFields","Too many fields: expected "+le.length+" fields but parsed "+Je,de+Ze):Je<le.length&&Me("FieldMismatch","TooFewFields","Too few fields: expected "+le.length+" fields but parsed "+Je,de+Ze)),Ke}var Le;ee&&(w.header||w.dynamicTyping||w.transform)&&(Le=1,!ee.data.length||Array.isArray(ee.data[0])?(ee.data=ee.data.map(Oe),Le=ee.data.length):ee.data=Oe(ee.data,0),w.header&&ee.meta&&(ee.meta.fields=le),de+=Le)}function Ae(){return w.header&&le.length===0}function Me(Se,Oe,Le,Re){Se={type:Se,code:Oe,message:Le},Re!==void 0&&(Se.row=Re),ee.errors.push(Se)}B(w.step)&&(D=w.step,w.step=function(Se){ee=Se,Ae()?we():(we(),ee.data.length!==0&&(Q+=Se.data.length,w.preview&&Q>w.preview?z.abort():(ee.data=ee.data[0],D(ee,Z))))}),this.parse=function(Se,Oe,Le){var Re=w.quoteChar||'"',Re=(w.newline||(w.newline=this.guessLineEndings(Se,Re)),R=!1,w.delimiter?B(w.delimiter)&&(w.delimiter=w.delimiter(Se),ee.meta.delimiter=w.delimiter):((Re=((qe,Ze,Ke,Je,rt)=>{var bt,ut,vt,G;rt=rt||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var re=0;re<rt.length;re++){for(var me,ke=rt[re],Ee=0,Ce=0,Te=0,Pe=(vt=void 0,new E({comments:Je,delimiter:ke,newline:Ze,preview:10}).parse(qe)),We=0;We<Pe.data.length;We++)Ke&&xe(Pe.data[We])?Te++:(me=Pe.data[We].length,Ce+=me,vt===void 0?vt=me:0<me&&(Ee+=Math.abs(me-vt),vt=me));0<Pe.data.length&&(Ce/=Pe.data.length-Te),(ut===void 0||Ee<=ut)&&(G===void 0||G<Ce)&&1.99<Ce&&(ut=Ee,bt=ke,G=Ce)}return{successful:!!(w.delimiter=bt),bestDelimiter:bt}})(Se,w.newline,w.skipEmptyLines,w.comments,w.delimitersToGuess)).successful?w.delimiter=Re.bestDelimiter:(R=!0,w.delimiter=f.DefaultDelimiter),ee.meta.delimiter=w.delimiter),k(w));return w.preview&&w.header&&Re.preview++,C=Se,z=new E(Re),ee=z.parse(C,Oe,Le),we(),U?{meta:{paused:!0}}:ee||{meta:{paused:!1}}},this.paused=function(){return U},this.pause=function(){U=!0,z.abort(),C=B(w.chunk)?"":C.substring(z.getCharIndex())},this.resume=function(){Z.streamer._halted?(U=!1,Z.streamer.parseChunk(C,!0)):setTimeout(Z.resume,3)},this.aborted=function(){return J},this.abort=function(){J=!0,z.abort(),ee.meta.aborted=!0,B(w.complete)&&w.complete(ee),C=""},this.guessLineEndings=function(qe,Re){qe=qe.substring(0,1048576);var Re=new RegExp(_(Re)+"([^]*?)"+_(Re),"gm"),Le=(qe=qe.replace(Re,"")).split("\r"),Re=qe.split(`
`),qe=1<Re.length&&Re[0].length<Le[0].length;if(Le.length===1||qe)return`
`;for(var Ze=0,Ke=0;Ke<Le.length;Ke++)Le[Ke][0]===`
`&&Ze++;return Ze>=Le.length/2?`\r
`:"\r"}}function _(w){return w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(w){var C=(w=w||{}).delimiter,z=w.newline,R=w.comments,D=w.step,q=w.preview,H=w.fastMode,X=null,P=!1,Z=w.quoteChar==null?'"':w.quoteChar,Q=Z;if(w.escapeChar!==void 0&&(Q=w.escapeChar),(typeof C!="string"||-1<f.BAD_DELIMITERS.indexOf(C))&&(C=","),R===C)throw new Error("Comment character same as delimiter");R===!0?R="#":(typeof R!="string"||-1<f.BAD_DELIMITERS.indexOf(R))&&(R=!1),z!==`
`&&z!=="\r"&&z!==`\r
`&&(z=`
`);var de=0,U=!1;this.parse=function(J,le,ee){if(typeof J!="string")throw new Error("Input must be a string");var xe=J.length,we=C.length,Ae=z.length,Me=R.length,Se=B(D),Oe=[],Le=[],Re=[],qe=de=0;if(!J)return Ee();if(H||H!==!1&&J.indexOf(Z)===-1){for(var Ze=J.split(z),Ke=0;Ke<Ze.length;Ke++){if(Re=Ze[Ke],de+=Re.length,Ke!==Ze.length-1)de+=z.length;else if(ee)return Ee();if(!R||Re.substring(0,Me)!==R){if(Se){if(Oe=[],G(Re.split(C)),Ce(),U)return Ee()}else G(Re.split(C));if(q&&q<=Ke)return Oe=Oe.slice(0,q),Ee(!0)}}return Ee()}for(var Je=J.indexOf(C,de),rt=J.indexOf(z,de),bt=new RegExp(_(Q)+_(Z),"g"),ut=J.indexOf(Z,de);;)if(J[de]===Z)for(ut=de,de++;;){if((ut=J.indexOf(Z,ut+1))===-1)return ee||Le.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Oe.length,index:de}),me();if(ut===xe-1)return me(J.substring(de,ut).replace(bt,Z));if(Z===Q&&J[ut+1]===Q)ut++;else if(Z===Q||ut===0||J[ut-1]!==Q){Je!==-1&&Je<ut+1&&(Je=J.indexOf(C,ut+1));var vt=re((rt=rt!==-1&&rt<ut+1?J.indexOf(z,ut+1):rt)===-1?Je:Math.min(Je,rt));if(J.substr(ut+1+vt,we)===C){Re.push(J.substring(de,ut).replace(bt,Z)),J[de=ut+1+vt+we]!==Z&&(ut=J.indexOf(Z,de)),Je=J.indexOf(C,de),rt=J.indexOf(z,de);break}if(vt=re(rt),J.substring(ut+1+vt,ut+1+vt+Ae)===z){if(Re.push(J.substring(de,ut).replace(bt,Z)),ke(ut+1+vt+Ae),Je=J.indexOf(C,de),ut=J.indexOf(Z,de),Se&&(Ce(),U))return Ee();if(q&&Oe.length>=q)return Ee(!0);break}Le.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Oe.length,index:de}),ut++}}else if(R&&Re.length===0&&J.substring(de,de+Me)===R){if(rt===-1)return Ee();de=rt+Ae,rt=J.indexOf(z,de),Je=J.indexOf(C,de)}else if(Je!==-1&&(Je<rt||rt===-1))Re.push(J.substring(de,Je)),de=Je+we,Je=J.indexOf(C,de);else{if(rt===-1)break;if(Re.push(J.substring(de,rt)),ke(rt+Ae),Se&&(Ce(),U))return Ee();if(q&&Oe.length>=q)return Ee(!0)}return me();function G(Te){Oe.push(Te),qe=de}function re(Te){var Pe=0;return Pe=Te!==-1&&(Te=J.substring(ut+1,Te))&&Te.trim()===""?Te.length:Pe}function me(Te){return ee||(Te===void 0&&(Te=J.substring(de)),Re.push(Te),de=xe,G(Re),Se&&Ce()),Ee()}function ke(Te){de=Te,G(Re),Re=[],rt=J.indexOf(z,de)}function Ee(Te){if(w.header&&!le&&Oe.length&&!P){var Pe=Oe[0],We=Object.create(null),gt=new Set(Pe);let es=!1;for(let ts=0;ts<Pe.length;ts++){let Ss=Pe[ts];if(We[Ss=B(w.transformHeader)?w.transformHeader(Ss,ts):Ss]){let Ms,Gs=We[Ss];for(;Ms=Ss+"_"+Gs,Gs++,gt.has(Ms););gt.add(Ms),Pe[ts]=Ms,We[Ss]++,es=!0,(X=X===null?{}:X)[Ms]=Ss}else We[Ss]=1,Pe[ts]=Ss;gt.add(Ss)}es&&console.warn("Duplicate headers found and renamed."),P=!0}return{data:Oe,errors:Le,meta:{delimiter:C,linebreak:z,aborted:U,truncated:!!Te,cursor:qe+(le||0),renamedHeaders:X}}}function Ce(){D(Ee()),Oe=[],Le=[]}},this.abort=function(){U=!0},this.getCharIndex=function(){return de}}function A(w){var C=w.data,z=h[C.workerId],R=!1;if(C.error)z.userError(C.error,C.file);else if(C.results&&C.results.data){var D={abort:function(){R=!0,O(C.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:F,resume:F};if(B(z.userStep)){for(var q=0;q<C.results.data.length&&(z.userStep({data:C.results.data[q],errors:C.results.errors,meta:C.results.meta},D),!R);q++);delete C.results}else B(z.userChunk)&&(z.userChunk(C.results,D,C.file),delete C.results)}C.finished&&!R&&O(C.workerId,C.results)}function O(w,C){var z=h[w];B(z.userComplete)&&z.userComplete(C),z.terminate(),delete h[w]}function F(){throw new Error("Not implemented.")}function k(w){if(typeof w!="object"||w===null)return w;var C,z=Array.isArray(w)?[]:{};for(C in w)z[C]=k(w[C]);return z}function L(w,C){return function(){w.apply(C,arguments)}}function B(w){return typeof w=="function"}return f.parse=function(w,C){var z=(C=C||{}).dynamicTyping||!1;if(B(z)&&(C.dynamicTypingFunction=z,z={}),C.dynamicTyping=z,C.transform=!!B(C.transform)&&C.transform,!C.worker||!f.WORKERS_SUPPORTED)return z=null,f.NODE_STREAM_INPUT,typeof w=="string"?(w=(R=>R.charCodeAt(0)!==65279?R:R.slice(1))(w),z=new(C.download?x:j)(C)):w.readable===!0&&B(w.read)&&B(w.on)?z=new v(C):(r.File&&w instanceof File||w instanceof Object)&&(z=new b(C)),z.stream(w);(z=(()=>{var R;return!!f.WORKERS_SUPPORTED&&(R=(()=>{var D=r.URL||r.webkitURL||null,q=s.toString();return f.BLOB_URL||(f.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",q,")();"],{type:"text/javascript"})))})(),(R=new r.Worker(R)).onmessage=A,R.id=m++,h[R.id]=R)})()).userStep=C.step,z.userChunk=C.chunk,z.userComplete=C.complete,z.userError=C.error,C.step=B(C.step),C.chunk=B(C.chunk),C.complete=B(C.complete),C.error=B(C.error),delete C.worker,z.postMessage({input:w,config:C,workerId:z.id})},f.unparse=function(w,C){var z=!1,R=!0,D=",",q=`\r
`,H='"',X=H+H,P=!1,Z=null,Q=!1,de=((()=>{if(typeof C=="object"){if(typeof C.delimiter!="string"||f.BAD_DELIMITERS.filter(function(le){return C.delimiter.indexOf(le)!==-1}).length||(D=C.delimiter),typeof C.quotes!="boolean"&&typeof C.quotes!="function"&&!Array.isArray(C.quotes)||(z=C.quotes),typeof C.skipEmptyLines!="boolean"&&typeof C.skipEmptyLines!="string"||(P=C.skipEmptyLines),typeof C.newline=="string"&&(q=C.newline),typeof C.quoteChar=="string"&&(H=C.quoteChar),typeof C.header=="boolean"&&(R=C.header),Array.isArray(C.columns)){if(C.columns.length===0)throw new Error("Option columns is empty");Z=C.columns}C.escapeChar!==void 0&&(X=C.escapeChar+H),C.escapeFormulae instanceof RegExp?Q=C.escapeFormulae:typeof C.escapeFormulae=="boolean"&&C.escapeFormulae&&(Q=/^[=+\-@\t\r].*$/)}})(),new RegExp(_(H),"g"));if(typeof w=="string"&&(w=JSON.parse(w)),Array.isArray(w)){if(!w.length||Array.isArray(w[0]))return U(null,w,P);if(typeof w[0]=="object")return U(Z||Object.keys(w[0]),w,P)}else if(typeof w=="object")return typeof w.data=="string"&&(w.data=JSON.parse(w.data)),Array.isArray(w.data)&&(w.fields||(w.fields=w.meta&&w.meta.fields||Z),w.fields||(w.fields=Array.isArray(w.data[0])?w.fields:typeof w.data[0]=="object"?Object.keys(w.data[0]):[]),Array.isArray(w.data[0])||typeof w.data[0]=="object"||(w.data=[w.data])),U(w.fields||[],w.data||[],P);throw new Error("Unable to serialize unrecognized input");function U(le,ee,xe){var we="",Ae=(typeof le=="string"&&(le=JSON.parse(le)),typeof ee=="string"&&(ee=JSON.parse(ee)),Array.isArray(le)&&0<le.length),Me=!Array.isArray(ee[0]);if(Ae&&R){for(var Se=0;Se<le.length;Se++)0<Se&&(we+=D),we+=J(le[Se],Se);0<ee.length&&(we+=q)}for(var Oe=0;Oe<ee.length;Oe++){var Le=(Ae?le:ee[Oe]).length,Re=!1,qe=Ae?Object.keys(ee[Oe]).length===0:ee[Oe].length===0;if(xe&&!Ae&&(Re=xe==="greedy"?ee[Oe].join("").trim()==="":ee[Oe].length===1&&ee[Oe][0].length===0),xe==="greedy"&&Ae){for(var Ze=[],Ke=0;Ke<Le;Ke++){var Je=Me?le[Ke]:Ke;Ze.push(ee[Oe][Je])}Re=Ze.join("").trim()===""}if(!Re){for(var rt=0;rt<Le;rt++){0<rt&&!qe&&(we+=D);var bt=Ae&&Me?le[rt]:rt;we+=J(ee[Oe][bt],rt)}Oe<ee.length-1&&(!xe||0<Le&&!qe)&&(we+=q)}}return we}function J(le,ee){var xe,we;return le==null?"":le.constructor===Date?JSON.stringify(le).slice(1,25):(we=!1,Q&&typeof le=="string"&&Q.test(le)&&(le="'"+le,we=!0),xe=le.toString().replace(de,X),(we=we||z===!0||typeof z=="function"&&z(le,ee)||Array.isArray(z)&&z[ee]||((Ae,Me)=>{for(var Se=0;Se<Me.length;Se++)if(-1<Ae.indexOf(Me[Se]))return!0;return!1})(xe,f.BAD_DELIMITERS)||-1<xe.indexOf(D)||xe.charAt(0)===" "||xe.charAt(xe.length-1)===" ")?H+xe+H:xe)}},f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!o&&!!r.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=E,f.ParserHandle=S,f.NetworkStreamer=x,f.FileStreamer=b,f.StringStreamer=j,f.ReadableStreamStreamer=v,r.jQuery&&((i=r.jQuery).fn.parse=function(w){var C=w.config||{},z=[];return this.each(function(q){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var H=0;H<this.files.length;H++)z.push({file:this.files[H],inputElem:this,instanceConfig:i.extend({},C)})}),R(),this;function R(){if(z.length===0)B(w.complete)&&w.complete();else{var q,H,X,P,Z=z[0];if(B(w.before)){var Q=w.before(Z.file,Z.inputElem);if(typeof Q=="object"){if(Q.action==="abort")return q="AbortError",H=Z.file,X=Z.inputElem,P=Q.reason,void(B(w.error)&&w.error({name:q},H,X,P));if(Q.action==="skip")return void D();typeof Q.config=="object"&&(Z.instanceConfig=i.extend(Z.instanceConfig,Q.config))}else if(Q==="skip")return void D()}var de=Z.instanceConfig.complete;Z.instanceConfig.complete=function(U){B(de)&&de(U,Z.file,Z.inputElem),D()},f.parse(Z.file,Z.instanceConfig)}}function D(){z.splice(0,1),R()}}),u&&(r.onmessage=function(w){w=w.data,f.WORKER_ID===void 0&&w&&(f.WORKER_ID=w.workerId),typeof w.input=="string"?r.postMessage({workerId:f.WORKER_ID,results:f.parse(w.input,w.config),finished:!0}):(r.File&&w.input instanceof File||w.input instanceof Object)&&(w=f.parse(w.input,w.config))&&r.postMessage({workerId:f.WORKER_ID,results:w,finished:!0})}),(x.prototype=Object.create(p.prototype)).constructor=x,(b.prototype=Object.create(p.prototype)).constructor=b,(j.prototype=Object.create(j.prototype)).constructor=j,(v.prototype=Object.create(p.prototype)).constructor=v,f})}(zm)),zm.exports}var DI=MI();const gE=Pd(DI),LI=()=>{const[t,e]=M.useState(null),[s,r]=M.useState(!1),[i,o]=M.useState([]),[u,h]=M.useState(null),[m,f]=M.useState([]),[p,x]=M.useState(!1),[b,j]=M.useState(null),v=k=>{const L=k.target.files?.[0];if(L){if(L.type!=="text/csv"&&!L.name.endsWith(".csv")){ae("error","Please select a valid CSV file.");return}e(L),o([]),h(null),f([]),x(!1),j(null)}},S=(k,L)=>{const B=[];if((!k.userId||k.userId.trim()==="")&&B.push({row:L,field:"User Id",message:"User ID is required",data:k}),(!k.email||k.email.trim()==="")&&B.push({row:L,field:"Email",message:"Email is required",data:k}),(!k.categorySerial||k.categorySerial.trim()==="")&&B.push({row:L,field:"Category Serial",message:"Category Serial is required",data:k}),(!k.category||k.category.trim()==="")&&B.push({row:L,field:"Category",message:"Category is required",data:k}),(!k.activityName||k.activityName.trim()==="")&&B.push({row:L,field:"PD activity name",message:"Activity name is required",data:k}),(!k.completedDate||k.completedDate.trim()==="")&&B.push({row:L,field:"Completed Date",message:"Completed date is required",data:k}),(!k.hours||k.hours.trim()==="")&&B.push({row:L,field:"Hours",message:"Hours is required",data:k}),k.email&&k.email.trim()){const w=k.email.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w)||B.push({row:L,field:"Email",message:"Invalid email format",data:k})}if(k.completedDate&&k.completedDate.trim()){const w=k.completedDate.trim();isNaN(Date.parse(w))&&B.push({row:L,field:"Completed Date",message:"Invalid date format (expected YYYY-MM-DD)",data:k})}if(k.hours&&k.hours.trim()){const w=k.hours.trim(),C=parseFloat(w);(isNaN(C)||C<0)&&B.push({row:L,field:"Hours",message:"Hours must be a valid positive number",data:k})}return B},_=k=>new Promise((L,B)=>{gE.parse(k,{header:!0,complete:w=>{try{const C=w.data.filter(z=>z&&Object.keys(z).length>1).map(z=>({activitySerial:z["Activity Serial"]?.toString()||"",userId:z["User Id"]?.toString()||"",user:z.User?.toString()||"",firstName:z["First Name"]?.toString()||"",lastName:z["Last Name"]?.toString()||"",email:(z.Email?.toString()||"").toLowerCase(),categorySerial:z["Category Serial"]?.toString()||"",category:z.Category?.toString()||"",activityName:z["PD activity name"]?.toString()||"",developmentAreas:z["Development areas"]?.toString()||"",completedDate:z["Completed Date"]?.toString()||"",eventWebsite:z["Event website (where possible)"]?.toString()||"",hours:z["Hours of PD (anything below 60 minutes can be entered as a decimal, e.g. 30 mins = 0.5)"]?.toString()||"",supplyEvidence:z["Supply Evidence (e.g. attendance statement)"]?.toString()||"",verified:z.Verified?.toString()||"",personalGoal:z["Personal development goal this activity addresses"]?.toString()||"",keyTakeaways:z["Key take-aways/reflections"]?.toString()||"",howToUse:z["How can I use this in my own teaching?"]?.toString()||"",actionIntended:z["Action I intend to take to experiment with this idea"]?.toString()||""}));L(C)}catch{B(new Error("Failed to parse CSV file"))}},error:w=>{B(new Error(`CSV parsing error: ${w.message}`))}})}),E=async()=>{if(t)try{r(!0);const k=await _(t),L=[];k.slice(0,10).forEach((B,w)=>{const C=S(B,w+1);L.push(...C)}),o(L),f(k.slice(0,10)),x(!0)}catch(k){console.error("Preview error:",k),ae("error","Preview failed",k instanceof Error?k.message:"Unknown error")}finally{r(!1)}},A=async k=>{const{data:L,error:B}=await V.from("members").select("id, user_id").eq("email",k.toLowerCase()).single();return B?null:L},O=async()=>{if(t)try{r(!0),j({phase:"parsing",current:0,total:100,message:"Reading CSV file..."});const k=await _(t);j({phase:"validating",current:0,total:k.length,message:"Validating data..."});const L={total:k.length,successful:0,failed:0,skipped:0},B=[];for(let C=0;C<k.length;C++){j({phase:"validating",current:C+1,total:k.length,message:`Validating row ${C+1} of ${k.length}...`}),await new Promise(q=>setTimeout(q,1));const z=k[C],R=C+1,D=S(z,R);D.length>0&&(B.push(...D),L.failed++)}j({phase:"importing",current:0,total:k.length-L.failed,message:"Importing activities..."});let w=0;for(let C=0;C<k.length;C++){const z=k[C],R=C+1;if(!B.some(q=>q.row===R)){j({phase:"importing",current:w+1,total:k.length-L.failed,message:`Importing activity ${w+1} of ${k.length-L.failed}...`});try{const q=await A(z.email);if(!q){B.push({row:R,field:"Email",message:`User not found with email: ${z.email}`,data:z}),L.failed++,w++;continue}const H=new Date(z.completedDate);if(isNaN(H.getTime())){B.push({row:R,field:"Completed Date",message:"Invalid date format",data:z}),L.failed++,w++;continue}const X=parseFloat(z.hours);if(isNaN(X)||X<0){B.push({row:R,field:"Hours",message:"Invalid hours value",data:z}),L.failed++,w++;continue}const P=[z.developmentAreas&&`Development Areas: ${z.developmentAreas}`,z.personalGoal&&`Personal Goal: ${z.personalGoal}`,z.keyTakeaways&&`Key Takeaways: ${z.keyTakeaways}`,z.howToUse&&`How to Use: ${z.howToUse}`,z.actionIntended&&`Action Intended: ${z.actionIntended}`].filter(Boolean).join(`

`),{error:Z}=await V.from("cpd_activities").insert({member_id:q.id,user_id:q.user_id,category_id:parseInt(z.categorySerial),category_name:z.category,activity_title:z.activityName,description:P||null,date_completed:H.toISOString().split("T")[0],hours:X,evidence_url:z.eventWebsite||null,status:z.verified==="1"?"approved":"pending"});Z?(console.error("Insert error:",Z),B.push({row:R,field:"Database",message:Z.message,data:z}),L.failed++):L.successful++}catch(q){console.error(`Error processing row ${R}:`,q),B.push({row:R,field:"Processing",message:q instanceof Error?q.message:"Unknown error",data:z}),L.failed++}w++}}j({phase:"complete",current:k.length,total:k.length,message:"Import completed!"}),o(B),h(L),L.successful>0&&ae("success",`Successfully imported ${L.successful} activities!`),L.failed>0&&ae("error",`${L.failed} activities failed to import. Check the errors below.`)}catch(k){console.error("Import error:",k),ae("error","Import failed",k instanceof Error?k.message:"Unknown error")}finally{r(!1),setTimeout(()=>{j(null)},3e3)}},F=()=>{e(null),o([]),h(null),f([]),x(!1),j(null)};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Import Activities"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Import CPD activities from CSV files exported from the legacy system"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(ue,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(ri,{className:"h-6 w-6 text-blue-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload CSV File"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Activities CSV File"}),n.jsx("input",{type:"file",accept:".csv",onChange:v,className:`block w-full text-sm text-gray-500
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-full file:border-0
                  file:text-sm file:font-semibold
                  file:bg-blue-50 file:text-blue-700
                  hover:file:bg-blue-100`,disabled:s})]}),t&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("p",{className:"text-sm text-gray-700",children:[n.jsx("strong",{children:"Selected File:"})," ",t.name]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Size: ",(t.size/1024/1024).toFixed(2)," MB"]})]}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx(se,{onClick:E,disabled:!t||s,variant:"outline",children:s?"Processing...":"Preview Data"}),n.jsxs(se,{onClick:O,disabled:!t||s,className:"bg-green-600 hover:bg-green-700",children:[n.jsx(rl,{className:"mr-2 h-4 w-4"}),s?"Importing...":"Import Activities"]}),(i.length>0||u)&&n.jsx(se,{onClick:F,variant:"outline",disabled:s,children:"Reset"})]})]})]}),n.jsxs(ue,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Expected CSV Format"}),n.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[n.jsx("p",{children:n.jsx("strong",{children:"Required Columns:"})}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[n.jsx("li",{children:"Activity Serial"}),n.jsx("li",{children:"User Id"}),n.jsx("li",{children:"User, First Name, Last Name"}),n.jsx("li",{children:"Email (used to match existing members)"}),n.jsx("li",{children:"Category Serial, Category"}),n.jsx("li",{children:"PD activity name"}),n.jsx("li",{children:"Development areas"}),n.jsx("li",{children:"Completed Date (YYYY-MM-DD format)"}),n.jsx("li",{children:"Hours of PD (decimal number)"}),n.jsx("li",{children:"Event website (optional)"}),n.jsx("li",{children:"Supply Evidence, Verified"}),n.jsx("li",{children:"Personal development goal, Key take-aways, How can I use this, Action I intend to take"})]})]})]}),p&&m.length>0&&n.jsxs(ue,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Data Preview (First 10 rows)"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("th",{className:"border px-4 py-2 text-left",children:"Email"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Category"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Activity Name"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Date"}),n.jsx("th",{className:"border px-4 py-2 text-left",children:"Hours"})]})}),n.jsx("tbody",{children:m.map((k,L)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"border px-4 py-2 text-sm",children:k.email}),n.jsx("td",{className:"border px-4 py-2 text-sm",children:k.category}),n.jsx("td",{className:"border px-4 py-2 text-sm",children:k.activityName}),n.jsx("td",{className:"border px-4 py-2 text-sm",children:k.completedDate}),n.jsx("td",{className:"border px-4 py-2 text-sm",children:k.hours})]},L))})]})})]}),b&&n.jsxs(ue,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(rl,{className:"h-6 w-6 text-blue-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Import Progress"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:b.message}),n.jsxs("span",{className:"text-sm text-gray-500",children:[b.current," / ",b.total]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:n.jsx("div",{className:`h-3 rounded-full transition-all duration-300 ${b.phase==="complete"?"bg-green-600":b.phase==="importing"?"bg-blue-600":"bg-yellow-600"}`,style:{width:`${Math.min(100,b.current/b.total*100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[n.jsx("span",{className:`font-medium ${b.phase==="parsing"?"text-blue-600":b.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Parsing"}),n.jsx("span",{className:`font-medium ${b.phase==="validating"?"text-yellow-600":b.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Validating"}),n.jsx("span",{className:`font-medium ${b.phase==="importing"?"text-blue-600":b.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Importing"}),n.jsx("span",{className:`font-medium ${b.phase==="complete"?"text-green-600":"text-gray-400"}`,children:" Complete"})]}),b.phase==="complete"&&n.jsxs("div",{className:"text-center",children:[n.jsx(ls,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),n.jsx("p",{className:"text-green-700 font-medium",children:"Import completed successfully!"})]})]})]}),u&&n.jsxs(ue,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(ls,{className:"h-6 w-6 text-green-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Import Results"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:u.total}),n.jsx("div",{className:"text-sm text-blue-700",children:"Total Records"})]}),n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.successful}),n.jsx("div",{className:"text-sm text-green-700",children:"Successful"})]}),n.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:u.failed}),n.jsx("div",{className:"text-sm text-red-700",children:"Failed"})]}),n.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:u.skipped}),n.jsx("div",{className:"text-sm text-yellow-700",children:"Skipped"})]})]})]}),i.length>0&&n.jsxs(ue,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(Ji,{className:"h-6 w-6 text-red-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Validation Errors"})]}),n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.map((k,L)=>n.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(mn,{className:"h-5 w-5 text-red-500 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-sm font-medium text-red-800",children:["Row ",k.row,": ",k.field]}),n.jsx("p",{className:"text-sm text-red-700",children:k.message}),k.data.email&&n.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Email: ",k.data.email]})]})]})},L))})]})]})]})},qI="https://english-australia-eau-supabase.lkobs5.easypanel.host",PI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJzZXJ2aWNlX3JvbGUiLAogICAgImlzcyI6ICJzdXBhYmFzZS1kZW1vIiwKICAgICJpYXQiOiAxNjQxNzY5MjAwLAogICAgImV4cCI6IDE3OTk1MzU2MDAKfQ.DaYlNEoUrrEn2Ig7tqibS-PHK5vgusbcbo7X36XVt4Q",la=YN(qI,PI,{auth:{autoRefreshToken:!1,persistSession:!1}});class II{levenshteinDistance(e,s){const r=[];for(let i=0;i<=s.length;i++)r[i]=[i];for(let i=0;i<=e.length;i++)r[0][i]=i;for(let i=1;i<=s.length;i++)for(let o=1;o<=e.length;o++)s.charAt(i-1)===e.charAt(o-1)?r[i][o]=r[i-1][o-1]:r[i][o]=Math.min(r[i-1][o-1]+1,r[i][o-1]+1,r[i-1][o]+1);return r[s.length][e.length]}calculateNameSimilarity(e,s){const r=e.toLowerCase().trim(),i=s.toLowerCase().trim();if(r===i)return 100;const o=this.levenshteinDistance(r,i),u=Math.max(r.length,i.length);return u===0?0:Math.max(0,100-o*100/u)}areEmailsSimilar(e,s){const r=e.toLowerCase().trim(),i=s.toLowerCase().trim();if(r===i)return{similar:!0,domain_match:!0};const o=r.split("@")[1],u=i.split("@")[1],h=o===u,m=r.split("@")[0],f=i.split("@")[0],p=this.calculateNameSimilarity(m,f);return{similar:h&&p>70,domain_match:h}}calculateDuplicateScore(e,s){let r=0;const i={exact_name:!1,similar_name:!1,same_company:!1,similar_email:!1,same_phone:!1,same_address:!1},o=`${e.first_name||""} ${e.last_name||""}`.trim(),u=`${s.first_name||""} ${s.last_name||""}`.trim(),h=this.calculateNameSimilarity(o,u);if(i.name_similarity_score=h,h===100?(i.exact_name=!0,r+=40):h>80?(i.similar_name=!0,r+=30):h>60&&(i.similar_name=!0,r+=20),e.company_id&&s.company_id&&e.company_id===s.company_id?(i.same_company=!0,r+=20):e.company_name&&s.company_name&&this.calculateNameSimilarity(e.company_name,s.company_name)>80&&(i.same_company=!0,r+=15),e.email&&s.email){const b=this.areEmailsSimilar(e.email,s.email);i.similar_email=b.similar,i.email_domain_match=b.domain_match,b.similar?r+=15:b.domain_match&&(r+=10)}const m=(e.phone||e.mobile||"").replace(/\D/g,""),f=(s.phone||s.mobile||"").replace(/\D/g,"");m&&f&&m===f&&(i.same_phone=!0,r+=10);const p={street:!1,suburb:!1,postcode:!1,state:!1};if(e.street_address&&s.street_address){const b=this.calculateNameSimilarity(e.street_address,s.street_address);p.street=b>80,p.street&&(r+=5)}return e.suburb&&s.suburb&&e.suburb.toLowerCase()===s.suburb.toLowerCase()&&(p.suburb=!0,r+=3),e.postcode&&s.postcode&&e.postcode===s.postcode&&(p.postcode=!0,r+=4),e.state&&s.state&&e.state.toLowerCase()===s.state.toLowerCase()&&(p.state=!0,r+=3),Object.values(p).some(b=>b)&&(i.same_address=!0,i.address_components_match=p),{member1:e,member2:s,similarity_score:Math.min(100,r),match_details:i}}async findDuplicatesForMember(e,s=50){try{const{data:r,error:i}=await V.from("members").select("*").eq("id",e).single();if(i||!r)throw new Error("Member not found");const{data:o,error:u}=await V.from("members").select("*").neq("id",e);if(u)throw u;const h=[];for(const m of o||[]){const f=this.calculateDuplicateScore(r,m);f.similarity_score>=s&&h.push(f)}return h.sort((m,f)=>f.similarity_score-m.similarity_score)}catch(r){throw console.error("Error finding duplicates:",r),r}}async findAllDuplicates(e=50){try{const{data:s,error:r}=await V.from("members").select("*").order("last_name",{ascending:!0});if(r)throw r;const i=[],o=new Set;for(let u=0;u<(s?.length||0);u++)for(let h=u+1;h<(s?.length||0);h++){const m=s[u],f=s[h],p=[m.id,f.id].sort().join("-");if(o.has(p))continue;o.add(p);const x=this.calculateDuplicateScore(m,f);x.similarity_score>=e&&i.push(x)}return i.sort((u,h)=>h.similarity_score-u.similarity_score)}catch(s){throw console.error("Error finding all duplicates:",s),s}}async saveDuplicate(e){try{const{error:s}=await V.from("member_duplicates").upsert({member1_id:e.member1.id,member2_id:e.member2.id,similarity_score:e.similarity_score,match_details:e.match_details,status:"pending"},{onConflict:"member1_id,member2_id"});if(s)throw s}catch(s){throw console.error("Error saving duplicate:",s),s}}async getPendingDuplicates(){try{const{data:e,error:s}=await V.from("pending_duplicates_view").select("*");if(s)throw s;return e||[]}catch(e){throw console.error("Error fetching pending duplicates:",e),e}}async reviewDuplicate(e,s,r){try{const{data:{user:i}}=await V.auth.getUser(),{error:o}=await V.from("member_duplicates").update({status:s,reviewed_by:i?.id,reviewed_at:new Date().toISOString(),review_notes:r}).eq("id",e);if(o)throw o;ae("success",`Duplicate marked as ${s.replace("_"," ")}`)}catch(i){throw console.error("Error reviewing duplicate:",i),ae("error","Failed to review duplicate"),i}}async mergeMembers(e,s){try{const{data:{user:r}}=await V.auth.getUser(),{data:i,error:o}=await V.from("member_duplicates").select("*").eq("id",e).single();if(o)throw o;const u=s.primary_member_id,h=u===i.member1_id?i.member2_id:i.member1_id,{data:m,error:f}=await V.from("members").select("*").in("id",[u,h]);if(f)throw f;const p=m.find(S=>S.id===u),x=m.find(S=>S.id===h);if(!p||!x)throw new Error("Members not found");const b={};for(const[S,_]of Object.entries(s.fields_to_keep))!_&&x[S]&&(b[S]=x[S]);if(Object.keys(b).length>0){const{error:S}=await V.from("members").update(b).eq("id",u);if(S)throw S}if(s.relationships.merge_cpd_activities){const{error:S}=await V.from("cpd_activities").update({member_id:u}).eq("member_id",h);S&&console.error("Error transferring CPD activities:",S)}if(s.relationships.merge_event_registrations)try{const{data:S}=await V.from("members").select("user_id").eq("id",u).single(),{data:_}=await V.from("members").select("user_id").eq("id",h).single();if(S?.user_id&&_?.user_id){const{data:E,error:A}=await V.from("event_registrations").select("id").eq("user_id",_.user_id).limit(1);if(!A&&E&&E.length>0){const{data:O}=await V.from("event_registrations").select("count",{count:"exact",head:!0}).eq("user_id",_.user_id),{error:F}=await V.from("event_registrations").update({user_id:S.user_id}).eq("user_id",_.user_id);F?console.log("Event registrations transfer warning:",F.message||"Unknown error"):console.log(`Transferred ${O?.count||0} event registrations`)}else A||console.log("No event registrations to transfer")}else console.log("Members do not have associated user accounts, skipping event transfer")}catch(S){console.log("Event registrations transfer error:",S)}if(s.relationships.merge_payments)try{const{data:S,error:_}=await V.from("payments").select("id").eq("member_id",h).limit(1);if(!_&&S&&S.length>0){const{error:E}=await V.from("payments").update({member_id:u}).eq("member_id",h);E?console.log("Payments transfer warning:",E.message||"Unknown error"):console.log(`Transferred ${S.length} payments`)}else _&&(_.code==="42P01"||_.message?.includes("does not exist"))&&console.log("Payments table not configured, skipping transfer")}catch{console.log("Payments transfer skipped")}const{error:j}=await V.from("member_merge_history").insert({kept_member_id:u,deleted_member_id:h,deleted_member_data:x,merge_data:s,relationships_transferred:s.relationships,performed_by:r?.id});j&&console.error("Error saving merge history:",j);const{error:v}=await V.from("members").delete().eq("id",h);if(v)throw v;await this.reviewDuplicate(e,"merged","Members successfully merged"),ae("success","Members merged successfully")}catch(r){throw console.error("Error merging members:",r),ae("error","Failed to merge members"),r}}async undoMerge(e){try{const{data:{user:s}}=await V.auth.getUser(),{data:r,error:i}=await V.from("member_merge_history").select("*").eq("id",e).single();if(i)throw i;if(!r.can_undo||r.undone)throw new Error("This merge cannot be undone");if(new Date(r.undo_deadline)<new Date)throw new Error("Undo deadline has passed");const{error:o}=await V.from("members").insert(r.deleted_member_data);if(o)throw o;const{error:u}=await V.from("member_merge_history").update({undone:!0,undone_by:s?.id,undone_at:new Date().toISOString()}).eq("id",e);if(u)throw u;ae("success","Merge undone successfully")}catch(s){throw console.error("Error undoing merge:",s),ae("error","Failed to undo merge"),s}}}const Oc=new II,$I=()=>{const t=Ns(),[e,s]=M.useState(null),[r,i]=M.useState(!1),[o,u]=M.useState(null),[h,m]=M.useState([]),[f,p]=M.useState({phase:"",message:"",current:0,total:0}),[x,b]=M.useState(0),j=_=>{const E=_.target.files?.[0];E&&(s(E),u(null),m([]))},v=_=>new Promise((E,A)=>{gE.parse(_,{header:!0,complete:O=>{try{const F=O.data.filter(k=>k&&Object.keys(k).length>1).map(k=>({membershipId:k.ID||"",startDate:k["Start Date"]||"",expiryDate:k["Expiry Date"]||"",lastRenewedDate:k["Last Renewed Date"]||"",status:k.Status||"",previousExpiryDate:k["Previous Expiry Date"]||"",pendingStatus:k["Pending Status"]||"",userId:k.UserId||"",memberTest:k["Member Test"]||"",memberEditableAddress:k["Member Editable Address"]||"",memberTitle:k["Member Title"]||"",memberFirstName:k["Member First Name"]||"",memberLastName:k["Member Last Name"]||"",memberEmail:k["Member Email Address"]||"",memberCompanyName:k["Member Company Name"]||"",memberCompanyNameActual:k["Member Company Name (Actual name)"]||"",memberPosition:k["Member Position"]||"",memberStreetAddress:k["Member Street Address"]||"",memberStreetAddressLine2:k["Member Street Address Line 2"]||"",memberSuburb:k["Member Suburb"]||"",memberPostcode:k["Member Postcode"]||"",memberState:k["Member State"]||"",memberCountry:k["Member Country"]||"",memberMobile:k["Member Mobile"]||"",memberSubscriptions:k["Member Subscriptions"]||"",memberBio:k["Member Bio"]||"",memberBoardRole:k["Member Board Member Role"]||"",memberAreaExpertise:k["Member Area of Expertise"]||"",memberUnsubscribeNotes:k["Member Unsubscribe Notes"]||"",memberTeacherSince:k["Member Teacher Since"]||"",memberCoursesTaught:k["Member Courses Taught"]||"",memberInterestTags:k["Member Interest Tags"]||"",memberEmailSubscriptions:k["Member Email Subscriptions"]||"",memberUsername:k["Member Username"]||"",memberGroups:k["Member Groups"]||"",memberCreated:k["Member Created"]||"",memberLastEdited:k["Member Last Edited"]||"",totalMembers:k["Total Members"]||"1",category:k.Category||"",type:k.Type||"",pricingOption:k["Pricing Option"]||"",pricingOptionCost:k["Pricing Option Cost"]||"0",targetType:k["Target (Individual/Organisation)"]||"",primaryContactUserId:k["Primary Contact's User ID"]||"",primaryContactFirstName:k["Primary Contact's First Name"]||"",primaryContactLastName:k["Primary Contact's Last Name"]||"",primaryContactEmail:k["Primary Contact's Email"]||"",companyId:k["Company ID"]||"",companyName:k["Company Name"]||"",companyEmail:k["Company Email"]||"",companyCompanyName:k["Company Company Name"]||"",companyParentCompany:k["Company Parent Company"]||"",companyABN:k["Company ABN"]||"",companyCompanyEmail:k["Company Company Email Address"]||"",companyCompanyType:k["Company Company Type"]||"",companyCRICOSCode:k["Company CRICOS Code"]||"",companyAddressLine1:k["Company Company Address Line 1"]||"",companyAddressLine2:k["Company Company Address Line 2"]||"",companyAddressLine3:k["Company Company Address Line 3"]||"",companySuburb:k["Company Company Suburb"]||"",companyPostcode:k["Company Company Postcode"]||"",companyState:k["Company Company State"]||"",companyCountry:k["Company Company Country"]||"",companyPhone:k["Company Company Phone"]||"",companyPrimaryContact:k["Company Primary Contact"]||"",companyCoursesOffered:k["Company Courses Offered"]||"",companyLogo:k["Company Logo"]||"",companyWebsite:k["Company Website"]||"",companyMemberSince:k["Company Member Since: (Date)"]||"",companyCancellationDetails:k["Company Membership Cancellation Details"]||""}));E(F)}catch{A(new Error("Failed to parse CSV file"))}},error:O=>{A(new Error(`CSV parsing error: ${O.message}`))}})}),S=async()=>{if(e)try{i(!0),m([]);const _={companies:{total:0,created:0,existing:0,failed:0},memberships:{total:0,created:0,existing:0,failed:0},members:{total:0,created:0,existing:0,failed:0}},E=k=>{if(!k||k===""||k==="0000-00-00"||k==="0000-00-00 00:00:00")return null;const L=new Date(k);return isNaN(L.getTime())?null:k.split(" ")[0]};p({phase:"parsing",message:"Reading CSV file...",current:0,total:100});const A=await v(e),O=new Map,F=new Map;p({phase:"companies",message:"Processing companies...",current:0,total:A.length});for(const k of A)k.companyId&&!O.has(k.companyId)&&O.set(k.companyId,{legacy_company_id:parseInt(k.companyId),company_name:k.companyCompanyName||k.companyName,parent_company:k.companyParentCompany,abn:k.companyABN,company_email:k.companyCompanyEmail||k.companyEmail,company_type:k.companyCompanyType,cricos_code:k.companyCRICOSCode,address_line_1:k.companyAddressLine1,address_line_2:k.companyAddressLine2,address_line_3:k.companyAddressLine3,suburb:k.companySuburb,postcode:k.companyPostcode,state:k.companyState,country:k.companyCountry||"Australia",phone:k.companyPhone,website:k.companyWebsite,courses_offered:k.companyCoursesOffered,member_since:E(k.companyMemberSince),membership_cancellation_details:k.companyCancellationDetails});_.companies.total=O.size;for(const[k,L]of O)try{const{data:B}=await la.from("companies").select("id").eq("legacy_company_id",L.legacy_company_id).maybeSingle();if(B)_.companies.existing++;else{const{error:w}=await la.from("companies").insert(L);w?(_.companies.failed++,m(C=>[...C,`Company ${k}: ${w.message}`])):_.companies.created++}}catch(B){_.companies.failed++,m(w=>[...w,`Company ${k}: ${B}`])}p({phase:"memberships",message:"Processing memberships...",current:0,total:A.length});for(const k of A)if(k.membershipId&&!F.has(k.membershipId)){let L=null;if(k.companyId){const{data:B}=await la.from("companies").select("id").eq("legacy_company_id",parseInt(k.companyId)).maybeSingle();L=B?.id}F.set(k.membershipId,{legacy_membership_id:parseInt(k.membershipId),start_date:E(k.startDate),expiry_date:E(k.expiryDate),last_renewed_date:E(k.lastRenewedDate),previous_expiry_date:E(k.previousExpiryDate),status:k.status||"Active",pending_status:k.pendingStatus,category:k.category,membership_type:k.type,pricing_option:k.pricingOption,pricing_option_cost:parseFloat(k.pricingOptionCost)||0,target_type:k.targetType,total_members:parseInt(k.totalMembers)||1,company_id:L,primary_contact_user_id:k.primaryContactUserId?parseInt(k.primaryContactUserId):null})}_.memberships.total=F.size;for(const[k,L]of F)try{const{data:B}=await la.from("memberships").select("id").eq("legacy_membership_id",L.legacy_membership_id).maybeSingle();if(B)_.memberships.existing++;else{const{error:w}=await la.from("memberships").insert(L);w?(_.memberships.failed++,m(C=>[...C,`Membership ${k}: ${w.message}`])):_.memberships.created++}}catch(B){_.memberships.failed++,m(w=>[...w,`Membership ${k}: ${B}`])}p({phase:"members",message:"Processing members...",current:0,total:A.length}),_.members.total=A.length;for(let k=0;k<A.length;k++){const L=A[k];p({phase:"members",message:`Processing member ${k+1} of ${A.length}...`,current:k+1,total:A.length});try{const{data:B}=await la.from("members").select("id").eq("legacy_user_id",parseInt(L.userId)).maybeSingle();if(B){_.members.existing++;continue}let w=null;if(L.membershipId){const{data:q}=await la.from("memberships").select("id").eq("legacy_membership_id",parseInt(L.membershipId)).maybeSingle();w=q?.id}let C=null;if(L.companyId){const{data:q}=await la.from("companies").select("id").eq("legacy_company_id",parseInt(L.companyId)).maybeSingle();C=q?.id}const z={legacy_user_id:parseInt(L.userId),membership_id:w,company_id:C,title:L.memberTitle,first_name:L.memberFirstName?.trim()||"",last_name:L.memberLastName?.trim()||"",email:L.memberEmail?.toLowerCase()||"",position:L.memberPosition,street_address:L.memberStreetAddress,street_address_line_2:L.memberStreetAddressLine2,suburb:L.memberSuburb,postcode:L.memberPostcode,state:L.memberState,country:L.memberCountry||"Australia",mobile:L.memberMobile,bio:L.memberBio,board_member_role:L.memberBoardRole,area_of_expertise:L.memberAreaExpertise,teacher_since:E(L.memberTeacherSince),courses_taught:L.memberCoursesTaught,interest_tags:L.memberInterestTags,subscriptions:L.memberSubscriptions,email_subscriptions:L.memberEmailSubscriptions,unsubscribe_notes:L.memberUnsubscribeNotes,username:L.memberUsername||L.memberEmail,groups:L.memberGroups,is_test_member:L.memberTest==="1",is_editable_address:L.memberEditableAddress==="1",member_created_date:E(L.memberCreated),member_last_edited:E(L.memberLastEdited),company_name:L.memberCompanyName,company_name_actual:L.memberCompanyNameActual,display_name:`${L.memberFirstName} ${L.memberLastName}`.trim(),membership_status:(L.status||"active").toLowerCase()},{data:R,error:D}=await la.from("members").insert(z).select("id").single();D?(_.members.failed++,m(q=>[...q,`Member ${L.memberEmail}: ${D.message}`])):(_.members.created++,R?.id&&await la.from("member_roles").insert({member_id:R.id,role:"member"}).select().single())}catch(B){_.members.failed++,m(w=>[...w,`Member ${L.memberEmail}: ${B}`])}await new Promise(B=>setTimeout(B,10))}if(u(_),_.members.created>0){p({phase:"complete",message:"Scanning for duplicates...",current:95,total:100});try{const k=await Oc.scanForDuplicates();b(k),k>0&&ae("info",`Found ${k} potential duplicate members`,"Review them in the Duplicates Management page")}catch(k){console.warn("Duplicate scan failed:",k)}}p({phase:"complete",message:"Import completed!",current:100,total:100}),_.companies.created>0&&ae("success",`Created ${_.companies.created} companies`),_.memberships.created>0&&ae("success",`Created ${_.memberships.created} memberships`),_.members.created>0&&ae("success",`Created ${_.members.created} members`)}catch(_){console.error("Import error:",_),ae("error","Import failed",_ instanceof Error?_.message:"Unknown error")}finally{i(!1)}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Import System"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Import members, companies, and memberships from the complete CSV export"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(ue,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Upload Complete CSV"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("input",{type:"file",accept:".csv",onChange:j,className:`block w-full text-sm text-gray-500
                file:mr-4 file:py-2 file:px-4
                file:rounded-full file:border-0
                file:text-sm file:font-semibold
                file:bg-blue-50 file:text-blue-700
                hover:file:bg-blue-100`,disabled:r}),e&&n.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:n.jsxs("p",{className:"text-sm text-gray-700",children:[n.jsx("strong",{children:"Selected File:"})," ",e.name]})}),n.jsxs(se,{onClick:S,disabled:!e||r,className:"bg-green-600 hover:bg-green-700",children:[n.jsx(rl,{className:"mr-2 h-4 w-4"}),r?"Importing...":"Start Import"]})]})]}),f.phase&&n.jsxs(ue,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Import Progress"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm text-gray-600",children:f.message}),f.total>0&&n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${f.current/f.total*100}%`}})})]})]}),o&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(ue,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(mf,{className:"h-6 w-6 text-blue-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Companies"})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("p",{children:["Total: ",o.companies.total]}),n.jsxs("p",{className:"text-green-600",children:["Created: ",o.companies.created]}),n.jsxs("p",{className:"text-yellow-600",children:["Existing: ",o.companies.existing]}),n.jsxs("p",{className:"text-red-600",children:["Failed: ",o.companies.failed]})]})]}),n.jsxs(ue,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(oE,{className:"h-6 w-6 text-purple-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Memberships"})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("p",{children:["Total: ",o.memberships.total]}),n.jsxs("p",{className:"text-green-600",children:["Created: ",o.memberships.created]}),n.jsxs("p",{className:"text-yellow-600",children:["Existing: ",o.memberships.existing]}),n.jsxs("p",{className:"text-red-600",children:["Failed: ",o.memberships.failed]})]})]}),n.jsxs(ue,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(Cr,{className:"h-6 w-6 text-green-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Members"})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("p",{children:["Total: ",o.members.total]}),n.jsxs("p",{className:"text-green-600",children:["Created: ",o.members.created]}),n.jsxs("p",{className:"text-yellow-600",children:["Existing: ",o.members.existing]}),n.jsxs("p",{className:"text-red-600",children:["Failed: ",o.members.failed]})]})]})]}),x>0&&n.jsx(ue,{className:"p-6 border-2 border-yellow-400 bg-yellow-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx(ni,{className:"h-6 w-6 text-yellow-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Duplicates Detected"})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Found ",x," potential duplicate members that need review"]})]}),n.jsx(se,{onClick:()=>t("/admin/duplicates"),className:"bg-yellow-600 hover:bg-yellow-700",children:"Review Duplicates"})]})}),h.length>0&&n.jsxs(ue,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(Ji,{className:"h-6 w-6 text-red-600"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Import Errors"})]}),n.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:h.map((_,E)=>n.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:_},E))})]})]})]})};function UI({postalCode:t,onAddressChange:e,register:s}){const[r,i]=M.useState(!1),[,o]=M.useState({});M.useEffect(()=>{t&&t.length>=4&&u(t)},[t]);const u=async h=>{if(!(!h||h.length<4)){i(!0);try{let m="",f,p;if(/^\d{4}$/.test(h)){m=`https://api.postcodes.io/postcodes/${h}`;try{if(f=await fetch(m),f.ok&&(p=await f.json(),p.result)){const E={city:p.result.admin_district||p.result.parish||"",state:p.result.country||p.result.region||"",country:"Australia"};o(E),e(E);return}}catch{console.warn("UK postcode API failed, trying alternative")}const _={state:{1:"NSW",2:"NSW",3:"VIC",4:"QLD",5:"SA",6:"WA",7:"TAS",0:"NT"}[h[0]]||"NSW",country:"Australia"};o(_),e(_);return}if(/^\d{5}$/.test(h)){m=`http://api.zippopotam.us/us/${h}`;try{if(f=await fetch(m),f.ok){p=await f.json();const v={city:p.places?.[0]?.["place name"]||"",state:p.places?.[0]?.["state abbreviation"]||"",country:"United States"};o(v),e(v);return}}catch{console.warn("US ZIP API failed")}}if(/^[A-Z]{1,2}\d{1,2}[A-Z]?\s?\d[A-Z]{2}$/i.test(h)){m=`https://api.postcodes.io/postcodes/${h.toUpperCase()}`;try{if(f=await fetch(m),f.ok&&(p=await f.json(),p.result)){const v={city:p.result.admin_district||"",state:p.result.region||"",country:"United Kingdom"};o(v),e(v);return}}catch{console.warn("UK postcode API failed")}}const x=h.replace(/\D/g,"");if(/^\d{8}$/.test(x)){m=`https://viacep.com.br/ws/${x}/json/`;try{if(f=await fetch(m),f.ok&&(p=await f.json(),!p.erro)){const v={address_line1:`${p.logradouro||""}`.trim(),city:p.localidade||"",state:p.uf||"",country:"Brazil"};o(v),e(v);return}}catch{console.warn("Brazil CEP API failed")}}let b="Australia";/^\d{5}$/.test(h)?b="United States":/^[A-Z]{1,2}\d{1,2}[A-Z]?\s?\d[A-Z]{2}$/i.test(h)?b="United Kingdom":/^\d{8}$/.test(x)&&(b="Brazil");const j={country:b};o(j),e(j)}catch(m){console.error("Error fetching address data:",m)}finally{i(!1)}}};return n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(he,{htmlFor:"address_line1",children:"Address Line 1"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ne,{id:"address_line1",...s("address_line1"),placeholder:"123 Main Street"}),r&&n.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:n.jsx(hn,{className:"w-4 h-4 animate-spin text-blue-600"})})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(he,{htmlFor:"address_line2",children:"Address Line 2"}),n.jsx(Ne,{id:"address_line2",...s("address_line2"),placeholder:"Apartment 4B"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"city",children:"City"}),n.jsx(Ne,{id:"city",...s("city"),placeholder:"Sydney"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"state",children:"State"}),n.jsx(Ne,{id:"state",...s("state"),placeholder:"NSW"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"postal_code",children:"Postal Code"}),n.jsx(Ne,{id:"postal_code",...s("postal_code"),placeholder:"2000"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"country",children:"Country"}),n.jsx(Ne,{id:"country",...s("country"),placeholder:"Australia"})]})]})})}const BI=Hd({first_name:Wt().min(1,"First name is required"),last_name:Wt().min(1,"Last name is required"),email:Wt().email("Invalid email"),phone:Wt().optional(),date_of_birth:Wt().optional(),address_line1:Wt().optional(),address_line2:Wt().optional(),city:Wt().optional(),state:Wt().optional(),postal_code:Wt().optional(),country:Wt().optional(),profession:Wt().optional(),experience_years:$m().min(0).optional(),qualifications:Wt().optional()});function zI(){const[t,e]=M.useState(!1),[s,r]=M.useState(!0),{user:i,getEffectiveUserId:o}=jt(),u=o(),{register:h,handleSubmit:m,reset:f,watch:p,setValue:x,formState:{errors:b}}=Bd({resolver:Fd(BI)}),j=p("postal_code")||"";M.useEffect(()=>{v()},[u]);const v=async()=>{if(u)try{r(!0);const _=new Promise((k,L)=>setTimeout(()=>L(new Error("Load timeout")),3e3)),E=V.from("members").select("*").eq("id",u).single();let A=null,O=null;try{const k=await Promise.race([E,_]);A=k.data,O=k.error}catch{console.warn("Profile load timed out, using defaults")}O&&O.code!=="PGRST116"&&console.error("Error loading member data:",O);const F={email:A?.email||i.email||"",first_name:A?.first_name||"",last_name:A?.last_name||"",phone:A?.phone||"",date_of_birth:A?.date_of_birth||"",address_line1:A?.address_line1||"",address_line2:A?.address_line2||"",city:A?.city||"",state:A?.state||"",postal_code:A?.postal_code||"",country:A?.country||"Australia",profession:A?.profession||"",experience_years:A?.experience_years||0,qualifications:A?.qualifications||""};f(F),A?.phone&&x("phone",A.phone),A?.address_line1&&x("address_line1",A.address_line1),A?.city&&x("city",A.city),A?.state&&x("state",A.state),A?.country&&x("country",A.country),A?.postal_code&&x("postal_code",A.postal_code)}catch(_){console.error("Error loading profile:",_),ae("error","Error loading profile data")}finally{r(!1)}},S=async _=>{if(u)try{e(!0);const{data:E}=await V.from("members").select("id").eq("id",u).single(),A={first_name:_.first_name,last_name:_.last_name,email:_.email,phone:_.phone||null,date_of_birth:_.date_of_birth&&_.date_of_birth!==""?_.date_of_birth:null,address_line1:_.address_line1||null,address_line2:_.address_line2||null,city:_.city||null,state:_.state||null,postal_code:_.postal_code||null,country:_.country||"Australia",profession:_.profession||null,experience_years:_.experience_years?Number(_.experience_years):null,qualifications:_.qualifications||null,updated_at:new Date().toISOString(),updated_by:u};if(E){const{error:O}=await V.from("members").update(A).eq("id",E.id);if(O)throw O}else{const{error:O}=await V.from("members").insert({...A,membership_status:"active",membership_type:"standard",receive_newsletters:!0,receive_event_notifications:!0,created_by:u});if(O)throw O}ae("success","Profile updated successfully!")}catch(E){console.error("Error updating profile:",E),ae("error","Error updating profile")}finally{e(!1)}};return s?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx(hn,{className:"w-8 h-8 animate-spin text-blue-600"})}):n.jsxs("form",{onSubmit:m(S),className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"first_name",children:"First Name *"}),n.jsx(Ne,{id:"first_name",...h("first_name"),placeholder:"Your first name"}),b.first_name&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.first_name.message})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"last_name",children:"Last Name *"}),n.jsx(Ne,{id:"last_name",...h("last_name"),placeholder:"Your last name"}),b.last_name&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.last_name.message})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"email",children:"Email *"}),n.jsx(Ne,{id:"email",type:"email",...h("email"),placeholder:"your@email.com",disabled:!0}),b.email&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.email.message})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"phone",children:"Phone"}),n.jsx(pE,{value:p("phone")||"",onChange:_=>x("phone",_),placeholder:"Enter phone number"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"date_of_birth",children:"Date of Birth"}),n.jsx(Ne,{id:"date_of_birth",type:"date",...h("date_of_birth")})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"profession",children:"Profession"}),n.jsx(Ne,{id:"profession",...h("profession"),placeholder:"English Teacher"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"experience_years",children:"Years of Experience"}),n.jsx(Ne,{id:"experience_years",type:"number",min:"0",...h("experience_years",{valueAsNumber:!0}),placeholder:"5"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"qualifications",children:"Qualifications"}),n.jsx(Ne,{id:"qualifications",...h("qualifications"),placeholder:"CELTA, DELTA, MA TESOL"})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Address"}),n.jsx(UI,{postalCode:j,onAddressChange:_=>{_.address_line1&&x("address_line1",_.address_line1),_.city&&x("city",_.city),_.state&&x("state",_.state),_.country&&x("country",_.country)},register:h,errors:b})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx(se,{type:"button",variant:"outline",onClick:()=>v(),disabled:t,children:"Cancel"}),n.jsx(se,{type:"submit",disabled:t,children:t?n.jsxs(n.Fragment,{children:[n.jsx(hn,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})}const FI=Hd({currentPassword:Wt().min(6,"Current password is required"),newPassword:Wt().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),confirmPassword:Wt()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function HI(){const[t,e]=M.useState(!1),[s,r]=M.useState(!1),[i,o]=M.useState(!1),[u,h]=M.useState(!1),{register:m,handleSubmit:f,reset:p,formState:{errors:x}}=Bd({resolver:Fd(FI)}),b=async j=>{try{e(!0);const{data:{user:v}}=await V.auth.getUser();if(!v?.email)throw new Error("User not found");const{error:S}=await V.auth.signInWithPassword({email:v.email,password:j.currentPassword});if(S){ae("error","Current password is incorrect");return}const{error:_}=await V.auth.updateUser({password:j.newPassword});if(_)throw _;ae("success","Password changed successfully!"),p()}catch(v){console.error("Error updating password:",v),v.message==="New password should be different from the old password."?ae("error","New password must be different from current password"):ae("error","Error changing password. Please try again.")}finally{e(!1)}};return n.jsxs("form",{onSubmit:f(b),className:"space-y-6 max-w-md",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"currentPassword",children:"Current Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ne,{id:"currentPassword",type:s?"text":"password",...m("currentPassword"),placeholder:"Enter your current password"}),n.jsx("button",{type:"button",onClick:()=>r(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:s?n.jsx(Bm,{className:"w-4 h-4"}):n.jsx(qn,{className:"w-4 h-4"})})]}),x.currentPassword&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.currentPassword.message})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"newPassword",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ne,{id:"newPassword",type:i?"text":"password",...m("newPassword"),placeholder:"Enter your new password"}),n.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:i?n.jsx(Bm,{className:"w-4 h-4"}):n.jsx(qn,{className:"w-4 h-4"})})]}),x.newPassword&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.newPassword.message}),n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[n.jsx("p",{children:"Password must contain:"}),n.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[n.jsx("li",{children:"At least 8 characters"}),n.jsx("li",{children:"One uppercase letter (A-Z)"}),n.jsx("li",{children:"One lowercase letter (a-z)"}),n.jsx("li",{children:"One number (0-9)"}),n.jsx("li",{children:"One special character (!@#$%^&*)"})]})]})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"confirmPassword",children:"Confirm New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ne,{id:"confirmPassword",type:u?"text":"password",...m("confirmPassword"),placeholder:"Confirm your new password"}),n.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u?n.jsx(Bm,{className:"w-4 h-4"}):n.jsx(qn,{className:"w-4 h-4"})})]}),x.confirmPassword&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.confirmPassword.message})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx(se,{type:"button",variant:"outline",onClick:()=>p(),disabled:t,children:"Cancel"}),n.jsx(se,{type:"submit",disabled:t,children:t?n.jsxs(n.Fragment,{children:[n.jsx(hn,{className:"w-4 h-4 mr-2 animate-spin"}),"Changing..."]}):"Change Password"})]})]})}class VI{static async initializeBuckets(){try{const{data:e,error:s}=await V.storage.listBuckets();if(s&&console.warn("Error listing buckets:",s),e?.some(i=>i.name==="profiles"))console.log(" Profiles bucket already exists");else{const{data:i,error:o}=await V.storage.createBucket("profiles",{public:!0,fileSizeLimit:5242880,allowedMimeTypes:["image/jpeg","image/png","image/webp","image/gif"]});o?o.message?.includes("already exists")?console.log(" Profiles bucket already exists"):console.warn("Error creating profiles bucket:",o):console.log(" Profiles bucket created successfully",i)}}catch(e){console.warn("Error initializing storage buckets:",e)}}static async uploadAvatar(e,s){const r=s.name.split(".").pop()?.toLowerCase()||"jpg",o=`avatars/${`avatar-${e}-${Date.now()}.${r}`}`;console.log("Uploading file:",{name:s.name,type:s.type,size:s.size,path:o});const{data:u,error:h}=await V.storage.from("profiles").upload(o,s,{cacheControl:"3600",upsert:!0});if(h)throw console.error("Upload error details:",h),h;console.log("Upload successful:",u);const{data:{publicUrl:m}}=V.storage.from("profiles").getPublicUrl(o);return m}static async deleteAvatar(e){try{const r=new URL(e).pathname.match(/\/profiles\/(.+)$/);if(r&&r[1]){const i=r[1],{error:o}=await V.storage.from("profiles").remove([i]);o&&console.warn("Error deleting avatar file:",o)}}catch(s){console.warn("Error parsing avatar URL for deletion:",s)}}}function GI({currentAvatar:t,onAvatarChange:e,size:s="lg"}){const[r,i]=M.useState(!1),o=M.useRef(null),{user:u}=jt(),m={sm:{wrapper:"w-16 h-16",text:"text-xs"},md:{wrapper:"w-24 h-24",text:"text-sm"},lg:{wrapper:"w-32 h-32",text:"text-base"}}[s],f=j=>{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(j.type))return"Only JPEG, PNG, and WebP images are allowed";const S=5*1024*1024;return j.size>S?"Image must be smaller than 5MB":null},p=M.useCallback(async j=>{if(j.target.files&&j.target.files.length>0){const v=j.target.files[0],S=f(v);if(S){ae("error",S);return}await x(v)}},[]),x=async j=>{if(u)try{i(!0);const v=await VI.uploadAvatar(u.id,j);if(u.email){const{error:S}=await V.from("members").update({avatar_url:v}).eq("email",u.email);if(S)if(S.code==="PGRST116")await V.from("members").insert({email:u.email,avatar_url:v,created_by:u.id,membership_status:"active",membership_type:"standard"});else throw S}e(v),ae("success","Profile photo updated successfully!")}catch(v){console.error("Error uploading avatar:",v),ae("error","Failed to upload profile photo")}finally{i(!1)}},b=async()=>{if(u?.email)try{i(!0);const{error:j}=await V.from("members").update({avatar_url:null}).eq("email",u.email);if(j&&j.code!=="PGRST116")throw j;e(null),ae("success","Profile photo removed")}catch(j){console.error("Error removing avatar:",j),ae("error","Failed to remove profile photo")}finally{i(!1)}};return n.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[n.jsxs("div",{className:`relative ${m.wrapper} rounded-full overflow-hidden bg-gray-100 border-4 border-white shadow-lg group cursor-pointer`,children:[t?n.jsx("img",{src:t,alt:"Profile",className:"w-full h-full object-cover",onClick:()=>o.current?.click()}):n.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-blue-600 text-white",onClick:()=>o.current?.click(),children:n.jsx(aj,{className:"w-10 h-10"})}),n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:()=>o.current?.click(),children:n.jsx(aj,{className:"w-8 h-8 text-white"})}),!r&&n.jsx("div",{className:"absolute bottom-0 right-0 bg-blue-600 text-white rounded-full p-2 shadow-lg cursor-pointer hover:bg-blue-700 transition-colors",onClick:()=>o.current?.click(),children:n.jsx(rl,{className:"w-4 h-4"})}),r&&n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})]}),t&&!r&&n.jsx("button",{type:"button",onClick:b,className:"text-xs text-gray-500 hover:text-red-600 transition-colors",children:"Remove photo"}),n.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:p,className:"hidden"})]})}function ZI(){const[t,e]=M.useState("profile"),[s,r]=M.useState(null),[i,o]=M.useState(0),{user:u}=jt(),h=Ns();M.useEffect(()=>{m()},[u]);const m=async()=>{if(u?.email)try{const{data:p}=await V.from("members").select("avatar_url").eq("email",u.email).single();p?.avatar_url&&r(p.avatar_url)}catch(p){console.error("Error loading avatar:",p)}},f=async p=>{r(p),o(x=>x+1)};return u?n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-8",children:"My Profile"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsxs(ue,{className:"p-4",children:[n.jsxs("div",{className:"flex flex-col items-center mb-6",children:[n.jsx(GI,{currentAvatar:s,onAvatarChange:f,size:"lg"}),n.jsx("h2",{className:"font-semibold mt-4",children:u.email}),n.jsx("p",{className:"text-sm text-gray-500 capitalize",children:"Member"})]}),n.jsxs("nav",{className:"space-y-2",children:[n.jsxs("button",{onClick:()=>e("profile"),className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${t==="profile"?"bg-blue-50 text-blue-600":"hover:bg-gray-50"}`,children:[n.jsx(Ja,{className:"w-4 h-4"}),"Personal Information"]}),n.jsxs("button",{onClick:()=>e("password"),className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${t==="password"?"bg-blue-50 text-blue-600":"hover:bg-gray-50"}`,children:[n.jsx(dE,{className:"w-4 h-4"}),"Change Password"]}),n.jsxs("button",{onClick:()=>e("notifications"),className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${t==="notifications"?"bg-blue-50 text-blue-600":"hover:bg-gray-50"}`,children:[n.jsx(aE,{className:"w-4 h-4"}),"Notifications"]})]})]})}),n.jsx("div",{className:"lg:col-span-3",children:n.jsxs(ue,{className:"p-6",children:[t==="profile"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Personal Information"}),n.jsx(zI,{},i)]}),t==="password"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Change Password"}),n.jsx(HI,{})]}),t==="notifications"&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Notification Preferences"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",className:"w-4 h-4",defaultChecked:!0}),n.jsx("span",{children:"Receive email newsletters"})]}),n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",className:"w-4 h-4",defaultChecked:!0}),n.jsx("span",{children:"Event notifications"})]}),n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",className:"w-4 h-4"}),n.jsx("span",{children:"CPD reminders"})]}),n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",className:"w-4 h-4",defaultChecked:!0}),n.jsx("span",{children:"Important system updates"})]})]}),n.jsx(se,{className:"mt-6",children:"Save Preferences"})]})]})})]})]}):(h("/login"),null)}const{CPDService:uj,CPD_CATEGORIES:dj}=cl,YI=Hd({category_id:$m().min(1,"Please select a category"),activity_title:Wt().min(1,"Activity title is required"),description:Wt().optional(),provider:Wt().optional(),date_completed:Wt().min(1,"Date is required"),hours:$m().min(0).max(99),minutes:$m().min(0).max(59)});function KI({isOpen:t,onClose:e,onSuccess:s}){const[r,i]=M.useState(!1),[o,u]=M.useState(null),[h,m]=M.useState([]),{user:f,getEffectiveUserId:p}=jt(),x=p(),{register:b,handleSubmit:j,watch:v,reset:S,formState:{errors:_}}=Bd({resolver:Fd(YI),defaultValues:{hours:0,minutes:0,date_completed:new Date().toISOString().split("T")[0]}}),E=v("category_id"),A=Number(v("hours"))||0,O=Number(v("minutes"))||0;M.useEffect(()=>{t&&F()},[t]);const F=async()=>{try{const w=await uj.getCategorySettings();m(w)}catch(w){console.error("Error loading category settings:",w),m([])}},k=()=>{const w=h.find(H=>H.category_id===Number(E)),C=dj.find(H=>H.id===Number(E)),z=w?.points_per_hour||C?.points_per_hour||1,R=isNaN(A)?0:A,D=isNaN(O)?0:O;return((R+D/60)*z).toFixed(2)},L=async w=>{if(x)try{i(!0);const{supabase:C}=await ll(async()=>{const{supabase:q}=await Promise.resolve().then(()=>IM);return{supabase:q}},void 0),{data:z}=await C.from("members").select("email").eq("id",x).single(),R=z?.email||f?.email||"",D={...w,evidence:o||void 0};await uj.createActivity(D,x,R),S(),u(null),s(),e()}catch(C){console.error("Error submitting CPD activity:",C)}finally{i(!1)}},B=w=>{if(w.target.files&&w.target.files[0]){const C=w.target.files[0];if(C.size>10*1024*1024){alert("File size must be less than 10MB");return}u(C)}};return t?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Add New CPD Activity"}),n.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:n.jsx(mn,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:j(L),className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"category_id",children:"Category *"}),n.jsxs("select",{id:"category_id",...b("category_id",{valueAsNumber:!0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"-- Select a Category --"}),dj.map(w=>n.jsx("option",{value:w.id,children:w.name},w.id))]}),_.category_id&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:_.category_id.message})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"activity_title",children:"Activity Title *"}),n.jsx(Ne,{id:"activity_title",...b("activity_title"),placeholder:"e.g., Annual TESOL Conference"}),_.activity_title&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:_.activity_title.message})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"description",children:"Description"}),n.jsx("textarea",{id:"description",...b("description"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Brief description of the activity..."})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"provider",children:"Provider/Organizer"}),n.jsx(Ne,{id:"provider",...b("provider"),placeholder:"e.g., English Australia"})]}),n.jsxs("div",{children:[n.jsxs(he,{htmlFor:"date_completed",children:[n.jsx(js,{className:"w-4 h-4 inline mr-1"}),"Date Completed *"]}),n.jsx(Ne,{id:"date_completed",type:"date",...b("date_completed"),max:new Date().toISOString().split("T")[0]}),_.date_completed&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:_.date_completed.message})]}),n.jsxs("div",{children:[n.jsxs(he,{children:[n.jsx(si,{className:"w-4 h-4 inline mr-1"}),"Duration *"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx("div",{children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ne,{type:"number",...b("hours",{valueAsNumber:!0}),min:"0",max:"99",className:"w-20"}),n.jsx("span",{className:"text-sm text-gray-600",children:"hours"})]})}),n.jsx("div",{children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ne,{type:"number",...b("minutes",{valueAsNumber:!0}),min:"0",max:"59",className:"w-20"}),n.jsx("span",{className:"text-sm text-gray-600",children:"minutes"})]})})]})]}),E&&(A>0||O>0)&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Estimated Points:"}),n.jsx("span",{className:"text-2xl font-bold text-blue-600",children:k()})]})}),n.jsxs("div",{children:[n.jsxs(he,{htmlFor:"evidence",children:[n.jsx(ri,{className:"w-4 h-4 inline mr-1"}),"Evidence (Optional)"]}),n.jsxs("div",{className:"mt-1",children:[n.jsxs("label",{className:"flex items-center justify-center w-full px-4 py-2 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer hover:border-blue-400 transition-colors",children:[n.jsx(rl,{className:"w-5 h-5 mr-2 text-gray-400"}),n.jsx("span",{className:"text-sm text-gray-600",children:o?o.name:"Click to upload certificate or evidence"}),n.jsx("input",{type:"file",onChange:B,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",className:"hidden"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Accepted formats: PDF, JPG, PNG, DOC, DOCX (Max 10MB)"})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[n.jsx(se,{type:"button",variant:"outline",onClick:e,disabled:r,className:"flex-1",children:"Cancel"}),n.jsx(se,{type:"submit",disabled:r,className:"flex-1",children:r?"Adding...":"Add Activity"})]})]})]})}):null}const xE=6048e5,WI=864e5,hj=Symbol.for("constructDateFrom");function nl(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&hj in t?t[hj](e):t instanceof Date?new t.constructor(e):new Date(e)}function zn(t,e){return nl(e||t,t)}let QI={};function If(){return QI}function kd(t,e){const s=If(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,i=zn(t,e?.in),o=i.getDay(),u=(o<r?7:0)+o-r;return i.setDate(i.getDate()-u),i.setHours(0,0,0,0),i}function pf(t,e){return kd(t,{...e,weekStartsOn:1})}function yE(t,e){const s=zn(t,e?.in),r=s.getFullYear(),i=nl(s,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const o=pf(i),u=nl(s,0);u.setFullYear(r,0,4),u.setHours(0,0,0,0);const h=pf(u);return s.getTime()>=o.getTime()?r+1:s.getTime()>=h.getTime()?r:r-1}function mj(t){const e=zn(t),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return s.setUTCFullYear(e.getFullYear()),+t-+s}function XI(t,...e){const s=nl.bind(null,e.find(r=>typeof r=="object"));return e.map(s)}function fj(t,e){const s=zn(t,e?.in);return s.setHours(0,0,0,0),s}function JI(t,e,s){const[r,i]=XI(s?.in,t,e),o=fj(r),u=fj(i),h=+o-mj(o),m=+u-mj(u);return Math.round((h-m)/WI)}function e7(t,e){const s=yE(t,e),r=nl(t,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),pf(r)}function t7(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function s7(t){return!(!t7(t)&&typeof t!="number"||isNaN(+zn(t)))}function r7(t,e){const s=zn(t,e?.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}const n7={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},a7=(t,e,s)=>{let r;const i=n7[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r};function f0(t){return(e={})=>{const s=e.width?String(e.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const i7={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},l7={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},o7={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},c7={date:f0({formats:i7,defaultWidth:"full"}),time:f0({formats:l7,defaultWidth:"full"}),dateTime:f0({formats:o7,defaultWidth:"full"})},u7={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},d7=(t,e,s,r)=>u7[t];function ad(t){return(e,s)=>{const r=s?.context?String(s.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const u=t.defaultFormattingWidth||t.defaultWidth,h=s?.width?String(s.width):u;i=t.formattingValues[h]||t.formattingValues[u]}else{const u=t.defaultWidth,h=s?.width?String(s.width):t.defaultWidth;i=t.values[h]||t.values[u]}const o=t.argumentCallback?t.argumentCallback(e):e;return i[o]}}const h7={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},m7={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},f7={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},p7={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},g7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},x7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},y7=(t,e)=>{const s=Number(t),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},b7={ordinalNumber:y7,era:ad({values:h7,defaultWidth:"wide"}),quarter:ad({values:m7,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ad({values:f7,defaultWidth:"wide"}),day:ad({values:p7,defaultWidth:"wide"}),dayPeriod:ad({values:g7,defaultWidth:"wide",formattingValues:x7,defaultFormattingWidth:"wide"})};function id(t){return(e,s={})=>{const r=s.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;const u=o[0],h=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],m=Array.isArray(h)?w7(h,x=>x.test(u)):v7(h,x=>x.test(u));let f;f=t.valueCallback?t.valueCallback(m):m,f=s.valueCallback?s.valueCallback(f):f;const p=e.slice(u.length);return{value:f,rest:p}}}function v7(t,e){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return s}function w7(t,e){for(let s=0;s<t.length;s++)if(e(t[s]))return s}function _7(t){return(e,s={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],o=e.match(t.parsePattern);if(!o)return null;let u=t.valueCallback?t.valueCallback(o[0]):o[0];u=s.valueCallback?s.valueCallback(u):u;const h=e.slice(i.length);return{value:u,rest:h}}}const j7=/^(\d+)(th|st|nd|rd)?/i,N7=/\d+/i,S7={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},E7={any:[/^b/i,/^(a|c)/i]},C7={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},A7={any:[/1/i,/2/i,/3/i,/4/i]},k7={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},T7={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},O7={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},R7={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},M7={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},D7={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},L7={ordinalNumber:_7({matchPattern:j7,parsePattern:N7,valueCallback:t=>parseInt(t,10)}),era:id({matchPatterns:S7,defaultMatchWidth:"wide",parsePatterns:E7,defaultParseWidth:"any"}),quarter:id({matchPatterns:C7,defaultMatchWidth:"wide",parsePatterns:A7,defaultParseWidth:"any",valueCallback:t=>t+1}),month:id({matchPatterns:k7,defaultMatchWidth:"wide",parsePatterns:T7,defaultParseWidth:"any"}),day:id({matchPatterns:O7,defaultMatchWidth:"wide",parsePatterns:R7,defaultParseWidth:"any"}),dayPeriod:id({matchPatterns:M7,defaultMatchWidth:"any",parsePatterns:D7,defaultParseWidth:"any"})},q7={code:"en-US",formatDistance:a7,formatLong:c7,formatRelative:d7,localize:b7,match:L7,options:{weekStartsOn:0,firstWeekContainsDate:1}};function P7(t,e){const s=zn(t,e?.in);return JI(s,r7(s))+1}function I7(t,e){const s=zn(t,e?.in),r=+pf(s)-+e7(s);return Math.round(r/xE)+1}function bE(t,e){const s=zn(t,e?.in),r=s.getFullYear(),i=If(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,u=nl(e?.in||t,0);u.setFullYear(r+1,0,o),u.setHours(0,0,0,0);const h=kd(u,e),m=nl(e?.in||t,0);m.setFullYear(r,0,o),m.setHours(0,0,0,0);const f=kd(m,e);return+s>=+h?r+1:+s>=+f?r:r-1}function $7(t,e){const s=If(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,i=bE(t,e),o=nl(e?.in||t,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),kd(o,e)}function U7(t,e){const s=zn(t,e?.in),r=+kd(s,e)-+$7(s,e);return Math.round(r/xE)+1}function Rt(t,e){const s=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return s+r}const Hi={y(t,e){const s=t.getFullYear(),r=s>0?s:1-s;return Rt(e==="yy"?r%100:r,e.length)},M(t,e){const s=t.getMonth();return e==="M"?String(s+1):Rt(s+1,2)},d(t,e){return Rt(t.getDate(),e.length)},a(t,e){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(t,e){return Rt(t.getHours()%12||12,e.length)},H(t,e){return Rt(t.getHours(),e.length)},m(t,e){return Rt(t.getMinutes(),e.length)},s(t,e){return Rt(t.getSeconds(),e.length)},S(t,e){const s=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,s-3));return Rt(i,e.length)}},_c={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},pj={G:function(t,e,s){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})}},y:function(t,e,s){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return s.ordinalNumber(i,{unit:"year"})}return Hi.y(t,e)},Y:function(t,e,s,r){const i=bE(t,r),o=i>0?i:1-i;if(e==="YY"){const u=o%100;return Rt(u,2)}return e==="Yo"?s.ordinalNumber(o,{unit:"year"}):Rt(o,e.length)},R:function(t,e){const s=yE(t);return Rt(s,e.length)},u:function(t,e){const s=t.getFullYear();return Rt(s,e.length)},Q:function(t,e,s){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Rt(r,2);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,s){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Rt(r,2);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,s){const r=t.getMonth();switch(e){case"M":case"MM":return Hi.M(t,e);case"Mo":return s.ordinalNumber(r+1,{unit:"month"});case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,s){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Rt(r+1,2);case"Lo":return s.ordinalNumber(r+1,{unit:"month"});case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,s,r){const i=U7(t,r);return e==="wo"?s.ordinalNumber(i,{unit:"week"}):Rt(i,e.length)},I:function(t,e,s){const r=I7(t);return e==="Io"?s.ordinalNumber(r,{unit:"week"}):Rt(r,e.length)},d:function(t,e,s){return e==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):Hi.d(t,e)},D:function(t,e,s){const r=P7(t);return e==="Do"?s.ordinalNumber(r,{unit:"dayOfYear"}):Rt(r,e.length)},E:function(t,e,s){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,s,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Rt(o,2);case"eo":return s.ordinalNumber(o,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,s,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Rt(o,e.length);case"co":return s.ordinalNumber(o,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,s){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Rt(i,e.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(r,{width:"short",context:"formatting"});case"iiii":default:return s.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,s){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,s){const r=t.getHours();let i;switch(r===12?i=_c.noon:r===0?i=_c.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,s){const r=t.getHours();let i;switch(r>=17?i=_c.evening:r>=12?i=_c.afternoon:r>=4?i=_c.morning:i=_c.night,e){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,s){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),s.ordinalNumber(r,{unit:"hour"})}return Hi.h(t,e)},H:function(t,e,s){return e==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):Hi.H(t,e)},K:function(t,e,s){const r=t.getHours()%12;return e==="Ko"?s.ordinalNumber(r,{unit:"hour"}):Rt(r,e.length)},k:function(t,e,s){let r=t.getHours();return r===0&&(r=24),e==="ko"?s.ordinalNumber(r,{unit:"hour"}):Rt(r,e.length)},m:function(t,e,s){return e==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):Hi.m(t,e)},s:function(t,e,s){return e==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):Hi.s(t,e)},S:function(t,e){return Hi.S(t,e)},X:function(t,e,s){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return xj(r);case"XXXX":case"XX":return Vl(r);case"XXXXX":case"XXX":default:return Vl(r,":")}},x:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"x":return xj(r);case"xxxx":case"xx":return Vl(r);case"xxxxx":case"xxx":default:return Vl(r,":")}},O:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+gj(r,":");case"OOOO":default:return"GMT"+Vl(r,":")}},z:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+gj(r,":");case"zzzz":default:return"GMT"+Vl(r,":")}},t:function(t,e,s){const r=Math.trunc(+t/1e3);return Rt(r,e.length)},T:function(t,e,s){return Rt(+t,e.length)}};function gj(t,e=""){const s=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),o=r%60;return o===0?s+String(i):s+String(i)+e+Rt(o,2)}function xj(t,e){return t%60===0?(t>0?"-":"+")+Rt(Math.abs(t)/60,2):Vl(t,e)}function Vl(t,e=""){const s=t>0?"-":"+",r=Math.abs(t),i=Rt(Math.trunc(r/60),2),o=Rt(r%60,2);return s+i+e+o}const yj=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},vE=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},B7=(t,e)=>{const s=t.match(/(P+)(p+)?/)||[],r=s[1],i=s[2];if(!i)return yj(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",yj(r,e)).replace("{{time}}",vE(i,e))},z7={p:vE,P:B7},F7=/^D+$/,H7=/^Y+$/,V7=["D","DD","YY","YYYY"];function G7(t){return F7.test(t)}function Z7(t){return H7.test(t)}function Y7(t,e,s){const r=K7(t,e,s);if(console.warn(r),V7.includes(t))throw new RangeError(r)}function K7(t,e,s){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const W7=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Q7=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,X7=/^'([^]*?)'?$/,J7=/''/g,e9=/[a-zA-Z]/;function Ft(t,e,s){const r=If(),i=r.locale??q7,o=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,u=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,h=zn(t,s?.in);if(!s7(h))throw new RangeError("Invalid time value");let m=e.match(Q7).map(p=>{const x=p[0];if(x==="p"||x==="P"){const b=z7[x];return b(p,i.formatLong)}return p}).join("").match(W7).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const x=p[0];if(x==="'")return{isToken:!1,value:t9(p)};if(pj[x])return{isToken:!0,value:p};if(x.match(e9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:p}});i.localize.preprocessor&&(m=i.localize.preprocessor(h,m));const f={firstWeekContainsDate:o,weekStartsOn:u,locale:i};return m.map(p=>{if(!p.isToken)return p.value;const x=p.value;(Z7(x)||G7(x))&&Y7(x,e,String(t));const b=pj[x[0]];return b(h,x,i.localize,f)}).join("")}function t9(t){const e=t.match(X7);return e?e[1].replace(J7,"'"):t}const{CPDService:p0}=cl;function s9(){const[t,e]=M.useState([]),[s,r]=M.useState(!0),[i,o]=M.useState(!1),[u,h]=M.useState(""),[m,f]=M.useState("all"),[p,x]=M.useState(new Date().getFullYear()),[b,j]=M.useState(0),[v,S]=M.useState(0),{user:_,getEffectiveUserId:E}=jt(),A=E(),O=20;M.useEffect(()=>{A&&(F(),k())},[A,p]);const F=async()=>{if(A)try{r(!0);const R=await p0.getUserActivities(A);e(R)}catch(R){console.error("Error loading activities:",R)}finally{r(!1)}},k=async()=>{if(A)try{const[R,D]=await Promise.all([p0.getTotalPoints(A),p0.getYearlyPoints(A,p)]);j(R),S(D)}catch(R){console.error("Error loading points:",R)}},L=()=>{F(),k()},B=t.filter(R=>{const D=R.activity_title.toLowerCase().includes(u.toLowerCase())||R.category_name.toLowerCase().includes(u.toLowerCase())||R.provider?.toLowerCase().includes(u.toLowerCase()),q=m==="all"||R.status===m,X=new Date(R.date_completed).getFullYear()===p;return D&&q&&X}),w=Math.min(v/O*100,100),C=Array.from({length:5},(R,D)=>new Date().getFullYear()-D),z=R=>{const D={approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${D[R]}`,children:R.charAt(0).toUpperCase()+R.slice(1)})};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"My CPD Activities"}),n.jsx("p",{className:"text-gray-600",children:"Track and manage your Continuing Professional Development"})]}),n.jsx(ue,{className:"p-6 mb-8 bg-gradient-to-r from-blue-50 to-indigo-50",children:n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[p," Annual Progress"]}),n.jsx("select",{value:p,onChange:R=>x(Number(R.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:C.map(R=>n.jsx("option",{value:R,children:R},R))})]}),n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[n.jsxs("span",{children:[v.toFixed(1)," points earned"]}),n.jsxs("span",{children:["Goal: ",O," points"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full transition-all duration-500 flex items-center justify-end pr-2",style:{width:`${w}%`},children:w>15&&n.jsxs("span",{className:"text-xs text-white font-semibold",children:[w.toFixed(0),"%"]})})}),v>=O&&n.jsx("div",{className:"mt-3 text-center",children:n.jsxs("span",{className:"text-green-600 font-semibold flex items-center justify-center",children:[n.jsx(un,{className:"w-5 h-5 mr-2"}),"Congratulations! You've reached your annual CPD goal!"]})})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Points"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:b.toFixed(1)})]}),n.jsx(un,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-gray-600",children:[p," Points"]}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.toFixed(1)})]}),n.jsx(js,{className:"w-8 h-8 text-green-500"})]})}),n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Activities"}),n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:t.length})]}),n.jsx(ri,{className:"w-8 h-8 text-purple-500"})]})}),n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Goal Progress"}),n.jsxs("p",{className:"text-2xl font-bold text-indigo-600",children:[w.toFixed(0),"%"]})]}),n.jsx(un,{className:"w-8 h-8 text-indigo-500"})]})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[n.jsxs(se,{onClick:()=>o(!0),className:"md:w-auto",children:[n.jsx(ro,{className:"w-4 h-4 mr-2"}),"Add New Activity"]}),n.jsxs("div",{className:"flex-1 flex gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(ni,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx(Ne,{type:"text",placeholder:"Search activities...",value:u,onChange:R=>h(R.target.value),className:"pl-10"})]}),n.jsxs("select",{value:m,onChange:R=>f(R.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"approved",children:"Approved"}),n.jsx("option",{value:"rejected",children:"Rejected"})]})]})]}),n.jsx(ue,{children:s?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading activities..."})]}):B.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(ri,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:u||m!=="all"?"No activities found":"No CPD activities yet"}),n.jsx("p",{className:"text-gray-600 mb-4",children:u||m!=="all"?"Try adjusting your search or filters":"Start tracking your professional development by adding your first activity"}),!u&&m==="all"&&n.jsxs(se,{onClick:()=>o(!0),children:[n.jsx(ro,{className:"w-4 h-4 mr-2"}),"Add Your First Activity"]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activity"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Evidence"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(R=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ft(new Date(R.date_completed),"dd MMM yyyy")}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.activity_title}),R.provider&&n.jsx("div",{className:"text-sm text-gray-500",children:R.provider})]})}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:R.category_name}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[R.hours,"h ",R.minutes,"m"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"text-sm font-semibold text-blue-600",children:R.points.toFixed(1)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:z(R.status)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:R.evidence_url?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>{if(R.evidence_url.startsWith("data:")){const D=window.open();D&&(R.evidence_url.includes("image/")||R.evidence_url.includes("application/pdf")?(D.document.write(`
                                      <html>
                                        <head>
                                          <title>${R.evidence_filename||"Certificate"}</title>
                                          <style>
                                            body { 
                                              margin: 0; 
                                              display: flex; 
                                              justify-content: center; 
                                              align-items: center; 
                                              min-height: 100vh; 
                                              background: #f3f4f6; 
                                            }
                                            img { max-width: 90%; max-height: 90vh; }
                                            embed { width: 100vw; height: 100vh; }
                                          </style>
                                        </head>
                                        <body>
                                          ${R.evidence_url.includes("application/pdf")?`<embed src="${R.evidence_url}" type="application/pdf" />`:`<img src="${R.evidence_url}" alt="${R.evidence_filename||"Certificate"}" />`}
                                        </body>
                                      </html>
                                    `),D.document.close()):D.location.href=R.evidence_url)}else window.open(R.evidence_url,"_blank")},className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",title:"View certificate",children:[n.jsx(qn,{className:"w-4 h-4"}),"View"]}),R.evidence_url.startsWith("data:")&&n.jsx("a",{href:R.evidence_url,download:R.evidence_filename||"certificate",className:"text-green-600 hover:text-green-800 flex items-center gap-1",title:"Download certificate",children:n.jsx(so,{className:"w-4 h-4"})})]}):n.jsx("span",{className:"text-gray-400",children:"-"})})]},R.id))})]})})}),n.jsx(KI,{isOpen:i,onClose:()=>o(!1),onSuccess:L})]})}const{CPDService:g0}=cl;function r9(){const[t,e]=M.useState([]),[s,r]=M.useState(!0),[i,o]=M.useState(null),[u,h]=M.useState(""),[m,f]=M.useState(!1),{user:p}=jt();M.useEffect(()=>{x()},[]);const x=async()=>{try{r(!0);const _=await g0.getAllPendingActivities();e(_)}catch(_){console.error("Error loading pending activities:",_)}finally{r(!1)}},b=async _=>{if(p)try{await g0.approveActivity(_,p.id),await x()}catch(E){console.error("Error approving activity:",E)}},j=async()=>{if(!(!p||!i))try{await g0.rejectActivity(i.id,p.id,u),await x(),f(!1),o(null),h("")}catch(_){console.error("Error rejecting activity:",_)}},v=_=>{o(_),f(!0)},S=()=>{f(!1),o(null),h("")};return s?n.jsx("div",{className:"flex justify-center items-center min-h-96",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Review CPD Submissions"}),n.jsx("p",{className:"text-gray-600",children:"Review and approve or reject pending CPD activity submissions from members."})]}),t.length===0?n.jsxs(ue,{className:"p-8 text-center",children:[n.jsx(si,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No pending submissions"}),n.jsx("p",{className:"text-gray-600",children:"All CPD submissions have been reviewed. Check back later for new submissions."})]}):n.jsx("div",{className:"space-y-6",children:t.map(_=>n.jsxs(ue,{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ja,{className:"h-5 w-5 text-blue-600"}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[_.members?.first_name," ",_.members?.last_name]}),n.jsx("p",{className:"text-sm text-gray-600",children:_.members?.email})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(si,{className:"h-4 w-4 text-orange-500"}),n.jsx("span",{className:"text-sm text-orange-600 font-medium",children:"Pending Review"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx(he,{className:"text-sm font-medium text-gray-700",children:"Activity Title"}),n.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:_.activity_title})]}),n.jsxs("div",{children:[n.jsx(he,{className:"text-sm font-medium text-gray-700",children:"Category"}),n.jsx("p",{className:"text-sm text-gray-900",children:_.category_name})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{children:[n.jsx(he,{className:"text-sm font-medium text-gray-700",children:"Duration"}),n.jsxs("p",{className:"text-sm text-gray-900",children:[_.hours,"h ",_.minutes,"m"]})]}),n.jsxs("div",{children:[n.jsx(he,{className:"text-sm font-medium text-gray-700",children:"Points"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(un,{className:"h-4 w-4 text-yellow-500"}),n.jsx("span",{className:"text-sm font-semibold text-gray-900",children:_.points})]})]})]}),n.jsxs("div",{children:[n.jsx(he,{className:"text-sm font-medium text-gray-700",children:"Date Completed"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(js,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm text-gray-900",children:Ft(new Date(_.date_completed),"MMM dd, yyyy")})]})]}),n.jsxs("div",{children:[n.jsx(he,{className:"text-sm font-medium text-gray-700",children:"Provider"}),n.jsx("p",{className:"text-sm text-gray-900",children:_.provider||"N/A"})]}),n.jsxs("div",{children:[n.jsx(he,{className:"text-sm font-medium text-gray-700",children:"Submitted"}),n.jsx("p",{className:"text-sm text-gray-900",children:Ft(new Date(_.created_at),"MMM dd, yyyy")})]})]}),_.description&&n.jsxs("div",{className:"mb-4",children:[n.jsx(he,{className:"text-sm font-medium text-gray-700",children:"Description"}),n.jsx("p",{className:"text-sm text-gray-900 mt-1",children:_.description})]}),_.evidence_url&&n.jsxs("div",{className:"mb-6",children:[n.jsx(he,{className:"text-sm font-medium text-gray-700",children:"Evidence"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(ri,{className:"h-4 w-4 text-blue-600"}),n.jsx("a",{href:_.evidence_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm underline",children:_.evidence_filename||"View Evidence"})]})]}),n.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[n.jsxs(se,{onClick:()=>b(_.id),className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 text-white",children:[n.jsx(ls,{className:"h-4 w-4"}),n.jsx("span",{children:"Approve"})]}),n.jsxs(se,{onClick:()=>v(_),variant:"outline",className:"flex items-center space-x-2 text-red-600 border-red-600 hover:bg-red-50",children:[n.jsx(sl,{className:"h-4 w-4"}),n.jsx("span",{children:"Reject"})]})]})]},_.id))}),m&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reject CPD Submission"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please provide a reason for rejecting this submission. This will be visible to the member."}),n.jsxs("div",{className:"mb-6",children:[n.jsx(he,{htmlFor:"rejectReason",className:"text-sm font-medium text-gray-700",children:"Rejection Reason"}),n.jsx("textarea",{id:"rejectReason",value:u,onChange:_=>h(_.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",rows:4,placeholder:"Explain why this submission is being rejected...",required:!0})]}),n.jsxs("div",{className:"flex space-x-3 justify-end",children:[n.jsx(se,{onClick:S,variant:"outline",className:"text-gray-600",children:"Cancel"}),n.jsx(se,{onClick:j,className:"bg-red-600 hover:bg-red-700 text-white",disabled:!u.trim(),children:"Reject Submission"})]})]})})]})}const{CPDService:Sm}=cl;function n9(){const[t,e]=M.useState(null),[s,r]=M.useState([]),[i,o]=M.useState(!0),[u,h]=M.useState(!1),[m,f]=M.useState({}),{user:p}=jt();M.useEffect(()=>{x()},[]);const x=async()=>{try{o(!0);const[_,E]=await Promise.all([Sm.getCPDSettings(),Sm.getCategorySettings()]);e(_),r(E)}catch(_){console.error("Error loading settings:",_)}finally{o(!1)}},b=async()=>{if(!(!t||!p))try{h(!0);const _=await Sm.updateCPDSettings({auto_approval_enabled:!t.auto_approval_enabled});e(_)}catch(_){console.error("Error updating auto approval:",_)}finally{h(!1)}},j=(_,E)=>{f(A=>({...A,[_]:E}))},v=async _=>{if(!p)return;const E=m[_];if(!(E===void 0||E<0))try{h(!0),await Sm.updateCategorySettings(_,{points_per_hour:E}),r(A=>A.map(O=>O.category_id===_?{...O,points_per_hour:E}:O)),f(A=>{const O={...A};return delete O[_],O})}catch(A){console.error("Error saving category points:",A)}finally{h(!1)}},S=_=>{f(E=>{const A={...E};return delete A[_],A})};return i?n.jsx("div",{className:"flex justify-center items-center min-h-96",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center gap-3",children:[n.jsx(no,{className:"h-8 w-8 text-blue-600"}),"CPD System Configuration"]}),n.jsx("p",{className:"text-gray-600",children:"Configure CPD activity settings, points per hour by category, and approval workflow."})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(ue,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(ti,{className:"h-6 w-6 text-orange-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Global Settings"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Automatic Approval"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"When enabled, all CPD activities submitted by members will be automatically approved without requiring admin review."})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:`text-sm font-medium ${t?.auto_approval_enabled?"text-green-600":"text-red-600"}`,children:t?.auto_approval_enabled?"Enabled":"Disabled"}),n.jsx(se,{onClick:b,disabled:u,className:`${t?.auto_approval_enabled?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"} text-white`,children:t?.auto_approval_enabled?n.jsxs(n.Fragment,{children:[n.jsx(sl,{className:"h-4 w-4 mr-2"}),"Disable"]}):n.jsxs(n.Fragment,{children:[n.jsx(ls,{className:"h-4 w-4 mr-2"}),"Enable"]})})]})]}),t?.auto_approval_enabled&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(ls,{className:"h-5 w-5 text-green-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-green-800",children:"Auto-Approval Active"}),n.jsx("p",{className:"text-sm text-green-700 mt-1",children:"All new CPD submissions will be automatically approved and members will receive points immediately. You can still access the Review page to see all activities, but no manual approval is required."})]})]})})]})]}),n.jsxs(ue,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(un,{className:"h-6 w-6 text-yellow-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Points per Hour by Category"})]}),n.jsx("div",{className:"space-y-3",children:s.map(_=>n.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:_.category_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Category ID: ",_.category_id]})]}),n.jsx("div",{className:"flex items-center space-x-3",children:m[_.category_id]!==void 0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ne,{type:"number",step:"0.1",min:"0",value:m[_.category_id],onChange:E=>j(_.category_id,parseFloat(E.target.value)||0),className:"w-20 text-center"}),n.jsx("span",{className:"text-sm text-gray-600",children:"pts/hr"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(se,{size:"sm",onClick:()=>v(_.category_id),disabled:u,className:"bg-green-600 hover:bg-green-700 text-white",children:n.jsx(Jd,{className:"h-3 w-3"})}),n.jsx(se,{size:"sm",variant:"outline",onClick:()=>S(_.category_id),disabled:u,children:"Cancel"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-lg font-bold text-blue-600",children:_.points_per_hour}),n.jsx("br",{}),n.jsx("span",{className:"text-xs text-gray-500",children:"points/hour"})]}),n.jsx(se,{size:"sm",variant:"outline",onClick:()=>f(E=>({...E,[_.category_id]:_.points_per_hour})),className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:"Edit"})]})})]},_.category_id))}),n.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(ti,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Points Calculation"}),n.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Points are calculated automatically when members submit activities. The formula is: ",n.jsx("strong",{children:"(Hours + Minutes/60)  Points per Hour"}),". Changes to points per hour only apply to new submissions."]})]})]})})]}),n.jsxs(ue,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Current Configuration Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t?.auto_approval_enabled?n.jsx(ls,{className:"h-5 w-5 text-green-600"}):n.jsx(sl,{className:"h-5 w-5 text-red-600"}),n.jsx("span",{className:"font-medium",children:"Auto-Approval"})]}),n.jsx("p",{className:"text-sm text-gray-600",children:t?.auto_approval_enabled?"Activities are automatically approved":"Activities require manual review"})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(un,{className:"h-5 w-5 text-yellow-600"}),n.jsx("span",{className:"font-medium",children:"Categories"})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[s.length," active categories configured"]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(no,{className:"h-5 w-5 text-blue-600"}),n.jsx("span",{className:"font-medium",children:"Points Range"})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[Math.min(...s.map(_=>_.points_per_hour))," - ",Math.max(...s.map(_=>_.points_per_hour))," pts/hour"]})]})]})]})]})]})}const{CPDService:ld}=cl;function a9(){const[t,e]=M.useState([]),[s,r]=M.useState([]),[i,o]=M.useState(!0),[u,h]=M.useState(""),[m,f]=M.useState("all"),[p,x]=M.useState(null),[b,j]=M.useState(!1),[v,S]=M.useState({}),[_,E]=M.useState(!1),[A,O]=M.useState(null),{user:F,getEffectiveRoles:k}=jt();M.useEffect(()=>{L()},[]),M.useEffect(()=>{B()},[t,u,m]);const L=async()=>{try{o(!0);const P=await ld.getAllActivities();e(P)}catch(P){console.error("Error loading activities:",P),ae("error","Failed to load CPD activities")}finally{o(!1)}},B=()=>{let P=[...t];if(m!=="all"&&(P=P.filter(Z=>Z.status===m)),u){const Z=u.toLowerCase();P=P.filter(Q=>Q.activity_title.toLowerCase().includes(Z)||Q.members?.first_name?.toLowerCase().includes(Z)||Q.members?.last_name?.toLowerCase().includes(Z)||Q.members?.email?.toLowerCase().includes(Z))}r(P)},w=P=>{x(P),S({activity_title:P.activity_title,hours:P.hours,minutes:P.minutes,points:P.points,status:P.status}),j(!0)},C=async()=>{if(p)try{await ld.updateActivity(p.id,v),ae("success","CPD activity updated successfully"),j(!1),await L()}catch(P){console.error("Error updating activity:",P),ae("error","Failed to update activity")}},z=async P=>{if((await Et.fire({title:"Delete CPD Activity?",html:`
        <p>Are you sure you want to delete this activity?</p>
        <p class="mt-2"><strong>${P.activity_title}</strong></p>
        <p class="text-sm text-gray-600">Member: ${P.members?.first_name} ${P.members?.last_name}</p>
        <p class="text-sm text-gray-600">Points: ${P.points}</p>
      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"})).isConfirmed)try{await ld.deleteActivity(P.id),ae("success","CPD activity deleted successfully"),await L()}catch(Q){console.error("Error deleting activity:",Q),ae("error","Failed to delete activity")}},R=async P=>{if(F)try{await ld.approveActivity(P,F.id),ae("success","CPD activity approved"),await L()}catch(Z){console.error("Error approving activity:",Z),ae("error","Failed to approve activity")}},D=async P=>{const{value:Z}=await Et.fire({title:"Reject CPD Activity",input:"textarea",inputLabel:"Rejection reason",inputPlaceholder:"Enter the reason for rejection...",inputAttributes:{"aria-label":"Rejection reason"},showCancelButton:!0,confirmButtonText:"Reject",confirmButtonColor:"#dc2626",cancelButtonText:"Cancel"});if(Z&&F)try{await ld.rejectActivity(P.id,F.id,Z),ae("success","CPD activity rejected"),await L()}catch(Q){console.error("Error rejecting activity:",Q),ae("error","Failed to reject activity")}},q=P=>{P.evidence_url||P.evidence_filename?(O({url:P.evidence_url,filename:P.evidence_filename}),E(!0)):ae("info","No evidence uploaded for this activity")},H=P=>{switch(P){case"approved":return n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(ls,{className:"w-3 h-3"})," Approved"]});case"rejected":return n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[n.jsx(sl,{className:"w-3 h-3"})," Rejected"]});default:return n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[n.jsx(si,{className:"w-3 h-3"})," Pending"]})}},X=()=>{const P=[["Member Name","Email","Activity","Date","Hours","Points","Status","Category"],...s.map(U=>[`${U.members?.first_name||""} ${U.members?.last_name||""}`,U.members?.email||"",U.activity_title,Ft(new Date(U.date_completed),"yyyy-MM-dd"),`${U.hours}h ${U.minutes}m`,U.points.toString(),U.status,U.category_name||""])].map(U=>U.map(J=>`"${J}"`).join(",")).join(`
`),Z=new Blob([P],{type:"text/csv"}),Q=URL.createObjectURL(Z),de=document.createElement("a");de.href=Q,de.download=`cpd-activities-${Ft(new Date,"yyyy-MM-dd")}.csv`,de.click()};return i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"CPD Management"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Manage all CPD activities across the platform"})]}),n.jsxs(se,{onClick:X,variant:"outline",children:[n.jsx(so,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs(ue,{className:"p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Total Activities"}),n.jsx("div",{className:"text-2xl font-bold",children:t.length})]}),n.jsxs(ue,{className:"p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Pending"}),n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.filter(P=>P.status==="pending").length})]}),n.jsxs(ue,{className:"p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Approved"}),n.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(P=>P.status==="approved").length})]}),n.jsxs(ue,{className:"p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Total Points"}),n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.reduce((P,Z)=>P+(Z.points||0),0)})]})]}),n.jsxs(ue,{children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(ni,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx(Ne,{placeholder:"Search by title, member name or email...",value:u,onChange:P=>h(P.target.value),className:"pl-10"})]})}),n.jsx("div",{className:"w-48",children:n.jsxs("select",{value:m,onChange:P=>f(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"approved",children:"Approved"}),n.jsx("option",{value:"rejected",children:"Rejected"})]})})]})}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(P=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsx("div",{children:P.members?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[P.members.first_name," ",P.members.last_name]}),n.jsx("div",{className:"text-xs text-gray-500",children:P.members.email})]}):n.jsx("div",{className:"text-sm text-gray-400 italic",children:"Member data not available"})})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.activity_title}),n.jsx("div",{className:"text-xs text-gray-500",children:P.category_name})]})}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:Ft(new Date(P.date_completed),"dd/MM/yyyy")}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[P.hours,"h ",P.minutes,"m"]}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-sm font-semibold text-blue-600",children:P.points})}),n.jsx("td",{className:"px-4 py-3",children:H(P.status)}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(se,{size:"sm",variant:"ghost",onClick:()=>q(P),className:P.evidence_url?"text-blue-600 hover:text-blue-700":"text-gray-400",title:P.evidence_url?"View evidence":"No evidence uploaded",children:n.jsx(ri,{className:"w-4 h-4"})}),P.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx(se,{size:"sm",variant:"ghost",onClick:()=>R(P.id),className:"text-green-600 hover:text-green-700",children:n.jsx(ls,{className:"w-4 h-4"})}),n.jsx(se,{size:"sm",variant:"ghost",onClick:()=>D(P),className:"text-red-600 hover:text-red-700",children:n.jsx(sl,{className:"w-4 h-4"})})]}),n.jsx(se,{size:"sm",variant:"ghost",onClick:()=>w(P),children:n.jsx(ff,{className:"w-4 h-4"})}),n.jsx(se,{size:"sm",variant:"ghost",onClick:()=>z(P),className:"text-red-600 hover:text-red-700",children:n.jsx(go,{className:"w-4 h-4"})})]})})]},P.id))})]}),s.length===0&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No CPD activities found"})})]})]}),b&&p&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsx(ue,{className:"w-full max-w-lg mx-4",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit CPD Activity"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(he,{children:"Activity Title"}),n.jsx(Ne,{value:v.activity_title||"",onChange:P=>S({...v,activity_title:P.target.value})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{children:"Hours"}),n.jsx(Ne,{type:"number",value:v.hours||0,onChange:P=>S({...v,hours:parseInt(P.target.value)||0})})]}),n.jsxs("div",{children:[n.jsx(he,{children:"Minutes"}),n.jsx(Ne,{type:"number",value:v.minutes||0,onChange:P=>S({...v,minutes:parseInt(P.target.value)||0})})]})]}),n.jsxs("div",{children:[n.jsx(he,{children:"Points"}),n.jsx(Ne,{type:"number",step:"0.5",value:v.points||0,onChange:P=>S({...v,points:parseFloat(P.target.value)||0})})]}),n.jsxs("div",{children:[n.jsx(he,{children:"Status"}),n.jsxs("select",{value:v.status||"pending",onChange:P=>S({...v,status:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"approved",children:"Approved"}),n.jsx("option",{value:"rejected",children:"Rejected"})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[n.jsx(se,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),n.jsx(se,{onClick:C,children:"Save Changes"})]})]})})}),_&&A&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx(ue,{className:"w-full max-w-4xl max-h-[90vh] overflow-auto",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Evidence Document"}),n.jsx(se,{size:"sm",variant:"ghost",onClick:()=>{E(!1),O(null)},children:n.jsx(mn,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[A.filename&&n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["File: ",n.jsx("span",{className:"font-medium",children:A.filename})]}),A.url?n.jsxs("div",{className:"space-y-4",children:[A.url.startsWith("data:image")?n.jsx("img",{src:A.url,alt:"Evidence",className:"max-w-full h-auto rounded-lg"}):A.url.startsWith("data:application/pdf")?n.jsx("iframe",{src:A.url,className:"w-full h-[600px] rounded-lg",title:"Evidence PDF"}):A.url.startsWith("http")?n.jsxs("div",{children:[n.jsx("a",{href:A.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Open evidence in new tab"}),n.jsx("iframe",{src:A.url,className:"w-full h-[600px] rounded-lg mt-4",title:"Evidence Document"})]}):n.jsxs("div",{className:"text-gray-600",children:[n.jsx("p",{children:"Evidence format not supported for preview."}),A.url.substring(0,100),"..."]}),A.url.startsWith("data:")&&n.jsx("div",{className:"mt-4",children:n.jsxs(se,{onClick:()=>{const P=document.createElement("a");P.href=A.url,P.download=A.filename||"evidence",P.click()},children:[n.jsx(so,{className:"w-4 h-4 mr-2"}),"Download Evidence"]})})]}):n.jsx("p",{className:"text-gray-500",children:"No evidence file available"})]}),n.jsx("div",{className:"flex justify-end mt-6",children:n.jsx(se,{variant:"outline",onClick:()=>{E(!1),O(null)},children:"Close"})})]})})})]})})}function i9(){const t=Ns(),{user:e}=jt(),{hasPermission:s}=Rf(),r=s("ACCESS_ADMIN_DASHBOARD"),[i,o]=M.useState([]),[u,h]=M.useState([]),[m,f]=M.useState(!0),[p,x]=M.useState(""),[b,j]=M.useState("all"),[v,S]=M.useState("all");M.useEffect(()=>{_()},[]);const _=async()=>{try{f(!0);const[L,B]=await Promise.all([Xt.getPublicEvents(),Xt.getCategories()]);o(L),h(B)}catch(L){console.error("Error loading events:",L)}finally{f(!1)}},E=i.filter(L=>!(p&&!L.title.toLowerCase().includes(p.toLowerCase())&&!L.description?.toLowerCase().includes(p.toLowerCase())||b!=="all"&&L.category_id!==b||v!=="all"&&L.location_type!==v)),A=E.filter(L=>new Date(L.start_date)>=new Date),O=E.filter(L=>new Date(L.start_date)<new Date),F=L=>{const w=!!e?L.member_price_cents:L.non_member_price_cents;return w===0?"Free":Xt.formatPrice(w)},k=L=>{const B=new Date,w=new Date(L.start_date),C=L.registration_end_date?new Date(L.registration_end_date):w;if(B>C)return{text:"Registration Closed",color:"text-gray-500"};if(L.capacity>0){const z=L.capacity;if(z===0)return{text:"Sold Out",color:"text-red-500"};if(z<10)return{text:`${z} spots left`,color:"text-orange-500"}}return{text:"Open",color:"text-green-500"}};return m?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Events"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Discover and register for upcoming events"})]}),r&&n.jsx("div",{className:"flex gap-2",children:n.jsxs(se,{onClick:()=>t("/admin/events"),children:[n.jsx(no,{className:"h-4 w-4 mr-2"}),"Manage Events"]})})]}),n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(Ne,{placeholder:"Search events...",value:p,onChange:L=>x(L.target.value),className:"md:col-span-2"}),n.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:b,onChange:L=>j(L.target.value),children:[n.jsx("option",{value:"all",children:"All Categories"}),u.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}),n.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:v,onChange:L=>S(L.target.value),children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"physical",children:"In-Person"}),n.jsx("option",{value:"virtual",children:"Virtual"}),n.jsx("option",{value:"hybrid",children:"Hybrid"})]})]})}),A.length>0&&n.jsxs("div",{className:"mt-8",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Upcoming Events"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map(L=>{const B=k(L);return n.jsxs(ue,{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>t(`/events/${L.slug}`),children:[L.image_url?n.jsx("img",{src:L.image_url,alt:L.title,className:"w-full h-48 object-cover",onError:w=>{const C=w.target;C.onerror=null,C.src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800&h=400&fit=crop"}}):n.jsx("img",{src:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800&h=400&fit=crop",alt:L.title,className:"w-full h-48 object-cover"}),n.jsxs("div",{className:"p-6",children:[L.category&&n.jsx("span",{className:"inline-block px-2 py-1 text-xs font-semibold rounded-full mb-2",style:{backgroundColor:`${L.category.color}20`,color:L.category.color},children:L.category.name}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:L.title}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[n.jsx(js,{className:"h-4 w-4 mr-2"}),Ft(new Date(L.start_date),"MMM d, yyyy"),n.jsx(si,{className:"h-4 w-4 ml-3 mr-2"}),Ft(new Date(L.start_date),"h:mm a")]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-3",children:[n.jsx(Ln,{className:"h-4 w-4 mr-2"}),L.location_type==="virtual"?"Online Event":L.venue_name||L.city||"Location TBA"]}),n.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(cE,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"font-semibold",children:F(L)})]}),L.cpd_points>0&&n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(un,{className:"h-4 w-4 text-gray-400"}),n.jsxs("span",{children:[L.cpd_points," CPD"]})]})]}),n.jsx("span",{className:`text-xs font-semibold ${B.color}`,children:B.text})]})]})]},L.id)})})]}),O.length>0&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Past Events"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 opacity-75",children:O.map(L=>n.jsx(ue,{className:"overflow-hidden",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:L.title}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[n.jsx(js,{className:"h-4 w-4 mr-2"}),Ft(new Date(L.start_date),"MMM d, yyyy")]}),n.jsx("span",{className:"text-xs text-gray-500",children:"Event Completed"})]})},L.id))})]}),E.length===0&&n.jsxs(ue,{className:"p-12 text-center",children:[n.jsx(js,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No events found"}),n.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters or check back later for new events."})]})]})}const bj={BASE_URL:"http://localhost:3001",API_PREFIX:"/api/v1"},Fl=t=>`${bj.BASE_URL}${bj.API_PREFIX}${t}`;class Ka{static async checkDatabaseAvailable(){try{const{error:e}=await V.from("smtp_settings").select("id").limit(1);if(!e)return!0;const s=e.message?.toLowerCase()||"";return!(s.includes("relation")||s.includes("does not exist")||s.includes("not found"))}catch{return!1}}static async getSMTPSettings(){try{const{data:{session:e}}=await V.auth.getSession();if(!e)return{data:null,isLocal:!1};const r=await(await fetch(Fl("/email/settings"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`}})).json();if(r.success)return{data:r.data,isLocal:r.isLocal||!1}}catch(e){console.error("Error getting SMTP settings:",e)}return{data:null,isLocal:!1}}static async saveSMTPSettings(e){try{const{data:{session:s}}=await V.auth.getSession();if(!s)return{success:!1,message:"You must be logged in to save SMTP settings"};const i=await(await fetch(Fl("/email/settings"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify(e)})).json();return{success:i.success,message:i.message||(i.success?"SMTP settings saved successfully":"Failed to save SMTP settings")}}catch(s){return{success:!1,message:s.message||"Failed to save SMTP settings"}}}static async testSMTPConnection(){try{const{data:{session:e}}=await V.auth.getSession();if(!e)return{success:!1,message:"You must be logged in to test SMTP connection"};const r=await(await fetch(Fl("/email/test-connection"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`}})).json();return{success:r.success,message:r.message}}catch(e){return{success:!1,message:e.message||"Failed to test SMTP connection"}}}static async sendTestEmail(e){try{const{data:{session:s}}=await V.auth.getSession();if(!s)return{success:!1,message:"You must be logged in to send test emails"};const i=await(await fetch(Fl("/email/test"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify({to:e})})).json();return{success:i.success,message:i.message||(i.success?`Test email sent to ${e}`:"Failed to send test email")}}catch(s){return console.error("Error sending test email:",s),{success:!1,message:s.message||"Failed to send test email"}}}static async sendEmail(e){try{const{data:{session:s}}=await V.auth.getSession();if(!s)return{success:!1,message:"You must be logged in to send emails"};const i=await(await fetch(Fl("/email/send"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify(e)})).json();return{success:i.success,message:i.message}}catch(s){return console.error("Error sending email:",s),{success:!1,message:s.message||"Failed to send email"}}}static async sendEventRegistrationConfirmation(e){try{const{data:{session:s}}=await V.auth.getSession();if(!s)return{success:!1,message:"You must be logged in to send emails"};const i=await(await fetch(Fl("/email/event-registration"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify(e)})).json();return{success:i.success,message:i.message}}catch(s){return console.error("Error sending event registration email:",s),{success:!1,message:s.message||"Failed to send event registration email"}}}static async sendCPDNotification(e){try{const{data:{session:s}}=await V.auth.getSession();if(!s)return{success:!1,message:"You must be logged in to send emails"};const i=await(await fetch(Fl("/email/cpd-notification"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify(e)})).json();return{success:i.success,message:i.message}}catch(s){return console.error("Error sending CPD notification:",s),{success:!1,message:s.message||"Failed to send CPD notification"}}}static async getEmailTemplates(){try{const{data:e,error:s}=await V.from("email_templates").select("*").order("category",{ascending:!0}).order("name",{ascending:!0});if(s)throw s;return e||[]}catch(e){return console.error("Error fetching email templates:",e),[]}}static async saveEmailTemplate(e){try{if(e.id){const{error:s}=await V.from("email_templates").update({...e,updated_at:new Date().toISOString()}).eq("id",e.id);if(s)throw s}else{const{error:s}=await V.from("email_templates").insert({...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(s)throw s}return{success:!0,message:"Email template saved successfully"}}catch(s){return{success:!1,message:s.message||"Failed to save email template"}}}static async deleteEmailTemplate(e){try{const{error:s}=await V.from("email_templates").delete().eq("id",e);if(s)throw s;return{success:!0,message:"Email template deleted successfully"}}catch(s){return{success:!1,message:s.message||"Failed to delete email template"}}}static async getEmailLogs(e=100){try{const{data:s,error:r}=await V.from("email_logs").select("*").order("created_at",{ascending:!1}).limit(e);if(r)throw r;return s||[]}catch(s){return console.error("Error fetching email logs:",s),[]}}}const l9=cl;class ha{static async registerForEvent(e,s,r){try{const{data:i,error:o}=await V.from("event_registrations").select("*").eq("event_id",e).eq("user_id",s).single();if(i)throw new Error("You are already registered for this event");const u=await Xt.getEventById(e);if(!u)throw new Error("Event not found");if((await this.getEventRegistrations(e)).length>=u.capacity)throw new Error("Event is full");let f=!1?u.member_price_cents:u.non_member_price_cents;u.early_bird_price_cents&&u.early_bird_end_date&&new Date<new Date(u.early_bird_end_date)&&(f=u.early_bird_price_cents);const{data:p,error:x}=await V.from("event_registrations").insert({event_id:e,user_id:s,status:"registered",registration_type:"participant",payment_status:f===0?"waived":"pending",payment_amount:f,...r}).select().single();if(x)throw x;try{const{data:{user:b}}=await V.auth.getUser(),j=b?.email||"",v=b?.user_metadata?.full_name||b?.email?.split("@")[0]||"Member",S=Ft(new Date(u.start_date),"EEEE, MMMM d, yyyy"),_=Ft(new Date(u.start_date),"h:mm a"),E=u.location_type==="virtual"?"Online Event":u.venue_name||"TBA";await Ka.sendEventRegistrationConfirmation({to:j,userName:v,eventTitle:u.title,eventDate:S,eventTime:_,eventLocation:E,eventLink:`${window.location.origin}/events/${u.slug}`,registrationId:p.id}),console.log("Registration confirmation email sent to:",j)}catch(b){console.error("Failed to send confirmation email:",b)}return console.log(" ABOUT TO CALL scheduleConfigurableReminders"),await this.scheduleConfigurableReminders(p.id,e,s,u),console.log(" FINISHED CALLING scheduleConfigurableReminders"),p}catch(i){throw console.error("Error registering for event:",i),new Error(i.message||"Failed to register for event")}}static async cancelRegistration(e){try{const{error:s}=await V.from("event_registrations").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",e);if(s)throw s}catch(s){throw console.error("Error cancelling registration:",s),new Error(s.message||"Failed to cancel registration")}}static async checkInUser(e,s="manual"){try{const r={status:"attended",attended:!0,attendance_date:new Date().toISOString()};s&&(r.check_in_date=new Date().toISOString(),r.check_in_method=s,r.checked_in=!0),"updated_at"in r&&(r.updated_at=new Date().toISOString());const{error:i}=await V.from("event_registrations").update(r).eq("id",e);if(i){console.error("Check-in error:",i);const{error:o}=await V.from("event_registrations").update({status:"attended",attended:!0,attendance_date:new Date().toISOString()}).eq("id",e);if(o)throw o}try{const{data:o}=await V.from("event_registrations").select("*").eq("id",e).single();if(o&&!o.cpd_activity_created){const u=await Xt.getEventById(o.event_id);if(u&&u.cpd_points>0){const{data:{user:h}}=await V.auth.getUser(),m=h?.email||"",f=h?.user_metadata?.full_name||h?.email?.split("@")[0]||"Member",p=new Date(u.start_date),b=new Date(u.end_date).getTime()-p.getTime(),j=Math.floor(b/(1e3*60*60)),v=Math.floor(b%(1e3*60*60)/(1e3*60)),S=await l9.createActivity({category_id:14,activity_title:`Event: ${u.title}`,description:`Attended ${u.title} on ${Ft(p,"MMMM d, yyyy")}`,provider:"English Australia",date_completed:Ft(new Date,"yyyy-MM-dd"),hours:j,minutes:v},o.user_id,m);await V.from("event_registrations").update({cpd_activity_created:!0,cpd_activity_id:S.id}).eq("id",e),await Ka.sendCPDPointsNotification({to:m,userName:f,eventTitle:u.title,cpdPoints:u.cpd_points,cpdCategory:u.cpd_category||"Event Attendance",certificateLink:`/certificates/${e}`}),console.log(`CPD activity created for registration ${e}: ${u.cpd_points} points`)}}}catch(o){console.error("Error creating CPD activity:",o)}}catch(r){throw console.error("Error checking in user:",r),new Error(r.message||"Failed to check in")}}static async autoCheckIn(e,s){try{const{data:r,error:i}=await V.from("event_registrations").select("*").eq("event_id",e).eq("user_id",s).single();if(i||!r){console.log("No registration found for auto check-in");return}if(r.checked_in||r.attended){console.log("User already checked in");return}const o=await Xt.getEventById(e);if(!o)return;const u=new Date,h=new Date(o.start_date),m=new Date(o.end_date),f=new Date(h.getTime()-1800*1e3);u>=f&&u<=m&&(await this.checkInUser(r.id,"auto"),console.log("Auto check-in successful"))}catch(r){console.error("Error in auto check-in:",r)}}static async logAttendance(e,s,r,i,o){try{const{error:u}=await V.from("event_attendance_log").insert({registration_id:e,event_id:s,user_id:r,access_type:i,...o});if(u)throw u}catch(u){console.error("Error logging attendance:",u)}}static async generateCertificate(e){try{const{data:s,error:r}=await V.from("event_registrations").select("*").eq("id",e).single();if(r||!s)throw new Error("Registration not found");if(!s.checked_in&&!s.attended)throw new Error("Certificate can only be issued for attended events");const i=await Xt.getEventById(s.event_id);if(!i)throw new Error("Event not found");const{data:{user:o}}=await V.auth.getUser(),u=o?.email?.split("@")[0]||"Member";try{const{data:m}=await V.from("event_certificates").select("*").eq("registration_id",e).single();if(m)return m}catch{console.log("Certificate table might not exist yet")}const h={id:`cert-${Date.now()}`,registration_id:e,event_id:s.event_id,user_id:s.user_id,certificate_number:`CERT-${Date.now()}`,issue_date:new Date().toISOString(),recipient_name:u,event_title:i.title,event_date:new Date(i.start_date).toLocaleDateString("en-AU"),cpd_points:i.cpd_points,cpd_category:i.cpd_category,pdf_generated:!1,is_valid:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};try{await V.from("event_registrations").update({certificate_issued:!0,certificate_issued_date:new Date().toISOString(),certificate_number:h.certificate_number}).eq("id",e)}catch{console.log("Could not update registration with certificate info")}return h}catch(s){throw console.error("Error generating certificate:",s),new Error(s.message||"Failed to generate certificate")}}static async scheduleConfigurableReminders(e,s,r,i){try{console.log(" DEBUG: Starting scheduleConfigurableReminders"),console.log(" Event start date:",i.start_date),console.log(" Current time:",new Date().toISOString());const{data:{user:o}}=await V.auth.getUser(),u=o?.email;if(console.log(" Using email server API to create reminders..."),console.log(" User email:",u),!u){console.log(" No email found, skipping reminders");return}try{const m=await(await fetch("http://localhost:3001/api/create-reminders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({registrationId:e,eventId:s,userId:r,event:i})})).json();m.success?(console.log(` Successfully created ${m.created} reminders via email server`),console.log(" Reminders created:",m.reminders)):console.error(" Email server API error:",m.error)}catch(h){console.error(" Failed to call email server API:",h.message)}}catch(o){console.error("Error scheduling reminders:",o)}}static async scheduleReminders(e,s,r,i){try{const{data:{user:o}}=await V.auth.getUser(),u=o?.email;if(!u)return;const h=new Date(i),m=[{reminder_type:"1_week",scheduled_date:new Date(h.getTime()-10080*60*1e3)},{reminder_type:"1_day",scheduled_date:new Date(h.getTime()-1440*60*1e3)},{reminder_type:"1_hour",scheduled_date:new Date(h.getTime()-3600*1e3)}];for(const f of m)f.scheduled_date>new Date&&await V.from("event_reminders").insert({event_id:s,registration_id:e,user_id:r,reminder_type:f.reminder_type,scheduled_date:f.scheduled_date.toISOString(),email_to:u})}catch(o){console.error("Error scheduling reminders:",o)}}static async getUserRegistrations(e){try{const{data:s,error:r}=await V.from("event_registrations").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(r)throw r;return s||[]}catch(s){return console.error("Error fetching user registrations:",s),[]}}static async getEventRegistrations(e){try{const{data:s,error:r}=await V.from("event_registrations").select("*").eq("event_id",e).order("created_at",{ascending:!1});if(r)throw r;return s||[]}catch(s){return console.error("Error fetching event registrations:",s),[]}}static async getRegistration(e){try{const{data:s,error:r}=await V.from("event_registrations").select("*").eq("id",e).single();if(r)throw r;return s}catch(s){return console.error("Error fetching registration:",s),null}}static async isUserRegistered(e,s){try{const{data:r,error:i}=await V.from("event_registrations").select("id").eq("event_id",e).eq("user_id",s).single();return!!r&&!i}catch{return!1}}}function o9({event:t,onClose:e,onSuccess:s}){const{user:r}=jt(),[i,o]=M.useState(!1),[u,h]=M.useState("details"),[m,f]=M.useState({dietary_requirements:"",accessibility_requirements:"",notes:"",agree_terms:!1});if(!r)return null;const p=r.membership_status==="active";let x=p?t.member_price_cents:t.non_member_price_cents,b=p?"Member Price":"Non-Member Price";const j=t.early_bird_price_cents&&t.early_bird_end_date&&new Date<new Date(t.early_bird_end_date);j&&t.early_bird_price_cents&&(x=t.early_bird_price_cents,b="Early Bird Price");const v=async()=>{if(!m.agree_terms){ae("error","Please agree to the terms and conditions");return}o(!0);try{await ha.registerForEvent(t.id,r.id,{dietary_requirements:m.dietary_requirements,accessibility_requirements:m.accessibility_requirements,notes:m.notes}),h("confirmation"),ae("success","Successfully registered for the event!"),setTimeout(()=>{s()},3e3)}catch(S){console.error("Registration error:",S),ae("error",S.message||"Failed to register for event")}finally{o(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:u==="confirmation"?"Registration Complete!":"Register for Event"}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(mn,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[u==="details"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:t.title}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(js,{className:"h-4 w-4"}),n.jsx("span",{children:Ft(new Date(t.start_date),"PPP")})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(si,{className:"h-4 w-4"}),n.jsxs("span",{children:[Ft(new Date(t.start_date),"p")," -",Ft(new Date(t.end_date),"p")]})]}),t.venue_name&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ln,{className:"h-4 w-4"}),n.jsx("span",{children:t.venue_name})]})]})]}),n.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:b}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x===0?"Free":Xt.formatPrice(x)}),j&&n.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Early bird discount applied!"})]}),n.jsx(oE,{className:"h-8 w-8 text-primary-600"})]})}),t.cpd_points>0&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ls,{className:"h-5 w-5 text-blue-600"}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium text-gray-900",children:["Earn ",t.cpd_points," CPD Points"]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Certificate will be issued upon attendance"})]})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Additional Information (Optional)"}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"dietary",children:"Dietary Requirements"}),n.jsx(Ne,{id:"dietary",value:m.dietary_requirements,onChange:S=>f({...m,dietary_requirements:S.target.value}),placeholder:"e.g., Vegetarian, Gluten-free, Halal"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"accessibility",children:"Accessibility Requirements"}),n.jsx(Ne,{id:"accessibility",value:m.accessibility_requirements,onChange:S=>f({...m,accessibility_requirements:S.target.value}),placeholder:"e.g., Wheelchair access, Hearing loop"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"notes",children:"Additional Notes"}),n.jsx("textarea",{id:"notes",value:m.notes,onChange:S=>f({...m,notes:S.target.value}),placeholder:"Any other information we should know?",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3})]})]}),n.jsx("div",{className:"border-t pt-4",children:n.jsxs("label",{className:"flex items-start gap-3",children:[n.jsx("input",{type:"checkbox",checked:m.agree_terms,onChange:S=>f({...m,agree_terms:S.target.checked}),className:"mt-1"}),n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("p",{children:"I agree to the terms and conditions and understand that:"}),n.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[n.jsx("li",{children:"Registration is subject to availability"}),n.jsx("li",{children:"Cancellations must be made 48 hours in advance"}),n.jsx("li",{children:"CPD points will be awarded upon attendance"}),n.jsx("li",{children:"I will receive email reminders about this event"})]})]})]})})]}),u==="confirmation"&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(ls,{className:"h-8 w-8 text-green-600"})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"You're all set!"}),n.jsxs("p",{className:"text-gray-600 mb-6",children:['Your registration for "',t.title,'" has been confirmed.']}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-left max-w-md mx-auto",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"What's next?"}),n.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(ls,{className:"h-4 w-4 text-green-500 mt-0.5"}),n.jsx("span",{children:"You'll receive a confirmation email shortly"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(ls,{className:"h-4 w-4 text-green-500 mt-0.5"}),n.jsx("span",{children:"We'll send you reminders before the event"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(ls,{className:"h-4 w-4 text-green-500 mt-0.5"}),n.jsx("span",{children:"Your CPD activity will be created automatically when you attend"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(ls,{className:"h-4 w-4 text-green-500 mt-0.5"}),n.jsx("span",{children:"Certificate will be available after the event"})]})]})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50",children:[u==="details"&&n.jsxs(n.Fragment,{children:[n.jsx(se,{variant:"outline",onClick:e,disabled:i,children:"Cancel"}),n.jsx(se,{onClick:v,disabled:i||!m.agree_terms,children:i?"Registering...":x===0?"Register for Free":`Register & Pay ${Xt.formatPrice(x)}`})]}),u==="confirmation"&&n.jsx(se,{onClick:e,children:"Close"})]})]})})}function wE({content:t,className:e=""}){const s=t;return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`ql-container ql-snow ${e}`,style:{border:"none"},children:n.jsx("div",{className:"ql-editor",style:{padding:0,minHeight:"auto",fontSize:"16px",lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:s}})}),n.jsx("style",{children:`
        /* FIX FOR FRONT-END DISPLAY - Same logic as editor */
        
        /* BULLETS - Use native ::marker */
        .ql-editor ul {
          list-style-type: disc !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
        }
        
        .ql-editor ul li {
          list-style-type: disc !important;
          display: list-item !important;
        }
        
        .ql-editor li[data-list="bullet"] {
          list-style-type: disc !important;
          display: list-item !important;
        }
        
        /* Hide Quill's UI elements in rendered content */
        .ql-editor li > .ql-ui {
          display: none !important;
        }
        
        .ql-editor li > .ql-ui::before {
          content: none !important;
          display: none !important;
        }
        
        /* ORDERED LISTS - Use native numbering */
        .ql-editor ol {
          list-style-type: decimal !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
          counter-reset: none !important;
        }
        
        .ql-editor ol li {
          list-style-type: decimal !important;
          display: list-item !important;
        }
        
        .ql-editor li[data-list="ordered"] {
          list-style-type: decimal !important;
          display: list-item !important;
        }
        
        /* Remove any Quill counter increments */
        .ql-editor li[data-list] {
          counter-increment: none !important;
        }
        
        /* Spacing adjustments */
        .ql-editor h1 {
          margin: 0.5em 0 !important;
          font-size: 2em !important;
        }
        
        .ql-editor h2 {
          margin: 0.5em 0 !important;
          font-size: 1.5em !important;
        }
        
        .ql-editor h3 {
          margin: 0.5em 0 !important;
          font-size: 1.17em !important;
        }
        
        .ql-editor p {
          margin: 0.5em 0 !important;
        }
        
        .ql-editor p:first-child {
          margin-top: 0 !important;
        }
        
        .ql-editor p:last-child {
          margin-bottom: 0 !important;
        }
        
        .ql-editor blockquote {
          margin: 0.5em 0 !important;
          padding-left: 1em !important;
        }
        
        /* Keep numbered lists as normal */
        .ql-editor ol {
          list-style-type: decimal !important;
          display: block !important;
          margin: 0.5em 0 !important;
          padding-left: 1.5em !important;
        }
        
        .ql-editor ol > li {
          list-style-type: decimal !important;
          display: list-item !important;
          margin: 0.25em 0 !important;
        }
      `})]})}function c9({startDate:t,eventTitle:e,locationName:s,virtualLink:r,locationType:i="physical"}){const[o,u]=M.useState({days:0,hours:0,minutes:0,seconds:0,isLive:!1,isPast:!1});return M.useEffect(()=>{const h=()=>{const f=new Date().getTime(),x=new Date(t).getTime()-f;if(x<0)Math.abs(x)/36e5<2?u({days:0,hours:0,minutes:0,seconds:0,isLive:!0,isPast:!1}):u({days:0,hours:0,minutes:0,seconds:0,isLive:!1,isPast:!0});else{const b=Math.floor(x/864e5),j=Math.floor(x%(1e3*60*60*24)/(1e3*60*60)),v=Math.floor(x%(1e3*60*60)/(1e3*60)),S=Math.floor(x%(1e3*60)/1e3);u({days:b,hours:j,minutes:v,seconds:S,isLive:!1,isPast:!1})}};h();const m=setInterval(h,1e3);return()=>clearInterval(m)},[t]),o.isPast?n.jsx("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[n.jsx(js,{className:"h-5 w-5"}),n.jsx("p",{className:"text-lg font-medium",children:"This event has ended"})]})}):o.isLive?n.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 rounded-lg p-6 text-white animate-pulse",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[n.jsx("div",{className:"h-3 w-3 bg-white rounded-full animate-pulse"}),n.jsx("p",{className:"text-2xl font-bold",children:"EVENT IS LIVE NOW!"}),n.jsx("div",{className:"h-3 w-3 bg-white rounded-full animate-pulse"})]}),r&&(i==="virtual"||i==="hybrid")&&n.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 bg-white text-red-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition",children:[n.jsx(hE,{className:"h-5 w-5"}),n.jsx("span",{children:"Join Virtual Event"})]}),s&&(i==="physical"||i==="hybrid")&&n.jsxs("div",{className:"mt-4 flex items-center justify-center space-x-2",children:[n.jsx(Ln,{className:"h-5 w-5"}),n.jsx("span",{className:"text-lg",children:s})]})]})}):n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-teal-500 rounded-lg p-6 text-white",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[n.jsx(si,{className:"h-5 w-5"}),n.jsx("p",{className:"text-lg font-semibold",children:"Event Starts In"})]}),n.jsx("p",{className:"text-sm opacity-90",children:e})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[n.jsx("div",{className:"text-center",children:n.jsxs("div",{className:"bg-white/20 rounded-lg p-3 backdrop-blur",children:[n.jsx("div",{className:"text-3xl font-bold",children:String(o.days).padStart(2,"0")}),n.jsx("div",{className:"text-xs uppercase opacity-90 mt-1",children:"Days"})]})}),n.jsx("div",{className:"text-center",children:n.jsxs("div",{className:"bg-white/20 rounded-lg p-3 backdrop-blur",children:[n.jsx("div",{className:"text-3xl font-bold",children:String(o.hours).padStart(2,"0")}),n.jsx("div",{className:"text-xs uppercase opacity-90 mt-1",children:"Hours"})]})}),n.jsx("div",{className:"text-center",children:n.jsxs("div",{className:"bg-white/20 rounded-lg p-3 backdrop-blur",children:[n.jsx("div",{className:"text-3xl font-bold",children:String(o.minutes).padStart(2,"0")}),n.jsx("div",{className:"text-xs uppercase opacity-90 mt-1",children:"Minutes"})]})}),n.jsx("div",{className:"text-center",children:n.jsxs("div",{className:"bg-white/20 rounded-lg p-3 backdrop-blur",children:[n.jsx("div",{className:"text-3xl font-bold",children:String(o.seconds).padStart(2,"0")}),n.jsx("div",{className:"text-xs uppercase opacity-90 mt-1",children:"Seconds"})]})})]}),n.jsx("div",{className:"mt-4 text-center",children:n.jsx("p",{className:"text-sm opacity-90",children:new Date(t).toLocaleDateString("en-AU",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})})]})}function u9(){const{slug:t}=C4(),e=Ns(),{user:s,getEffectiveUserId:r}=jt(),i=r(),[o,u]=M.useState(null),[h,m]=M.useState(!0),[f,p]=M.useState(null),[x,b]=M.useState(!1),[j,v]=M.useState(0);M.useEffect(()=>{t&&S()},[t]);const S=async()=>{if(t)try{m(!0);const R=await Xt.getEventBySlug(t);if(!R){ae("error","Event not found"),e("/events");return}u(R);const D=await ha.getEventRegistrations(R.id);if(v(D.length),i&&await ha.isUserRegistered(R.id,i)){const X=(await ha.getUserRegistrations(i)).find(P=>P.event_id===R.id);p(X||null),await ha.autoCheckIn(R.id,i)}}catch(R){console.error("Error loading event:",R),ae("error","Failed to load event details")}finally{m(!1)}},_=()=>{if(!s){e("/login");return}b(!0)},E=()=>{b(!1),S()},A=()=>{navigator.share?navigator.share({title:o?.title,text:o?.short_description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),ae("success","Link copied to clipboard"))},O=()=>{if(!o)return!1;const R=new Date,D=new Date(o.start_date),q=new Date(o.end_date),H=10,X=new Date(D.getTime()-H*60*1e3);return R>=X&&R<=q},F=async()=>{if(!(!o||!f))try{await ha.checkInUser(f.id,"auto"),await ha.logAttendance(f.id,o.id,i,"video_start"),o.virtual_link&&window.open(o.virtual_link,"_blank"),ae("success","Check-in successful! Opening event...");const R=new Date(o.end_date);if(R>new Date){const q={eventId:o.id,registrationId:f.id,eventTitle:o.title,eventEndTime:R.toISOString(),cpdPoints:o.cpd_points,cpdCategory:o.cpd_category||"Event Attendance"};localStorage.setItem(`cpd_pending_${o.id}`,JSON.stringify(q))}await S()}catch(R){console.error("Error joining event:",R),ae("error","Failed to join event. Please try again.")}};if(h)return n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!o)return null;const k=s?.membership_status==="active",L=k?o.member_price_cents:o.non_member_price_cents,B=o.capacity-j,w=Xt.isRegistrationOpen(o);Xt.getEventStatus(o);const C=new Date(o.end_date)<new Date,z=B<=0;return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs(se,{variant:"ghost",onClick:()=>e("/events"),className:"mb-6",children:[n.jsx(iE,{className:"h-4 w-4 mr-2"}),"Back to Events"]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsx("img",{src:o.image_url||"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=1200&h=600&fit=crop",alt:o.title,className:"w-full h-64 lg:h-96 object-cover rounded-lg",onError:R=>{const D=R.target;D.onerror=null,D.src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=1200&h=600&fit=crop"}}),n.jsxs("div",{children:[o.category&&n.jsx("span",{className:"inline-block px-3 py-1 text-sm font-semibold rounded-full mb-3",style:{backgroundColor:`${o.category.color}20`,color:o.category.color},children:o.category.name}),n.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:o.title}),o.short_description&&n.jsx("p",{className:"text-lg text-gray-600",children:o.short_description})]}),n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(js,{className:"h-5 w-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Date & Time"}),n.jsx("p",{className:"text-gray-600",children:Ft(new Date(o.start_date),"EEEE, MMMM d, yyyy")}),n.jsxs("p",{className:"text-gray-600",children:[Ft(new Date(o.start_date),"h:mm a")," -",Ft(new Date(o.end_date),"h:mm a")]})]})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(Ln,{className:"h-5 w-5 text-gray-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Location"}),o.location_type==="virtual"?n.jsxs("div",{children:[n.jsxs("p",{className:"text-gray-600 flex items-center",children:[n.jsx(_y,{className:"h-4 w-4 mr-1"}),"Online Event"]}),f&&o.virtual_link&&n.jsx("div",{className:"mt-2",children:O()?n.jsxs(se,{onClick:F,className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:[n.jsx(hE,{className:"h-4 w-4 mr-2"}),"Join Live Event"]}):n.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[n.jsx(ti,{className:"h-4 w-4 mr-1"}),"Join button available 10 min before start"]})})]}):n.jsxs("div",{children:[o.venue_name&&n.jsxs("p",{className:"text-gray-600 flex items-center",children:[n.jsx(to,{className:"h-4 w-4 mr-1"}),o.venue_name]}),n.jsxs("p",{className:"text-gray-600",children:[o.address_line1,o.address_line2&&`, ${o.address_line2}`]}),n.jsxs("p",{className:"text-gray-600",children:[o.city,", ",o.state," ",o.postal_code]})]}),o.location_instructions&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:o.location_instructions})]})]})]})}),n.jsxs(ue,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"About This Event"}),o.description?n.jsx(wE,{content:o.description}):n.jsx("p",{className:"text-gray-600",children:"No description available"})]}),o.cpd_points>0&&n.jsxs(ue,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(un,{className:"h-6 w-6 text-primary-600 mr-2"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"CPD Points"})]}),n.jsxs("p",{className:"text-gray-600",children:["Earn ",n.jsxs("span",{className:"font-semibold",children:[o.cpd_points," CPD points"]})," by attending this event."]}),o.cpd_category&&n.jsxs("p",{className:"text-gray-600 mt-1",children:["Category: ",n.jsx("span",{className:"font-semibold",children:o.cpd_category})]})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(ue,{className:"p-6 sticky top-4 bg-white",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:k?"Member Price":"Non-Member Price"}),n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:L===0?"Free":Xt.formatPrice(L)}),o.early_bird_price_cents&&o.early_bird_end_date&&new Date<new Date(o.early_bird_end_date)&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Early bird pricing available until ",Ft(new Date(o.early_bird_end_date),"MMM d")]})]}),n.jsxs("div",{className:"flex items-center justify-between py-3 border-y",children:[n.jsxs("div",{className:"flex items-center text-gray-600",children:[n.jsx(Cr,{className:"h-5 w-5 mr-2"}),n.jsx("span",{children:"Capacity"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"font-semibold text-gray-900",children:o.capacity}),B>0&&B<10&&n.jsxs("p",{className:"text-sm text-orange-600",children:["Only ",B," spots left!"]})]})]}),!C&&n.jsx(n.Fragment,{children:f?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ls,{className:"h-5 w-5 text-green-600"}),n.jsx("p",{className:"text-green-800 font-semibold",children:"You're registered!"})]}),(f.checked_in||f.attended)&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(xo,{className:"h-4 w-4 text-green-600"}),n.jsx("p",{className:"text-sm text-green-600",children:"Checked in"})]}),f.certificate_issued&&n.jsx(se,{variant:"link",className:"text-sm text-primary-600 p-0 h-auto mt-2",onClick:()=>e(`/certificates/${f.certificate_number}`),children:"View Certificate "})]}),n.jsx(c9,{startDate:o.start_date,eventTitle:o.title,locationName:o.venue_name,virtualLink:o.virtual_link,locationType:o.location_type}),n.jsx(se,{variant:"outline",className:"w-full",onClick:()=>e("/cpd/activities"),children:"View in My CPD"})]}):n.jsxs(n.Fragment,{children:[w&&!z?n.jsx(se,{className:"w-full",size:"lg",onClick:_,children:"Register Now"}):n.jsx(se,{className:"w-full",size:"lg",disabled:!0,children:z?"Event Full":"Registration Closed"}),o.waitlist_enabled&&z&&n.jsx(se,{variant:"outline",className:"w-full mt-2",onClick:()=>ae("info","Waitlist feature coming soon"),children:"Join Waitlist"})]})}),C&&n.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:n.jsx("p",{className:"text-gray-600 text-center",children:"This event has ended"})}),n.jsxs("div",{className:"flex gap-2 pt-3",children:[n.jsxs(se,{variant:"outline",className:"flex-1",onClick:A,children:[n.jsx(YP,{className:"h-4 w-4 mr-2"}),"Share"]}),n.jsxs(se,{variant:"outline",className:"flex-1",onClick:()=>{},children:[n.jsx(wP,{className:"h-4 w-4 mr-2"}),"Save"]})]})]})}),n.jsxs(ue,{className:"p-6",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Organized by"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"h-12 w-12 bg-primary-100 rounded-full flex items-center justify-center",children:n.jsx(to,{className:"h-6 w-6 text-primary-600"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"English Australia"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Professional Development Team"})]})]})]}),o.tags&&o.tags.length>0&&n.jsxs(ue,{className:"p-6",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Tags"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:o.tags.map((R,D)=>n.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full",children:R},D))})]})]})]}),x&&o&&n.jsx(o9,{event:o,onClose:()=>b(!1),onSuccess:E})]})}function d9(){const t=Ns(),{user:e,getEffectiveUserId:s}=jt(),r=s(),[i,o]=M.useState([]),[u,h]=M.useState(!0),[m,f]=M.useState("upcoming");M.useEffect(()=>{r&&p()},[r]);const p=async()=>{if(r)try{h(!0);const E=await ha.getUserRegistrations(r),A=await Promise.all(E.map(async O=>{try{const F=await Xt.getEventById(O.event_id);return{registration:O,event:F}}catch(F){return console.error(`Failed to load event ${O.event_id}:`,F),{registration:O,event:null}}}));o(A)}catch(E){console.error("Error loading registrations:",E),ae("error","Failed to load your registrations")}finally{h(!1)}},x=async E=>{try{await ha.cancelRegistration(E),ae("success","Registration cancelled successfully"),p()}catch(A){console.error("Error cancelling registration:",A),ae("error","Failed to cancel registration")}},b=async E=>{try{const A=await ha.generateCertificate(E.id);A&&(ae("success","Certificate generated successfully"),console.log("Certificate:",A))}catch(A){console.error("Error generating certificate:",A),ae("error",A.message||"Failed to generate certificate")}},j=new Date,v=i.filter(E=>E.event&&new Date(E.event.end_date)>=j),S=i.filter(E=>E.event&&new Date(E.event.end_date)<j),_=m==="upcoming"?v:S;return u?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Event Registrations"}),n.jsx("p",{className:"text-gray-600",children:"Manage your event registrations and access certificates"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Registrations"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]}),n.jsx(nI,{className:"h-8 w-8 text-primary-600"})]})}),n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Upcoming Events"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.length})]}),n.jsx(js,{className:"h-8 w-8 text-blue-600"})]})}),n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Events Attended"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(E=>E.registration.attended||E.registration.checked_in).length})]}),n.jsx(ls,{className:"h-8 w-8 text-green-600"})]})})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6",children:n.jsxs("nav",{className:"-mb-px flex space-x-8",children:[n.jsxs("button",{onClick:()=>f("upcoming"),className:`py-2 px-1 border-b-2 font-medium text-sm ${m==="upcoming"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Upcoming Events (",v.length,")"]}),n.jsxs("button",{onClick:()=>f("past"),className:`py-2 px-1 border-b-2 font-medium text-sm ${m==="past"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Past Events (",S.length,")"]})]})}),_.length>0?n.jsx("div",{className:"space-y-4",children:_.map(({registration:E,event:A})=>{if(!A)return null;const O=new Date(A.end_date)<j,F=!O&&E.status==="registered",k=O&&(E.attended||E.checked_in);return n.jsx(ue,{className:"p-6",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("img",{src:A.image_url||"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=200&h=150&fit=crop",alt:A.title,className:"w-24 h-24 object-cover rounded-lg"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 cursor-pointer hover:text-primary-600",onClick:()=>t(`/events/${A.slug}`),children:A.title}),n.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(js,{className:"h-4 w-4"}),n.jsx("span",{children:Ft(new Date(A.start_date),"PPP")})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(si,{className:"h-4 w-4"}),n.jsxs("span",{children:[Ft(new Date(A.start_date),"p")," -",Ft(new Date(A.end_date),"p")]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ln,{className:"h-4 w-4"}),n.jsx("span",{children:A.location_type==="virtual"?"Online Event":A.venue_name||A.city||"Location TBA"})]})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${E.status==="cancelled"?"bg-gray-100 text-gray-800":E.status==="attended"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:E.status==="attended"?"Attended":E.status==="cancelled"?"Cancelled":"Registered"}),(E.checked_in||E.attended)&&n.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-green-600",children:[n.jsx(xo,{className:"h-3 w-3"}),"Checked In"]}),E.payment_amount&&E.payment_amount>0&&n.jsxs("span",{className:`inline-flex items-center gap-1 text-xs ${E.payment_status==="completed"?"text-green-600":E.payment_status==="pending"?"text-orange-600":"text-gray-600"}`,children:[n.jsx(cE,{className:"h-3 w-3"}),E.payment_status==="completed"?"Paid":E.payment_status==="pending"?"Payment Pending":E.payment_status]}),A.cpd_points>0&&n.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-purple-600",children:[n.jsx(un,{className:"h-3 w-3"}),A.cpd_points," CPD Points"]})]})]})]})}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(se,{variant:"outline",size:"sm",onClick:()=>t(`/events/${A.slug}`),children:"View Event"}),k&&n.jsxs(se,{variant:"outline",size:"sm",onClick:()=>b(E),children:[n.jsx(so,{className:"h-4 w-4 mr-2"}),"Certificate"]}),F&&n.jsx(se,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to cancel this registration?")&&x(E.id)},className:"text-red-600 hover:text-red-700 hover:border-red-300",children:"Cancel Registration"}),E.cpd_activity_id&&n.jsx(se,{variant:"outline",size:"sm",onClick:()=>t("/cpd/activities"),children:"View in CPD"})]})]})},E.id)})}):n.jsxs(ue,{className:"p-12 text-center",children:[n.jsx(ti,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:m==="upcoming"?"No upcoming events":"No past events"}),n.jsx("p",{className:"text-gray-600 mb-4",children:m==="upcoming"?"You are not registered for any upcoming events.":"You have not attended any past events."}),m==="upcoming"&&n.jsx(se,{onClick:()=>t("/events"),children:"Browse Events"})]})]})}var _E=typeof global=="object"&&global&&global.Object===Object&&global,h9=typeof self=="object"&&self&&self.Object===Object&&self,ya=_E||h9||Function("return this")(),al=ya.Symbol,jE=Object.prototype,m9=jE.hasOwnProperty,f9=jE.toString,od=al?al.toStringTag:void 0;function p9(t){var e=m9.call(t,od),s=t[od];try{t[od]=void 0;var r=!0}catch{}var i=f9.call(t);return r&&(e?t[od]=s:delete t[od]),i}var g9=Object.prototype,x9=g9.toString;function y9(t){return x9.call(t)}var b9="[object Null]",v9="[object Undefined]",vj=al?al.toStringTag:void 0;function Jc(t){return t==null?t===void 0?v9:b9:vj&&vj in Object(t)?p9(t):y9(t)}function ai(t){return t!=null&&typeof t=="object"}var ao=Array.isArray;function ul(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function NE(t){return t}var w9="[object AsyncFunction]",_9="[object Function]",j9="[object GeneratorFunction]",N9="[object Proxy]";function Ny(t){if(!ul(t))return!1;var e=Jc(t);return e==_9||e==j9||e==w9||e==N9}var x0=ya["__core-js_shared__"],wj=function(){var t=/[^.]+$/.exec(x0&&x0.keys&&x0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function S9(t){return!!wj&&wj in t}var E9=Function.prototype,C9=E9.toString;function yo(t){if(t!=null){try{return C9.call(t)}catch{}try{return t+""}catch{}}return""}var A9=/[\\^$.*+?()[\]{}|]/g,k9=/^\[object .+?Constructor\]$/,T9=Function.prototype,O9=Object.prototype,R9=T9.toString,M9=O9.hasOwnProperty,D9=RegExp("^"+R9.call(M9).replace(A9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function L9(t){if(!ul(t)||S9(t))return!1;var e=Ny(t)?D9:k9;return e.test(yo(t))}function q9(t,e){return t?.[e]}function bo(t,e){var s=q9(t,e);return L9(s)?s:void 0}var hx=bo(ya,"WeakMap"),_j=Object.create,P9=function(){function t(){}return function(e){if(!ul(e))return{};if(_j)return _j(e);t.prototype=e;var s=new t;return t.prototype=void 0,s}}();function I9(t,e,s){switch(s.length){case 0:return t.call(e);case 1:return t.call(e,s[0]);case 2:return t.call(e,s[0],s[1]);case 3:return t.call(e,s[0],s[1],s[2])}return t.apply(e,s)}function $9(t,e){var s=-1,r=t.length;for(e||(e=Array(r));++s<r;)e[s]=t[s];return e}var U9=800,B9=16,z9=Date.now;function F9(t){var e=0,s=0;return function(){var r=z9(),i=B9-(r-s);if(s=r,i>0){if(++e>=U9)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function H9(t){return function(){return t}}var gf=function(){try{var t=bo(Object,"defineProperty");return t({},"",{}),t}catch{}}(),V9=gf?function(t,e){return gf(t,"toString",{configurable:!0,enumerable:!1,value:H9(e),writable:!0})}:NE,G9=F9(V9);function Z9(t,e){for(var s=-1,r=t==null?0:t.length;++s<r&&e(t[s],s,t)!==!1;);return t}var Y9=9007199254740991,K9=/^(?:0|[1-9]\d*)$/;function SE(t,e){var s=typeof t;return e=e??Y9,!!e&&(s=="number"||s!="symbol"&&K9.test(t))&&t>-1&&t%1==0&&t<e}function Sy(t,e,s){e=="__proto__"&&gf?gf(t,e,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[e]=s}function eh(t,e){return t===e||t!==t&&e!==e}var W9=Object.prototype,Q9=W9.hasOwnProperty;function EE(t,e,s){var r=t[e];(!(Q9.call(t,e)&&eh(r,s))||s===void 0&&!(e in t))&&Sy(t,e,s)}function X9(t,e,s,r){var i=!s;s||(s={});for(var o=-1,u=e.length;++o<u;){var h=e[o],m=void 0;m===void 0&&(m=t[h]),i?Sy(s,h,m):EE(s,h,m)}return s}var jj=Math.max;function J9(t,e,s){return e=jj(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=jj(r.length-e,0),u=Array(o);++i<o;)u[i]=r[e+i];i=-1;for(var h=Array(e+1);++i<e;)h[i]=r[i];return h[e]=s(u),I9(t,this,h)}}function e$(t,e){return G9(J9(t,e,NE),t+"")}var t$=9007199254740991;function CE(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=t$}function $f(t){return t!=null&&CE(t.length)&&!Ny(t)}function s$(t,e,s){if(!ul(s))return!1;var r=typeof e;return(r=="number"?$f(s)&&SE(e,s.length):r=="string"&&e in s)?eh(s[e],t):!1}function r$(t){return e$(function(e,s){var r=-1,i=s.length,o=i>1?s[i-1]:void 0,u=i>2?s[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,u&&s$(s[0],s[1],u)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var h=s[r];h&&t(e,h,r,o)}return e})}var n$=Object.prototype;function Ey(t){var e=t&&t.constructor,s=typeof e=="function"&&e.prototype||n$;return t===s}function a$(t,e){for(var s=-1,r=Array(t);++s<t;)r[s]=e(s);return r}var i$="[object Arguments]";function Nj(t){return ai(t)&&Jc(t)==i$}var AE=Object.prototype,l$=AE.hasOwnProperty,o$=AE.propertyIsEnumerable,mx=Nj(function(){return arguments}())?Nj:function(t){return ai(t)&&l$.call(t,"callee")&&!o$.call(t,"callee")};function c$(){return!1}var kE=typeof Ur=="object"&&Ur&&!Ur.nodeType&&Ur,Sj=kE&&typeof Br=="object"&&Br&&!Br.nodeType&&Br,u$=Sj&&Sj.exports===kE,Ej=u$?ya.Buffer:void 0,d$=Ej?Ej.isBuffer:void 0,Td=d$||c$,h$="[object Arguments]",m$="[object Array]",f$="[object Boolean]",p$="[object Date]",g$="[object Error]",x$="[object Function]",y$="[object Map]",b$="[object Number]",v$="[object Object]",w$="[object RegExp]",_$="[object Set]",j$="[object String]",N$="[object WeakMap]",S$="[object ArrayBuffer]",E$="[object DataView]",C$="[object Float32Array]",A$="[object Float64Array]",k$="[object Int8Array]",T$="[object Int16Array]",O$="[object Int32Array]",R$="[object Uint8Array]",M$="[object Uint8ClampedArray]",D$="[object Uint16Array]",L$="[object Uint32Array]",Vt={};Vt[C$]=Vt[A$]=Vt[k$]=Vt[T$]=Vt[O$]=Vt[R$]=Vt[M$]=Vt[D$]=Vt[L$]=!0;Vt[h$]=Vt[m$]=Vt[S$]=Vt[f$]=Vt[E$]=Vt[p$]=Vt[g$]=Vt[x$]=Vt[y$]=Vt[b$]=Vt[v$]=Vt[w$]=Vt[_$]=Vt[j$]=Vt[N$]=!1;function q$(t){return ai(t)&&CE(t.length)&&!!Vt[Jc(t)]}function Cy(t){return function(e){return t(e)}}var TE=typeof Ur=="object"&&Ur&&!Ur.nodeType&&Ur,vd=TE&&typeof Br=="object"&&Br&&!Br.nodeType&&Br,P$=vd&&vd.exports===TE,y0=P$&&_E.process,Uc=function(){try{var t=vd&&vd.require&&vd.require("util").types;return t||y0&&y0.binding&&y0.binding("util")}catch{}}(),Cj=Uc&&Uc.isTypedArray,Ay=Cj?Cy(Cj):q$,I$=Object.prototype,$$=I$.hasOwnProperty;function OE(t,e){var s=ao(t),r=!s&&mx(t),i=!s&&!r&&Td(t),o=!s&&!r&&!i&&Ay(t),u=s||r||i||o,h=u?a$(t.length,String):[],m=h.length;for(var f in t)(e||$$.call(t,f))&&!(u&&(f=="length"||i&&(f=="offset"||f=="parent")||o&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||SE(f,m)))&&h.push(f);return h}function RE(t,e){return function(s){return t(e(s))}}var U$=RE(Object.keys,Object),B$=Object.prototype,z$=B$.hasOwnProperty;function F$(t){if(!Ey(t))return U$(t);var e=[];for(var s in Object(t))z$.call(t,s)&&s!="constructor"&&e.push(s);return e}function H$(t){return $f(t)?OE(t):F$(t)}function V$(t){var e=[];if(t!=null)for(var s in Object(t))e.push(s);return e}var G$=Object.prototype,Z$=G$.hasOwnProperty;function Y$(t){if(!ul(t))return V$(t);var e=Ey(t),s=[];for(var r in t)r=="constructor"&&(e||!Z$.call(t,r))||s.push(r);return s}function ME(t){return $f(t)?OE(t,!0):Y$(t)}var Od=bo(Object,"create");function K$(){this.__data__=Od?Od(null):{},this.size=0}function W$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Q$="__lodash_hash_undefined__",X$=Object.prototype,J$=X$.hasOwnProperty;function eU(t){var e=this.__data__;if(Od){var s=e[t];return s===Q$?void 0:s}return J$.call(e,t)?e[t]:void 0}var tU=Object.prototype,sU=tU.hasOwnProperty;function rU(t){var e=this.__data__;return Od?e[t]!==void 0:sU.call(e,t)}var nU="__lodash_hash_undefined__";function aU(t,e){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=Od&&e===void 0?nU:e,this}function io(t){var e=-1,s=t==null?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}io.prototype.clear=K$;io.prototype.delete=W$;io.prototype.get=eU;io.prototype.has=rU;io.prototype.set=aU;function iU(){this.__data__=[],this.size=0}function Uf(t,e){for(var s=t.length;s--;)if(eh(t[s][0],e))return s;return-1}var lU=Array.prototype,oU=lU.splice;function cU(t){var e=this.__data__,s=Uf(e,t);if(s<0)return!1;var r=e.length-1;return s==r?e.pop():oU.call(e,s,1),--this.size,!0}function uU(t){var e=this.__data__,s=Uf(e,t);return s<0?void 0:e[s][1]}function dU(t){return Uf(this.__data__,t)>-1}function hU(t,e){var s=this.__data__,r=Uf(s,t);return r<0?(++this.size,s.push([t,e])):s[r][1]=e,this}function li(t){var e=-1,s=t==null?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}li.prototype.clear=iU;li.prototype.delete=cU;li.prototype.get=uU;li.prototype.has=dU;li.prototype.set=hU;var Rd=bo(ya,"Map");function mU(){this.size=0,this.__data__={hash:new io,map:new(Rd||li),string:new io}}function fU(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Bf(t,e){var s=t.__data__;return fU(e)?s[typeof e=="string"?"string":"hash"]:s.map}function pU(t){var e=Bf(this,t).delete(t);return this.size-=e?1:0,e}function gU(t){return Bf(this,t).get(t)}function xU(t){return Bf(this,t).has(t)}function yU(t,e){var s=Bf(this,t),r=s.size;return s.set(t,e),this.size+=s.size==r?0:1,this}function vo(t){var e=-1,s=t==null?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}vo.prototype.clear=mU;vo.prototype.delete=pU;vo.prototype.get=gU;vo.prototype.has=xU;vo.prototype.set=yU;function bU(t,e){for(var s=-1,r=e.length,i=t.length;++s<r;)t[i+s]=e[s];return t}var DE=RE(Object.getPrototypeOf,Object),vU="[object Object]",wU=Function.prototype,_U=Object.prototype,LE=wU.toString,jU=_U.hasOwnProperty,NU=LE.call(Object);function SU(t){if(!ai(t)||Jc(t)!=vU)return!1;var e=DE(t);if(e===null)return!0;var s=jU.call(e,"constructor")&&e.constructor;return typeof s=="function"&&s instanceof s&&LE.call(s)==NU}function EU(){this.__data__=new li,this.size=0}function CU(t){var e=this.__data__,s=e.delete(t);return this.size=e.size,s}function AU(t){return this.__data__.get(t)}function kU(t){return this.__data__.has(t)}var TU=200;function OU(t,e){var s=this.__data__;if(s instanceof li){var r=s.__data__;if(!Rd||r.length<TU-1)return r.push([t,e]),this.size=++s.size,this;s=this.__data__=new vo(r)}return s.set(t,e),this.size=s.size,this}function fa(t){var e=this.__data__=new li(t);this.size=e.size}fa.prototype.clear=EU;fa.prototype.delete=CU;fa.prototype.get=AU;fa.prototype.has=kU;fa.prototype.set=OU;var qE=typeof Ur=="object"&&Ur&&!Ur.nodeType&&Ur,Aj=qE&&typeof Br=="object"&&Br&&!Br.nodeType&&Br,RU=Aj&&Aj.exports===qE,kj=RU?ya.Buffer:void 0,Tj=kj?kj.allocUnsafe:void 0;function PE(t,e){if(e)return t.slice();var s=t.length,r=Tj?Tj(s):new t.constructor(s);return t.copy(r),r}function MU(t,e){for(var s=-1,r=t==null?0:t.length,i=0,o=[];++s<r;){var u=t[s];e(u,s,t)&&(o[i++]=u)}return o}function DU(){return[]}var LU=Object.prototype,qU=LU.propertyIsEnumerable,Oj=Object.getOwnPropertySymbols,PU=Oj?function(t){return t==null?[]:(t=Object(t),MU(Oj(t),function(e){return qU.call(t,e)}))}:DU;function IU(t,e,s){var r=e(t);return ao(t)?r:bU(r,s(t))}function fx(t){return IU(t,H$,PU)}var px=bo(ya,"DataView"),gx=bo(ya,"Promise"),xx=bo(ya,"Set"),Rj="[object Map]",$U="[object Object]",Mj="[object Promise]",Dj="[object Set]",Lj="[object WeakMap]",qj="[object DataView]",UU=yo(px),BU=yo(Rd),zU=yo(gx),FU=yo(xx),HU=yo(hx),Cn=Jc;(px&&Cn(new px(new ArrayBuffer(1)))!=qj||Rd&&Cn(new Rd)!=Rj||gx&&Cn(gx.resolve())!=Mj||xx&&Cn(new xx)!=Dj||hx&&Cn(new hx)!=Lj)&&(Cn=function(t){var e=Jc(t),s=e==$U?t.constructor:void 0,r=s?yo(s):"";if(r)switch(r){case UU:return qj;case BU:return Rj;case zU:return Mj;case FU:return Dj;case HU:return Lj}return e});var VU=Object.prototype,GU=VU.hasOwnProperty;function ZU(t){var e=t.length,s=new t.constructor(e);return e&&typeof t[0]=="string"&&GU.call(t,"index")&&(s.index=t.index,s.input=t.input),s}var xf=ya.Uint8Array;function ky(t){var e=new t.constructor(t.byteLength);return new xf(e).set(new xf(t)),e}function YU(t,e){var s=ky(t.buffer);return new t.constructor(s,t.byteOffset,t.byteLength)}var KU=/\w*$/;function WU(t){var e=new t.constructor(t.source,KU.exec(t));return e.lastIndex=t.lastIndex,e}var Pj=al?al.prototype:void 0,Ij=Pj?Pj.valueOf:void 0;function QU(t){return Ij?Object(Ij.call(t)):{}}function IE(t,e){var s=e?ky(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.length)}var XU="[object Boolean]",JU="[object Date]",eB="[object Map]",tB="[object Number]",sB="[object RegExp]",rB="[object Set]",nB="[object String]",aB="[object Symbol]",iB="[object ArrayBuffer]",lB="[object DataView]",oB="[object Float32Array]",cB="[object Float64Array]",uB="[object Int8Array]",dB="[object Int16Array]",hB="[object Int32Array]",mB="[object Uint8Array]",fB="[object Uint8ClampedArray]",pB="[object Uint16Array]",gB="[object Uint32Array]";function xB(t,e,s){var r=t.constructor;switch(e){case iB:return ky(t);case XU:case JU:return new r(+t);case lB:return YU(t);case oB:case cB:case uB:case dB:case hB:case mB:case fB:case pB:case gB:return IE(t,s);case eB:return new r;case tB:case nB:return new r(t);case sB:return WU(t);case rB:return new r;case aB:return QU(t)}}function $E(t){return typeof t.constructor=="function"&&!Ey(t)?P9(DE(t)):{}}var yB="[object Map]";function bB(t){return ai(t)&&Cn(t)==yB}var $j=Uc&&Uc.isMap,vB=$j?Cy($j):bB,wB="[object Set]";function _B(t){return ai(t)&&Cn(t)==wB}var Uj=Uc&&Uc.isSet,jB=Uj?Cy(Uj):_B,NB=1,UE="[object Arguments]",SB="[object Array]",EB="[object Boolean]",CB="[object Date]",AB="[object Error]",BE="[object Function]",kB="[object GeneratorFunction]",TB="[object Map]",OB="[object Number]",zE="[object Object]",RB="[object RegExp]",MB="[object Set]",DB="[object String]",LB="[object Symbol]",qB="[object WeakMap]",PB="[object ArrayBuffer]",IB="[object DataView]",$B="[object Float32Array]",UB="[object Float64Array]",BB="[object Int8Array]",zB="[object Int16Array]",FB="[object Int32Array]",HB="[object Uint8Array]",VB="[object Uint8ClampedArray]",GB="[object Uint16Array]",ZB="[object Uint32Array]",Bt={};Bt[UE]=Bt[SB]=Bt[PB]=Bt[IB]=Bt[EB]=Bt[CB]=Bt[$B]=Bt[UB]=Bt[BB]=Bt[zB]=Bt[FB]=Bt[TB]=Bt[OB]=Bt[zE]=Bt[RB]=Bt[MB]=Bt[DB]=Bt[LB]=Bt[HB]=Bt[VB]=Bt[GB]=Bt[ZB]=!0;Bt[AB]=Bt[BE]=Bt[qB]=!1;function Fm(t,e,s,r,i,o){var u,h=e&NB;if(u!==void 0)return u;if(!ul(t))return t;var m=ao(t);if(m)u=ZU(t);else{var f=Cn(t),p=f==BE||f==kB;if(Td(t))return PE(t,h);if(f==zE||f==UE||p&&!i)u=p?{}:$E(t);else{if(!Bt[f])return i?t:{};u=xB(t,f,h)}}o||(o=new fa);var x=o.get(t);if(x)return x;o.set(t,u),jB(t)?t.forEach(function(v){u.add(Fm(v,e,s,v,t,o))}):vB(t)&&t.forEach(function(v,S){u.set(S,Fm(v,e,s,S,t,o))});var b=fx,j=m?void 0:b(t);return Z9(j||t,function(v,S){j&&(S=v,v=t[S]),EE(u,S,Fm(v,e,s,S,t,o))}),u}var YB=1,KB=4;function Dc(t){return Fm(t,YB|KB)}var WB="__lodash_hash_undefined__";function QB(t){return this.__data__.set(t,WB),this}function XB(t){return this.__data__.has(t)}function yf(t){var e=-1,s=t==null?0:t.length;for(this.__data__=new vo;++e<s;)this.add(t[e])}yf.prototype.add=yf.prototype.push=QB;yf.prototype.has=XB;function JB(t,e){for(var s=-1,r=t==null?0:t.length;++s<r;)if(e(t[s],s,t))return!0;return!1}function ez(t,e){return t.has(e)}var tz=1,sz=2;function FE(t,e,s,r,i,o){var u=s&tz,h=t.length,m=e.length;if(h!=m&&!(u&&m>h))return!1;var f=o.get(t),p=o.get(e);if(f&&p)return f==e&&p==t;var x=-1,b=!0,j=s&sz?new yf:void 0;for(o.set(t,e),o.set(e,t);++x<h;){var v=t[x],S=e[x];if(r)var _=u?r(S,v,x,e,t,o):r(v,S,x,t,e,o);if(_!==void 0){if(_)continue;b=!1;break}if(j){if(!JB(e,function(E,A){if(!ez(j,A)&&(v===E||i(v,E,s,r,o)))return j.push(A)})){b=!1;break}}else if(!(v===S||i(v,S,s,r,o))){b=!1;break}}return o.delete(t),o.delete(e),b}function rz(t){var e=-1,s=Array(t.size);return t.forEach(function(r,i){s[++e]=[i,r]}),s}function nz(t){var e=-1,s=Array(t.size);return t.forEach(function(r){s[++e]=r}),s}var az=1,iz=2,lz="[object Boolean]",oz="[object Date]",cz="[object Error]",uz="[object Map]",dz="[object Number]",hz="[object RegExp]",mz="[object Set]",fz="[object String]",pz="[object Symbol]",gz="[object ArrayBuffer]",xz="[object DataView]",Bj=al?al.prototype:void 0,b0=Bj?Bj.valueOf:void 0;function yz(t,e,s,r,i,o,u){switch(s){case xz:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case gz:return!(t.byteLength!=e.byteLength||!o(new xf(t),new xf(e)));case lz:case oz:case dz:return eh(+t,+e);case cz:return t.name==e.name&&t.message==e.message;case hz:case fz:return t==e+"";case uz:var h=rz;case mz:var m=r&az;if(h||(h=nz),t.size!=e.size&&!m)return!1;var f=u.get(t);if(f)return f==e;r|=iz,u.set(t,e);var p=FE(h(t),h(e),r,i,o,u);return u.delete(t),p;case pz:if(b0)return b0.call(t)==b0.call(e)}return!1}var bz=1,vz=Object.prototype,wz=vz.hasOwnProperty;function _z(t,e,s,r,i,o){var u=s&bz,h=fx(t),m=h.length,f=fx(e),p=f.length;if(m!=p&&!u)return!1;for(var x=m;x--;){var b=h[x];if(!(u?b in e:wz.call(e,b)))return!1}var j=o.get(t),v=o.get(e);if(j&&v)return j==e&&v==t;var S=!0;o.set(t,e),o.set(e,t);for(var _=u;++x<m;){b=h[x];var E=t[b],A=e[b];if(r)var O=u?r(A,E,b,e,t,o):r(E,A,b,t,e,o);if(!(O===void 0?E===A||i(E,A,s,r,o):O)){S=!1;break}_||(_=b=="constructor")}if(S&&!_){var F=t.constructor,k=e.constructor;F!=k&&"constructor"in t&&"constructor"in e&&!(typeof F=="function"&&F instanceof F&&typeof k=="function"&&k instanceof k)&&(S=!1)}return o.delete(t),o.delete(e),S}var jz=1,zj="[object Arguments]",Fj="[object Array]",Em="[object Object]",Nz=Object.prototype,Hj=Nz.hasOwnProperty;function Sz(t,e,s,r,i,o){var u=ao(t),h=ao(e),m=u?Fj:Cn(t),f=h?Fj:Cn(e);m=m==zj?Em:m,f=f==zj?Em:f;var p=m==Em,x=f==Em,b=m==f;if(b&&Td(t)){if(!Td(e))return!1;u=!0,p=!1}if(b&&!p)return o||(o=new fa),u||Ay(t)?FE(t,e,s,r,i,o):yz(t,e,m,s,r,i,o);if(!(s&jz)){var j=p&&Hj.call(t,"__wrapped__"),v=x&&Hj.call(e,"__wrapped__");if(j||v){var S=j?t.value():t,_=v?e.value():e;return o||(o=new fa),i(S,_,s,r,o)}}return b?(o||(o=new fa),_z(t,e,s,r,i,o)):!1}function HE(t,e,s,r,i){return t===e?!0:t==null||e==null||!ai(t)&&!ai(e)?t!==t&&e!==e:Sz(t,e,s,r,HE,i)}function Ez(t){return function(e,s,r){for(var i=-1,o=Object(e),u=r(e),h=u.length;h--;){var m=u[++i];if(s(o[m],m,o)===!1)break}return e}}var Cz=Ez();function yx(t,e,s){(s!==void 0&&!eh(t[e],s)||s===void 0&&!(e in t))&&Sy(t,e,s)}function Az(t){return ai(t)&&$f(t)}function bx(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function kz(t){return X9(t,ME(t))}function Tz(t,e,s,r,i,o,u){var h=bx(t,s),m=bx(e,s),f=u.get(m);if(f){yx(t,s,f);return}var p=o?o(h,m,s+"",t,e,u):void 0,x=p===void 0;if(x){var b=ao(m),j=!b&&Td(m),v=!b&&!j&&Ay(m);p=m,b||j||v?ao(h)?p=h:Az(h)?p=$9(h):j?(x=!1,p=PE(m,!0)):v?(x=!1,p=IE(m,!0)):p=[]:SU(m)||mx(m)?(p=h,mx(h)?p=kz(h):(!ul(h)||Ny(h))&&(p=$E(m))):x=!1}x&&(u.set(m,p),i(p,m,r,o,u),u.delete(m)),yx(t,s,p)}function VE(t,e,s,r,i){t!==e&&Cz(e,function(o,u){if(i||(i=new fa),ul(o))Tz(t,e,u,s,VE,r,i);else{var h=r?r(bx(t,u),o,u+"",t,e,i):void 0;h===void 0&&(h=o),yx(t,u,h)}},ME)}function Ty(t,e){return HE(t,e)}var el=r$(function(t,e,s){VE(t,e,s)}),He=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(He||{});class ga{constructor(e,s,r={}){this.attrName=e,this.keyName=s;const i=He.TYPE&He.ATTRIBUTE;this.scope=r.scope!=null?r.scope&He.LEVEL|i:He.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(s=>s.name)}add(e,s){return this.canAdd(e,s)?(e.setAttribute(this.keyName,s),!0):!1}canAdd(e,s){return this.whitelist==null?!0:typeof s=="string"?this.whitelist.indexOf(s.replace(/["']/g,""))>-1:this.whitelist.indexOf(s)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const s=e.getAttribute(this.keyName);return this.canAdd(e,s)&&s?s:""}}class Lc extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const GE=class vx{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,s=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(s){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,s)}return null}create(e,s,r){const i=this.query(s);if(i==null)throw new Lc(`Unable to create ${s} blot`);const o=i,u=s instanceof Node||s.nodeType===Node.TEXT_NODE?s:o.create(r),h=new o(e,u,r);return vx.blots.set(h.domNode,h),h}find(e,s=!1){return vx.find(e,s)}query(e,s=He.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&He.LEVEL&He.BLOCK?r=this.types.block:e&He.LEVEL&He.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(i=>(r=this.classes[i],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&s&He.LEVEL&r.scope&&s&He.TYPE&r.scope?r:null}register(...e){return e.map(s=>{const r="blotName"in s,i="attrName"in s;if(!r&&!i)throw new Lc("Invalid definition");if(r&&s.blotName==="abstract")throw new Lc("Cannot register abstract class");const o=r?s.blotName:i?s.attrName:void 0;return this.types[o]=s,i?typeof s.keyName=="string"&&(this.attributes[s.keyName]=s):r&&(s.className&&(this.classes[s.className]=s),s.tagName&&(Array.isArray(s.tagName)?s.tagName=s.tagName.map(u=>u.toUpperCase()):s.tagName=s.tagName.toUpperCase(),(Array.isArray(s.tagName)?s.tagName:[s.tagName]).forEach(u=>{(this.tags[u]==null||s.className==null)&&(this.tags[u]=s)}))),s})}};GE.blots=new WeakMap;let Bc=GE;function Vj(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(s=>s.indexOf(`${e}-`)===0)}class Oz extends ga{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(s=>s.split("-").slice(0,-1).join("-"))}add(e,s){return this.canAdd(e,s)?(this.remove(e),e.classList.add(`${this.keyName}-${s}`),!0):!1}remove(e){Vj(e,this.keyName).forEach(s=>{e.classList.remove(s)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const s=(Vj(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,s)?s:""}}const Fn=Oz;function v0(t){const e=t.split("-"),s=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+s}class Rz extends ga{static keys(e){return(e.getAttribute("style")||"").split(";").map(s=>s.split(":")[0].trim())}add(e,s){return this.canAdd(e,s)?(e.style[v0(this.keyName)]=s,!0):!1}remove(e){e.style[v0(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const s=e.style[v0(this.keyName)];return this.canAdd(e,s)?s:""}}const dl=Rz;class Mz{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,s){s?e.add(this.domNode,s)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Bc.find(this.domNode);if(e==null)return;const s=ga.keys(this.domNode),r=Fn.keys(this.domNode),i=dl.keys(this.domNode);s.concat(r).concat(i).forEach(o=>{const u=e.scroll.query(o,He.ATTRIBUTE);u instanceof ga&&(this.attributes[u.attrName]=u)})}copy(e){Object.keys(this.attributes).forEach(s=>{const r=this.attributes[s].value(this.domNode);e.format(s,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(s=>{this.attributes[s].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,s)=>(e[s]=this.attributes[s].value(this.domNode),e),{})}}const zf=Mz,ZE=class{constructor(e,s){this.scroll=e,this.domNode=s,Bc.blots.set(s,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Lc("Blot definition missing tagName");let s,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?s=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?s=document.createElement(r):s=document.createElement(this.tagName[0])):s=document.createElement(this.tagName),this.className&&s.classList.add(this.className),s}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Bc.blots.delete(this.domNode)}deleteAt(e,s){this.isolate(e,s).remove()}formatAt(e,s,r,i){const o=this.isolate(e,s);if(this.scroll.query(r,He.BLOT)!=null&&i)o.wrap(r,i);else if(this.scroll.query(r,He.ATTRIBUTE)!=null){const u=this.scroll.create(this.statics.scope);o.wrap(u),u.format(r,i)}}insertAt(e,s,r){const i=r==null?this.scroll.create("text",s):this.scroll.create(s,r),o=this.split(e);this.parent.insertBefore(i,o||void 0)}isolate(e,s){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(s),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,s){const r=typeof e=="string"?this.scroll.create(e,s):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,s){return e===0?this:this.next}update(e,s){}wrap(e,s){const r=typeof e=="string"?this.scroll.create(e,s):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new Lc(`Cannot wrap ${e}`);return r.appendChild(this),r}};ZE.blotName="abstract";let YE=ZE;const KE=class extends YE{static value(e){return!0}index(e,s){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(s,1):-1}position(e,s){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};KE.scope=He.INLINE_BLOT;let Dz=KE;const nr=Dz;class Lz{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const s=e.slice(1);this.append(...s)}}at(e){const s=this.iterator();let r=s();for(;r&&e>0;)e-=1,r=s();return r}contains(e){const s=this.iterator();let r=s();for(;r;){if(r===e)return!0;r=s()}return!1}indexOf(e){const s=this.iterator();let r=s(),i=0;for(;r;){if(r===e)return i;i+=1,r=s()}return-1}insertBefore(e,s){e!=null&&(this.remove(e),e.next=s,s!=null?(e.prev=s.prev,s.prev!=null&&(s.prev.next=e),s.prev=e,s===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let s=0,r=this.head;for(;r!=null;){if(r===e)return s;s+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const s=e;return e!=null&&(e=e.next),s}}find(e,s=!1){const r=this.iterator();let i=r();for(;i;){const o=i.length();if(e<o||s&&e===o&&(i.next==null||i.next.length()!==0))return[i,e];e-=o,i=r()}return[null,0]}forEach(e){const s=this.iterator();let r=s();for(;r;)e(r),r=s()}forEachAt(e,s,r){if(s<=0)return;const[i,o]=this.find(e);let u=e-o;const h=this.iterator(i);let m=h();for(;m&&u<e+s;){const f=m.length();e>u?r(m,e-u,Math.min(s,u+f-e)):r(m,0,Math.min(f,e+s-u)),u+=f,m=h()}}map(e){return this.reduce((s,r)=>(s.push(e(r)),s),[])}reduce(e,s){const r=this.iterator();let i=r();for(;i;)s=e(s,i),i=r();return s}}function Gj(t,e){const s=e.find(t);if(s)return s;try{return e.create(t)}catch{const r=e.create(He.INLINE);return Array.from(t.childNodes).forEach(i=>{r.domNode.appendChild(i)}),t.parentNode&&t.parentNode.replaceChild(r.domNode,t),r.attach(),r}}const WE=class Gi extends YE{constructor(e,s){super(e,s),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,Gi.uiClass&&this.uiNode.classList.add(Gi.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Lz,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const s=Gj(e,this.scroll);this.insertBefore(s,this.children.head||void 0)}catch(s){if(s instanceof Lc)return;throw s}})}deleteAt(e,s){if(e===0&&s===this.length())return this.remove();this.children.forEachAt(e,s,(r,i,o)=>{r.deleteAt(i,o)})}descendant(e,s=0){const[r,i]=this.children.find(s);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,i]:r instanceof Gi?r.descendant(e,i):[null,-1]}descendants(e,s=0,r=Number.MAX_VALUE){let i=[],o=r;return this.children.forEachAt(s,r,(u,h,m)=>{(e.blotName==null&&e(u)||e.blotName!=null&&u instanceof e)&&i.push(u),u instanceof Gi&&(i=i.concat(u.descendants(e,h,o))),o-=m}),i}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(s=>{e||this.statics.allowedChildren.some(r=>s instanceof r)||(s.statics.scope===He.BLOCK_BLOT?(s.next!=null&&this.splitAfter(s),s.prev!=null&&this.splitAfter(s.prev),s.parent.unwrap(),e=!0):s instanceof Gi?s.unwrap():s.remove())})}formatAt(e,s,r,i){this.children.forEachAt(e,s,(o,u,h)=>{o.formatAt(u,h,r,i)})}insertAt(e,s,r){const[i,o]=this.children.find(e);if(i)i.insertAt(o,s,r);else{const u=r==null?this.scroll.create("text",s):this.scroll.create(s,r);this.appendChild(u)}}insertBefore(e,s){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,s||null),e.parent=this,s!=null&&(r=s.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,s)=>e+s.length(),0)}moveChildren(e,s){this.children.forEach(r=>{e.insertBefore(r,s)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s)}else this.remove()}path(e,s=!1){const[r,i]=this.children.find(e,s),o=[[this,e]];return r instanceof Gi?o.concat(r.path(i,s)):(r!=null&&o.push([r,i]),o)}removeChild(e){this.children.remove(e)}replaceWith(e,s){const r=typeof e=="string"?this.scroll.create(e,s):e;return r instanceof Gi&&this.moveChildren(r),super.replaceWith(r)}split(e,s=!1){if(!s){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(i,o,u)=>{const h=i.split(o,s);h!=null&&r.appendChild(h)}),r}splitAfter(e){const s=this.clone();for(;e.next!=null;)s.appendChild(e.next);return this.parent&&this.parent.insertBefore(s,this.next||void 0),s}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,s){const r=[],i=[];e.forEach(o=>{o.target===this.domNode&&o.type==="childList"&&(r.push(...o.addedNodes),i.push(...o.removedNodes))}),i.forEach(o=>{if(o.parentNode!=null&&o.tagName!=="IFRAME"&&document.body.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const u=this.scroll.find(o);u!=null&&(u.domNode.parentNode==null||u.domNode.parentNode===this.domNode)&&u.detach()}),r.filter(o=>o.parentNode===this.domNode&&o!==this.uiNode).sort((o,u)=>o===u?0:o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(o=>{let u=null;o.nextSibling!=null&&(u=this.scroll.find(o.nextSibling));const h=Gj(o,this.scroll);(h.next!==u||h.next==null)&&(h.parent!=null&&h.parent.removeChild(this),this.insertBefore(h,u||void 0))}),this.enforceAllowedChildren()}};WE.uiClass="";let qz=WE;const Pn=qz;function Pz(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}const Sc=class Ec extends Pn{static create(e){return super.create(e)}static formats(e,s){const r=s.query(Ec.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,s){super(e,s),this.attributes=new zf(this.domNode)}format(e,s){if(e===this.statics.blotName&&!s)this.children.forEach(r=>{r instanceof Ec||(r=r.wrap(Ec.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,He.INLINE);if(r==null)return;r instanceof ga?this.attributes.attribute(r,s):s&&(e!==this.statics.blotName||this.formats()[e]!==s)&&this.replaceWith(e,s)}}formats(){const e=this.attributes.values(),s=this.statics.formats(this.domNode,this.scroll);return s!=null&&(e[this.statics.blotName]=s),e}formatAt(e,s,r,i){this.formats()[r]!=null||this.scroll.query(r,He.ATTRIBUTE)?this.isolate(e,s).format(r,i):super.formatAt(e,s,r,i)}optimize(e){super.optimize(e);const s=this.formats();if(Object.keys(s).length===0)return this.unwrap();const r=this.next;r instanceof Ec&&r.prev===this&&Pz(s,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,s){const r=super.replaceWith(e,s);return this.attributes.copy(r),r}update(e,s){super.update(e,s),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,s){const r=super.wrap(e,s);return r instanceof Ec&&this.attributes.move(r),r}};Sc.allowedChildren=[Sc,nr],Sc.blotName="inline",Sc.scope=He.INLINE_BLOT,Sc.tagName="SPAN";let Iz=Sc;const Oy=Iz,Cc=class wx extends Pn{static create(e){return super.create(e)}static formats(e,s){const r=s.query(wx.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,s){super(e,s),this.attributes=new zf(this.domNode)}format(e,s){const r=this.scroll.query(e,He.BLOCK);r!=null&&(r instanceof ga?this.attributes.attribute(r,s):e===this.statics.blotName&&!s?this.replaceWith(wx.blotName):s&&(e!==this.statics.blotName||this.formats()[e]!==s)&&this.replaceWith(e,s))}formats(){const e=this.attributes.values(),s=this.statics.formats(this.domNode,this.scroll);return s!=null&&(e[this.statics.blotName]=s),e}formatAt(e,s,r,i){this.scroll.query(r,He.BLOCK)!=null?this.format(r,i):super.formatAt(e,s,r,i)}insertAt(e,s,r){if(r==null||this.scroll.query(s,He.INLINE)!=null)super.insertAt(e,s,r);else{const i=this.split(e);if(i!=null){const o=this.scroll.create(s,r);i.parent.insertBefore(o,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,s){const r=super.replaceWith(e,s);return this.attributes.copy(r),r}update(e,s){super.update(e,s),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};Cc.blotName="block",Cc.scope=He.BLOCK_BLOT,Cc.tagName="P",Cc.allowedChildren=[Oy,Cc,nr];let $z=Cc;const Md=$z,_x=class extends Pn{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,s){super.deleteAt(e,s),this.enforceAllowedChildren()}formatAt(e,s,r,i){super.formatAt(e,s,r,i),this.enforceAllowedChildren()}insertAt(e,s,r){super.insertAt(e,s,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};_x.blotName="container",_x.scope=He.BLOCK_BLOT;let Uz=_x;const Ff=Uz;class Bz extends nr{static formats(e,s){}format(e,s){super.formatAt(0,this.length(),e,s)}formatAt(e,s,r,i){e===0&&s===this.length()?this.format(r,i):super.formatAt(e,s,r,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Vr=Bz,zz={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Fz=100,Ac=class extends Pn{constructor(e,s){super(null,s),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,zz),this.attach()}create(e,s){return this.registry.create(this,e,s)}find(e,s=!1){const r=this.registry.find(e,s);return r?r.scroll===this?r:s?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,s=He.ANY){return this.registry.query(e,s)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,s){this.update(),e===0&&s===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,s)}formatAt(e,s,r,i){this.update(),super.formatAt(e,s,r,i)}insertAt(e,s,r){this.update(),super.insertAt(e,s,r)}optimize(e=[],s={}){super.optimize(s);const r=s.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)e.push(i.pop());const o=(m,f=!0)=>{m==null||m===this||m.domNode.parentNode!=null&&(r.has(m.domNode)||r.set(m.domNode,[]),f&&o(m.parent))},u=m=>{r.has(m.domNode)&&(m instanceof Pn&&m.children.forEach(u),r.delete(m.domNode),m.optimize(s))};let h=e;for(let m=0;h.length>0;m+=1){if(m>=Fz)throw new Error("[Parchment] Maximum optimize iterations reached");for(h.forEach(f=>{const p=this.find(f.target,!0);p!=null&&(p.domNode===f.target&&(f.type==="childList"?(o(this.find(f.previousSibling,!1)),Array.from(f.addedNodes).forEach(x=>{const b=this.find(x,!1);o(b,!1),b instanceof Pn&&b.children.forEach(j=>{o(j,!1)})})):f.type==="attributes"&&o(p.prev)),o(p))}),this.children.forEach(u),h=Array.from(this.observer.takeRecords()),i=h.slice();i.length>0;)e.push(i.pop())}}update(e,s={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(i=>{const o=this.find(i.target,!0);return o==null?null:r.has(o.domNode)?(r.get(o.domNode).push(i),null):(r.set(o.domNode,[i]),o)}).forEach(i=>{i!=null&&i!==this&&r.has(i.domNode)&&i.update(r.get(i.domNode)||[],s)}),s.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),s),this.optimize(e,s)}};Ac.blotName="scroll",Ac.defaultChild=Md,Ac.allowedChildren=[Md,Ff],Ac.scope=He.BLOCK_BLOT,Ac.tagName="DIV";let Hz=Ac;const Ry=Hz,jx=class QE extends nr{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,s){super(e,s),this.text=this.statics.value(this.domNode)}deleteAt(e,s){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+s)}index(e,s){return this.domNode===e?s:-1}insertAt(e,s,r){r==null?(this.text=this.text.slice(0,e)+s+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,s,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof QE&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,s=!1){return[this.domNode,e]}split(e,s=!1){if(!s){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,s){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};jx.blotName="text",jx.scope=He.INLINE_BLOT;let Vz=jx;const bf=Vz,Gz=Object.freeze(Object.defineProperty({__proto__:null,Attributor:ga,AttributorStore:zf,BlockBlot:Md,ClassAttributor:Fn,ContainerBlot:Ff,EmbedBlot:Vr,InlineBlot:Oy,LeafBlot:nr,ParentBlot:Pn,Registry:Bc,Scope:He,ScrollBlot:Ry,StyleAttributor:dl,TextBlot:bf},Symbol.toStringTag,{value:"Module"}));var Cm={exports:{}},w0,Zj;function Zz(){if(Zj)return w0;Zj=1;var t=-1,e=1,s=0;function r(R,D,q,H,X){if(R===D)return R?[[s,R]]:[];if(q!=null){var P=C(R,D,q);if(P)return P}var Z=h(R,D),Q=R.substring(0,Z);R=R.substring(Z),D=D.substring(Z),Z=f(R,D);var de=R.substring(R.length-Z);R=R.substring(0,R.length-Z),D=D.substring(0,D.length-Z);var U=i(R,D);return Q&&U.unshift([s,Q]),de&&U.push([s,de]),A(U,X),H&&x(U),U}function i(R,D){var q;if(!R)return[[e,D]];if(!D)return[[t,R]];var H=R.length>D.length?R:D,X=R.length>D.length?D:R,P=H.indexOf(X);if(P!==-1)return q=[[e,H.substring(0,P)],[s,X],[e,H.substring(P+X.length)]],R.length>D.length&&(q[0][0]=q[2][0]=t),q;if(X.length===1)return[[t,R],[e,D]];var Z=p(R,D);if(Z){var Q=Z[0],de=Z[1],U=Z[2],J=Z[3],le=Z[4],ee=r(Q,U),xe=r(de,J);return ee.concat([[s,le]],xe)}return o(R,D)}function o(R,D){for(var q=R.length,H=D.length,X=Math.ceil((q+H)/2),P=X,Z=2*X,Q=new Array(Z),de=new Array(Z),U=0;U<Z;U++)Q[U]=-1,de[U]=-1;Q[P+1]=0,de[P+1]=0;for(var J=q-H,le=J%2!==0,ee=0,xe=0,we=0,Ae=0,Me=0;Me<X;Me++){for(var Se=-Me+ee;Se<=Me-xe;Se+=2){var Oe=P+Se,Le;Se===-Me||Se!==Me&&Q[Oe-1]<Q[Oe+1]?Le=Q[Oe+1]:Le=Q[Oe-1]+1;for(var Re=Le-Se;Le<q&&Re<H&&R.charAt(Le)===D.charAt(Re);)Le++,Re++;if(Q[Oe]=Le,Le>q)xe+=2;else if(Re>H)ee+=2;else if(le){var qe=P+J-Se;if(qe>=0&&qe<Z&&de[qe]!==-1){var Ze=q-de[qe];if(Le>=Ze)return u(R,D,Le,Re)}}}for(var Ke=-Me+we;Ke<=Me-Ae;Ke+=2){var qe=P+Ke,Ze;Ke===-Me||Ke!==Me&&de[qe-1]<de[qe+1]?Ze=de[qe+1]:Ze=de[qe-1]+1;for(var Je=Ze-Ke;Ze<q&&Je<H&&R.charAt(q-Ze-1)===D.charAt(H-Je-1);)Ze++,Je++;if(de[qe]=Ze,Ze>q)Ae+=2;else if(Je>H)we+=2;else if(!le){var Oe=P+J-Ke;if(Oe>=0&&Oe<Z&&Q[Oe]!==-1){var Le=Q[Oe],Re=P+Le-Oe;if(Ze=q-Ze,Le>=Ze)return u(R,D,Le,Re)}}}}return[[t,R],[e,D]]}function u(R,D,q,H){var X=R.substring(0,q),P=D.substring(0,H),Z=R.substring(q),Q=D.substring(H),de=r(X,P),U=r(Z,Q);return de.concat(U)}function h(R,D){if(!R||!D||R.charAt(0)!==D.charAt(0))return 0;for(var q=0,H=Math.min(R.length,D.length),X=H,P=0;q<X;)R.substring(P,X)==D.substring(P,X)?(q=X,P=q):H=X,X=Math.floor((H-q)/2+q);return O(R.charCodeAt(X-1))&&X--,X}function m(R,D){var q=R.length,H=D.length;if(q==0||H==0)return 0;q>H?R=R.substring(q-H):q<H&&(D=D.substring(0,q));var X=Math.min(q,H);if(R==D)return X;for(var P=0,Z=1;;){var Q=R.substring(X-Z),de=D.indexOf(Q);if(de==-1)return P;Z+=de,(de==0||R.substring(X-Z)==D.substring(0,Z))&&(P=Z,Z++)}}function f(R,D){if(!R||!D||R.slice(-1)!==D.slice(-1))return 0;for(var q=0,H=Math.min(R.length,D.length),X=H,P=0;q<X;)R.substring(R.length-X,R.length-P)==D.substring(D.length-X,D.length-P)?(q=X,P=q):H=X,X=Math.floor((H-q)/2+q);return F(R.charCodeAt(R.length-X))&&X--,X}function p(R,D){var q=R.length>D.length?R:D,H=R.length>D.length?D:R;if(q.length<4||H.length*2<q.length)return null;function X(xe,we,Ae){for(var Me=xe.substring(Ae,Ae+Math.floor(xe.length/4)),Se=-1,Oe="",Le,Re,qe,Ze;(Se=we.indexOf(Me,Se+1))!==-1;){var Ke=h(xe.substring(Ae),we.substring(Se)),Je=f(xe.substring(0,Ae),we.substring(0,Se));Oe.length<Je+Ke&&(Oe=we.substring(Se-Je,Se)+we.substring(Se,Se+Ke),Le=xe.substring(0,Ae-Je),Re=xe.substring(Ae+Ke),qe=we.substring(0,Se-Je),Ze=we.substring(Se+Ke))}return Oe.length*2>=xe.length?[Le,Re,qe,Ze,Oe]:null}var P=X(q,H,Math.ceil(q.length/4)),Z=X(q,H,Math.ceil(q.length/2)),Q;if(!P&&!Z)return null;Z?P?Q=P[4].length>Z[4].length?P:Z:Q=Z:Q=P;var de,U,J,le;R.length>D.length?(de=Q[0],U=Q[1],J=Q[2],le=Q[3]):(J=Q[0],le=Q[1],de=Q[2],U=Q[3]);var ee=Q[4];return[de,U,J,le,ee]}function x(R){for(var D=!1,q=[],H=0,X=null,P=0,Z=0,Q=0,de=0,U=0;P<R.length;)R[P][0]==s?(q[H++]=P,Z=de,Q=U,de=0,U=0,X=R[P][1]):(R[P][0]==e?de+=R[P][1].length:U+=R[P][1].length,X&&X.length<=Math.max(Z,Q)&&X.length<=Math.max(de,U)&&(R.splice(q[H-1],0,[t,X]),R[q[H-1]+1][0]=e,H--,H--,P=H>0?q[H-1]:-1,Z=0,Q=0,de=0,U=0,X=null,D=!0)),P++;for(D&&A(R),E(R),P=1;P<R.length;){if(R[P-1][0]==t&&R[P][0]==e){var J=R[P-1][1],le=R[P][1],ee=m(J,le),xe=m(le,J);ee>=xe?(ee>=J.length/2||ee>=le.length/2)&&(R.splice(P,0,[s,le.substring(0,ee)]),R[P-1][1]=J.substring(0,J.length-ee),R[P+1][1]=le.substring(ee),P++):(xe>=J.length/2||xe>=le.length/2)&&(R.splice(P,0,[s,J.substring(0,xe)]),R[P-1][0]=e,R[P-1][1]=le.substring(0,le.length-xe),R[P+1][0]=t,R[P+1][1]=J.substring(xe),P++),P++}P++}}var b=/[^a-zA-Z0-9]/,j=/\s/,v=/[\r\n]/,S=/\n\r?\n$/,_=/^\r?\n\r?\n/;function E(R){function D(xe,we){if(!xe||!we)return 6;var Ae=xe.charAt(xe.length-1),Me=we.charAt(0),Se=Ae.match(b),Oe=Me.match(b),Le=Se&&Ae.match(j),Re=Oe&&Me.match(j),qe=Le&&Ae.match(v),Ze=Re&&Me.match(v),Ke=qe&&xe.match(S),Je=Ze&&we.match(_);return Ke||Je?5:qe||Ze?4:Se&&!Le&&Re?3:Le||Re?2:Se||Oe?1:0}for(var q=1;q<R.length-1;){if(R[q-1][0]==s&&R[q+1][0]==s){var H=R[q-1][1],X=R[q][1],P=R[q+1][1],Z=f(H,X);if(Z){var Q=X.substring(X.length-Z);H=H.substring(0,H.length-Z),X=Q+X.substring(0,X.length-Z),P=Q+P}for(var de=H,U=X,J=P,le=D(H,X)+D(X,P);X.charAt(0)===P.charAt(0);){H+=X.charAt(0),X=X.substring(1)+P.charAt(0),P=P.substring(1);var ee=D(H,X)+D(X,P);ee>=le&&(le=ee,de=H,U=X,J=P)}R[q-1][1]!=de&&(de?R[q-1][1]=de:(R.splice(q-1,1),q--),R[q][1]=U,J?R[q+1][1]=J:(R.splice(q+1,1),q--))}q++}}function A(R,D){R.push([s,""]);for(var q=0,H=0,X=0,P="",Z="",Q;q<R.length;){if(q<R.length-1&&!R[q][1]){R.splice(q,1);continue}switch(R[q][0]){case e:X++,Z+=R[q][1],q++;break;case t:H++,P+=R[q][1],q++;break;case s:var de=q-X-H-1;if(D){if(de>=0&&L(R[de][1])){var U=R[de][1].slice(-1);if(R[de][1]=R[de][1].slice(0,-1),P=U+P,Z=U+Z,!R[de][1]){R.splice(de,1),q--;var J=de-1;R[J]&&R[J][0]===e&&(X++,Z=R[J][1]+Z,J--),R[J]&&R[J][0]===t&&(H++,P=R[J][1]+P,J--),de=J}}if(k(R[q][1])){var U=R[q][1].charAt(0);R[q][1]=R[q][1].slice(1),P+=U,Z+=U}}if(q<R.length-1&&!R[q][1]){R.splice(q,1);break}if(P.length>0||Z.length>0){P.length>0&&Z.length>0&&(Q=h(Z,P),Q!==0&&(de>=0?R[de][1]+=Z.substring(0,Q):(R.splice(0,0,[s,Z.substring(0,Q)]),q++),Z=Z.substring(Q),P=P.substring(Q)),Q=f(Z,P),Q!==0&&(R[q][1]=Z.substring(Z.length-Q)+R[q][1],Z=Z.substring(0,Z.length-Q),P=P.substring(0,P.length-Q)));var le=X+H;P.length===0&&Z.length===0?(R.splice(q-le,le),q=q-le):P.length===0?(R.splice(q-le,le,[e,Z]),q=q-le+1):Z.length===0?(R.splice(q-le,le,[t,P]),q=q-le+1):(R.splice(q-le,le,[t,P],[e,Z]),q=q-le+2)}q!==0&&R[q-1][0]===s?(R[q-1][1]+=R[q][1],R.splice(q,1)):q++,X=0,H=0,P="",Z="";break}}R[R.length-1][1]===""&&R.pop();var ee=!1;for(q=1;q<R.length-1;)R[q-1][0]===s&&R[q+1][0]===s&&(R[q][1].substring(R[q][1].length-R[q-1][1].length)===R[q-1][1]?(R[q][1]=R[q-1][1]+R[q][1].substring(0,R[q][1].length-R[q-1][1].length),R[q+1][1]=R[q-1][1]+R[q+1][1],R.splice(q-1,1),ee=!0):R[q][1].substring(0,R[q+1][1].length)==R[q+1][1]&&(R[q-1][1]+=R[q+1][1],R[q][1]=R[q][1].substring(R[q+1][1].length)+R[q+1][1],R.splice(q+1,1),ee=!0)),q++;ee&&A(R,D)}function O(R){return R>=55296&&R<=56319}function F(R){return R>=56320&&R<=57343}function k(R){return F(R.charCodeAt(0))}function L(R){return O(R.charCodeAt(R.length-1))}function B(R){for(var D=[],q=0;q<R.length;q++)R[q][1].length>0&&D.push(R[q]);return D}function w(R,D,q,H){return L(R)||k(H)?null:B([[s,R],[t,D],[e,q],[s,H]])}function C(R,D,q){var H=typeof q=="number"?{index:q,length:0}:q.oldRange,X=typeof q=="number"?null:q.newRange,P=R.length,Z=D.length;if(H.length===0&&(X===null||X.length===0)){var Q=H.index,de=R.slice(0,Q),U=R.slice(Q),J=X?X.index:null;e:{var le=Q+Z-P;if(J!==null&&J!==le||le<0||le>Z)break e;var ee=D.slice(0,le),xe=D.slice(le);if(xe!==U)break e;var we=Math.min(Q,le),Ae=de.slice(0,we),Me=ee.slice(0,we);if(Ae!==Me)break e;var Se=de.slice(we),Oe=ee.slice(we);return w(Ae,Se,Oe,U)}e:{if(J!==null&&J!==Q)break e;var Le=Q,ee=D.slice(0,Le),xe=D.slice(Le);if(ee!==de)break e;var Re=Math.min(P-Le,Z-Le),qe=U.slice(U.length-Re),Ze=xe.slice(xe.length-Re);if(qe!==Ze)break e;var Se=U.slice(0,U.length-Re),Oe=xe.slice(0,xe.length-Re);return w(de,Se,Oe,qe)}}if(H.length>0&&X&&X.length===0)e:{var Ae=R.slice(0,H.index),qe=R.slice(H.index+H.length),we=Ae.length,Re=qe.length;if(Z<we+Re)break e;var Me=D.slice(0,we),Ze=D.slice(Z-Re);if(Ae!==Me||qe!==Ze)break e;var Se=R.slice(we,P-Re),Oe=D.slice(we,Z-Re);return w(Ae,Se,Oe,qe)}return null}function z(R,D,q,H){return r(R,D,q,H,!0)}return z.INSERT=e,z.DELETE=t,z.EQUAL=s,w0=z,w0}var hd={exports:{}};hd.exports;var Yj;function XE(){return Yj||(Yj=1,function(t,e){var s=200,r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",u="[object Array]",h="[object Boolean]",m="[object Date]",f="[object Error]",p="[object Function]",x="[object GeneratorFunction]",b="[object Map]",j="[object Number]",v="[object Object]",S="[object Promise]",_="[object RegExp]",E="[object Set]",A="[object String]",O="[object Symbol]",F="[object WeakMap]",k="[object ArrayBuffer]",L="[object DataView]",B="[object Float32Array]",w="[object Float64Array]",C="[object Int8Array]",z="[object Int16Array]",R="[object Int32Array]",D="[object Uint8Array]",q="[object Uint8ClampedArray]",H="[object Uint16Array]",X="[object Uint32Array]",P=/[\\^$.*+?()[\]{}|]/g,Z=/\w*$/,Q=/^\[object .+?Constructor\]$/,de=/^(?:0|[1-9]\d*)$/,U={};U[o]=U[u]=U[k]=U[L]=U[h]=U[m]=U[B]=U[w]=U[C]=U[z]=U[R]=U[b]=U[j]=U[v]=U[_]=U[E]=U[A]=U[O]=U[D]=U[q]=U[H]=U[X]=!0,U[f]=U[p]=U[F]=!1;var J=typeof Ki=="object"&&Ki&&Ki.Object===Object&&Ki,le=typeof self=="object"&&self&&self.Object===Object&&self,ee=J||le||Function("return this")(),xe=e&&!e.nodeType&&e,we=xe&&!0&&t&&!t.nodeType&&t,Ae=we&&we.exports===xe;function Me(N,$){return N.set($[0],$[1]),N}function Se(N,$){return N.add($),N}function Oe(N,$){for(var K=-1,ge=N?N.length:0;++K<ge&&$(N[K],K,N)!==!1;);return N}function Le(N,$){for(var K=-1,ge=$.length,tt=N.length;++K<ge;)N[tt+K]=$[K];return N}function Re(N,$,K,ge){for(var tt=-1,Ve=N?N.length:0;++tt<Ve;)K=$(K,N[tt],tt,N);return K}function qe(N,$){for(var K=-1,ge=Array(N);++K<N;)ge[K]=$(K);return ge}function Ze(N,$){return N?.[$]}function Ke(N){var $=!1;if(N!=null&&typeof N.toString!="function")try{$=!!(N+"")}catch{}return $}function Je(N){var $=-1,K=Array(N.size);return N.forEach(function(ge,tt){K[++$]=[tt,ge]}),K}function rt(N,$){return function(K){return N($(K))}}function bt(N){var $=-1,K=Array(N.size);return N.forEach(function(ge){K[++$]=ge}),K}var ut=Array.prototype,vt=Function.prototype,G=Object.prototype,re=ee["__core-js_shared__"],me=function(){var N=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||"");return N?"Symbol(src)_1."+N:""}(),ke=vt.toString,Ee=G.hasOwnProperty,Ce=G.toString,Te=RegExp("^"+ke.call(Ee).replace(P,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pe=Ae?ee.Buffer:void 0,We=ee.Symbol,gt=ee.Uint8Array,es=rt(Object.getPrototypeOf,Object),ts=Object.create,Ss=G.propertyIsEnumerable,Ms=ut.splice,Gs=Object.getOwnPropertySymbols,Qs=Pe?Pe.isBuffer:void 0,Gr=rt(Object.keys,Object),fr=qs(ee,"DataView"),Zr=qs(ee,"Map"),pr=qs(ee,"Promise"),va=qs(ee,"Set"),wa=qs(ee,"WeakMap"),kr=qs(Object,"create"),hl=ns(fr),Gn=ns(Zr),ci=ns(pr),_a=ns(va),ja=ns(wa),fn=We?We.prototype:void 0,No=fn?fn.valueOf:void 0;function Ds(N){var $=-1,K=N?N.length:0;for(this.clear();++$<K;){var ge=N[$];this.set(ge[0],ge[1])}}function ys(){this.__data__=kr?kr(null):{}}function Ls(N){return this.has(N)&&delete this.__data__[N]}function Zn(N){var $=this.__data__;if(kr){var K=$[N];return K===r?void 0:K}return Ee.call($,N)?$[N]:void 0}function ui(N){var $=this.__data__;return kr?$[N]!==void 0:Ee.call($,N)}function ml(N,$){var K=this.__data__;return K[N]=kr&&$===void 0?r:$,this}Ds.prototype.clear=ys,Ds.prototype.delete=Ls,Ds.prototype.get=Zn,Ds.prototype.has=ui,Ds.prototype.set=ml;function Es(N){var $=-1,K=N?N.length:0;for(this.clear();++$<K;){var ge=N[$];this.set(ge[0],ge[1])}}function So(){this.__data__=[]}function Na(N){var $=this.__data__,K=Qn($,N);if(K<0)return!1;var ge=$.length-1;return K==ge?$.pop():Ms.call($,K,1),!0}function fl(N){var $=this.__data__,K=Qn($,N);return K<0?void 0:$[K][1]}function Yn(N){return Qn(this.__data__,N)>-1}function Kn(N,$){var K=this.__data__,ge=Qn(K,N);return ge<0?K.push([N,$]):K[ge][1]=$,this}Es.prototype.clear=So,Es.prototype.delete=Na,Es.prototype.get=fl,Es.prototype.has=Yn,Es.prototype.set=Kn;function ss(N){var $=-1,K=N?N.length:0;for(this.clear();++$<K;){var ge=N[$];this.set(ge[0],ge[1])}}function Wn(){this.__data__={hash:new Ds,map:new(Zr||Es),string:new Ds}}function rs(N){return Jn(this,N).delete(N)}function Eo(N){return Jn(this,N).get(N)}function Co(N){return Jn(this,N).has(N)}function pn(N,$){return Jn(this,N).set(N,$),this}ss.prototype.clear=Wn,ss.prototype.delete=rs,ss.prototype.get=Eo,ss.prototype.has=Co,ss.prototype.set=pn;function os(N){this.__data__=new Es(N)}function ru(){this.__data__=new Es}function Ao(N){return this.__data__.delete(N)}function ko(N){return this.__data__.get(N)}function nu(N){return this.__data__.has(N)}function di(N,$){var K=this.__data__;if(K instanceof Es){var ge=K.__data__;if(!Zr||ge.length<s-1)return ge.push([N,$]),this;K=this.__data__=new ss(ge)}return K.set(N,$),this}os.prototype.clear=ru,os.prototype.delete=Ao,os.prototype.get=ko,os.prototype.has=nu,os.prototype.set=di;function gn(N,$){var K=fi(N)||ea(N)?qe(N.length,String):[],ge=K.length,tt=!!ge;for(var Ve in N)Ee.call(N,Ve)&&!(tt&&(Ve=="length"||ou(Ve,ge)))&&K.push(Ve);return K}function gr(N,$,K){var ge=N[$];(!(Ee.call(N,$)&&wl(ge,K))||K===void 0&&!($ in N))&&(N[$]=K)}function Qn(N,$){for(var K=N.length;K--;)if(wl(N[K][0],$))return K;return-1}function Tr(N,$){return N&&Ca($,gi($),N)}function Yr(N,$,K,ge,tt,Ve,xt){var dt;if(ge&&(dt=Ve?ge(N,tt,Ve,xt):ge(N)),dt!==void 0)return dt;if(!yr(N))return N;var It=fi(N);if(It){if(dt=Mo(N),!$)return Oo(N,dt)}else{var yt=Wr(N),Cs=yt==p||yt==x;if(pi(N))return Sa(N,$);if(yt==v||yt==o||Cs&&!Ve){if(Ke(N))return Ve?N:{};if(dt=xr(Cs?{}:N),!$)return Xn(N,Tr(dt,N))}else{if(!U[yt])return Ve?N:{};dt=lu(N,yt,Yr,$)}}xt||(xt=new os);var er=xt.get(N);if(er)return er;if(xt.set(N,dt),!It)var cs=K?Ro(N):gi(N);return Oe(cs||N,function(Ps,us){cs&&(us=Ps,Ps=N[us]),gr(dt,us,Yr(Ps,$,K,ge,us,N,xt))}),dt}function pl(N){return yr(N)?ts(N):{}}function gl(N,$,K){var ge=$(N);return fi(N)?ge:Le(ge,K(N))}function au(N){return Ce.call(N)}function To(N){if(!yr(N)||vl(N))return!1;var $=bn(N)||Ke(N)?Te:Q;return $.test(ns(N))}function Xs(N){if(!mi(N))return Gr(N);var $=[];for(var K in Object(N))Ee.call(N,K)&&K!="constructor"&&$.push(K);return $}function Sa(N,$){if($)return N.slice();var K=new N.constructor(N.length);return N.copy(K),K}function xl(N){var $=new N.constructor(N.byteLength);return new gt($).set(new gt(N)),$}function Kr(N,$){var K=$?xl(N.buffer):N.buffer;return new N.constructor(K,N.byteOffset,N.byteLength)}function yl(N,$,K){var ge=$?K(Je(N),!0):Je(N);return Re(ge,Me,new N.constructor)}function Ea(N){var $=new N.constructor(N.source,Z.exec(N));return $.lastIndex=N.lastIndex,$}function iu(N,$,K){var ge=$?K(bt(N),!0):bt(N);return Re(ge,Se,new N.constructor)}function Js(N){return No?Object(No.call(N)):{}}function bl(N,$){var K=$?xl(N.buffer):N.buffer;return new N.constructor(K,N.byteOffset,N.length)}function Oo(N,$){var K=-1,ge=N.length;for($||($=Array(ge));++K<ge;)$[K]=N[K];return $}function Ca(N,$,K,ge){K||(K={});for(var tt=-1,Ve=$.length;++tt<Ve;){var xt=$[tt],dt=void 0;gr(K,xt,dt===void 0?N[xt]:dt)}return K}function Xn(N,$){return Ca(N,xn(N),$)}function Ro(N){return gl(N,gi,xn)}function Jn(N,$){var K=N.__data__;return hi($)?K[typeof $=="string"?"string":"hash"]:K.map}function qs(N,$){var K=Ze(N,$);return To(K)?K:void 0}var xn=Gs?rt(Gs,Object):xi,Wr=au;(fr&&Wr(new fr(new ArrayBuffer(1)))!=L||Zr&&Wr(new Zr)!=b||pr&&Wr(pr.resolve())!=S||va&&Wr(new va)!=E||wa&&Wr(new wa)!=F)&&(Wr=function(N){var $=Ce.call(N),K=$==v?N.constructor:void 0,ge=K?ns(K):void 0;if(ge)switch(ge){case hl:return L;case Gn:return b;case ci:return S;case _a:return E;case ja:return F}return $});function Mo(N){var $=N.length,K=N.constructor($);return $&&typeof N[0]=="string"&&Ee.call(N,"index")&&(K.index=N.index,K.input=N.input),K}function xr(N){return typeof N.constructor=="function"&&!mi(N)?pl(es(N)):{}}function lu(N,$,K,ge){var tt=N.constructor;switch($){case k:return xl(N);case h:case m:return new tt(+N);case L:return Kr(N,ge);case B:case w:case C:case z:case R:case D:case q:case H:case X:return bl(N,ge);case b:return yl(N,ge,K);case j:case A:return new tt(N);case _:return Ea(N);case E:return iu(N,ge,K);case O:return Js(N)}}function ou(N,$){return $=$??i,!!$&&(typeof N=="number"||de.test(N))&&N>-1&&N%1==0&&N<$}function hi(N){var $=typeof N;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?N!=="__proto__":N===null}function vl(N){return!!me&&me in N}function mi(N){var $=N&&N.constructor,K=typeof $=="function"&&$.prototype||G;return N===K}function ns(N){if(N!=null){try{return ke.call(N)}catch{}try{return N+""}catch{}}return""}function yn(N){return Yr(N,!0,!0)}function wl(N,$){return N===$||N!==N&&$!==$}function ea(N){return Or(N)&&Ee.call(N,"callee")&&(!Ss.call(N,"callee")||Ce.call(N)==o)}var fi=Array.isArray;function Qr(N){return N!=null&&Rr(N.length)&&!bn(N)}function Or(N){return Aa(N)&&Qr(N)}var pi=Qs||yi;function bn(N){var $=yr(N)?Ce.call(N):"";return $==p||$==x}function Rr(N){return typeof N=="number"&&N>-1&&N%1==0&&N<=i}function yr(N){var $=typeof N;return!!N&&($=="object"||$=="function")}function Aa(N){return!!N&&typeof N=="object"}function gi(N){return Qr(N)?gn(N):Xs(N)}function xi(){return[]}function yi(){return!1}t.exports=yn}(hd,hd.exports)),hd.exports}var md={exports:{}};md.exports;var Kj;function JE(){return Kj||(Kj=1,function(t,e){var s=200,r="__lodash_hash_undefined__",i=1,o=2,u=9007199254740991,h="[object Arguments]",m="[object Array]",f="[object AsyncFunction]",p="[object Boolean]",x="[object Date]",b="[object Error]",j="[object Function]",v="[object GeneratorFunction]",S="[object Map]",_="[object Number]",E="[object Null]",A="[object Object]",O="[object Promise]",F="[object Proxy]",k="[object RegExp]",L="[object Set]",B="[object String]",w="[object Symbol]",C="[object Undefined]",z="[object WeakMap]",R="[object ArrayBuffer]",D="[object DataView]",q="[object Float32Array]",H="[object Float64Array]",X="[object Int8Array]",P="[object Int16Array]",Z="[object Int32Array]",Q="[object Uint8Array]",de="[object Uint8ClampedArray]",U="[object Uint16Array]",J="[object Uint32Array]",le=/[\\^$.*+?()[\]{}|]/g,ee=/^\[object .+?Constructor\]$/,xe=/^(?:0|[1-9]\d*)$/,we={};we[q]=we[H]=we[X]=we[P]=we[Z]=we[Q]=we[de]=we[U]=we[J]=!0,we[h]=we[m]=we[R]=we[p]=we[D]=we[x]=we[b]=we[j]=we[S]=we[_]=we[A]=we[k]=we[L]=we[B]=we[z]=!1;var Ae=typeof Ki=="object"&&Ki&&Ki.Object===Object&&Ki,Me=typeof self=="object"&&self&&self.Object===Object&&self,Se=Ae||Me||Function("return this")(),Oe=e&&!e.nodeType&&e,Le=Oe&&!0&&t&&!t.nodeType&&t,Re=Le&&Le.exports===Oe,qe=Re&&Ae.process,Ze=function(){try{return qe&&qe.binding&&qe.binding("util")}catch{}}(),Ke=Ze&&Ze.isTypedArray;function Je(N,$){for(var K=-1,ge=N==null?0:N.length,tt=0,Ve=[];++K<ge;){var xt=N[K];$(xt,K,N)&&(Ve[tt++]=xt)}return Ve}function rt(N,$){for(var K=-1,ge=$.length,tt=N.length;++K<ge;)N[tt+K]=$[K];return N}function bt(N,$){for(var K=-1,ge=N==null?0:N.length;++K<ge;)if($(N[K],K,N))return!0;return!1}function ut(N,$){for(var K=-1,ge=Array(N);++K<N;)ge[K]=$(K);return ge}function vt(N){return function($){return N($)}}function G(N,$){return N.has($)}function re(N,$){return N?.[$]}function me(N){var $=-1,K=Array(N.size);return N.forEach(function(ge,tt){K[++$]=[tt,ge]}),K}function ke(N,$){return function(K){return N($(K))}}function Ee(N){var $=-1,K=Array(N.size);return N.forEach(function(ge){K[++$]=ge}),K}var Ce=Array.prototype,Te=Function.prototype,Pe=Object.prototype,We=Se["__core-js_shared__"],gt=Te.toString,es=Pe.hasOwnProperty,ts=function(){var N=/[^.]+$/.exec(We&&We.keys&&We.keys.IE_PROTO||"");return N?"Symbol(src)_1."+N:""}(),Ss=Pe.toString,Ms=RegExp("^"+gt.call(es).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gs=Re?Se.Buffer:void 0,Qs=Se.Symbol,Gr=Se.Uint8Array,fr=Pe.propertyIsEnumerable,Zr=Ce.splice,pr=Qs?Qs.toStringTag:void 0,va=Object.getOwnPropertySymbols,wa=Gs?Gs.isBuffer:void 0,kr=ke(Object.keys,Object),hl=xn(Se,"DataView"),Gn=xn(Se,"Map"),ci=xn(Se,"Promise"),_a=xn(Se,"Set"),ja=xn(Se,"WeakMap"),fn=xn(Object,"create"),No=ns(hl),Ds=ns(Gn),ys=ns(ci),Ls=ns(_a),Zn=ns(ja),ui=Qs?Qs.prototype:void 0,ml=ui?ui.valueOf:void 0;function Es(N){var $=-1,K=N==null?0:N.length;for(this.clear();++$<K;){var ge=N[$];this.set(ge[0],ge[1])}}function So(){this.__data__=fn?fn(null):{},this.size=0}function Na(N){var $=this.has(N)&&delete this.__data__[N];return this.size-=$?1:0,$}function fl(N){var $=this.__data__;if(fn){var K=$[N];return K===r?void 0:K}return es.call($,N)?$[N]:void 0}function Yn(N){var $=this.__data__;return fn?$[N]!==void 0:es.call($,N)}function Kn(N,$){var K=this.__data__;return this.size+=this.has(N)?0:1,K[N]=fn&&$===void 0?r:$,this}Es.prototype.clear=So,Es.prototype.delete=Na,Es.prototype.get=fl,Es.prototype.has=Yn,Es.prototype.set=Kn;function ss(N){var $=-1,K=N==null?0:N.length;for(this.clear();++$<K;){var ge=N[$];this.set(ge[0],ge[1])}}function Wn(){this.__data__=[],this.size=0}function rs(N){var $=this.__data__,K=Sa($,N);if(K<0)return!1;var ge=$.length-1;return K==ge?$.pop():Zr.call($,K,1),--this.size,!0}function Eo(N){var $=this.__data__,K=Sa($,N);return K<0?void 0:$[K][1]}function Co(N){return Sa(this.__data__,N)>-1}function pn(N,$){var K=this.__data__,ge=Sa(K,N);return ge<0?(++this.size,K.push([N,$])):K[ge][1]=$,this}ss.prototype.clear=Wn,ss.prototype.delete=rs,ss.prototype.get=Eo,ss.prototype.has=Co,ss.prototype.set=pn;function os(N){var $=-1,K=N==null?0:N.length;for(this.clear();++$<K;){var ge=N[$];this.set(ge[0],ge[1])}}function ru(){this.size=0,this.__data__={hash:new Es,map:new(Gn||ss),string:new Es}}function Ao(N){var $=qs(this,N).delete(N);return this.size-=$?1:0,$}function ko(N){return qs(this,N).get(N)}function nu(N){return qs(this,N).has(N)}function di(N,$){var K=qs(this,N),ge=K.size;return K.set(N,$),this.size+=K.size==ge?0:1,this}os.prototype.clear=ru,os.prototype.delete=Ao,os.prototype.get=ko,os.prototype.has=nu,os.prototype.set=di;function gn(N){var $=-1,K=N==null?0:N.length;for(this.__data__=new os;++$<K;)this.add(N[$])}function gr(N){return this.__data__.set(N,r),this}function Qn(N){return this.__data__.has(N)}gn.prototype.add=gn.prototype.push=gr,gn.prototype.has=Qn;function Tr(N){var $=this.__data__=new ss(N);this.size=$.size}function Yr(){this.__data__=new ss,this.size=0}function pl(N){var $=this.__data__,K=$.delete(N);return this.size=$.size,K}function gl(N){return this.__data__.get(N)}function au(N){return this.__data__.has(N)}function To(N,$){var K=this.__data__;if(K instanceof ss){var ge=K.__data__;if(!Gn||ge.length<s-1)return ge.push([N,$]),this.size=++K.size,this;K=this.__data__=new os(ge)}return K.set(N,$),this.size=K.size,this}Tr.prototype.clear=Yr,Tr.prototype.delete=pl,Tr.prototype.get=gl,Tr.prototype.has=au,Tr.prototype.set=To;function Xs(N,$){var K=ea(N),ge=!K&&wl(N),tt=!K&&!ge&&Qr(N),Ve=!K&&!ge&&!tt&&Aa(N),xt=K||ge||tt||Ve,dt=xt?ut(N.length,String):[],It=dt.length;for(var yt in N)es.call(N,yt)&&!(xt&&(yt=="length"||tt&&(yt=="offset"||yt=="parent")||Ve&&(yt=="buffer"||yt=="byteLength"||yt=="byteOffset")||lu(yt,It)))&&dt.push(yt);return dt}function Sa(N,$){for(var K=N.length;K--;)if(yn(N[K][0],$))return K;return-1}function xl(N,$,K){var ge=$(N);return ea(N)?ge:rt(ge,K(N))}function Kr(N){return N==null?N===void 0?C:E:pr&&pr in Object(N)?Wr(N):mi(N)}function yl(N){return yr(N)&&Kr(N)==h}function Ea(N,$,K,ge,tt){return N===$?!0:N==null||$==null||!yr(N)&&!yr($)?N!==N&&$!==$:iu(N,$,K,ge,Ea,tt)}function iu(N,$,K,ge,tt,Ve){var xt=ea(N),dt=ea($),It=xt?m:xr(N),yt=dt?m:xr($);It=It==h?A:It,yt=yt==h?A:yt;var Cs=It==A,er=yt==A,cs=It==yt;if(cs&&Qr(N)){if(!Qr($))return!1;xt=!0,Cs=!1}if(cs&&!Cs)return Ve||(Ve=new Tr),xt||Aa(N)?Ca(N,$,K,ge,tt,Ve):Xn(N,$,It,K,ge,tt,Ve);if(!(K&i)){var Ps=Cs&&es.call(N,"__wrapped__"),us=er&&es.call($,"__wrapped__");if(Ps||us){var ta=Ps?N.value():N,vn=us?$.value():$;return Ve||(Ve=new Tr),tt(ta,vn,K,ge,Ve)}}return cs?(Ve||(Ve=new Tr),Ro(N,$,K,ge,tt,Ve)):!1}function Js(N){if(!Rr(N)||hi(N))return!1;var $=pi(N)?Ms:ee;return $.test(ns(N))}function bl(N){return yr(N)&&bn(N.length)&&!!we[Kr(N)]}function Oo(N){if(!vl(N))return kr(N);var $=[];for(var K in Object(N))es.call(N,K)&&K!="constructor"&&$.push(K);return $}function Ca(N,$,K,ge,tt,Ve){var xt=K&i,dt=N.length,It=$.length;if(dt!=It&&!(xt&&It>dt))return!1;var yt=Ve.get(N);if(yt&&Ve.get($))return yt==$;var Cs=-1,er=!0,cs=K&o?new gn:void 0;for(Ve.set(N,$),Ve.set($,N);++Cs<dt;){var Ps=N[Cs],us=$[Cs];if(ge)var ta=xt?ge(us,Ps,Cs,$,N,Ve):ge(Ps,us,Cs,N,$,Ve);if(ta!==void 0){if(ta)continue;er=!1;break}if(cs){if(!bt($,function(vn,ka){if(!G(cs,ka)&&(Ps===vn||tt(Ps,vn,K,ge,Ve)))return cs.push(ka)})){er=!1;break}}else if(!(Ps===us||tt(Ps,us,K,ge,Ve))){er=!1;break}}return Ve.delete(N),Ve.delete($),er}function Xn(N,$,K,ge,tt,Ve,xt){switch(K){case D:if(N.byteLength!=$.byteLength||N.byteOffset!=$.byteOffset)return!1;N=N.buffer,$=$.buffer;case R:return!(N.byteLength!=$.byteLength||!Ve(new Gr(N),new Gr($)));case p:case x:case _:return yn(+N,+$);case b:return N.name==$.name&&N.message==$.message;case k:case B:return N==$+"";case S:var dt=me;case L:var It=ge&i;if(dt||(dt=Ee),N.size!=$.size&&!It)return!1;var yt=xt.get(N);if(yt)return yt==$;ge|=o,xt.set(N,$);var Cs=Ca(dt(N),dt($),ge,tt,Ve,xt);return xt.delete(N),Cs;case w:if(ml)return ml.call(N)==ml.call($)}return!1}function Ro(N,$,K,ge,tt,Ve){var xt=K&i,dt=Jn(N),It=dt.length,yt=Jn($),Cs=yt.length;if(It!=Cs&&!xt)return!1;for(var er=It;er--;){var cs=dt[er];if(!(xt?cs in $:es.call($,cs)))return!1}var Ps=Ve.get(N);if(Ps&&Ve.get($))return Ps==$;var us=!0;Ve.set(N,$),Ve.set($,N);for(var ta=xt;++er<It;){cs=dt[er];var vn=N[cs],ka=$[cs];if(ge)var uh=xt?ge(ka,vn,cs,$,N,Ve):ge(vn,ka,cs,N,$,Ve);if(!(uh===void 0?vn===ka||tt(vn,ka,K,ge,Ve):uh)){us=!1;break}ta||(ta=cs=="constructor")}if(us&&!ta){var Do=N.constructor,_l=$.constructor;Do!=_l&&"constructor"in N&&"constructor"in $&&!(typeof Do=="function"&&Do instanceof Do&&typeof _l=="function"&&_l instanceof _l)&&(us=!1)}return Ve.delete(N),Ve.delete($),us}function Jn(N){return xl(N,gi,Mo)}function qs(N,$){var K=N.__data__;return ou($)?K[typeof $=="string"?"string":"hash"]:K.map}function xn(N,$){var K=re(N,$);return Js(K)?K:void 0}function Wr(N){var $=es.call(N,pr),K=N[pr];try{N[pr]=void 0;var ge=!0}catch{}var tt=Ss.call(N);return ge&&($?N[pr]=K:delete N[pr]),tt}var Mo=va?function(N){return N==null?[]:(N=Object(N),Je(va(N),function($){return fr.call(N,$)}))}:xi,xr=Kr;(hl&&xr(new hl(new ArrayBuffer(1)))!=D||Gn&&xr(new Gn)!=S||ci&&xr(ci.resolve())!=O||_a&&xr(new _a)!=L||ja&&xr(new ja)!=z)&&(xr=function(N){var $=Kr(N),K=$==A?N.constructor:void 0,ge=K?ns(K):"";if(ge)switch(ge){case No:return D;case Ds:return S;case ys:return O;case Ls:return L;case Zn:return z}return $});function lu(N,$){return $=$??u,!!$&&(typeof N=="number"||xe.test(N))&&N>-1&&N%1==0&&N<$}function ou(N){var $=typeof N;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?N!=="__proto__":N===null}function hi(N){return!!ts&&ts in N}function vl(N){var $=N&&N.constructor,K=typeof $=="function"&&$.prototype||Pe;return N===K}function mi(N){return Ss.call(N)}function ns(N){if(N!=null){try{return gt.call(N)}catch{}try{return N+""}catch{}}return""}function yn(N,$){return N===$||N!==N&&$!==$}var wl=yl(function(){return arguments}())?yl:function(N){return yr(N)&&es.call(N,"callee")&&!fr.call(N,"callee")},ea=Array.isArray;function fi(N){return N!=null&&bn(N.length)&&!pi(N)}var Qr=wa||yi;function Or(N,$){return Ea(N,$)}function pi(N){if(!Rr(N))return!1;var $=Kr(N);return $==j||$==v||$==f||$==F}function bn(N){return typeof N=="number"&&N>-1&&N%1==0&&N<=u}function Rr(N){var $=typeof N;return N!=null&&($=="object"||$=="function")}function yr(N){return N!=null&&typeof N=="object"}var Aa=Ke?vt(Ke):bl;function gi(N){return fi(N)?Xs(N):Oo(N)}function xi(){return[]}function yi(){return!1}t.exports=Or}(md,md.exports)),md.exports}var Am={},Wj;function Yz(){if(Wj)return Am;Wj=1,Object.defineProperty(Am,"__esModule",{value:!0});const t=XE(),e=JE();var s;return function(r){function i(m={},f={},p=!1){typeof m!="object"&&(m={}),typeof f!="object"&&(f={});let x=t(f);p||(x=Object.keys(x).reduce((b,j)=>(x[j]!=null&&(b[j]=x[j]),b),{}));for(const b in m)m[b]!==void 0&&f[b]===void 0&&(x[b]=m[b]);return Object.keys(x).length>0?x:void 0}r.compose=i;function o(m={},f={}){typeof m!="object"&&(m={}),typeof f!="object"&&(f={});const p=Object.keys(m).concat(Object.keys(f)).reduce((x,b)=>(e(m[b],f[b])||(x[b]=f[b]===void 0?null:f[b]),x),{});return Object.keys(p).length>0?p:void 0}r.diff=o;function u(m={},f={}){m=m||{};const p=Object.keys(f).reduce((x,b)=>(f[b]!==m[b]&&m[b]!==void 0&&(x[b]=f[b]),x),{});return Object.keys(m).reduce((x,b)=>(m[b]!==f[b]&&f[b]===void 0&&(x[b]=null),x),p)}r.invert=u;function h(m,f,p=!1){if(typeof m!="object")return f;if(typeof f!="object")return;if(!p)return f;const x=Object.keys(f).reduce((b,j)=>(m[j]===void 0&&(b[j]=f[j]),b),{});return Object.keys(x).length>0?x:void 0}r.transform=h}(s||(s={})),Am.default=s,Am}var km={},Qj;function eC(){if(Qj)return km;Qj=1,Object.defineProperty(km,"__esModule",{value:!0});var t;return function(e){function s(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=s}(t||(t={})),km.default=t,km}var Tm={},Xj;function Kz(){if(Xj)return Tm;Xj=1,Object.defineProperty(Tm,"__esModule",{value:!0});const t=eC();class e{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const i=this.ops[this.index];if(i){const o=this.offset,u=t.default.length(i);if(r>=u-o?(r=u-o,this.index+=1,this.offset=0):this.offset+=r,typeof i.delete=="number")return{delete:r};{const h={};return i.attributes&&(h.attributes=i.attributes),typeof i.retain=="number"?h.retain=r:typeof i.retain=="object"&&i.retain!==null?h.retain=i.retain:typeof i.insert=="string"?h.insert=i.insert.substr(o,r):h.insert=i.insert,h}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?t.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,i=this.index,o=this.next(),u=this.ops.slice(this.index);return this.offset=r,this.index=i,[o].concat(u)}}else return[]}}return Tm.default=e,Tm}var Jj;function Wz(){return Jj||(Jj=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const s=Zz(),r=XE(),i=JE(),o=Yz();e.AttributeMap=o.default;const u=eC();e.Op=u.default;const h=Kz();e.OpIterator=h.default;const m="\0",f=(x,b)=>{if(typeof x!="object"||x===null)throw new Error(`cannot retain a ${typeof x}`);if(typeof b!="object"||b===null)throw new Error(`cannot retain a ${typeof b}`);const j=Object.keys(x)[0];if(!j||j!==Object.keys(b)[0])throw new Error(`embed types not matched: ${j} != ${Object.keys(b)[0]}`);return[j,x[j],b[j]]};class p{constructor(b){Array.isArray(b)?this.ops=b:b!=null&&Array.isArray(b.ops)?this.ops=b.ops:this.ops=[]}static registerEmbed(b,j){this.handlers[b]=j}static unregisterEmbed(b){delete this.handlers[b]}static getHandler(b){const j=this.handlers[b];if(!j)throw new Error(`no handlers for embed type "${b}"`);return j}insert(b,j){const v={};return typeof b=="string"&&b.length===0?this:(v.insert=b,j!=null&&typeof j=="object"&&Object.keys(j).length>0&&(v.attributes=j),this.push(v))}delete(b){return b<=0?this:this.push({delete:b})}retain(b,j){if(typeof b=="number"&&b<=0)return this;const v={retain:b};return j!=null&&typeof j=="object"&&Object.keys(j).length>0&&(v.attributes=j),this.push(v)}push(b){let j=this.ops.length,v=this.ops[j-1];if(b=r(b),typeof v=="object"){if(typeof b.delete=="number"&&typeof v.delete=="number")return this.ops[j-1]={delete:v.delete+b.delete},this;if(typeof v.delete=="number"&&b.insert!=null&&(j-=1,v=this.ops[j-1],typeof v!="object"))return this.ops.unshift(b),this;if(i(b.attributes,v.attributes)){if(typeof b.insert=="string"&&typeof v.insert=="string")return this.ops[j-1]={insert:v.insert+b.insert},typeof b.attributes=="object"&&(this.ops[j-1].attributes=b.attributes),this;if(typeof b.retain=="number"&&typeof v.retain=="number")return this.ops[j-1]={retain:v.retain+b.retain},typeof b.attributes=="object"&&(this.ops[j-1].attributes=b.attributes),this}}return j===this.ops.length?this.ops.push(b):this.ops.splice(j,0,b),this}chop(){const b=this.ops[this.ops.length-1];return b&&typeof b.retain=="number"&&!b.attributes&&this.ops.pop(),this}filter(b){return this.ops.filter(b)}forEach(b){this.ops.forEach(b)}map(b){return this.ops.map(b)}partition(b){const j=[],v=[];return this.forEach(S=>{(b(S)?j:v).push(S)}),[j,v]}reduce(b,j){return this.ops.reduce(b,j)}changeLength(){return this.reduce((b,j)=>j.insert?b+u.default.length(j):j.delete?b-j.delete:b,0)}length(){return this.reduce((b,j)=>b+u.default.length(j),0)}slice(b=0,j=1/0){const v=[],S=new h.default(this.ops);let _=0;for(;_<j&&S.hasNext();){let E;_<b?E=S.next(b-_):(E=S.next(j-_),v.push(E)),_+=u.default.length(E)}return new p(v)}compose(b){const j=new h.default(this.ops),v=new h.default(b.ops),S=[],_=v.peek();if(_!=null&&typeof _.retain=="number"&&_.attributes==null){let A=_.retain;for(;j.peekType()==="insert"&&j.peekLength()<=A;)A-=j.peekLength(),S.push(j.next());_.retain-A>0&&v.next(_.retain-A)}const E=new p(S);for(;j.hasNext()||v.hasNext();)if(v.peekType()==="insert")E.push(v.next());else if(j.peekType()==="delete")E.push(j.next());else{const A=Math.min(j.peekLength(),v.peekLength()),O=j.next(A),F=v.next(A);if(F.retain){const k={};if(typeof O.retain=="number")k.retain=typeof F.retain=="number"?A:F.retain;else if(typeof F.retain=="number")O.retain==null?k.insert=O.insert:k.retain=O.retain;else{const B=O.retain==null?"insert":"retain",[w,C,z]=f(O[B],F.retain),R=p.getHandler(w);k[B]={[w]:R.compose(C,z,B==="retain")}}const L=o.default.compose(O.attributes,F.attributes,typeof O.retain=="number");if(L&&(k.attributes=L),E.push(k),!v.hasNext()&&i(E.ops[E.ops.length-1],k)){const B=new p(j.rest());return E.concat(B).chop()}}else typeof F.delete=="number"&&(typeof O.retain=="number"||typeof O.retain=="object"&&O.retain!==null)&&E.push(F)}return E.chop()}concat(b){const j=new p(this.ops.slice());return b.ops.length>0&&(j.push(b.ops[0]),j.ops=j.ops.concat(b.ops.slice(1))),j}diff(b,j){if(this.ops===b.ops)return new p;const v=[this,b].map(O=>O.map(F=>{if(F.insert!=null)return typeof F.insert=="string"?F.insert:m;const k=O===b?"on":"with";throw new Error("diff() called "+k+" non-document")}).join("")),S=new p,_=s(v[0],v[1],j,!0),E=new h.default(this.ops),A=new h.default(b.ops);return _.forEach(O=>{let F=O[1].length;for(;F>0;){let k=0;switch(O[0]){case s.INSERT:k=Math.min(A.peekLength(),F),S.push(A.next(k));break;case s.DELETE:k=Math.min(F,E.peekLength()),E.next(k),S.delete(k);break;case s.EQUAL:k=Math.min(E.peekLength(),A.peekLength(),F);const L=E.next(k),B=A.next(k);i(L.insert,B.insert)?S.retain(k,o.default.diff(L.attributes,B.attributes)):S.push(B).delete(k);break}F-=k}}),S.chop()}eachLine(b,j=`
`){const v=new h.default(this.ops);let S=new p,_=0;for(;v.hasNext();){if(v.peekType()!=="insert")return;const E=v.peek(),A=u.default.length(E)-v.peekLength(),O=typeof E.insert=="string"?E.insert.indexOf(j,A)-A:-1;if(O<0)S.push(v.next());else if(O>0)S.push(v.next(O));else{if(b(S,v.next(1).attributes||{},_)===!1)return;_+=1,S=new p}}S.length()>0&&b(S,{},_)}invert(b){const j=new p;return this.reduce((v,S)=>{if(S.insert)j.delete(u.default.length(S));else{if(typeof S.retain=="number"&&S.attributes==null)return j.retain(S.retain),v+S.retain;if(S.delete||typeof S.retain=="number"){const _=S.delete||S.retain;return b.slice(v,v+_).forEach(A=>{S.delete?j.push(A):S.retain&&S.attributes&&j.retain(u.default.length(A),o.default.invert(S.attributes,A.attributes))}),v+_}else if(typeof S.retain=="object"&&S.retain!==null){const _=b.slice(v,v+1),E=new h.default(_.ops).next(),[A,O,F]=f(S.retain,E.insert),k=p.getHandler(A);return j.retain({[A]:k.invert(O,F)},o.default.invert(S.attributes,E.attributes)),v+1}}return v},0),j.chop()}transform(b,j=!1){if(j=!!j,typeof b=="number")return this.transformPosition(b,j);const v=b,S=new h.default(this.ops),_=new h.default(v.ops),E=new p;for(;S.hasNext()||_.hasNext();)if(S.peekType()==="insert"&&(j||_.peekType()!=="insert"))E.retain(u.default.length(S.next()));else if(_.peekType()==="insert")E.push(_.next());else{const A=Math.min(S.peekLength(),_.peekLength()),O=S.next(A),F=_.next(A);if(O.delete)continue;if(F.delete)E.push(F);else{const k=O.retain,L=F.retain;let B=typeof L=="object"&&L!==null?L:A;if(typeof k=="object"&&k!==null&&typeof L=="object"&&L!==null){const w=Object.keys(k)[0];if(w===Object.keys(L)[0]){const C=p.getHandler(w);C&&(B={[w]:C.transform(k[w],L[w],j)})}}E.retain(B,o.default.transform(O.attributes,F.attributes,j))}}return E.chop()}transformPosition(b,j=!1){j=!!j;const v=new h.default(this.ops);let S=0;for(;v.hasNext()&&S<=b;){const _=v.peekLength(),E=v.peekType();if(v.next(),E==="delete"){b-=Math.min(_,b-S);continue}else E==="insert"&&(S<b||!j)&&(b+=_);S+=_}return b}}p.Op=u.default,p.OpIterator=h.default,p.AttributeMap=o.default,p.handlers={},e.default=p,t.exports=p,t.exports.default=p}(Cm,Cm.exports)),Cm.exports}var cn=Wz();const Fe=Pd(cn);class Hn extends Vr{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Hn.blotName="break";Hn.tagName="BR";let $n=class extends bf{};function Hf(t){return t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}class ur extends Oy{static allowedChildren=[ur,Hn,Vr,$n];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,s){const r=ur.order.indexOf(e),i=ur.order.indexOf(s);return r>=0||i>=0?r-i:e===s?0:e<s?-1:1}formatAt(e,s,r,i){if(ur.compare(this.statics.blotName,r)<0&&this.scroll.query(r,He.BLOT)){const o=this.isolate(e,s);i&&o.wrap(r,i)}else super.formatAt(e,s,r,i)}optimize(e){if(super.optimize(e),this.parent instanceof ur&&ur.compare(this.statics.blotName,this.parent.statics.blotName)>0){const s=this.parent.isolate(this.offset(),this.length());this.moveChildren(s),s.wrap(this)}}}const e2=1;class Ws extends Md{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=tC(this)),this.cache.delta}deleteAt(e,s){super.deleteAt(e,s),this.cache={}}formatAt(e,s,r,i){s<=0||(this.scroll.query(r,He.BLOCK)?e+s===this.length()&&this.format(r,i):super.formatAt(e,Math.min(s,this.length()-e-1),r,i),this.cache={})}insertAt(e,s,r){if(r!=null){super.insertAt(e,s,r),this.cache={};return}if(s.length===0)return;const i=s.split(`
`),o=i.shift();o.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let u=this;i.reduce((h,m)=>(u=u.split(h,!0),u.insertAt(0,m),m.length),e+o.length)}insertBefore(e,s){const{head:r}=this.children;super.insertBefore(e,s),r instanceof Hn&&r.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+e2),this.cache.length}moveChildren(e,s){super.moveChildren(e,s),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s&&(e===0||e>=this.length()-e2)){const i=this.clone();return e===0?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}const r=super.split(e,s);return this.cache={},r}}Ws.blotName="block";Ws.tagName="P";Ws.defaultChild=Hn;Ws.allowedChildren=[Hn,ur,Vr,$n];class on extends Vr{attach(){super.attach(),this.attributes=new zf(this.domNode)}delta(){return new Fe().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,s){const r=this.scroll.query(e,He.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,s)}formatAt(e,s,r,i){this.format(r,i)}insertAt(e,s,r){if(r!=null){super.insertAt(e,s,r);return}const i=s.split(`
`),o=i.pop(),u=i.map(m=>{const f=this.scroll.create(Ws.blotName);return f.insertAt(0,m),f}),h=this.split(e);u.forEach(m=>{this.parent.insertBefore(m,h)}),o&&this.parent.insertBefore(this.scroll.create("text",o),h)}}on.scope=He.BLOCK_BLOT;function tC(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(nr).reduce((s,r)=>r.length()===0?s:s.insert(r.value(),an(r,{},e)),new Fe).insert(`
`,an(t))}function an(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},s&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:an(t.parent,e,s)}class An extends Vr{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,s,r){super(e,s),this.selection=r,this.textNode=document.createTextNode(An.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,s){if(this.savedLength!==0){super.format(e,s);return}let r=this,i=0;for(;r!=null&&r.statics.scope!==He.BLOCK_BLOT;)i+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=An.CONTENTS.length,r.optimize(),r.formatAt(i,An.CONTENTS.length,e,s),this.savedLength=0)}index(e,s){return e===this.textNode?0:super.index(e,s)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const s=this.prev instanceof $n?this.prev:null,r=s?s.length():0,i=this.next instanceof $n?this.next:null,o=i?i.text:"",{textNode:u}=this,h=u.data.split(An.CONTENTS).join("");u.data=An.CONTENTS;let m;if(s)m=s,(h||i)&&(s.insertAt(s.length(),h+o),i&&i.remove());else if(i)m=i,i.insertAt(0,h);else{const f=document.createTextNode(h);m=this.scroll.create(f),this.parent.insertBefore(m,this)}if(this.remove(),e){const f=(b,j)=>s&&b===s.domNode?j:b===u?r+j-1:i&&b===i.domNode?r+h.length+j:null,p=f(e.start.node,e.start.offset),x=f(e.end.node,e.end.offset);if(p!==null&&x!==null)return{startNode:m.domNode,startOffset:p,endNode:m.domNode,endOffset:x}}return null}update(e,s){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(s.range=r)}}optimize(e){super.optimize(e);let{parent:s}=this;for(;s;){if(s.domNode.tagName==="A"){this.savedLength=An.CONTENTS.length,s.isolate(this.offset(s),this.length()).unwrap(),this.savedLength=0;break}s=s.parent}}value(){return""}}var _0={exports:{}},t2;function Qz(){return t2||(t2=1,function(t){var e=Object.prototype.hasOwnProperty,s="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(s=!1));function i(m,f,p){this.fn=m,this.context=f,this.once=p||!1}function o(m,f,p,x,b){if(typeof p!="function")throw new TypeError("The listener must be a function");var j=new i(p,x||m,b),v=s?s+f:f;return m._events[v]?m._events[v].fn?m._events[v]=[m._events[v],j]:m._events[v].push(j):(m._events[v]=j,m._eventsCount++),m}function u(m,f){--m._eventsCount===0?m._events=new r:delete m._events[f]}function h(){this._events=new r,this._eventsCount=0}h.prototype.eventNames=function(){var f=[],p,x;if(this._eventsCount===0)return f;for(x in p=this._events)e.call(p,x)&&f.push(s?x.slice(1):x);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(p)):f},h.prototype.listeners=function(f){var p=s?s+f:f,x=this._events[p];if(!x)return[];if(x.fn)return[x.fn];for(var b=0,j=x.length,v=new Array(j);b<j;b++)v[b]=x[b].fn;return v},h.prototype.listenerCount=function(f){var p=s?s+f:f,x=this._events[p];return x?x.fn?1:x.length:0},h.prototype.emit=function(f,p,x,b,j,v){var S=s?s+f:f;if(!this._events[S])return!1;var _=this._events[S],E=arguments.length,A,O;if(_.fn){switch(_.once&&this.removeListener(f,_.fn,void 0,!0),E){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,p),!0;case 3:return _.fn.call(_.context,p,x),!0;case 4:return _.fn.call(_.context,p,x,b),!0;case 5:return _.fn.call(_.context,p,x,b,j),!0;case 6:return _.fn.call(_.context,p,x,b,j,v),!0}for(O=1,A=new Array(E-1);O<E;O++)A[O-1]=arguments[O];_.fn.apply(_.context,A)}else{var F=_.length,k;for(O=0;O<F;O++)switch(_[O].once&&this.removeListener(f,_[O].fn,void 0,!0),E){case 1:_[O].fn.call(_[O].context);break;case 2:_[O].fn.call(_[O].context,p);break;case 3:_[O].fn.call(_[O].context,p,x);break;case 4:_[O].fn.call(_[O].context,p,x,b);break;default:if(!A)for(k=1,A=new Array(E-1);k<E;k++)A[k-1]=arguments[k];_[O].fn.apply(_[O].context,A)}}return!0},h.prototype.on=function(f,p,x){return o(this,f,p,x,!1)},h.prototype.once=function(f,p,x){return o(this,f,p,x,!0)},h.prototype.removeListener=function(f,p,x,b){var j=s?s+f:f;if(!this._events[j])return this;if(!p)return u(this,j),this;var v=this._events[j];if(v.fn)v.fn===p&&(!b||v.once)&&(!x||v.context===x)&&u(this,j);else{for(var S=0,_=[],E=v.length;S<E;S++)(v[S].fn!==p||b&&!v[S].once||x&&v[S].context!==x)&&_.push(v[S]);_.length?this._events[j]=_.length===1?_[0]:_:u(this,j)}return this},h.prototype.removeAllListeners=function(f){var p;return f?(p=s?s+f:f,this._events[p]&&u(this,p)):(this._events=new r,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=s,h.EventEmitter=h,t.exports=h}(_0)),_0.exports}var Xz=Qz();const Jz=Pd(Xz),Nx=new WeakMap,Sx=["error","warn","log","info"];let Ex="warn";function sC(t){if(Ex&&Sx.indexOf(t)<=Sx.indexOf(Ex)){for(var e=arguments.length,s=new Array(e>1?e-1:0),r=1;r<e;r++)s[r-1]=arguments[r];console[t](...s)}}function oi(t){return Sx.reduce((e,s)=>(e[s]=sC.bind(console,s,t),e),{})}oi.level=t=>{Ex=t};sC.level=oi.level;const j0=oi("quill:events"),eF=["selectionchange","mousedown","mouseup","click"];eF.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const o=Nx.get(i);o&&o.emitter&&o.emitter.handleDOM(...s)})})});class ze extends Jz{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",j0.error)}emit(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return j0.log.call(j0,...s),super.emit(...s)}handleDOM(e){for(var s=arguments.length,r=new Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];(this.domListeners[e.type]||[]).forEach(o=>{let{node:u,handler:h}=o;(e.target===u||u.contains(e.target))&&h(e,...r)})}listenDOM(e,s,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:s,handler:r})}}const N0=oi("quill:selection");class lo{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=s}}class tF{constructor(e,s){this.emitter=s,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new lo(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,ze.sources.USER),1)}),this.emitter.on(ze.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(ze.events.SCROLL_UPDATE,(i,o)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const u=o.some(h=>h.type==="characterData"||h.type==="childList"||h.type==="attributes"&&h.target===this.root);this.update(u?ze.sources.SILENT:i)}catch{}})}),this.emitter.on(ze.events.SCROLL_OPTIMIZE,(r,i)=>{if(i.range){const{startNode:o,startOffset:u,endNode:h,endOffset:m}=i.range;this.setNativeRange(o,u,h,m),this.update(ze.sources.SILENT)}}),this.update(ze.sources.SILENT)}handleComposition(){this.emitter.on(ze.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(ze.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(ze.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,s){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,He.BLOCK))){if(r.start.node!==this.cursor.textNode){const i=this.scroll.find(r.start.node,!1);if(i==null)return;if(i instanceof nr){const o=i.split(r.start.offset);i.parent.insertBefore(this.cursor,o)}else i.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,s),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),s=Math.min(e+s,r-1)-e;let i,[o,u]=this.scroll.leaf(e);if(o==null)return null;if(s>0&&u===o.length()){const[p]=this.scroll.leaf(e+1);if(p){const[x]=this.scroll.line(e),[b]=this.scroll.line(e+1);x===b&&(o=p,u=0)}}[i,u]=o.position(u,!0);const h=document.createRange();if(s>0)return h.setStart(i,u),[o,u]=this.scroll.leaf(e+s),o==null?null:([i,u]=o.position(u,!0),h.setEnd(i,u),h.getBoundingClientRect());let m="left",f;if(i instanceof Text){if(!i.data.length)return null;u<i.data.length?(h.setStart(i,u),h.setEnd(i,u+1)):(h.setStart(i,u-1),h.setEnd(i,u),m="right"),f=h.getBoundingClientRect()}else{if(!(o.domNode instanceof Element))return null;f=o.domNode.getBoundingClientRect(),u>0&&(m="right")}return{bottom:f.top+f.height,height:f.height,left:f[m],right:f[m],top:f.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const s=e.getRangeAt(0);if(s==null)return null;const r=this.normalizeNative(s);return N0.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const s=this.getNativeRange();return s==null?[null,null]:[this.normalizedToRange(s),s]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&S0(this.root,document.activeElement)}normalizedToRange(e){const s=[[e.start.node,e.start.offset]];e.native.collapsed||s.push([e.end.node,e.end.offset]);const r=s.map(u=>{const[h,m]=u,f=this.scroll.find(h,!0),p=f.offset(this.scroll);return m===0?p:f instanceof nr?p+f.index(h,m):p+f.length()}),i=Math.min(Math.max(...r),this.scroll.length()-1),o=Math.min(i,...r);return new lo(o,i-o)}normalizeNative(e){if(!S0(this.root,e.startContainer)||!e.collapsed&&!S0(this.root,e.endContainer))return null;const s={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[s.start,s.end].forEach(r=>{let{node:i,offset:o}=r;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>o)i=i.childNodes[o],o=0;else if(i.childNodes.length===o)i=i.lastChild,i instanceof Text?o=i.data.length:i.childNodes.length>0?o=i.childNodes.length:o=i.childNodes.length+1;else break;r.node=i,r.offset=o}),s}rangeToNative(e){const s=this.scroll.length(),r=(i,o)=>{i=Math.min(s-1,i);const[u,h]=this.scroll.leaf(i);return u?u.position(h,o):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:s,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(N0.info("setNativeRange",e,s,r,i),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const u=document.getSelection();if(u!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:h}=this.getNativeRange()||{};if(h==null||o||e!==h.startContainer||s!==h.startOffset||r!==h.endContainer||i!==h.endOffset){e instanceof Element&&e.tagName==="BR"&&(s=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(i=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const m=document.createRange();m.setStart(e,s),m.setEnd(r,i),u.removeAllRanges(),u.addRange(m)}}else u.removeAllRanges(),this.root.blur()}setRange(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ze.sources.API;if(typeof s=="string"&&(r=s,s=!1),N0.info("setRange",e),e!=null){const i=this.rangeToNative(e);this.setNativeRange(...i,s)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ze.sources.USER;const s=this.lastRange,[r,i]=this.getRange();if(this.lastRange=r,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!Ty(s,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const u=this.cursor.restore();u&&this.setNativeRange(u.startNode,u.startOffset,u.endNode,u.endOffset)}const o=[ze.events.SELECTION_CHANGE,Dc(this.lastRange),Dc(s),e];this.emitter.emit(ze.events.EDITOR_CHANGE,...o),e!==ze.sources.SILENT&&this.emitter.emit(...o)}}}function S0(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const sF=/^[ -~]*$/;class rF{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let s=this.scroll.length();this.scroll.batchStart();const r=s2(e),i=new Fe;return aF(r.ops.slice()).reduce((u,h)=>{const m=cn.Op.length(h);let f=h.attributes||{},p=!1,x=!1;if(h.insert!=null){if(i.retain(m),typeof h.insert=="string"){const v=h.insert;x=!v.endsWith(`
`)&&(s<=u||!!this.scroll.descendant(on,u)[0]),this.scroll.insertAt(u,v);const[S,_]=this.scroll.line(u);let E=el({},an(S));if(S instanceof Ws){const[A]=S.descendant(nr,_);A&&(E=el(E,an(A)))}f=cn.AttributeMap.diff(E,f)||{}}else if(typeof h.insert=="object"){const v=Object.keys(h.insert)[0];if(v==null)return u;const S=this.scroll.query(v,He.INLINE)!=null;if(S)(s<=u||this.scroll.descendant(on,u)[0])&&(x=!0);else if(u>0){const[_,E]=this.scroll.descendant(nr,u-1);_ instanceof $n?_.value()[E]!==`
`&&(p=!0):_ instanceof Vr&&_.statics.scope===He.INLINE_BLOT&&(p=!0)}if(this.scroll.insertAt(u,v,h.insert[v]),S){const[_]=this.scroll.descendant(nr,u);if(_){const E=el({},an(_));f=cn.AttributeMap.diff(E,f)||{}}}}s+=m}else if(i.push(h),h.retain!==null&&typeof h.retain=="object"){const v=Object.keys(h.retain)[0];if(v==null)return u;this.scroll.updateEmbedAt(u,v,h.retain[v])}Object.keys(f).forEach(v=>{this.scroll.formatAt(u,m,v,f[v])});const b=p?1:0,j=x?1:0;return s+=b+j,i.retain(b),i.delete(j),u+m+b+j},0),i.reduce((u,h)=>typeof h.delete=="number"?(this.scroll.deleteAt(u,h.delete),u):u+cn.Op.length(h),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,s){return this.scroll.deleteAt(e,s),this.update(new Fe().retain(e).delete(s))}formatLine(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(o=>{this.scroll.lines(e,Math.max(s,1)).forEach(u=>{u.format(o,r[o])})}),this.scroll.optimize();const i=new Fe().retain(e).retain(s,Dc(r));return this.update(i)}formatText(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(o=>{this.scroll.formatAt(e,s,o,r[o])});const i=new Fe().retain(e).retain(s,Dc(r));return this.update(i)}getContents(e,s){return this.delta.slice(e,e+s)}getDelta(){return this.scroll.lines().reduce((e,s)=>e.concat(s.delta()),new Fe)}getFormat(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],i=[];s===0?this.scroll.path(e).forEach(h=>{const[m]=h;m instanceof Ws?r.push(m):m instanceof nr&&i.push(m)}):(r=this.scroll.lines(e,s),i=this.scroll.descendants(nr,e,s));const[o,u]=[r,i].map(h=>{const m=h.shift();if(m==null)return{};let f=an(m);for(;Object.keys(f).length>0;){const p=h.shift();if(p==null)return f;f=nF(an(p),f)}return f});return{...o,...u}}getHTML(e,s){const[r,i]=this.scroll.line(e);if(r){const o=r.length();return r.length()>=i+s&&!(i===0&&s===o)?Dd(r,i,s,!0):Dd(this.scroll,e,s,!0)}return""}getText(e,s){return this.getContents(e,s).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,s){const r=s2(s),i=new Fe().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(i)}insertEmbed(e,s,r){return this.scroll.insertAt(e,s,r),this.update(new Fe().retain(e).insert({[s]:r}))}insertText(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return s=s.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,s),Object.keys(r).forEach(i=>{this.scroll.formatAt(e,s.length,i,r[i])}),this.update(new Fe().retain(e).insert(s,Dc(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==Ws.blotName)return!1;const s=e;return s.children.length>1?!1:s.children.head instanceof Hn}removeFormat(e,s){const r=this.getText(e,s),[i,o]=this.scroll.line(e+s);let u=0,h=new Fe;i!=null&&(u=i.length()-o,h=i.delta().slice(o,o+u-1).insert(`
`));const f=this.getContents(e,s+u).diff(new Fe().insert(r).concat(h)),p=new Fe().retain(e).concat(f);return this.applyDelta(p)}update(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(s.length===1&&s[0].type==="characterData"&&s[0].target.data.match(sF)&&this.scroll.find(s[0].target)){const o=this.scroll.find(s[0].target),u=an(o),h=o.offset(this.scroll),m=s[0].oldValue.replace(An.CONTENTS,""),f=new Fe().insert(m),p=new Fe().insert(o.value()),x=r&&{oldRange:r2(r.oldRange,-h),newRange:r2(r.newRange,-h)};e=new Fe().retain(h).concat(f.diff(p,x)).reduce((j,v)=>v.insert?j.insert(v.insert,u):j.push(v),new Fe),this.delta=i.compose(e)}else this.delta=this.getDelta(),(!e||!Ty(i.compose(e),this.delta))&&(e=i.diff(this.delta,r));return e}}function kc(t,e,s){if(t.length===0){const[j]=E0(s.pop());return e<=0?`</li></${j}>`:`</li></${j}>${kc([],e-1,s)}`}const[{child:r,offset:i,length:o,indent:u,type:h},...m]=t,[f,p]=E0(h);if(u>e)return s.push(h),u===e+1?`<${f}><li${p}>${Dd(r,i,o)}${kc(m,u,s)}`:`<${f}><li>${kc(t,e+1,s)}`;const x=s[s.length-1];if(u===e&&h===x)return`</li><li${p}>${Dd(r,i,o)}${kc(m,u,s)}`;const[b]=E0(s.pop());return`</li></${b}>${kc(t,e-1,s)}`}function Dd(t,e,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,s);if(t instanceof $n)return Hf(t.value().slice(e,e+s));if(t instanceof Pn){if(t.statics.blotName==="list-container"){const f=[];return t.children.forEachAt(e,s,(p,x,b)=>{const j="formats"in p&&typeof p.formats=="function"?p.formats():{};f.push({child:p,offset:x,length:b,indent:j.indent||0,type:j.list})}),kc(f,-1,[])}const i=[];if(t.children.forEachAt(e,s,(f,p,x)=>{i.push(Dd(f,p,x))}),r||t.statics.blotName==="list")return i.join("");const{outerHTML:o,innerHTML:u}=t.domNode,[h,m]=o.split(`>${u}<`);return h==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${m}`:`${h}>${i.join("")}<${m}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function nF(t,e){return Object.keys(e).reduce((s,r)=>{if(t[r]==null)return s;const i=e[r];return i===t[r]?s[r]=i:Array.isArray(i)?i.indexOf(t[r])<0?s[r]=i.concat([t[r]]):s[r]=i:s[r]=[i,t[r]],s},{})}function E0(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function s2(t){return t.reduce((e,s)=>{if(typeof s.insert=="string"){const r=s.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,s.attributes)}return e.push(s)},new Fe)}function r2(t,e){let{index:s,length:r}=t;return new lo(s+e,r)}function aF(t){const e=[];return t.forEach(s=>{typeof s.insert=="string"?s.insert.split(`
`).forEach((i,o)=>{o&&e.push({insert:`
`,attributes:s.attributes}),i&&e.push({insert:i,attributes:s.attributes})}):e.push(s)}),e}class ba{static DEFAULTS={};constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=s}}const Om="\uFEFF";class My extends Vr{constructor(e,s){super(e,s),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(Om),this.rightGuard=document.createTextNode(Om),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,s){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,s)}restore(e){let s=null,r;const i=e.data.split(Om).join("");if(e===this.leftGuard)if(this.prev instanceof $n){const o=this.prev.length();this.prev.insertAt(o,i),s={startNode:this.prev.domNode,startOffset:o+i.length}}else r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this),s={startNode:r,startOffset:i.length};else e===this.rightGuard&&(this.next instanceof $n?(this.next.insertAt(0,i),s={startNode:this.next.domNode,startOffset:i.length}):(r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this.next),s={startNode:r,startOffset:i.length}));return e.data=Om,s}update(e,s){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const i=this.restore(r.target);i&&(s.range=i)}})}}class iF{isComposing=!1;constructor(e,s){this.scroll=e,this.emitter=s,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const s=e.target instanceof Node?this.scroll.find(e.target,!0):null;s&&!(s instanceof My)&&(this.emitter.emit(ze.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(ze.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(ze.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(ze.events.COMPOSITION_END,e),this.isComposing=!1}}class eu{static DEFAULTS={modules:{}};static themes={default:eu};modules={};constructor(e,s){this.quill=e,this.options=s}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const s=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new s(this.quill,this.options.modules[e]||{}),this.modules[e]}}const lF=t=>t.parentElement||t.getRootNode().host||null,oF=t=>{const e=t.getBoundingClientRect(),s="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,r="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*s,bottom:e.top+t.clientHeight*r,left:e.left}},Rm=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},n2=(t,e,s,r,i,o)=>t<s&&e>r?0:t<s?-(s-t+i):e>r?e-t>r-s?t+i-s:e-r+o:0,cF=(t,e)=>{const s=t.ownerDocument;let r=e,i=t;for(;i;){const o=i===s.body,u=o?{top:0,right:window.visualViewport?.width??s.documentElement.clientWidth,bottom:window.visualViewport?.height??s.documentElement.clientHeight,left:0}:oF(i),h=getComputedStyle(i),m=n2(r.left,r.right,u.left,u.right,Rm(h.scrollPaddingLeft),Rm(h.scrollPaddingRight)),f=n2(r.top,r.bottom,u.top,u.bottom,Rm(h.scrollPaddingTop),Rm(h.scrollPaddingBottom));if(m||f)if(o)s.defaultView?.scrollBy(m,f);else{const{scrollLeft:p,scrollTop:x}=i;f&&(i.scrollTop+=f),m&&(i.scrollLeft+=m);const b=i.scrollLeft-p,j=i.scrollTop-x;r={left:r.left-b,top:r.top-j,right:r.right-b,bottom:r.bottom-j}}i=o||h.position==="fixed"?null:lF(i)}},uF=100,dF=["block","break","cursor","inline","scroll","text"],hF=(t,e,s)=>{const r=new Bc;return dF.forEach(i=>{const o=e.query(i);o&&r.register(o)}),t.forEach(i=>{let o=e.query(i);o||s.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let u=0;for(;o;)if(r.register(o),o="blotName"in o?o.requiredContainer??null:null,u+=1,u>uF){s.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),r},qc=oi("quill"),Mm=new Bc;Pn.uiClass="ql-ui";class be{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Mm,theme:"default"};static events=ze.events;static sources=ze.sources;static version="2.0.2";static imports={delta:Fe,parchment:Gz,"core/module":ba,"core/theme":eu};static debug(e){e===!0&&(e="log"),oi.level(e)}static find(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Nx.get(e)||Mm.find(e,s)}static import(e){return this.imports[e]==null&&qc.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],s=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,s):Object.keys(e).forEach(i=>{this.register(i,e[i],s)})}else{const e=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&qc.warn(`Overwriting ${e} with`,s),this.imports[e]=s,(e.startsWith("blots/")||e.startsWith("formats/"))&&s&&typeof s!="boolean"&&s.blotName!=="abstract"&&Mm.register(s),typeof s.register=="function"&&s.register(Mm)}}constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=mF(e,s),this.container=this.options.container,this.container==null){qc.error("Invalid Quill container",e);return}this.options.debug&&be.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Nx.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new ze;const i=Ry.blotName,o=this.options.registry.query(i);if(!o||!("blotName"in o))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new o(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new rF(this.scroll),this.selection=new tF(this.scroll,this.emitter),this.composition=new iF(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(ze.events.EDITOR_CHANGE,u=>{u===ze.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(ze.events.SCROLL_UPDATE,(u,h)=>{const m=this.selection.lastRange,[f]=this.selection.getRange(),p=m&&f?{oldRange:m,newRange:f}:void 0;Nn.call(this,()=>this.editor.update(null,h,p),u)}),this.emitter.on(ze.events.SCROLL_EMBED_UPDATE,(u,h)=>{const m=this.selection.lastRange,[f]=this.selection.getRange(),p=m&&f?{oldRange:m,newRange:f}:void 0;Nn.call(this,()=>{const x=new Fe().retain(u.offset(this)).retain({[u.statics.blotName]:h});return this.editor.update(x,[],p)},be.sources.USER)}),r){const u=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(u)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,s),e}blur(){this.selection.setRange(null)}deleteText(e,s,r){return[e,s,,r]=Va(e,s,r),Nn.call(this,()=>this.editor.deleteText(e,s),r,e,-1*s)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const s=e();return this.allowReadOnlyEdits=!1,s}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ze.sources.API;return Nn.call(this,()=>{const i=this.getSelection(!0);let o=new Fe;if(i==null)return o;if(this.scroll.query(e,He.BLOCK))o=this.editor.formatLine(i.index,i.length,{[e]:s});else{if(i.length===0)return this.selection.format(e,s),o;o=this.editor.formatText(i.index,i.length,{[e]:s})}return this.setSelection(i,ze.sources.SILENT),o},r)}formatLine(e,s,r,i,o){let u;return[e,s,u,o]=Va(e,s,r,i,o),Nn.call(this,()=>this.editor.formatLine(e,s,u),o,e,0)}formatText(e,s,r,i,o){let u;return[e,s,u,o]=Va(e,s,r,i,o),Nn.call(this,()=>this.editor.formatText(e,s,u),o,e,0)}getBounds(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,s):r=this.selection.getBounds(e.index,e.length),!r)return null;const i=this.container.getBoundingClientRect();return{bottom:r.bottom-i.top,height:r.height,left:r.left-i.left,right:r.right-i.left,top:r.top-i.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,s]=Va(e,s),this.editor.getContents(e,s)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,s):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,s)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(s=s??this.getLength()-e),[e,s]=Va(e,s),this.editor.getHTML(e,s)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(s=s??this.getLength()-e),[e,s]=Va(e,s),this.editor.getText(e,s)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,s,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:be.sources.API;return Nn.call(this,()=>this.editor.insertEmbed(e,s,r),i,e)}insertText(e,s,r,i,o){let u;return[e,,u,o]=Va(e,0,r,i,o),Nn.call(this,()=>this.editor.insertText(e,s,u),o,e,s.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,s,r){return[e,s,,r]=Va(e,s,r),Nn.call(this,()=>this.editor.removeFormat(e,s),r,e)}scrollRectIntoView(e){cF(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,s=e&&this.selection.getBounds(e.index,e.length);s&&this.scrollRectIntoView(s)}setContents(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze.sources.API;return Nn.call(this,()=>{e=new Fe(e);const r=this.getLength(),i=this.editor.deleteText(0,r),o=this.editor.insertContents(0,e),u=this.editor.deleteText(this.getLength()-1,1);return i.compose(o).compose(u)},s)}setSelection(e,s,r){e==null?this.selection.setRange(null,s||be.sources.API):([e,s,,r]=Va(e,s,r),this.selection.setRange(new lo(Math.max(0,e),s),r),r!==ze.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze.sources.API;const r=new Fe().insert(e);return this.setContents(r,s)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ze.sources.USER;const s=this.scroll.update(e);return this.selection.update(e),s}updateContents(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze.sources.API;return Nn.call(this,()=>(e=new Fe(e),this.editor.applyDelta(e)),s,!0)}}function a2(t){return typeof t=="string"?document.querySelector(t):t}function C0(t){return Object.entries(t??{}).reduce((e,s)=>{let[r,i]=s;return{...e,[r]:i===!0?{}:i}},{})}function i2(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function mF(t,e){const s=a2(t);if(!s)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===be.DEFAULTS.theme?eu:be.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:o,...u}=be.DEFAULTS,{modules:h,...m}=i.DEFAULTS;let f=C0(e.modules);f!=null&&f.toolbar&&f.toolbar.constructor!==Object&&(f={...f,toolbar:{container:f.toolbar}});const p=el({},C0(o),C0(h),f),x={...u,...i2(m),...i2(e)};let b=e.registry;return b?e.formats&&qc.warn('Ignoring "formats" option because "registry" is specified'):b=e.formats?hF(e.formats,x.registry,qc):x.registry,{...x,registry:b,container:s,theme:i,modules:Object.entries(p).reduce((j,v)=>{let[S,_]=v;if(!_)return j;const E=be.import(`modules/${S}`);return E==null?(qc.error(`Cannot load ${S} module. Are you sure you registered it?`),j):{...j,[S]:el({},E.DEFAULTS||{},_)}},{}),bounds:a2(x.bounds)}}function Nn(t,e,s,r){if(!this.isEnabled()&&e===ze.sources.USER&&!this.allowReadOnlyEdits)return new Fe;let i=s==null?null:this.getSelection();const o=this.editor.delta,u=t();if(i!=null&&(s===!0&&(s=i.index),r==null?i=l2(i,u,e):r!==0&&(i=l2(i,s,r,e)),this.setSelection(i,ze.sources.SILENT)),u.length()>0){const h=[ze.events.TEXT_CHANGE,u,o,e];this.emitter.emit(ze.events.EDITOR_CHANGE,...h),e!==ze.sources.SILENT&&this.emitter.emit(...h)}return u}function Va(t,e,s,r,i){let o={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(i=r,r=s,s=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(i=r,r=s,s=e,e=0),typeof s=="object"?(o=s,i=r):typeof s=="string"&&(r!=null?o[s]=r:i=s),i=i||ze.sources.API,[t,e,o,i]}function l2(t,e,s,r){const i=typeof s=="number"?s:0;if(t==null)return null;let o,u;return e&&typeof e.transformPosition=="function"?[o,u]=[t.index,t.index+t.length].map(h=>e.transformPosition(h,r!==ze.sources.USER)):[o,u]=[t.index,t.index+t.length].map(h=>h<e||h===e&&r===ze.sources.USER?h:i>=0?h+i:Math.max(e,h+i)),new lo(o,u-o)}class wo extends Ff{}function o2(t){return t instanceof Ws||t instanceof on}function c2(t){return typeof t.updateContent=="function"}class fF extends Ry{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Ws;static allowedChildren=[Ws,on,wo];constructor(e,s,r){let{emitter:i}=r;super(e,s),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",o=>this.handleDragStart(o))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(ze.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(ze.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,s){this.emitter.emit(ze.events.SCROLL_EMBED_UPDATE,e,s)}deleteAt(e,s){const[r,i]=this.line(e),[o]=this.line(e+s);if(super.deleteAt(e,s),o!=null&&r!==o&&i>0){if(r instanceof on||o instanceof on){this.optimize();return}const u=o.children.head instanceof Hn?null:o.children.head;r.moveChildren(o,u),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,s,r,i){super.formatAt(e,s,r,i),this.optimize()}insertAt(e,s,r){if(e>=this.length())if(r==null||this.scroll.query(s,He.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),r==null&&s.endsWith(`
`)?i.insertAt(0,s.slice(0,-1),r):i.insertAt(0,s,r)}else{const i=this.scroll.create(s,r);this.appendChild(i)}else super.insertAt(e,s,r);this.optimize()}insertBefore(e,s){if(e.statics.scope===He.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,s)}else super.insertBefore(e,s)}insertContents(e,s){const r=this.deltaToRenderBlocks(s.concat(new Fe().insert(`
`))),i=r.pop();if(i==null)return;this.batchStart();const o=r.shift();if(o){const m=o.type==="block"&&(o.delta.length()===0||!this.descendant(on,e)[0]&&e<this.length()),f=o.type==="block"?o.delta:new Fe().insert({[o.key]:o.value});A0(this,e,f);const p=o.type==="block"?1:0,x=e+f.length()+p;m&&this.insertAt(x-1,`
`);const b=an(this.line(e)[0]),j=cn.AttributeMap.diff(b,o.attributes)||{};Object.keys(j).forEach(v=>{this.formatAt(x-1,1,v,j[v])}),e=x}let[u,h]=this.children.find(e);if(r.length&&(u&&(u=u.split(h),h=0),r.forEach(m=>{if(m.type==="block"){const f=this.createBlock(m.attributes,u||void 0);A0(f,0,m.delta)}else{const f=this.create(m.key,m.value);this.insertBefore(f,u||void 0),Object.keys(m.attributes).forEach(p=>{f.format(p,m.attributes[p])})}})),i.type==="block"&&i.delta.length()){const m=u?u.offset(u.scroll)+h:this.length();A0(this,m,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const s=this.path(e).pop();if(!s)return[null,-1];const[r,i]=s;return r instanceof nr?[r,i]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(o2,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(i,o,u)=>{let h=[],m=u;return i.children.forEachAt(o,u,(f,p,x)=>{o2(f)?h.push(f):f instanceof Ff&&(h=h.concat(r(f,p,m))),m-=x}),h};return r(this,e,s)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,s),e.length>0&&this.emitter.emit(ze.events.SCROLL_OPTIMIZE,e,s))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let s=ze.sources.USER;typeof e=="string"&&(s=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:i}=r;const o=this.find(i,!0);return o&&!c2(o)}),e.length>0&&this.emitter.emit(ze.events.SCROLL_BEFORE_UPDATE,s,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(ze.events.SCROLL_UPDATE,s,e)}updateEmbedAt(e,s,r){const[i]=this.descendant(o=>o instanceof on,e);i&&i.statics.blotName===s&&c2(i)&&i.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const s=[];let r=new Fe;return e.forEach(i=>{const o=i?.insert;if(o)if(typeof o=="string"){const u=o.split(`
`);u.slice(0,-1).forEach(m=>{r.insert(m,i.attributes),s.push({type:"block",delta:r,attributes:i.attributes??{}}),r=new Fe});const h=u[u.length-1];h&&r.insert(h,i.attributes)}else{const u=Object.keys(o)[0];if(!u)return;this.query(u,He.INLINE)?r.push(i):(r.length()&&s.push({type:"block",delta:r,attributes:{}}),r=new Fe,s.push({type:"blockEmbed",key:u,value:o[u],attributes:i.attributes??{}}))}}),r.length()&&s.push({type:"block",delta:r,attributes:{}}),s}createBlock(e,s){let r;const i={};Object.entries(e).forEach(h=>{let[m,f]=h;this.query(m,He.BLOCK&He.BLOT)!=null?r=m:i[m]=f});const o=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(o,s||void 0);const u=o.length();return Object.entries(i).forEach(h=>{let[m,f]=h;o.formatAt(0,u,m,f)}),o}}function A0(t,e,s){s.reduce((r,i)=>{const o=cn.Op.length(i);let u=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const h=i.insert;t.insertAt(r,h);const[m]=t.descendant(nr,r),f=an(m);u=cn.AttributeMap.diff(f,u)||{}}else if(typeof i.insert=="object"){const h=Object.keys(i.insert)[0];if(h==null)return r;if(t.insertAt(r,h,i.insert[h]),t.scroll.query(h,He.INLINE)!=null){const[f]=t.descendant(nr,r),p=an(f);u=cn.AttributeMap.diff(p,u)||{}}}}return Object.keys(u).forEach(h=>{t.formatAt(r,o,h,u[h])}),r+o},e)}const Dy={scope:He.BLOCK,whitelist:["right","center","justify"]},pF=new ga("align","align",Dy),rC=new Fn("align","ql-align",Dy),nC=new dl("align","text-align",Dy);class aC extends dl{value(e){let s=super.value(e);return s.startsWith("rgb(")?(s=s.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${s.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):s}}const gF=new Fn("color","ql-color",{scope:He.INLINE}),Ly=new aC("color","color",{scope:He.INLINE}),xF=new Fn("background","ql-bg",{scope:He.INLINE}),qy=new aC("background","background-color",{scope:He.INLINE});class _o extends wo{static create(e){const s=super.create(e);return s.setAttribute("spellcheck","false"),s}code(e,s){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+s)}html(e,s){return`<pre>
${Hf(this.code(e,s))}
</pre>`}}class dr extends Ws{static TAB="  ";static register(){be.register(_o)}}class Py extends ur{}Py.blotName="code";Py.tagName="CODE";dr.blotName="code-block";dr.className="ql-code-block";dr.tagName="DIV";_o.blotName="code-block-container";_o.className="ql-code-block-container";_o.tagName="DIV";_o.allowedChildren=[dr];dr.allowedChildren=[$n,Hn,An];dr.requiredContainer=_o;const Iy={scope:He.BLOCK,whitelist:["rtl"]},iC=new ga("direction","dir",Iy),lC=new Fn("direction","ql-direction",Iy),oC=new dl("direction","direction",Iy),cC={scope:He.INLINE,whitelist:["serif","monospace"]},uC=new Fn("font","ql-font",cC);class yF extends dl{value(e){return super.value(e).replace(/["']/g,"")}}const dC=new yF("font","font-family",cC),hC=new Fn("size","ql-size",{scope:He.INLINE,whitelist:["small","large","huge"]}),mC=new dl("size","font-size",{scope:He.INLINE,whitelist:["10px","18px","32px"]}),bF=oi("quill:keyboard"),vF=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Vf extends ba{static match(e,s){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!s[r]!==e[r]&&s[r]!==null)?!1:s.key===e.key||s.key===e.which}constructor(e,s){super(e,s),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=_F(e);if(i==null){bF.warn("Attempted to add invalid keyboard binding",i);return}typeof s=="function"&&(s={handler:s}),typeof r=="function"&&(r={handler:r}),(Array.isArray(i.key)?i.key:[i.key]).forEach(u=>{const h={...i,key:u,...s,...r};this.bindings[h.key]=this.bindings[h.key]||[],this.bindings[h.key].push(h)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const i=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(E=>Vf.match(e,E));if(i.length===0)return;const o=be.find(e.target,!0);if(o&&o.scroll!==this.quill.scroll)return;const u=this.quill.getSelection();if(u==null||!this.quill.hasFocus())return;const[h,m]=this.quill.getLine(u.index),[f,p]=this.quill.getLeaf(u.index),[x,b]=u.length===0?[f,p]:this.quill.getLeaf(u.index+u.length),j=f instanceof bf?f.value().slice(0,p):"",v=x instanceof bf?x.value().slice(b):"",S={collapsed:u.length===0,empty:u.length===0&&h.length()<=1,format:this.quill.getFormat(u),line:h,offset:m,prefix:j,suffix:v,event:e};i.some(E=>{if(E.collapsed!=null&&E.collapsed!==S.collapsed||E.empty!=null&&E.empty!==S.empty||E.offset!=null&&E.offset!==S.offset)return!1;if(Array.isArray(E.format)){if(E.format.every(A=>S.format[A]==null))return!1}else if(typeof E.format=="object"&&!Object.keys(E.format).every(A=>E.format[A]===!0?S.format[A]!=null:E.format[A]===!1?S.format[A]==null:Ty(E.format[A],S.format[A])))return!1;return E.prefix!=null&&!E.prefix.test(S.prefix)||E.suffix!=null&&!E.suffix.test(S.suffix)?!1:E.handler.call(this,u,S,E)!==!0})&&e.preventDefault()})}handleBackspace(e,s){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(s.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let i={};const[o]=this.quill.getLine(e.index);let u=new Fe().retain(e.index-r).delete(r);if(s.offset===0){const[h]=this.quill.getLine(e.index-1);if(h&&!(h.statics.blotName==="block"&&h.length()<=1)){const f=o.formats(),p=this.quill.getFormat(e.index-1,1);if(i=cn.AttributeMap.diff(f,p)||{},Object.keys(i).length>0){const x=new Fe().retain(e.index+o.length()-2).retain(1,i);u=u.compose(x)}}}this.quill.updateContents(u,be.sources.USER),this.quill.focus()}handleDelete(e,s){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(s.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let i={};const[o]=this.quill.getLine(e.index);let u=new Fe().retain(e.index).delete(r);if(s.offset>=o.length()-1){const[h]=this.quill.getLine(e.index+1);if(h){const m=o.formats(),f=this.quill.getFormat(e.index,1);i=cn.AttributeMap.diff(m,f)||{},Object.keys(i).length>0&&(u=u.retain(h.length()-1).retain(1,i))}}this.quill.updateContents(u,be.sources.USER),this.quill.focus()}handleDeleteRange(e){$y({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,s){const r=Object.keys(s.format).reduce((o,u)=>(this.quill.scroll.query(u,He.BLOCK)&&!Array.isArray(s.format[u])&&(o[u]=s.format[u]),o),{}),i=new Fe().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(i,be.sources.USER),this.quill.setSelection(e.index+1,be.sources.SILENT),this.quill.focus()}}const wF={bindings:{bold:k0("bold"),italic:k0("italic"),underline:k0("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",be.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",be.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",be.sources.USER):e.format.list!=null&&this.quill.format("list",!1,be.sources.USER)}},"indent code-block":u2(!0),"outdent code-block":u2(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,be.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const s=new Fe().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(s,be.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,be.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,be.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const s={list:!1};e.format.indent&&(s.indent=!1),this.quill.formatLine(t.index,t.length,s,be.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,s]=this.quill.getLine(t.index),r={...e.formats(),list:"checked"},i=new Fe().retain(t.index).insert(`
`,r).retain(e.length()-s-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,be.sources.USER),this.quill.setSelection(t.index+1,be.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[s,r]=this.quill.getLine(t.index),i=new Fe().retain(t.index).insert(`
`,e.format).retain(s.length()-r-1).retain(1,{header:null});this.quill.updateContents(i,be.sources.USER),this.quill.setSelection(t.index+1,be.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[s,r,i,o]=e.getTable(t),u=jF(s,r,i,o);if(u==null)return;let h=s.offset();if(u<0){const m=new Fe().retain(h).insert(`
`);this.quill.updateContents(m,be.sources.USER),this.quill.setSelection(t.index+1,t.length,be.sources.SILENT)}else if(u>0){h+=s.length();const m=new Fe().retain(h).insert(`
`);this.quill.updateContents(m,be.sources.USER),this.quill.setSelection(h,be.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:s,line:r}=e,i=r.offset(this.quill.scroll);s.shiftKey?this.quill.setSelection(i-1,be.sources.USER):this.quill.setSelection(i+r.length(),be.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:s}=e.prefix,[r,i]=this.quill.getLine(t.index);if(i>s)return!0;let o;switch(e.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(t.index," ",be.sources.USER),this.quill.history.cutoff();const u=new Fe().retain(t.index-i).delete(s+1).retain(r.length()-2-i).retain(1,{list:o});return this.quill.updateContents(u,be.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-s,be.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,s]=this.quill.getLine(t.index);let r=2,i=e;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,r-=1,r<=0){const o=new Fe().retain(t.index+e.length()-s-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(o,be.sources.USER),this.quill.setSelection(t.index-1,be.sources.SILENT),!1}return!0}},"embed left":Dm("ArrowLeft",!1),"embed left shift":Dm("ArrowLeft",!0),"embed right":Dm("ArrowRight",!1),"embed right shift":Dm("ArrowRight",!0),"table down":d2(!1),"table up":d2(!0)}};Vf.DEFAULTS=wF;function u2(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,s){let{event:r}=s;const i=this.quill.scroll.query("code-block"),{TAB:o}=i;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,o,be.sources.USER),this.quill.setSelection(e.index+o.length,be.sources.SILENT);return}const u=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:h,length:m}=e;u.forEach((f,p)=>{t?(f.insertAt(0,o),p===0?h+=o.length:m+=o.length):f.domNode.textContent.startsWith(o)&&(f.deleteAt(0,o.length),p===0?h-=o.length:m-=o.length)}),this.quill.update(be.sources.USER),this.quill.setSelection(h,m,be.sources.SILENT)}}}function Dm(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:i}=r;t==="ArrowRight"&&(i+=r.length+1);const[o]=this.quill.getLeaf(i);return o instanceof Vr?(t==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,be.sources.USER):this.quill.setSelection(r.index-1,be.sources.USER):e?this.quill.setSelection(r.index,r.length+1,be.sources.USER):this.quill.setSelection(r.index+r.length+1,be.sources.USER),!1):!0}}}function k0(t){return{key:t[0],shortKey:!0,handler(e,s){this.quill.format(t,!s.format[t],be.sources.USER)}}}function d2(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,s){const r=t?"prev":"next",i=s.line,o=i.parent[r];if(o!=null){if(o.statics.blotName==="table-row"){let u=o.children.head,h=i;for(;h.prev!=null;)h=h.prev,u=u.next;const m=u.offset(this.quill.scroll)+Math.min(s.offset,u.length()-1);this.quill.setSelection(m,0,be.sources.USER)}}else{const u=i.table()[r];u!=null&&(t?this.quill.setSelection(u.offset(this.quill.scroll)+u.length()-1,0,be.sources.USER):this.quill.setSelection(u.offset(this.quill.scroll),0,be.sources.USER))}return!1}}}function _F(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=Dc(t);else return null;return t.shortKey&&(t[vF]=t.shortKey,delete t.shortKey),t}function $y(t){let{quill:e,range:s}=t;const r=e.getLines(s);let i={};if(r.length>1){const o=r[0].formats(),u=r[r.length-1].formats();i=cn.AttributeMap.diff(u,o)||{}}e.deleteText(s,be.sources.USER),Object.keys(i).length>0&&e.formatLine(s.index,1,i,be.sources.USER),e.setSelection(s.index,be.sources.SILENT)}function jF(t,e,s,r){return e.prev==null&&e.next==null?s.prev==null&&s.next==null?r===0?-1:1:s.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const NF=/font-weight:\s*normal/,SF=["P","OL","UL"],h2=t=>t&&SF.includes(t.tagName),EF=t=>{Array.from(t.querySelectorAll("br")).filter(e=>h2(e.previousElementSibling)&&h2(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},CF=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(NF)).forEach(e=>{const s=t.createDocumentFragment();s.append(...e.childNodes),e.parentNode?.replaceChild(s,e)})};function AF(t){t.querySelector('[id^="docs-internal-guid-"]')&&(CF(t),EF(t))}const kF=/\bmso-list:[^;]*ignore/i,TF=/\bmso-list:[^;]*\bl(\d+)/i,OF=/\bmso-list:[^;]*\blevel(\d+)/i,RF=(t,e)=>{const s=t.getAttribute("style"),r=s?.match(TF);if(!r)return null;const i=Number(r[1]),o=s?.match(OF),u=o?Number(o[1]):1,h=new RegExp(`@list l${i}:level${u}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),m=e.match(h),f=m&&m[1]==="bullet"?"bullet":"ordered";return{id:i,indent:u,type:f,element:t}},MF=t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),s=[],r=[];e.forEach(u=>{(u.getAttribute("style")||"").match(kF)?s.push(u):r.push(u)}),s.forEach(u=>u.parentNode?.removeChild(u));const i=t.documentElement.innerHTML,o=r.map(u=>RF(u,i)).filter(u=>u);for(;o.length;){const u=[];let h=o.shift();for(;h;)u.push(h),h=o.length&&o[0]?.element===h.element.nextElementSibling&&o[0].id===h.id?o.shift():null;const m=document.createElement("ul");u.forEach(x=>{const b=document.createElement("li");b.setAttribute("data-list",x.type),x.indent>1&&b.setAttribute("class",`ql-indent-${x.indent-1}`),b.innerHTML=x.element.innerHTML,m.appendChild(b)});const f=u[0]?.element,{parentNode:p}=f??{};f&&p?.replaceChild(m,f),u.slice(1).forEach(x=>{let{element:b}=x;p?.removeChild(b)})}};function DF(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&MF(t)}const LF=[DF,AF],qF=t=>{t.documentElement&&LF.forEach(e=>{e(t)})},PF=oi("quill:clipboard"),IF=[[Node.TEXT_NODE,QF],[Node.TEXT_NODE,f2],["br",HF],[Node.ELEMENT_NODE,f2],[Node.ELEMENT_NODE,FF],[Node.ELEMENT_NODE,zF],[Node.ELEMENT_NODE,KF],["li",ZF],["ol, ul",YF],["pre",VF],["tr",WF],["b",T0("bold")],["i",T0("italic")],["strike",T0("strike")],["style",GF]],$F=[pF,iC].reduce((t,e)=>(t[e.keyName]=e,t),{}),m2=[nC,qy,Ly,oC,dC,mC].reduce((t,e)=>(t[e.keyName]=e,t),{});class UF extends ba{static DEFAULTS={matchers:[]};constructor(e,s){super(e,s),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],IF.concat(this.options.matchers??[]).forEach(r=>{let[i,o]=r;this.addMatcher(i,o)})}addMatcher(e,s){this.matchers.push([e,s])}convert(e){let{html:s,text:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[dr.blotName])return new Fe().insert(r||"",{[dr.blotName]:i[dr.blotName]});if(!s)return new Fe().insert(r||"",i);const o=this.convertHTML(s);return th(o,`
`)&&(o.ops[o.ops.length-1].attributes==null||i.table)?o.compose(new Fe().retain(o.length()-1).delete(1)):o}normalizeHTML(e){qF(e)}convertHTML(e){const s=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(s);const r=s.body,i=new WeakMap,[o,u]=this.prepareMatching(r,i);return Uy(this.quill.scroll,r,o,u,i)}dangerouslyPasteHTML(e,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:be.sources.API;if(typeof e=="string"){const i=this.convert({html:e,text:""});this.quill.setContents(i,s),this.quill.setSelection(0,be.sources.SILENT)}else{const i=this.convert({html:s,text:""});this.quill.updateContents(new Fe().retain(e).concat(i),r),this.quill.setSelection(e+i.length(),be.sources.SILENT)}}onCaptureCopy(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:i,text:o}=this.onCopy(r,s);e.clipboardData?.setData("text/plain",o),e.clipboardData?.setData("text/html",i),s&&$y({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(s=>s[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const s=this.quill.getSelection(!0);if(s==null)return;const r=e.clipboardData?.getData("text/html");let i=e.clipboardData?.getData("text/plain");if(!r&&!i){const u=e.clipboardData?.getData("text/uri-list");u&&(i=this.normalizeURIList(u))}const o=Array.from(e.clipboardData?.files||[]);if(!r&&o.length>0){this.quill.uploader.upload(s,o);return}if(r&&o.length>0){const u=new DOMParser().parseFromString(r,"text/html");if(u.body.childElementCount===1&&u.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(s,o);return}}this.onPaste(s,{html:r,text:i})}onCopy(e){const s=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:s}}onPaste(e,s){let{text:r,html:i}=s;const o=this.quill.getFormat(e.index),u=this.convert({text:r,html:i},o);PF.log("onPaste",u,{text:r,html:i});const h=new Fe().retain(e.index).delete(e.length).concat(u);this.quill.updateContents(h,be.sources.USER),this.quill.setSelection(h.length()-e.length,be.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,s){const r=[],i=[];return this.matchers.forEach(o=>{const[u,h]=o;switch(u){case Node.TEXT_NODE:i.push(h);break;case Node.ELEMENT_NODE:r.push(h);break;default:Array.from(e.querySelectorAll(u)).forEach(m=>{s.has(m)?s.get(m)?.push(h):s.set(m,[h])});break}}),[r,i]}}function jo(t,e,s,r){return r.query(e)?t.reduce((i,o)=>{if(!o.insert)return i;if(o.attributes&&o.attributes[e])return i.push(o);const u=s?{[e]:s}:{};return i.insert(o.insert,{...u,...o.attributes})},new Fe):t}function th(t,e){let s="";for(let r=t.ops.length-1;r>=0&&s.length<e.length;--r){const i=t.ops[r];if(typeof i.insert!="string")break;s=i.insert+s}return s.slice(-1*e.length)===e}function Xi(t,e){if(!(t instanceof Element))return!1;const s=e.query(t);return s&&s.prototype instanceof Vr?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function BF(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Xi(t.previousElementSibling,e)&&!Xi(t.nextElementSibling,e)}const Lm=new WeakMap;function fC(t){return t==null?!1:(Lm.has(t)||(t.tagName==="PRE"?Lm.set(t,!0):Lm.set(t,fC(t.parentNode))),Lm.get(t))}function Uy(t,e,s,r,i){return e.nodeType===e.TEXT_NODE?r.reduce((o,u)=>u(e,o,t),new Fe):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((o,u)=>{let h=Uy(t,u,s,r,i);return u.nodeType===e.ELEMENT_NODE&&(h=s.reduce((m,f)=>f(u,m,t),h),h=(i.get(u)||[]).reduce((m,f)=>f(u,m,t),h)),o.concat(h)},new Fe):new Fe}function T0(t){return(e,s,r)=>jo(s,t,!0,r)}function zF(t,e,s){const r=ga.keys(t),i=Fn.keys(t),o=dl.keys(t),u={};return r.concat(i).concat(o).forEach(h=>{let m=s.query(h,He.ATTRIBUTE);m!=null&&(u[m.attrName]=m.value(t),u[m.attrName])||(m=$F[h],m!=null&&(m.attrName===h||m.keyName===h)&&(u[m.attrName]=m.value(t)||void 0),m=m2[h],m!=null&&(m.attrName===h||m.keyName===h)&&(m=m2[h],u[m.attrName]=m.value(t)||void 0))}),Object.entries(u).reduce((h,m)=>{let[f,p]=m;return jo(h,f,p,s)},e)}function FF(t,e,s){const r=s.query(t);if(r==null)return e;if(r.prototype instanceof Vr){const i={},o=r.value(t);if(o!=null)return i[r.blotName]=o,new Fe().insert(i,r.formats(t,s))}else if(r.prototype instanceof Md&&!th(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return jo(e,r.blotName,r.formats(t,s),s);return e}function HF(t,e){return th(e,`
`)||e.insert(`
`),e}function VF(t,e,s){const r=s.query("code-block"),i=r&&"formats"in r&&typeof r.formats=="function"?r.formats(t,s):!0;return jo(e,"code-block",i,s)}function GF(){return new Fe}function ZF(t,e,s){const r=s.query(t);if(r==null||r.blotName!=="list"||!th(e,`
`))return e;let i=-1,o=t.parentNode;for(;o!=null;)["OL","UL"].includes(o.tagName)&&(i+=1),o=o.parentNode;return i<=0?e:e.reduce((u,h)=>h.insert?h.attributes&&typeof h.attributes.indent=="number"?u.push(h):u.insert(h.insert,{indent:i,...h.attributes||{}}):u,new Fe)}function YF(t,e,s){const r=t;let i=r.tagName==="OL"?"ordered":"bullet";const o=r.getAttribute("data-checked");return o&&(i=o==="true"?"checked":"unchecked"),jo(e,"list",i,s)}function f2(t,e,s){if(!th(e,`
`)){if(Xi(t,s)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let r=t.nextSibling;for(;r!=null;){if(Xi(r,s))return e.insert(`
`);const i=s.query(r);if(i&&i.prototype instanceof on)return e.insert(`
`);r=r.firstChild}}}return e}function KF(t,e,s){const r={},i=t.style||{};return i.fontStyle==="italic"&&(r.italic=!0),i.textDecoration==="underline"&&(r.underline=!0),i.textDecoration==="line-through"&&(r.strike=!0),(i.fontWeight?.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((o,u)=>{let[h,m]=u;return jo(o,h,m,s)},e),parseFloat(i.textIndent||0)>0?new Fe().insert("	").concat(e):e}function WF(t,e,s){const r=t.parentElement?.tagName==="TABLE"?t.parentElement:t.parentElement?.parentElement;if(r!=null){const o=Array.from(r.querySelectorAll("tr")).indexOf(t)+1;return jo(e,"table",o,s)}return e}function QF(t,e,s){let r=t.data;if(t.parentElement?.tagName==="O:P")return e.insert(r.trim());if(!fC(t)){if(r.trim().length===0&&r.includes(`
`)&&!BF(t,s))return e;const i=(o,u)=>{const h=u.replace(/[^\u00a0]/g,"");return h.length<1&&o?" ":h};r=r.replace(/\r\n/g," ").replace(/\n/g," "),r=r.replace(/\s\s+/g,i.bind(i,!0)),(t.previousSibling==null&&t.parentElement!=null&&Xi(t.parentElement,s)||t.previousSibling instanceof Element&&Xi(t.previousSibling,s))&&(r=r.replace(/^\s+/,i.bind(i,!1))),(t.nextSibling==null&&t.parentElement!=null&&Xi(t.parentElement,s)||t.nextSibling instanceof Element&&Xi(t.nextSibling,s))&&(r=r.replace(/\s+$/,i.bind(i,!1)))}return e.insert(r)}class XF extends ba{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,s){super(e,s),this.quill.on(be.events.EDITOR_CHANGE,(r,i,o,u)=>{r===be.events.SELECTION_CHANGE?i&&u!==be.sources.SILENT&&(this.currentRange=i):r===be.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||u===be.sources.USER?this.record(i,o):this.transform(i)),this.currentRange=Cx(this.currentRange,i))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{r.inputType==="historyUndo"?(this.undo(),r.preventDefault()):r.inputType==="historyRedo"&&(this.redo(),r.preventDefault())})}change(e,s){if(this.stack[e].length===0)return;const r=this.stack[e].pop();if(!r)return;const i=this.quill.getContents(),o=r.delta.invert(i);this.stack[s].push({delta:o,range:Cx(r.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,be.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,s){if(e.ops.length===0)return;this.stack.redo=[];let r=e.invert(s),i=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const u=this.stack.undo.pop();u&&(r=r.compose(u.delta),i=u.range)}else this.lastRecorded=o;r.length()!==0&&(this.stack.undo.push({delta:r,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){p2(this.stack.undo,e),p2(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,be.sources.USER);else{const s=eH(this.quill.scroll,e.delta);this.quill.setSelection(s,be.sources.USER)}}}function p2(t,e){let s=e;for(let r=t.length-1;r>=0;r-=1){const i=t[r];t[r]={delta:s.transform(i.delta,!0),range:i.range&&Cx(i.range,s)},s=i.delta.transform(s),t[r].delta.length()===0&&t.splice(r,1)}}function JF(t,e){const s=e.ops[e.ops.length-1];return s==null?!1:s.insert!=null?typeof s.insert=="string"&&s.insert.endsWith(`
`):s.attributes!=null?Object.keys(s.attributes).some(r=>t.query(r,He.BLOCK)!=null):!1}function eH(t,e){const s=e.reduce((i,o)=>i+(o.delete||0),0);let r=e.length()-s;return JF(t,e)&&(r-=1),r}function Cx(t,e){if(!t)return t;const s=e.transformPosition(t.index),r=e.transformPosition(t.index+t.length);return{index:s,length:r-s}}class pC extends ba{constructor(e,s){super(e,s),e.root.addEventListener("drop",r=>{r.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const u=document.caretPositionFromPoint(r.clientX,r.clientY);i=document.createRange(),i.setStart(u.offsetNode,u.offset),i.setEnd(u.offsetNode,u.offset)}const o=i&&e.selection.normalizeNative(i);if(o){const u=e.selection.normalizedToRange(o);r.dataTransfer?.files&&this.upload(u,r.dataTransfer.files)}})}upload(e,s){const r=[];Array.from(s).forEach(i=>{i&&this.options.mimetypes?.includes(i.type)&&r.push(i)}),r.length>0&&this.options.handler.call(this,e,r)}}pC.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const s=e.map(r=>new Promise(i=>{const o=new FileReader;o.onload=()=>{i(o.result)},o.readAsDataURL(r)}));Promise.all(s).then(r=>{const i=r.reduce((o,u)=>o.insert({image:u}),new Fe().retain(t.index).delete(t.length));this.quill.updateContents(i,ze.sources.USER),this.quill.setSelection(t.index+r.length,ze.sources.SILENT)})}};const tH=["insertText","insertReplacementText"];class sH extends ba{constructor(e,s){super(e,s),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(be.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){$y({range:e,quill:this.quill})}replaceText(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(s){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Fe().retain(e.index).insert(s,r),be.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+s.length,0,be.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!tH.includes(e.inputType))return;const s=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!s||s.collapsed===!0)return;const r=rH(e);if(r==null)return;const i=this.quill.selection.normalizeNative(s),o=i?this.quill.selection.normalizedToRange(i):null;o&&this.replaceText(o,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function rH(t){return typeof t.data=="string"?t.data:t.dataTransfer?.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const nH=/Mac/i.test(navigator.platform),aH=100,iH=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||nH&&t.key==="a"&&t.ctrlKey===!0);class lH extends ba{isListening=!1;selectionChangeDeadline=0;constructor(e,s){super(e,s),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,s){let{line:r,event:i}=s;if(!(r instanceof Pn)||!r.uiNode)return!0;const o=getComputedStyle(r.domNode).direction==="rtl";return o&&i.key!=="ArrowRight"||!o&&i.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(i.shiftKey?1:0),be.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&iH(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+aH,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const s=e.getRangeAt(0);if(s.collapsed!==!0||s.startOffset!==0)return;const r=this.quill.scroll.find(s.startContainer);if(!(r instanceof Pn)||!r.uiNode)return;const i=document.createRange();i.setStartAfter(r.uiNode),i.setEndAfter(r.uiNode),e.removeAllRanges(),e.addRange(i)}}be.register({"blots/block":Ws,"blots/block/embed":on,"blots/break":Hn,"blots/container":wo,"blots/cursor":An,"blots/embed":My,"blots/inline":ur,"blots/scroll":fF,"blots/text":$n,"modules/clipboard":UF,"modules/history":XF,"modules/keyboard":Vf,"modules/uploader":pC,"modules/input":sH,"modules/uiNode":lH});class oH extends Fn{add(e,s){let r=0;if(s==="+1"||s==="-1"){const i=this.value(e)||0;r=s==="+1"?i+1:i-1}else typeof s=="number"&&(r=s);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,s){return super.canAdd(e,s)||super.canAdd(e,parseInt(s,10))}value(e){return parseInt(super.value(e),10)||void 0}}const cH=new oH("indent","ql-indent",{scope:He.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class uH extends Ws{static blotName="blockquote";static tagName="blockquote"}class dH extends Ws{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class sh extends wo{}sh.blotName="list-container";sh.tagName="OL";class rh extends Ws{static create(e){const s=super.create();return s.setAttribute("data-list",e),s}static formats(e){return e.getAttribute("data-list")||void 0}static register(){be.register(sh)}constructor(e,s){super(e,s);const r=s.ownerDocument.createElement("span"),i=o=>{if(!e.isEnabled())return;const u=this.statics.formats(s,e);u==="checked"?(this.format("list","unchecked"),o.preventDefault()):u==="unchecked"&&(this.format("list","checked"),o.preventDefault())};r.addEventListener("mousedown",i),r.addEventListener("touchstart",i),this.attachUI(r)}format(e,s){e===this.statics.blotName&&s?this.domNode.setAttribute("data-list",s):super.format(e,s)}}rh.blotName="list";rh.tagName="LI";sh.allowedChildren=[rh];rh.requiredContainer=sh;class By extends ur{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class hH extends By{static blotName="italic";static tagName=["EM","I"]}class vf extends ur{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const s=super.create(e);return s.setAttribute("href",this.sanitize(e)),s.setAttribute("rel","noopener noreferrer"),s.setAttribute("target","_blank"),s}static formats(e){return e.getAttribute("href")}static sanitize(e){return gC(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,s){e!==this.statics.blotName||!s?super.format(e,s):this.domNode.setAttribute("href",this.constructor.sanitize(s))}}function gC(t,e){const s=document.createElement("a");s.href=t;const r=s.href.slice(0,s.href.indexOf(":"));return e.indexOf(r)>-1}class mH extends ur{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class fH extends By{static blotName="strike";static tagName=["S","STRIKE"]}class pH extends ur{static blotName="underline";static tagName="U"}class gH extends My{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const s=super.create(e);return typeof e=="string"&&(window.katex.render(e,s,{throwOnError:!1,errorColor:"#f00"}),s.setAttribute("data-value",e)),s}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const g2=["alt","height","width"];class xH extends Vr{static blotName="image";static tagName="IMG";static create(e){const s=super.create(e);return typeof e=="string"&&s.setAttribute("src",this.sanitize(e)),s}static formats(e){return g2.reduce((s,r)=>(e.hasAttribute(r)&&(s[r]=e.getAttribute(r)),s),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return gC(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,s){g2.indexOf(e)>-1?s?this.domNode.setAttribute(e,s):this.domNode.removeAttribute(e):super.format(e,s)}}const x2=["height","width"];class yH extends on{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const s=super.create(e);return s.setAttribute("frameborder","0"),s.setAttribute("allowfullscreen","true"),s.setAttribute("src",this.sanitize(e)),s}static formats(e){return x2.reduce((s,r)=>(e.hasAttribute(r)&&(s[r]=e.getAttribute(r)),s),{})}static sanitize(e){return vf.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,s){x2.indexOf(e)>-1?s?this.domNode.setAttribute(e,s):this.domNode.removeAttribute(e):super.format(e,s)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const fd=new Fn("code-token","hljs",{scope:He.INLINE});class ii extends ur{static formats(e,s){for(;e!=null&&e!==s.domNode;){if(e.classList&&e.classList.contains(dr.className))return super.formats(e,s);e=e.parentNode}}constructor(e,s,r){super(e,s,r),fd.add(this.domNode,r)}format(e,s){e!==ii.blotName?super.format(e,s):s?fd.add(this.domNode,s):(fd.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),fd.value(this.domNode)||this.unwrap()}}ii.blotName="code-token";ii.className="ql-token";class ln extends dr{static create(e){const s=super.create(e);return typeof e=="string"&&s.setAttribute("data-language",e),s}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,s){e===this.statics.blotName&&s?this.domNode.setAttribute("data-language",s):super.format(e,s)}replaceWith(e,s){return this.formatAt(0,this.length(),ii.blotName,!1),super.replaceWith(e,s)}}class wd extends _o{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,s){e===ln.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,s)}))}formatAt(e,s,r,i){r===ln.blotName&&(this.forceNext=!0),super.formatAt(e,s,r,i)}highlight(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(u=>u!==this.uiNode).map(u=>u.textContent).join(`
`)}
`,o=ln.formats(this.children.head.domNode);if(s||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const u=this.children.reduce((m,f)=>m.concat(tC(f,!1)),new Fe),h=e(i,o);u.diff(h).reduce((m,f)=>{let{retain:p,attributes:x}=f;return p?(x&&Object.keys(x).forEach(b=>{[ln.blotName,ii.blotName].includes(b)&&this.formatAt(m,p,b,x[b])}),m+p):m},0)}this.cachedText=i,this.forceNext=!1}}html(e,s){const[r]=this.children.find(e);return`<pre data-language="${r?ln.formats(r.domNode):"plain"}">
${Hf(this.code(e,s))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const s=ln.formats(this.children.head.domNode);s!==this.uiNode.value&&(this.uiNode.value=s)}}}wd.allowedChildren=[ln];ln.requiredContainer=wd;ln.allowedChildren=[ii,An,$n,Hn];const bH=(t,e,s)=>{if(typeof t.versionString=="string"){const r=t.versionString.split(".")[0];if(parseInt(r,10)>=11)return t.highlight(s,{language:e}).value}return t.highlight(e,s).value};class xC extends ba{static register(){be.register(ii,!0),be.register(ln,!0),be.register(wd,!0)}constructor(e,s){if(super(e,s),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,i)=>{let{key:o}=i;return r[o]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(be.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof wd))return;const s=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:i,label:o}=r;const u=s.ownerDocument.createElement("option");u.textContent=o,u.setAttribute("value",i),s.appendChild(u)}),s.addEventListener("change",()=>{e.format(ln.blotName,s.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(s),e.children.head&&(s.value=ln.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(be.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(be.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(wd):[e]).forEach(o=>{o.highlight(this.highlightBlot,s)}),this.quill.update(be.sources.SILENT),r!=null&&this.quill.setSelection(r,be.sources.SILENT)}highlightBlot(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(s=this.languages[s]?s:"plain",s==="plain")return Hf(e).split(`
`).reduce((i,o,u)=>(u!==0&&i.insert(`
`,{[dr.blotName]:s}),i.insert(o)),new Fe);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(dr.className),r.innerHTML=bH(this.options.hljs,s,e),Uy(this.quill.scroll,r,[(i,o)=>{const u=fd.value(i);return u?o.compose(new Fe().retain(o.length(),{[ii.blotName]:u})):o}],[(i,o)=>i.data.split(`
`).reduce((u,h,m)=>(m!==0&&u.insert(`
`,{[dr.blotName]:s}),u.insert(h)),o)],new WeakMap)}}xC.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class On extends Ws{static blotName="table";static tagName="TD";static create(e){const s=super.create();return e?s.setAttribute("data-row",e):s.setAttribute("data-row",zy()),s}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,s){e===On.blotName&&s?this.domNode.setAttribute("data-row",s):super.format(e,s)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class oo extends wo{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),s=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.table===s.table&&e.table===r.table&&e.table===i.table}return!1}optimize(e){super.optimize(e),this.children.forEach(s=>{if(s.next==null)return;const r=s.formats(),i=s.next.formats();if(r.table!==i.table){const o=this.splitAfter(s);o&&o.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class tl extends wo{static blotName="table-body";static tagName="TBODY"}class wf extends wo{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(oo),s=e.reduce((r,i)=>Math.max(i.children.length,r),0);e.forEach(r=>{new Array(s-r.children.length).fill(0).forEach(()=>{let i;r.children.head!=null&&(i=On.formats(r.children.head.domNode));const o=this.scroll.create(On.blotName,i);r.appendChild(o),o.optimize()})})}cells(e){return this.rows().map(s=>s.children.at(e))}deleteColumn(e){const[s]=this.descendant(tl);s==null||s.children.head==null||s.children.forEach(r=>{const i=r.children.at(e);i?.remove()})}insertColumn(e){const[s]=this.descendant(tl);s==null||s.children.head==null||s.children.forEach(r=>{const i=r.children.at(e),o=On.formats(r.children.head.domNode),u=this.scroll.create(On.blotName,o);r.insertBefore(u,i)})}insertRow(e){const[s]=this.descendant(tl);if(s==null||s.children.head==null)return;const r=zy(),i=this.scroll.create(oo.blotName);s.children.head.children.forEach(()=>{const u=this.scroll.create(On.blotName,r);i.appendChild(u)});const o=s.children.at(e);s.insertBefore(i,o)}rows(){const e=this.children.head;return e==null?[]:e.children.map(s=>s)}}wf.allowedChildren=[tl];tl.requiredContainer=wf;tl.allowedChildren=[oo];oo.requiredContainer=tl;oo.allowedChildren=[On];On.requiredContainer=oo;function zy(){return`row-${Math.random().toString(36).slice(2,6)}`}class vH extends ba{static register(){be.register(On),be.register(oo),be.register(tl),be.register(wf)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(wf).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,s]=this.getTable();s!=null&&(e.deleteColumn(s.cellOffset()),this.quill.update(be.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(be.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const s=e.offset();e.remove(),this.quill.update(be.sources.USER),this.quill.setSelection(s,be.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[s,r]=this.quill.getLine(e.index);if(s==null||s.statics.blotName!==On.blotName)return[null,null,null,-1];const i=s.parent;return[i.parent.parent,i,s,r]}insertColumn(e){const s=this.quill.getSelection();if(!s)return;const[r,i,o]=this.getTable(s);if(o==null)return;const u=o.cellOffset();r.insertColumn(u+e),this.quill.update(be.sources.USER);let h=i.rowOffset();e===0&&(h+=1),this.quill.setSelection(s.index+h,s.length,be.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const s=this.quill.getSelection();if(!s)return;const[r,i,o]=this.getTable(s);if(o==null)return;const u=i.rowOffset();r.insertRow(u+e),this.quill.update(be.sources.USER),e>0?this.quill.setSelection(s,be.sources.SILENT):this.quill.setSelection(s.index+i.children.length,s.length,be.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,s){const r=this.quill.getSelection();if(r==null)return;const i=new Array(e).fill(0).reduce(o=>{const u=new Array(s).fill(`
`).join("");return o.insert(u,{table:zy()})},new Fe().retain(r.index));this.quill.updateContents(i,be.sources.USER),this.quill.setSelection(r.index,be.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(be.events.SCROLL_OPTIMIZE,e=>{e.some(s=>["TD","TR","TBODY","TABLE"].includes(s.target.tagName)?(this.quill.once(be.events.TEXT_CHANGE,(r,i,o)=>{o===be.sources.USER&&this.balanceTables()}),!0):!1)})}}const y2=oi("quill:toolbar");class Fy extends ba{constructor(e,s){if(super(e,s),Array.isArray(this.options.container)){const r=document.createElement("div");r.setAttribute("role","toolbar"),wH(r,this.options.container),e.container?.parentNode?.insertBefore(r,e.container),this.container=r}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){y2.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(r=>{const i=this.options.handlers?.[r];i&&this.addHandler(r,i)}),Array.from(this.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)}),this.quill.on(be.events.EDITOR_CHANGE,()=>{const[r]=this.quill.selection.getRange();this.update(r)})}addHandler(e,s){this.handlers[e]=s}attach(e){let s=Array.from(e.classList).find(i=>i.indexOf("ql-")===0);if(!s)return;if(s=s.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[s]==null&&this.quill.scroll.query(s)==null){y2.warn("ignoring attaching to nonexistent format",s,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,i=>{let o;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const h=e.options[e.selectedIndex];h.hasAttribute("selected")?o=!1:o=h.value||!1}else e.classList.contains("ql-active")?o=!1:o=e.value||!e.hasAttribute("value"),i.preventDefault();this.quill.focus();const[u]=this.quill.selection.getRange();if(this.handlers[s]!=null)this.handlers[s].call(this,o);else if(this.quill.scroll.query(s).prototype instanceof Vr){if(o=prompt(`Enter ${s}`),!o)return;this.quill.updateContents(new Fe().retain(u.index).delete(u.length).insert({[s]:o}),be.sources.USER)}else this.quill.format(s,o,be.sources.USER);this.update(u)}),this.controls.push([s,e])}update(e){const s=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[i,o]=r;if(o.tagName==="SELECT"){let u=null;if(e==null)u=null;else if(s[i]==null)u=o.querySelector("option[selected]");else if(!Array.isArray(s[i])){let h=s[i];typeof h=="string"&&(h=h.replace(/"/g,'\\"')),u=o.querySelector(`option[value="${h}"]`)}u==null?(o.value="",o.selectedIndex=-1):u.selected=!0}else if(e==null)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){const u=s[i],h=u===o.getAttribute("value")||u!=null&&u.toString()===o.getAttribute("value")||u==null&&!o.getAttribute("value");o.classList.toggle("ql-active",h),o.setAttribute("aria-pressed",h.toString())}else{const u=s[i]!=null;o.classList.toggle("ql-active",u),o.setAttribute("aria-pressed",u.toString())}})}}Fy.DEFAULTS={};function b2(t,e,s){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),s!=null?(r.value=s,r.setAttribute("aria-label",`${e}: ${s}`)):r.setAttribute("aria-label",e),t.appendChild(r)}function wH(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(s=>{const r=document.createElement("span");r.classList.add("ql-formats"),s.forEach(i=>{if(typeof i=="string")b2(r,i);else{const o=Object.keys(i)[0],u=i[o];Array.isArray(u)?_H(r,o,u):b2(r,o,u)}}),t.appendChild(r)})}function _H(t,e,s){const r=document.createElement("select");r.classList.add(`ql-${e}`),s.forEach(i=>{const o=document.createElement("option");i!==!1?o.setAttribute("value",String(i)):o.setAttribute("selected","selected"),r.appendChild(o)}),t.appendChild(r)}Fy.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(s=>{this.quill.scroll.query(s,He.INLINE)!=null&&this.quill.format(s,!1,be.sources.USER)})}else this.quill.removeFormat(t.index,t.length,be.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",be.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,be.sources.USER),this.quill.format("direction",t,be.sources.USER)},indent(t){const e=this.quill.getSelection(),s=this.quill.getFormat(e),r=parseInt(s.indent||0,10);if(t==="+1"||t==="-1"){let i=t==="+1"?1:-1;s.direction==="rtl"&&(i*=-1),this.quill.format("indent",r+i,be.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,be.sources.USER)},list(t){const e=this.quill.getSelection(),s=this.quill.getFormat(e);t==="check"?s.list==="checked"||s.list==="unchecked"?this.quill.format("list",!1,be.sources.USER):this.quill.format("list","unchecked",be.sources.USER):this.quill.format("list",t,be.sources.USER)}}};const jH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',NH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',SH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',EH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',CH='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',AH='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',kH='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',TH='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',v2='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',OH='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',RH='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',MH='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',DH='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',LH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',qH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',PH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',IH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',$H='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',UH='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',BH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',zH='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',FH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',HH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',VH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',GH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',ZH='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',YH='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',KH='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',WH='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',QH='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',XH='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',JH='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',eV='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Ld={align:{"":jH,center:NH,right:SH,justify:EH},background:CH,blockquote:AH,bold:kH,clean:TH,code:v2,"code-block":v2,color:OH,direction:{"":RH,rtl:MH},formula:DH,header:{1:LH,2:qH,3:PH,4:IH,5:$H,6:UH},italic:BH,image:zH,indent:{"+1":FH,"-1":HH},link:VH,list:{bullet:GH,check:ZH,ordered:YH},script:{sub:KH,super:WH},strike:QH,table:XH,underline:JH,video:eV},tV='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let w2=0;function _2(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class Gf{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),s.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),_2(this.label,"aria-expanded"),_2(this.options,"aria-hidden")}buildItem(e){const s=document.createElement("span");s.tabIndex="0",s.setAttribute("role","button"),s.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&s.setAttribute("data-value",r),e.textContent&&s.setAttribute("data-label",e.textContent),s.addEventListener("click",()=>{this.selectItem(s,!0)}),s.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(s,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),s}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=tV,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${w2}`,w2+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(s=>{const r=this.buildItem(s);e.appendChild(r),s.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),s&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const s=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",s)}}class yC extends Gf{constructor(e,s){super(e),this.label.innerHTML=s,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const s=super.buildItem(e);return s.style.backgroundColor=e.getAttribute("value")||"",s}selectItem(e,s){super.selectItem(e,s);const r=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=i:r.style.fill=i)}}class bC extends Gf{constructor(e,s){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=s[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,s){super.selectItem(e,s);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const sV=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class vC{constructor(e,s){this.quill=e,this.boundsContainer=s||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,sV(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const s=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${s}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect();let u=0;if(o.right>i.right&&(u=i.right-o.right,this.root.style.left=`${s+u}px`),o.left<i.left&&(u=i.left-o.left,this.root.style.left=`${s+u}px`),o.bottom>i.bottom){const h=o.bottom-o.top,m=e.bottom-e.top+h;this.root.style.top=`${r-m}px`,this.root.classList.add("ql-flip")}return u}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const rV=[!1,"center","right","justify"],nV=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],aV=[!1,"serif","monospace"],iV=["1","2","3",!1],lV=["small",!1,"large","huge"];class nh extends eu{constructor(e,s){super(e,s);const r=i=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(o=>{o.container.contains(i.target)||o.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const s=super.addModule(e);return e==="toolbar"&&this.extendToolbar(s),s}buildButtons(e,s){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(o=>{if(o.startsWith("ql-")&&(o=o.slice(3),s[o]!=null))if(o==="direction")r.innerHTML=s[o][""]+s[o].rtl;else if(typeof s[o]=="string")r.innerHTML=s[o];else{const u=r.value||"";u!=null&&s[o][u]&&(r.innerHTML=s[o][u])}})})}buildPickers(e,s){this.pickers=Array.from(e).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&cd(i,rV),typeof s.align=="object"))return new bC(i,s.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const o=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&cd(i,nV,o==="background"?"#ffffff":"#000000"),new yC(i,s[o])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?cd(i,aV):i.classList.contains("ql-header")?cd(i,iV):i.classList.contains("ql-size")&&cd(i,lV)),new Gf(i)});const r=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(ze.events.EDITOR_CHANGE,r)}}nh.DEFAULTS=el({},eu.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class wC extends vC{constructor(e,s){super(e,s),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;s!=null?this.textbox.value=s:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:s}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,ze.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,ze.sources.USER)),this.quill.root.scrollTop=s;break}case"video":e=oV(e);case"formula":{if(!e)break;const s=this.quill.getSelection(!0);if(s!=null){const r=s.index+s.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,ze.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",ze.sources.USER),this.quill.setSelection(r+2,ze.sources.USER)}break}}this.textbox.value="",this.hide()}}function oV(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function cd(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const i=document.createElement("option");r===s?i.setAttribute("selected","selected"):i.setAttribute("value",String(r)),t.appendChild(i)})}const cV=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class uV extends wC{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,s){super(e,s),this.quill.on(ze.events.EDITOR_CHANGE,(r,i,o,u)=>{if(r===ze.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&u===ze.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const h=this.quill.getLines(i.index,i.length);if(h.length===1){const m=this.quill.getBounds(i);m!=null&&this.position(m)}else{const m=h[h.length-1],f=this.quill.getIndex(m),p=Math.min(m.length()-1,i.index+i.length-f),x=this.quill.getBounds(new lo(f,p));x!=null&&this.position(x)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(ze.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const s=this.quill.getBounds(e);s!=null&&this.position(s)}},1)})}cancel(){this.show()}position(e){const s=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",s!==0&&(r.style.marginLeft=`${-1*s-r.offsetWidth/2}px`),s}}class _C extends nh{constructor(e,s){s.modules.toolbar!=null&&s.modules.toolbar.container==null&&(s.modules.toolbar.container=cV),super(e,s),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new uV(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),Ld),this.buildPickers(e.container.querySelectorAll("select"),Ld))}}_C.DEFAULTS=el({},nh.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,be.sources.USER)}}}}});const dV=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class hV extends wC{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const s=this.linkRange;this.restoreFocus(),this.quill.formatText(s,"link",!1,ze.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(ze.events.SELECTION_CHANGE,(e,s,r)=>{if(e!=null){if(e.length===0&&r===ze.sources.USER){const[i,o]=this.quill.scroll.descendant(vf,e.index);if(i!=null){this.linkRange=new lo(e.index-o,i.length());const u=vf.formats(i.domNode);this.preview.textContent=u,this.preview.setAttribute("href",u),this.show();const h=this.quill.getBounds(this.linkRange);h!=null&&this.position(h);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class jC extends nh{constructor(e,s){s.modules.toolbar!=null&&s.modules.toolbar.container==null&&(s.modules.toolbar.container=dV),super(e,s),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),Ld),this.buildPickers(e.container.querySelectorAll("select"),Ld),this.tooltip=new hV(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(s,r)=>{e.handlers.link.call(e,!r.format.link)}))}}jC.DEFAULTS=el({},nh.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let s=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(s)&&s.indexOf("mailto:")!==0&&(s=`mailto:${s}`);const{tooltip:r}=this.quill.theme;r.edit("link",s)}else this.quill.format("link",!1,be.sources.USER)}}}}});be.register({"attributors/attribute/direction":iC,"attributors/class/align":rC,"attributors/class/background":xF,"attributors/class/color":gF,"attributors/class/direction":lC,"attributors/class/font":uC,"attributors/class/size":hC,"attributors/style/align":nC,"attributors/style/background":qy,"attributors/style/color":Ly,"attributors/style/direction":oC,"attributors/style/font":dC,"attributors/style/size":mC},!0);be.register({"formats/align":rC,"formats/direction":lC,"formats/indent":cH,"formats/background":qy,"formats/color":Ly,"formats/font":uC,"formats/size":hC,"formats/blockquote":uH,"formats/code-block":dr,"formats/header":dH,"formats/list":rh,"formats/bold":By,"formats/code":Py,"formats/italic":hH,"formats/link":vf,"formats/script":mH,"formats/strike":fH,"formats/underline":pH,"formats/formula":gH,"formats/image":xH,"formats/video":yH,"modules/syntax":xC,"modules/table":vH,"modules/toolbar":Fy,"themes/bubble":_C,"themes/snow":jC,"ui/icons":Ld,"ui/picker":Gf,"ui/icon-picker":bC,"ui/color-picker":yC,"ui/tooltip":vC},!0);const mV=be.import("formats/list");class ah extends mV{static create(e){const s=super.create(e);if(e==="bullet"&&s.tagName==="OL"){const r=document.createElement("UL");return r.innerHTML=s.innerHTML,r}return s}}ah.blotName="list";ah.tagName=["OL","UL"];ah.defaultChild="list-item";ah.allowedChildren=["list-item"];be.register(ah,!0);function fV({content:t,onChange:e,placeholder:s="Start typing...",height:r="200px",enableDebugLogs:i=!1}){const o=M.useRef(null),u=M.useRef(null),[h,m]=M.useState(!1),f=M.useRef(null),p=M.useRef(!1),x=M.useCallback((j,v)=>{i&&console.log(`[QuillBulletFix] ${j}`,v||"")},[i]),b=M.useCallback(async j=>{try{if(m(!0),x("Starting image upload",{fileName:j.name}),!j.type.startsWith("image/"))throw new Error("Please select an image file");if(j.size>5*1024*1024)throw new Error("Image size must be less than 5MB");const v=j.name.split(".").pop(),_=`editor-images/${`${Date.now()}_${Math.random().toString(36).substr(2,9)}.${v}`}`,{data:E,error:A}=await V.storage.from("media").upload(_,j,{contentType:j.type,cacheControl:"3600"});if(A)throw A;const{data:{publicUrl:O}}=V.storage.from("media").getPublicUrl(_);if(u.current){const F=u.current.getSelection()||{index:0};u.current.insertEmbed(F.index,"image",O),u.current.setSelection(F.index+1)}ae("success","Image uploaded successfully")}catch(v){x("Image upload failed",v),ae("error",v.message||"Failed to upload image")}finally{m(!1),f.current&&(f.current.value="")}},[x]);return M.useEffect(()=>{if(!o.current||u.current)return;x("Initializing Quill editor with bullet fix");const j=new be(o.current,{theme:"snow",placeholder:s,modules:{toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"bullet"},{list:"ordered"}],["link","image"],[{color:[]},{background:[]}],["clean"]],handlers:{image:()=>f.current?.click(),list:function(v){j.getSelection()&&(v==="bullet"?(j.format("list","bullet"),setTimeout(()=>{j.root.querySelectorAll("ol").forEach(E=>{if(E.querySelectorAll('li[data-list="bullet"]').length>0){const O=document.createElement("ul");for(;E.firstChild;)O.appendChild(E.firstChild);E.parentNode?.replaceChild(O,E)}})},0)):j.format("list",v))}}}}});return t&&t!=="<p><br></p>"&&(j.root.innerHTML=t),j.on("text-change",()=>{if(p.current){p.current=!1;return}const v=j.root.innerHTML;x("Text changed",{preview:v.substring(0,100)}),e(v==="<p><br></p>"?"":v)}),j.root.addEventListener("paste",async v=>{const S=v.clipboardData?.items;if(S){for(const _ of S)if(_.type.startsWith("image/")){v.preventDefault();const E=_.getAsFile();E&&await b(E)}}}),u.current=j,()=>{j.off("text-change")}},[]),M.useEffect(()=>{if(!u.current||p.current){p.current=!1;return}const j=u.current.root.innerHTML;j===t||(!j||j==="<p><br></p>")&&(!t||t==="<p><br></p>"||t==="")||(x("Updating content from prop",{old:j?.substring(0,50),new:t?.substring(0,50)}),p.current=!0,setTimeout(()=>{u.current&&(u.current.root.innerHTML=t||"",p.current=!1)},0))},[t,x]),n.jsxs("div",{className:"quill-bullet-fix-wrapper relative",children:[n.jsx("input",{ref:f,type:"file",accept:"image/*",className:"hidden",onChange:j=>{const v=j.target.files?.[0];v&&b(v)}}),h&&n.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center z-50 rounded-md",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5 animate-spin"}),n.jsx("span",{children:"Uploading image..."})]})}),n.jsx("div",{ref:o,style:{height:r},className:"bg-white"}),n.jsx("style",{children:`
        /* FIX DOUBLE BULLETS - Hide the .ql-ui::before bullet since we have ::marker working */
        .quill-bullet-fix-wrapper .ql-editor ul {
          list-style-type: disc !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor ul li {
          list-style-type: disc !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor li[data-list="bullet"] {
          list-style-type: disc !important;
        }
        
        /* HIDE THE QUILL UI for bullets - We're using native ::marker now */
        .quill-bullet-fix-wrapper .ql-editor li[data-list="bullet"] > .ql-ui {
          display: none !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor li[data-list="bullet"] > .ql-ui::before {
          content: none !important;
          display: none !important;
        }
        
        /* FIX ORDERED LISTS - Use native numbering */
        .quill-bullet-fix-wrapper .ql-editor ol {
          list-style-type: decimal !important;
          counter-reset: none !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor ol li {
          list-style-type: decimal !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor li[data-list="ordered"] {
          list-style-type: decimal !important;
        }
        
        /* HIDE THE QUILL UI for ordered lists too */
        .quill-bullet-fix-wrapper .ql-editor li[data-list="ordered"] > .ql-ui {
          display: none !important;
        }
        
        .quill-bullet-fix-wrapper .ql-editor li[data-list="ordered"] > .ql-ui::before {
          content: none !important;
          display: none !important;
        }
        
        .quill-bullet-fix-wrapper .ql-toolbar {
          border: 1px solid #e5e7eb;
          border-bottom: none;
          border-radius: 0.375rem 0.375rem 0 0;
          background: #f9fafb;
        }
        
        .quill-bullet-fix-wrapper .ql-container {
          border: 1px solid #e5e7eb;
          border-radius: 0 0 0.375rem 0.375rem;
          font-family: inherit;
          overflow: hidden;
        }
        
        .quill-bullet-fix-wrapper .ql-editor {
          min-height: ${r};
          max-height: 400px;
          overflow-y: auto;
          overflow-x: hidden;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
          white-space: pre-wrap;
        }
        
        .quill-bullet-fix-wrapper .ql-editor * {
          max-width: 100%;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
        }
        
        .quill-bullet-fix-wrapper .ql-editor img {
          max-width: 100%;
          height: auto;
          border-radius: 0.375rem;
          margin: 0.5rem 0;
        }
        
        .quill-bullet-fix-wrapper .ql-editor.ql-blank::before {
          color: #9ca3af;
          font-style: normal;
        }
      `})]})}class j2{static async createMediaFileRecord(e,s,r,i){const{data:{publicUrl:o}}=V.storage.from("media").getPublicUrl(e),u=(s instanceof File,s.size),h=s instanceof File?s.type:"image/jpeg",m=o+"?width=150&height=150&resize=cover",f=o+"?width=800&height=600&resize=fit",p=o+"?width=1920&height=1080&resize=fit";try{const{data:x,error:b}=await V.from("media_files").insert({filename:e,original_filename:s instanceof File?s.name:"uploaded-image.jpg",file_type:h,file_size:u,mime_type:h,url:o,thumbnail_url:m,medium_url:f,large_url:p,title:r.title,alt_text:r.alt_text,description:r.description,category:r.category||"general",tags:r.tags||[],folder_id:r.folder_id,status:"active",is_public:!1}).select().single();return b?(console.warn("Could not save media metadata to database:",b),{id:e,filename:e,original_filename:s instanceof File?s.name:"uploaded-image.jpg",file_type:h,file_size:u,mime_type:h,url:o,thumbnail_url:m,medium_url:f,large_url:p,title:r.title,alt_text:r.alt_text,description:r.description,category:r.category||"general",tags:r.tags||[],status:"active",is_public:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}):x}catch(x){return console.warn("Database not configured, returning file info without metadata:",x),{id:e,filename:e,original_filename:s instanceof File?s.name:"uploaded-image.jpg",file_type:h,file_size:u,mime_type:h,url:o,thumbnail_url:m,medium_url:f,large_url:p,title:r.title,alt_text:r.alt_text,description:r.description,category:r.category||"general",tags:r.tags||[],status:"active",is_public:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}}static async uploadImage(e,s={}){try{const r=Date.now(),i=Math.random().toString(36).substring(7),o=e instanceof File?e.name.split(".").pop():"jpg",u=`${r}-${i}.${o}`;console.log("Attempting to upload file:",u);const{data:h,error:m}=await V.storage.from("media").upload(u,e,{cacheControl:"3600",upsert:!1});if(m){if(console.error("Upload error details:",{error:m,message:m.message,statusCode:m.statusCode}),m.message?.includes("Bucket not found")){console.log("Bucket not found, attempting to create...");const{data:f,error:p}=await V.storage.createBucket("media",{public:!0,allowedMimeTypes:["image/*"],fileSizeLimit:10485760});if(p){console.error("Could not create bucket:",p),console.log("Retrying upload after bucket creation attempt...");const{data:x,error:b}=await V.storage.from("media").upload(u,e,{cacheControl:"3600",upsert:!1});if(b)throw console.error("Retry failed:",b),new Error(`Storage error: ${b.message}. Please check Supabase Storage configuration.`);return this.createMediaFileRecord(u,e,s,x)}else{console.log("Bucket created successfully, retrying upload...");const{data:x,error:b}=await V.storage.from("media").upload(u,e,{cacheControl:"3600",upsert:!1});if(b)throw new Error(`Upload failed after creating bucket: ${b.message}`);return this.createMediaFileRecord(u,e,s,x)}}throw m}return this.createMediaFileRecord(u,e,s,h)}catch(r){throw console.error("Error uploading image:",r),r}}static async getMediaFiles(e){let s=V.from("media_files").select("*").eq("status","active").order("created_at",{ascending:!1});e?.category&&(s=s.eq("category",e.category)),e?.folder_id&&(s=s.eq("folder_id",e.folder_id)),e?.tags&&e.tags.length>0&&(s=s.contains("tags",e.tags)),e?.search&&(s=s.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%,alt_text.ilike.%${e.search}%`)),e?.limit&&(s=s.limit(e.limit)),e?.offset&&(s=s.range(e.offset,e.offset+(e?.limit||20)-1));const{data:r,error:i}=await s;if(i)throw console.error("Error fetching media files:",i),i;return r||[]}static async getMediaFile(e){const{data:s,error:r}=await V.from("media_files").select("*").eq("id",e).single();if(r)throw console.error("Error fetching media file:",r),r;return s}static async updateMediaFile(e,s){const{data:r,error:i}=await V.from("media_files").update(s).eq("id",e).select().single();if(i)throw console.error("Error updating media file:",i),i;return r}static async deleteMediaFile(e){const s=await this.getMediaFile(e);if(!s)throw new Error("Media file not found");const{error:r}=await V.from("media_files").update({status:"deleted"}).eq("id",e);if(r)throw console.error("Error deleting media file:",r),r;const{error:i}=await V.storage.from("media").remove([s.filename]);i&&console.error("Error deleting file from storage:",i)}static async getFolders(){const{data:e,error:s}=await V.from("media_folders").select("*").order("path");if(s)throw console.error("Error fetching folders:",s),s;return e||[]}static async createFolder(e,s){let r="/";if(s){const u=await V.from("media_folders").select("path").eq("id",s).single();u.data&&(r=u.data.path+e+"/")}else r="/"+e+"/";const{data:i,error:o}=await V.from("media_folders").insert({name:e,parent_id:s,path:r}).select().single();if(o)throw console.error("Error creating folder:",o),o;return i}static async trackUsage(e,s,r,i){const{error:o}=await V.from("media_usage").upsert({media_file_id:e,entity_type:s,entity_id:r,field_name:i});if(o)throw console.error("Error tracking media usage:",o),o}static async getMediaUsage(e){const{data:s,error:r}=await V.from("media_usage").select("*").eq("media_file_id",e);if(r)throw console.error("Error fetching media usage:",r),r;return s||[]}static async getMediaStatistics(){const{data:e,error:s}=await V.rpc("get_media_statistics");if(s)throw console.error("Error fetching media statistics:",s),s;return e}}function pV({onSelectImage:t,onClose:e,category:s="events",currentImageUrl:r}){const[i,o]=M.useState([]),[u,h]=M.useState(!0),[m,f]=M.useState(""),[p,x]=M.useState(r||null),[b,j]=M.useState("grid"),[v,S]=M.useState("gallery"),[_,E]=M.useState(""),[A,O]=M.useState(!1),[F,k]=M.useState(!1),L=[{id:"default-1",name:"Conference",url:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800"},{id:"default-2",name:"Meeting",url:"https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=800"},{id:"default-3",name:"Workshop",url:"https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=800"},{id:"default-4",name:"Presentation",url:"https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=800"},{id:"default-5",name:"Networking",url:"https://images.unsplash.com/photo-1559223607-a43c990c692c?w=800"},{id:"default-6",name:"Team Event",url:"https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=800"},{id:"default-7",name:"Training",url:"https://images.unsplash.com/photo-1591115765373-5207764f72e7?w=800"},{id:"default-8",name:"Business",url:"https://images.unsplash.com/photo-1542744173-8e7e53415bb0?w=800"},{id:"default-9",name:"Seminar",url:"https://images.unsplash.com/photo-1560439514-4e9645039924?w=800"},{id:"default-10",name:"Virtual Event",url:"https://images.unsplash.com/photo-1588196749597-9ff075ee6b5b?w=800"},{id:"default-11",name:"Panel",url:"https://images.unsplash.com/photo-1582192730841-2a682d7375f9?w=800"},{id:"default-12",name:"Awards",url:"https://images.unsplash.com/photo-1569163139394-de4798aa62b6?w=800"}];M.useEffect(()=>{B()},[s]);const B=async()=>{try{h(!0);const H=await j2.getMediaFiles({category:s,search:m});o(H||[])}catch(H){console.error("Error loading images:",H),o([])}finally{h(!1)}},w=async H=>{try{if(O(!0),!H.type.startsWith("image/"))throw new Error("Please select an image file");if(H.size>10*1024*1024)throw new Error("Image size must be less than 10MB");const X=await j2.uploadImage(H,{title:H.name.split(".")[0],category:s,alt_text:H.name});X&&(ae("success","Image uploaded successfully"),o([X,...i]),x(X.url),S("gallery"))}catch(X){if(console.error("Error uploading image:",X),X.message?.includes("relation")||X.message?.includes("media_files")){ae("warning","Database not configured. Using direct upload.");const P=new FileReader;P.onloadend=()=>{const Z=P.result;t(Z),e()},P.readAsDataURL(H)}else ae("error",X.message||"Failed to upload image")}finally{O(!1)}},C=M.useCallback(H=>{H.preventDefault(),H.stopPropagation(),k(!1),H.dataTransfer.files&&H.dataTransfer.files[0]&&w(H.dataTransfer.files[0])},[]),z=M.useCallback(H=>{H.preventDefault(),H.stopPropagation(),H.type==="dragenter"||H.type==="dragover"?k(!0):H.type==="dragleave"&&k(!1)},[]),R=()=>{if(_)try{new URL(_),t(_),e()}catch{ae("error","Please enter a valid URL")}},D=()=>{p&&(t(p),e())},q=i.filter(H=>!m||H.title?.toLowerCase().includes(m.toLowerCase())||H.original_filename?.toLowerCase().includes(m.toLowerCase()));return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Select Image"}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(mn,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"flex border-b",children:[n.jsx("button",{onClick:()=>S("gallery"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${v==="gallery"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:"Gallery"}),n.jsx("button",{onClick:()=>S("upload"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${v==="upload"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:"Upload New"}),n.jsx("button",{onClick:()=>S("url"),className:`px-4 py-2 font-medium border-b-2 transition-colors ${v==="url"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:"From URL"})]}),n.jsx("div",{className:"flex-1 overflow-hidden",children:v==="gallery"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[n.jsx("div",{className:"flex items-center gap-4 flex-1",children:n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(ni,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(Ne,{placeholder:"Search images...",value:m,onChange:H=>f(H.target.value),className:"pl-10"})]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>j("grid"),className:`p-2 rounded ${b==="grid"?"bg-gray-200":"hover:bg-gray-100"}`,title:"Grid View",children:n.jsx(bP,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>j("list"),className:`p-2 rounded ${b==="list"?"bg-gray-200":"hover:bg-gray-100"}`,title:"List View",children:n.jsx(kP,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(hn,{className:"h-8 w-8 animate-spin text-primary-600"})}):b==="grid"?n.jsxs(n.Fragment,{children:[q.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Your Images"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:q.map(H=>n.jsxs("div",{onClick:()=>x(H.url),className:`relative cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${p===H.url?"border-primary-500 shadow-lg":"border-gray-200 hover:border-gray-400"}`,children:[n.jsx("img",{src:H.thumbnail_url||H.url,alt:H.title||"Image",className:"w-full h-32 object-cover"}),H.title&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2",children:n.jsx("p",{className:"text-white text-xs truncate",children:H.title})}),p===H.url&&n.jsx("div",{className:"absolute top-2 right-2 bg-primary-500 rounded-full p-1",children:n.jsx(Yl,{className:"h-4 w-4 text-white"})})]},H.id))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Stock Images"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:L.map(H=>n.jsxs("div",{onClick:()=>x(H.url),className:`relative cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${p===H.url?"border-primary-500 shadow-lg":"border-gray-200 hover:border-gray-400"}`,children:[n.jsx("img",{src:H.url,alt:H.name,className:"w-full h-32 object-cover"}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2",children:n.jsx("p",{className:"text-white text-xs truncate",children:H.name})}),p===H.url&&n.jsx("div",{className:"absolute top-2 right-2 bg-primary-500 rounded-full p-1",children:n.jsx(Yl,{className:"h-4 w-4 text-white"})})]},H.id))})]})]}):n.jsxs("div",{className:"space-y-2",children:[q.map(H=>n.jsxs("div",{onClick:()=>x(H.url),className:`flex items-center gap-4 p-3 rounded-lg cursor-pointer transition-colors ${p===H.url?"bg-primary-50 border border-primary-500":"hover:bg-gray-50 border border-gray-200"}`,children:[n.jsx("img",{src:H.thumbnail_url||H.url,alt:H.title||"Image",className:"w-16 h-16 object-cover rounded"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium",children:H.title||"Untitled"}),n.jsx("p",{className:"text-sm text-gray-500",children:H.category})]}),p===H.url&&n.jsx(Yl,{className:"h-5 w-5 text-primary-600"})]},H.id)),n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mt-4 mb-2",children:"Stock Images"}),L.map(H=>n.jsxs("div",{onClick:()=>x(H.url),className:`flex items-center gap-4 p-3 rounded-lg cursor-pointer transition-colors ${p===H.url?"bg-primary-50 border border-primary-500":"hover:bg-gray-50 border border-gray-200"}`,children:[n.jsx("img",{src:H.url,alt:H.name,className:"w-16 h-16 object-cover rounded"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium",children:H.name}),n.jsx("p",{className:"text-sm text-gray-500",children:"Stock Photo"})]}),p===H.url&&n.jsx(Yl,{className:"h-5 w-5 text-primary-600"})]},H.id))]})})]}):v==="upload"?n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:n.jsxs("div",{className:`w-full max-w-md p-8 border-2 border-dashed rounded-lg transition-colors ${F?"border-primary-500 bg-primary-50":"border-gray-300"}`,onDrop:C,onDragEnter:z,onDragLeave:z,onDragOver:z,children:[n.jsx("input",{type:"file",id:"file-upload",accept:"image/*",className:"hidden",onChange:H=>{const X=H.target.files?.[0];X&&w(X)},disabled:A}),n.jsx("label",{htmlFor:"file-upload",className:"flex flex-col items-center cursor-pointer",children:A?n.jsxs(n.Fragment,{children:[n.jsx(hn,{className:"h-12 w-12 text-primary-600 animate-spin mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Uploading..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(rl,{className:"h-12 w-12 text-gray-400 mb-4"}),n.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"Click to upload or drag and drop"}),n.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]})}):v==="url"?n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL"}),n.jsx(Ne,{type:"url",placeholder:"https://example.com/image.jpg",value:_,onChange:H=>E(H.target.value),onKeyPress:H=>{H.key==="Enter"&&R()}}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Enter a direct link to an image file"}),_&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview:"}),n.jsx("img",{src:_,alt:"Preview",className:"w-full h-48 object-cover rounded-lg border",onError:H=>{const X=H.target;X.style.display="none"},onLoad:H=>{const X=H.target;X.style.display="block"}})]})]})}):null}),n.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t bg-gray-50",children:[n.jsx(se,{variant:"outline",onClick:e,children:"Cancel"}),v==="gallery"&&n.jsx(se,{onClick:D,disabled:!p,children:"Select Image"}),v==="url"&&n.jsx(se,{onClick:R,disabled:!_,children:"Use This URL"})]})]})})}const{CPD_CATEGORIES:gV}=cl;function xV({event:t,categories:e,onClose:s,onSuccess:r}){const[i,o]=M.useState(!1),[u,h]=M.useState("basic"),[m,f]=M.useState(!1),[p,x]=M.useState({title:"",description:"",short_description:"",category_id:"",start_date:"",end_date:"",timezone:"Australia/Sydney",location_type:"physical",venue_name:"",address_line1:"",city:"",state:"",postal_code:"",country:"Australia",virtual_link:"",capacity:50,member_price:0,non_member_price:0,early_bird_price:void 0,early_bird_end_date:void 0,cpd_points:1,cpd_category:"",visibility:"public",featured:!1,allow_guests:!1,max_guests_per_registration:0,requires_approval:!1,image_url:""});M.useEffect(()=>{t&&(console.log(" [EventFormModal] Loading event data:",{id:t.id,title:t.title,description_length:t.description?.length,description_preview:t.description?.substring(0,100)}),x({title:t.title,description:t.description||"",short_description:t.short_description||"",category_id:t.category_id||"",start_date:t.start_date.slice(0,16),end_date:t.end_date.slice(0,16),timezone:t.timezone,location_type:t.location_type,venue_name:t.venue_name||"",address_line1:t.address_line1||"",city:t.city||"",state:t.state||"",postal_code:t.postal_code||"",country:t.country,virtual_link:t.virtual_link||"",capacity:t.capacity,member_price:t.member_price_cents/100,non_member_price:t.non_member_price_cents/100,early_bird_price:t.early_bird_price_cents?t.early_bird_price_cents/100:void 0,early_bird_end_date:t.early_bird_end_date?.slice(0,16),cpd_points:t.cpd_points,cpd_category:t.cpd_category||"",visibility:t.visibility,featured:t.featured,allow_guests:t.allow_guests,max_guests_per_registration:t.max_guests_per_registration,requires_approval:t.requires_approval,image_url:t.image_url||""}))},[t]);const b=async v=>{if(v.preventDefault(),console.log(" [EventFormModal] Submitting form with data:",{title:p.title,description_length:p.description?.length,description_preview:p.description?.substring(0,100),full_formData:p}),!p.title||!p.start_date||!p.end_date){ae("error","Please fill in all required fields");return}if(new Date(p.end_date)<new Date(p.start_date)){ae("error","End date must be after start date");return}o(!0);try{const S={...p,start_date:new Date(p.start_date).toISOString(),end_date:new Date(p.end_date).toISOString(),early_bird_end_date:p.early_bird_end_date?new Date(p.early_bird_end_date).toISOString():void 0};console.log(" [EventFormModal] Data being sent to service:",{description_length:S.description?.length,description_preview:S.description?.substring(0,100),full_data:S}),t?(console.log(" [EventFormModal] Updating event ID:",t.id),await Xt.updateEvent(t.id,S),ae("success","Event updated successfully")):(console.log(" [EventFormModal] Creating new event"),await Xt.createEvent(S),ae("success","Event created successfully")),r()}catch(S){console.error(" [EventFormModal] Error saving event:",S),ae("error","Failed to save event. Check console for details.")}finally{o(!1)}},j=[{id:"basic",label:"Basic Info",icon:js},{id:"location",label:"Location",icon:Ln},{id:"capacity",label:"Capacity & Pricing",icon:Cr},{id:"cpd",label:"CPD & Settings",icon:un}];return n.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Edit Event":"Create New Event"}),n.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:n.jsx(mn,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"flex border-b",children:j.map(v=>{const S=v.icon;return n.jsxs("button",{onClick:()=>h(v.id),className:`flex items-center px-4 py-3 text-sm font-medium border-b-2 transition-colors ${u===v.id?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:[n.jsx(S,{className:"h-4 w-4 mr-2"}),v.label]},v.id)})}),n.jsxs("form",{onSubmit:b,className:"flex-1 overflow-y-auto",children:[n.jsxs("div",{className:"p-6 space-y-6",children:[u==="basic"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"title",children:"Event Title *"}),n.jsx(Ne,{id:"title",value:p.title,onChange:v=>x({...p,title:v.target.value}),placeholder:"Enter event title",required:!0})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"short_description",children:"Short Description"}),n.jsx(Ne,{id:"short_description",value:p.short_description,onChange:v=>x({...p,short_description:v.target.value}),placeholder:"Brief description for event cards (max 500 characters)",maxLength:500})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"description",children:"Full Description"}),n.jsx(fV,{content:p.description,onChange:v=>{console.log(" [EventFormModal] Description changed:",{length:v?.length,preview:v?.substring(0,100)}),x(S=>({...S,description:v}))},placeholder:"Enter detailed event description...",height:"250px",enableDebugLogs:!0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tip: Use the toolbar to format text and add images."})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"category",children:"Category"}),n.jsxs("select",{id:"category",value:p.category_id,onChange:v=>x({...p,category_id:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[n.jsx("option",{value:"",children:"Select a category"}),e.map(v=>n.jsx("option",{value:v.id,children:v.name},v.id))]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"start_date",children:"Start Date & Time *"}),n.jsx(Ne,{id:"start_date",type:"datetime-local",value:p.start_date,onChange:v=>x({...p,start_date:v.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"end_date",children:"End Date & Time *"}),n.jsx(Ne,{id:"end_date",type:"datetime-local",value:p.end_date,onChange:v=>x({...p,end_date:v.target.value}),required:!0})]})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"timezone",children:"Timezone"}),n.jsxs("select",{id:"timezone",value:p.timezone,onChange:v=>x({...p,timezone:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[n.jsx("option",{value:"Australia/Sydney",children:"Sydney"}),n.jsx("option",{value:"Australia/Melbourne",children:"Melbourne"}),n.jsx("option",{value:"Australia/Brisbane",children:"Brisbane"}),n.jsx("option",{value:"Australia/Perth",children:"Perth"}),n.jsx("option",{value:"Australia/Adelaide",children:"Adelaide"})]})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"image_url",children:"Event Image"}),p.image_url&&n.jsx("div",{className:"mb-3",children:n.jsx("img",{src:p.image_url,alt:"Event preview",className:"w-full h-48 object-cover rounded-md border",onError:v=>{const S=v.target;S.onerror=null,S.src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=400"}})}),n.jsxs(se,{type:"button",variant:"outline",onClick:()=>f(!0),className:"w-full",children:[n.jsx(rl,{className:"h-4 w-4 mr-2"}),p.image_url?"Change Image":"Select Image"]}),p.image_url&&n.jsx(se,{type:"button",variant:"ghost",onClick:()=>x({...p,image_url:""}),className:"w-full mt-2 text-red-600 hover:text-red-700",children:"Remove Image"})]})]}),u==="location"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(he,{children:"Event Type"}),n.jsxs("div",{className:"flex gap-4 mt-2",children:[n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"radio",value:"physical",checked:p.location_type==="physical",onChange:v=>x({...p,location_type:v.target.value}),className:"mr-2"}),n.jsx(to,{className:"h-4 w-4 mr-1"}),"In-Person"]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"radio",value:"virtual",checked:p.location_type==="virtual",onChange:v=>x({...p,location_type:v.target.value}),className:"mr-2"}),n.jsx(_y,{className:"h-4 w-4 mr-1"}),"Virtual"]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"radio",value:"hybrid",checked:p.location_type==="hybrid",onChange:v=>x({...p,location_type:v.target.value}),className:"mr-2"}),"Hybrid"]})]})]}),(p.location_type==="physical"||p.location_type==="hybrid")&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"venue_name",children:"Venue Name"}),n.jsx(Ne,{id:"venue_name",value:p.venue_name,onChange:v=>x({...p,venue_name:v.target.value}),placeholder:"e.g., Sydney Convention Centre"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"address_line1",children:"Address"}),n.jsx(Ne,{id:"address_line1",value:p.address_line1,onChange:v=>x({...p,address_line1:v.target.value}),placeholder:"Street address"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"city",children:"City"}),n.jsx(Ne,{id:"city",value:p.city,onChange:v=>x({...p,city:v.target.value})})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"state",children:"State"}),n.jsx(Ne,{id:"state",value:p.state,onChange:v=>x({...p,state:v.target.value})})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"postal_code",children:"Postal Code"}),n.jsx(Ne,{id:"postal_code",value:p.postal_code,onChange:v=>x({...p,postal_code:v.target.value})})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"country",children:"Country"}),n.jsx(Ne,{id:"country",value:p.country,onChange:v=>x({...p,country:v.target.value})})]})]})]}),(p.location_type==="virtual"||p.location_type==="hybrid")&&n.jsxs("div",{children:[n.jsx(he,{htmlFor:"virtual_link",children:"Virtual Event Link"}),n.jsx(Ne,{id:"virtual_link",value:p.virtual_link,onChange:v=>x({...p,virtual_link:v.target.value}),placeholder:"https://zoom.us/j/..."})]})]}),u==="capacity"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"capacity",children:"Event Capacity"}),n.jsx(Ne,{id:"capacity",type:"number",value:p.capacity,onChange:v=>x({...p,capacity:parseInt(v.target.value)}),min:"1"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"member_price",children:"Member Price ($)"}),n.jsx(Ne,{id:"member_price",type:"number",value:p.member_price,onChange:v=>x({...p,member_price:parseFloat(v.target.value)}),min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"non_member_price",children:"Non-Member Price ($)"}),n.jsx(Ne,{id:"non_member_price",type:"number",value:p.non_member_price,onChange:v=>x({...p,non_member_price:parseFloat(v.target.value)}),min:"0",step:"0.01"})]})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Early Bird Pricing (Optional)"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"early_bird_price",children:"Early Bird Price ($)"}),n.jsx(Ne,{id:"early_bird_price",type:"number",value:p.early_bird_price||"",onChange:v=>x({...p,early_bird_price:v.target.value?parseFloat(v.target.value):void 0}),min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"early_bird_end_date",children:"Early Bird End Date"}),n.jsx(Ne,{id:"early_bird_end_date",type:"datetime-local",value:p.early_bird_end_date||"",onChange:v=>x({...p,early_bird_end_date:v.target.value||void 0})})]})]})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Guest Settings"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:p.allow_guests,onChange:v=>x({...p,allow_guests:v.target.checked}),className:"mr-2"}),"Allow guests"]}),p.allow_guests&&n.jsxs("div",{children:[n.jsx(he,{htmlFor:"max_guests",children:"Max Guests per Registration"}),n.jsx(Ne,{id:"max_guests",type:"number",value:p.max_guests_per_registration,onChange:v=>x({...p,max_guests_per_registration:parseInt(v.target.value)}),min:"0"})]})]})]})]}),u==="cpd"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"CPD Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"cpd_points",children:"CPD Points"}),n.jsx(Ne,{id:"cpd_points",type:"number",value:p.cpd_points,onChange:v=>x({...p,cpd_points:parseFloat(v.target.value)}),min:"0",step:"0.5"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"cpd_category",children:"CPD Category"}),n.jsxs("select",{id:"cpd_category",value:p.cpd_category,onChange:v=>x({...p,cpd_category:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[n.jsx("option",{value:"",children:"Select CPD category"}),gV.map(v=>n.jsx("option",{value:v.name,children:v.name},v.id))]})]})]})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Visibility Settings"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(he,{children:"Event Visibility"}),n.jsxs("select",{value:p.visibility,onChange:v=>x({...p,visibility:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[n.jsx("option",{value:"public",children:"Public - Everyone can see"}),n.jsx("option",{value:"members",children:"Members Only"}),n.jsx("option",{value:"private",children:"Private - Invite only"})]})]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:p.featured,onChange:v=>x({...p,featured:v.target.checked}),className:"mr-2"}),"Featured Event (shown prominently)"]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:p.requires_approval,onChange:v=>x({...p,requires_approval:v.target.checked}),className:"mr-2"}),"Require approval for registrations"]})]})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50",children:[n.jsx(se,{type:"button",variant:"outline",onClick:s,disabled:i,children:"Cancel"}),n.jsx(se,{type:"submit",disabled:i,children:i?"Saving...":t?"Update Event":"Create Event"})]})]})]}),m&&n.jsx(pV,{onSelectImage:v=>{x({...p,image_url:v}),f(!1)},onClose:()=>f(!1),category:"events",currentImageUrl:p.image_url})]})}function yV(){const t=Ns(),[e,s]=M.useState([]),[r,i]=M.useState([]),[o,u]=M.useState(!0),[h,m]=M.useState(""),[f,p]=M.useState("all"),[x,b]=M.useState(!1),[j,v]=M.useState(null),[S,_]=M.useState(null);M.useEffect(()=>{E()},[]);const E=async()=>{try{u(!0);const[C,z]=await Promise.all([Xt.getEvents(),Xt.getCategories()]);s(C),i(z)}catch(C){console.error("Error loading events:",C),ae("error","Failed to load events")}finally{u(!1)}},A=()=>{v(null),b(!0)},O=C=>{v(C),b(!0)},F=async C=>{try{const z={...C,title:`${C.title} (Copy)`,slug:void 0,status:"draft",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};delete z.id,await Xt.createEvent(z),ae("success","Event duplicated successfully"),E()}catch(z){console.error("Error duplicating event:",z),ae("error","Failed to duplicate event")}},k=async C=>{try{await Xt.deleteEvent(C),ae("success","Event deleted successfully"),_(null),E()}catch(z){console.error("Error deleting event:",z),ae("error","Failed to delete event")}},L=async C=>{try{C.status==="published"?(await Xt.updateEvent(C.id,{status:"draft"}),ae("success","Event unpublished")):(await Xt.publishEvent(C.id),ae("success","Event published successfully")),E()}catch(z){console.error("Error publishing event:",z),ae("error","Failed to publish event")}},B=e.filter(C=>!(h&&!C.title.toLowerCase().includes(h.toLowerCase())||f!=="all"&&C.status!==f)),w=C=>{const z={draft:"bg-gray-100 text-gray-800",published:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"};return n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${z[C]}`,children:C.charAt(0).toUpperCase()+C.slice(1)})};return o?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Event Management"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Create and manage events"})]}),n.jsxs(se,{onClick:A,children:[n.jsx(ro,{className:"h-4 w-4 mr-2"}),"Create Event"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsx(ue,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Events"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),n.jsx(js,{className:"h-8 w-8 text-gray-400"})]})}),n.jsx(ue,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Published"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.filter(C=>C.status==="published").length})]}),n.jsx(qn,{className:"h-8 w-8 text-green-400"})]})}),n.jsx(ue,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Draft"}),n.jsx("p",{className:"text-2xl font-bold text-gray-600",children:e.filter(C=>C.status==="draft").length})]}),n.jsx(ff,{className:"h-8 w-8 text-gray-400"})]})}),n.jsx(ue,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Upcoming"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.filter(C=>new Date(C.start_date)>new Date).length})]}),n.jsx(js,{className:"h-8 w-8 text-blue-400"})]})})]}),n.jsx(ue,{className:"p-4 mb-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx(Ne,{placeholder:"Search events...",value:h,onChange:C=>m(C.target.value),className:"flex-1"}),n.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",value:f,onChange:C=>p(C.target.value),children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"published",children:"Published"}),n.jsx("option",{value:"cancelled",children:"Cancelled"}),n.jsx("option",{value:"completed",children:"Completed"})]})]})}),n.jsx(ue,{children:n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capacity"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(C=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.title}),C.category&&n.jsx("div",{className:"text-xs text-gray-500",children:C.category.name})]})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Ft(new Date(C.start_date),"MMM d, yyyy"),n.jsx("div",{className:"text-xs text-gray-500",children:Ft(new Date(C.start_date),"h:mm a")})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.location_type==="virtual"?"Online":C.venue_name||C.city}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.capacity}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w(C.status)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx(se,{variant:"ghost",size:"sm",onClick:()=>t(`/events/${C.slug}`),children:n.jsx(qn,{className:"h-4 w-4"})}),n.jsx(se,{variant:"ghost",size:"sm",onClick:()=>O(C),children:n.jsx(ff,{className:"h-4 w-4"})}),n.jsxs("div",{className:"relative",children:[n.jsx(se,{variant:"ghost",size:"sm",onClick:()=>_(S===C.id?null:C.id),children:n.jsx(cP,{className:"h-4 w-4"})}),S===C.id&&n.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border",children:n.jsxs("div",{className:"py-1",children:[n.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>L(C),children:C.status==="published"?"Unpublish":"Publish"}),n.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>F(C),children:[n.jsx(lE,{className:"h-4 w-4 inline mr-2"}),"Duplicate"]}),n.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>t(`/admin/events/${C.id}/registrations`),children:"View Registrations"}),n.jsx("hr",{className:"my-1"}),n.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",onClick:()=>k(C.id),children:[n.jsx(go,{className:"h-4 w-4 inline mr-2"}),"Delete"]})]})})]})]})})]},C.id))})]}),B.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(js,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No events found"}),n.jsx(se,{onClick:A,className:"mt-4",children:"Create your first event"})]})]})}),x&&n.jsx(xV,{event:j,categories:r,onClose:()=>{b(!1),v(null)},onSuccess:()=>{b(!1),v(null),E()}})]})}function bV(){const{user:t}=jt(),[e,s]=M.useState(!1),[r,i]=M.useState(!1),[o,u]=M.useState(!1),[h,m]=M.useState(t?.email||""),[f,p]=M.useState(!1),[x,b]=M.useState({smtp_host:"",smtp_port:587,smtp_secure:!0,smtp_auth_type:"LOGIN",smtp_username:"",smtp_password:"",from_email:"",from_name:"English Australia",reply_to_email:"",reply_to_name:"",enabled:!1,test_mode:!1,test_email:"",daily_limit:1e3,hourly_limit:100,emails_sent_today:0,emails_sent_this_hour:0}),j=[{name:"Gmail",host:"smtp.gmail.com",port:587,secure:!0},{name:"Outlook/Office365",host:"smtp.office365.com",port:587,secure:!0},{name:"SendGrid",host:"smtp.sendgrid.net",port:587,secure:!0},{name:"Mailgun",host:"smtp.mailgun.org",port:587,secure:!0},{name:"Amazon SES",host:"email-smtp.us-east-1.amazonaws.com",port:587,secure:!0},{name:"Custom",host:"",port:587,secure:!0}];M.useEffect(()=>{v()},[]);const v=async()=>{try{s(!0);const O=await Ka.checkDatabaseAvailable();p(!O);const F=await Ka.getSMTPSettings();if(console.log("SMTP Settings received from backend:",F),F.data){console.log("Setting SMTP data in form:",F.data);const k={...F.data,smtp_host:F.data.smtp_host||"",smtp_port:F.data.smtp_port||587,smtp_username:F.data.smtp_username||"",smtp_password:F.data.smtp_password||"",from_email:F.data.from_email||"",from_name:F.data.from_name||""};console.log("Final settings to apply:",k),b(k),setTimeout(()=>{b(L=>({...L}))},100)}p(F.isLocal)}catch(O){console.error("Error loading SMTP settings:",O),ae("error","Failed to load SMTP settings")}finally{s(!1)}},S=O=>{b({...x,smtp_host:O.host,smtp_port:O.port,smtp_secure:O.secure})},_=async()=>{if(!x.smtp_host||!x.smtp_username||!x.from_email){ae("error","Please fill in all required fields");return}if(!x.smtp_password&&!x.id){ae("error","Password is required for new SMTP configuration");return}try{s(!0),await Ka.saveSMTPSettings(x)?(ae("success","SMTP settings saved successfully"),v()):ae("error","Failed to save SMTP settings")}catch(O){console.error("Error saving SMTP settings:",O),ae("error","Failed to save SMTP settings")}finally{s(!1)}},E=async()=>{try{i(!0);const O=await Ka.testSMTPConnection();O.success?ae("success",O.message):ae("error",O.message)}catch(O){console.error("Error testing SMTP connection:",O),ae("error","Failed to test SMTP connection")}finally{i(!1)}},A=async()=>{if(!h){ae("error","Please enter a test email address");return}try{i(!0);const O=await Ka.sendTestEmail(h);O.success?ae("success",O.message):ae("error",O.message)}catch(O){console.error("Error sending test email:",O),ae("error","Failed to send test email")}finally{i(!1)}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"SMTP Settings"}),n.jsx("p",{className:"text-gray-600",children:"Configure email sending settings for the system"})]}),x.enabled&&n.jsx(ue,{className:"mb-6 bg-green-50 border-green-200",children:n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(ti,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"font-semibold text-green-900",children:"SMTP is configured and enabled"}),n.jsx("p",{className:"text-green-800",children:"Email sending is active using the configuration below."})]})]})})}),n.jsx(ue,{className:"mb-6",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Setup"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:j.map(O=>n.jsx(se,{variant:"outline",size:"sm",onClick:()=>S(O),className:x.smtp_host===O.host?"border-primary-500 bg-primary-50":"",children:O.name},O.name))})]})}),n.jsx(ue,{className:"mb-6",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"SMTP Server Configuration"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"smtp_host",children:"SMTP Host *"}),n.jsx(Ne,{id:"smtp_host",value:x.smtp_host,onChange:O=>b({...x,smtp_host:O.target.value}),placeholder:"smtp.gmail.com",required:!0})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"smtp_port",children:"SMTP Port *"}),n.jsx(Ne,{id:"smtp_port",type:"number",value:x.smtp_port,onChange:O=>b({...x,smtp_port:parseInt(O.target.value)}),placeholder:"587",required:!0})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"smtp_username",children:"Username *"}),n.jsx(Ne,{id:"smtp_username",value:x.smtp_username,onChange:O=>b({...x,smtp_username:O.target.value}),placeholder:"your-email@gmail.com",required:!0})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"smtp_password",children:"Password *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ne,{id:"smtp_password",type:o?"text":"password",value:x.smtp_password||"",onChange:O=>b({...x,smtp_password:O.target.value}),placeholder:x.id?"(unchanged)":"Enter password"}),n.jsx("button",{type:"button",onClick:()=>u(!o),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:o?n.jsx(Bm,{className:"h-4 w-4"}):n.jsx(qn,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For Gmail, use an App Password instead of your regular password"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"from_email",children:"From Email *"}),n.jsx(Ne,{id:"from_email",type:"email",value:x.from_email,onChange:O=>b({...x,from_email:O.target.value}),placeholder:"noreply@englishaustralia.com.au",required:!0})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"from_name",children:"From Name *"}),n.jsx(Ne,{id:"from_name",value:x.from_name,onChange:O=>b({...x,from_name:O.target.value}),placeholder:"English Australia",required:!0})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"reply_to_email",children:"Reply-To Email"}),n.jsx(Ne,{id:"reply_to_email",type:"email",value:x.reply_to_email||"",onChange:O=>b({...x,reply_to_email:O.target.value}),placeholder:"info@englishaustralia.com.au"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"reply_to_name",children:"Reply-To Name"}),n.jsx(Ne,{id:"reply_to_name",value:x.reply_to_name||"",onChange:O=>b({...x,reply_to_name:O.target.value}),placeholder:"English Australia Support"})]})]}),n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:x.smtp_secure,onChange:O=>b({...x,smtp_secure:O.target.checked}),className:"rounded border-gray-300"}),n.jsx("span",{className:"text-sm",children:"Use TLS/SSL encryption"})]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:x.enabled,onChange:O=>b({...x,enabled:O.target.checked}),className:"rounded border-gray-300"}),n.jsx("span",{className:"text-sm font-medium",children:"Enable email sending"})]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:x.test_mode,onChange:O=>b({...x,test_mode:O.target.checked}),className:"rounded border-gray-300"}),n.jsx("span",{className:"text-sm",children:"Test mode (all emails go to test address)"})]}),x.test_mode&&n.jsxs("div",{className:"ml-6",children:[n.jsx(he,{htmlFor:"test_email_address",children:"Test Email Address"}),n.jsx(Ne,{id:"test_email_address",type:"email",value:x.test_email||"",onChange:O=>b({...x,test_email:O.target.value}),placeholder:"test@example.com"})]})]})]})}),n.jsx(ue,{className:"mb-6",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rate Limits"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"daily_limit",children:"Daily Email Limit"}),n.jsx(Ne,{id:"daily_limit",type:"number",value:x.daily_limit,onChange:O=>b({...x,daily_limit:parseInt(O.target.value)})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Sent today: ",x.emails_sent_today]})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"hourly_limit",children:"Hourly Email Limit"}),n.jsx(Ne,{id:"hourly_limit",type:"number",value:x.hourly_limit,onChange:O=>b({...x,hourly_limit:parseInt(O.target.value)})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Sent this hour: ",x.emails_sent_this_hour]})]})]})]})}),n.jsx(ue,{className:"mb-6",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Test Configuration"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(se,{variant:"outline",onClick:E,disabled:r||!x.smtp_host||!x.smtp_username,children:[n.jsx(sI,{className:"h-4 w-4 mr-2"}),r?"Testing...":"Test Connection"]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Test if the SMTP server can be reached with current settings"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"test_email_to",children:"Send Test Email To"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ne,{id:"test_email_to",type:"email",value:h,onChange:O=>m(O.target.value),placeholder:"test@example.com",className:"flex-1"}),n.jsxs(se,{onClick:A,disabled:r||!x.enabled||!h,children:[n.jsx(jy,{className:"h-4 w-4 mr-2"}),r?"Sending...":"Send Test"]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Send a test email to verify everything is working"})]})]})]})}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx(se,{variant:"outline",onClick:v,disabled:e,children:"Cancel"}),n.jsxs(se,{onClick:_,disabled:e,children:[n.jsx(Jd,{className:"h-4 w-4 mr-2"}),e?"Saving...":"Save Settings"]})]}),n.jsx(ue,{className:"mt-6 bg-blue-50 border-blue-200",children:n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(ti,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsx("p",{className:"font-semibold mb-1",children:"Gmail Configuration Tips:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Enable 2-factor authentication in your Google account"}),n.jsx("li",{children:"Generate an App Password: Google Account  Security  2-Step Verification  App passwords"}),n.jsx("li",{children:"Use the App Password instead of your regular Gmail password"}),n.jsx("li",{children:"SMTP Host: smtp.gmail.com, Port: 587, Enable TLS"})]})]})]})})})]})}function vV(){const[t,e]=M.useState(!1),[s,r]=M.useState(""),[i,o]=M.useState(!1),[u,h]=M.useState({serviceId:"",templateIdTest:"",templateIdRegistration:"",templateIdReminder:"",publicKey:""});M.useEffect(()=>{h({serviceId:localStorage.getItem("emailjs_service_id")||"",templateIdTest:localStorage.getItem("emailjs_template_test")||"",templateIdRegistration:localStorage.getItem("emailjs_template_registration")||"",templateIdReminder:localStorage.getItem("emailjs_template_reminder")||"",publicKey:localStorage.getItem("emailjs_public_key")||""})},[]);const m=()=>{e(!0),localStorage.setItem("emailjs_service_id",u.serviceId),localStorage.setItem("emailjs_template_test",u.templateIdTest),localStorage.setItem("emailjs_template_registration",u.templateIdRegistration),localStorage.setItem("emailjs_template_reminder",u.templateIdReminder),localStorage.setItem("emailjs_public_key",u.publicKey),Ka.initEmailJS(u.publicKey),Os("success","EmailJS settings saved successfully!"),e(!1)},f=async()=>{if(!s){Os("error","Please enter a test email address");return}if(!u.serviceId||!u.templateIdTest||!u.publicKey){Os("error","Please configure EmailJS settings first");return}o(!0);try{const p=await Ka.sendTestEmail(s);p.success?Os("success",p.message):Os("error",p.message)}catch(p){Os("error",p.message||"Failed to send test email")}finally{o(!1)}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"EmailJS Configuration"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Configure EmailJS to send emails directly from the browser without a backend server"})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(SP,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{className:"space-y-3 flex-1",children:[n.jsx("h3",{className:"font-semibold text-blue-900",children:"Quick Setup Guide"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-blue-800",children:[n.jsxs("li",{children:["Create a free account at"," ",n.jsxs("a",{href:"https://www.emailjs.com/docs/get-started/sign-up/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline inline-flex items-center gap-1",children:["EmailJS.com",n.jsx(cx,{className:"w-3 h-3"})]})]}),n.jsxs("li",{children:["Add an email service (Gmail, Outlook, or SMTP) in your"," ",n.jsxs("a",{href:"https://dashboard.emailjs.com/admin",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline inline-flex items-center gap-1",children:["EmailJS Dashboard",n.jsx(cx,{className:"w-3 h-3"})]})]}),n.jsx("li",{children:"Create email templates for: Test Email, Event Registration, and Event Reminder"}),n.jsx("li",{children:"Copy your Service ID, Template IDs, and Public Key from the dashboard"}),n.jsx("li",{children:"Paste them in the form below and save"}),n.jsx("li",{children:"Send a test email to verify everything works!"})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3 mt-3",children:n.jsxs("p",{className:"text-xs text-yellow-800",children:[n.jsx("strong",{children:"Free Plan Limits:"})," 200 emails/month, 2 templates. Perfect for testing and small organizations."]})})]})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[n.jsx(no,{className:"w-5 h-5"}),"EmailJS Settings"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"serviceId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Service ID *"}),n.jsx("input",{type:"text",id:"serviceId",value:u.serviceId,onChange:p=>h({...u,serviceId:p.target.value}),placeholder:"e.g., service_abc123",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Found in: Email Services  Your Service  Service ID"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"publicKey",className:"block text-sm font-medium text-gray-700 mb-2",children:"Public Key *"}),n.jsx("input",{type:"text",id:"publicKey",value:u.publicKey,onChange:p=>h({...u,publicKey:p.target.value}),placeholder:"e.g., AbCdEfGhIjKlMnOpQr",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Found in: Account  API Keys  Public Key"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"templateIdTest",className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Email Template ID *"}),n.jsx("input",{type:"text",id:"templateIdTest",value:u.templateIdTest,onChange:p=>h({...u,templateIdTest:p.target.value}),placeholder:"e.g., template_test123",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Template for sending test emails"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"templateIdRegistration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration Template ID"}),n.jsx("input",{type:"text",id:"templateIdRegistration",value:u.templateIdRegistration,onChange:p=>h({...u,templateIdRegistration:p.target.value}),placeholder:"e.g., template_reg456",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Template for event registration confirmations"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"templateIdReminder",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reminder Template ID"}),n.jsx("input",{type:"text",id:"templateIdReminder",value:u.templateIdReminder,onChange:p=>h({...u,templateIdReminder:p.target.value}),placeholder:"e.g., template_rem789",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Template for event reminders"})]})]}),n.jsx("div",{className:"mt-6 flex justify-end",children:n.jsxs("button",{onClick:m,disabled:t||!u.serviceId||!u.publicKey||!u.templateIdTest,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(Jd,{className:"w-4 h-4"}),"Save Settings"]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[n.jsx(Xd,{className:"w-5 h-5"}),"Test Email Sending"]}),n.jsxs("div",{className:"flex gap-4 items-end",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"testEmailAddress",className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Email Address"}),n.jsx("input",{type:"email",id:"testEmailAddress",value:s,onChange:p=>r(p.target.value),placeholder:"test@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("button",{onClick:f,disabled:i||!s||!u.serviceId||!u.publicKey,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(jy,{className:"w-4 h-4"}),i?"Sending...":"Send Test"]})]}),u.serviceId&&u.publicKey&&n.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center gap-2 text-green-700 text-sm",children:[n.jsx(ls,{className:"w-4 h-4"}),"EmailJS is configured and ready to send emails"]})})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mt-6",children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(CP,{className:"w-5 h-5"}),"Template Variables Reference"]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Use these variables in your EmailJS templates:"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Common Variables"}),n.jsxs("ul",{className:"space-y-1 text-gray-600 font-mono text-xs",children:[n.jsx("li",{children:"{{to_email}}"}),n.jsx("li",{children:"{{to_name}}"}),n.jsx("li",{children:"{{from_name}}"}),n.jsx("li",{children:"{{timestamp}}"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Event Variables"}),n.jsxs("ul",{className:"space-y-1 text-gray-600 font-mono text-xs",children:[n.jsx("li",{children:"{{event_title}}"}),n.jsx("li",{children:"{{event_date}}"}),n.jsx("li",{children:"{{event_time}}"}),n.jsx("li",{children:"{{event_location}}"}),n.jsx("li",{children:"{{virtual_link}}"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"User Variables"}),n.jsxs("ul",{className:"space-y-1 text-gray-600 font-mono text-xs",children:[n.jsx("li",{children:"{{user_name}}"}),n.jsx("li",{children:"{{user_email}}"}),n.jsx("li",{children:"{{registration_id}}"}),n.jsx("li",{children:"{{reminder_time}}"})]})]})]})]}),n.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500",children:["Need help? Check the"," ",n.jsx("a",{href:"https://www.emailjs.com/docs/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"EmailJS Documentation"})," or ",n.jsx("a",{href:"https://dashboard.emailjs.com/admin/templates",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Manage Your Templates"})]})]})}const wV=[{id:"tpl-1",name:"event-registration",subject:"Registration Confirmed: {{event_title}}",body_html:`<h2>Registration Confirmed!</h2>
<p>Dear {{user_name}},</p>
<p>Your registration for <strong>{{event_title}}</strong> has been confirmed.</p>
<p>Event Date: {{event_date}}</p>
<p>Location: {{event_location}}</p>`,body_text:"Registration confirmed for {{event_title}}",category:"event",variables:["user_name","event_title","event_date","event_location"],enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"tpl-2",name:"event-reminder",subject:"Reminder: {{event_title}} - {{reminder_time}}",body_html:`<h2>Event Reminder</h2>
<p>Dear {{user_name}},</p>
<p>This is a reminder about your upcoming event: <strong>{{event_title}}</strong></p>
<p>When: {{event_date}} at {{event_time}}</p>
<p>Where: {{event_location}}</p>`,body_text:"Reminder: {{event_title}} on {{event_date}}",category:"event",variables:["user_name","event_title","event_date","event_time","event_location","reminder_time"],enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"tpl-3",name:"cpd-approved",subject:"CPD Activity Approved: {{activity_title}}",body_html:`<h2>CPD Activity Approved</h2>
<p>Dear {{user_name}},</p>
<p>Your CPD activity "<strong>{{activity_title}}</strong>" has been approved.</p>
<p>Points Awarded: {{cpd_points}}</p>`,body_text:"CPD activity {{activity_title}} approved. Points: {{cpd_points}}",category:"cpd",variables:["user_name","activity_title","cpd_points","cpd_category"],enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];function _V(){const[t,e]=M.useState(wV),[s,r]=M.useState(null),[i,o]=M.useState(!1),[u,h]=M.useState(!1),[m,f]=M.useState("html"),[p,x]=M.useState("all"),[b,j]=M.useState({}),[v,S]=M.useState({}),_=[{value:"all",label:"All Categories"},{value:"event",label:"Events"},{value:"cpd",label:"CPD"},{value:"member",label:"Members"},{value:"system",label:"System"},{value:"custom",label:"Custom"}],E=p==="all"?t:t.filter(w=>w.category===p),A=w=>{r(w),j(w),o(!0);const C={};w.variables.forEach(z=>{C[z]=`[${z}]`}),S(C)},O=()=>{if(!b.name||!b.subject||!b.body_html){ae("error","Please fill in all required fields");return}e(t.map(w=>w.id===b.id?{...w,...b,updated_at:new Date().toISOString()}:w)),ae("success","Template saved successfully"),o(!1),r(null),j({})},F=w=>{confirm("Are you sure you want to delete this template?")&&(e(t.filter(C=>C.id!==w)),ae("success","Template deleted successfully"))},k=w=>{const C={...w,id:`tpl-${Date.now()}`,name:`${w.name}-copy`,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};e([...t,C]),ae("success","Template duplicated successfully")},L=w=>{e(t.map(C=>C.id===w?{...C,enabled:!C.enabled}:C))},B=()=>{if(!b.body_html)return"";let w=b.body_html;return Object.entries(v).forEach(([C,z])=>{w=w.replace(new RegExp(`{{${C}}}`,"g"),z)}),w};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Email Templates"}),n.jsx("p",{className:"text-gray-600",children:"Manage email templates for automated messages"})]}),n.jsxs(se,{onClick:()=>{j({id:`tpl-${Date.now()}`,name:"",subject:"",body_html:"",body_text:"",category:"custom",variables:[],enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),o(!0)},children:[n.jsx(ro,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsxs(ue,{children:[n.jsx("div",{className:"p-4 border-b",children:n.jsx("select",{value:p,onChange:w=>x(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:_.map(w=>n.jsx("option",{value:w.value,children:w.label},w.value))})}),n.jsx("div",{className:"divide-y",children:E.map(w=>n.jsxs("div",{className:`p-4 hover:bg-gray-50 cursor-pointer ${s?.id===w.id?"bg-primary-50":""}`,onClick:()=>A(w),children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:w.name}),n.jsx("p",{className:"text-sm text-gray-500 truncate",children:w.subject})]}),n.jsx("div",{className:"flex items-center gap-1",children:w.enabled?n.jsx(ls,{className:"h-4 w-4 text-green-500"}):n.jsx(mn,{className:"h-4 w-4 text-gray-400"})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${w.category==="event"?"bg-blue-100 text-blue-700":w.category==="cpd"?"bg-purple-100 text-purple-700":w.category==="member"?"bg-green-100 text-green-700":w.category==="system"?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"}`,children:w.category}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:C=>{C.stopPropagation(),k(w)},className:"p-1 hover:bg-gray-200 rounded",title:"Duplicate",children:n.jsx(lE,{className:"h-3 w-3 text-gray-600"})}),n.jsx("button",{onClick:C=>{C.stopPropagation(),L(w.id)},className:"p-1 hover:bg-gray-200 rounded",title:w.enabled?"Disable":"Enable",children:w.enabled?n.jsx(qn,{className:"h-3 w-3 text-gray-600"}):n.jsx(qn,{className:"h-3 w-3 text-gray-400"})}),n.jsx("button",{onClick:C=>{C.stopPropagation(),F(w.id)},className:"p-1 hover:bg-gray-200 rounded",title:"Delete",children:n.jsx(go,{className:"h-3 w-3 text-red-600"})})]})]})]},w.id))})]})}),n.jsx("div",{className:"lg:col-span-2",children:i?n.jsx(ue,{children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:b.id?.startsWith("tpl-")&&!t.find(w=>w.id===b.id)?"New Template":"Edit Template"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(se,{variant:"outline",onClick:()=>{o(!1),j({})},children:[n.jsx(mn,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs(se,{onClick:O,children:[n.jsx(Jd,{className:"h-4 w-4 mr-2"}),"Save"]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"template_name",children:"Template Name *"}),n.jsx(Ne,{id:"template_name",value:b.name||"",onChange:w=>j({...b,name:w.target.value}),placeholder:"e.g., welcome-email"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"template_category",children:"Category *"}),n.jsx("select",{id:"template_category",value:b.category||"custom",onChange:w=>j({...b,category:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:_.filter(w=>w.value!=="all").map(w=>n.jsx("option",{value:w.value,children:w.label},w.value))})]})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"template_subject",children:"Subject Line *"}),n.jsx(Ne,{id:"template_subject",value:b.subject||"",onChange:w=>j({...b,subject:w.target.value}),placeholder:"e.g., Welcome to {{organization_name}}!"})]}),n.jsxs("div",{children:[n.jsx(he,{children:"Variables"}),n.jsx(Ne,{value:b.variables?.join(", ")||"",onChange:w=>j({...b,variables:w.target.value.split(",").map(C=>C.trim()).filter(Boolean)}),placeholder:"e.g., user_name, event_title, event_date"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Comma-separated list of variables that can be used in the template"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsxs("button",{onClick:()=>f("html"),className:`px-3 py-1 rounded ${m==="html"?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-700"}`,children:[n.jsx(tP,{className:"h-4 w-4 inline mr-1"}),"HTML"]}),n.jsxs("button",{onClick:()=>f("text"),className:`px-3 py-1 rounded ${m==="text"?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-700"}`,children:[n.jsx(ri,{className:"h-4 w-4 inline mr-1"}),"Plain Text"]}),n.jsxs("button",{onClick:()=>f("preview"),className:`px-3 py-1 rounded ${m==="preview"?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-700"}`,children:[n.jsx(qn,{className:"h-4 w-4 inline mr-1"}),"Preview"]})]}),m==="html"&&n.jsx("textarea",{value:b.body_html||"",onChange:w=>j({...b,body_html:w.target.value}),className:"w-full h-64 px-3 py-2 border border-gray-300 rounded-md font-mono text-sm",placeholder:"HTML template content..."}),m==="text"&&n.jsx("textarea",{value:b.body_text||"",onChange:w=>j({...b,body_text:w.target.value}),className:"w-full h-64 px-3 py-2 border border-gray-300 rounded-md font-mono text-sm",placeholder:"Plain text template content..."}),m==="preview"&&n.jsxs("div",{className:"border border-gray-300 rounded-md p-4 h-64 overflow-auto bg-white",children:[n.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview Variables:"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:b.variables?.map(w=>n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("span",{className:"text-xs text-gray-600",children:[w,":"]}),n.jsx("input",{type:"text",value:v[w]||"",onChange:C=>S({...v,[w]:C.target.value}),className:"flex-1 text-xs px-1 py-0.5 border border-gray-200 rounded"})]},w))})]}),n.jsx("div",{dangerouslySetInnerHTML:{__html:B()}})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"template_enabled",checked:b.enabled||!1,onChange:w=>j({...b,enabled:w.target.checked}),className:"rounded border-gray-300"}),n.jsx(he,{htmlFor:"template_enabled",children:"Template is enabled"})]})]})]})}):n.jsxs(ue,{className:"p-12 text-center",children:[n.jsx(Xd,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Select a Template"}),n.jsx("p",{className:"text-gray-600",children:"Choose a template from the list to view or edit its content"})]})})]})]})}const jV=({checked:t,onCheckedChange:e,disabled:s=!1,id:r,className:i=""})=>n.jsx("button",{type:"button",role:"switch","aria-checked":t,disabled:s,id:r,className:`
        relative inline-flex h-6 w-11 items-center rounded-full
        transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        ${t?"bg-blue-600":"bg-gray-200"}
        ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        ${i}
      `,onClick:()=>!s&&e(!t),children:n.jsx("span",{className:`
          inline-block h-4 w-4 transform rounded-full bg-white transition
          ${t?"translate-x-6":"translate-x-1"}
        `})}),O0=[{name:"Registration Confirmation",description:"Sent immediately after registration",timing_type:"after",timing_value:0,timing_unit:"minutes",email_subject:"Registration Confirmed: {{event_title}}",email_template:"registration_confirmation",is_active:!0,send_to_all:!1,order_index:0},{name:"7 Days Before",description:"One week reminder",timing_type:"before",timing_value:7,timing_unit:"days",email_subject:"Event in 1 Week: {{event_title}}",email_template:"event_reminder_week",is_active:!0,send_to_all:!0,order_index:1},{name:"3 Days Before",description:"Mid-week reminder",timing_type:"before",timing_value:3,timing_unit:"days",email_subject:"Event in 3 Days: {{event_title}}",email_template:"event_reminder_3days",is_active:!0,send_to_all:!0,order_index:2},{name:"1 Day Before",description:"Day before reminder",timing_type:"before",timing_value:1,timing_unit:"days",email_subject:"Event Tomorrow: {{event_title}}",email_template:"event_reminder_tomorrow",is_active:!0,send_to_all:!0,order_index:3},{name:"30 Minutes Before",description:"Final reminder",timing_type:"before",timing_value:30,timing_unit:"minutes",email_subject:"Starting Soon: {{event_title}}",email_template:"event_starting_soon",is_active:!0,send_to_all:!0,order_index:4},{name:"Event Live",description:"When event goes live",timing_type:"at_start",timing_value:0,timing_unit:"minutes",email_subject:" LIVE NOW: {{event_title}}",email_template:"event_live",is_active:!0,send_to_all:!0,order_index:5}];function NV(){const[t,e]=M.useState([]),[s,r]=M.useState(!0),[i,o]=M.useState(!1),[u,h]=M.useState(!1),[m,f]=M.useState(null),[p,x]=M.useState(""),[b,j]=M.useState(null),v=M.useRef(null),[S,_]=M.useState({name:"",description:"",timing_type:"before",timing_value:1,timing_unit:"days",email_subject:"",email_template:"",is_active:!0,send_to_all:!0});M.useEffect(()=>{E()},[]);const E=async()=>{try{r(!0);const{data:D,error:q}=await V.from("event_reminder_configs").select("*").order("order_index");if(q){console.log("Using default reminders configuration");const H=O0.map((X,P)=>({...X,id:`default-${P}`}));e(H)}else if(D&&D.length>0)e(D);else{const H=O0.map((X,P)=>({...X,id:`default-${P}`}));e(H)}}catch(D){console.error("Error loading reminders:",D);const q=O0.map((H,X)=>({...H,id:`default-${X}`}));e(q)}finally{r(!1)}},A=async()=>{try{o(!0),localStorage.setItem("event_reminder_configs",JSON.stringify(t));try{await V.from("event_reminder_configs").delete().neq("id","00000000-0000-0000-0000-000000000000");const{error:D}=await V.from("event_reminder_configs").insert(t.map(q=>({...q,id:q.id.startsWith("default-")?void 0:q.id})));if(D)throw D;ae("success","Reminder settings saved successfully!")}catch(D){console.log("Saved to localStorage only:",D),ae("success","Settings saved locally")}}catch(D){console.error("Error saving reminders:",D),ae("error","Failed to save reminder settings")}finally{o(!1)}},O=()=>{_({name:"",description:"",timing_type:"before",timing_value:1,timing_unit:"days",email_subject:"",email_template:"",is_active:!0,send_to_all:!0}),f(null),h(!0)},F=D=>{_(D),f(D.id),h(!0),setTimeout(()=>{v.current?.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},k=()=>{if(!S.name||!S.email_subject){ae("error","Please fill in all required fields");return}if(m)e(t.map(D=>D.id===m?{...D,...S}:D));else{const D={id:`custom-${Date.now()}`,name:S.name,description:S.description||"",timing_type:S.timing_type,timing_value:S.timing_value,timing_unit:S.timing_unit,email_subject:S.email_subject,email_template:S.email_template||S.name.toLowerCase().replace(/\s+/g,"_"),is_active:S.is_active,send_to_all:S.send_to_all,order_index:t.length};e([...t,D])}h(!1),f(null)},L=D=>{confirm("Are you sure you want to delete this reminder?")&&e(t.filter(q=>q.id!==D))},B=D=>{e(t.map(q=>q.id===D?{...q,is_active:!q.is_active}:q))},w=D=>{if(D===0)return;const q=[...t];[q[D-1],q[D]]=[q[D],q[D-1]],q.forEach((H,X)=>H.order_index=X),e(q)},C=D=>{if(D===t.length-1)return;const q=[...t];[q[D],q[D+1]]=[q[D+1],q[D]],q.forEach((H,X)=>H.order_index=X),e(q)},z=async D=>{if(!p){ae("error","Please enter a test email address");return}j(D.id);try{const q=`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
          <div style="background: linear-gradient(135deg, #0f172a 0%, #059669 100%); color: white; padding: 30px; text-align: center;">
            <h1 style="margin: 0; font-size: 28px;"> Test Reminder</h1>
            <p style="margin: 12px 0 0 0; opacity: 0.9;">EAU Event Reminder System</p>
          </div>
          <div style="padding: 40px;">
            <p style="font-size: 18px; margin-bottom: 24px;">Hello <strong>Test User</strong>,</p>
            <p>This is a test of the <strong>${D.name}</strong> reminder configuration.</p>
            
            <div style="background: #f8fafc; border: 2px solid #059669; border-radius: 12px; padding: 24px; margin: 24px 0;">
              <h2 style="margin: 0 0 16px 0; color: #0f172a;"> Sample Event Title</h2>
              <div style="font-size: 16px; line-height: 1.8;">
                <div><strong> Date:</strong> August 25, 2025</div>
                <div><strong> Time:</strong> 10:00 AM</div>
                <div><strong> Location:</strong> Online via Zoom</div>
                <div><strong> Reminder Type:</strong> ${R(D)}</div>
              </div>
            </div>
            
            <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 16px; margin: 24px 0; border-radius: 0 8px 8px 0;">
              <h3 style="margin: 0 0 8px 0; color: #856404;"> Reminder Details</h3>
              <p style="margin: 0; color: #856404;"><strong>Subject:</strong> ${D.email_subject}</p>
              <p style="margin: 8px 0 0 0; color: #856404;"><strong>Template:</strong> ${D.email_template}</p>
            </div>
            
            <div style="text-align: center;">
              <a href="http://localhost:5180/events" style="background: #059669; color: white; padding: 14px 28px; text-decoration: none; border-radius: 8px; font-weight: 600;">View Events</a>
            </div>
          </div>
          <div style="background: #f8fafc; padding: 20px; text-align: center; font-size: 14px; color: #64748b;">
            <strong>EAU Members</strong> | Email Reminder Test<br>
            Sent at ${new Date().toLocaleString()}
          </div>
        </div>
      `,H=await fetch("http://localhost:3001/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:p,subject:`[TEST] ${D.email_subject.replace(/\{\{([^}]+)\}\}/g,"Sample Event Title")}`,html:q,text:`Test reminder: ${D.name} - ${R(D)}`,useStoredConfig:!0})});if(H.ok)ae("success",`Test reminder "${D.name}" sent to ${p}`);else{const X=await H.text();console.error("Email send error:",X),ae("error","Failed to send test reminder. Check SMTP configuration.")}}catch(q){console.error("Test reminder error:",q),ae("error","Failed to send test reminder")}finally{j(null)}},R=D=>D.timing_type==="at_start"?"At event start":D.timing_type==="after"?`${D.timing_value} ${D.timing_unit} after registration`:`${D.timing_value} ${D.timing_unit} before event`;return s?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx(aE,{className:"h-8 w-8 text-primary-600"}),"Event Reminder Settings"]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Configure automated email reminders for event registrations"})]}),n.jsx(ue,{className:"p-6 mb-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Xd,{className:"h-5 w-5 text-gray-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx(he,{htmlFor:"test-email",children:"Test Email Address"}),n.jsx(Ne,{id:"test-email",type:"email",placeholder:"Enter email for testing reminders",value:p,onChange:D=>x(D.target.value),className:"max-w-md"})]})]})}),n.jsxs(ue,{className:"p-6 mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Configured Reminders"}),n.jsxs(se,{onClick:O,children:[n.jsx(ro,{className:"h-4 w-4 mr-2"}),"Add Reminder"]})]}),n.jsxs("div",{className:"space-y-4",children:[t.map((D,q)=>n.jsx("div",{className:`border rounded-lg p-4 ${D.is_active?"bg-white":"bg-gray-50"}`,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:D.name}),D.is_active?n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(ls,{className:"h-3 w-3 mr-1"}),"Active"]}):n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Inactive"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:D.description}),n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(si,{className:"h-4 w-4 text-gray-400"}),R(D)]}),n.jsxs("span",{className:"text-gray-500",children:["Subject: ",D.email_subject]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(se,{variant:"ghost",size:"sm",onClick:()=>w(q),disabled:q===0,children:""}),n.jsx(se,{variant:"ghost",size:"sm",onClick:()=>C(q),disabled:q===t.length-1,children:""}),n.jsx(jV,{checked:D.is_active,onCheckedChange:()=>B(D.id)}),n.jsx(se,{variant:"ghost",size:"sm",onClick:()=>F(D),children:n.jsx(no,{className:"h-4 w-4"})}),p&&n.jsx(se,{variant:"ghost",size:"sm",onClick:()=>z(D),disabled:b===D.id,children:b===D.id?n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):n.jsx(jy,{className:"h-4 w-4"})}),!D.id.startsWith("default-")&&n.jsx(se,{variant:"ghost",size:"sm",onClick:()=>L(D.id),className:"text-red-600 hover:text-red-700",children:n.jsx(go,{className:"h-4 w-4"})})]})]})},D.id)),t.length===0&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:'No reminders configured. Click "Add Reminder" to create one.'})]})]}),u&&n.jsxs(ue,{className:"p-6 mb-6",ref:v,children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:m?"Edit Reminder":"Add New Reminder"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(he,{htmlFor:"name",children:"Reminder Name *"}),n.jsx(Ne,{id:"name",value:S.name,onChange:D=>_({...S,name:D.target.value}),placeholder:"e.g., 2 Hours Before"})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"description",children:"Description"}),n.jsx(Ne,{id:"description",value:S.description,onChange:D=>_({...S,description:D.target.value}),placeholder:"Brief description"})]}),n.jsxs("div",{children:[n.jsx(he,{children:"Timing"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ne,{type:"number",min:"0",value:S.timing_value,onChange:D=>_({...S,timing_value:parseInt(D.target.value)}),className:"w-20"}),n.jsxs("select",{value:S.timing_unit,onChange:D=>_({...S,timing_unit:D.target.value}),className:"flex-1 rounded-md border border-gray-300 px-3 py-2",children:[n.jsx("option",{value:"minutes",children:"Minutes"}),n.jsx("option",{value:"hours",children:"Hours"}),n.jsx("option",{value:"days",children:"Days"})]}),n.jsxs("select",{value:S.timing_type,onChange:D=>_({...S,timing_type:D.target.value}),className:"flex-1 rounded-md border border-gray-300 px-3 py-2",children:[n.jsx("option",{value:"before",children:"Before Event"}),n.jsx("option",{value:"after",children:"After Registration"}),n.jsx("option",{value:"at_start",children:"At Event Start"})]})]})]}),n.jsxs("div",{children:[n.jsx(he,{htmlFor:"email_subject",children:"Email Subject *"}),n.jsx(Ne,{id:"email_subject",value:S.email_subject,onChange:D=>_({...S,email_subject:D.target.value}),placeholder:"Use {{event_title}} for dynamic content"})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx(he,{htmlFor:"email_template",children:"Template Name"}),n.jsx(Ne,{id:"email_template",value:S.email_template,onChange:D=>_({...S,email_template:D.target.value}),placeholder:"Template identifier (e.g., reminder_2hours)"})]}),n.jsxs("div",{className:"col-span-2 flex items-center gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:S.is_active,onChange:D=>_({...S,is_active:D.target.checked})}),n.jsx("span",{children:"Active"})]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:S.send_to_all,onChange:D=>_({...S,send_to_all:D.target.checked})}),n.jsx("span",{children:"Send to all registrants"})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx(se,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),n.jsxs(se,{onClick:k,children:[m?"Update":"Add"," Reminder"]})]})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx(se,{variant:"outline",onClick:E,disabled:i,children:"Reset to Defaults"}),n.jsx(se,{onClick:A,disabled:i,className:"min-w-[120px]",children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Jd,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})]}),n.jsx("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex",children:[n.jsx(ti,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-blue-900 font-semibold mb-1",children:"Available Variables"}),n.jsx("p",{className:"text-blue-800 text-sm mb-2",children:"You can use these variables in email subjects and templates:"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-blue-700",children:[n.jsx("code",{children:"{{event_title}}"}),n.jsx("code",{children:"{{event_date}}"}),n.jsx("code",{children:"{{event_time}}"}),n.jsx("code",{children:"{{event_location}}"}),n.jsx("code",{children:"{{user_name}}"}),n.jsx("code",{children:"{{user_email}}"}),n.jsx("code",{children:"{{registration_id}}"}),n.jsx("code",{children:"{{event_link}}"})]})]})]})})]})}async function SV(){try{console.log("Setting up storage bucket...");const{data:t,error:e}=await V.storage.listBuckets();if(e)return console.error("Error listing buckets:",e),!1;if(t?.some(r=>r.name==="media"))return console.log("Storage bucket already exists"),!0;{const{data:r,error:i}=await V.storage.createBucket("media",{public:!0,allowedMimeTypes:["image/jpeg","image/png","image/gif","image/webp"],fileSizeLimit:5242880});return i?(console.error("Error creating bucket:",i),!1):(console.log("Storage bucket created successfully"),!0)}}catch(t){return console.error("Setup error:",t),!1}}function EV(){const[t,e]=M.useState(!1),[s,r]=M.useState([]),i=async()=>{e(!0),r([]);const o=[];try{o.push("Setting up storage bucket..."),r([...o]),await SV()?o.push(" Storage bucket ready"):o.push(" Storage bucket setup failed (may already exist)"),r([...o]),o.push("Checking database tables..."),r([...o]);const{error:h}=await V.from("media_folders").select("id").limit(1);if(h)o.push(" media_folders table not found - please run SQL script manually"),o.push("Copy the content from database/media_library_schema_fixed.sql"),o.push("and execute it in Supabase SQL Editor");else{o.push(" media_folders table exists");const p=[{name:"Events",path:"/events/"},{name:"Members",path:"/members/"},{name:"CPD",path:"/cpd/"},{name:"General",path:"/general/"},{name:"Banners",path:"/banners/"},{name:"Icons",path:"/icons/"}];for(const x of p){const{error:b}=await V.from("media_folders").upsert(x,{onConflict:"path"});b||o.push(` Created folder: ${x.name}`)}}r([...o]);const{error:m}=await V.from("media_files").select("id").limit(1);m?o.push(" media_files table not found"):o.push(" media_files table exists"),r([...o]);const{error:f}=await V.from("media_usage").select("id").limit(1);if(f?o.push(" media_usage table not found"):o.push(" media_usage table exists"),r([...o]),!m){const{count:p}=await V.from("media_files").select("*",{count:"exact",head:!0});if(p===0){o.push("Adding sample images..."),r([...o]);const x=[{filename:"conference-event.jpg",original_filename:"conference-event.jpg",file_type:"image/jpeg",file_size:102400,mime_type:"image/jpeg",url:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800",thumbnail_url:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=200",medium_url:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=600",title:"Conference Event",category:"events",status:"active",is_public:!0},{filename:"business-meeting.jpg",original_filename:"business-meeting.jpg",file_type:"image/jpeg",file_size:98304,mime_type:"image/jpeg",url:"https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=800",thumbnail_url:"https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=200",medium_url:"https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=600",title:"Business Meeting",category:"events",status:"active",is_public:!0},{filename:"networking-event.jpg",original_filename:"networking-event.jpg",file_type:"image/jpeg",file_size:110592,mime_type:"image/jpeg",url:"https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=800",thumbnail_url:"https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=200",medium_url:"https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=600",title:"Networking Event",category:"events",status:"active",is_public:!0},{filename:"workshop.jpg",original_filename:"workshop.jpg",file_type:"image/jpeg",file_size:94208,mime_type:"image/jpeg",url:"https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=800",thumbnail_url:"https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=200",medium_url:"https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=600",title:"Workshop",category:"events",status:"active",is_public:!0}];for(const b of x){const{error:j}=await V.from("media_files").insert(b);j||o.push(` Added sample image: ${b.title}`)}r([...o])}}o.push(""),o.push(" Media Library setup completed!"),o.push(""),o.push(" If any tables are missing, please:"),o.push("1. Go to Supabase SQL Editor"),o.push("2. Copy the SQL from database/media_library_schema_fixed.sql"),o.push("3. Execute the script"),r([...o]),ae("success","Media Library setup completed!")}catch(u){console.error("Setup error:",u),o.push(` Error: ${u.message}`),r([...o]),ae("error","Failed to setup Media Library")}finally{e(!1)}};return n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs(ue,{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Media Library Setup"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"This will check and setup the Media Library system. If tables don't exist, you'll need to run the SQL script manually in Supabase."}),n.jsx(se,{onClick:i,disabled:t,className:"mb-6",children:t?n.jsxs(n.Fragment,{children:[n.jsx(RP,{className:"h-4 w-4 mr-2 animate-spin"}),"Running setup..."]}):"Run Setup"}),s.length>0&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Setup Log:"}),n.jsx("div",{className:"space-y-1 font-mono text-sm",children:s.map((o,u)=>n.jsx("div",{className:`${o.includes("")?"text-green-600":o.includes("")?"text-red-600":o.includes("")?"text-yellow-600":o.includes("")?"text-primary-600 font-semibold":o.includes("")?"text-blue-600":"text-gray-700"}`,children:o||""},u))})]})]})})}function CV({content:t,onChange:e,placeholder:s="Start typing...",height:r="200px",enableDebugLogs:i=!0}){const o=M.useRef(null),u=M.useRef(null),[h,m]=M.useState(!1),f=M.useRef(null),p=M.useRef(e),x=M.useCallback((v,S)=>{if(!i)return;const _=new Date().toISOString();console.group(`[QuillEditor ${_}] ${v}`),S&&console.log("Data:",S),console.groupEnd()},[i]),b=M.useCallback(async v=>{try{if(m(!0),x("Starting image upload",{fileName:v.name,fileSize:v.size,fileType:v.type}),!v.type.startsWith("image/"))throw new Error("Please select an image file");if(v.size>5*1024*1024)throw new Error("Image size must be less than 5MB");const S=v.name.split(".").pop(),E=`editor-images/${`${Date.now()}_${Math.random().toString(36).substr(2,9)}.${S}`}`;x("Uploading to Supabase",{filePath:E});const{data:A,error:O}=await V.storage.from("media").upload(E,v,{contentType:v.type,cacheControl:"3600"});if(O)throw x("Upload error",O),O;x("Upload successful",A);const{data:{publicUrl:F}}=V.storage.from("media").getPublicUrl(E);if(x("Public URL generated",{publicUrl:F}),u.current){const k=u.current.getSelection(),L=k?k.index:0;u.current.insertEmbed(L,"image",F),u.current.setSelection(L+1)}ae("success","Image uploaded successfully")}catch(S){x("Image upload failed",S),ae("error",S.message||"Failed to upload image")}finally{m(!1),f.current&&(f.current.value="")}},[x]),j=M.useCallback(()=>{x("Image button clicked"),f.current?.click()},[x]);return M.useEffect(()=>{p.current=e},[e]),M.useEffect(()=>{if(!o.current||u.current)return;x("Initializing Quill editor");const v=new be(o.current,{theme:"snow",placeholder:s,modules:{toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"bullet"},{list:"ordered"}],[{indent:"-1"},{indent:"+1"}],["link","image","video"],[{color:[]},{background:[]}],[{align:[]}],["clean"]],handlers:{image:j}},clipboard:{matchVisual:!1}}});return t&&(x("Setting initial content",{content:t}),v.root.innerHTML=t),v.on("text-change",(S,_,E)=>{x("Text changed",{source:E,deltaOps:S.ops?.length,html:v.root.innerHTML});const A=v.root.innerHTML;A==="<p><br></p>"?p.current(""):p.current(A)}),v.on("selection-change",(S,_,E)=>{x("Selection changed",{range:S,oldRange:_,source:E})}),v.root.addEventListener("paste",async S=>{x("Paste event detected");const _=S.clipboardData?.items;if(_){for(const E of _)if(E.type.startsWith("image/")){S.preventDefault();const A=E.getAsFile();A&&(x("Image pasted",{fileName:A.name,fileType:A.type}),await b(A))}}}),u.current=v,x("Quill editor initialized successfully"),()=>{x("Cleaning up Quill editor"),v.off("text-change"),v.off("selection-change")}},[s,j,b,x]),M.useEffect(()=>{if(!u.current)return;const v=u.current.root.innerHTML,S=v==="<p><br></p>"||v==="",_=!t||t==="";x("Content prop check",{currentHtml:v?.substring(0,100),propContent:t?.substring(0,100),willUpdate:v!==t&&!(S&&_)}),!(S&&_)&&v!==t&&(x("Updating content from prop",{oldContent:v,newContent:t}),u.current.off("text-change"),u.current.root.innerHTML=t||"",setTimeout(()=>{u.current&&u.current.on("text-change",(E,A,O)=>{x("Text changed (re-attached)",{source:O,deltaOps:E.ops?.length,html:u.current?.root.innerHTML});const F=u.current?.root.innerHTML||"";F==="<p><br></p>"?p.current(""):p.current(F)})},0))},[t,x]),n.jsxs("div",{className:"quill-editor-wrapper relative",children:[n.jsx("input",{ref:f,type:"file",accept:"image/*",className:"hidden",onChange:v=>{const S=v.target.files?.[0];S&&(x("File selected",{fileName:S.name}),b(S))}}),h&&n.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center z-50 rounded-md",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5 animate-spin"}),n.jsx("span",{children:"Uploading image..."})]})}),n.jsx("div",{ref:o,style:{height:r},className:"bg-white"}),n.jsx("style",{children:`
        .quill-editor-wrapper .ql-toolbar {
          border: 1px solid #e5e7eb;
          border-bottom: none;
          border-radius: 0.375rem 0.375rem 0 0;
          background: #f9fafb;
        }
        
        .quill-editor-wrapper .ql-container {
          border: 1px solid #e5e7eb;
          border-radius: 0 0 0.375rem 0.375rem;
          font-family: inherit;
          overflow: hidden;
        }
        
        .quill-editor-wrapper .ql-editor {
          min-height: ${r};
          max-height: 400px;
          overflow-y: auto;
          overflow-x: hidden;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
          white-space: pre-wrap;
        }
        
        .quill-editor-wrapper .ql-editor * {
          max-width: 100%;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
        }
        
        .quill-editor-wrapper .ql-editor p,
        .quill-editor-wrapper .ql-editor li,
        .quill-editor-wrapper .ql-editor h1,
        .quill-editor-wrapper .ql-editor h2,
        .quill-editor-wrapper .ql-editor h3,
        .quill-editor-wrapper .ql-editor h4,
        .quill-editor-wrapper .ql-editor h5,
        .quill-editor-wrapper .ql-editor h6,
        .quill-editor-wrapper .ql-editor blockquote {
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
          max-width: 100%;
        }
        
        .quill-editor-wrapper .ql-editor img {
          max-width: 100%;
          height: auto;
          border-radius: 0.375rem;
          margin: 0.5rem 0;
        }
        
        .quill-editor-wrapper .ql-editor.ql-blank::before {
          color: #9ca3af;
          font-style: normal;
        }
        
        .quill-editor-wrapper .ql-snow .ql-tooltip {
          z-index: 100;
        }
        
        /* Custom scrollbar */
        .quill-editor-wrapper .ql-editor::-webkit-scrollbar {
          width: 8px;
        }
        
        .quill-editor-wrapper .ql-editor::-webkit-scrollbar-track {
          background: #f1f1f1;
          border-radius: 4px;
        }
        
        .quill-editor-wrapper .ql-editor::-webkit-scrollbar-thumb {
          background: #888;
          border-radius: 4px;
        }
        
        .quill-editor-wrapper .ql-editor::-webkit-scrollbar-thumb:hover {
          background: #555;
        }
      `})]})}function AV(){const[t,e]=M.useState(""),[s,r]=M.useState(""),[i,o]=M.useState(!1),u=()=>{r(t),ae("success","Content saved successfully"),console.log("Saved content:",t)},h=()=>{e(""),r(""),ae("info","Content cleared")};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Rich Text Editor Test"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx("div",{children:n.jsxs(ue,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quill Editor"}),n.jsx(CV,{content:t,onChange:e,placeholder:"Start typing or paste an image...",height:"300px",enableDebugLogs:!0}),n.jsxs("div",{className:"mt-4 flex gap-2",children:[n.jsx(se,{onClick:u,children:"Save Content"}),n.jsx(se,{variant:"outline",onClick:h,children:"Clear"}),n.jsxs(se,{variant:"outline",onClick:()=>o(!i),children:[i?"Hide":"Show"," Preview"]})]}),n.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Features:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[n.jsx("li",{children:"Rich text formatting (bold, italic, underline, etc.)"}),n.jsx("li",{children:"Headers and lists"}),n.jsx("li",{children:"Image upload from computer (click image button)"}),n.jsx("li",{children:"Paste images directly (Ctrl+V)"}),n.jsx("li",{children:"Links and videos"}),n.jsx("li",{children:"Color and background formatting"}),n.jsx("li",{children:"All changes are logged in the console (F12)"})]})]})]})}),n.jsxs("div",{children:[n.jsxs(ue,{className:"p-6 mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Raw HTML Output"}),n.jsx("div",{className:"bg-gray-100 p-4 rounded font-mono text-xs overflow-x-auto max-h-48 overflow-y-auto",children:n.jsx("pre",{children:t||"<empty>"})})]}),i&&n.jsxs(ue,{className:"p-6 mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Rendered Preview"}),n.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:t||'<p class="text-gray-400">No content to preview</p>'}})]}),s&&n.jsxs(ue,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Last Saved Content"}),n.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s}})]})]})]})]})}function kV(){const t=`
    <h1>Heading 1 - Main Title</h1>
    <p>This is a regular paragraph with some <strong>bold text</strong>, <em>italic text</em>, and <u>underlined text</u>. You can also have <s>strikethrough text</s>.</p>
    
    <h2>Heading 2 - Section Title</h2>
    <p>Here's another paragraph demonstrating text formatting. You can combine <strong><em>bold and italic</em></strong> or any other combination.</p>
    
    <h3>Heading 3 - Subsection</h3>
    <p>Let's demonstrate lists. Here's an unordered list:</p>
    <ul>
      <li>First item in the list</li>
      <li>Second item with <strong>bold text</strong></li>
      <li>Third item with nested list:
        <ul>
          <li>Nested item 1</li>
          <li>Nested item 2</li>
          <li>Nested item 3 with another level:
            <ul>
              <li>Deep nested item</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Fourth item back at main level</li>
    </ul>
    
    <h3>Ordered Lists</h3>
    <p>Now let's see an ordered list:</p>
    <ol>
      <li>First step in the process</li>
      <li>Second step with more details</li>
      <li>Third step with sub-steps:
        <ol>
          <li>Sub-step A</li>
          <li>Sub-step B</li>
          <li>Sub-step C</li>
        </ol>
      </li>
      <li>Final step</li>
    </ol>
    
    <h2>Blockquotes and Code</h2>
    <blockquote>
      "This is a blockquote. It's typically used for quotes or to highlight important information. It can span multiple lines and should be visually distinct from regular text."
    </blockquote>
    
    <p>Here's some inline code: <code>const example = "Hello World";</code> within a paragraph.</p>
    
    <pre><code>// Code block example
function greet(name) {
  return \`Hello, \${name}!\`;
}

const message = greet("Developer");
console.log(message);</code></pre>
    
    <h2>Links and Text Alignment</h2>
    <p>You can add <a href="https://example.com" target="_blank">links to external sites</a> or internal pages.</p>
    
    <p class="ql-align-center">This text is centered using Quill's alignment class.</p>
    
    <p class="ql-align-right">This text is right-aligned.</p>
    
    <p class="ql-align-justify">This is a justified paragraph. When text is justified, it is aligned along both the left and right margins. This creates a clean, formal appearance that's often used in printed materials like newspapers and books. The spacing between words is adjusted to achieve this alignment.</p>
    
    <h2>Indentation</h2>
    <p>Regular paragraph without indentation.</p>
    <p class="ql-indent-1">This paragraph has level 1 indentation.</p>
    <p class="ql-indent-2">This paragraph has level 2 indentation.</p>
    <p class="ql-indent-3">This paragraph has level 3 indentation.</p>
    
    <hr>
    
    <h2>Mixed Content Example</h2>
    <p>Let's combine everything in a real-world example:</p>
    
    <h3>Workshop Agenda</h3>
    <ol>
      <li><strong>9:00 AM - Introduction</strong>
        <ul>
          <li>Welcome and overview</li>
          <li>Participant introductions</li>
        </ul>
      </li>
      <li><strong>9:30 AM - Theory Session</strong>
        <ul>
          <li>Core concepts</li>
          <li>Best practices</li>
          <li>Case studies</li>
        </ul>
      </li>
      <li><strong>11:00 AM - Practical Exercise</strong>
        <blockquote>
          "Learning by doing is the most effective way to master new skills."
        </blockquote>
      </li>
      <li><strong>12:00 PM - Lunch Break</strong></li>
      <li><strong>1:00 PM - Advanced Topics</strong>
        <ul>
          <li>Complex scenarios</li>
          <li>Troubleshooting tips</li>
        </ul>
      </li>
    </ol>
    
    <p><em>Note: All times are in AEDT (Australian Eastern Daylight Time)</em></p>
  `;return n.jsxs("div",{className:"container mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Rich Content Styles Test"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx("div",{children:n.jsxs(ue,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Raw HTML (from Quill)"}),n.jsx("div",{className:"bg-gray-100 p-4 rounded font-mono text-xs overflow-x-auto max-h-96 overflow-y-auto",children:n.jsx("pre",{children:t})})]})}),n.jsx("div",{children:n.jsxs(ue,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Rendered Content"}),n.jsx("div",{className:"rich-content",dangerouslySetInnerHTML:{__html:t}})]})})]}),n.jsx("div",{className:"mt-8",children:n.jsxs(ue,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Full Width Rendered Content"}),n.jsx("div",{className:"rich-content",dangerouslySetInnerHTML:{__html:t}})]})})]})}function Hy({content:t,onChange:e,placeholder:s="Start typing...",height:r="200px",enableDebugLogs:i=!1}){const o=M.useRef(null),u=M.useRef(null),[h,m]=M.useState(!1),f=M.useRef(null),p=M.useRef(!1),x=M.useCallback((j,v)=>{i&&console.log(`[QuillEditor] ${j}`,v||"")},[i]),b=M.useCallback(async j=>{try{if(m(!0),x("Starting image upload",{fileName:j.name}),!j.type.startsWith("image/"))throw new Error("Please select an image file");if(j.size>5*1024*1024)throw new Error("Image size must be less than 5MB");const v=j.name.split(".").pop(),_=`editor-images/${`${Date.now()}_${Math.random().toString(36).substr(2,9)}.${v}`}`,{data:E,error:A}=await V.storage.from("media").upload(_,j,{contentType:j.type,cacheControl:"3600"});if(A)throw A;const{data:{publicUrl:O}}=V.storage.from("media").getPublicUrl(_);if(u.current){const F=u.current.getSelection()||{index:0};u.current.insertEmbed(F.index,"image",O),u.current.setSelection(F.index+1)}ae("success","Image uploaded successfully")}catch(v){x("Image upload failed",v),ae("error",v.message||"Failed to upload image")}finally{m(!1),f.current&&(f.current.value="")}},[x]);return M.useEffect(()=>{if(!o.current||u.current)return;x("Initializing Quill editor");const j=new be(o.current,{theme:"snow",placeholder:s,modules:{toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"bullet"},{list:"ordered"}],["link","image"],[{color:[]},{background:[]}],["clean"]],handlers:{image:()=>f.current?.click()}}}});t&&t!=="<p><br></p>"&&(j.root.innerHTML=t);const v=document.createElement("style");v.textContent=`
      ${o.current.id?`#${o.current.id}`:""} .ql-editor li[data-list="bullet"] {
        list-style-type: disc !important;
      }
      ${o.current.id?`#${o.current.id}`:""} .ql-editor ul li {
        list-style-type: disc !important;
      }
      ${o.current.id?`#${o.current.id}`:""} .ql-editor ul {
        list-style-type: disc !important;
      }
    `,document.head.appendChild(v);const S=`quill-editor-${Math.random().toString(36).substr(2,9)}`;return o.current.id=S,j.on("text-change",()=>{if(p.current){p.current=!1;return}const _=j.root.innerHTML;x("Text changed",{preview:_.substring(0,100)}),j.root.querySelectorAll('li[data-list="bullet"]').forEach(F=>{const k=F.parentElement;if(k&&k.tagName==="OL"){const L=document.createElement("ul");L.innerHTML=k.innerHTML,k.parentNode?.replaceChild(L,k)}}),j.root.querySelectorAll("ul").forEach(F=>{F.style.listStyleType="disc",F.querySelectorAll("li").forEach(k=>{k.style.listStyleType="disc"})});const O=j.root.innerHTML;e(O==="<p><br></p>"?"":O)}),j.root.addEventListener("paste",async _=>{const E=_.clipboardData?.items;if(E){for(const A of E)if(A.type.startsWith("image/")){_.preventDefault();const O=A.getAsFile();O&&await b(O)}}}),u.current=j,()=>{j.off("text-change")}},[]),M.useEffect(()=>{if(!u.current)return;const j=u.current.root.innerHTML;j===t||(!j||j==="<p><br></p>")&&(!t||t==="<p><br></p>"||t==="")||(x("Updating content from prop",{old:j.substring(0,50),new:t.substring(0,50)}),p.current=!0,u.current.root.innerHTML=t||"")},[t,x]),n.jsxs("div",{className:"quill-editor-wrapper relative",children:[n.jsx("input",{ref:f,type:"file",accept:"image/*",className:"hidden",onChange:j=>{const v=j.target.files?.[0];v&&b(v)}}),h&&n.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center z-50 rounded-md",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5 animate-spin"}),n.jsx("span",{children:"Uploading image..."})]})}),n.jsx("div",{ref:o,style:{height:r},className:"bg-white"}),n.jsx("style",{children:`
        .quill-editor-wrapper .ql-toolbar {
          border: 1px solid #e5e7eb;
          border-bottom: none;
          border-radius: 0.375rem 0.375rem 0 0;
          background: #f9fafb;
        }
        
        .quill-editor-wrapper .ql-container {
          border: 1px solid #e5e7eb;
          border-radius: 0 0 0.375rem 0.375rem;
          font-family: inherit;
          overflow: hidden;
        }
        
        .quill-editor-wrapper .ql-editor {
          min-height: ${r};
          max-height: 400px;
          overflow-y: auto;
          overflow-x: hidden;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
          white-space: pre-wrap;
        }
        
        .quill-editor-wrapper .ql-editor * {
          max-width: 100%;
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
        }
        
        .quill-editor-wrapper .ql-editor p,
        .quill-editor-wrapper .ql-editor li,
        .quill-editor-wrapper .ql-editor h1,
        .quill-editor-wrapper .ql-editor h2,
        .quill-editor-wrapper .ql-editor h3,
        .quill-editor-wrapper .ql-editor h4,
        .quill-editor-wrapper .ql-editor h5,
        .quill-editor-wrapper .ql-editor h6 {
          word-wrap: break-word;
          word-break: break-word;
          overflow-wrap: break-word;
        }
        
        .quill-editor-wrapper .ql-editor img {
          max-width: 100%;
          height: auto;
          border-radius: 0.375rem;
          margin: 0.5rem 0;
        }
        
        .quill-editor-wrapper .ql-editor.ql-blank::before {
          color: #9ca3af;
          font-style: normal;
        }
        
        
        /* Nested bullets */
        .quill-editor-wrapper .ql-editor ul ul {
          list-style-type: circle !important;
        }
        
        .quill-editor-wrapper .ql-editor ul ul ul {
          list-style-type: square !important;
        }
        
        /* Ensure ordered lists remain numbered */
        .quill-editor-wrapper .ql-editor ol {
          list-style-type: decimal !important;
          padding-left: 1.5em !important;
        }
        
        .quill-editor-wrapper .ql-editor ol li {
          list-style-type: decimal !important;
          display: list-item !important;
        }
      `})]})}function Ax({content:t,className:e=""}){const s=t.replace(/<ul>/g,'<ul style="list-style:none!important;list-style-type:none!important;margin:0.5em 0!important;padding-left:0!important;">').replace(/<li>/g,'<li style="list-style:none!important;list-style-type:none!important;position:relative!important;padding-left:1.5em!important;margin:0.25em 0!important;display:block!important;">');return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`ql-container ql-snow ${e}`,style:{border:"none"},children:n.jsx("div",{className:"ql-editor bullets-fixed",style:{padding:0,minHeight:"auto",fontSize:"16px",lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:s}})}),n.jsx("style",{children:`
        /* SUPER SPECIFIC FIX: Custom bullets for bullets-fixed class */
        .bullets-fixed ul li::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
          top: 0 !important;
          color: currentColor !important;
          font-weight: bold !important;
          display: inline-block !important;
          width: 1em !important;
          height: 1em !important;
          line-height: 1 !important;
          z-index: 1 !important;
        }
        
        /* Hide ALL possible markers */
        .bullets-fixed ul li::marker {
          content: none !important;
          display: none !important;
          visibility: hidden !important;
          opacity: 0 !important;
        }
        
        .bullets-fixed ul li::-webkit-details-marker {
          display: none !important;
        }
        
        .bullets-fixed ul li {
          list-style: none !important;
          list-style-type: none !important;
          list-style-image: none !important;
          counter-increment: none !important;
        }
        
        .bullets-fixed ul {
          list-style: none !important;
          list-style-type: none !important;
          list-style-image: none !important;
          counter-reset: none !important;
        }
        
        /* Force override any external styles */
        [data-list] {
          list-style: none !important;
        }
        
        [data-list="bullet"] {
          list-style: none !important;
        }
        
        [data-list="bullet"]::marker {
          display: none !important;
        }
        
        [data-list="bullet"]::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
        }
        
        .ql-editor ul > li[data-list] {
          list-style-type: disc !important;
        }
        
        .ql-editor ul > li[data-list="bullet"] {
          list-style-type: disc !important;
        }
        
        .ql-editor ul ul {
          list-style-type: circle !important;
        }
        
        .ql-editor ul ul ul {
          list-style-type: square !important;
        }
        
        .ql-editor ol {
          list-style-type: decimal !important;
          display: block !important;
          margin-block-start: 0.5em !important;
          margin-block-end: 0.5em !important;
          padding-inline-start: 1.5em !important;
        }
        
        .ql-editor ol > li {
          list-style-type: decimal !important;
          display: list-item !important;
          margin: 0.25em 0 !important;
        }
        
        .ql-editor ol > li::before {
          display: none !important;
          content: none !important;
        }
        
        .ql-editor ol > li[data-list] {
          list-style-type: decimal !important;
        }
        
        .ql-editor ol > li[data-list="ordered"] {
          list-style-type: decimal !important;
        }
        
        /* Counter reset for any Quill counters */
        .ql-editor {
          counter-reset: none !important;
        }
        
        .ql-editor li {
          counter-increment: none !important;
        }
        
        .ql-editor li:before {
          content: none !important;
        }
        
        /* Spacing adjustments */
        .ql-editor h1 {
          margin: 0.5em 0 !important;
          font-size: 2em !important;
        }
        
        .ql-editor h2 {
          margin: 0.5em 0 !important;
          font-size: 1.5em !important;
        }
        
        .ql-editor h3 {
          margin: 0.5em 0 !important;
          font-size: 1.17em !important;
        }
        
        .ql-editor p {
          margin: 0.5em 0 !important;
        }
        
        .ql-editor p:first-child {
          margin-top: 0 !important;
        }
        
        .ql-editor p:last-child {
          margin-bottom: 0 !important;
        }
        
        .ql-editor blockquote {
          margin: 0.5em 0 !important;
          padding-left: 1em !important;
        }
        
        /* Remove any Quill-specific list indentation classes */
        .ql-editor .ql-indent-1 { padding-left: 3em !important; }
        .ql-editor .ql-indent-2 { padding-left: 6em !important; }
        .ql-editor .ql-indent-3 { padding-left: 9em !important; }
        .ql-editor .ql-indent-4 { padding-left: 12em !important; }
        .ql-editor .ql-indent-5 { padding-left: 15em !important; }
        .ql-editor .ql-indent-6 { padding-left: 18em !important; }
        .ql-editor .ql-indent-7 { padding-left: 21em !important; }
        .ql-editor .ql-indent-8 { padding-left: 24em !important; }
      `})]})}function TV(){const[t,e]=M.useState(`
    <h1>WYSIWYG Test - What You See Is What You Get</h1>
    <p>This page demonstrates that the content looks exactly the same in the editor and when rendered.</p>
    
    <h2>Unordered List (Bullet Points)</h2>
    <ul>
      <li>First bullet point</li>
      <li>Second bullet point</li>
      <li>Third bullet point with nested items:
        <ul>
          <li>Nested item 1</li>
          <li>Nested item 2</li>
        </ul>
      </li>
    </ul>
    
    <h2>Ordered List (Numbers)</h2>
    <ol>
      <li>First numbered item</li>
      <li>Second numbered item</li>
      <li>Third numbered item</li>
    </ol>
    
    <blockquote>This is a blockquote. It should look the same in both views.</blockquote>
    
    <p><strong>Bold text</strong>, <em>italic text</em>, and <u>underlined text</u>.</p>
  `),[s,r]=M.useState(!0);return n.jsxs("div",{className:"container mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-3xl font-bold mb-4",children:"WYSIWYG Test - Editor vs Display"}),n.jsx("p",{className:"text-gray-600 mb-8",children:"This page shows that content looks identical in the editor and when displayed to users."}),n.jsx("div",{className:"mb-4",children:n.jsx(se,{onClick:()=>r(!s),variant:s?"primary":"outline",children:s?"Switch to Display Mode":"Switch to Edit Mode"})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs(ue,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4 text-green-600",children:"Editor View (What Admin Sees)"}),n.jsx("div",{className:s?"":"opacity-50 pointer-events-none",children:n.jsx(Hy,{content:t,onChange:e,placeholder:"Start typing...",height:"400px",enableDebugLogs:!1})})]}),n.jsxs(ue,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4 text-blue-600",children:"Display View (What Users See)"}),n.jsx("div",{className:"border border-gray-200 rounded-lg p-4 min-h-[400px]",children:n.jsx(Ax,{content:t})})]})]}),n.jsx("div",{className:"mt-8",children:n.jsxs(ue,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Full Width Display (Event Details Page)"}),n.jsx("div",{className:"border-t pt-4",children:n.jsx(Ax,{content:t})})]})}),n.jsx("div",{className:"mt-8",children:n.jsxs(ue,{className:"p-6 bg-blue-50",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Instructions:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Edit content in the left panel (Editor View)"}),n.jsx("li",{children:"See real-time updates in the right panel (Display View)"}),n.jsx("li",{children:"Toggle between edit and display modes with the button"}),n.jsx("li",{children:"Notice that bullet points remain as bullets (not numbers)"}),n.jsx("li",{children:"All formatting looks identical in both views"})]})]})})]})}function OV(){const[t,e]=M.useState(""),s=()=>{e(`
      <h2>Test Content</h2>
      <p>This is a paragraph.</p>
      <ul>
        <li>First bullet point</li>
        <li>Second bullet point</li>
        <li>Third bullet point</li>
      </ul>
      <ol>
        <li>First numbered item</li>
        <li>Second numbered item</li>
      </ol>
    `)};return n.jsxs("div",{className:"container mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Quill HTML Debug Tool"}),n.jsxs("div",{className:"mb-4 space-x-2",children:[n.jsx(se,{onClick:s,children:"Load Sample Content"}),n.jsx(se,{onClick:()=>e(""),variant:"outline",children:"Clear"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsxs(ue,{className:"p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"1. Create content in editor:"}),n.jsx(Hy,{content:t,onChange:r=>{console.log("Content changed:",r),e(r)},height:"300px",enableDebugLogs:!1})]}),n.jsxs(ue,{className:"p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"2. Raw HTML generated by Quill:"}),n.jsx("div",{className:"bg-gray-900 text-green-400 p-4 rounded font-mono text-xs overflow-auto max-h-[300px]",children:n.jsx("pre",{children:t||"(empty)"})})]})]}),n.jsxs(ue,{className:"p-4 mt-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"3. Raw browser rendering (no Quill styles):"}),n.jsx("div",{className:"border p-4 rounded",dangerouslySetInnerHTML:{__html:t}})]}),n.jsxs(ue,{className:"p-4 mt-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"4. With ql-editor class (Quill styles):"}),n.jsx("div",{className:"ql-editor border p-4 rounded",dangerouslySetInnerHTML:{__html:t}})]}),n.jsxs(ue,{className:"p-4 mt-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"5. With fixed styles:"}),n.jsx("div",{className:"quill-display-content border p-4 rounded",dangerouslySetInnerHTML:{__html:t}})]}),n.jsx("style",{children:`
        /* Fixed styles for display */
        .quill-display-content {
          font-size: 16px;
          line-height: 1.6;
          color: #333;
        }
        
        .quill-display-content h1 { 
          font-size: 2em; 
          margin: 0.5em 0; 
          font-weight: bold; 
        }
        
        .quill-display-content h2 { 
          font-size: 1.5em; 
          margin: 0.5em 0; 
          font-weight: bold; 
        }
        
        .quill-display-content h3 { 
          font-size: 1.17em; 
          margin: 0.5em 0; 
          font-weight: bold; 
        }
        
        .quill-display-content p { 
          margin: 0.5em 0; 
        }
        
        /* Force bullet lists to show bullets */
        .quill-display-content ul {
          list-style: disc !important;
          list-style-type: disc !important;
          margin: 0.5em 0 !important;
          padding-left: 1.5em !important;
        }
        
        .quill-display-content ul li {
          display: list-item !important;
          list-style: disc !important;
          list-style-type: disc !important;
          margin: 0.25em 0 !important;
        }
        
        .quill-display-content ul li::before {
          content: none !important;
        }
        
        /* Force numbered lists */
        .quill-display-content ol {
          list-style: decimal !important;
          list-style-type: decimal !important;
          margin: 0.5em 0 !important;
          padding-left: 1.5em !important;
        }
        
        .quill-display-content ol li {
          display: list-item !important;
          list-style: decimal !important;
          list-style-type: decimal !important;
          margin: 0.25em 0 !important;
        }
        
        .quill-display-content ol li::before {
          content: none !important;
        }
        
        /* Nested lists */
        .quill-display-content ul ul {
          list-style-type: circle !important;
        }
        
        .quill-display-content ul ul ul {
          list-style-type: square !important;
        }
        
        .quill-display-content blockquote {
          border-left: 4px solid #ddd;
          margin: 0.5em 0;
          padding-left: 1em;
          color: #666;
          font-style: italic;
        }
      `})]})}function RV(){const[t,e]=M.useState(""),s=()=>{e(`
      <h1>Testing Text Overflow</h1>
      <p>This is a normal paragraph with regular text that should wrap properly.</p>
      
      <h2>Long URL Test</h2>
      <p>Here's a very long URL that might cause overflow: https://www.example.com/very/long/path/that/continues/forever/and/ever/with/more/segments/and/parameters?param1=value1&param2=value2&param3=value3&param4=value4</p>
      
      <h2>Long Word Test</h2>
      <p>Supercalifragilisticexpialidociousantidisestablishmentarianismfloccinaucinihilipilificationpneumonoultramicroscopicsilicovolcanoconiosis</p>
      
      <h2>Long Continuous Text</h2>
      <p>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</p>
      
      <h2>Normal List</h2>
      <ul>
        <li>Normal bullet point</li>
        <li>Another normal bullet with a very long text that should wrap properly when it reaches the edge of the container</li>
        <li>Short bullet</li>
      </ul>
      
      <h2>List with Long Content</h2>
      <ul>
        <li>https://www.example.com/very/long/url/in/a/list/item/that/might/cause/overflow/problems/if/not/handled/properly</li>
        <li>Verylongwordwithoutanyspacesthatmightcauseoverflowissuesifnothandledproperlyintheeditor</li>
      </ul>
      
      <blockquote>
        This is a blockquote with a very long URL: https://www.example.com/another/very/long/path/in/a/blockquote/element/to/test/overflow/handling
      </blockquote>
    `)},r=()=>{e(`
      <h1>Normal Content Example</h1>
      <p>This is a normal paragraph with regular content that should display nicely without any overflow issues.</p>
      
      <h2>Features List</h2>
      <ul>
        <li>First feature point</li>
        <li>Second feature with more details</li>
        <li>Third feature point</li>
      </ul>
      
      <p>Another paragraph with <strong>bold</strong>, <em>italic</em>, and <u>underlined</u> text.</p>
    `)};return n.jsxs("div",{className:"container mx-auto py-8 px-4",children:[n.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Text Overflow Test"}),n.jsx("p",{className:"text-gray-600 mb-8",children:"Test how the editor handles long text, URLs, and words that might cause overflow."}),n.jsxs("div",{className:"mb-4 space-x-2",children:[n.jsx(se,{onClick:s,children:"Load Long/Problem Text"}),n.jsx(se,{onClick:r,variant:"outline",children:"Load Normal Text"}),n.jsx(se,{onClick:()=>e(""),variant:"outline",children:"Clear"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsxs(ue,{className:"p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2 text-green-600",children:"Editor (Should NOT overflow)"}),n.jsx("div",{className:"border-2 border-red-500 p-1",children:n.jsx(Hy,{content:t,onChange:e,height:"400px",enableDebugLogs:!1})}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Red border shows the container boundary. Text should NOT go outside."})]}),n.jsxs(ue,{className:"p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2 text-blue-600",children:"Display (Should also NOT overflow)"}),n.jsx("div",{className:"border-2 border-red-500 p-4 overflow-hidden",children:n.jsx(Ax,{content:t})}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Red border shows the container boundary. Text should wrap properly."})]})]}),n.jsx("div",{className:"mt-8",children:n.jsxs(ue,{className:"p-6 bg-yellow-50",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"What to Check:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Long URLs should wrap or be truncated"}),n.jsx("li",{children:"Long words should break when necessary"}),n.jsx("li",{children:"Continuous text without spaces should wrap"}),n.jsx("li",{children:"All content should stay within the red borders"}),n.jsx("li",{children:"Horizontal scrollbar should NOT appear"})]})]})})]})}function MV(){const t=`
    <p>Normal paragraph</p>
    <ul>
      <li>First bullet point</li>
      <li>Second bullet point</li>  
      <li>Third bullet point</li>
    </ul>
    <p>Another paragraph</p>
  `;return n.jsxs("div",{className:"p-4 border rounded",children:[n.jsx("h3",{className:"font-bold mb-4",children:"Bullet Test Component"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"font-semibold text-sm",children:"Test 1: Raw HTML"}),n.jsx("div",{className:"border p-2 bg-gray-50",dangerouslySetInnerHTML:{__html:t}})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"font-semibold text-sm",children:"Test 2: bullets-fixed class"}),n.jsx("div",{className:"bullets-fixed border p-2 bg-blue-50",dangerouslySetInnerHTML:{__html:t}})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"font-semibold text-sm",children:"Test 3: Forced inline styles"}),n.jsxs("div",{className:"border p-2 bg-green-50",children:[n.jsx("p",{children:"Normal paragraph"}),n.jsxs("ul",{style:{listStyle:"none",listStyleType:"none",paddingLeft:0,margin:"0.5em 0"},children:[n.jsxs("li",{style:{listStyle:"none",listStyleType:"none",position:"relative",paddingLeft:"1.5em",margin:"0.25em 0",display:"block"},children:[n.jsx("span",{style:{position:"absolute",left:0,top:0,fontWeight:"bold"},children:""}),"First forced bullet"]}),n.jsxs("li",{style:{listStyle:"none",listStyleType:"none",position:"relative",paddingLeft:"1.5em",margin:"0.25em 0",display:"block"},children:[n.jsx("span",{style:{position:"absolute",left:0,top:0,fontWeight:"bold"},children:""}),"Second forced bullet"]})]})]})]}),n.jsx("style",{children:`
        .bullets-fixed ul {
          list-style: none !important;
          list-style-type: none !important;
          padding-left: 0 !important;
          margin: 0.5em 0 !important;
        }
        
        .bullets-fixed ul li {
          list-style: none !important;
          list-style-type: none !important;
          position: relative !important;
          padding-left: 1.5em !important;
          margin: 0.25em 0 !important;
          display: block !important;
        }
        
        .bullets-fixed ul li::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
          top: 0 !important;
          font-weight: bold !important;
          color: currentColor !important;
        }
        
        .bullets-fixed ul li::marker {
          display: none !important;
          content: none !important;
          visibility: hidden !important;
        }
      `})]})}function DV(){const t=`
    <p>Paragraph before list</p>
    <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
    <p>Paragraph after list</p>
  `,e=t.replace(/<ul>/g,'<div class="forced-bullet-list">').replace(/<\/ul>/g,"</div>").replace(/<li>/g,'<div class="forced-bullet-item">').replace(/<\/li>/g,"</div>");return n.jsxs("div",{className:"p-6 space-y-8 bg-white border rounded",children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Forced Bullet Test - Step by Step"}),n.jsxs("div",{className:"border-2 border-red-200 p-4 rounded",children:[n.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Step 1: Raw HTML (problematic)"}),n.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded mb-2",children:t}),n.jsx("div",{className:"border p-3 bg-red-50",dangerouslySetInnerHTML:{__html:t}}),n.jsx("p",{className:"text-sm text-red-600 mt-2",children:" This probably shows numbers instead of bullets"})]}),n.jsxs("div",{className:"border-2 border-blue-200 p-4 rounded",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Step 2: Converted HTML (should work)"}),n.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded mb-2",children:e}),n.jsx("div",{className:"border p-3 bg-blue-50",dangerouslySetInnerHTML:{__html:e}}),n.jsx("p",{className:"text-sm text-blue-600 mt-2",children:" This should show bullet points ()"})]}),n.jsxs("div",{className:"border-2 border-green-200 p-4 rounded",children:[n.jsx("h3",{className:"text-lg font-semibold text-green-700 mb-2",children:"Step 3: Manual HTML (guaranteed to work)"}),n.jsxs("div",{className:"border p-3 bg-green-50",children:[n.jsx("p",{children:"Paragraph before list"}),n.jsxs("div",{className:"forced-bullet-list",children:[n.jsx("div",{className:"forced-bullet-item",children:"Manual Item 1"}),n.jsx("div",{className:"forced-bullet-item",children:"Manual Item 2"}),n.jsx("div",{className:"forced-bullet-item",children:"Manual Item 3"})]}),n.jsx("p",{children:"Paragraph after list"})]}),n.jsx("p",{className:"text-sm text-green-600 mt-2",children:" This is manually coded and MUST work"})]}),n.jsxs("div",{className:"border-2 border-purple-200 p-4 rounded",children:[n.jsx("h3",{className:"text-lg font-semibold text-purple-700 mb-2",children:"Step 4: CSS Debug"}),n.jsx("p",{className:"text-sm mb-2",children:"Check browser DevTools for these styles:"}),n.jsx("pre",{className:"text-xs bg-purple-50 p-2 rounded",children:`.forced-bullet-list { margin: 0.5em 0; padding-left: 0; }
.forced-bullet-item { position: relative; padding-left: 1.5em; margin: 0.25em 0; }
.forced-bullet-item::before { content: ""; position: absolute; left: 0; }`})]}),n.jsx("style",{children:`
        .forced-bullet-list {
          margin: 0.5em 0 !important;
          padding-left: 0 !important;
        }
        
        .forced-bullet-item {
          position: relative !important;
          padding-left: 1.5em !important;
          margin: 0.25em 0 !important;
          display: block !important;
        }
        
        .forced-bullet-item::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
          top: 0 !important;
          color: currentColor !important;
          font-weight: bold !important;
          display: inline-block !important;
          width: 1em !important;
          font-size: 1em !important;
        }
        
        /* Force hide any potential markers on UL/LI */
        ul {
          list-style: none !important;
          list-style-type: none !important;
        }
        
        ul li {
          list-style: none !important;
          list-style-type: none !important;
        }
        
        ul li::marker {
          display: none !important;
          content: none !important;
          visibility: hidden !important;
        }
        
        ul li::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
          color: red !important;
          font-weight: bold !important;
        }
      `})]})}function LV(){const[t,e]=M.useState(""),s=M.useRef(null),r=M.useRef(null);M.useEffect(()=>{if(!s.current||r.current)return;const h=new be(s.current,{theme:"snow",placeholder:"Type something and click the bullet list button...",modules:{toolbar:[["bold","italic"],[{list:"bullet"},{list:"ordered"}],["clean"]]}});h.on("text-change",()=>{const m=h.root.innerHTML;console.log("HTML generated:",m),e(m)}),r.current=h},[]);const i=()=>{r.current&&(r.current.root.innerHTML=`
        <p>Before list</p>
        <ul>
          <li>First bullet point</li>
          <li>Second bullet point</li>
          <li>Third bullet point</li>
        </ul>
        <p>After list</p>
      `,e(r.current.root.innerHTML))},o=()=>{r.current&&(r.current.root.innerHTML=`
        <p>Before list</p>
        <ol>
          <li>First numbered item</li>
          <li>Second numbered item</li>
          <li>Third numbered item</li>
        </ol>
        <p>After list</p>
      `,e(r.current.root.innerHTML))},u=()=>{if(r.current){const h=r.current.getSelection();if(h){const[m]=r.current.getLine(h.index),f=r.current.getFormat(h);console.log("Current formats:",f),console.log("Current line:",m)}}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-8",children:"List Debug Tool"}),n.jsx(DV,{}),n.jsx(MV,{}),n.jsx("div",{className:"my-8 border-t pt-8",children:n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Quill Editor Test"})}),n.jsxs("div",{className:"mb-4 space-x-2",children:[n.jsx(se,{onClick:i,children:"Insert Bullet List"}),n.jsx(se,{onClick:o,children:"Insert Numbered List"}),n.jsx(se,{onClick:()=>e(""),variant:"outline",children:"Clear"}),n.jsx(se,{onClick:u,variant:"outline",children:"Check Current Format"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[n.jsxs(ue,{className:"p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"1. Quill Editor"}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Try clicking the bullet list button () in the toolbar"}),n.jsx("div",{ref:s,style:{height:"300px"},className:"bg-white"})]}),n.jsxs(ue,{className:"p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"2. Raw HTML Output"}),n.jsx("div",{className:"bg-gray-900 text-green-400 p-2 rounded font-mono text-xs overflow-auto h-[300px]",children:n.jsx("pre",{children:t||"(empty)"})}),n.jsxs("div",{className:"mt-2 text-xs",children:[n.jsx("p",{className:"text-blue-600",children:"Look for: <ul> = bullets"}),n.jsx("p",{className:"text-orange-600",children:"Look for: <ol> = numbers"})]})]}),n.jsxs(ue,{className:"p-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"3. Browser Rendering"}),n.jsx("div",{className:"rendered-content border p-4 rounded min-h-[300px]",dangerouslySetInnerHTML:{__html:t}})]})]}),n.jsx("div",{className:"mt-8",children:n.jsxs(ue,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"QuillContentUltraFixed Test"}),t&&n.jsxs("div",{className:"border p-4 rounded bg-yellow-50",children:[n.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Using QuillContentUltraFixed Component:"}),n.jsx(wE,{content:t})]})]})}),n.jsx("div",{className:"grid grid-cols-1 gap-4 mt-6",children:n.jsxs(ue,{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Direct HTML Conversion Test"}),n.jsx("div",{className:"bg-green-50 border p-4 rounded",children:n.jsxs("div",{className:"custom-bullet-list",children:[n.jsx("div",{className:"custom-bullet-item",children:"First bullet converted to div"}),n.jsx("div",{className:"custom-bullet-item",children:"Second bullet converted to div"}),n.jsx("div",{className:"custom-bullet-item",children:"Third bullet converted to div"})]})}),n.jsx("style",{children:`
            .custom-bullet-list {
              margin: 0.5em 0 !important;
              padding-left: 0 !important;
            }
            
            .custom-bullet-item {
              position: relative !important;
              padding-left: 1.5em !important;
              margin: 0.25em 0 !important;
              display: block !important;
            }
            
            .custom-bullet-item::before {
              content: "" !important;
              position: absolute !important;
              left: 0 !important;
              top: 0 !important;
              color: currentColor !important;
              font-weight: bold !important;
              display: inline-block !important;
              width: 1em !important;
            }
          `})]})}),n.jsxs(ue,{className:"p-6 mt-8",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4",children:"What Should Happen:"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-blue-600",children:"Bullet List Button ()"}),n.jsxs("ul",{className:"list-disc list-inside mt-2",children:[n.jsx("li",{children:"Should create <ul> tags"}),n.jsx("li",{children:"Should show bullet points"}),n.jsx("li",{children:"HTML should contain <ul><li>...</li></ul>"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-orange-600",children:"Numbered List Button (1.)"}),n.jsxs("ul",{className:"list-disc list-inside mt-2",children:[n.jsx("li",{children:"Should create <ol> tags"}),n.jsx("li",{children:"Should show numbers (1, 2, 3...)"}),n.jsx("li",{children:"HTML should contain <ol><li>...</li></ol>"})]})]})]})]}),n.jsxs(ue,{className:"p-6 mt-4 bg-yellow-50",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"CSS Interference Check:"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Raw UL (should show bullets):"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Item 1"}),n.jsx("li",{children:"Item 2"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Raw OL (should show numbers):"}),n.jsxs("ol",{children:[n.jsx("li",{children:"Item 1"}),n.jsx("li",{children:"Item 2"})]})]})]})]}),n.jsx("style",{children:`
        /* Disable native list styles completely */
        .rendered-content ul {
          list-style: none !important;
          list-style-type: none !important;
          padding-left: 0 !important;
          margin: 0.5em 0 !important;
        }
        
        .rendered-content ul li {
          list-style: none !important;
          list-style-type: none !important;
          display: block !important;
          position: relative !important;
          padding-left: 1.5em !important;
          margin: 0.25em 0 !important;
        }
        
        /* Create custom bullet with ::before */
        .rendered-content ul li::before {
          content: "" !important;
          position: absolute !important;
          left: 0 !important;
          top: 0 !important;
          color: inherit !important;
          font-weight: bold !important;
          display: inline-block !important;
          width: 1em !important;
        }
        
        /* Hide native ::marker completely */
        .rendered-content ul li::marker {
          content: none !important;
          display: none !important;
        }
        
        /* Nested bullets */
        .rendered-content ul ul li::before {
          content: "" !important;
        }
        
        .rendered-content ul ul ul li::before {
          content: "" !important;
        }
        
        /* OL keeps normal behavior */
        .rendered-content ol {
          list-style-type: decimal !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
        }
        
        .rendered-content ol li {
          display: list-item !important;
          list-style-type: decimal !important;
          margin: 0.25em 0 !important;
        }
        
        .rendered-content ol li::before {
          content: none !important;
          display: none !important;
        }
      `})]})}const qV=Hs.forwardRef(({className:t,variant:e="default",...s},r)=>n.jsx("div",{ref:r,className:xa("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{"bg-primary text-primary-foreground hover:bg-primary/80":e==="default","bg-secondary text-secondary-foreground hover:bg-secondary/80":e==="secondary","bg-destructive text-destructive-foreground hover:bg-destructive/80":e==="destructive","text-foreground":e==="outline"},t),...s}));qV.displayName="Badge";function PV({isOpen:t,onClose:e,duplicate:s,onMergeComplete:r}){const[i,o]=M.useState(null),[u,h]=M.useState(null),[m,f]=M.useState(!0),[p,x]=M.useState(!1),[b,j]=M.useState(""),[v,S]=M.useState({}),[_,E]=M.useState({merge_cpd_activities:!0,merge_event_registrations:!0,merge_payments:!0,sum_cpd_points:!0});M.useEffect(()=>{t&&s&&A()},[t,s]);const A=async()=>{try{f(!0);const[w,C,z,R]=await Promise.all([V.from("members").select("*").eq("id",s.member1_id).single(),V.from("members").select("*").eq("id",s.member2_id).single(),V.from("cpd_activities").select("*",{count:"exact"}).eq("member_id",s.member1_id).eq("status","approved"),V.from("cpd_activities").select("*",{count:"exact"}).eq("member_id",s.member2_id).eq("status","approved")]);if(w.error||C.error)throw new Error("Failed to load member details");const D={...w.data,cpd_activities_count:z.count||0,cpd_points_total:z.data?.reduce((P,Z)=>P+(Z.points||0),0)||0},q={...C.data,cpd_activities_count:R.count||0,cpd_points_total:R.data?.reduce((P,Z)=>P+(Z.points||0),0)||0};o(D),h(q);const H=O(D),X=O(q);j(H>=X?D.id:q.id),F(D,q,H>=X?"member1":"member2")}catch(w){console.error("Error loading member details:",w),ae("error","Failed to load member details"),e()}finally{f(!1)}},O=w=>{let C=0;return["first_name","last_name","email","phone","mobile","company_name","street_address","suburb","postcode","state","bio"].forEach(R=>{w[R]&&C++}),C+=Math.min(w.cpd_activities_count||0,5),C},F=(w,C,z)=>{const R=["first_name","last_name","email","phone","mobile","company_name","street_address","suburb","postcode","state","country","bio","membership_status","membership_type","subscriptions"],D={};R.forEach(q=>{const H=w[q],X=C[q];H&&!X?D[q]="member1":!H&&X?D[q]="member2":D[q]=z}),S(D)},k=w=>{S(C=>({...C,[w]:C[w]==="member1"?"member2":"member1"}))},L=async()=>{if(!(!i||!u))try{x(!0);const w={primary_member_id:b,fields_to_keep:Object.keys(v).reduce((C,z)=>{const R=b===i.id&&v[z]==="member1"||b===u.id&&v[z]==="member2";return{...C,[z]:R}},{}),relationships:_};await Oc.mergeMembers(s.id,w),ae("success","Members merged successfully"),r()}catch(w){console.error("Error merging members:",w),ae("error","Failed to merge members")}finally{x(!1)}},B=(w,C,z,R)=>{const D=i?.[w],q=u?.[w];if(!D&&!q)return null;const H=v[w],X=D&&q&&D!==q;return n.jsxs("div",{className:"border-b border-gray-200 pb-3 mb-3 last:border-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[z,n.jsx("span",{className:"text-sm font-medium text-gray-700",children:C})]}),X&&n.jsx(se,{size:"sm",variant:"ghost",onClick:()=>k(w),className:"text-xs",children:"Switch"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:`p-2 rounded-md transition-all ${!X&&D||X&&H==="member1"?"bg-blue-50 border border-blue-300":"bg-gray-50 opacity-50"}`,children:[n.jsx("p",{className:"text-sm",children:D?String(D):"-"}),X&&H==="member1"&&n.jsx(Yl,{className:"w-3 h-3 text-blue-600 mt-1"})]}),n.jsxs("div",{className:`p-2 rounded-md transition-all ${!X&&q&&!D||X&&H==="member2"?"bg-blue-50 border border-blue-300":"bg-gray-50 opacity-50"}`,children:[n.jsx("p",{className:"text-sm",children:q?String(q):"-"}),X&&H==="member2"&&n.jsx(Yl,{className:"w-3 h-3 text-blue-600 mt-1"})]})]})]})};return t?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs(ue,{className:"w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Merge Duplicate Members"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Review and select which information to keep from each member"})]}),n.jsx(se,{variant:"ghost",size:"sm",onClick:e,children:n.jsx(mn,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"mt-4",children:n.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${s.similarity_score>=90?"bg-red-100 text-red-800":s.similarity_score>=70?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:["Similarity Score: ",s.similarity_score,"%"]})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:m?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i&&u?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(ti,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx(he,{className:"text-yellow-800",children:"Select Primary Member"}),n.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"The primary member will be kept, and the other will be deleted after merging data."}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"primary",value:i.id,checked:b===i.id,onChange:w=>j(w.target.value),className:"text-blue-600"}),n.jsxs("span",{className:"text-sm font-medium",children:[i.first_name," ",i.last_name," (Member 1)"]})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"primary",value:u.id,checked:b===u.id,onChange:w=>j(w.target.value),className:"text-blue-600"}),n.jsxs("span",{className:"text-sm font-medium",children:[u.first_name," ",u.last_name," (Member 2)"]})]})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:`p-4 rounded-lg ${b===i.id?"bg-blue-50 border-2 border-blue-300":"bg-gray-50"}`,children:[n.jsxs("h3",{className:"font-semibold mb-2",children:["Member 1 ",b===i.id&&"(Primary)"]}),n.jsx("p",{className:"text-sm text-gray-600",children:i.email}),n.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-500",children:[n.jsxs("span",{children:["CPD: ",i.cpd_activities_count," activities"]}),n.jsxs("span",{children:[i.cpd_points_total," points"]})]})]}),n.jsxs("div",{className:`p-4 rounded-lg ${b===u.id?"bg-blue-50 border-2 border-blue-300":"bg-gray-50"}`,children:[n.jsxs("h3",{className:"font-semibold mb-2",children:["Member 2 ",b===u.id&&"(Primary)"]}),n.jsx("p",{className:"text-sm text-gray-600",children:u.email}),n.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-500",children:[n.jsxs("span",{children:["CPD: ",u.cpd_activities_count," activities"]}),n.jsxs("span",{children:[u.cpd_points_total," points"]})]})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Select Fields to Keep"}),B("first_name","First Name",n.jsx(Ja,{className:"w-4 h-4"})),B("last_name","Last Name",n.jsx(Ja,{className:"w-4 h-4"})),B("email","Email",n.jsx(Xd,{className:"w-4 h-4"})),B("phone","Phone",n.jsx(ux,{className:"w-4 h-4"})),B("mobile","Mobile",n.jsx(ux,{className:"w-4 h-4"})),B("company_name","Company",n.jsx(to,{className:"w-4 h-4"})),B("street_address","Street Address",n.jsx(Ln,{className:"w-4 h-4"})),B("suburb","Suburb",n.jsx(Ln,{className:"w-4 h-4"})),B("postcode","Postcode",n.jsx(Ln,{className:"w-4 h-4"})),B("state","State",n.jsx(Ln,{className:"w-4 h-4"})),B("membership_status","Membership Status",n.jsx(js,{className:"w-4 h-4"})),B("membership_type","Membership Type",n.jsx(js,{className:"w-4 h-4"}))]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Data Transfer Options"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:_.merge_cpd_activities,onChange:w=>E(C=>({...C,merge_cpd_activities:w.target.checked})),className:"rounded text-blue-600"}),n.jsx("span",{className:"text-sm",children:"Transfer all CPD activities to primary member"})]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:_.merge_event_registrations,onChange:w=>E(C=>({...C,merge_event_registrations:w.target.checked})),className:"rounded text-blue-600"}),n.jsx("span",{className:"text-sm",children:"Transfer all event registrations to primary member"})]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:_.sum_cpd_points,onChange:w=>E(C=>({...C,sum_cpd_points:w.target.checked})),className:"rounded text-blue-600"}),n.jsx("span",{className:"text-sm",children:"Combine CPD points from both members"})]})]})]})]}):null}),n.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-between items-center",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx(ti,{className:"w-4 h-4 inline mr-1"}),"This action cannot be automatically undone after 30 days"]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(se,{variant:"outline",onClick:e,disabled:p,children:"Cancel"}),n.jsx(se,{onClick:L,disabled:m||p||!b,children:p?"Merging...":"Merge Members"})]})]})]})}):null}function IV(){const[t,e]=M.useState([]),[s,r]=M.useState([]),[i,o]=M.useState(!0),[u,h]=M.useState(!1),[m,f]=M.useState(""),[p,x]=M.useState(0),[b,j]=M.useState(null),[v,S]=M.useState(!1);M.useEffect(()=>{_()},[]),M.useEffect(()=>{E()},[t,m,p]);const _=async()=>{try{o(!0);const B=await Oc.getPendingDuplicates();e(B)}catch(B){console.error("Error loading duplicates:",B),ae("error","Failed to load duplicates")}finally{o(!1)}},E=()=>{let B=[...t];if(p>0&&(B=B.filter(w=>w.similarity_score>=p)),m){const w=m.toLowerCase();B=B.filter(C=>C.member1_first_name?.toLowerCase().includes(w)||C.member1_last_name?.toLowerCase().includes(w)||C.member1_email?.toLowerCase().includes(w)||C.member2_first_name?.toLowerCase().includes(w)||C.member2_last_name?.toLowerCase().includes(w)||C.member2_email?.toLowerCase().includes(w))}r(B)},A=async()=>{try{h(!0),ae("info","Scanning for duplicates...");const B=await Oc.findAllDuplicates(50);for(const w of B)await Oc.saveDuplicate(w);ae("success",`Found ${B.length} potential duplicates`),await _()}catch(B){console.error("Error scanning for duplicates:",B),ae("error","Failed to scan for duplicates")}finally{h(!1)}},O=async(B,w)=>{try{await Oc.reviewDuplicate(B,w),await _()}catch(C){console.error(`Error marking as ${w}:`,C),ae("error",`Failed to mark as ${w.replace("_"," ")}`)}},F=B=>{j(B),S(!0)},k=B=>B>=90?"bg-red-100 text-red-800":B>=70?"bg-orange-100 text-orange-800":B>=50?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",L=B=>{const w=[];return B.exact_name?w.push({label:"Exact Name",color:"bg-green-100 text-green-800"}):B.similar_name&&w.push({label:"Similar Name",color:"bg-blue-100 text-blue-800"}),B.same_company&&w.push({label:"Same Company",color:"bg-purple-100 text-purple-800"}),B.similar_email&&w.push({label:"Similar Email",color:"bg-indigo-100 text-indigo-800"}),B.same_phone&&w.push({label:"Same Phone",color:"bg-pink-100 text-pink-800"}),B.same_address&&w.push({label:"Same Address",color:"bg-cyan-100 text-cyan-800"}),w};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Member Duplicates Management"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Review and merge potential duplicate member records"})]}),n.jsx(se,{onClick:A,disabled:u,className:"mt-4 md:mt-0",children:u?n.jsxs(n.Fragment,{children:[n.jsx(hn,{className:"w-4 h-4 mr-2 animate-spin"}),"Scanning..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ni,{className:"w-4 h-4 mr-2"}),"Scan for Duplicates"]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(ue,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Duplicates"}),n.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),n.jsx(Cr,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx(ue,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"High Confidence"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:t.filter(B=>B.similarity_score>=90).length})]}),n.jsx(Ji,{className:"w-8 h-8 text-red-500"})]})}),n.jsx(ue,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Medium Confidence"}),n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:t.filter(B=>B.similarity_score>=70&&B.similarity_score<90).length})]}),n.jsx(Ji,{className:"w-8 h-8 text-orange-500"})]})}),n.jsx(ue,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Low Confidence"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:t.filter(B=>B.similarity_score>=50&&B.similarity_score<70).length})]}),n.jsx(Ji,{className:"w-8 h-8 text-yellow-500"})]})})]}),n.jsx(ue,{className:"p-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(ni,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx(Ne,{placeholder:"Search by name or email...",value:m,onChange:B=>f(B.target.value),className:"pl-10"})]})}),n.jsx("div",{className:"w-48",children:n.jsxs("select",{value:p,onChange:B=>x(Number(B.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"0",children:"All Scores"}),n.jsx("option",{value:"50",children:"Score  50"}),n.jsx("option",{value:"70",children:"Score  70"}),n.jsx("option",{value:"90",children:"Score  90"})]})})]})}),i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(hn,{className:"w-8 h-8 animate-spin text-blue-500"})}):s.length===0?n.jsxs(ue,{className:"p-8 text-center",children:[n.jsx(xo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Duplicates Found"}),n.jsx("p",{className:"text-gray-600",children:t.length===0?"No potential duplicates detected. Click 'Scan for Duplicates' to search.":"No duplicates match your current filters."})]}):n.jsx("div",{className:"space-y-4",children:s.map(B=>n.jsx(ue,{className:"p-6 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:[B.member1_first_name," ",B.member1_last_name]}),n.jsx("p",{className:"text-sm text-gray-600",children:B.member1_email}),B.member1_company&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:B.member1_company})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:[B.member2_first_name," ",B.member2_last_name]}),n.jsx("p",{className:"text-sm text-gray-600",children:B.member2_email}),B.member2_company&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:B.member2_company})]})]}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[n.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${k(B.similarity_score)}`,children:["Score: ",B.similarity_score,"%"]}),L(B.match_details).map((w,C)=>n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${w.color}`,children:w.label},C))]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Detected on ",Ft(new Date(B.created_at),"MMM d, yyyy")]})]}),n.jsxs("div",{className:"flex flex-row lg:flex-col gap-2",children:[n.jsxs(se,{onClick:()=>F(B),size:"sm",className:"flex-1",children:[n.jsx(Yl,{className:"w-4 h-4 mr-1"}),"Merge"]}),n.jsxs(se,{onClick:()=>O(B.id,"not_duplicate"),size:"sm",variant:"outline",className:"flex-1",children:[n.jsx(mn,{className:"w-4 h-4 mr-1"}),"Not Duplicate"]}),n.jsxs(se,{onClick:()=>O(B.id,"skipped"),size:"sm",variant:"ghost",className:"flex-1",children:[n.jsx(QP,{className:"w-4 h-4 mr-1"}),"Skip"]})]})]})},B.id))})]}),v&&b&&n.jsx(PV,{isOpen:v,onClose:()=>{S(!1),j(null)},duplicate:b,onMergeComplete:()=>{S(!1),j(null),_()}})]})}const $V=()=>{Ns();const{user:t}=jt(),[e,s]=M.useState([]),[r,i]=M.useState(new Set),[o,u]=M.useState(!0),[h,m]=M.useState(!1),[f,p]=M.useState(""),[x,b]=M.useState("all"),[j,v]=M.useState({total:0,active:0,inactive:0,expired:0});M.useEffect(()=>{_(),S()},[]);const S=async()=>{try{const{count:L}=await V.from("members").select("*",{count:"exact",head:!0}),{count:B}=await V.from("members").select("*",{count:"exact",head:!0}).eq("membership_status","active"),{count:w}=await V.from("members").select("*",{count:"exact",head:!0}).eq("membership_status","inactive"),{count:C}=await V.from("members").select("*",{count:"exact",head:!0}).eq("membership_status","expired");v({total:L||0,active:B||0,inactive:w||0,expired:C||0})}catch(L){console.error("Error loading stats:",L)}},_=async()=>{try{u(!0);let L=V.from("members").select("*").order("created_at",{ascending:!1});x!=="all"&&(L=L.eq("membership_status",x));const{data:B,error:w}=await L;if(w)throw w;s(B||[])}catch(L){console.error("Error loading members:",L),ae("error","Failed to load members")}finally{u(!1)}},E=L=>{const B=new Set(r);B.has(L)?B.delete(L):B.add(L),i(B)},A=()=>{r.size===O.length?i(new Set):i(new Set(O.map(L=>L.id)))},O=e.filter(L=>L.first_name?.toLowerCase().includes(f.toLowerCase())||L.last_name?.toLowerCase().includes(f.toLowerCase())||L.email?.toLowerCase().includes(f.toLowerCase())||L.company_name?.toLowerCase().includes(f.toLowerCase())),F=async()=>{if(r.size===0){ae("warning","No members selected");return}if(!(!(await Et.fire({title:"Delete Selected Members?",html:`
        <div class="text-left">
          <p class="mb-4">You are about to delete <strong>${r.size}</strong> member(s).</p>
          <p class="mb-2"><strong>This will permanently delete:</strong></p>
          <ul class="list-disc list-inside text-sm">
            <li>Member profiles</li>
            <li>CPD activities and points</li>
            <li>Event registrations</li>
            <li>Payment records</li>
            <li>All related data</li>
          </ul>
          <p class="mt-4 text-red-600"><strong>This action cannot be undone!</strong></p>
        </div>
      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete them!",cancelButtonText:"Cancel"})).isConfirmed||!(await Et.fire({title:"Are you absolutely sure?",text:`Type "DELETE" to confirm deletion of ${r.size} member(s)`,input:"text",inputPlaceholder:"Type DELETE to confirm",showCancelButton:!0,confirmButtonColor:"#dc2626",confirmButtonText:"Delete",cancelButtonText:"Cancel",inputValidator:w=>{if(w!=="DELETE")return"You must type DELETE to confirm"}})).isConfirmed))try{m(!0);const{data:w}=await V.from("members").select("id").eq("user_id",t?.id).single(),C=Array.from(r).filter(D=>D!==w?.id);if(C.length===0){ae("warning","Cannot delete your own account");return}const z=10;let R=0;for(let D=0;D<C.length;D+=z){const q=C.slice(D,D+z),{error:H}=await V.from("members").delete().in("id",q);if(H)throw H;R+=q.length,ae("info",`Deleted ${R} of ${C.length} members...`)}ae("success",`Successfully deleted ${R} member(s)`),await _(),await S(),i(new Set)}catch(w){console.error("Error deleting members:",w),ae("error","Failed to delete members")}finally{m(!1)}},k=async()=>{if(!(!(await Et.fire({title:" EXTREME CAUTION ",html:`
        <div class="text-left">
          <p class="mb-4 text-red-600 font-bold">This will delete ALL ${j.total} members from the system!</p>
          <p class="mb-2"><strong>Everything will be permanently deleted:</strong></p>
          <ul class="list-disc list-inside text-sm">
            <li>All member profiles</li>
            <li>All CPD activities and points</li>
            <li>All event registrations</li>
            <li>All payment records</li>
            <li>All companies and memberships</li>
            <li>ALL related data</li>
          </ul>
          <p class="mt-4 text-red-600"><strong> THIS CANNOT BE UNDONE! </strong></p>
          <p class="mt-2 text-sm">Only your account will be preserved.</p>
        </div>
      `,icon:"error",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"I understand, continue",cancelButtonText:"Cancel"})).isConfirmed||!(await Et.fire({title:"Final Confirmation",text:'Type "DELETE ALL MEMBERS" to confirm complete database cleanup',input:"text",inputPlaceholder:"Type DELETE ALL MEMBERS to confirm",showCancelButton:!0,confirmButtonColor:"#dc2626",confirmButtonText:"Delete Everything",cancelButtonText:"Cancel",inputValidator:w=>{if(w!=="DELETE ALL MEMBERS")return"You must type DELETE ALL MEMBERS to confirm"}})).isConfirmed))try{m(!0),ae("info","Starting complete database cleanup...");const{data:w}=await V.from("members").select("id").eq("user_id",t?.id).single();if(!w){ae("error","Could not identify current user");return}const{error:C}=await V.from("members").delete().neq("id",w.id);if(C)throw C;await V.from("cpd_activities").delete().is("member_id",null),await V.from("event_registrations").delete().neq("user_id",t?.id),ae("success","Database cleaned successfully! Only your account remains."),await _(),await S(),i(new Set)}catch(w){console.error("Error cleaning database:",w),ae("error","Failed to clean database")}finally{m(!1)}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bulk Member Management"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Manage and clean up member data in bulk (Super Admin only)"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsxs(ue,{className:"p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:j.total}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Members"})]}),n.jsxs(ue,{className:"p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:j.active}),n.jsx("div",{className:"text-sm text-gray-600",children:"Active"})]}),n.jsxs(ue,{className:"p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:j.inactive}),n.jsx("div",{className:"text-sm text-gray-600",children:"Inactive"})]}),n.jsxs(ue,{className:"p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:j.expired}),n.jsx("div",{className:"text-sm text-gray-600",children:"Expired"})]})]}),n.jsx(ue,{className:"p-4 mb-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(ni,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),n.jsx("input",{type:"text",placeholder:"Search members...",value:f,onChange:L=>p(L.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("select",{value:x,onChange:L=>b(L.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"expired",children:"Expired"})]}),n.jsx(se,{variant:"outline",onClick:_,disabled:o,children:n.jsx(Ad,{className:`h-4 w-4 ${o?"animate-spin":""}`})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(se,{variant:"destructive",onClick:F,disabled:r.size===0||h,children:[n.jsx(go,{className:"h-4 w-4 mr-2"}),"Delete Selected (",r.size,")"]}),n.jsxs(se,{variant:"destructive",onClick:k,disabled:h||j.total===0,className:"bg-red-600 hover:bg-red-700",children:[n.jsx(Ji,{className:"h-4 w-4 mr-2"}),"Delete All Members"]})]})]})}),n.jsx(ue,{className:"overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left",children:n.jsxs("button",{onClick:A,className:"flex items-center gap-2 hover:text-blue-600",children:[r.size===O.length&&O.length>0?n.jsx(ij,{className:"h-4 w-4"}):n.jsx(lj,{className:"h-4 w-4"}),"Select All"]})}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Company"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:o?n.jsx("tr",{children:n.jsxs("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),"Loading members..."]})}):O.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No members found"})}):O.map(L=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsx("button",{onClick:()=>E(L.id),className:"hover:text-blue-600",children:r.has(L.id)?n.jsx(ij,{className:"h-4 w-4"}):n.jsx(lj,{className:"h-4 w-4"})})}),n.jsxs("td",{className:"px-4 py-3 text-sm",children:[L.first_name," ",L.last_name]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:L.email}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:L.company_name||"-"}),n.jsx("td",{className:"px-4 py-3 text-sm",children:n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100",children:L.membership_type||"Basic"})}),n.jsx("td",{className:"px-4 py-3 text-sm",children:n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${L.membership_status==="active"?"bg-green-100 text-green-800":L.membership_status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:L.membership_status||"Unknown"})}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(L.created_at).toLocaleDateString()})]},L.id))})]})})}),n.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ji,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-yellow-900",children:"Important Notice"}),n.jsx("p",{className:"text-sm text-yellow-800 mt-1",children:"Bulk deletion is permanent and cannot be undone. All related data including CPD activities, event registrations, and payment records will also be deleted. Your own account will never be deleted."})]})]})})]})};function NC(t,e){return function(){return t.apply(e,arguments)}}const{toString:UV}=Object.prototype,{getPrototypeOf:Vy}=Object,{iterator:Zf,toStringTag:SC}=Symbol,Yf=(t=>e=>{const s=UV.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Vn=t=>(t=t.toLowerCase(),e=>Yf(e)===t),Kf=t=>e=>typeof e===t,{isArray:tu}=Array,qd=Kf("undefined");function ih(t){return t!==null&&!qd(t)&&t.constructor!==null&&!qd(t.constructor)&&Sr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const EC=Vn("ArrayBuffer");function BV(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&EC(t.buffer),e}const zV=Kf("string"),Sr=Kf("function"),CC=Kf("number"),lh=t=>t!==null&&typeof t=="object",FV=t=>t===!0||t===!1,Hm=t=>{if(Yf(t)!=="object")return!1;const e=Vy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(SC in t)&&!(Zf in t)},HV=t=>{if(!lh(t)||ih(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},VV=Vn("Date"),GV=Vn("File"),ZV=Vn("Blob"),YV=Vn("FileList"),KV=t=>lh(t)&&Sr(t.pipe),WV=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Sr(t.append)&&((e=Yf(t))==="formdata"||e==="object"&&Sr(t.toString)&&t.toString()==="[object FormData]"))},QV=Vn("URLSearchParams"),[XV,JV,eG,tG]=["ReadableStream","Request","Response","Headers"].map(Vn),sG=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function oh(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),tu(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(ih(t))return;const o=s?Object.getOwnPropertyNames(t):Object.keys(t),u=o.length;let h;for(r=0;r<u;r++)h=o[r],e.call(null,t[h],h,t)}}function AC(t,e){if(ih(t))return null;e=e.toLowerCase();const s=Object.keys(t);let r=s.length,i;for(;r-- >0;)if(i=s[r],e===i.toLowerCase())return i;return null}const Kl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kC=t=>!qd(t)&&t!==Kl;function kx(){const{caseless:t}=kC(this)&&this||{},e={},s=(r,i)=>{const o=t&&AC(e,i)||i;Hm(e[o])&&Hm(r)?e[o]=kx(e[o],r):Hm(r)?e[o]=kx({},r):tu(r)?e[o]=r.slice():e[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&oh(arguments[r],s);return e}const rG=(t,e,s,{allOwnKeys:r}={})=>(oh(e,(i,o)=>{s&&Sr(i)?t[o]=NC(i,s):t[o]=i},{allOwnKeys:r}),t),nG=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),aG=(t,e,s,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},iG=(t,e,s,r)=>{let i,o,u;const h={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)u=i[o],(!r||r(u,t,e))&&!h[u]&&(e[u]=t[u],h[u]=!0);t=s!==!1&&Vy(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},lG=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const r=t.indexOf(e,s);return r!==-1&&r===s},oG=t=>{if(!t)return null;if(tu(t))return t;let e=t.length;if(!CC(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},cG=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Vy(Uint8Array)),uG=(t,e)=>{const r=(t&&t[Zf]).call(t);let i;for(;(i=r.next())&&!i.done;){const o=i.value;e.call(t,o[0],o[1])}},dG=(t,e)=>{let s;const r=[];for(;(s=t.exec(e))!==null;)r.push(s);return r},hG=Vn("HTMLFormElement"),mG=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,i){return r.toUpperCase()+i}),N2=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),fG=Vn("RegExp"),TC=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),r={};oh(s,(i,o)=>{let u;(u=e(i,o,t))!==!1&&(r[o]=u||i)}),Object.defineProperties(t,r)},pG=t=>{TC(t,(e,s)=>{if(Sr(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=t[s];if(Sr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},gG=(t,e)=>{const s={},r=i=>{i.forEach(o=>{s[o]=!0})};return tu(t)?r(t):r(String(t).split(e)),s},xG=()=>{},yG=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function bG(t){return!!(t&&Sr(t.append)&&t[SC]==="FormData"&&t[Zf])}const vG=t=>{const e=new Array(10),s=(r,i)=>{if(lh(r)){if(e.indexOf(r)>=0)return;if(ih(r))return r;if(!("toJSON"in r)){e[i]=r;const o=tu(r)?[]:{};return oh(r,(u,h)=>{const m=s(u,i+1);!qd(m)&&(o[h]=m)}),e[i]=void 0,o}}return r};return s(t,0)},wG=Vn("AsyncFunction"),_G=t=>t&&(lh(t)||Sr(t))&&Sr(t.then)&&Sr(t.catch),OC=((t,e)=>t?setImmediate:e?((s,r)=>(Kl.addEventListener("message",({source:i,data:o})=>{i===Kl&&o===s&&r.length&&r.shift()()},!1),i=>{r.push(i),Kl.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Sr(Kl.postMessage)),jG=typeof queueMicrotask<"u"?queueMicrotask.bind(Kl):typeof process<"u"&&process.nextTick||OC,NG=t=>t!=null&&Sr(t[Zf]),fe={isArray:tu,isArrayBuffer:EC,isBuffer:ih,isFormData:WV,isArrayBufferView:BV,isString:zV,isNumber:CC,isBoolean:FV,isObject:lh,isPlainObject:Hm,isEmptyObject:HV,isReadableStream:XV,isRequest:JV,isResponse:eG,isHeaders:tG,isUndefined:qd,isDate:VV,isFile:GV,isBlob:ZV,isRegExp:fG,isFunction:Sr,isStream:KV,isURLSearchParams:QV,isTypedArray:cG,isFileList:YV,forEach:oh,merge:kx,extend:rG,trim:sG,stripBOM:nG,inherits:aG,toFlatObject:iG,kindOf:Yf,kindOfTest:Vn,endsWith:lG,toArray:oG,forEachEntry:uG,matchAll:dG,isHTMLForm:hG,hasOwnProperty:N2,hasOwnProp:N2,reduceDescriptors:TC,freezeMethods:pG,toObjectSet:gG,toCamelCase:mG,noop:xG,toFiniteNumber:yG,findKey:AC,global:Kl,isContextDefined:kC,isSpecCompliantForm:bG,toJSONObject:vG,isAsyncFn:wG,isThenable:_G,setImmediate:OC,asap:jG,isIterable:NG};function at(t,e,s,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}fe.inherits(at,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fe.toJSONObject(this.config),code:this.code,status:this.status}}});const RC=at.prototype,MC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{MC[t]={value:t}});Object.defineProperties(at,MC);Object.defineProperty(RC,"isAxiosError",{value:!0});at.from=(t,e,s,r,i,o)=>{const u=Object.create(RC);return fe.toFlatObject(t,u,function(m){return m!==Error.prototype},h=>h!=="isAxiosError"),at.call(u,t.message,e,s,r,i),u.cause=t,u.name=t.name,o&&Object.assign(u,o),u};const SG=null;function Tx(t){return fe.isPlainObject(t)||fe.isArray(t)}function DC(t){return fe.endsWith(t,"[]")?t.slice(0,-2):t}function S2(t,e,s){return t?t.concat(e).map(function(i,o){return i=DC(i),!s&&o?"["+i+"]":i}).join(s?".":""):e}function EG(t){return fe.isArray(t)&&!t.some(Tx)}const CG=fe.toFlatObject(fe,{},null,function(e){return/^is[A-Z]/.test(e)});function Wf(t,e,s){if(!fe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=fe.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,_){return!fe.isUndefined(_[S])});const r=s.metaTokens,i=s.visitor||p,o=s.dots,u=s.indexes,m=(s.Blob||typeof Blob<"u"&&Blob)&&fe.isSpecCompliantForm(e);if(!fe.isFunction(i))throw new TypeError("visitor must be a function");function f(v){if(v===null)return"";if(fe.isDate(v))return v.toISOString();if(fe.isBoolean(v))return v.toString();if(!m&&fe.isBlob(v))throw new at("Blob is not supported. Use a Buffer instead.");return fe.isArrayBuffer(v)||fe.isTypedArray(v)?m&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function p(v,S,_){let E=v;if(v&&!_&&typeof v=="object"){if(fe.endsWith(S,"{}"))S=r?S:S.slice(0,-2),v=JSON.stringify(v);else if(fe.isArray(v)&&EG(v)||(fe.isFileList(v)||fe.endsWith(S,"[]"))&&(E=fe.toArray(v)))return S=DC(S),E.forEach(function(O,F){!(fe.isUndefined(O)||O===null)&&e.append(u===!0?S2([S],F,o):u===null?S:S+"[]",f(O))}),!1}return Tx(v)?!0:(e.append(S2(_,S,o),f(v)),!1)}const x=[],b=Object.assign(CG,{defaultVisitor:p,convertValue:f,isVisitable:Tx});function j(v,S){if(!fe.isUndefined(v)){if(x.indexOf(v)!==-1)throw Error("Circular reference detected in "+S.join("."));x.push(v),fe.forEach(v,function(E,A){(!(fe.isUndefined(E)||E===null)&&i.call(e,E,fe.isString(A)?A.trim():A,S,b))===!0&&j(E,S?S.concat(A):[A])}),x.pop()}}if(!fe.isObject(t))throw new TypeError("data must be an object");return j(t),e}function E2(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Gy(t,e){this._pairs=[],t&&Wf(t,this,e)}const LC=Gy.prototype;LC.append=function(e,s){this._pairs.push([e,s])};LC.toString=function(e){const s=e?function(r){return e.call(this,r,E2)}:E2;return this._pairs.map(function(i){return s(i[0])+"="+s(i[1])},"").join("&")};function AG(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function qC(t,e,s){if(!e)return t;const r=s&&s.encode||AG;fe.isFunction(s)&&(s={serialize:s});const i=s&&s.serialize;let o;if(i?o=i(e,s):o=fe.isURLSearchParams(e)?e.toString():new Gy(e,s).toString(r),o){const u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class C2{constructor(){this.handlers=[]}use(e,s,r){return this.handlers.push({fulfilled:e,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){fe.forEach(this.handlers,function(r){r!==null&&e(r)})}}const PC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kG=typeof URLSearchParams<"u"?URLSearchParams:Gy,TG=typeof FormData<"u"?FormData:null,OG=typeof Blob<"u"?Blob:null,RG={isBrowser:!0,classes:{URLSearchParams:kG,FormData:TG,Blob:OG},protocols:["http","https","file","blob","url","data"]},Zy=typeof window<"u"&&typeof document<"u",Ox=typeof navigator=="object"&&navigator||void 0,MG=Zy&&(!Ox||["ReactNative","NativeScript","NS"].indexOf(Ox.product)<0),DG=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",LG=Zy&&window.location.href||"http://localhost",qG=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Zy,hasStandardBrowserEnv:MG,hasStandardBrowserWebWorkerEnv:DG,navigator:Ox,origin:LG},Symbol.toStringTag,{value:"Module"})),ar={...qG,...RG};function PG(t,e){return Wf(t,new ar.classes.URLSearchParams,{visitor:function(s,r,i,o){return ar.isNode&&fe.isBuffer(s)?(this.append(r,s.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function IG(t){return fe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function $G(t){const e={},s=Object.keys(t);let r;const i=s.length;let o;for(r=0;r<i;r++)o=s[r],e[o]=t[o];return e}function IC(t){function e(s,r,i,o){let u=s[o++];if(u==="__proto__")return!0;const h=Number.isFinite(+u),m=o>=s.length;return u=!u&&fe.isArray(i)?i.length:u,m?(fe.hasOwnProp(i,u)?i[u]=[i[u],r]:i[u]=r,!h):((!i[u]||!fe.isObject(i[u]))&&(i[u]=[]),e(s,r,i[u],o)&&fe.isArray(i[u])&&(i[u]=$G(i[u])),!h)}if(fe.isFormData(t)&&fe.isFunction(t.entries)){const s={};return fe.forEachEntry(t,(r,i)=>{e(IG(r),i,s,0)}),s}return null}function UG(t,e,s){if(fe.isString(t))try{return(e||JSON.parse)(t),fe.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(t)}const ch={transitional:PC,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const r=s.getContentType()||"",i=r.indexOf("application/json")>-1,o=fe.isObject(e);if(o&&fe.isHTMLForm(e)&&(e=new FormData(e)),fe.isFormData(e))return i?JSON.stringify(IC(e)):e;if(fe.isArrayBuffer(e)||fe.isBuffer(e)||fe.isStream(e)||fe.isFile(e)||fe.isBlob(e)||fe.isReadableStream(e))return e;if(fe.isArrayBufferView(e))return e.buffer;if(fe.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let h;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return PG(e,this.formSerializer).toString();if((h=fe.isFileList(e))||r.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Wf(h?{"files[]":e}:e,m&&new m,this.formSerializer)}}return o||i?(s.setContentType("application/json",!1),UG(e)):e}],transformResponse:[function(e){const s=this.transitional||ch.transitional,r=s&&s.forcedJSONParsing,i=this.responseType==="json";if(fe.isResponse(e)||fe.isReadableStream(e))return e;if(e&&fe.isString(e)&&(r&&!this.responseType||i)){const u=!(s&&s.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(h){if(u)throw h.name==="SyntaxError"?at.from(h,at.ERR_BAD_RESPONSE,this,null,this.response):h}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ar.classes.FormData,Blob:ar.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};fe.forEach(["delete","get","head","post","put","patch"],t=>{ch.headers[t]={}});const BG=fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zG=t=>{const e={};let s,r,i;return t&&t.split(`
`).forEach(function(u){i=u.indexOf(":"),s=u.substring(0,i).trim().toLowerCase(),r=u.substring(i+1).trim(),!(!s||e[s]&&BG[s])&&(s==="set-cookie"?e[s]?e[s].push(r):e[s]=[r]:e[s]=e[s]?e[s]+", "+r:r)}),e},A2=Symbol("internals");function ud(t){return t&&String(t).trim().toLowerCase()}function Vm(t){return t===!1||t==null?t:fe.isArray(t)?t.map(Vm):String(t)}function FG(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(t);)e[r[1]]=r[2];return e}const HG=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function R0(t,e,s,r,i){if(fe.isFunction(r))return r.call(this,e,s);if(i&&(e=s),!!fe.isString(e)){if(fe.isString(r))return e.indexOf(r)!==-1;if(fe.isRegExp(r))return r.test(e)}}function VG(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,r)=>s.toUpperCase()+r)}function GG(t,e){const s=fe.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+s,{value:function(i,o,u){return this[r].call(this,e,i,o,u)},configurable:!0})})}let Er=class{constructor(e){e&&this.set(e)}set(e,s,r){const i=this;function o(h,m,f){const p=ud(m);if(!p)throw new Error("header name must be a non-empty string");const x=fe.findKey(i,p);(!x||i[x]===void 0||f===!0||f===void 0&&i[x]!==!1)&&(i[x||m]=Vm(h))}const u=(h,m)=>fe.forEach(h,(f,p)=>o(f,p,m));if(fe.isPlainObject(e)||e instanceof this.constructor)u(e,s);else if(fe.isString(e)&&(e=e.trim())&&!HG(e))u(zG(e),s);else if(fe.isObject(e)&&fe.isIterable(e)){let h={},m,f;for(const p of e){if(!fe.isArray(p))throw TypeError("Object iterator must return a key-value pair");h[f=p[0]]=(m=h[f])?fe.isArray(m)?[...m,p[1]]:[m,p[1]]:p[1]}u(h,s)}else e!=null&&o(s,e,r);return this}get(e,s){if(e=ud(e),e){const r=fe.findKey(this,e);if(r){const i=this[r];if(!s)return i;if(s===!0)return FG(i);if(fe.isFunction(s))return s.call(this,i,r);if(fe.isRegExp(s))return s.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=ud(e),e){const r=fe.findKey(this,e);return!!(r&&this[r]!==void 0&&(!s||R0(this,this[r],r,s)))}return!1}delete(e,s){const r=this;let i=!1;function o(u){if(u=ud(u),u){const h=fe.findKey(r,u);h&&(!s||R0(r,r[h],h,s))&&(delete r[h],i=!0)}}return fe.isArray(e)?e.forEach(o):o(e),i}clear(e){const s=Object.keys(this);let r=s.length,i=!1;for(;r--;){const o=s[r];(!e||R0(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const s=this,r={};return fe.forEach(this,(i,o)=>{const u=fe.findKey(r,o);if(u){s[u]=Vm(i),delete s[o];return}const h=e?VG(o):String(o).trim();h!==o&&delete s[o],s[h]=Vm(i),r[h]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return fe.forEach(this,(r,i)=>{r!=null&&r!==!1&&(s[i]=e&&fe.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const r=new this(e);return s.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[A2]=this[A2]={accessors:{}}).accessors,i=this.prototype;function o(u){const h=ud(u);r[h]||(GG(i,u),r[h]=!0)}return fe.isArray(e)?e.forEach(o):o(e),this}};Er.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);fe.reduceDescriptors(Er.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[s]=r}}});fe.freezeMethods(Er);function M0(t,e){const s=this||ch,r=e||s,i=Er.from(r.headers);let o=r.data;return fe.forEach(t,function(h){o=h.call(s,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function $C(t){return!!(t&&t.__CANCEL__)}function su(t,e,s){at.call(this,t??"canceled",at.ERR_CANCELED,e,s),this.name="CanceledError"}fe.inherits(su,at,{__CANCEL__:!0});function UC(t,e,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?t(s):e(new at("Request failed with status code "+s.status,[at.ERR_BAD_REQUEST,at.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function ZG(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function YG(t,e){t=t||10;const s=new Array(t),r=new Array(t);let i=0,o=0,u;return e=e!==void 0?e:1e3,function(m){const f=Date.now(),p=r[o];u||(u=f),s[i]=m,r[i]=f;let x=o,b=0;for(;x!==i;)b+=s[x++],x=x%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),f-u<e)return;const j=p&&f-p;return j?Math.round(b*1e3/j):void 0}}function KG(t,e){let s=0,r=1e3/e,i,o;const u=(f,p=Date.now())=>{s=p,i=null,o&&(clearTimeout(o),o=null),t(...f)};return[(...f)=>{const p=Date.now(),x=p-s;x>=r?u(f,p):(i=f,o||(o=setTimeout(()=>{o=null,u(i)},r-x)))},()=>i&&u(i)]}const _f=(t,e,s=3)=>{let r=0;const i=YG(50,250);return KG(o=>{const u=o.loaded,h=o.lengthComputable?o.total:void 0,m=u-r,f=i(m),p=u<=h;r=u;const x={loaded:u,total:h,progress:h?u/h:void 0,bytes:m,rate:f||void 0,estimated:f&&h&&p?(h-u)/f:void 0,event:o,lengthComputable:h!=null,[e?"download":"upload"]:!0};t(x)},s)},k2=(t,e)=>{const s=t!=null;return[r=>e[0]({lengthComputable:s,total:t,loaded:r}),e[1]]},T2=t=>(...e)=>fe.asap(()=>t(...e)),WG=ar.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,ar.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(ar.origin),ar.navigator&&/(msie|trident)/i.test(ar.navigator.userAgent)):()=>!0,QG=ar.hasStandardBrowserEnv?{write(t,e,s,r,i,o){const u=[t+"="+encodeURIComponent(e)];fe.isNumber(s)&&u.push("expires="+new Date(s).toGMTString()),fe.isString(r)&&u.push("path="+r),fe.isString(i)&&u.push("domain="+i),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function XG(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function JG(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function BC(t,e,s){let r=!XG(e);return t&&(r||s==!1)?JG(t,e):e}const O2=t=>t instanceof Er?{...t}:t;function co(t,e){e=e||{};const s={};function r(f,p,x,b){return fe.isPlainObject(f)&&fe.isPlainObject(p)?fe.merge.call({caseless:b},f,p):fe.isPlainObject(p)?fe.merge({},p):fe.isArray(p)?p.slice():p}function i(f,p,x,b){if(fe.isUndefined(p)){if(!fe.isUndefined(f))return r(void 0,f,x,b)}else return r(f,p,x,b)}function o(f,p){if(!fe.isUndefined(p))return r(void 0,p)}function u(f,p){if(fe.isUndefined(p)){if(!fe.isUndefined(f))return r(void 0,f)}else return r(void 0,p)}function h(f,p,x){if(x in e)return r(f,p);if(x in t)return r(void 0,f)}const m={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:h,headers:(f,p,x)=>i(O2(f),O2(p),x,!0)};return fe.forEach(Object.keys({...t,...e}),function(p){const x=m[p]||i,b=x(t[p],e[p],p);fe.isUndefined(b)&&x!==h||(s[p]=b)}),s}const zC=t=>{const e=co({},t);let{data:s,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:u,auth:h}=e;e.headers=u=Er.from(u),e.url=qC(BC(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&u.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let m;if(fe.isFormData(s)){if(ar.hasStandardBrowserEnv||ar.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((m=u.getContentType())!==!1){const[f,...p]=m?m.split(";").map(x=>x.trim()).filter(Boolean):[];u.setContentType([f||"multipart/form-data",...p].join("; "))}}if(ar.hasStandardBrowserEnv&&(r&&fe.isFunction(r)&&(r=r(e)),r||r!==!1&&WG(e.url))){const f=i&&o&&QG.read(o);f&&u.set(i,f)}return e},eZ=typeof XMLHttpRequest<"u",tZ=eZ&&function(t){return new Promise(function(s,r){const i=zC(t);let o=i.data;const u=Er.from(i.headers).normalize();let{responseType:h,onUploadProgress:m,onDownloadProgress:f}=i,p,x,b,j,v;function S(){j&&j(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let _=new XMLHttpRequest;_.open(i.method.toUpperCase(),i.url,!0),_.timeout=i.timeout;function E(){if(!_)return;const O=Er.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),k={data:!h||h==="text"||h==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:O,config:t,request:_};UC(function(B){s(B),S()},function(B){r(B),S()},k),_=null}"onloadend"in _?_.onloadend=E:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(E)},_.onabort=function(){_&&(r(new at("Request aborted",at.ECONNABORTED,t,_)),_=null)},_.onerror=function(){r(new at("Network Error",at.ERR_NETWORK,t,_)),_=null},_.ontimeout=function(){let F=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const k=i.transitional||PC;i.timeoutErrorMessage&&(F=i.timeoutErrorMessage),r(new at(F,k.clarifyTimeoutError?at.ETIMEDOUT:at.ECONNABORTED,t,_)),_=null},o===void 0&&u.setContentType(null),"setRequestHeader"in _&&fe.forEach(u.toJSON(),function(F,k){_.setRequestHeader(k,F)}),fe.isUndefined(i.withCredentials)||(_.withCredentials=!!i.withCredentials),h&&h!=="json"&&(_.responseType=i.responseType),f&&([b,v]=_f(f,!0),_.addEventListener("progress",b)),m&&_.upload&&([x,j]=_f(m),_.upload.addEventListener("progress",x),_.upload.addEventListener("loadend",j)),(i.cancelToken||i.signal)&&(p=O=>{_&&(r(!O||O.type?new su(null,t,_):O),_.abort(),_=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const A=ZG(i.url);if(A&&ar.protocols.indexOf(A)===-1){r(new at("Unsupported protocol "+A+":",at.ERR_BAD_REQUEST,t));return}_.send(o||null)})},sZ=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let r=new AbortController,i;const o=function(f){if(!i){i=!0,h();const p=f instanceof Error?f:this.reason;r.abort(p instanceof at?p:new su(p instanceof Error?p.message:p))}};let u=e&&setTimeout(()=>{u=null,o(new at(`timeout ${e} of ms exceeded`,at.ETIMEDOUT))},e);const h=()=>{t&&(u&&clearTimeout(u),u=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(o):f.removeEventListener("abort",o)}),t=null)};t.forEach(f=>f.addEventListener("abort",o));const{signal:m}=r;return m.unsubscribe=()=>fe.asap(h),m}},rZ=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let r=0,i;for(;r<s;)i=r+e,yield t.slice(r,i),r=i},nZ=async function*(t,e){for await(const s of aZ(t))yield*rZ(s,e)},aZ=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:r}=await e.read();if(s)break;yield r}}finally{await e.cancel()}},R2=(t,e,s,r)=>{const i=nZ(t,e);let o=0,u,h=m=>{u||(u=!0,r&&r(m))};return new ReadableStream({async pull(m){try{const{done:f,value:p}=await i.next();if(f){h(),m.close();return}let x=p.byteLength;if(s){let b=o+=x;s(b)}m.enqueue(new Uint8Array(p))}catch(f){throw h(f),f}},cancel(m){return h(m),i.return()}},{highWaterMark:2})},Qf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",FC=Qf&&typeof ReadableStream=="function",iZ=Qf&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),HC=(t,...e)=>{try{return!!t(...e)}catch{return!1}},lZ=FC&&HC(()=>{let t=!1;const e=new Request(ar.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),M2=64*1024,Rx=FC&&HC(()=>fe.isReadableStream(new Response("").body)),jf={stream:Rx&&(t=>t.body)};Qf&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!jf[e]&&(jf[e]=fe.isFunction(t[e])?s=>s[e]():(s,r)=>{throw new at(`Response type '${e}' is not supported`,at.ERR_NOT_SUPPORT,r)})})})(new Response);const oZ=async t=>{if(t==null)return 0;if(fe.isBlob(t))return t.size;if(fe.isSpecCompliantForm(t))return(await new Request(ar.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(fe.isArrayBufferView(t)||fe.isArrayBuffer(t))return t.byteLength;if(fe.isURLSearchParams(t)&&(t=t+""),fe.isString(t))return(await iZ(t)).byteLength},cZ=async(t,e)=>{const s=fe.toFiniteNumber(t.getContentLength());return s??oZ(e)},uZ=Qf&&(async t=>{let{url:e,method:s,data:r,signal:i,cancelToken:o,timeout:u,onDownloadProgress:h,onUploadProgress:m,responseType:f,headers:p,withCredentials:x="same-origin",fetchOptions:b}=zC(t);f=f?(f+"").toLowerCase():"text";let j=sZ([i,o&&o.toAbortSignal()],u),v;const S=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let _;try{if(m&&lZ&&s!=="get"&&s!=="head"&&(_=await cZ(p,r))!==0){let k=new Request(e,{method:"POST",body:r,duplex:"half"}),L;if(fe.isFormData(r)&&(L=k.headers.get("content-type"))&&p.setContentType(L),k.body){const[B,w]=k2(_,_f(T2(m)));r=R2(k.body,M2,B,w)}}fe.isString(x)||(x=x?"include":"omit");const E="credentials"in Request.prototype;v=new Request(e,{...b,signal:j,method:s.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:E?x:void 0});let A=await fetch(v,b);const O=Rx&&(f==="stream"||f==="response");if(Rx&&(h||O&&S)){const k={};["status","statusText","headers"].forEach(C=>{k[C]=A[C]});const L=fe.toFiniteNumber(A.headers.get("content-length")),[B,w]=h&&k2(L,_f(T2(h),!0))||[];A=new Response(R2(A.body,M2,B,()=>{w&&w(),S&&S()}),k)}f=f||"text";let F=await jf[fe.findKey(jf,f)||"text"](A,t);return!O&&S&&S(),await new Promise((k,L)=>{UC(k,L,{data:F,headers:Er.from(A.headers),status:A.status,statusText:A.statusText,config:t,request:v})})}catch(E){throw S&&S(),E&&E.name==="TypeError"&&/Load failed|fetch/i.test(E.message)?Object.assign(new at("Network Error",at.ERR_NETWORK,t,v),{cause:E.cause||E}):at.from(E,E&&E.code,t,v)}}),Mx={http:SG,xhr:tZ,fetch:uZ};fe.forEach(Mx,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const D2=t=>`- ${t}`,dZ=t=>fe.isFunction(t)||t===null||t===!1,VC={getAdapter:t=>{t=fe.isArray(t)?t:[t];const{length:e}=t;let s,r;const i={};for(let o=0;o<e;o++){s=t[o];let u;if(r=s,!dZ(s)&&(r=Mx[(u=String(s)).toLowerCase()],r===void 0))throw new at(`Unknown adapter '${u}'`);if(r)break;i[u||"#"+o]=r}if(!r){const o=Object.entries(i).map(([h,m])=>`adapter ${h} `+(m===!1?"is not supported by the environment":"is not available in the build"));let u=e?o.length>1?`since :
`+o.map(D2).join(`
`):" "+D2(o[0]):"as no adapter specified";throw new at("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:Mx};function D0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new su(null,t)}function L2(t){return D0(t),t.headers=Er.from(t.headers),t.data=M0.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),VC.getAdapter(t.adapter||ch.adapter)(t).then(function(r){return D0(t),r.data=M0.call(t,t.transformResponse,r),r.headers=Er.from(r.headers),r},function(r){return $C(r)||(D0(t),r&&r.response&&(r.response.data=M0.call(t,t.transformResponse,r.response),r.response.headers=Er.from(r.response.headers))),Promise.reject(r)})}const GC="1.11.0",Xf={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Xf[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const q2={};Xf.transitional=function(e,s,r){function i(o,u){return"[Axios v"+GC+"] Transitional option '"+o+"'"+u+(r?". "+r:"")}return(o,u,h)=>{if(e===!1)throw new at(i(u," has been removed"+(s?" in "+s:"")),at.ERR_DEPRECATED);return s&&!q2[u]&&(q2[u]=!0,console.warn(i(u," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(o,u,h):!0}};Xf.spelling=function(e){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function hZ(t,e,s){if(typeof t!="object")throw new at("options must be an object",at.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],u=e[o];if(u){const h=t[o],m=h===void 0||u(h,o,t);if(m!==!0)throw new at("option "+o+" must be "+m,at.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new at("Unknown option "+o,at.ERR_BAD_OPTION)}}const Gm={assertOptions:hZ,validators:Xf},oa=Gm.validators;let Ql=class{constructor(e){this.defaults=e||{},this.interceptors={request:new C2,response:new C2}}async request(e,s){try{return await this._request(e,s)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=co(this.defaults,s);const{transitional:r,paramsSerializer:i,headers:o}=s;r!==void 0&&Gm.assertOptions(r,{silentJSONParsing:oa.transitional(oa.boolean),forcedJSONParsing:oa.transitional(oa.boolean),clarifyTimeoutError:oa.transitional(oa.boolean)},!1),i!=null&&(fe.isFunction(i)?s.paramsSerializer={serialize:i}:Gm.assertOptions(i,{encode:oa.function,serialize:oa.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Gm.assertOptions(s,{baseUrl:oa.spelling("baseURL"),withXsrfToken:oa.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let u=o&&fe.merge(o.common,o[s.method]);o&&fe.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),s.headers=Er.concat(u,o);const h=[];let m=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(s)===!1||(m=m&&S.synchronous,h.unshift(S.fulfilled,S.rejected))});const f=[];this.interceptors.response.forEach(function(S){f.push(S.fulfilled,S.rejected)});let p,x=0,b;if(!m){const v=[L2.bind(this),void 0];for(v.unshift(...h),v.push(...f),b=v.length,p=Promise.resolve(s);x<b;)p=p.then(v[x++],v[x++]);return p}b=h.length;let j=s;for(x=0;x<b;){const v=h[x++],S=h[x++];try{j=v(j)}catch(_){S.call(this,_);break}}try{p=L2.call(this,j)}catch(v){return Promise.reject(v)}for(x=0,b=f.length;x<b;)p=p.then(f[x++],f[x++]);return p}getUri(e){e=co(this.defaults,e);const s=BC(e.baseURL,e.url,e.allowAbsoluteUrls);return qC(s,e.params,e.paramsSerializer)}};fe.forEach(["delete","get","head","options"],function(e){Ql.prototype[e]=function(s,r){return this.request(co(r||{},{method:e,url:s,data:(r||{}).data}))}});fe.forEach(["post","put","patch"],function(e){function s(r){return function(o,u,h){return this.request(co(h||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:u}))}}Ql.prototype[e]=s(),Ql.prototype[e+"Form"]=s(!0)});let mZ=class ZC{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(o){s=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const u=new Promise(h=>{r.subscribe(h),o=h}).then(i);return u.cancel=function(){r.unsubscribe(o)},u},e(function(o,u,h){r.reason||(r.reason=new su(o,u,h),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=r=>{e.abort(r)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new ZC(function(i){e=i}),cancel:e}}};function fZ(t){return function(s){return t.apply(null,s)}}function pZ(t){return fe.isObject(t)&&t.isAxiosError===!0}const Dx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Dx).forEach(([t,e])=>{Dx[e]=t});function YC(t){const e=new Ql(t),s=NC(Ql.prototype.request,e);return fe.extend(s,Ql.prototype,e,{allOwnKeys:!0}),fe.extend(s,e,null,{allOwnKeys:!0}),s.create=function(i){return YC(co(t,i))},s}const gs=YC(ch);gs.Axios=Ql;gs.CanceledError=su;gs.CancelToken=mZ;gs.isCancel=$C;gs.VERSION=GC;gs.toFormData=Wf;gs.AxiosError=at;gs.Cancel=gs.CanceledError;gs.all=function(e){return Promise.all(e)};gs.spread=fZ;gs.isAxiosError=pZ;gs.mergeConfig=co;gs.AxiosHeaders=Er;gs.formToJSON=t=>IC(fe.isHTMLForm(t)?new FormData(t):t);gs.getAdapter=VC.getAdapter;gs.HttpStatusCode=Dx;gs.default=gs;const{Axios:BZ,AxiosError:zZ,CanceledError:FZ,isCancel:HZ,CancelToken:VZ,VERSION:GZ,all:ZZ,Cancel:YZ,isAxiosError:KZ,spread:WZ,toFormData:QZ,AxiosHeaders:XZ,HttpStatusCode:JZ,formToJSON:eY,getAdapter:tY,mergeConfig:sY}=gs,gZ="http://localhost:3001";class xZ{apiClient=gs.create({baseURL:`${gZ}/api/v1/openlearning`,headers:{"Content-Type":"application/json"}});constructor(){this.apiClient.interceptors.request.use(async e=>{const{data:{session:s}}=await V.auth.getSession();return s?.access_token&&(e.headers.Authorization=`Bearer ${s.access_token}`),e})}async provisionCurrentUser(){try{const e=JSON.parse(localStorage.getItem("eau_member")||"{}");if(!e.id)throw new Error("No user logged in");return(await this.apiClient.post("/provision",{memberId:e.id})).data}catch(e){return console.error("Error provisioning user:",e),{success:!1,error:e.response?.data?.error||e.message}}}async generateSSOUrl(e,s){try{return(await this.apiClient.post("/sso",{classId:e,returnUrl:s||window.location.origin})).data}catch(r){return console.error("Error generating SSO URL:",r),{success:!1,error:r.response?.data?.error||r.message}}}async launchSSO(e,s=!0){try{const r="https://www.openlearning.com/saml-redirect/english-australia/english-australia/";if(s){if(!window.open(r,"_blank","width=1024,height=768,scrollbars=yes,resizable=yes"))throw new Error("Pop-up blocked. Please allow pop-ups for this site and try again.")}else window.location.href=r;sessionStorage.setItem("openlearning_launched",new Date().toISOString())}catch(r){throw console.error("Error launching OpenLearning SSO:",r),new Error(r.message||"Failed to launch OpenLearning SSO")}}async getStatus(e){try{const s=e?`/status/${e}`:"/status";return(await this.apiClient.get(s)).data}catch(s){return console.error("Error getting OpenLearning status:",s),{success:!1,error:s.response?.data?.error||s.message}}}async getCourses(e){try{const s=e?`/courses/${e}`:"/courses";return(await this.apiClient.get(s)).data}catch(s){return console.error("Error getting courses:",s),{success:!1,error:s.response?.data?.error||s.message}}}async syncCourses(e){try{return(await this.apiClient.post("/sync",{memberId:e})).data}catch(s){return console.error("Error syncing courses:",s),{success:!1,error:s.response?.data?.error||s.message}}}async bulkProvision(e){try{return(await this.apiClient.post("/bulk-provision",{memberIds:e})).data}catch(s){return console.error("Error bulk provisioning:",s),{success:!1,error:s.response?.data?.error||s.message}}}isAuthenticated(){return!!sessionStorage.getItem("openlearning_session")}clearSession(){sessionStorage.removeItem("openlearning_session")}}const Zm=new xZ,yZ=Object.freeze(Object.defineProperty({__proto__:null,openLearningService:Zm},Symbol.toStringTag,{value:"Module"})),P2={async getMemberById(t){const{data:e,error:s}=await V.from("members").select(`
        *,
        cpd_activities_count:cpd_activities(count),
        events_count:event_registrations(count)
      `).eq("id",t).single();if(s)throw s;return{...e,cpd_activities_count:e.cpd_activities_count?.[0]?.count||0,events_count:e.events_count?.[0]?.count||0,payments_count:0}},async searchMembers(t){const{data:e,error:s}=await V.from("members").select("*").or(`first_name.ilike.%${t}%,last_name.ilike.%${t}%,email.ilike.%${t}%`).limit(10);if(s)throw s;return e},async getAllMembers(){const{data:t,error:e}=await V.from("members").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}};function bZ(){const t=Ns(),[e,s]=M.useState(!1),[r,i]=M.useState([]),[o,u]=M.useState([]),[h,m]=M.useState({}),[f,p]=M.useState({totalMembers:0,provisionedMembers:0,totalCourses:0,syncedActivities:0});M.useEffect(()=>{x(),b()},[]);const x=async()=>{try{const A=await P2.getAllMembers();i(A.members||[])}catch(A){console.error("Error loading members:",A),Os("error","Failed to load members")}},b=async()=>{try{const O=(await P2.getAllMembers()).members||[],F=O.filter(k=>k.openlearning_user_id).length;p({totalMembers:O.length,provisionedMembers:F,totalCourses:0,syncedActivities:0})}catch(A){console.error("Error loading stats:",A)}},j=async()=>{if(o.length===0){Os("warning","Please select members to provision");return}s(!0);try{const A=await Zm.bulkProvision(o);if(A.success&&A.results){const{provisioned:O,failed:F,alreadyProvisioned:k}=A.results,L={};O.forEach(B=>L[B]="success"),F.forEach(({memberId:B})=>L[B]="failed"),k.forEach(B=>L[B]="already"),m(L),Os("success",`Provisioned ${O.length} members successfully. ${F.length} failed, ${k.length} already provisioned.`),await x(),await b(),u([])}else Os("error",A.error||"Provisioning failed")}catch(A){console.error("Error provisioning members:",A),Os("error","Failed to provision members")}finally{s(!1)}},v=async A=>{s(!0);try{const O=await Zm.syncCourses(A);O.success?(Os("success",O.message||"Courses synced successfully"),await b()):Os("error",O.error||"Sync failed")}catch(O){console.error("Error syncing courses:",O),Os("error","Failed to sync courses")}finally{s(!1)}},S=async A=>{try{if(!r.find(F=>F.id===A))return;await Zm.launchSSO(void 0,!0),Os("info","Opening OpenLearning in new window...")}catch(O){console.error("Error launching SSO:",O),Os("error","Failed to launch OpenLearning")}},_=A=>{u(O=>O.includes(A)?O.filter(F=>F!==A):[...O,A])},E=()=>{const A=r.filter(O=>!O.openlearning_user_id).map(O=>O.id);u(A)};return n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"OpenLearning Integration"}),n.jsx(se,{variant:"outline",onClick:()=>t("/admin"),children:"Back to Admin"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[n.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Members"}),n.jsx("p",{className:"text-2xl font-bold",children:f.totalMembers})]}),n.jsx(Cr,{className:"h-8 w-8 text-blue-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Provisioned"}),n.jsx("p",{className:"text-2xl font-bold",children:f.provisionedMembers})]}),n.jsx(ls,{className:"h-8 w-8 text-green-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Courses"}),n.jsx("p",{className:"text-2xl font-bold",children:f.totalCourses})]}),n.jsx(hf,{className:"h-8 w-8 text-purple-500"})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"CPD Activities"}),n.jsx("p",{className:"text-2xl font-bold",children:f.syncedActivities})]}),n.jsx(Ad,{className:"h-8 w-8 text-orange-500"})]})})]}),n.jsx("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(se,{onClick:E,variant:"outline",disabled:e,children:"Select All Unprovisioned"}),n.jsx(se,{onClick:j,disabled:e||o.length===0,children:e?n.jsxs(n.Fragment,{children:[n.jsx(hn,{className:"animate-spin h-4 w-4 mr-2"}),"Provisioning..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Provision Selected (",o.length,")"]})})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[o.length," of ",r.length," members selected"]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.jsx("input",{type:"checkbox",checked:o.length===r.filter(A=>!A.openlearning_user_id).length,onChange:A=>{A.target.checked?E():u([])},className:"rounded border-gray-300"})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"OpenLearning ID"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(A=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("input",{type:"checkbox",checked:o.includes(A.id),onChange:()=>_(A.id),disabled:A.openlearning_user_id,className:"rounded border-gray-300"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[A.first_name," ",A.last_name]}),n.jsx("div",{className:"text-sm text-gray-500",children:A.email})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.openlearning_user_id?n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(ls,{className:"h-3 w-3 mr-1"}),"Provisioned"]}):h[A.id]==="failed"?n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[n.jsx(sl,{className:"h-3 w-3 mr-1"}),"Failed"]}):n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Not Provisioned"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A.openlearning_user_id||"-"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsx("div",{className:"flex items-center gap-2",children:A.openlearning_user_id&&n.jsxs(n.Fragment,{children:[n.jsxs(se,{size:"sm",variant:"outline",onClick:()=>v(A.id),disabled:e,children:[n.jsx(Ad,{className:"h-3 w-3 mr-1"}),"Sync"]}),n.jsxs(se,{size:"sm",variant:"outline",onClick:()=>S(A.id),children:[n.jsx(cx,{className:"h-3 w-3 mr-1"}),"Open"]})]})})})]},A.id))})]})})]})})}const At=({children:t})=>{const{user:e,isLoading:s}=jt();return console.log(" PROTECTED ROUTE: isLoading:",s,"user:",!!e),s?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e?n.jsx(vI,{children:t}):n.jsx(jd,{to:"/login",replace:!0})},L0=({children:t})=>{const{user:e,isLoading:s}=jt();return s?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e?n.jsx(jd,{to:"/dashboard",replace:!0}):n.jsx(n.Fragment,{children:t})},vZ=()=>n.jsxs(z4,{children:[n.jsx(ft,{path:"/login",element:n.jsx(L0,{children:n.jsx(BM,{})})}),n.jsx(ft,{path:"/forgot-password",element:n.jsx(L0,{children:n.jsx(ED,{})})}),n.jsx(ft,{path:"/signup",element:n.jsx(L0,{children:n.jsx(CD,{})})}),n.jsx(ft,{path:"/",element:n.jsx(jd,{to:"/dashboard",replace:!0})}),n.jsx(ft,{path:"/unauthorized",element:n.jsx(kq,{})}),n.jsx(ft,{path:"/dashboard",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_MEMBER_DASHBOARD",children:n.jsx(Aq,{})})})}),n.jsx(ft,{path:"/cpd",element:n.jsx(At,{children:n.jsx(Ot,{permission:"CREATE_CPD",children:n.jsx(s9,{})})})}),n.jsx(ft,{path:"/cpd/review",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(r9,{})})})}),n.jsx(ft,{path:"/cpd/settings",element:n.jsx(At,{children:n.jsx(Ot,{roles:["AdminSuper"],children:n.jsx(n9,{})})})}),n.jsx(ft,{path:"/cpd/management",element:n.jsx(At,{children:n.jsx(Ot,{roles:["Admin","AdminSuper"],children:n.jsx(a9,{})})})}),n.jsx(ft,{path:"/events",element:n.jsx(At,{children:n.jsx(Ot,{permission:"REGISTER_EVENT",children:n.jsx(i9,{})})})}),n.jsx(ft,{path:"/events/:slug",element:n.jsx(At,{children:n.jsx(Ot,{permission:"REGISTER_EVENT",children:n.jsx(u9,{})})})}),n.jsx(ft,{path:"/my-registrations",element:n.jsx(At,{children:n.jsx(Ot,{permission:"REGISTER_EVENT",children:n.jsx(d9,{})})})}),n.jsx(ft,{path:"/profile",element:n.jsx(At,{children:n.jsx(ZI,{})})}),n.jsx(ft,{path:"/admin",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(wI,{})})})}),n.jsx(ft,{path:"/admin/members",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(AI,{})})})}),n.jsx(ft,{path:"/admin/membership",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(TI,{})})})}),n.jsx(ft,{path:"/admin/institutions",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(OI,{})})})}),n.jsx(ft,{path:"/admin/openlearning",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(bZ,{})})})}),n.jsx(ft,{path:"/admin/import-activities",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(LI,{})})})}),n.jsx(ft,{path:"/admin/editor-test",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(AV,{})})})}),n.jsx(ft,{path:"/admin/rich-content-test",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(kV,{})})})}),n.jsx(ft,{path:"/admin/wysiwyg-test",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(TV,{})})})}),n.jsx(ft,{path:"/admin/quill-debug",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(OV,{})})})}),n.jsx(ft,{path:"/admin/overflow-test",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(RV,{})})})}),n.jsx(ft,{path:"/admin/list-debug",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(LV,{})})})}),n.jsx(ft,{path:"/admin/import-system",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx($I,{})})})}),n.jsx(ft,{path:"/admin/events",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(yV,{})})})}),n.jsx(ft,{path:"/admin/smtp-settings",element:n.jsx(At,{children:n.jsx(Ot,{roles:["AdminSuper"],children:n.jsx(bV,{})})})}),n.jsx(ft,{path:"/admin/emailjs-config",element:n.jsx(At,{children:n.jsx(Ot,{roles:["AdminSuper"],children:n.jsx(vV,{})})})}),n.jsx(ft,{path:"/admin/email-templates",element:n.jsx(At,{children:n.jsx(Ot,{roles:["AdminSuper"],children:n.jsx(_V,{})})})}),n.jsx(ft,{path:"/admin/event-reminders",element:n.jsx(At,{children:n.jsx(Ot,{roles:["AdminSuper"],children:n.jsx(NV,{})})})}),n.jsx(ft,{path:"/admin/setup-media",element:n.jsx(At,{children:n.jsx(Ot,{permission:"ACCESS_ADMIN_DASHBOARD",children:n.jsx(EV,{})})})}),n.jsx(ft,{path:"/admin/duplicates",element:n.jsx(At,{children:n.jsx(Ot,{roles:["Admin","AdminSuper"],children:n.jsx(IV,{})})})}),n.jsx(ft,{path:"/admin/bulk-management",element:n.jsx(At,{children:n.jsx(Ot,{roles:["AdminSuper"],children:n.jsx($V,{})})})}),n.jsx(ft,{path:"*",element:n.jsx(jd,{to:"/dashboard",replace:!0})})]}),wZ=()=>{Object.keys(localStorage).filter(e=>e.includes("supabase")||e.includes("sb-")||e.includes("auth")).forEach(e=>{localStorage.removeItem(e)}),console.log("Supabase cache cleared")};class _Z extends M.Component{state={hasError:!1,error:null};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("Uncaught error:",e,s)}handleReset=()=>{console.log("ErrorBoundary: Performing full reset"),wZ(),localStorage.clear(),sessionStorage.clear(),window.location.href="/login"};handleHardReload=()=>{console.log("ErrorBoundary: Performing hard reload"),localStorage.clear(),sessionStorage.clear(),window.location.reload()};render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"An error occurred while loading the application. This might be due to cached data."}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("button",{onClick:this.handleReset,className:"w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors font-medium",children:" Clear All Data & Go to Login"}),n.jsx("button",{onClick:this.handleHardReload,className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors font-medium",children:" Hard Reload Page"}),n.jsx("button",{onClick:()=>window.location.href="/login",className:"w-full bg-gray-200 text-gray-700 py-2 px-4 rounded hover:bg-gray-300 transition-colors",children:" Go to Login Page"})]}),!1]})}):this.props.children}}const jZ=()=>{const{isLoading:t}=jt();M.useEffect(()=>{let e;return t&&(e=setTimeout(()=>{console.error("Auth health check - extremely long loading time");const s=jt.getState();s.isLoading&&(console.warn("Force stopping loading after timeout"),s.setIsLoading(!1),s.setRolesLoaded(!0))},5e3)),()=>{e&&clearTimeout(e)}},[t])};function NZ(){const{setUser:t,setIsLoading:e,setRoles:s}=jt();return jZ(),M.useEffect(()=>{(async()=>{try{const{data:{session:o}}=await tx.getSession();o?.user?(t(o.user),o.user.email==="rrzillesg@gmail.com"?s(["AdminSuper","Admin","Members"]):s(["Members"])):(t(null),s([]))}catch(o){console.error("Auth error:",o),t(null),s([])}finally{e(!1)}})();const{data:{subscription:i}}=tx.onAuthStateChange(async(o,u)=>{t(u?.user??null),u?.user?u.user.email==="rrzillesg@gmail.com"?s(["AdminSuper","Admin","Members"]):s(["Members"]):s([])});return()=>{i.unsubscribe()}},[]),n.jsx(_Z,{children:n.jsx(dT,{children:n.jsx(vZ,{})})})}Qk.createRoot(document.getElementById("root")).render(n.jsx(NZ,{}))});export default SZ();
